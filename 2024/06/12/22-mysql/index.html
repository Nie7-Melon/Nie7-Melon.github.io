<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>数据库--mysql学习 | Melon_Nie的月光橘海</title><meta name="author" content="Melon_Nie"><meta name="copyright" content="Melon_Nie"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="数据库课程学习时的笔记，包含常用命令、语法、易混淆点、例题……比较全，需要时可以快速查找">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库--mysql学习">
<meta property="og:url" content="http://example.com/2024/06/12/22-mysql/index.html">
<meta property="og:site_name" content="Melon_Nie的月光橘海">
<meta property="og:description" content="数据库课程学习时的笔记，包含常用命令、语法、易混淆点、例题……比较全，需要时可以快速查找">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/myimg/lolcute2.png">
<meta property="article:published_time" content="2024-06-12T13:17:21.000Z">
<meta property="article:modified_time" content="2025-06-03T12:01:45.936Z">
<meta property="article:author" content="Melon_Nie">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/myimg/lolcute2.png"><link rel="shortcut icon" href="/./myimg/cake.png"><link rel="canonical" href="http://example.com/2024/06/12/22-mysql/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库--mysql学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/./myimg/avatar1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">45</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(./myimg/lolcute2.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Melon_Nie的月光橘海</span></a><a class="nav-page-title" href="/"><span class="site-name">数据库--mysql学习</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">数据库--mysql学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-12T13:17:21.000Z" title="发表于 2024-06-12 21:17:21">2024-06-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-06-03T12:01:45.936Z" title="更新于 2025-06-03 20:01:45">2025-06-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%8D%8F%E4%BD%9C/">前后端协作</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="新建表"><a href="#新建表" class="headerlink" title="新建表"></a>新建表</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名（</span><br><span class="line">列名 数据类型，…</span><br><span class="line">）</span><br></pre></td></tr></table></figure>
<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><ol>
<li><p>给指定字段添加数据<br>insert into 表名 (列1名，列2名) values(值1，值1);</p>
</li>
<li><p>给全部字段添加数据<br>insert into 表名values (值1,值2,….) ;</p>
</li>
<li><p>批量添加数据<br>insert into表名(列1名，列2名,…)values(值1,值2,…)，(值1，值2,…)，(值1，值2…);</p>
</li>
</ol>
<p>insert into 表名 values (值1,值2,…),(值1,值2,…),(值1，值2,..);</p>
<blockquote>
<p>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。<br>字符串和日期型数据应该包含在引号中。‘2002-03-03’<br>插入的数据大小，应该在字段的规定范围内。</p>
</blockquote>
<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p><code>update 表名 set 列名1=值1，列名2=值1,….[where 条件]</code></p>
<ul>
<li><p>eg 修改id为10010的性别和是否为党员<br>update S set ssex&#x3D;‘男 ‘ ，ifdangyuan&#x3D;1,….[where sno &#x3D; 10010]</p>
</li>
<li><p>eg 修改所有学生的入学日期为2022-9-1 不带where条件将更新整个表<br>update S set ruxueriqi &#x3D; ‘2022-09-01’ </p>
</li>
<li><p>eg 删除某一列的值：</p>
<p>delate 表名 set 列名1&#x3D;null [where 条件]</p>
</li>
</ul>
<h3 id="向已有表增加新列"><a href="#向已有表增加新列" class="headerlink" title="向已有表增加新列"></a>向已有表增加新列</h3><ul>
<li><p>新增一列<br>Alter table 表名  add  字段名及参数<br>eg:   alter table 课程表 add 所属专业 nchar(5)</p>
</li>
<li><p>新增多列<br>alter table 课程表 add 开课学院 nchar(10),任课教师 nchar(6)</p>
</li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p><code>delete from 表名 [where 条件]</code></p>
<blockquote>
<p>delete语句的条件可以也可以没有，没有条件回删除整张表的所有数据（清空表）</p>
<p>delete语句不能删除某一个字段（列）的值<br>删除某一个字段（列）的值可以用update</p>
</blockquote>
<ul>
<li>eg 删除表中性别为女的员工们<br>delate from 表名  where  sex&#x3D;‘女’;</li>
<li>删除表中所有行<br>delete from 表名;</li>
</ul>
<h3 id="删除表中已有列"><a href="#删除表中已有列" class="headerlink" title="删除表中已有列"></a>删除表中已有列</h3><p><code>alter table 表名 drop  column 列名</code><br> eg:  alter table 课程表 drop column 开课学院,任课教师</p>
<h3 id="改变表已有列的信息"><a href="#改变表已有列的信息" class="headerlink" title="改变表已有列的信息"></a>改变表已有列的信息</h3><h4 id="如把身高列的宽度增加一位"><a href="#如把身高列的宽度增加一位" class="headerlink" title="如把身高列的宽度增加一位"></a>如把身高列的宽度增加一位</h4><blockquote>
<p>原来列  hight numeric(5,2),</p>
<p>alter table S<br>alter column hight numeric(6,2);<br>意思是要修改表 <code>S</code> 中的列 <code>hight</code> 的数据类型和长度</p>
</blockquote>
<h3 id="把表1更名为表2"><a href="#把表1更名为表2" class="headerlink" title="把表1更名为表2"></a>把表1更名为表2</h3><blockquote>
<p>select  *  into 课程表2  from 课程表1<br>drop table  课程表1<br>把原1表全部表头和内容复制2表，再把1表删除掉</p>
</blockquote>
<h3 id="对已有列更名"><a href="#对已有列更名" class="headerlink" title="对已有列更名"></a>对已有列更名</h3><blockquote>
<p>假设原表课程表2已有大量数据，不可能重新建表，现要把”所属专业”改为“从属专业<br>alter table 课程表 add 从属专业 char(20)  update 课程表 set 从属专业&#x3D;所属专业<br>注：更新，把所尾专业的内容数据复制到从属专业列 alter table 课程表 drop column 所属专业 select * from 课程表 不要在意列的左右顺序，也不要在意行数据的上下位置顺</p>
<p>eg   把学生表的生日列修改为“出生日期”列:<br>alter table 学生表 add 出生日期 smalldatetime<br>update 学生表 set 出生日期&#x3D;生日<br>alter table 学生表 drop column 生日</p>
<p>注意，去过原有列有了约束之类的设置那么无法删除</p>
</blockquote>
<h3 id="把一个大表拆分成多个小表"><a href="#把一个大表拆分成多个小表" class="headerlink" title="把一个大表拆分成多个小表"></a>把一个大表拆分成多个小表</h3><p>把查询结果保存到一个新表中.(可拆分表,行向上拆分和合并)</p>
<blockquote>
<p>select exps1 into tablename from …… 把查询结果不以视图显示，而是默默地存放到一个新表中去（物理表）</p>
<p>select * into T1 from 学生表 where 性别&#x3D;’男’<br>select * from T1<br>select * into T2 from 学生表 where 性别&#x3D;’女’</p>
</blockquote>
<h3 id="把多个结构相同的表合并成一个大表"><a href="#把多个结构相同的表合并成一个大表" class="headerlink" title="把多个结构相同的表合并成一个大表"></a>把多个结构相同的表合并成一个大表</h3><h2 id="主要数据类"><a href="#主要数据类" class="headerlink" title="主要数据类"></a>主要数据类</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><ul>
<li>int 4字节   bignit 8字节   smallint 2字节  tinyint  1字节且是无符号数</li>
<li><strong>numeric(p,q) 小数</strong>，指定最多为p位，其中有q位小数</li>
<li>数据库中少用近似型float和double，多用准确型</li>
</ul>
<h3 id="字符串型"><a href="#字符串型" class="headerlink" title="字符串型"></a><mark>字符串型</mark></h3><ul>
<li>char(n) 没有中文汉字使用</li>
<li>varchar(n)没有中文汉字用，可变长度</li>
<li>nchar(n)有中文汉字用，长度固定且不太长</li>
<li>nvarchar(n)有中文汉字用，可变长度</li>
<li>text长篇内容</li>
</ul>
<blockquote>
<p><code>TEXT</code> 类型通常用于存储较长的文本信息，例如备注、描述、文章内容等。与其他字符串类型（如 <code>VARCHAR</code>）不同的是，<code>TEXT</code> 类型可以存储更大的文本值，并且不需要指定最大长度。这使得它非常适合存储可变长度的文本数据，无论文本内容有多长</p>
</blockquote>
<h3 id="日期时间型"><a href="#日期时间型" class="headerlink" title="日期时间型"></a>日期时间型</h3><ul>
<li><p>Datetime  占8字节空间来存放一个标准的日期时间，最早支持1753年。</p>
</li>
<li><p>Smalldatetime   占四字节，只支持 1900-1-1 -2079年</p>
<p><strong>Datetime支持到毫秒，Smalldatetime支持到分钟</strong></p>
<blockquote>
<p>一个日期是相对于1900-1-1的间隔天数，一个日期对应的是一个整数。所以日期其实是一个整数，使用公式显现成一个日期格式 日期1-日期2&#x3D;整数n 时间是一个相对于当天从00:00:00开始的秒数 时间间隔计算：t2-t1得间隔秒数</p>
<p>特别注意： 字符串常量，日期时间常量在sqlserver用单引号</p>
</blockquote>
</li>
</ul>
<h3 id="存放二进制的文件内容型"><a href="#存放二进制的文件内容型" class="headerlink" title="存放二进制的文件内容型"></a>存放二进制的文件内容型</h3><ul>
<li>binary(n)  用于存储固定长度的二进制数据</li>
<li>image    用于存储可变长度的二进制数据，通常用于存储图像、声音、视频等多媒体数据</li>
<li><strong>varbinary(max) QL Server 中更现代的用于存储可变长度二进制数据的数据类型，可以存储最大长度的二进制数据(推荐)</strong></li>
</ul>
<h2 id="数据完整性控制"><a href="#数据完整性控制" class="headerlink" title="数据完整性控制"></a>数据完整性控制</h2><p>完整性：数据是否完好无缺，是否符合要求</p>
<p>约束作用在表中的字段上，可在创建表和修改表的时候添加约束</p>
<h3 id="primary-key-主码约束"><a href="#primary-key-主码约束" class="headerlink" title="primary key 主码约束"></a>primary key 主码约束</h3><p>  建立表时,在列名后跟primary key </p>
<p>主码值不能为空，不能重复，用于唯一标记同一个表的不同数据一个表只能最多有一个主码，也可无主码。<br>此时这个属性叫主属性，其他列叫非主属性。</p>
<h3 id="unique-唯一约束"><a href="#unique-唯一约束" class="headerlink" title="unique 唯一约束"></a>unique 唯一约束</h3><p>建表时在最后加unique </p>
<p>限制一个表中某列值<mark>不能重复（比如微信号）但可以为空</mark>，对于候选码，一个表多个列可以分别使用unique约束</p>
<h3 id="foreign-key-外键约束"><a href="#foreign-key-外键约束" class="headerlink" title="foreign key 外键约束"></a>foreign key 外键约束</h3><p>让多张表的数据之间建立连接，保证数据的一致性和完整性</p>
<p><img src="C:/Users/mujiu/Pictures/外键.png"></p>
<blockquote>
<p>立足于成绩表时，把成绩表的学号参考学生表的学号，把成绩表中的课程号参考课程表的课程号. 完成约束后，不存在于学生表的人，不存在于课程表的课程，就不能在成绩表中出现. </p>
<p>create table 学生表(学号 char(7) not null primary key,姓名 char(10) not null ,性别 char(2) ,年龄 tinyint,所在系 char(20))<br>create table 课程表(课程号 char(6) not null primary key,课程名 char(20) not null,学分 tinyint,学期 tinyint)<br>create table 成绩表( 学号 char(7) not null,课程号 char(6) not null,成绩 tinyint,<br>primary key(学号,课程号),<br>foreign key(学号) references 学生表(学号),<br>foreign key(课程号) references 课程表(课程号) ) </p>
<p>说明：一般表主属性是一列，有时有多列组成PK（PK可是属性，也可以是属性组）. PK是属性组时，要独立于列来实现主码约束。 , primary key(学号,课程号)： 完成后，在成绩表不允许同一个学生选两次同一门课</p>
</blockquote>
<h3 id="on-delete-cascade-外键约束"><a href="#on-delete-cascade-外键约束" class="headerlink" title="on delete cascade 外键约束"></a>on delete cascade 外键约束</h3><p>on delete cascade 是一种外键约束动作，用于在删除主表中的记录时同时删除与其相关联的从表中的记录</p>
<blockquote>
<p>在表间参照完整性中，如果想实现级联删除，即如：删除学生表中的某个同学时，则成绩表中该外键对应的成绩记录会自动删除。可以这样实现：<br>create table 成绩表(学号 char(7) ,课程号 char(3), 成绩 tinyint,<br>foreign key(学号) references 学生表(学号) on delete cascade  )</p>
</blockquote>
<h3 id="not-null-非空约束"><a href="#not-null-非空约束" class="headerlink" title="not null 非空约束"></a>not null 非空约束</h3><p>表示本列的内容值不能为空    建表时,在列名后跟not null</p>
<h3 id="default-默认值约束"><a href="#default-默认值约束" class="headerlink" title="default 默认值约束"></a>default 默认值约束</h3><p>生成新数据元素行时的默认值 (比如把性别默认为女)</p>
<blockquote>
<p>建表时<br>gender CHAR(1) DEFAULT ‘男’,   – 默认值为 ‘男’<br>age  int default 18                       – 默认值为 18</p>
</blockquote>
<h3 id="check-检查约束"><a href="#check-检查约束" class="headerlink" title="check 检查约束"></a>check 检查约束</h3><h4 id="元组级约束（行）"><a href="#元组级约束（行）" class="headerlink" title="元组级约束（行）"></a>元组级约束（行）</h4><p><mark>条件中同时涉及到了多列就叫元组约束单一一列叫列级约束</mark></p>
<p>如  check(性别 &#x3D;’男’ and 身高 &gt;&#x3D;170 or 性别&#x3D;’女’ and 身高&gt;&#x3D;160)</p>
<blockquote>
<p>约束检查发生完成该元组数据编辑时。在编辑该列时，完成时，离开该列数据单元时，发生的条件检测。鼠标离开编辑行状态，或insert命令操作时发生</p>
</blockquote>
<h4 id="条件约束（列）"><a href="#条件约束（列）" class="headerlink" title="条件约束（列）"></a>条件约束（列）</h4><p>在创建表时候，直接在后面写check(约束条件)</p>
<h3 id="数据排序（多列数据）"><a href="#数据排序（多列数据）" class="headerlink" title="数据排序（多列数据）"></a>数据排序（多列数据）</h3><p>select 列1,列2… form 表  <mark>order by 列 排序方式</mark></p>
<blockquote>
<p>列：可以是列名，也可以是列序号，如3表示按第三列排序<br>排序方式：<br>asc升序（从小到大）是默认的<br>dese降序（从大到小）</p>
</blockquote>
<h4 id="同时排序多列数据"><a href="#同时排序多列数据" class="headerlink" title="同时排序多列数据"></a>同时排序多列数据</h4><p>order by 最先排的列 排序方式 ,其次排的列 排序方式, …….</p>
<blockquote>
<p>例子：把学生表所有人按性别分类，同类性别内按身高降序，如果性别和身高再相同，则进一步按年龄升序(年龄以生日为准)</p>
<p>select  *  学号,姓名,性别,身高 ,生日</p>
<p> from 学生表 order by 性别 ,身高 desc,生日*desc</p>
</blockquote>
<h3 id="数据排序大小原理"><a href="#数据排序大小原理" class="headerlink" title="数据排序大小原理"></a>数据排序大小原理</h3><ul>
<li><p>数值按大小比较，英文按ASCLL比较大小</p>
</li>
<li><p>汉字始终比英文大，小写字母比大写字母大，这个顺序叫英文字典</p>
</li>
<li><p>字符串：abe&gt;abcd   因为e&gt;c 中国&gt;人们 因为 Z&gt;R</p>
</li>
<li><p>日期：今天&gt;昨天，日期实际上对应的是一个整数。出生日期和年龄是反的</p>
</li>
<li><p>逻辑值true&gt;false</p>
</li>
</ul>
<h3 id="例-对已存在表建立约束"><a href="#例-对已存在表建立约束" class="headerlink" title="例 对已存在表建立约束"></a>例 对已存在表建立约束</h3><p><mark>constraint （约束），对表添加检查约束用（可也以省略）</mark></p>
<h4 id="对一个已经存在的表建立主码约束"><a href="#对一个已经存在的表建立主码约束" class="headerlink" title="对一个已经存在的表建立主码约束"></a>对一个已经存在的表建立主码约束</h4><blockquote>
<p>前提是表内容是空的才行,且该列事先定义为not null 不允许为空值数据，才能在以后增加逐渐约束<br>alter table 学生表 add constraint <strong>stuidpk</strong> primary key(sutid)  </p>
<p>意思是给学生表的stuid这一列add constraint 加 primary key 主码约束 它的名称为sutidpk</p>
</blockquote>
<h4 id="对一个已经存在的表建立唯一约束"><a href="#对一个已经存在的表建立唯一约束" class="headerlink" title="对一个已经存在的表建立唯一约束"></a>对一个已经存在的表建立唯一约束</h4><p>alter table 表名 add constraint 约束名 unique (列名)</p>
<p>eg 对课程表中的课程名称进行唯一限制<br>alter table C add constraint canmeU unique (cname)</p>
<h4 id="对已有表添加默认值约束"><a href="#对已有表添加默认值约束" class="headerlink" title="对已有表添加默认值约束"></a>对已有表添加默认值约束</h4><p>column（列），修改列的属性包括默认值用修改列的方法</p>
<p>alter table Stu alter column gender set  default  ‘男’</p>
<blockquote>
<p>alter table Stu 表示要修改的表是Stu </p>
<p>alter column gender 表示要修改的列是gender </p>
</blockquote>
<h4 id="对已有表添加check约束"><a href="#对已有表添加check约束" class="headerlink" title="对已有表添加check约束"></a>对已有表添加check约束</h4><p><mark><strong>alter table 表 add constraint</strong> </mark></p>
<p>alter table 表名  add constraint  列名 check (列名  条件)</p>
<p>alter table 表名 add check (列名 条件)</p>
<ul>
<li><p>下面两种都对</p>
<p>alter table S8 add hight2 numeric(3,2)</p>
<p>alter table S8 add hight numeric(3,2)<br>alter table S8 add constraint hight2 check (hight2 between 1.00 and 2.00 )<br>alter table S8 add check(hight between 1.00 and 2.00)</p>
</li>
<li><p>alter table S add constraint stel check(stel like’….’)</p>
</li>
<li><p>alter table Stu add constraint Age check (age &gt;&#x3D;18 and age &lt;&#x3D;100)</p>
</li>
</ul>
<h3 id="注意事项和问题"><a href="#注意事项和问题" class="headerlink" title="注意事项和问题"></a>注意事项和问题</h3><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><blockquote>
<ul>
<li><p>所有的属性值都必须去取原子值：每一个属性不能够再分开（比如生日年月日不能再分开，除非建就建两列）</p>
</li>
<li><p>表的行和列的上下左右顺序都是无意义的（属性的顺序无关性）</p>
</li>
</ul>
</blockquote>
<h4 id="完整性实际例子"><a href="#完整性实际例子" class="headerlink" title="完整性实际例子"></a>完整性实际例子</h4><blockquote>
<p>比方：网上订购的8斤水果，而我们收到了5.5斤，发和收方的数据不一致，被破坏了完整性。在数据库，一表的数据在数据对应依赖于另一个表，如果缺失和破坏了这个依赖，就发生完整性错误。如：在图书销售表中出现事先不存在的书店编号. 在成绩表中出现根本不存在于学生表的人</p>
</blockquote>
<h4 id="约束ID问题"><a href="#约束ID问题" class="headerlink" title="约束ID问题"></a>约束ID问题</h4><blockquote>
<p>为什么对已有表加主码约束要给这个约束一个ID如PK_MyTable_ID，而建表时候添加约束只需要在最后添加primary key 就可以，不需要给这个约束一个ID？</p>
<p>GPT回答：</p>
<p>在 SQL 中，给约束一个名字（比如 <code>PK_MyTable_ID</code>）并不是必需的，但是是一种良好的实践，特别是在以下情况下：</p>
<ol>
<li><strong>清晰性和可读性</strong>：给约束一个有意义的名字可以提高代码的可读性。当数据库结构变得复杂时，清晰的约束名可以帮助其他开发人员更好地理解数据库模式和约束。</li>
<li><strong>易于识别</strong>：如果数据库中存在多个约束，给每个约束一个唯一的名字可以方便识别和引用这些约束。例如，在查询或日志中提到约束时，使用具有描述性名称的约束可以更清楚地表达意图。</li>
<li><strong>易于管理</strong>：具有有意义的约束名可以帮助您更轻松地管理数据库结构。例如，您可能需要在将来删除或修改约束，有一个明确的约束名称可以使这些操作更简单。</li>
</ol>
<p>虽然给约束一个名字并不是必需的，但是在实际开发中，这是一个良好的编程习惯，可以提高代码的可读性、维护性和可管理性。</p>
</blockquote>
<h2 id="关系代数理论"><a href="#关系代数理论" class="headerlink" title="关系代数理论"></a>关系代数理论</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>对关系进行集合代数的运算</li>
<li>三要素：运算符，运算对象，运算结果</li>
<li>关系操作是集合操作方式：一次一集合</li>
<li>关系操作如查询，结果是元组集，把这些结果以view视窗（外模式）方式呈现给用户</li>
</ul>
<h3 id="集合运算-并差交关系乘"><a href="#集合运算-并差交关系乘" class="headerlink" title="集合运算 并差交关系乘"></a>集合运算 并差交关系乘</h3><h4 id="union并"><a href="#union并" class="headerlink" title="union并"></a>union并</h4><ul>
<li>将两个查询的结果集合合并乘一个结果集，合并时会去除重复的行</li>
<li>注意：连亘查询的结果集的列数和数据类型必须一致</li>
<li>例：从学生表1中找到姓杨的人，从学生表2中找到姓李的人，合成一个视图</li>
<li>(select 学号,姓名,年龄,家庭住址   from 学生表2 where LEFT(姓名,1)&#x3D;’李’)  union (select 学号,姓名,年龄,家庭住址   from 学生表1  where LEFT(姓名,1)&#x3D;’杨’)</li>
</ul>
<h4 id="except-差"><a href="#except-差" class="headerlink" title="except 差"></a>except 差</h4><p>从第一个查询结果中排除掉与第二个查询扯过相同的行，返回剩余的结果集</p>
<p>例：从学生表1中查出数据减去在学生表2中存放的数据</p>
<p> （select 学号,姓名,性别 from 学生表1 ）except  （select 学号,姓名,性别 from 学生表2）</p>
<h4 id="intersect-交"><a href="#intersect-交" class="headerlink" title="intersect 交"></a>intersect 交</h4><p>找出两个查询结果集中共同存在的行，并返回这些共同行组成的结果集</p>
<p>例：把学生表中年龄19以上人与学生表2中的李姓人求交集</p>
<p>(select 学号,姓名,性别,年龄 from 学生表 where 年龄&gt;&#x3D;19)   intersect  (select 学号,姓名,性别,年龄 from 学生表2 where LEFT(姓名,1)&#x3D;’李’ )</p>
<h4 id="关系乘（广义的笛卡尔积）"><a href="#关系乘（广义的笛卡尔积）" class="headerlink" title="关系乘（广义的笛卡尔积）"></a>关系乘（广义的笛卡尔积）</h4><p>例如学生表中的所有学生把课程表中所有课程都选修了一次，叫学生集合与课程集合的笛卡尔积。现实中的学生选课是笛卡尔积的子集。</p>
<p>比如学生表有n个学生，课程表有m门课，那么这两个表的笛卡尔积就是每个学生选每一门课</p>
<h3 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h3><p><mark>Null 什么都没有 “ “空格 有效值是空  “”空串双引号里没有空格</mark></p>
<blockquote>
<p>select * from 学生表 where 家庭住址 is null 对<br>select * from 学生表 where 家庭住址 &#x3D;null 错<br> select * from 学生表 where 家庭住址&#x3D;’’  错</p>
<p>判断一个值是否为空，必须使用 is null判断 ,因为null不是一般意义的简单类型的数据，是当对象概念的，不能使用关系运算比较的</p>
</blockquote>
<p> count不计空值 null不算进去 <mark>空格可以算进去</mark> 所以保险起见最常用 select count(*) from 学生表 有一行算一行</p>
<h3 id="专门的关系运算：数据库的表操作"><a href="#专门的关系运算：数据库的表操作" class="headerlink" title="专门的关系运算：数据库的表操作"></a>专门的关系运算：数据库的表操作</h3><h4 id="选择-where"><a href="#选择-where" class="headerlink" title="选择  where"></a>选择  where</h4><ul>
<li>通过对关系中的<strong>元组（行）进行筛选</strong>，从中选取满足特定条件的行数据</li>
<li>SELECT * FROM 表名 WHERE 条件，其中 条件 就是选择条件</li>
<li>选择操作使得我们可以根据特定条件从数据库表中检索出所需的数据，从而实现数据的筛选和过滤</li>
</ul>
<h4 id="投影-select"><a href="#投影-select" class="headerlink" title="投影 select"></a>投影 select</h4><ul>
<li>对<strong>关系的属性（列）进行操作</strong>，它选择部分列并返回一个新的关系，包含了原始关系中选定的列</li>
<li>SELECT 列1, 列2 FROM 表名，其中 列1、列2 是需要投影的列名</li>
<li>投影操作常用于从数据库表中选择出特定的列，而不是选择整行数据，从而实现对数据的精细控制</li>
</ul>
<h4 id="连接-join-或-where"><a href="#连接-join-或-where" class="headerlink" title="连接  join 或 where"></a>连接  join 或 where</h4><ul>
<li>同时操作<strong>两个或多个有联系的表</strong>，将它们的行按照某种关联条件进行匹配，然后返回满足连接条件的所有可能组合</li>
<li>SELECT * FROM 表1 JOIN 表2 ON 表1.列 &#x3D; 表2.列</li>
</ul>
<h3 id="比较运算-！"><a href="#比较运算-！" class="headerlink" title="比较运算 &#x3D;   ！  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;  like between"></a>比较运算 &#x3D;   ！  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;  like between</h3><h4 id="between是重点"><a href="#between是重点" class="headerlink" title="between是重点"></a>between是重点</h4><blockquote>
<p>between a  and b   a&lt;b   要筛选出位于 a 和 b 之间的值，包括 a 和 b 本身</p>
<p>between a  and b   b&lt;a  即筛选出位于 b 和 a 之间的值,结果和a&lt;b的情况相反</p>
<p>a, b: 这两个值是范围的边界。它们可以是任何数据类型，包括枚举型。例如，它们可以是数字、日期、字符串或枚举值。 枚举型: 如果 a 和 b 是枚举型的值，它们表示了一个范围内的枚举值</p>
</blockquote>
<h3 id="逻辑运算：与，或，非（数据库中）"><a href="#逻辑运算：与，或，非（数据库中）" class="headerlink" title="逻辑运算：与，或，非（数据库中）"></a>逻辑运算：与，或，非（数据库中）</h3><blockquote>
<p>与 a &amp;&amp; b           a and b  (a,b同时成立，结果才成立)<br>或 a|| b              a  or b (a,b中至少一个成立，结果就成立)<br>非 ! a                   not  a  (求反)</p>
</blockquote>
<h3 id="字符串匹配-like"><a href="#字符串匹配-like" class="headerlink" title="字符串匹配 like"></a>字符串匹配 like</h3><blockquote>
<p>%代表任意多个字符（包括0-n个） _ 必须只能代表一个任意字符 如：张<br>_  可代表张三，张六（两个字）<br>张%  可代表：张     张三    张三四(以要以张字开头即可)<br>[  ] 在其中只能选一个字符去匹配<br>[^字符]不在其中选一个字符</p>
</blockquote>
<h3 id="集合包含判断-in"><a href="#集合包含判断-in" class="headerlink" title="集合包含判断 in"></a>集合包含判断 in</h3><ul>
<li>单值情况：  Where  x &#x3D;单值</li>
<li>多值成集合：Where x in (集合值)</li>
</ul>
<h3 id="注意和说明"><a href="#注意和说明" class="headerlink" title="注意和说明"></a>注意和说明</h3><ul>
<li>以上四大类，如果仅从关系数据库专业角度看，只分两大类： 传统的集合运算，专业的关系运算</li>
<li>说明：关系运算&gt;  &lt;  &#x3D;  !&#x3D; 只能用于单值比较。 包含于多值时，要使用集合运算判断in</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="查出所有男生团员的计算机网络基础-，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）"><a href="#查出所有男生团员的计算机网络基础-，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）" class="headerlink" title="查出所有男生团员的计算机网络基础 ，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）"></a>查出所有男生团员的计算机网络基础 ，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）</h4><p>select * from 成绩表    where  学号 in (select 学号 from 学生表 where 性别&#x3D;’男’ and 团员否&#x3D;1) and 课程号 in(select 课程号 from 课程表 where 名称              in(‘计算机网络基础’,’计算机基础’,’高等数学上’,’高等数学下’)) </p>
<h2 id="主要函数"><a href="#主要函数" class="headerlink" title="主要函数"></a>主要函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>concat(s1,s2,…sn)  字符串拼接，将s1,s2,s3…sn拼成一个字符串</li>
<li>left(串，n) 取串左n个字符</li>
<li>right(串，n) 取串右n个字符</li>
<li>len(串) 求串长</li>
<li>lower(str)   将字符串str全部转为小写</li>
<li>upper(str)  将字符串str全部转为大写</li>
<li>lpad(str,n,pad) 左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</li>
<li>rpad(str,n,pad) 右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</li>
<li>Ltrim(串) 去掉串左边多余的空格  Rtrim(串) 去掉串的右边多余空格</li>
<li>trim(str) 去掉紫都城头部和尾部的空格（中间的空格依然保留）</li>
<li>substring(str ,strart,len)  返回字符串Str从start位置起的len长度的字符串（第一个位置的字符为1，不是0！）</li>
</ul>
<blockquote>
<p>select concat(‘Hello’,’ mroning’);<br>select lowert(‘Hello’);<br>select upper(‘Hello’);<br>select lpad (‘001’,6,’-‘)    输出为 —001<br>select rpad (‘001’,6,’-‘)    输出为 001—<br>select trim(‘   Good    Morning  ’);    输出Good    Morning<br>select substring(‘Good morning’,1,4);   输出Good</p>
<ul>
<li>给所有同学的学号前面补0变成8位学号<br> update S set sno &#x3D; lpad(sno,8,’0’ );</li>
</ul>
</blockquote>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><p>ceil(x) 向上取整（有小数 的话整数部分直接进一位）<br>floop(x) 向下取整（去掉小数部分）<br>mod(x,y) 返回x&#x2F;y的模<br>rand() 返回0~1内的随机数<br>round(x,y) 求参数x四舍五入的值，保留y位小数</p>
<blockquote>
<p>生成一个6位数的随机验证码<br>select lapd (round(rand()*10000000,0),6,’0’ ) ;</p>
</blockquote>
<h3 id="转化数据类型函数-convert-cast"><a href="#转化数据类型函数-convert-cast" class="headerlink" title="转化数据类型函数 convert( ),cast()"></a>转化数据类型函数 convert( ),cast()</h3><p>convert(目标数据类型, 要转换的表达式或值, 是可选参数，用于指定转换的样式或格式);</p>
<blockquote>
<p>它经常用于将日期时间数据类型转换为不同的日期格式，或者将字符串转换为数字，反之亦然</p>
<ul>
<li>select convert (varchar,getdate(),101)<br><code>CONVERT</code> 函数将 <code>GETDATE()</code> 返回的日期时间值转换为 <code>VARCHAR</code> 数据类型，然后使用格式代码 <code>101</code> 将其转换为 MM&#x2F;DD&#x2F;YYYY 格式的字符串</li>
<li>select convert( int,’12345’ )<br>将字符串12345转换成整数</li>
<li>select convert (date , getdate())<br>把当前系统的时间转化成日期，只留下年月日不包时间部分</li>
<li>onvert(nchar(10),生日,21)  其中21是针对日期的格式参数</li>
</ul>
</blockquote>
<p>cast(表达式 as 新类型[长度])</p>
<blockquote>
<p> select CAST(身高 as numeric(4,1)) from 学生表<br>select 姓名+’同学的身高是:’+convert(nchar(4),身高) from 学生表select 姓名+’同学的身高是:’+cast(身高 as NCHAR(4)) from 学生表</p>
</blockquote>
<h3 id="日期相关函数"><a href="#日期相关函数" class="headerlink" title="日期相关函数"></a>日期相关函数</h3><p>curdate() 返回当前日期<br>curtime() 返回当前时间<br>now()  返回当前日期和时间<br>year(date) 获取制定date的年份 同理有month(date) day(date)<br>date_add(date,interbal expr type) 返回一个日期&#x2F;时间值加上一个时间间expr后的时间值<br>datediff(date1,date2) 返回起始日期date1和结束时间date2之间的天数</p>
<blockquote>
<p> Dateadd(日期时间的部分量，偏差值, 日期) 返回指定日期的指定分量的偏移后的日期结果<br>例： dateadd(year,95,getdate()) 求今天后的95天后是哪一天？其中的日期部分量：year, month,quarter，day,week,hour,minute,second,millisecond</p>
</blockquote>
<blockquote>
<p>中美日期区别： Dateadd(日期时间的部分量，偏差值, 日期) 返回指定日期的指定分量的偏移后的日期结果</p>
<p>例： dateadd(year,95,getdate()) 求今天后的95天后是哪一天？</p>
<p> 其中的日期部分量：year, month,quarter，day,week,hour,minute,second,millisecond美式日期格式通常采用月&#x2F;日&#x2F;年的格式，如 12&#x2F;25&#x2F;21。<br>中国日期格式是年-月-日，精确到秒或者毫秒，如 2012-09-26 20:04:07.345</p>
</blockquote>
<h4 id="getdate-函数"><a href="#getdate-函数" class="headerlink" title="getdate() 函数"></a>getdate() 函数</h4><p>select getdate();返回当前系统时间</p>
<h4 id="单独取年月日函数"><a href="#单独取年月日函数" class="headerlink" title="单独取年月日函数"></a>单独取年月日函数</h4><blockquote>
<p>SELECT YEAR(‘2024-03-17’);             2024<br>SELECT MONTH(‘2024-03-18’);        03<br>SELECT DAY(‘2024-03-17’);               17</p>
</blockquote>
<h4 id="日期减法函数-datediff"><a href="#日期减法函数-datediff" class="headerlink" title="日期减法函数 datediff()"></a>日期减法函数 datediff()</h4><ul>
<li><p>select datediff(second,’2024-3-15’,’2024-3-15 10:33:20’)<br>后面的减去见面的，返回结果为秒，算出这一天已经过去了38000秒</p>
</li>
<li><p>select datediff( second,convert (date ,getdate()) ,getdate());<br>同样计算这一天已经过去的秒数</p>
</li>
<li><p>查询所有员工的入职天数，并根据入职天数倒宁排序<br>select name, datediff(curdate(),ruzhiriqi ) as ‘ entrydays ’ from 员工表 order by entrydays desc;</p>
</li>
<li><p>求李大方比较李四方大多少岁<br>select<br> ( select 生日 from 学生表 where 姓名&#x3D;’李大方’)-<br> ( select 生日 from 学生表 where 姓名&#x3D;’李九二’)</p>
<p>select convert(numeric(5,1), ( select 生日 from 学生表 where 姓名&#x3D;’李大方’)- ( select 生日 from 学生表 where 姓名&#x3D;’李九二’) )&#x2F;365</p>
<p>方法3:</p>
<p>declare @sr1 smalldatetime,@sr2 smalldatetime<br>select @sr1&#x3D;生日 from 学生表 where 姓名&#x3D;’李大方’<br>select @sr2&#x3D;生日 from 学生表 where 姓名&#x3D;’李九二’<br>print datediff(day,@sr1,@sr2)</p>
</li>
</ul>
<h4 id="日期加法函数-dateadd"><a href="#日期加法函数-dateadd" class="headerlink" title="日期加法函数 dateadd()"></a>日期加法函数 dateadd()</h4><ul>
<li>select dateadd(day , 105 , getdate())<br>后面的（今天日期）往后推105天后的日子</li>
<li>例子：把最近七天要过生日的人列出来<ul>
<li>select * from Stu where datediff( day , getdate(),出生日期) between 0 and 6</li>
</ul>
</li>
</ul>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>将一列数据作为一个整体，进行纵向计算<mark>所有的null 不参与计算</mark></p>
<p>count不计空值 null不算进去 空格可以算进去 所以保险起见最常用 select count(*) from 学生表 有一行算一行</p>
<blockquote>
<p><mark>常见的聚合函数：<br>count 统计数量<br>max min ave sum 求最大值，最小值，平均值，求和</mark></p>
</blockquote>
<blockquote>
<p>聚合函数应用<br>聚合函数 自定义函数 期末考试有            </p>
<p>可编程性 函数 系统函数 点进去可以找到那个函数的说明     </p>
<p>可编程性 函数 标量值函数：简单的函数</p>
<p>可编程性 函数 表值函数：比如说去买多种东西，用一个兜子可以一次都拿走，这个表值函数就相当于这个兜子。可以返回一堆毫不相干的数据 </p>
</blockquote>
<h4 id="count-统计表中元组个数-（计数查询结果的行数，与列无关）"><a href="#count-统计表中元组个数-（计数查询结果的行数，与列无关）" class="headerlink" title="count( )统计表中元组个数 （计数查询结果的行数，与列无关）"></a>count( )统计表中元组个数 （计数查询结果的行数，与列无关）</h4><p>注意：如果给列名时，null不计算</p>
<blockquote>
<p> select COUNT(性别) from 学生表<br>select COUNT(姓名) from 学生表<br>select COUNT(*) from 学生表  &#x2F;&#x2F;常用<br><mark>可见，空值当空气，啥也不参与。空值不是空格！</mark></p>
</blockquote>
<h4 id="sum-avg-纵向对数值型列求和，平均"><a href="#sum-avg-纵向对数值型列求和，平均" class="headerlink" title="sum(  )  avg(  ) 纵向对数值型列求和，平均"></a>sum(  )  avg(  ) 纵向对数值型列求和，平均</h4><blockquote>
<p>一定要注意定义的时候的数据类型 字符串和数字型不可以一起相加或者算平均      </p>
<p><mark>统计聚合函数不可以有和统计内容无关的列，不然查不出来</mark></p>
<p> select SUM(成绩) from 成绩表 where 课程号&#x3D;’101’</p>
<p> select SUM(学号) from 成绩表 where 课程号&#x3D;’101’ 错应为学号和课程号无关</p>
<p> select AVG(成绩) from 成绩表 where 课程号&#x3D;’102’</p>
<p> select AVG(成绩) from 成绩表 where 课程号&#x3D;’109’</p>
<p>没有109课程,结果为null,实际上是总和&#x2F;数据个数，0&#x2F;0 严格说要溢出，sqlserver做了溢出容错处理的</p>
<p>如果查出来是NULL 在数据库中可能有两个可能：可能真的是NULL,也可能数据溢出了 </p>
<p>可能没有这个表，这个表的和是NULL 这个表是数量是0，null除以0也是null</p>
</blockquote>
<h5 id="一次性分组统计出两门课的平均成绩"><a href="#一次性分组统计出两门课的平均成绩" class="headerlink" title="一次性分组统计出两门课的平均成绩"></a>一次性分组统计出两门课的平均成绩</h5><blockquote>
<p>select 课程号, AVG(成绩) as 科平均 from 成绩表<br>where 课程号 in(‘102’,’105’)<br> group by 课程号</p>
<p>等效写法：</p>
<p> select AVG(成绩) as 科平均 from 成绩表<br> where 课程号 in(‘102’ )<br>select sum (成绩)&#x2F;COUNT(*) as 科平均 from 成绩表   where 课程号 in(‘102’ )</p>
</blockquote>
<h5 id="有结构：成绩表（学号，语文，数学，英语，总分，平均分）"><a href="#有结构：成绩表（学号，语文，数学，英语，总分，平均分）" class="headerlink" title="有结构：成绩表（学号，语文，数学，英语，总分，平均分）"></a>有结构：成绩表（学号，语文，数学，英语，总分，平均分）</h5><blockquote>
<p>根据三科成绩，计算出所有学生的总分，和平均分,不能使用sum,average,因为这个玩意是纵向操作。本题是要求横向计算</p>
<p>方法1:结果不填写表里</p>
<p> Select 学号,语文,数学,英语, 语文+数学+英语 as 总分,总分&#x2F;3 as 平均分 from 成绩表</p>
<p>方法2:结果填表</p>
<p> Update 成绩表 set 总分 &#x3D;语文+数学+英语,平均分 &#x3D; 总分&#x2F;3</p>
</blockquote>
<h5 id="例子：统计学生表人数"><a href="#例子：统计学生表人数" class="headerlink" title="例子：统计学生表人数"></a>例子：统计学生表人数</h5><blockquote>
<p> select count(*) from S;<br>select count(sno) from S;</p>
</blockquote>
<h5 id="统计学生的平均，最大，年龄"><a href="#统计学生的平均，最大，年龄" class="headerlink" title="统计学生的平均，最大，年龄"></a>统计学生的平均，最大，年龄</h5><blockquote>
<p> select avg(sage) from S;<br>select max(sage) from S;</p>
</blockquote>
<h5 id="统计女同学的年龄之和"><a href="#统计女同学的年龄之和" class="headerlink" title="统计女同学的年龄之和"></a>统计女同学的年龄之和</h5><p>select sum(age) from S where ssex &#x3D;‘女’ ;</p>
<h4 id="max-min-常用于对数值，日期列求大值，小值"><a href="#max-min-常用于对数值，日期列求大值，小值" class="headerlink" title="max( ) min( ) 常用于对数值，日期列求大值，小值"></a>max( ) min( ) 常用于对数值，日期列求大值，小值</h4><h5 id="求最高分和最低分的分数差；求年龄最小值"><a href="#求最高分和最低分的分数差；求年龄最小值" class="headerlink" title="求最高分和最低分的分数差；求年龄最小值"></a>求最高分和最低分的分数差；求年龄最小值</h5><p> select MAX(成绩)-MIN(成绩) from 成绩表 where 课程号&#x3D;’101’</p>
<p>select MAX(生日) from 学生表 求年龄最小值(生日最大值)</p>
<h5 id="一次性求出101课程的最高，最低，平均，总分，选课人数"><a href="#一次性求出101课程的最高，最低，平均，总分，选课人数" class="headerlink" title="一次性求出101课程的最高，最低，平均，总分，选课人数"></a>一次性求出101课程的最高，最低，平均，总分，选课人数</h5><blockquote>
<p>elect MAX(成绩) as 最高分,MIN(成绩) 最低分,</p>
<p>   avg(成绩) as 平均分 ,sum(成绩) as 科总分,</p>
<p>​    count(*) as 选课人数 from 成绩表 where 课程号&#x3D;’101’</p>
<p> 说明：类似以上返回一堆数据，可以事先定义表值函数。</p>
<p>补例：</p>
<p>一次性求出D001课程的的课程号，最高，最低，平均，总分，选课人数</p>
<p>  select 课程号, MAX(成绩) as 最高,MIN(成绩) 最低,</p>
<p>  COUNT(*) as 选课人数,SUM(成绩) as 总分,</p>
<p>  AVG(成绩) as 单科平均 from 成绩表 where 课程号&#x3D;’D001’</p>
<p>​    group by 课程号</p>
</blockquote>
<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><p>if(value ,t,f)  如果value为true 返回t，否则返回f<br>ifnull(value1,value2)  如果value1不为空，返回value1，否则返回value2<br>case when [val1] then [res1] …. else [default]  end  如果val1为true返回res1,….否则返回default默认值<br>case[表达式] when [val1] then [res1]…else[default] end  如果表达式值为val1,返回res1,….否则返回default默认值</p>
<ul>
<li>需求:查询emp表的员工姓名和工作地址(北京&#x2F;上海—-&gt;一线城市，其他—-&gt;二线城市)<br>select   name.   (case workaddress when’北京’then’一线城市’when’上海’then’一线城市’else’二线城市’end )as’工作地址   rom 员工表;</li>
<li>查询学生的学号名字和他们的成绩等级<br>select   id,    name ,<br>(case when math &gt;&#x3D; 85 then’优秀’when math &gt;&#x3D;60 then’及格’else’不及格’end )’数学’<br>(case when english &gt;&#x3D; 85 then’优秀’when english &gt;&#x3D;60 then’及格’else’不及格’end )’英语’<br>‘(case when chinese &gt;&#x3D; 85 then’优秀’when chinese &gt;&#x3D;60 then’及格’else’不及格’end )’语文’<br>from 成绩表;</li>
</ul>
<h3 id="随机函数-newid"><a href="#随机函数-newid" class="headerlink" title="随机函数 newid()"></a>随机函数 newid()</h3><h3 id="堆叠函数-stuff"><a href="#堆叠函数-stuff" class="headerlink" title="堆叠函数 stuff()"></a>堆叠函数 stuff()</h3><p>Stuff() 堆叠函数，把纵向的数据在横向上堆叠起来</p>
<p>Select (kechengID ) from 课程表 where kechengID in (select kechengID from 成绩表 where 学号&#x3D;’32’)</p>
<blockquote>
<p><strong>查询结果值拼串：</strong></p>
<p>select stuff((select ‘|’+rtrim(课程名称) from 课程表 </p>
<p>where 课程号 in(select 课程号 from 成绩表 where 学号&#x3D;’310001’) for xml path(‘’)),1,1,’’)</p>
<p>结果为: 大学英语|大学物理|C语言单表查询</p>
</blockquote>
<h3 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h3><p><mark>编写顺序： select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 habing 分组后条件列表 group by 排序字段列表 limit 分页参数</mark></p>
<h5 id="执行顺序：from-where-group-by-select-order-by-limit-having"><a href="#执行顺序：from-where-group-by-select-order-by-limit-having" class="headerlink" title="执行顺序：from where group by  select order by limit having"></a>执行顺序：from where group by  select order by limit having</h5><ul>
<li><p>查询多个列<br>select 列1，列2，列3…. from 表名</p>
</li>
<li><p>select *from 表名</p>
</li>
<li><p>设置别名（as可以省略）<br>select 列1 as 别名1，列2 as 别名2 … from 表名<br>eg 查询所有员工的工作地址，起别名（as可以省略）<br>select workaddress as’工作地址’ form 表名 ;<br>结果是一列</p>
</li>
<li><p>去除重复记录<br>select distinci 字段列表 from 表名</p>
<p>select distinci workaddress  form 表名</p>
</li>
</ul>
<h3 id="条件查询-where"><a href="#条件查询-where" class="headerlink" title="条件查询  where"></a>条件查询  where</h3><p>  select  字段列表 from 表名 where 条件 。关系和逻辑表达式作为条件</p>
<p><img src="C:/Users/mujiu/Pictures/QQ截图20240326102507.png"></p>
<h4 id="查询年龄等于88的员工"><a href="#查询年龄等于88的员工" class="headerlink" title="查询年龄等于88的员工"></a>查询年龄等于88的员工</h4><p>select * from 员工表 where age &#x3D; 88;</p>
<h4 id="查询年龄不等于88的员工"><a href="#查询年龄不等于88的员工" class="headerlink" title="查询年龄不等于88的员工"></a>查询年龄不等于88的员工</h4><p>select * from 员工表 where age !&#x3D; 88;</p>
<p>select * from 员工表 where age &lt;&gt;   88;</p>
<h4 id="查询电话号为空的学生"><a href="#查询电话号为空的学生" class="headerlink" title="查询电话号为空的学生"></a>查询电话号为空的学生</h4><p>select *from S where sno  <mark>is null</mark></p>
<h4 id="查询电话号不空的学生"><a href="#查询电话号不空的学生" class="headerlink" title="查询电话号不空的学生"></a>查询电话号不空的学生</h4><p>select *from S where sno  <mark>is no null</mark></p>
<h4 id="查询年龄在15岁-包含-到20岁-包含-之间的员工信息"><a href="#查询年龄在15岁-包含-到20岁-包含-之间的员工信息" class="headerlink" title="查询年龄在15岁(包含)到20岁(包含)之间的员工信息"></a>查询年龄在15岁(包含)到20岁(包含)之间的员工信息</h4><p>select * from 员工表 whene age &gt;&#x3D; 15 &amp;&amp; age &lt;&#x3D; 20;<br>select * from 员工表 whene age &gt;&#x3D; 15 and age &lt;&#x3D; 20；<br>select * from 员工表 whene age between 15 and 20;</p>
<h4 id="查询性别为女且年龄小于25岁的员工信息"><a href="#查询性别为女且年龄小于25岁的员工信息" class="headerlink" title="查询性别为女且年龄小于25岁的员工信息"></a>查询性别为女且年龄小于25岁的员工信息</h4><p>select * from 员工表 where gender &#x3D; ‘女 and age &lt; 25;</p>
<h4 id="查询年龄等于18或20-或40的员工信息"><a href="#查询年龄等于18或20-或40的员工信息" class="headerlink" title="查询年龄等于18或20 或40的员工信息"></a>查询年龄等于18或20 或40的员工信息</h4><p>select * from 员工表 where age &#x3D; 18 or age &#x3D; 20 or age &#x3D;40;</p>
<p>select * from emp where age in(118,20,40) ;</p>
<h4 id="查询姓名为两个字的员工信息"><a href="#查询姓名为两个字的员工信息" class="headerlink" title="查询姓名为两个字的员工信息"></a>查询姓名为两个字的员工信息</h4><p>select *from 员工表 where name like ‘_ _’<br><mark>使用下划线，一个下划线代表一个字</mark></p>
<h4 id="查询身份证号最后一位是X的员工信息"><a href="#查询身份证号最后一位是X的员工信息" class="headerlink" title="查询身份证号最后一位是X的员工信息"></a>查询身份证号最后一位是X的员工信息</h4><p>select *from 员工表 where name like ‘%X’<br>select *from 员工表 where name like ‘_(17个下划线)X’</p>
<h4 id="查出1-7以上男生和1-6以上女生，且都是团员"><a href="#查出1-7以上男生和1-6以上女生，且都是团员" class="headerlink" title="查出1.7以上男生和1.6以上女生，且都是团员"></a>查出1.7以上男生和1.6以上女生，且都是团员</h4><p>Select * from 学生表</p>
<p> Where(性别&#x3D;’男’ and 身高 &gt;1.7  Or 性别&#x3D;’女’ and 身高 &gt;1.6 And 团员&#x3D;1）</p>
<h4 id="查询姓杨和张的人"><a href="#查询姓杨和张的人" class="headerlink" title="查询姓杨和张的人"></a>查询姓杨和张的人</h4><ul>
<li>select * from 学生表where LEFT(姓名,1) in (‘杨’,’张’)</li>
</ul>
<h4 id="查询无人选课的课程号"><a href="#查询无人选课的课程号" class="headerlink" title="查询无人选课的课程号"></a>查询无人选课的课程号</h4><p>思路：先查出无人选课的课程的名称和课程号 Select distinct 课程号 from 成绩表</p>
<p>Select * from 课程表 where 成绩 not in （select distinct 成绩 from 学生表）然后</p>
<p>Select 课程号，课程名称 from 课程表 whre 课程号 not in  (Select distinct 课程号 from 成绩表)</p>
<h4 id="查出选修了大学英语或大学物理的学生的姓名"><a href="#查出选修了大学英语或大学物理的学生的姓名" class="headerlink" title="查出选修了大学英语或大学物理的学生的姓名"></a>查出选修了大学英语或大学物理的学生的姓名</h4><p>select 学号 form 成绩表 where 课程号 in  (select 课程号 from 课程表 where 课程名称  in(‘大学英语’ ,‘ 大学物理’))</p>
<h3 id="查询前面部分元组行（常用在排序结果后）"><a href="#查询前面部分元组行（常用在排序结果后）" class="headerlink" title="查询前面部分元组行（常用在排序结果后）"></a>查询前面部分元组行（常用在排序结果后）</h3><p>从排序结果中取出前几个或前百分之的元组行：<br>取前n个：  top n   取前百分之n  ：   n   percent<br>要并列在上述后面紧跟with ties  </p>
<blockquote>
<p><strong>注意百分号在右边，而且不能是百分号，是一个单词</strong></p>
</blockquote>
<blockquote>
<p>取身高最高的前五名  （身高高的数字大在上面，是降序排序）<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by shight  desc</p>
<p>如果第五名和第六名一样高，按照性别女生在前：<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by shight  desc，ssex desc</p>
<p>如果要按百分比取，如果取百分之前20，把top 5 改成 20 percent </p>
<hr>

<p>如果取5个人但是第5名和第6名并列，要把第5第6都取出来<br>select <mark>top 5  with ties </mark>    sno sname ssex shight from Stu order by shight  desc</p>
<hr>
</blockquote>
<h4 id="随机挑选几个记录出来"><a href="#随机挑选几个记录出来" class="headerlink" title="随机挑选几个记录出来"></a>随机挑选几个记录出来</h4><p><strong>随机挑选函数 newid()</strong>   </p>
<p>比如用于软件给用户展示广告，每个用于登录后随机选择4条展示给用户</p>
<blockquote>
<p>把学生表的信息随机排序罗列出来<br>select NEWID(), *from S order by newid();<br>这行代码运行多次查找出来的结果多次不同</p>
</blockquote>
<blockquote>
<p>随机选五个出来<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by newid()</p>
</blockquote>
<h3 id="子查询的结果值可以用于主查询的条件中的关系比较"><a href="#子查询的结果值可以用于主查询的条件中的关系比较" class="headerlink" title="子查询的结果值可以用于主查询的条件中的关系比较"></a>子查询的结果值可以用于主查询的条件中的关系比较</h3><p>如果查询比A高的同学，那么必须只有一个A作为标准，不然会报错</p>
<ul>
<li><p>Select … form Stu where gender&#x3D;’男’ and 身高 &gt;(select min(身高) from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)<br>Select … form Stu where gender&#x3D;’男’ and 身高&gt;and(select身高from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)</p>
</li>
<li><p>上面两个结果一样，下面两个结果一样</p>
</li>
<li><p>Select … form Stu where gender&#x3D;’男’ and 身高 &gt;(select max(身高) from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)<br>Select … form Stu where gender&#x3D;’男’ and 身高&gt;some(select身高from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)</p>
</li>
</ul>
<blockquote>
<p>eg 查出比李大方和李四方任意一个身高还要高的所有男生（就是找比他们俩里最高的还要高的人<br>select 学号,姓名,身高,性别 from 学生表 where 性别&#x3D;’男’and 身高&gt;some(select 身高 from 学生表 where 姓名&#x3D;’李大方’or 姓名&#x3D;’李四方’ )</p>
</blockquote>
<p><mark>说明：子查询的结果如果是一个集合，不是单一值，不能使用&gt; &lt; &#x3D;这类关系运算. X&#x3D;(集合)是不对的，但 x in(集合)是对的</mark></p>
<h4 id="两个查询的结果值（同类型的，可直接用于表达式计算）"><a href="#两个查询的结果值（同类型的，可直接用于表达式计算）" class="headerlink" title="两个查询的结果值（同类型的，可直接用于表达式计算）"></a>两个查询的结果值（同类型的，可直接用于表达式计算）</h4><blockquote>
<p>实例：查出A比B大多少岁<br>Declare @name1 nchar(5),@name2 nchar(5)<br>Declare @age 1 int ,@age2 int<br>Set @name1&#x3D; ‘一一’<br>Set @name1&#x3D; ’二二’<br>Select @age1 &#x3D; year(geydaye())-yeary(出生日期) from 学生表 where 姓名 &#x3D; name1<br>Select @age2 &#x3D; year(geydaye())-yeary(出生日期) from 学生表 where 姓名 &#x3D; name2<br>If(@age1 &gt;@age2)<br>begin<br>Print @name1 +‘比’+@name2+’大’ +convert(char(2),(@age1-@age2)岁<br>And  这两个相当于C语言中的花括号，如果是多句必须加，单句可以不加<br>Else<br>Print @name2 +‘比’+@name1+’大’ +convert(char(2),(@age2-@age1)岁</p>
</blockquote>
<blockquote>
<p>实例：查出李大方比李四方大多少岁？谁大谁在前。</p>
<p>declare @name1 nvarchar(5),@name2 nvarchar(5)<br>declare @age1 int ,@age2 int<br>set @name1&#x3D;’李大方’<br>set @name2&#x3D;’李四方’<br>select @age1&#x3D;YEAR(getdate())-YEAR(出生日期) from 学生表 where 姓名&#x3D;@name1<br>select @age2&#x3D;YEAR(getdate())-YEAR(出生日期) from 学生表 where 姓名&#x3D;@name2<br>if(@age1&gt;@age2)<br>begin<br>print @name1+’比‘+@name2+’大’+convert(char(2), @age1-@age2)+’岁’<br> end<br>else<br> print @name2+’比‘+@name1+’大’+convert(char(2), @age2-@age1)+’岁’</p>
</blockquote>
<blockquote>
<p>例：上例如果在开发APP要使用这个结果咋办？使用一个变量保存结果，把变量传给其它语言</p>
<p> declare @sg float </p>
<p> select @sg&#x3D;(select 身高 from 学生表 where 姓名&#x3D;’李大方’)-</p>
<p>  (select 身高 from 学生表 where 姓名&#x3D;’李四方’)</p>
<p> print @sg</p>
</blockquote>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="-1"><a href="#-1" class="headerlink" title=""></a></h4><h3 id="去掉表中重复值-数据查询例子"><a href="#去掉表中重复值-数据查询例子" class="headerlink" title="去掉表中重复值+数据查询例子"></a>去掉表中重复值+数据查询例子</h3><h4 id="查看学生表有多少种不同的姓氏"><a href="#查看学生表有多少种不同的姓氏" class="headerlink" title="查看学生表有多少种不同的姓氏"></a>查看学生表有多少种不同的姓氏</h4><p>select distinct LEFT(姓名,1) from 学生表</p>
<h4 id="找学生表中没有选过课的人的学号"><a href="#找学生表中没有选过课的人的学号" class="headerlink" title="找学生表中没有选过课的人的学号"></a>找学生表中没有选过课的人的学号</h4><p>先找到学生表中选过一门课的人的学号，再找到除了他们的人的学号</p>
<p>Select 学号，姓名，性别 form 学生表   where 学号 not in （select distinct 学号 from 成绩表）</p>
<h3 id="字符串匹配查询"><a href="#字符串匹配查询" class="headerlink" title="字符串匹配查询"></a>字符串匹配查询</h3><h4 id="查出学生表中所有姓杨，张，李的人-有如下办法"><a href="#查出学生表中所有姓杨，张，李的人-有如下办法" class="headerlink" title="查出学生表中所有姓杨，张，李的人,有如下办法"></a>查出学生表中所有姓杨，张，李的人,有如下办法</h4><ul>
<li>Select * from 学生表 where left(姓名,1)&#x3D;’杨’ or left(姓名,1)&#x3D;’张’ or left(姓名,1)&#x3D;’李’</li>
<li>Select * from 学生表 where left(姓名,1) in(’杨’,’张’,’李’)</li>
<li>Select * from 学生表 where left(姓名,1) like ‘[杨张李]’</li>
<li>Select * from 学生表 where 姓名 like ‘[杨张李]%’</li>
<li>Select * from 学生表 where substring(姓名,1,1) like ‘[杨张李]’</li>
</ul>
<h3 id="分组查询（一般结合统计聚合函数一起用）"><a href="#分组查询（一般结合统计聚合函数一起用）" class="headerlink" title="分组查询（一般结合统计聚合函数一起用）"></a>分组查询（一般结合统计聚合函数一起用）</h3><blockquote>
<p>Select 课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号   </p>
<p>下面的就不对了，因为和学号无关</p>
<p>Select 学号，课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号</p>
<hr>
</blockquote>
<p>select 字段列 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件]</p>
<blockquote>
<p>Select 课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号 having AVG(成绩)&lt;60</p>
<p>一组就是一门课，每一组进行一次聚合函数运算，对聚合运算统计结果运算不能用where要用having</p>
</blockquote>
<p>执行顺序: where &gt;聚合函数&gt;having 。<br>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</p>
<blockquote>
<p>where与having区别<br>执行时机不同: where是分组之前进行过滤，不满足where条件，不参与分组;<br>而having是分组之后对结果进行过滤。<br>判断条件不同: where朱能对聚合函数进行判断，而having可以。</p>
</blockquote>
<h4 id="一次性分组统计出两门课的平均成绩-1"><a href="#一次性分组统计出两门课的平均成绩-1" class="headerlink" title="一次性分组统计出两门课的平均成绩"></a>一次性分组统计出两门课的平均成绩</h4><blockquote>
<p>select 课程号, AVG(成绩) as 科平均 from 成绩表<br>where 课程号 in(‘102’,’105’)<br> group by 课程号</p>
<p>等效写法：</p>
<p> select AVG(成绩) as 科平均 from 成绩表<br> where 课程号 in(‘102’ )<br>select sum (成绩)&#x2F;COUNT(*) as 科平均 from 成绩表   where 课程号 in(‘102’ )</p>
</blockquote>
<h4 id="根据性别分组，统计男同学好女同学的数量"><a href="#根据性别分组，统计男同学好女同学的数量" class="headerlink" title="根据性别分组，统计男同学好女同学的数量"></a>根据性别分组，统计男同学好女同学的数量</h4><p>select ssex,  count(*) from S group by ssex;</p>
<h4 id="根据性别分组，统计男同学好女同学的平均年龄"><a href="#根据性别分组，统计男同学好女同学的平均年龄" class="headerlink" title="根据性别分组，统计男同学好女同学的平均年龄"></a>根据性别分组，统计男同学好女同学的平均年龄</h4><p>select ssex,  avg(age) from S group by ssex;</p>
<h4 id="查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址"><a href="#查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址" class="headerlink" title="查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址"></a>查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址</h4><p>select workaddress，count(*) from emp where age &lt; 45 group by workaddress having count( *)&gt;&#x3D;3,</p>
<p>select workaddress，count(*)  address_count from emp where age &lt; 45 group by workaddress having address_count &gt;&#x3D;3,使用别名</p>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>select 列名 from 表名 limit 起始索引,查询记录数</p>
<blockquote>
<p>起始索引从o开始,起始索引&#x3D;(查询页码-1)*每页显示记录数。<br>分页查询是数据库的方言，不同的数据库有不同的实现,MySQL中是LIMIT<br>如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10</p>
</blockquote>
<h4 id="查询第一页员工数据，每页展示十条记录"><a href="#查询第一页员工数据，每页展示十条记录" class="headerlink" title="查询第一页员工数据，每页展示十条记录"></a>查询第一页员工数据，每页展示十条记录</h4><p>select * from 员工表 limit 0,10;<br>select * from 员工表 limit0,10;</p>
<h4 id="查询第一页员工数据，每页展示十条记录-1"><a href="#查询第一页员工数据，每页展示十条记录-1" class="headerlink" title="查询第一页员工数据，每页展示十条记录"></a>查询第一页员工数据，每页展示十条记录</h4><p>select * from 员工表 limit 10,10;</p>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><h4 id="查询年龄为20-21-22-23岁的女学生信息。"><a href="#查询年龄为20-21-22-23岁的女学生信息。" class="headerlink" title="查询年龄为20,21,22,23岁的女学生信息。"></a>查询年龄为20,21,22,23岁的女学生信息。</h4><p>select * from S where  ssex&#x3D;‘女’ and age in (20,2,22,23);</p>
<h4 id="查询性别为男，并且年龄在20-40岁-含-以内的姓名为三个字的学生。"><a href="#查询性别为男，并且年龄在20-40岁-含-以内的姓名为三个字的学生。" class="headerlink" title="查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的学生。"></a>查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的学生。</h4><p>select * from S where  ssex&#x3D;‘男’ and age between 20 and 40 name like ‘___’;</p>
<p>select * from S where  ssex&#x3D;‘男’ and （age between 20 and 40) name like ‘___’;</p>
<h4 id="统计员工表中-年龄小于60岁的，男性员工和女性员工的人数。"><a href="#统计员工表中-年龄小于60岁的，男性员工和女性员工的人数。" class="headerlink" title="统计员工表中,年龄小于60岁的，男性员工和女性员工的人数。"></a>统计员工表中,年龄小于60岁的，男性员工和女性员工的人数。</h4><p>select sex,count(*) from 员工表 where age &lt; 60 group by sex;</p>
<h4 id="查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。"><a href="#查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。" class="headerlink" title="查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。"></a>查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。</h4><p>select sex,count(*) from 员工表 where age &lt; 60 group by sex;</p>
<h4 id="查询性别为男，且年龄在20-40岁-含-以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。"><a href="#查询性别为男，且年龄在20-40岁-含-以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。" class="headerlink" title="查询性别为男，且年龄在20-40岁(含)以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。"></a>查询性别为男，且年龄在20-40岁(含)以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。</h4><p>select * from 员工表 where sex &#x3D; ‘男’ and age between 20 and 40 order by age ase ，entrydate asc limit 5 ;</p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>从多个表中查询数据（笛卡尔积，在查询时需要消除无效的笛卡尔积）<br>如后面加  where  学生表.sid &#x3D; 成绩表.sid<br>select * from  学生表 , 成绩表  where  学生表.sid &#x3D; 成绩表.sid</p>
<h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><ul>
<li>一对多（部分和员工的关系，一个部门可以有多个员工，一个员工只能对应一部门；实现：在多的一方建立外键，指向一的一方的主键）；</li>
<li>多对一；</li>
<li>多对多（学生和课程的关系，一个学生可以选择多门课程，一门课程也可以被多个学生选择实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键）；</li>
<li>一对一（用户与用户详情之间的关系，比如学生和学生的学生号。用于单表拆分，将一张表的基础字段放在一张表中，其他的信息放在另一张表中，提升操作效率。实现：在任意一方加入外键，关联另一方的主键，并设置外键为唯一的unique）</li>
</ul>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>查询结果是脱离原表的，一旦从表中查出信息，信息就和原表没关系了，表也会被关闭<br>如果查询两个表，两个表都有学号，那么会显示学号不明确，这时候要对学号进一步确定，比如表.学号来进一步确定学号</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p>相当于查询A、B交集部分数据</p>
<ul>
<li><p>隐式内连接</p>
</li>
<li><p>显式内连接</p>
</li>
</ul>
<p>查询每个员工的姓名，及关联的部门的名称(隐式内连接实现)</p>
<p>查询每个员工的姓名，及关联的部门的名称(显式内连接实现)</p>
<blockquote>
<p>或者 标准化代码（老）：（内连接）<br> select a.sid,  a.性别，a.性别，b.成绩  from 学生表 as a ，成绩表 as b   where a.sid &#x3D; b.sid<br>（是一种双重循环，两个表两个指针，两个指针指向的数据一样则选中数据）<br>select a.sno ,a.sname,a.ssex ,b.cno,b.grade from S as a ,G as b where a.sno &#x3D; b.sno;</p>
<p>group by 是对已经查询的数据进行分组，分组之后再按照它排序<br>select 课程号 ,max(成绩) as 最高，MIN（成绩） 最低，count(*) as 选课人数 ,sum(成绩） as 总分，ave(成绩） as 平均 from 成绩表 where 课程号 in（’D001’,’D002’,’D003’)<br>group by 课程号 order by  课程号 dese </p>
<p>在这基础上，把选课人数三以上的排序</p>
<p>select 课程号 ,max(成绩) as 最高，MIN（成绩） 最低，count(<em>) as 选课人数 ,sum(成绩） as 总分，ave(成绩） as 蛋壳平均 from 成绩表 where 课程号 in（’D001’,’D002’,’D003’)<br>group by 课程号  having count(</em>) &gt;3  order by  课程号 dese </p>
<p>count(*)这里注意不能用别名 ，注意order by 一定是放在最后的</p>
<hr>

<p>或者 标准化代码（新）：（内连接）<br>select a.sno ,a.sname,a.ssex ,b.cno,b.grade from S as a inner join   G as b  on  a.sno &#x3D; b.sno;</p>
<p>学会混用  （内连接）<br>select a.* ,b.grade from S as a inner join   G as b  on  a.sno &#x3D; b.sno;</p>
<p>–换了一下位置，A表和B表位置调换，查询结果一样，没有影响<br>select a.* ,b.grade from   G as b  inner join  S as a  on  a.sno &#x3D; b.sno;</p>
<p><mark>内连接中没有对应上的不会出现在查询里面，比如一个同学没有选课，成绩表没有它的学号，那么不会被查询出来</mark></p>
<hr>

<p>多次连接的时候，后面的第二次连接连接的是前面连接的结果，而不是前面的表</p>
<p>多个表连接：四个表五个表连接也是同理。如果没有and后面的限制课程和性别那么所有数据都会查出来<br>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 成绩表，学生表，课程表<br>where 成绩表.学号&#x3D;学生表.学号 and 成绩表.课程号 &#x3D; 课程表.课程号<br>and 性别 &#x3D;’ 男’ and 课程名称 &#x3D;’大学英语’<br>错的 下面的没写对<br>select S.sno ,C.cno ,grade,sname,cname<br>from S,C,G where S.sno&#x3D;C.cno and C.tno&#x3D; G.sno</p>
</blockquote>
<h4 id="视图看代码"><a href="#视图看代码" class="headerlink" title="视图看代码"></a>视图看代码</h4><p>create view xscjkc as …照片拍的那段代码</p>
<p>执行上面的之后，去视图里面找到xscjkc 右键点设计<br>select * from xscjkc where 性别 &#x3D;’男’;<br>写好的视图可以看作前面的查询结果保存成的结果，作用于后续的查询，后面使用会方便很多<br>from 后面可以跟表也可以跟视图</p>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><ul>
<li>左外连接:查询左表所有数据，以及右表中被左表提及的数据两张表交集部分数据</li>
</ul>
<blockquote>
<p>如查出学生表和成绩表的姓名，学号，课程号，成绩数据，如果学生表中有学生没有选课，也要把它查出来，他的课程号和成绩会显示Null（没有选的显示null)<br>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 学生表 left join 成绩表 on 成绩表.学号&#x3D;学生表.学号 where课程号 is null</p>
<p>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 学生表 left join 成绩表 on 成绩表.学号&#x3D;学生表.学号 where课程号 is not null</p>
<p>实际开发中null不好操作，传给前端的不是对象型是空串 </p>
<p>select 成绩表.学号，姓名，性别，<br>case when 课程号 is null then’无选课’<br>else  课程号<br>end as 课程号，<br>成绩 from<br>学生表 left join 成绩表 on 成绩表.学号 &#x3D;学生表.学号</p>
<p>select C.tno,C.sname,S.ssex,<br>case when tno is null then ‘无选课’<br>else  tno<br>end as cno,<br>grade from<br>S left join G on C.tno &#x3D;S.sno</p>
</blockquote>
<ul>
<li>右外连接:查询右表所有数据，以及左表中被右表提及的数据两张表交集部分数据</li>
</ul>
<h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><p>自连接:一个表打开两次，当前表与自身的连接查询，自连接必须使用表别名</p>
<blockquote>
<p>在学生表中找到和杨秋性别一样的其他同学信息</p>
<p>例子但是没成功<br>select a.sname ,a.ssex from S  as a inner join S as b<br>on a.ssex &#x3D;b.ssex<br>where a.sname &#x3D; ‘ 杨秋’ and b.sname!&#x3D; ‘杨秋’</p>
<hr>

<p>group by 学号 having avg(成绩) 按学号分组，每一组也就是每个学生一个平均成绩</p>
<hr>
现实场景：查询哪些部门内部平均工资高于公司所有人的平均工资
select 部门,avg(工资 ）from 员工表 group by 部门 having AVG(工资 ）>(select avg(工资) fom 员工表）
</blockquote>
<h4 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h4><p>a full join b </p>
<blockquote>
<p>两个表的所有数据都要列出来，凡是对方表中无 对应的记录，则都以Null值代表</p>
<p>inner join 是要求a,b两表记录条件相交<br>full join 要求a,b两表记录相并</p>
<p>如有A,B,C三个表，连接查询时，AB之间以B数据为准，BC连接时以C为数据为准。<br> …from a right join b on a.key1&#x3D;b.key1<br>right join c on b.key2&#x3D;c.key2</p>
</blockquote>
<h2 id="注意细节"><a href="#注意细节" class="headerlink" title="注意细节"></a>注意细节</h2><ul>
<li>如果给表起了别名，那么不能再用表本来的名字进行操作</li>
<li>存在性判断的时候，两个表是同时打开的（主表和子表同时打开）</li>
<li>如果建表的时候设置了不可以为空Null，那么给表添加数据的时候就不可以输入NULL。可以输入空字符串’’两个单引号</li>
</ul>
<h2 id="游标-cursor"><a href="#游标-cursor" class="headerlink" title="游标 cursor"></a>游标 cursor</h2><h2 id="存储过程（函数）"><a href="#存储过程（函数）" class="headerlink" title="存储过程（函数）"></a><strong>存储过程（函数）</strong></h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>变量 （自定义的变量）必须要加@  声明变量语法 declare @变量名 类型[(宽度),类型…..]</p>
</li>
<li><p>打印 print @变量名</p>
</li>
<li><p>分支结构</p>
<blockquote>
<p>格式：只能用在过程或函数中，不能嵌套到其它sql命令中内。但sql内部要实现条件判断可以用case when 子句。</p>
<p>If(条件)<br>begin<br>成立时语句序列<br>end<br>[else<br>begin<br>条件不成立时的语句序列<br>end】</p>
</blockquote>
</li>
<li><p>case when 用法（直接多分支，类似于switch功能，但它不是独立的命令语句 ）</p>
<blockquote>
<p> 格式1：</p>
<p> Case 表达式</p>
<p>  When 常量1 then 结果1</p>
<p>  When 常量2 then 结果2</p>
<p>  …</p>
<p>  When 常量n then 结果n</p>
<p> Else  结果n+1</p>
<p>End  </p>
<p>与switch不大一样的是：每个then 后面的结果不需要加break;本系统只执行一个条件，不会从条件入口进来后，还要往下执行</p>
<p>格式2：用法比格式1要灵活得多 </p>
<p>Case </p>
<p>  When 条件1 then 结果1</p>
<p>When 条件2 then 结果2</p>
<p> …..</p>
<p>  When 条件n then 结果n</p>
<p> Else 结果n+1</p>
<p>End </p>
</blockquote>
</li>
<li><p>循环</p>
<blockquote>
<p>While(条件)</p>
<p> Begin</p>
<p>  循环体语句序列</p>
<p>End</p>
<p>在这里循环使用较少，因为数据库的查询 select本身就是从首行自动循环到尾行。</p>
</blockquote>
</li>
<li><p><strong>补充三种流程结构</strong></p>
<blockquote>
<p> While(条件)</p>
<p>Begin </p>
<p> 循环体语句序列</p>
<p>End</p>
<hr>

<p>If(条件)</p>
<p> Begin</p>
<p>成立时语句序列</p>
<p> End</p>
<p>Else</p>
<p> Begin</p>
<p>  不成立时语句序列</p>
<p>End</p>
</blockquote>
</li>
</ul>
<h3 id="自定义函数-标量函数，表值函数"><a href="#自定义函数-标量函数，表值函数" class="headerlink" title="自定义函数:标量函数，表值函数"></a>自定义函数:标量函数，表值函数</h3><blockquote>
<p>(1)标量函数   回的是一个标准量，如一般数据类型int, char. 这种函数相对简单，通过函数体计算，返回调用处一个标量，与其它语言类似，有参数时通用函数名后面参数表带去，也可以无参函数（但空括号不能省）</p>
<p>Create function 函数名(形式参数表) returns 返回值的数据类型 Begin<br>函数体语句<br>Retrun<br>End</p>
<blockquote>
<p>create function f1(@a int,@b int) returns int</p>
<p>begin</p>
<p> declare @t int</p>
<p> set @t&#x3D;@a+@b</p>
<p> return @t</p>
<p>end</p>
<p>print dbo.f1(5,1)</p>
</blockquote>
<p>（2）表值函数: 内联表值函数</p>
<p> 一般函数返回的一个标量值，表值函数返回的是一个表(视图)，由此得名</p>
<p>这种表是一个关系，在结构表头与一般的物理表相没区别，可以随意存放多行多列数据—故使用表值函数可以返回大量数据</p>
<p> 表值函数内部函数体的核心任务是，把所有需要的返回给调用处的数据计算出来，存放到内存表中。最后一次性返回。</p>
<p> 格式：create function 函数名(形式参数表) returns table</p>
<p>As</p>
<p> Begin </p>
<p>   函数体</p>
<p> End</p>
</blockquote>
<h3 id="表的自增列的设置"><a href="#表的自增列的设置" class="headerlink" title="表的自增列的设置"></a>表的自增列的设置</h3><blockquote>
<p>原因：如成绩表要删除一个学生的一门课情况，要两个关键字列组合。如果要删除一个图书销售表中的记录，要根据书店ID，书ID，销售日期，销售员ID，太麻烦了。使用记录行的自增ID列可方便解决。</p>
<p>给表的每个记录设置自增的数字列，它是唯一值的（表中已经有数据是无法设置的，事先空表时设置）</p>
</blockquote>
<p><img src="C:/Users/mujiu/AppData/Roaming/Typora/typora-user-images/image-20240423172657618.png" alt="image-20240423172657618"></p>
<h3 id="存储过程应用"><a href="#存储过程应用" class="headerlink" title="存储过程应用"></a>存储过程应用</h3><p><mark>create procedure 过程名 as 过程体语句(可是若干条命令)   execute   过程名    来执行过程</mark></p>
<blockquote>
<p>Xx(arg1,arg2…);           Int x&#x3D;xx(arg1,arg2);</p>
<p>类似老的C：void 函数名( ) { 函数体}<br> 过程本身不通过过程名带回来计算结果，所以类似于void（并不是通过形参的改变返回数据给实参）</p>
</blockquote>
<h4 id="无参传递过程，主调程序不需要传递实参给过程"><a href="#无参传递过程，主调程序不需要传递实参给过程" class="headerlink" title="无参传递过程，主调程序不需要传递实参给过程"></a>无参传递过程，主调程序不需要传递实参给过程</h4><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例：调用过程查询杨春的数据。</span><br><span class="line"> create procedure p1 as </span><br><span class="line"> declare @xm nchar(6)</span><br><span class="line"> set @xm=&#x27;杨春&#x27;</span><br><span class="line"> select 学号,姓名,生日 from 学生表 where 姓名=@xm</span><br><span class="line"> 完成过程的建立，然后在其它主调程序中调用：exec 过程名</span><br><span class="line"> execute p1</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="有参过程：实用性强，通用性好"><a href="#有参过程：实用性强，通用性好" class="headerlink" title="有参过程：实用性强，通用性好"></a>有<strong>参过程：实用性强，通用性好</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create procedure p2 @xm nchar(6),@kch nchar(3)</span><br><span class="line">as </span><br><span class="line">select 成绩 from 成绩表 where 课程号=@kch and </span><br><span class="line">学号 in(select 学号 from 学生表 where 姓名=@xm)</span><br><span class="line">execute p2 &#x27;李大方&#x27;,&#x27;101&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="有参数，且把计算结果返回给调用处-不是select查询结果视图返回"><a href="#有参数，且把计算结果返回给调用处-不是select查询结果视图返回" class="headerlink" title="有参数，且把计算结果返回给调用处(不是select查询结果视图返回)"></a><strong>有参数，且把计算结果返回给调用处(不是select查询结果视图返回)</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">输入一个学号，课程号 ,调用过程查询该人该科成绩值，把计算得到成绩值结果返回给调用处</span><br><span class="line">分析：过程不返回值，但可以通过形参把结果返回给过程的实参（要多定义专用变量返回结果</span><br><span class="line">create procedure p3 @xm nchar(6),@kch nchar(3),</span><br><span class="line">@cj int output</span><br><span class="line">as </span><br><span class="line"> declare @cj0 int</span><br><span class="line"> select @cj0=成绩 from 成绩表 where 课程号=@kch and </span><br><span class="line">   学号 in(select 学号 from 学生表 where 姓名=@xm)</span><br><span class="line"> set @cj=@cj0</span><br><span class="line">调用</span><br><span class="line"> declare @cj int </span><br><span class="line"> execute p3 &#x27;李大方&#x27;,&#x27;101&#x27;,@cj output</span><br><span class="line"> print @cj</span><br><span class="line">说明：需要返回值的实参和形参后面都要跟上output.掌握此概念后，调用一个过程随便返回什么数据，随便返回多少个数据。</span><br><span class="line">可见：过程就是一个小功能模板，程序段，一般是参数的输入，输出，与外界进行接口。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Melon_Nie</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/06/12/22-mysql/">http://example.com/2024/06/12/22-mysql/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Melon_Nie的月光橘海</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a></div><div class="post-share"><div class="social-share" data-image="/./myimg/lolcute2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/07/03/07-vue/" title="Vue--从vue2入门到了解"><img class="cover" src="/./myimg/qingmei.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Vue--从vue2入门到了解</div></div><div class="info-2"><div class="info-item-1">学习Vue2的笔记整理</div></div></div></a><a class="pagination-related" href="/2024/06/01/21-Git%E5%AD%A6%E4%B9%A0/" title="Git笔记"><img class="cover" src="/./myimg/green2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Git笔记</div></div><div class="info-2"><div class="info-item-1">git学习笔记</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/./myimg/avatar1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Melon_Nie</div><div class="author-info-description">欢迎访问，祝你拥有美好的一天~</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">45</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Nie7-Melon"><i class="fab fa-github"></i><span>我的github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Nie7-Melon" target="_blank" title="Github"><i class="fab fa-github" style="color: #fad701;"></i></a><a class="social-icon" href="https://gitee.com/melon-nie" target="_blank" title="Gitee"><i class="fa-solid fa-house" style="color: #fad701;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客，如果能对你有帮助就更好啦</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E8%A1%A8"><span class="toc-number">1.</span> <span class="toc-text">新建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.</span> <span class="toc-text">添加数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8"><span class="toc-number">2.</span> <span class="toc-text">修改表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">2.1.</span> <span class="toc-text">修改数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E5%B7%B2%E6%9C%89%E8%A1%A8%E5%A2%9E%E5%8A%A0%E6%96%B0%E5%88%97"><span class="toc-number">2.2.</span> <span class="toc-text">向已有表增加新列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.3.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%E4%B8%AD%E5%B7%B2%E6%9C%89%E5%88%97"><span class="toc-number">2.4.</span> <span class="toc-text">删除表中已有列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E8%A1%A8%E5%B7%B2%E6%9C%89%E5%88%97%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">2.5.</span> <span class="toc-text">改变表已有列的信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E6%8A%8A%E8%BA%AB%E9%AB%98%E5%88%97%E7%9A%84%E5%AE%BD%E5%BA%A6%E5%A2%9E%E5%8A%A0%E4%B8%80%E4%BD%8D"><span class="toc-number">2.5.1.</span> <span class="toc-text">如把身高列的宽度增加一位</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E8%A1%A81%E6%9B%B4%E5%90%8D%E4%B8%BA%E8%A1%A82"><span class="toc-number">2.6.</span> <span class="toc-text">把表1更名为表2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%B7%B2%E6%9C%89%E5%88%97%E6%9B%B4%E5%90%8D"><span class="toc-number">2.7.</span> <span class="toc-text">对已有列更名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E4%B8%80%E4%B8%AA%E5%A4%A7%E8%A1%A8%E6%8B%86%E5%88%86%E6%88%90%E5%A4%9A%E4%B8%AA%E5%B0%8F%E8%A1%A8"><span class="toc-number">2.8.</span> <span class="toc-text">把一个大表拆分成多个小表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E5%A4%9A%E4%B8%AA%E7%BB%93%E6%9E%84%E7%9B%B8%E5%90%8C%E7%9A%84%E8%A1%A8%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E5%A4%A7%E8%A1%A8"><span class="toc-number">2.9.</span> <span class="toc-text">把多个结构相同的表合并成一个大表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%95%B0%E6%8D%AE%E7%B1%BB"><span class="toc-number">3.</span> <span class="toc-text">主要数据类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">数值型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">字符串型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%9E%8B"><span class="toc-number">3.3.</span> <span class="toc-text">日期时间型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E6%94%BE%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E5%9E%8B"><span class="toc-number">3.4.</span> <span class="toc-text">存放二进制的文件内容型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%8C%E6%95%B4%E6%80%A7%E6%8E%A7%E5%88%B6"><span class="toc-number">4.</span> <span class="toc-text">数据完整性控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#primary-key-%E4%B8%BB%E7%A0%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.1.</span> <span class="toc-text">primary key 主码约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique-%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.2.</span> <span class="toc-text">unique 唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#foreign-key-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.3.</span> <span class="toc-text">foreign key 外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#on-delete-cascade-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.4.</span> <span class="toc-text">on delete cascade 外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-null-%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.5.</span> <span class="toc-text">not null 非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#default-%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.6.</span> <span class="toc-text">default 默认值约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#check-%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.7.</span> <span class="toc-text">check 检查约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E7%BA%A7%E7%BA%A6%E6%9D%9F%EF%BC%88%E8%A1%8C%EF%BC%89"><span class="toc-number">4.7.1.</span> <span class="toc-text">元组级约束（行）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E7%BA%A6%E6%9D%9F%EF%BC%88%E5%88%97%EF%BC%89"><span class="toc-number">4.7.2.</span> <span class="toc-text">条件约束（列）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%92%E5%BA%8F%EF%BC%88%E5%A4%9A%E5%88%97%E6%95%B0%E6%8D%AE%EF%BC%89"><span class="toc-number">4.8.</span> <span class="toc-text">数据排序（多列数据）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E6%8E%92%E5%BA%8F%E5%A4%9A%E5%88%97%E6%95%B0%E6%8D%AE"><span class="toc-number">4.8.1.</span> <span class="toc-text">同时排序多列数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%92%E5%BA%8F%E5%A4%A7%E5%B0%8F%E5%8E%9F%E7%90%86"><span class="toc-number">4.9.</span> <span class="toc-text">数据排序大小原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B-%E5%AF%B9%E5%B7%B2%E5%AD%98%E5%9C%A8%E8%A1%A8%E5%BB%BA%E7%AB%8B%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.10.</span> <span class="toc-text">例 对已存在表建立约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E8%A1%A8%E5%BB%BA%E7%AB%8B%E4%B8%BB%E7%A0%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.10.1.</span> <span class="toc-text">对一个已经存在的表建立主码约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%B8%80%E4%B8%AA%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E8%A1%A8%E5%BB%BA%E7%AB%8B%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.10.2.</span> <span class="toc-text">对一个已经存在的表建立唯一约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E5%B7%B2%E6%9C%89%E8%A1%A8%E6%B7%BB%E5%8A%A0%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.10.3.</span> <span class="toc-text">对已有表添加默认值约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E5%B7%B2%E6%9C%89%E8%A1%A8%E6%B7%BB%E5%8A%A0check%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.10.4.</span> <span class="toc-text">对已有表添加check约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E9%97%AE%E9%A2%98"><span class="toc-number">4.11.</span> <span class="toc-text">注意事项和问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F"><span class="toc-number">4.11.1.</span> <span class="toc-text">注意</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E6%80%A7%E5%AE%9E%E9%99%85%E4%BE%8B%E5%AD%90"><span class="toc-number">4.11.2.</span> <span class="toc-text">完整性实际例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9FID%E9%97%AE%E9%A2%98"><span class="toc-number">4.11.3.</span> <span class="toc-text">约束ID问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0%E7%90%86%E8%AE%BA"><span class="toc-number">5.</span> <span class="toc-text">关系代数理论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">5.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E8%BF%90%E7%AE%97-%E5%B9%B6%E5%B7%AE%E4%BA%A4%E5%85%B3%E7%B3%BB%E4%B9%98"><span class="toc-number">5.2.</span> <span class="toc-text">集合运算 并差交关系乘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#union%E5%B9%B6"><span class="toc-number">5.2.1.</span> <span class="toc-text">union并</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#except-%E5%B7%AE"><span class="toc-number">5.2.2.</span> <span class="toc-text">except 差</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#intersect-%E4%BA%A4"><span class="toc-number">5.2.3.</span> <span class="toc-text">intersect 交</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E4%B9%98%EF%BC%88%E5%B9%BF%E4%B9%89%E7%9A%84%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%EF%BC%89"><span class="toc-number">5.2.4.</span> <span class="toc-text">关系乘（广义的笛卡尔积）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC"><span class="toc-number">5.3.</span> <span class="toc-text">空值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%93%E9%97%A8%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">5.4.</span> <span class="toc-text">专门的关系运算：数据库的表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9-where"><span class="toc-number">5.4.1.</span> <span class="toc-text">选择  where</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%95%E5%BD%B1-select"><span class="toc-number">5.4.2.</span> <span class="toc-text">投影 select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5-join-%E6%88%96-where"><span class="toc-number">5.4.3.</span> <span class="toc-text">连接  join 或 where</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97-%EF%BC%81"><span class="toc-number">5.5.</span> <span class="toc-text">比较运算 &#x3D;   ！  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;  like between</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#between%E6%98%AF%E9%87%8D%E7%82%B9"><span class="toc-number">5.5.1.</span> <span class="toc-text">between是重点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%EF%BC%9A%E4%B8%8E%EF%BC%8C%E6%88%96%EF%BC%8C%E9%9D%9E%EF%BC%88%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%EF%BC%89"><span class="toc-number">5.6.</span> <span class="toc-text">逻辑运算：与，或，非（数据库中）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D-like"><span class="toc-number">5.7.</span> <span class="toc-text">字符串匹配 like</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%8C%85%E5%90%AB%E5%88%A4%E6%96%AD-in"><span class="toc-number">5.8.</span> <span class="toc-text">集合包含判断 in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E5%92%8C%E8%AF%B4%E6%98%8E"><span class="toc-number">5.9.</span> <span class="toc-text">注意和说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">5.10.</span> <span class="toc-text">例子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%87%BA%E6%89%80%E6%9C%89%E7%94%B7%E7%94%9F%E5%9B%A2%E5%91%98%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80-%EF%BC%8C%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%EF%BC%8C%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E4%B8%8A%E4%B8%8B%E7%9A%84%E6%88%90%E7%BB%A9%E6%83%85%E5%86%B5%EF%BC%88%E5%AD%A6%E5%8F%B7%EF%BC%8C%E8%AF%BE%E7%A8%8B%E5%8F%B7%EF%BC%8C%E6%88%90%E7%BB%A9%EF%BC%89"><span class="toc-number">5.10.1.</span> <span class="toc-text">查出所有男生团员的计算机网络基础 ，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">主要函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">6.1.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">6.2.</span> <span class="toc-text">数值函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E5%8C%96%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%87%BD%E6%95%B0-convert-cast"><span class="toc-number">6.3.</span> <span class="toc-text">转化数据类型函数 convert( ),cast()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="toc-number">6.4.</span> <span class="toc-text">日期相关函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#getdate-%E5%87%BD%E6%95%B0"><span class="toc-number">6.4.1.</span> <span class="toc-text">getdate() 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E7%8B%AC%E5%8F%96%E5%B9%B4%E6%9C%88%E6%97%A5%E5%87%BD%E6%95%B0"><span class="toc-number">6.4.2.</span> <span class="toc-text">单独取年月日函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%8F%E6%B3%95%E5%87%BD%E6%95%B0-datediff"><span class="toc-number">6.4.3.</span> <span class="toc-text">日期减法函数 datediff()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%8A%A0%E6%B3%95%E5%87%BD%E6%95%B0-dateadd"><span class="toc-number">6.4.4.</span> <span class="toc-text">日期加法函数 dateadd()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">6.5.</span> <span class="toc-text">聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#count-%E7%BB%9F%E8%AE%A1%E8%A1%A8%E4%B8%AD%E5%85%83%E7%BB%84%E4%B8%AA%E6%95%B0-%EF%BC%88%E8%AE%A1%E6%95%B0%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E7%9A%84%E8%A1%8C%E6%95%B0%EF%BC%8C%E4%B8%8E%E5%88%97%E6%97%A0%E5%85%B3%EF%BC%89"><span class="toc-number">6.5.1.</span> <span class="toc-text">count( )统计表中元组个数 （计数查询结果的行数，与列无关）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sum-avg-%E7%BA%B5%E5%90%91%E5%AF%B9%E6%95%B0%E5%80%BC%E5%9E%8B%E5%88%97%E6%B1%82%E5%92%8C%EF%BC%8C%E5%B9%B3%E5%9D%87"><span class="toc-number">6.5.2.</span> <span class="toc-text">sum(  )  avg(  ) 纵向对数值型列求和，平均</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1%E5%87%BA%E4%B8%A4%E9%97%A8%E8%AF%BE%E7%9A%84%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9"><span class="toc-number">6.5.2.1.</span> <span class="toc-text">一次性分组统计出两门课的平均成绩</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E7%BB%93%E6%9E%84%EF%BC%9A%E6%88%90%E7%BB%A9%E8%A1%A8%EF%BC%88%E5%AD%A6%E5%8F%B7%EF%BC%8C%E8%AF%AD%E6%96%87%EF%BC%8C%E6%95%B0%E5%AD%A6%EF%BC%8C%E8%8B%B1%E8%AF%AD%EF%BC%8C%E6%80%BB%E5%88%86%EF%BC%8C%E5%B9%B3%E5%9D%87%E5%88%86%EF%BC%89"><span class="toc-number">6.5.2.2.</span> <span class="toc-text">有结构：成绩表（学号，语文，数学，英语，总分，平均分）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90%EF%BC%9A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%BA%BA%E6%95%B0"><span class="toc-number">6.5.2.3.</span> <span class="toc-text">例子：统计学生表人数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%AD%A6%E7%94%9F%E7%9A%84%E5%B9%B3%E5%9D%87%EF%BC%8C%E6%9C%80%E5%A4%A7%EF%BC%8C%E5%B9%B4%E9%BE%84"><span class="toc-number">6.5.2.4.</span> <span class="toc-text">统计学生的平均，最大，年龄</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%A5%B3%E5%90%8C%E5%AD%A6%E7%9A%84%E5%B9%B4%E9%BE%84%E4%B9%8B%E5%92%8C"><span class="toc-number">6.5.2.5.</span> <span class="toc-text">统计女同学的年龄之和</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#max-min-%E5%B8%B8%E7%94%A8%E4%BA%8E%E5%AF%B9%E6%95%B0%E5%80%BC%EF%BC%8C%E6%97%A5%E6%9C%9F%E5%88%97%E6%B1%82%E5%A4%A7%E5%80%BC%EF%BC%8C%E5%B0%8F%E5%80%BC"><span class="toc-number">6.5.3.</span> <span class="toc-text">max( ) min( ) 常用于对数值，日期列求大值，小值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B1%82%E6%9C%80%E9%AB%98%E5%88%86%E5%92%8C%E6%9C%80%E4%BD%8E%E5%88%86%E7%9A%84%E5%88%86%E6%95%B0%E5%B7%AE%EF%BC%9B%E6%B1%82%E5%B9%B4%E9%BE%84%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">6.5.3.1.</span> <span class="toc-text">求最高分和最低分的分数差；求年龄最小值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E6%B1%82%E5%87%BA101%E8%AF%BE%E7%A8%8B%E7%9A%84%E6%9C%80%E9%AB%98%EF%BC%8C%E6%9C%80%E4%BD%8E%EF%BC%8C%E5%B9%B3%E5%9D%87%EF%BC%8C%E6%80%BB%E5%88%86%EF%BC%8C%E9%80%89%E8%AF%BE%E4%BA%BA%E6%95%B0"><span class="toc-number">6.5.3.2.</span> <span class="toc-text">一次性求出101课程的最高，最低，平均，总分，选课人数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0"><span class="toc-number">6.6.</span> <span class="toc-text">流程控制函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E5%87%BD%E6%95%B0-newid"><span class="toc-number">6.7.</span> <span class="toc-text">随机函数 newid()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A0%86%E5%8F%A0%E5%87%BD%E6%95%B0-stuff"><span class="toc-number">6.8.</span> <span class="toc-text">堆叠函数 stuff()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.9.</span> <span class="toc-text">基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%9Afrom-where-group-by-select-order-by-limit-having"><span class="toc-number">6.9.0.1.</span> <span class="toc-text">执行顺序：from where group by  select order by limit having</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-where"><span class="toc-number">6.10.</span> <span class="toc-text">条件查询  where</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E7%AD%89%E4%BA%8E88%E7%9A%84%E5%91%98%E5%B7%A5"><span class="toc-number">6.10.1.</span> <span class="toc-text">查询年龄等于88的员工</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E4%B8%8D%E7%AD%89%E4%BA%8E88%E7%9A%84%E5%91%98%E5%B7%A5"><span class="toc-number">6.10.2.</span> <span class="toc-text">查询年龄不等于88的员工</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%B5%E8%AF%9D%E5%8F%B7%E4%B8%BA%E7%A9%BA%E7%9A%84%E5%AD%A6%E7%94%9F"><span class="toc-number">6.10.3.</span> <span class="toc-text">查询电话号为空的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%B5%E8%AF%9D%E5%8F%B7%E4%B8%8D%E7%A9%BA%E7%9A%84%E5%AD%A6%E7%94%9F"><span class="toc-number">6.10.4.</span> <span class="toc-text">查询电话号不空的学生</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%9C%A815%E5%B2%81-%E5%8C%85%E5%90%AB-%E5%88%B020%E5%B2%81-%E5%8C%85%E5%90%AB-%E4%B9%8B%E9%97%B4%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">6.10.5.</span> <span class="toc-text">查询年龄在15岁(包含)到20岁(包含)之间的员工信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%80%A7%E5%88%AB%E4%B8%BA%E5%A5%B3%E4%B8%94%E5%B9%B4%E9%BE%84%E5%B0%8F%E4%BA%8E25%E5%B2%81%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">6.10.6.</span> <span class="toc-text">查询性别为女且年龄小于25岁的员工信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E7%AD%89%E4%BA%8E18%E6%88%9620-%E6%88%9640%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">6.10.7.</span> <span class="toc-text">查询年龄等于18或20 或40的员工信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%A7%93%E5%90%8D%E4%B8%BA%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">6.10.8.</span> <span class="toc-text">查询姓名为两个字的员工信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7%E6%9C%80%E5%90%8E%E4%B8%80%E4%BD%8D%E6%98%AFX%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">6.10.9.</span> <span class="toc-text">查询身份证号最后一位是X的员工信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%87%BA1-7%E4%BB%A5%E4%B8%8A%E7%94%B7%E7%94%9F%E5%92%8C1-6%E4%BB%A5%E4%B8%8A%E5%A5%B3%E7%94%9F%EF%BC%8C%E4%B8%94%E9%83%BD%E6%98%AF%E5%9B%A2%E5%91%98"><span class="toc-number">6.10.10.</span> <span class="toc-text">查出1.7以上男生和1.6以上女生，且都是团员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%A7%93%E6%9D%A8%E5%92%8C%E5%BC%A0%E7%9A%84%E4%BA%BA"><span class="toc-number">6.10.11.</span> <span class="toc-text">查询姓杨和张的人</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%97%A0%E4%BA%BA%E9%80%89%E8%AF%BE%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%8F%B7"><span class="toc-number">6.10.12.</span> <span class="toc-text">查询无人选课的课程号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%87%BA%E9%80%89%E4%BF%AE%E4%BA%86%E5%A4%A7%E5%AD%A6%E8%8B%B1%E8%AF%AD%E6%88%96%E5%A4%A7%E5%AD%A6%E7%89%A9%E7%90%86%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D"><span class="toc-number">6.10.13.</span> <span class="toc-text">查出选修了大学英语或大学物理的学生的姓名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%89%8D%E9%9D%A2%E9%83%A8%E5%88%86%E5%85%83%E7%BB%84%E8%A1%8C%EF%BC%88%E5%B8%B8%E7%94%A8%E5%9C%A8%E6%8E%92%E5%BA%8F%E7%BB%93%E6%9E%9C%E5%90%8E%EF%BC%89"><span class="toc-number">6.11.</span> <span class="toc-text">查询前面部分元组行（常用在排序结果后）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%8C%91%E9%80%89%E5%87%A0%E4%B8%AA%E8%AE%B0%E5%BD%95%E5%87%BA%E6%9D%A5"><span class="toc-number">6.11.1.</span> <span class="toc-text">随机挑选几个记录出来</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E5%80%BC%E5%8F%AF%E4%BB%A5%E7%94%A8%E4%BA%8E%E4%B8%BB%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%9D%A1%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%85%B3%E7%B3%BB%E6%AF%94%E8%BE%83"><span class="toc-number">6.12.</span> <span class="toc-text">子查询的结果值可以用于主查询的条件中的关系比较</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A4%E4%B8%AA%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E5%80%BC%EF%BC%88%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84%EF%BC%8C%E5%8F%AF%E7%9B%B4%E6%8E%A5%E7%94%A8%E4%BA%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AE%A1%E7%AE%97%EF%BC%89"><span class="toc-number">6.12.1.</span> <span class="toc-text">两个查询的结果值（同类型的，可直接用于表达式计算）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link"><span class="toc-number">6.12.2.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#-1"><span class="toc-number">6.12.3.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E6%8E%89%E8%A1%A8%E4%B8%AD%E9%87%8D%E5%A4%8D%E5%80%BC-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E4%BE%8B%E5%AD%90"><span class="toc-number">6.13.</span> <span class="toc-text">去掉表中重复值+数据查询例子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%AD%A6%E7%94%9F%E8%A1%A8%E6%9C%89%E5%A4%9A%E5%B0%91%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E5%A7%93%E6%B0%8F"><span class="toc-number">6.13.1.</span> <span class="toc-text">查看学生表有多少种不同的姓氏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%B2%A1%E6%9C%89%E9%80%89%E8%BF%87%E8%AF%BE%E7%9A%84%E4%BA%BA%E7%9A%84%E5%AD%A6%E5%8F%B7"><span class="toc-number">6.13.2.</span> <span class="toc-text">找学生表中没有选过课的人的学号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.14.</span> <span class="toc-text">字符串匹配查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E5%87%BA%E5%AD%A6%E7%94%9F%E8%A1%A8%E4%B8%AD%E6%89%80%E6%9C%89%E5%A7%93%E6%9D%A8%EF%BC%8C%E5%BC%A0%EF%BC%8C%E6%9D%8E%E7%9A%84%E4%BA%BA-%E6%9C%89%E5%A6%82%E4%B8%8B%E5%8A%9E%E6%B3%95"><span class="toc-number">6.14.1.</span> <span class="toc-text">查出学生表中所有姓杨，张，李的人,有如下办法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%EF%BC%88%E4%B8%80%E8%88%AC%E7%BB%93%E5%90%88%E7%BB%9F%E8%AE%A1%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%E4%B8%80%E8%B5%B7%E7%94%A8%EF%BC%89"><span class="toc-number">6.15.</span> <span class="toc-text">分组查询（一般结合统计聚合函数一起用）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E5%88%86%E7%BB%84%E7%BB%9F%E8%AE%A1%E5%87%BA%E4%B8%A4%E9%97%A8%E8%AF%BE%E7%9A%84%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9-1"><span class="toc-number">6.15.1.</span> <span class="toc-text">一次性分组统计出两门课的平均成绩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%80%A7%E5%88%AB%E5%88%86%E7%BB%84%EF%BC%8C%E7%BB%9F%E8%AE%A1%E7%94%B7%E5%90%8C%E5%AD%A6%E5%A5%BD%E5%A5%B3%E5%90%8C%E5%AD%A6%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">6.15.2.</span> <span class="toc-text">根据性别分组，统计男同学好女同学的数量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%80%A7%E5%88%AB%E5%88%86%E7%BB%84%EF%BC%8C%E7%BB%9F%E8%AE%A1%E7%94%B7%E5%90%8C%E5%AD%A6%E5%A5%BD%E5%A5%B3%E5%90%8C%E5%AD%A6%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B9%B4%E9%BE%84"><span class="toc-number">6.15.3.</span> <span class="toc-text">根据性别分组，统计男同学好女同学的平均年龄</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E5%B0%8F%E4%BA%8E45%E7%9A%84%E5%91%98%E5%B7%A5%EF%BC%8C%E5%B9%B6%E6%A0%B9%E6%8D%AE%E5%B7%A5%E4%BD%9C%E5%9C%B0%E5%9D%80%E5%88%86%E7%BB%84%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%91%98%E5%B7%A5%E6%95%B0%E9%87%8F%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E3%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%9C%B0%E5%9D%80"><span class="toc-number">6.15.4.</span> <span class="toc-text">查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">6.16.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%AC%AC%E4%B8%80%E9%A1%B5%E5%91%98%E5%B7%A5%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%AF%8F%E9%A1%B5%E5%B1%95%E7%A4%BA%E5%8D%81%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="toc-number">6.16.1.</span> <span class="toc-text">查询第一页员工数据，每页展示十条记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%AC%AC%E4%B8%80%E9%A1%B5%E5%91%98%E5%B7%A5%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%AF%8F%E9%A1%B5%E5%B1%95%E7%A4%BA%E5%8D%81%E6%9D%A1%E8%AE%B0%E5%BD%95-1"><span class="toc-number">6.16.2.</span> <span class="toc-text">查询第一页员工数据，每页展示十条记录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90-1"><span class="toc-number">6.17.</span> <span class="toc-text">例子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%B9%B4%E9%BE%84%E4%B8%BA20-21-22-23%E5%B2%81%E7%9A%84%E5%A5%B3%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E3%80%82"><span class="toc-number">6.17.1.</span> <span class="toc-text">查询年龄为20,21,22,23岁的女学生信息。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%80%A7%E5%88%AB%E4%B8%BA%E7%94%B7%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%B9%B4%E9%BE%84%E5%9C%A820-40%E5%B2%81-%E5%90%AB-%E4%BB%A5%E5%86%85%E7%9A%84%E5%A7%93%E5%90%8D%E4%B8%BA%E4%B8%89%E4%B8%AA%E5%AD%97%E7%9A%84%E5%AD%A6%E7%94%9F%E3%80%82"><span class="toc-number">6.17.2.</span> <span class="toc-text">查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的学生。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%91%98%E5%B7%A5%E8%A1%A8%E4%B8%AD-%E5%B9%B4%E9%BE%84%E5%B0%8F%E4%BA%8E60%E5%B2%81%E7%9A%84%EF%BC%8C%E7%94%B7%E6%80%A7%E5%91%98%E5%B7%A5%E5%92%8C%E5%A5%B3%E6%80%A7%E5%91%98%E5%B7%A5%E7%9A%84%E4%BA%BA%E6%95%B0%E3%80%82"><span class="toc-number">6.17.3.</span> <span class="toc-text">统计员工表中,年龄小于60岁的，男性员工和女性员工的人数。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%B9%B4%E9%BE%84%E5%B0%8F%E4%BA%8E%E7%AD%89%E4%BA%8E35%E5%B2%81%E5%91%98%E5%B7%A5%E7%9A%84%E5%A7%93%E5%90%8D%E5%92%8C%E5%B9%B4%E9%BE%84%EF%BC%8C%E5%B9%B6%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8C%89%E5%B9%B4%E9%BE%84%E5%8D%87%E5%BA%8F%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%B9%B4%E9%BE%84%E7%9B%B8%E5%90%8C%E6%8C%89%E5%85%A5%E8%81%8C%E6%97%B6%E9%97%B4%E9%99%8D%E5%BA%8F%E6%8E%92%E5%BA%8F%E3%80%82"><span class="toc-number">6.17.4.</span> <span class="toc-text">查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%80%A7%E5%88%AB%E4%B8%BA%E7%94%B7%EF%BC%8C%E4%B8%94%E5%B9%B4%E9%BE%84%E5%9C%A820-40%E5%B2%81-%E5%90%AB-%E4%BB%A5%E5%86%85%E7%9A%84%E5%89%8D5%E4%B8%AA%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C%E6%8C%89%E5%B9%B4%E9%BE%84%E5%8D%87%E5%BA%8F%E6%8E%92%E5%BA%8F%EF%BC%8C%E5%B9%B4%E9%BE%84%E7%9B%B8%E5%90%8C%E6%8C%89%E5%85%A5%E8%81%8C%E6%97%B6%E9%97%B4%E5%8D%87%E5%BA%8F%E6%8E%92%E5%BA%8F%E3%80%82"><span class="toc-number">6.17.5.</span> <span class="toc-text">查询性别为男，且年龄在20-40岁(含)以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">多表查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">7.1.</span> <span class="toc-text">多表关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.2.</span> <span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.1.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9C%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">7.2.2.</span> <span class="toc-text">视图看代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.3.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.4.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E8%BF%9E%E6%8E%A5"><span class="toc-number">7.2.5.</span> <span class="toc-text">全连接</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E7%BB%86%E8%8A%82"><span class="toc-number">8.</span> <span class="toc-text">注意细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B8%E6%A0%87-cursor"><span class="toc-number">9.</span> <span class="toc-text">游标 cursor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%EF%BC%88%E5%87%BD%E6%95%B0%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">存储过程（函数）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">10.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0-%E6%A0%87%E9%87%8F%E5%87%BD%E6%95%B0%EF%BC%8C%E8%A1%A8%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">10.2.</span> <span class="toc-text">自定义函数:标量函数，表值函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E8%87%AA%E5%A2%9E%E5%88%97%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">10.3.</span> <span class="toc-text">表的自增列的设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%BA%94%E7%94%A8"><span class="toc-number">10.4.</span> <span class="toc-text">存储过程应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E5%8F%82%E4%BC%A0%E9%80%92%E8%BF%87%E7%A8%8B%EF%BC%8C%E4%B8%BB%E8%B0%83%E7%A8%8B%E5%BA%8F%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BC%A0%E9%80%92%E5%AE%9E%E5%8F%82%E7%BB%99%E8%BF%87%E7%A8%8B"><span class="toc-number">10.4.1.</span> <span class="toc-text">无参传递过程，主调程序不需要传递实参给过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E5%8F%82%E8%BF%87%E7%A8%8B%EF%BC%9A%E5%AE%9E%E7%94%A8%E6%80%A7%E5%BC%BA%EF%BC%8C%E9%80%9A%E7%94%A8%E6%80%A7%E5%A5%BD"><span class="toc-number">10.4.2.</span> <span class="toc-text">有参过程：实用性强，通用性好</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%89%E5%8F%82%E6%95%B0%EF%BC%8C%E4%B8%94%E6%8A%8A%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%E8%BF%94%E5%9B%9E%E7%BB%99%E8%B0%83%E7%94%A8%E5%A4%84-%E4%B8%8D%E6%98%AFselect%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%A7%86%E5%9B%BE%E8%BF%94%E5%9B%9E"><span class="toc-number">10.4.3.</span> <span class="toc-text">有参数，且把计算结果返回给调用处(不是select查询结果视图返回)</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/22/43-machine/" title="机器学习笔记"><img src="/./myimg/girl21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="机器学习笔记"/></a><div class="content"><a class="title" href="/2025/06/22/43-machine/" title="机器学习笔记">机器学习笔记</a><time datetime="2025-06-22T06:09:52.000Z" title="发表于 2025-06-22 14:09:52">2025-06-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/18/42-font-back/" title="前后端交互"><img src="/./myimg/lolcute3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前后端交互"/></a><div class="content"><a class="title" href="/2025/06/18/42-font-back/" title="前后端交互">前后端交互</a><time datetime="2025-06-18T15:09:52.000Z" title="发表于 2025-06-18 23:09:52">2025-06-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/10/41-networkQuestion/" title="面试题-浏览器/网络/性能优化"><img src="/./myimg/girl12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试题-浏览器/网络/性能优化"/></a><div class="content"><a class="title" href="/2025/06/10/41-networkQuestion/" title="面试题-浏览器/网络/性能优化">面试题-浏览器/网络/性能优化</a><time datetime="2025-06-10T08:08:34.000Z" title="发表于 2025-06-10 16:08:34">2025-06-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/07/39-bigModel/" title="本地大模型部署--仿DeepSeek"><img src="/./myimg/sky3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="本地大模型部署--仿DeepSeek"/></a><div class="content"><a class="title" href="/2025/06/07/39-bigModel/" title="本地大模型部署--仿DeepSeek">本地大模型部署--仿DeepSeek</a><time datetime="2025-06-07T08:21:03.000Z" title="发表于 2025-06-07 16:21:03">2025-06-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/04/23-myselfUp/" title="项目篇-项目梳理（Vue3+TS实现后台管理系统）"><img src="/./myimg/jinli.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="项目篇-项目梳理（Vue3+TS实现后台管理系统）"/></a><div class="content"><a class="title" href="/2025/06/04/23-myselfUp/" title="项目篇-项目梳理（Vue3+TS实现后台管理系统）">项目篇-项目梳理（Vue3+TS实现后台管理系统）</a><time datetime="2025-06-04T02:03:23.000Z" title="发表于 2025-06-04 10:03:23">2025-06-04</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,#FFE985 10%,#FA742B 100%);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Melon_Nie</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-vercel-nine-ashen.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo-vercel-nine-ashen.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>