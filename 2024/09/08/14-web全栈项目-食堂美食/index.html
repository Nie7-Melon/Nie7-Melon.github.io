<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>全栈项目篇-食悦平台 | Melon_Nie</title><meta name="author" content="Melon_Nie"><meta name="copyright" content="Melon_Nie"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="web全栈项目-食悦平台代码整理，加深全栈理解学习">
<meta property="og:type" content="article">
<meta property="og:title" content="全栈项目篇-食悦平台">
<meta property="og:url" content="http://example.com/2024/09/08/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/index.html">
<meta property="og:site_name" content="Melon_Nie">
<meta property="og:description" content="web全栈项目-食悦平台代码整理，加深全栈理解学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/myimg/gril15.png">
<meta property="article:published_time" content="2024-09-08T02:03:26.000Z">
<meta property="article:modified_time" content="2024-11-20T15:56:09.057Z">
<meta property="article:author" content="Melon_Nie">
<meta property="article:tag" content="博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/myimg/gril15.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/09/08/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '全栈项目篇-食悦平台',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/./myimg/avatar2.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa-solid fa-mug-hot"></i><span> 说说</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/myimg/gril15.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Melon_Nie</span></a><a class="nav-page-title" href="/"><span class="site-name">全栈项目篇-食悦平台</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa-solid fa-mug-hot"></i><span> 说说</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">全栈项目篇-食悦平台</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-09-08T02:03:26.000Z" title="发表于 2024-09-08 10:03:26">2024-09-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-20T15:56:09.057Z" title="更新于 2024-11-20 23:56:09">2024-11-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%85%A8%E6%A0%88/">全栈</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="重要文件解读"><a href="#重要文件解读" class="headerlink" title="重要文件解读"></a>重要文件解读</h1><h2 id="服务层，控制层，dao层重点理解"><a href="#服务层，控制层，dao层重点理解" class="headerlink" title="服务层，控制层，dao层重点理解"></a>服务层，控制层，dao层重点理解</h2><h3 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h3><ol>
<li>作用: 处理 HTTP 请求和响应。<br>将业务逻辑交给 Service 层处理<br>返回业务结果</li>
<li>特点:<br>处理 HTTP 请求：接收客户端的请求并返回响应。<br>路由和参数解析：根据 URL 和请求参数调用相应的方法。<br>调用 Service 层：将具体的业务逻辑交给 Service 层处理。<br>返回结果：将 Service 层的结果封装成 HTTP 响应返回给客户端。</li>
</ol>
<h3 id="服务层"><a href="#服务层" class="headerlink" title="服务层"></a>服务层</h3><ol>
<li>作用：处理业务逻辑：实现具体的业务功能。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作<br>返回响应 </li>
<li>特点<br>业务逻辑处理：实现应用程序的核心业务逻辑。<br>事务管理：管理数据库事务，确保数据的一致性。<br>权限控制：检查用户是否有权执行某些操作。<br>数据校验：验证输入数据的有效性和完整性。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作。<br>抽象接口：提供清晰的业务接口，便于测试和维护</li>
</ol>
<h3 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h3><ol>
<li>作用：与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>提供基础 CRUD 操作：通过继承通用 Mapper 接口简化操作<br>返回数据结果</li>
<li>特点<br>与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>CRUD 操作：提供基础的增删改查方法。<br>自定义查询：可以根据需要编写自定义的查询方法。<br>隔离数据库细节：隐藏底层数据库的具体实现细节，使得业务逻辑层不直接依赖数据库。<br>提高可维护性：集中管理数据库操作，减少重复代码</li>
</ol>
<h3 id="三者关系"><a href="#三者关系" class="headerlink" title="三者关系"></a>三者关系</h3><ol>
<li>控制层调用服务层：<br>Controller 接收请求后，调用 Service 层的方法处理业务逻辑。</li>
<li>服务层调用 DAO 层：<br>Service 层在处理业务逻辑时，调用 DAO 层的方法与数据库交互。</li>
<li>数据流：<br>请求 -&gt; Controller -&gt; Service -&gt; DAO -&gt; 数据库<br>数据库 -&gt; DAO -&gt; Service -&gt; Controller -&gt; 响应</li>
</ol>
<h2 id="目录解读"><a href="#目录解读" class="headerlink" title="目录解读"></a>目录解读</h2><h3 id="各目录及文件的作用"><a href="#各目录及文件的作用" class="headerlink" title="各目录及文件的作用"></a>各目录及文件的作用</h3><p>src&#x2F;main&#x2F;java&#x2F;com.example&#x2F;<br>controller&#x2F;：存放所有的控制器类，这些类负责处理HTTP请求，调用服务层方法，并返回响应。<br>例如：MenuController.java, EchartsController.java, ClassifyInfoController.java 等。<br>service&#x2F;：存放服务层接口，这些接口定义了业务逻辑的方法。<br>例如：AdminInfoService.java, UserInfoService.java 等。<br>service&#x2F;impl&#x2F;：存放服务层接口的具体实现类。<br>例如：AdminInfoServiceImpl.java, UserInfoServiceImpl.java 等。<br>dao&#x2F; or repository&#x2F;：存放数据访问对象（DAO）或仓库（Repository）接口，这些接口定义了与数据库交互的方法。<br>例如：AdminInfoDao.java, UserInfoDao.java 等。<br>entity&#x2F;：存放实体类，这些类通常对应数据库中的表，用于封装数据。<br>例如：AdminInfo.java, UserInfo.java 等。<br>config&#x2F;：存放配置类，这些类用于配置Spring框架的各种组件。<br>例如：WebConfig.java, DatabaseConfig.java 等。<br>common&#x2F;：存放通用工具类、常量类等。<br>例如：Result.java, Utils.java 等。<br>Application.java：项目的启动类，通常包含Spring Boot应用的入口点。<br>例如：@SpringBootApplication 注解的类。<br>src&#x2F;main&#x2F;resources&#x2F;<br>application.properties：配置文件，用于配置应用的各种参数，如数据库连接、服务器端口等。<br>例如：spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mydb 等。<br>static&#x2F;：存放静态资源文件，如CSS、JavaScript、图片等。<br>例如：style.css, script.js, logo.png 等。<br>templates&#x2F;：存放模板文件，通常用于Thymeleaf或其他模板引擎。<br>例如：index.html, login.html 等。<br>src&#x2F;test&#x2F;java&#x2F;com.example&#x2F;<br>TestClasses.java：存放测试类，这些类用于编写单元测试和集成测试。<br>例如：MenuControllerTest.java, UserServiceTest.java 等。</p>
<h2 id="yml文件解读"><a href="#yml文件解读" class="headerlink" title="yml文件解读"></a>yml文件解读</h2><p>application.yml 文件详解<br>server 配置<br>yaml<br>深色版本<br>server:<br>  port: 8080<br>  connection-timeout: 60000<br>port: 8080<br>指定应用运行的端口号，默认是8080。<br>connection-timeout: 60000<br>设置连接超时时间，单位是毫秒。这里设置为60000毫秒，即60秒。<br>spring 配置<br>yaml<br>深色版本<br>spring:<br>  datasource:<br>    driver-class-name: com.mysql.cj.jdbc.Driver<br>    username: root<br>    password: 123456<br>    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>  thymeleaf:<br>    cache: false #关闭缓存<br>  servlet:<br>    multipart:<br>      max-file-size: 100MB<br>      max-request-size: 100MB<br>datasource:<br>driver-class-name: com.mysql.cj.jdbc.Driver<br>指定数据库驱动类名，这里是MySQL的驱动。<br>username: root<br>数据库用户名。<br>password: 123456<br>数据库密码。<br>url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>数据库连接URL，包括数据库地址、端口、数据库名以及一些连接参数。<br>useUnicode&#x3D;true: 使用Unicode字符集。<br>characterEncoding&#x3D;utf-8: 设置字符编码为UTF-8。<br>allowMultiQueries&#x3D;true: 允许执行多条SQL语句。<br>useSSL&#x3D;false: 不使用SSL连接。<br>serverTimezone&#x3D;GMT%2b8: 设置服务器时区为东八区（北京时间）。<br>thymeleaf:<br>cache: false<br>关闭Thymeleaf模板缓存，方便开发时实时看到模板变化。<br>servlet:<br>multipart:<br>max-file-size: 100MB<br>设置单个文件上传的最大大小为100MB。<br>max-request-size: 100MB<br>设置整个请求的最大大小为100MB。<br>mybatis 配置<br>yaml<br>深色版本<br>mybatis:<br>  mapper-locations: classpath:mapper&#x2F;<em>.xml<br>  type-aliases-package: com.example.entity<br>mapper-locations: classpath:mapper&#x2F;</em>.xml<br>指定MyBatis的Mapper XML文件的位置，这里设置为classpath下的mapper目录中的所有.xml文件。<br>type-aliases-package: com.example.entity<br>指定实体类所在的包路径，MyBatis会自动扫描该包下的类并为其生成别名。<br>pagehelper 配置<br>yaml<br>深色版本<br>pagehelper:<br>  helper-dialect: mysql<br>  reasonable: true<br>  support-methods-arguments: true<br>  params: count&#x3D;countSql<br>helper-dialect: mysql<br>指定分页插件使用的数据库方言，这里是MySQL。<br>reasonable: true<br>是否开启合理化模式，当总页数小于等于0时，返回第一页或最后一页。<br>support-methods-arguments: true<br>是否支持通过方法参数传递分页参数。<br>params: count&#x3D;countSql<br>分页参数的名称，这里设置为countSql。<br>authority 配置<br>yaml<br>深色版本<br>authority:<br>  info: ‘[{“models”:[{“modelId”:1,”operation”:[1,2,3,4]},{“modelId”:1000001,”operation”:[1,2,3,4]},{“modelId”:1000002,”operation”:[1,2,3,4]},{“modelId”:2,”operation”:[1,2,3,4]},{“modelId”:3,”operation”:[1,2,3,4]},{“modelId”:4,”operation”:[1,2,3,4]},{“modelId”:5,”operation”:[1,2,3,4]},{“modelId”:6,”operation”:[1,2,3,4]},{“modelId”:7,”operation”:[1,2,3,4]},{“modelId”:8,”operation”:[1,2,3,4]},{“modelId”:9,”operation”:[1,2,3,4]},{“modelId”:10,”operation”:[1,2,3,4]}],”level”:1,”modelId”:1,”name”:”管理员”},{“models”:[{“modelId”:5,”operation”:[4,1,2,3]},{“modelId”:9,”operation”:[4,1,2,3]}],”level”:2,”modelId”:2,”name”:”用户”}]’<br>info:<br>这是一个JSON字符串，定义了不同角色的权限信息。<br>每个角色包含models（模型）、level（权限级别）、modelId（模型ID）和name（角色名称）。<br>models是一个列表，每个元素包含modelId和operation（操作权限）。<br>logging 配置<br>yaml<br>深色版本<br>logging:<br>  file: log&#x2F;my.log<br>file: log&#x2F;my.log<br>指定日志文件的路径和名称，日志将被写入到log&#x2F;my.log文件中。<br>总结<br>server: 配置应用的端口和连接超时时间。<br>spring: 配置数据源、Thymeleaf模板引擎和文件上传限制。<br>mybatis: 配置MyBatis的Mapper XML文件位置和实体类包路径。<br>pagehelper: 配置分页插件的相关参数。<br>authority: 配置角色权限信息。<br>logging: 配置日志文件的路径和名称。</p>
<h2 id="MyBatis-和-MyBatis-Plus"><a href="#MyBatis-和-MyBatis-Plus" class="headerlink" title="MyBatis 和 MyBatis-Plus"></a>MyBatis 和 MyBatis-Plus</h2><p>MyBatis<br>定义<br>MyBatis 是一个优秀的持久层框架，它支持定制化SQL、存储过程以及高级映射。MyBatis 消除了几乎所有的JDBC代码和手动设置参数以及获取结果集。MyBatis 可以通过简单的XML或注解来配置和映射原生信息，将接口和Java的POJOs(Plain Old Java Objects)映射成数据库中的记录。</p>
<p>主要特点<br>轻量级：MyBatis 是一个轻量级的框架，不会占用太多的系统资源。<br>灵活：支持XML和注解两种方式配置SQL语句，可以根据项目需求选择合适的方式。<br>强大的映射功能：支持一对一、一对多、多对多等复杂关系的映射。<br>动态SQL：提供强大的动态SQL生成功能，可以根据条件动态生成SQL语句。<br>缓存机制：支持一级缓存和二级缓存，可以显著提高查询性能。<br>事务管理：支持事务管理，确保数据的一致性和完整性。<br>使用场景<br>当你需要对SQL进行精细控制时，MyBatis 是一个很好的选择。<br>适用于中小型项目，特别是那些需要高度定制化SQL的项目。<br>适合与Spring框架集成，形成完整的Web应用开发框架。<br>MyBatis-Plus<br>定义<br>MyBatis-Plus（简称MP）是MyBatis的增强工具，旨在简化开发、提高效率。它在MyBatis的基础上只做增强不做改变，为简化开发、提高效率而生。MyBatis-Plus 提供了许多开箱即用的功能，如CRUD操作、乐观锁、逻辑删除、分页等，使得开发者可以更加专注于业务逻辑的实现。</p>
<p>主要特点<br>无侵入：MyBatis-Plus 在MyBatis的基础上进行了扩展，完全兼容MyBatis的所有特性。<br>性能监控：内置性能分析插件，可以监控SQL执行时间，帮助优化性能。<br>内置分页插件：提供了一套强大的分页插件，支持多种数据库。<br>代码生成器：内置代码生成器，可以快速生成实体类、Mapper接口、Mapper XML文件等。<br>CRUD操作：提供了丰富的CRUD操作，无需编写SQL语句即可完成基本的增删改查操作。<br>乐观锁：支持乐观锁机制，防止并发更新数据时出现的问题。<br>逻辑删除：支持逻辑删除，可以在数据库中保留数据的同时标记为已删除。<br>全局配置：支持全局配置，可以统一管理一些常用的配置项。<br>使用场景<br>当你需要快速开发一个项目，且项目中包含大量的CRUD操作时，MyBatis-Plus 是一个非常好的选择。<br>适用于大型项目，特别是那些需要高效开发、减少重复代码的项目。<br>适合与Spring Boot框架集成，可以快速搭建企业级应用。<br>对比<br>特性	MyBatis	MyBatis-Plus<br>灵活性	高	中<br>学习曲线	中	低<br>内置功能	基础	丰富（如分页、代码生成等）<br>性能监控	无	内置<br>代码生成	无	内置<br>CRUD操作	手动编写SQL	内置<br>乐观锁	无	支持<br>逻辑删除	无	支持</p>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="数据库表解读"><a href="#数据库表解读" class="headerlink" title="数据库表解读"></a>数据库表解读</h2><blockquote>
<p>管理员信息表 (admin_info):<br>包含管理员的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、编号、邮箱、身份证、权限等级、账户等。<br>level 字段表示管理员的权限等级，默认值为1。<br>公告信息表 (advertiser_info):<br>包含公告的名称、内容、发布时间等信息。<br>菜谱大类信息表 (classify_info):<br>包含菜谱大类的名称和描述。<br>收藏信息表 (collect_info):<br>记录用户的收藏信息，包括收藏的名称、时间、菜谱ID、笔记ID、用户ID、用户等级等。<br>笔记评论信息表 (comment_notes_info):<br>记录笔记的评论信息，包括评论内容、评论时间、评论人、关联的模块ID等。<br>食材信息表 (foods_material_info):<br>包含食材的名称、描述、文件ID、文件名、上传人、用户等级、用户ID等。<br>菜谱信息表 (foods_menu_info):<br>包含菜谱的名称、描述、菜谱标签、菜谱小类ID、文件ID、文件名、上传人、用户等级、用户ID等。<br>趣味答题信息表 (message_info):<br>包含趣味答题的名称、回答内容、回答时间等信息。<br>饮食资讯信息表 (news_info):<br>包含饮食资讯的名称和内容。<br>笔记信息表 (notes_info):<br>包含笔记的名称、上传时间、用户ID、内容、审核状态等。<br>文件信息表 (nx_system_file_info):<br>包含文件的原始文件名和存储文件名。<br>笔记点赞信息表 (praise_info):<br>记录笔记的点赞信息，包括名称、时间、笔记ID、菜谱ID、用户ID、用户等级等。<br>菜谱小类信息表 (sub_classify_info):<br>包含菜谱小类的名称、描述、菜谱大类ID等。<br>用户信息表 (user_info):<br>包含用户的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、邮箱、身份证、权限等级等。<br>level 字段表示用户的权限等级，默认值为2</p>
</blockquote>
<h1 id="控制器文及其相关文件"><a href="#控制器文及其相关文件" class="headerlink" title="控制器文及其相关文件"></a>控制器文及其相关文件</h1><p>负责 辅助信息 相关的控制器，包含：<br>MenuController (2)<br>EchartsController (2)<br>ClassifyInfoController (8)<br>NxSystemFileController (6)<br>AdvertiserInfoController (8)<br>SubClassifyInfoController (8)</p>
<h1 id="MenuController接口"><a href="#MenuController接口" class="headerlink" title="MenuController接口"></a>MenuController接口</h1><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><p>这是一个用于生成菜单界面的控制器，它基于用户的不同权限级别显示不同的菜单项，并且还提供了一个获取总记录数的API。<br>getMenu 方法：根据用户权限级别生成不同的菜单项，并返回JSON格式的菜单数据。<br>getJsonObject 方法：辅助方法，用于生成单个菜单项的JSON对象。<br>getTotal 方法：获取各种实体类型的总数，并返回封装后的结果。</p>
<p>MenuController 主要负责提供系统的菜单信息以及各类信息的总数统计。<br>通过这两个接口，前端可以动态地构建菜单栏，并展示相关信息的数量，从而提升用户体验。<br>理解这些接口的具体实现有助于更好地维护和扩展系统功能。</p>
<h2 id="classifyInfo-html"><a href="#classifyInfo-html" class="headerlink" title="classifyInfo.html"></a>classifyInfo.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info&quot;</span> <span class="attr">title</span>=<span class="string">&quot;跳转到个人信息&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;personalPage&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-user fa-2x&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">使用javascript:void(0)防止页面跳转</span></span><br><span class="line"><span class="comment">javascript:void(0) 是一个常用的技巧，用于在 HTML 中创建一个不会导致页面跳转的链接。具体解释如下：</span></span><br><span class="line"><span class="comment">javascript: - 这是一个伪协议，告诉浏览器后面的内容是一段 JavaScript 代码。</span></span><br><span class="line"><span class="comment">vo--&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="EchartsController-接口"><a href="#EchartsController-接口" class="headerlink" title="EchartsController 接口"></a>EchartsController 接口</h1><h1 id="ClassifyInfoController接口"><a href="#ClassifyInfoController接口" class="headerlink" title="ClassifyInfoController接口"></a>ClassifyInfoController接口</h1><h2 id="NxSystemFile文件管理相关模块"><a href="#NxSystemFile文件管理相关模块" class="headerlink" title="NxSystemFile文件管理相关模块"></a>NxSystemFile文件管理相关模块</h2><h3 id="控制器NxSystemFileController"><a href="#控制器NxSystemFileController" class="headerlink" title="控制器NxSystemFileController"></a>控制器NxSystemFileController</h3><h4 id="接口之间联系"><a href="#接口之间联系" class="headerlink" title="接口之间联系"></a>接口之间联系</h4><p>用户通过 upload() 或 noticeUpload() 上传文件后，文件信息会被保存到数据库。<br>用户可以通过 filePage() 查看文件列表，点击某个文件后，可以通过 getById() 接口查看该文件的详细信息</p>
<h4 id="upload-文件上传接口"><a href="#upload-文件上传接口" class="headerlink" title="upload()文件上传接口"></a>upload()文件上传接口</h4><p>实现思路：</p>
<ol>
<li>定义文件的基础保存路径<br>BASE_PATH 是文件存储的基本路径，使用 System.getProperty(“user.dir”) 获取项目的根目录，并在其下创建一个 static&#x2F;file&#x2F; 目录来存储上传的文件<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BASE_PATH</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/resources/static/file/&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>注入服务实现类<br>使用 @Resource 注解注入 NxSystemFileInfoServiceimpl 实例，用于处理与文件相关的业务逻辑。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> NxSystemFileInfoServiceimpl nxSystemFileInfoService;</span><br></pre></td></tr></table></figure></li>
<li>创建文件上传的upload()接口<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">  <span class="comment">//file.getOriginalFilename() 获取用户上传文件的原始文件名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"><span class="comment">// 1. 先查询有没有相同名称的文件(这个没应用)</span></span><br><span class="line"><span class="comment">//    NxSystemFileInfo fileInfo = nxSystemFileInfoService.findByFileName(name);</span></span><br><span class="line"><span class="comment">//    if (fileInfo != null) &#123;</span></span><br><span class="line"><span class="comment">//        throw new CustomException(&quot;1001&quot;, &quot;文件名：\&quot;&quot; + name + &quot;\&quot;已存在&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">// 文件名加个时间戳，生成唯一文件名</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.mainName(originName) 获取文件主名。</span></span><br><span class="line">    <span class="comment">//使用 System.currentTimeMillis() 添加时间戳以确保文件名唯一性。</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.extName(originName) 获取文件扩展名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> FileUtil.mainName(originName) + System.currentTimeMillis() + <span class="string">&quot;.&quot;</span> + FileUtil.extName(originName);</span><br><span class="line">    <span class="comment">// 2. 文件上传</span></span><br><span class="line">    <span class="comment">//FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName) 将文件字节数组写入指定路径</span></span><br><span class="line">    FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 信息入库，获取文件id</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NxSystemFileInfo</span>();</span><br><span class="line">    info.setOriginName(originName);</span><br><span class="line">    info.setFileName(fileName);</span><br><span class="line">    <span class="comment">//调用 nxSystemFileInfoService.add(info) 将文件信息存入数据库</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">addInfo</span> <span class="operator">=</span> nxSystemFileInfoService.add(info);</span><br><span class="line">    <span class="comment">//根据返回结果决定返回成功或失败的消息</span></span><br><span class="line">    <span class="keyword">if</span> (addInfo != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(addInfo);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;4001&quot;</span>, <span class="string">&quot;上传失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="文件上传前端js代码"><a href="#文件上传前端js代码" class="headerlink" title="文件上传前端js代码"></a>文件上传前端js代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">upload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// 获取文件输入控件中的文件</span></span><br><span class="line">                <span class="keyword">let</span> files = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>;</span><br><span class="line">                <span class="comment">// 遍历文件数组</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">                    <span class="comment">// 将文件添加到FormData对象中</span></span><br><span class="line">                    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[i]);</span><br><span class="line">                    <span class="comment">// 发起POST请求上传文件</span></span><br><span class="line">                    axios.<span class="title function_">post</span>(<span class="string">&#x27;/files/upload&#x27;</span>, formData, &#123;</span><br><span class="line">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="comment">// 文件上传成功后的处理</span></span><br><span class="line">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>,<span class="string">&#x27;文件上传成功&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileId</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">id</span>;</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileName</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">originName</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h4 id="filePage-分页查询文件信息接口"><a href="#filePage-分页查询文件信息接口" class="headerlink" title="filePage() 分页查询文件信息接口"></a>filePage() 分页查询文件信息接口</h4><p>filePage() 接口用于分页查询文件信息，可以根据文件名关键字进行筛选。<br>该接口依赖于 nxSystemFileInfoService.findPage 方法，从数据库中获取文件信息列表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件分页查询接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name 文件名关键字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum 当前页号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize 每页大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回文件信息分页结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/page/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;PageInfo&lt;NxSystemFileInfo&gt;&gt; <span class="title function_">filePage</span><span class="params">(<span class="meta">@PathVariable</span> String name,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;NxSystemFileInfo&gt; pageInfo = nxSystemFileInfoService.findPage(name, pageNum, pageSize);</span><br><span class="line">    <span class="keyword">return</span> Result.success(pageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="download-文件下载接口"><a href="#download-文件下载接口" class="headerlink" title="download() 文件下载接口"></a>download() 文件下载接口</h4><p>实现思路：</p>
<ol>
<li>接口通过id查找文件，@GetMapping(“&#x2F;download&#x2F;{id}”): 用于根据文件 ID 下载文件。</li>
<li>先验证文件id，然后根据id用服务层方法findById()查询数据库中的文件信息</li>
<li>通过FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</li>
<li>设置响应头，指示浏览器下载文件，最后将文件内容写入响应输出流并返回给客户端<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String id, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 检查文件ID是否为&quot;null&quot;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;null&quot;</span>.equals(id)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;您未上传文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//调用服务层方法 findById 根据文件 ID 查询文件信息</span></span><br><span class="line">    <span class="comment">// 根据文件ID查询数据库中的文件信息</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;未查询到该文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取文件内容</span></span><br><span class="line">    <span class="comment">//BASE_PATH 是文件存储的基本路径。</span></span><br><span class="line">    <span class="comment">//nxSystemFileInfo.getFileName() 获取文件的新文件名。</span></span><br><span class="line">    <span class="comment">//FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重置响应</span></span><br><span class="line">    <span class="comment">//清除响应中的所有缓存和设置</span></span><br><span class="line">    <span class="comment">//确保响应对象处于干净状态，避免之前的设置干扰当前操作</span></span><br><span class="line">    response.reset();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应头，指示浏览器如何处理文件</span></span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(nxSystemFileInfo.getOriginName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Length&quot;</span>, <span class="string">&quot;&quot;</span> + bytes.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取响应的输出流，用于将文件内容写入响应</span></span><br><span class="line">    <span class="comment">//使用 BufferedOutputStream 包装 response.getOutputStream()，提高写入效率</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">toClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(response.getOutputStream());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应内容类型</span></span><br><span class="line">    <span class="comment">// application/octet-stream 是通用的二进制流类型，适用于各种类型的文件。浏览器会根据这个类型决定如何处理文件（通常是下载）</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将文件内容写入响应输出流并关闭输出流</span></span><br><span class="line">    toClient.write(bytes);<span class="comment">//将文件内容写入输出流</span></span><br><span class="line">    toClient.flush();<span class="comment">//刷新输出流，确保所有数据都被写出</span></span><br><span class="line">    toClient.close();<span class="comment">//关闭输出流，释放资源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="getById-接口"><a href="#getById-接口" class="headerlink" title="getById() 接口"></a>getById() 接口</h4><ol>
<li>功能:调用服务层方法 findById 根据文件ID 查询单个文件的信息，并验证文件是否存在。</li>
<li>返回值:返回包含文件信息的成功结果或抛出自定义异常</li>
<li>异常处理:<br>如果文件 ID 无效或文件不存在，抛出自定义异常 CustomException。<br>可能抛出 NumberFormatException 异常，表示文件 ID 格式不正确。<br>可能抛出 IOException 异常，表示文件读写过程中发生错误。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">  <span class="comment">//将字符串形式的文件 ID 转换为长整型，并调用服务层方法 findById 查询文件信息</span></span><br><span class="line">  <span class="comment">//Long.parseLong(id) 将字符串形式的文件 ID 转换为长整型</span></span><br><span class="line">  <span class="comment">//nxSystemFileInfoService.findById(Long.parseLong(id)) 方法从数据库中查找指定 ID 的文件信息。</span></span><br><span class="line">  <span class="comment">//返回的 NxSystemFileInfo 对象包含文件的各种属性，如原始文件名、新文件名等</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="deleteFile删除文件接口"><a href="#deleteFile删除文件接口" class="headerlink" title="deleteFile删除文件接口"></a>deleteFile删除文件接口</h4><p>实现思路：</p>
<ol>
<li>先接收文件ID<br>@DeleteMapping(“&#x2F;{id}”) 表示处理 DELETE 请求。<br>@PathVariable String id：从 URL 中提取文件 ID。<br>调用 nxSystemFileInfoService.findById(Long.parseLong(id)) 方法根据 ID 查找文件信息。<br>如果找不到文件信息，则抛出异常</li>
<li>获取文件名，通过FileUtil.del(new File(BASE_PATH + name)) 删除文件</li>
<li>调用 nxSystemFileInfoService.delete(Long.parseLong(id)) 方法删除数据库中的记录</li>
<li>返回删除成功的消息。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="NxSystemFileController控制器相关重点理解"><a href="#NxSystemFileController控制器相关重点理解" class="headerlink" title="NxSystemFileController控制器相关重点理解"></a>NxSystemFileController控制器相关重点理解</h4><ol>
<li>如何实现文件上传功能？<br>A: 文件上传功能通过 @PostMapping(“&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名（添加时间戳）。然后将文件内容保存到指定路径，并将文件信息（如原始文件名和生成的文件名）存入数据库。最后返回上传结果。</li>
<li>为什么在文件上传时要生成唯一的文件名？<br>A: 生成唯一的文件名是为了避免文件名冲突。通过在文件名后添加时间戳，可以确保每个上传的文件都有唯一的标识符，防止不同用户上传同名文件时发生覆盖。</li>
<li>如何实现图片上传并缩小尺寸？<br>A: 图片上传并通过 Thumbnails 库缩小尺寸的功能通过 @PostMapping(“&#x2F;notice&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名。然后使用 Thumbnails 库将图片宽度缩小到 400 像素，并保存到指定路径。最后将文件信息存入数据库，并返回上传结果。</li>
<li>如何实现文件分页查询？<br>A: 文件分页查询功能通过 @GetMapping(“&#x2F;page&#x2F;{name}”) 接口实现。首先从请求参数中获取文件名关键字、当前页号和每页大小。然后调用 nxSystemFileInfoService.findPage 方法进行分页查询，并返回分页结果。</li>
<li>如何实现文件下载功能？<br>A: 文件下载功能通过 @GetMapping(“&#x2F;download&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则读取文件内容并将其写入响应输出流，同时设置响应头以便客户端下载文件。如果找不到文件信息，则抛出异常。</li>
<li>如何实现文件删除功能？<br>A: 文件删除功能通过 @DeleteMapping(“&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则先删除文件，再删除数据库中的记录。最后返回删除成功的消息。</li>
<li>如何确保文件操作的安全性和健壮性？<br>A: 为了确保文件操作的安全性和健壮性，代码中进行了以下措施：</li>
</ol>
<p>在文件上传时生成唯一的文件名，避免文件名冲突。<br>在文件下载和删除时检查文件是否存在，防止对不存在的文件进行操作。<br>使用 try-catch 块捕获可能出现的异常，并抛出自定义异常进行处理。<br>使用 FileUtil 工具类进行文件读写操作，简化文件操作并提高安全性。<br>8. upload() 接口和 noticeUpload() 接口的区别<br>用途不同:<br>upload() 用于通用文件上传。<br>noticeUpload() 特定用于上传通知公告的图片，并对其进行尺寸调整。<br>处理流程差异:<br>upload() 直接保存上传的文件。<br>noticeUpload() 在保存文件之前使用 Thumbnails 库缩小图片尺寸。<br>返回值不同:<br>upload() 返回的是文件信息对象。<br>noticeUpload() 返回的是包含文件 URL 和标题的映射对象。</p>
<h3 id="服务层NxSystemFileService"><a href="#服务层NxSystemFileService" class="headerlink" title="服务层NxSystemFileService"></a>服务层NxSystemFileService</h3><h4 id="服务层代码"><a href="#服务层代码" class="headerlink" title="服务层代码"></a>服务层代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">add</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dao层-NxSystemFileInfoDao"><a href="#dao层-NxSystemFileInfoDao" class="headerlink" title="dao层 NxSystemFileInfoDao"></a>dao层 NxSystemFileInfoDao</h3><h4 id="NxSystemFileInfoDao接口代码"><a href="#NxSystemFileInfoDao接口代码" class="headerlink" title="NxSystemFileInfoDao接口代码"></a>NxSystemFileInfoDao接口代码</h4></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Melon_Nie</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/09/08/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/">http://example.com/2024/09/08/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Melon_Nie</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/myimg/gril15.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/09/17/09-vuex/" title="（九）vuex学习篇"><img class="cover" src="/myimg/gril10.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">（九）vuex学习篇</div></div><div class="info-2"><div class="info-item-1">vue进阶-vuex学习整理</div></div></div></a><a class="pagination-related" href="/2024/08/13/08-VueCli/" title="（八）工程化开发和脚手架"><img class="cover" src="/myimg/gril10.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">（八）工程化开发和脚手架</div></div><div class="info-2"><div class="info-item-1">vue进阶学习-工程化开发和脚手架</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/./myimg/avatar2.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Melon_Nie</div><div class="author-info-description">欢迎访问，祝你拥有美好的一天</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Nie7-Melon"><i class="fab fa-github"></i><span>我的github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Nie7-Melon" target="_blank" title="Github"><i class="fab fa-github" style="color: #fad701;"></i></a><a class="social-icon" href="https://gitee.com/melon-nie" target="_blank" title="Gitee"><i class="fa-solid fa-house" style="color: #fad701;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.</span> <span class="toc-text">重要文件解读</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%B1%82%EF%BC%8Cdao%E5%B1%82%E9%87%8D%E7%82%B9%E7%90%86%E8%A7%A3"><span class="toc-number">1.1.</span> <span class="toc-text">服务层，控制层，dao层重点理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="toc-number">1.1.1.</span> <span class="toc-text">控制层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82"><span class="toc-number">1.1.2.</span> <span class="toc-text">服务层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dao%E5%B1%82"><span class="toc-number">1.1.3.</span> <span class="toc-text">dao层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E8%80%85%E5%85%B3%E7%B3%BB"><span class="toc-number">1.1.4.</span> <span class="toc-text">三者关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.2.</span> <span class="toc-text">目录解读</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">各目录及文件的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yml%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.3.</span> <span class="toc-text">yml文件解读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E5%92%8C-MyBatis-Plus"><span class="toc-number">1.4.</span> <span class="toc-text">MyBatis 和 MyBatis-Plus</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%A7%A3%E8%AF%BB"><span class="toc-number">2.1.</span> <span class="toc-text">数据库表解读</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%87%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">控制器文及其相关文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MenuController%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.</span> <span class="toc-text">MenuController接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">控制器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#classifyInfo-html"><span class="toc-number">4.2.</span> <span class="toc-text">classifyInfo.html</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#EchartsController-%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.</span> <span class="toc-text">EchartsController 接口</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ClassifyInfoController%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.</span> <span class="toc-text">ClassifyInfoController接口</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#NxSystemFile%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3%E6%A8%A1%E5%9D%97"><span class="toc-number">6.1.</span> <span class="toc-text">NxSystemFile文件管理相关模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8NxSystemFileController"><span class="toc-number">6.1.1.</span> <span class="toc-text">控制器NxSystemFileController</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E4%B9%8B%E9%97%B4%E8%81%94%E7%B3%BB"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">接口之间联系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#upload-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">upload()文件上传接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%89%8D%E7%AB%AFjs%E4%BB%A3%E7%A0%81"><span class="toc-number">6.1.1.3.</span> <span class="toc-text">文件上传前端js代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filePage-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.1.4.</span> <span class="toc-text">filePage() 分页查询文件信息接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#download-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.1.5.</span> <span class="toc-text">download() 文件下载接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getById-%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.1.6.</span> <span class="toc-text">getById() 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deleteFile%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.1.1.7.</span> <span class="toc-text">deleteFile删除文件接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NxSystemFileController%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9B%B8%E5%85%B3%E9%87%8D%E7%82%B9%E7%90%86%E8%A7%A3"><span class="toc-number">6.1.1.8.</span> <span class="toc-text">NxSystemFileController控制器相关重点理解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82NxSystemFileService"><span class="toc-number">6.1.2.</span> <span class="toc-text">服务层NxSystemFileService</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82%E4%BB%A3%E7%A0%81"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">服务层代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dao%E5%B1%82-NxSystemFileInfoDao"><span class="toc-number">6.1.3.</span> <span class="toc-text">dao层 NxSystemFileInfoDao</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NxSystemFileInfoDao%E6%8E%A5%E5%8F%A3%E4%BB%A3%E7%A0%81"><span class="toc-number">6.1.3.1.</span> <span class="toc-text">NxSystemFileInfoDao接口代码</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/12/13-vue3%E5%A4%A7%E4%BA%8B%E4%BB%B6%E9%A1%B9%E7%9B%AE/" title="（十三）vue3项目练习-大事件项目"><img src="/myimg/gril3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="（十三）vue3项目练习-大事件项目"/></a><div class="content"><a class="title" href="/2024/11/12/13-vue3%E5%A4%A7%E4%BA%8B%E4%BB%B6%E9%A1%B9%E7%9B%AE/" title="（十三）vue3项目练习-大事件项目">（十三）vue3项目练习-大事件项目</a><time datetime="2024-11-12T13:16:53.000Z" title="发表于 2024-11-12 21:16:53">2024-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/Nie-Blog%E7%9A%84%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF/" title="博客篇-Nie-Blog的美化之路"><img src="/myimg/gril12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客篇-Nie-Blog的美化之路"/></a><div class="content"><a class="title" href="/2024/11/08/Nie-Blog%E7%9A%84%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF/" title="博客篇-Nie-Blog的美化之路">博客篇-Nie-Blog的美化之路</a><time datetime="2024-11-08T11:40:20.000Z" title="发表于 2024-11-08 19:40:20">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/07/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客篇-我的hexo博客搭建"><img src="/myimg/gril10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客篇-我的hexo博客搭建"/></a><div class="content"><a class="title" href="/2024/11/07/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客篇-我的hexo博客搭建">博客篇-我的hexo博客搭建</a><time datetime="2024-11-07T09:35:30.000Z" title="发表于 2024-11-07 17:35:30">2024-11-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/23/12-pinia/" title="（十二）pinia学习篇"><img src="/myimg/gril12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="（十二）pinia学习篇"/></a><div class="content"><a class="title" href="/2024/10/23/12-pinia/" title="（十二）pinia学习篇">（十二）pinia学习篇</a><time datetime="2024-10-23T04:56:02.000Z" title="发表于 2024-10-23 12:56:02">2024-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/18/11-vue3/" title="（十一）vue3学习篇"><img src="/myimg/gril10.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="（十一）vue3学习篇"/></a><div class="content"><a class="title" href="/2024/10/18/11-vue3/" title="（十一）vue3学习篇">（十一）vue3学习篇</a><time datetime="2024-10-18T04:56:02.000Z" title="发表于 2024-10-18 12:56:02">2024-10-18</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,#FFE985 10%,#FA742B 100%);"><div id="footer-wrap"><div class="copyright">&copy;2024 By Melon_Nie</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>