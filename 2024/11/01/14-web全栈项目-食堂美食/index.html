<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>全栈项目篇-食悦平台 | Melon_Nie的妙妙屋</title><meta name="author" content="Melon_Nie"><meta name="copyright" content="Melon_Nie"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="web全栈项目-食悦平台代码整理，加深全栈理解学习">
<meta property="og:type" content="article">
<meta property="og:title" content="全栈项目篇-食悦平台">
<meta property="og:url" content="http://example.com/2024/11/01/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/index.html">
<meta property="og:site_name" content="Melon_Nie的妙妙屋">
<meta property="og:description" content="web全栈项目-食悦平台代码整理，加深全栈理解学习">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/myimg/girl22.jpg">
<meta property="article:published_time" content="2024-11-01T02:03:26.000Z">
<meta property="article:modified_time" content="2025-03-26T03:40:33.072Z">
<meta property="article:author" content="Melon_Nie">
<meta property="article:tag" content="项目">
<meta property="article:tag" content="全栈">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/myimg/girl22.jpg"><link rel="shortcut icon" href="/./myimg/cake.png"><link rel="canonical" href="http://example.com/2024/11/01/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '全栈项目篇-食悦平台',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/./myimg/avatar1.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(./myimg/girl22.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Melon_Nie的妙妙屋</span></a><a class="nav-page-title" href="/"><span class="site-name">全栈项目篇-食悦平台</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">全栈项目篇-食悦平台</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-01T02:03:26.000Z" title="发表于 2024-11-01 10:03:26">2024-11-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-26T03:40:33.072Z" title="更新于 2025-03-26 11:40:33">2025-03-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE/">项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>这篇文章记录学校课程，web全栈项目中我负责的部分，以后端为主（因为我后端的知识遗忘太多了..）</p>
<h1 id="重要文件解读"><a href="#重要文件解读" class="headerlink" title="重要文件解读"></a>重要文件解读</h1><h2 id="常见注解"><a href="#常见注解" class="headerlink" title="常见注解"></a>常见注解</h2><ol>
<li>@Resource:<br>这是一个 Java 注解，用于依赖注入。它类似于 Spring 的 @Autowired，但更通用，支持更多的注入方式。</li>
<li>@Service<br>标记这是一个<br>Spring 服务组件。Spring 会自动扫描并管理这个类的实例</li>
<li>@Override<br>注解在 Java 中用于明确表示一个方法重写了父类或实现了接口中的某个方法。<br>在服务层impl类中常用<br>使用 @Override 注解有几个重要的好处：</li>
</ol>
<p>提高代码可读性: 清晰地表明该方法是重写自父类或接口的方法。<br>编译时检查: 如果父类或接口中不存在对应的方法，编译器会报错，从而防止拼写错误或其他误操作。<br>维护方便: 当父类或接口发生变化时，IDE 可以提示哪些方法需要更新。<br>4. @RestController<br>是@Controller 和 @ResponseBody 的组合，简化了WESTful Web服务的开发</p>
<h2 id="整体架构逻辑关系"><a href="#整体架构逻辑关系" class="headerlink" title="整体架构逻辑关系"></a>整体架构逻辑关系</h2><p><a target="_blank" rel="noopener" href="https://lxblog.com/qianwen/share?shareId=07210c85-20fe-4b6b-8091-7a06745de5b0">https://lxblog.com/qianwen/share?shareId=07210c85-20fe-4b6b-8091-7a06745de5b0</a></p>
<p>前端发送请求到控制器，控制器调用服务层，服务层调用serviceimpl来实现服务器接口的方法，然后进入dao数据访问层，在MyBatis 映射文件 Mapper.xml里面定义了sql语句，然后进行数据库数据操作。实体类entity表示数据库表的接口，vo视图对象用于传输数据的对象，包含更多展示的或关联的信息<br>假设我们正在构建一个简单的分类管理系统，其中涉及以下几个主要组件：</p>
<p>实体类 (Entity): 表示数据库表的结构。<br>视图对象 (VO): 用于传输数据的对象。<br>数据访问层 (DAO): 负责与数据库进行交互。<br>服务层 (Service): 处理业务逻辑。<br>控制层 (Controller): 处理客户端请求。<br>MyBatis 映射文件: 定义 SQL 语句。</p>
<p>以下是各个文件之间的交互关系：</p>
<p>前端 (index.html):<br>用户通过浏览器发送 HTTP 请求到后端。<br>使用 Fetch API 发送 GET 请求到 &#x2F;classifyInfo 端点。<br>接收并解析后端返回的 JSON 数据，显示分类信息及其+子分类信息。<br>控制器 (ClassifyInfoController.java):<br>处理前端发送的 HTTP 请求。<br>根据请求路径和方法调用相应的服务层方法。<br>返回处理结果给前端。<br>服务层 (ClassifyInfoServiceImpl.java):<br>实现具体的业务逻辑。<br>调用数据访问层方法操作数据库。<br>将处理结果返回给控制器。<br>数据访问层 (ClassifyInfoDao.java):<br>定义与数据库交互的方法。<br>通过 MyBatis 映射文件执行具体的 SQL 语句。<br>MyBatis 映射文件 (ClassifyInfoMapper.xml):<br>定义具体的 SQL 语句。<br>与数据访问层接口中的方法对应。<br>实体类 (ClassifyInfo.java):<br>表示数据库表的结构。<br>用于存储分类信息的基本数据。<br>视图对象 (ClassifyInfoVo.java):<br>用于传输数据的对象。<br>包含更多的展示信息或关联信息。</p>
<h2 id="ajax-axios"><a href="#ajax-axios" class="headerlink" title="ajax axios"></a>ajax axios</h2><p><a target="_blank" rel="noopener" href="https://lxblog.com/qianwen/share?shareId=99c467a7-56f9-4604-afdc-1d870d291744">https://lxblog.com/qianwen/share?shareId=99c467a7-56f9-4604-afdc-1d870d291744</a></p>
<h2 id="服务层，控制层，dao层重点理解"><a href="#服务层，控制层，dao层重点理解" class="headerlink" title="服务层，控制层，dao层重点理解"></a>服务层，控制层，dao层重点理解</h2><h3 id="MyBatis映射文件"><a href="#MyBatis映射文件" class="headerlink" title="MyBatis映射文件"></a>MyBatis映射文件</h3><p>映射文件（如 NxSystemFileInfoDao.xml）通常位于 src&#x2F;main&#x2F;resources&#x2F;mapper&#x2F; 目录下）定义了具体的 SQL 查询语句，与 DAO 接口中的方法一一对应</p>
<h3 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h3><ol>
<li>作用: 处理 HTTP 请求和响应。<br>将业务逻辑交给 Service 层处理<br>返回业务结果</li>
<li>特点:<br>处理 HTTP 请求：接收客户端的请求并返回响应。<br>路由和参数解析：根据 URL 和请求参数调用相应的方法。<br>调用 Service 层：将具体的业务逻辑交给 Service 层处理。<br>返回结果：将 Service 层的结果封装成 HTTP 响应返回给客户端。</li>
</ol>
<h3 id="服务层"><a href="#服务层" class="headerlink" title="服务层"></a>服务层</h3><ol>
<li>作用：处理业务逻辑：实现具体的业务功能。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作<br>返回响应 </li>
<li>特点<br>业务逻辑处理：实现应用程序的核心业务逻辑。<br>事务管理：管理数据库事务，确保数据的一致性。<br>权限控制：检查用户是否有权执行某些操作。<br>数据校验：验证输入数据的有效性和完整性。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作。<br>抽象接口：提供清晰的业务接口，便于测试和维护</li>
</ol>
<h3 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h3><ol>
<li>作用：与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>提供基础 CRUD 操作：通过继承通用 Mapper 接口简化操作<br>返回数据结果</li>
<li>特点<br>与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>CRUD 操作：提供基础的增删改查方法。<br>自定义查询：可以根据需要编写自定义的查询方法。<br>隔离数据库细节：隐藏底层数据库的具体实现细节，使得业务逻辑层不直接依赖数据库。<br>提高可维护性：集中管理数据库操作，减少重复代码</li>
</ol>
<h3 id="三者关系"><a href="#三者关系" class="headerlink" title="三者关系"></a>三者关系</h3><ol>
<li>控制层调用服务层：<br>Controller 接收请求后，调用 Service 层的方法处理业务逻辑。</li>
<li>服务层调用 DAO 层：<br>Service 层在处理业务逻辑时，调用 DAO 层的方法与数据库交互。</li>
<li>数据流：<br>请求 -&gt; Controller -&gt; Service -&gt; DAO -&gt; 数据库<br>数据库 -&gt; DAO -&gt; Service -&gt; Controller -&gt; 响应</li>
</ol>
<h2 id="目录解读"><a href="#目录解读" class="headerlink" title="目录解读"></a>目录解读</h2><h3 id="各目录及文件的作用"><a href="#各目录及文件的作用" class="headerlink" title="各目录及文件的作用"></a>各目录及文件的作用</h3><p>src&#x2F;main&#x2F;java&#x2F;com.example&#x2F;<br>controller&#x2F;：存放所有的控制器类，这些类负责处理HTTP请求，调用服务层方法，并返回响应。<br>例如：MenuController.java, EchartsController.java, ClassifyInfoController.java 等。<br>service&#x2F;：存放服务层接口，这些接口定义了业务逻辑的方法。<br>例如：AdminInfoService.java, UserInfoService.java 等。<br>service&#x2F;impl&#x2F;：存放服务层接口的具体实现类。<br>例如：AdminInfoServiceImpl.java, UserInfoServiceImpl.java 等。<br>dao&#x2F; or repository&#x2F;：存放数据访问对象（DAO）或仓库（Repository）接口，这些接口定义了与数据库交互的方法。<br>例如：AdminInfoDao.java, UserInfoDao.java 等。<br>entity&#x2F;：存放实体类，这些类通常对应数据库中的表，用于封装数据。<br>例如：AdminInfo.java, UserInfo.java 等。<br>config&#x2F;：存放配置类，这些类用于配置Spring框架的各种组件。<br>例如：WebConfig.java, DatabaseConfig.java 等。<br>common&#x2F;：存放通用工具类、常量类等。<br>例如：Result.java, Utils.java 等。<br>Application.java：项目的启动类，通常包含Spring Boot应用的入口点。<br>例如：@SpringBootApplication 注解的类。<br>src&#x2F;main&#x2F;resources&#x2F;<br>application.properties：配置文件，用于配置应用的各种参数，如数据库连接、服务器端口等。<br>例如：spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mydb 等。<br>static&#x2F;：存放静态资源文件，如CSS、JavaScript、图片等。<br>例如：style.css, script.js, logo.png 等。<br>templates&#x2F;：存放模板文件，通常用于Thymeleaf或其他模板引擎。<br>例如：index.html, login.html 等。<br>src&#x2F;test&#x2F;java&#x2F;com.example&#x2F;<br>TestClasses.java：存放测试类，这些类用于编写单元测试和集成测试。<br>例如：MenuControllerTest.java, UserServiceTest.java 等。</p>
<h2 id="yml文件解读"><a href="#yml文件解读" class="headerlink" title="yml文件解读"></a>yml文件解读</h2><p>application.yml 文件详解<br>server 配置<br>yaml<br>深色版本<br>server:<br>  port: 8080<br>  connection-timeout: 60000<br>port: 8080<br>指定应用运行的端口号，默认是8080。<br>connection-timeout: 60000<br>设置连接超时时间，单位是毫秒。这里设置为60000毫秒，即60秒。<br>spring 配置<br>yaml<br>深色版本<br>spring:<br>  datasource:<br>    driver-class-name: com.mysql.cj.jdbc.Driver<br>    username: root<br>    password: 123456<br>    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>  thymeleaf:<br>    cache: false #关闭缓存<br>  servlet:<br>    multipart:<br>      max-file-size: 100MB<br>      max-request-size: 100MB<br>datasource:<br>driver-class-name: com.mysql.cj.jdbc.Driver<br>指定数据库驱动类名，这里是MySQL的驱动。<br>username: root<br>数据库用户名。<br>password: 123456<br>数据库密码。<br>url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>数据库连接URL，包括数据库地址、端口、数据库名以及一些连接参数。<br>useUnicode&#x3D;true: 使用Unicode字符集。<br>characterEncoding&#x3D;utf-8: 设置字符编码为UTF-8。<br>allowMultiQueries&#x3D;true: 允许执行多条SQL语句。<br>useSSL&#x3D;false: 不使用SSL连接。<br>serverTimezone&#x3D;GMT%2b8: 设置服务器时区为东八区（北京时间）。<br>thymeleaf:<br>cache: false<br>关闭Thymeleaf模板缓存，方便开发时实时看到模板变化。<br>servlet:<br>multipart:<br>max-file-size: 100MB<br>设置单个文件上传的最大大小为100MB。<br>max-request-size: 100MB<br>设置整个请求的最大大小为100MB。<br>mybatis 配置<br>yaml<br>深色版本<br>mybatis:<br>  mapper-locations: classpath:mapper&#x2F;<em>.xml<br>  type-aliases-package: com.example.entity<br>mapper-locations: classpath:mapper&#x2F;</em>.xml<br>指定MyBatis的Mapper XML文件的位置，这里设置为classpath下的mapper目录中的所有.xml文件。<br>type-aliases-package: com.example.entity<br>指定实体类所在的包路径，MyBatis会自动扫描该包下的类并为其生成别名。<br>pagehelper 配置<br>yaml<br>深色版本<br>pagehelper:<br>  helper-dialect: mysql<br>  reasonable: true<br>  support-methods-arguments: true<br>  params: count&#x3D;countSql<br>helper-dialect: mysql<br>指定分页插件使用的数据库方言，这里是MySQL。<br>reasonable: true<br>是否开启合理化模式，当总页数小于等于0时，返回第一页或最后一页。<br>support-methods-arguments: true<br>是否支持通过方法参数传递分页参数。<br>params: count&#x3D;countSql<br>分页参数的名称，这里设置为countSql。<br>authority 配置<br>yaml<br>深色版本<br>authority:<br>  info: ‘[{“models”:[{“modelId”:1,”operation”:[1,2,3,4]},{“modelId”:1000001,”operation”:[1,2,3,4]},{“modelId”:1000002,”operation”:[1,2,3,4]},{“modelId”:2,”operation”:[1,2,3,4]},{“modelId”:3,”operation”:[1,2,3,4]},{“modelId”:4,”operation”:[1,2,3,4]},{“modelId”:5,”operation”:[1,2,3,4]},{“modelId”:6,”operation”:[1,2,3,4]},{“modelId”:7,”operation”:[1,2,3,4]},{“modelId”:8,”operation”:[1,2,3,4]},{“modelId”:9,”operation”:[1,2,3,4]},{“modelId”:10,”operation”:[1,2,3,4]}],”level”:1,”modelId”:1,”name”:”管理员”},{“models”:[{“modelId”:5,”operation”:[4,1,2,3]},{“modelId”:9,”operation”:[4,1,2,3]}],”level”:2,”modelId”:2,”name”:”用户”}]’<br>info:<br>这是一个JSON字符串，定义了不同角色的权限信息。<br>每个角色包含models（模型）、level（权限级别）、modelId（模型ID）和name（角色名称）。<br>models是一个列表，每个元素包含modelId和operation（操作权限）。<br>logging 配置<br>yaml<br>深色版本<br>logging:<br>  file: log&#x2F;my.log<br>file: log&#x2F;my.log<br>指定日志文件的路径和名称，日志将被写入到log&#x2F;my.log文件中。<br>总结<br>server: 配置应用的端口和连接超时时间。<br>spring: 配置数据源、Thymeleaf模板引擎和文件上传限制。<br>mybatis: 配置MyBatis的Mapper XML文件位置和实体类包路径。<br>pagehelper: 配置分页插件的相关参数。<br>authority: 配置角色权限信息。<br>logging: 配置日志文件的路径和名称。</p>
<h2 id="MyBatis-和-MyBatis-Plus"><a href="#MyBatis-和-MyBatis-Plus" class="headerlink" title="MyBatis 和 MyBatis-Plus"></a>MyBatis 和 MyBatis-Plus</h2><p>MyBatis<br>定义<br>MyBatis 是一个优秀的持久层框架，它支持定制化SQL、存储过程以及高级映射。MyBatis 消除了几乎所有的JDBC代码和手动设置参数以及获取结果集。MyBatis 可以通过简单的XML或注解来配置和映射原生信息，将接口和Java的POJOs(Plain Old Java Objects)映射成数据库中的记录。</p>
<p>主要特点<br>轻量级：MyBatis 是一个轻量级的框架，不会占用太多的系统资源。<br>灵活：支持XML和注解两种方式配置SQL语句，可以根据项目需求选择合适的方式。<br>强大的映射功能：支持一对一、一对多、多对多等复杂关系的映射。<br>动态SQL：提供强大的动态SQL生成功能，可以根据条件动态生成SQL语句。<br>缓存机制：支持一级缓存和二级缓存，可以显著提高查询性能。<br>事务管理：支持事务管理，确保数据的一致性和完整性。<br>使用场景<br>当你需要对SQL进行精细控制时，MyBatis 是一个很好的选择。<br>适用于中小型项目，特别是那些需要高度定制化SQL的项目。<br>适合与Spring框架集成，形成完整的Web应用开发框架。<br>MyBatis-Plus<br>定义<br>MyBatis-Plus（简称MP）是MyBatis的增强工具，旨在简化开发、提高效率。它在MyBatis的基础上只做增强不做改变，为简化开发、提高效率而生。MyBatis-Plus 提供了许多开箱即用的功能，如CRUD操作、乐观锁、逻辑删除、分页等，使得开发者可以更加专注于业务逻辑的实现。</p>
<p>主要特点<br>无侵入：MyBatis-Plus 在MyBatis的基础上进行了扩展，完全兼容MyBatis的所有特性。<br>性能监控：内置性能分析插件，可以监控SQL执行时间，帮助优化性能。<br>内置分页插件：提供了一套强大的分页插件，支持多种数据库。<br>代码生成器：内置代码生成器，可以快速生成实体类、Mapper接口、Mapper XML文件等。<br>CRUD操作：提供了丰富的CRUD操作，无需编写SQL语句即可完成基本的增删改查操作。<br>乐观锁：支持乐观锁机制，防止并发更新数据时出现的问题。<br>逻辑删除：支持逻辑删除，可以在数据库中保留数据的同时标记为已删除。<br>全局配置：支持全局配置，可以统一管理一些常用的配置项。<br>使用场景<br>当你需要快速开发一个项目，且项目中包含大量的CRUD操作时，MyBatis-Plus 是一个非常好的选择。<br>适用于大型项目，特别是那些需要高效开发、减少重复代码的项目。<br>适合与Spring Boot框架集成，可以快速搭建企业级应用。<br>对比<br>特性	MyBatis	MyBatis-Plus<br>灵活性	高	中<br>学习曲线	中	低<br>内置功能	基础	丰富（如分页、代码生成等）<br>性能监控	无	内置<br>代码生成	无	内置<br>CRUD操作	手动编写SQL	内置<br>乐观锁	无	支持<br>逻辑删除	无	支持</p>
<h2 id="普通查询和分页查询"><a href="#普通查询和分页查询" class="headerlink" title="普通查询和分页查询"></a>普通查询和分页查询</h2><p>分页查询<br><a target="_blank" rel="noopener" href="https://lxblog.com/qianwen/share?shareId=b8a915f8-46de-492f-8a3e-b42b3a9d068b">https://lxblog.com/qianwen/share?shareId=b8a915f8-46de-492f-8a3e-b42b3a9d068b</a></p>
<p>普通查询<br>定义: 普通查询是指一次性从数据库中检索所有符合条件的数据记录。<br>特点:<br>一次性加载: 所有符合条件的数据都会被一次性加载到内存中。<br>适用场景: 数据量较小的情况，或者不需要对数据进行分页展示的场景。<br>优点: 实现简单，易于理解。<br>缺点: 当数据量较大时，可能导致性能问题（如内存不足、响应时间长）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p>在这个方法中，findAll() 方法会返回所有 NxSystemFileInfo 记录的列表。<br>2. 分页查询<br>定义: 分页查询是指将大量数据分成多个小部分（称为“页”），每次只加载其中的一部分数据。<br>特点<br>按需加载: 只加载当前需要显示的那一部分数据，减少内存占用。<br>适用场景: 大数据量的情况，需要在前端进行分页展示的场景。<br>优点: 提高性能，减少服务器压力，提高用户体验。<br>缺点: 实现相对复杂一些，需要额外的参数来控制分页逻辑。<br>示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span>;</span><br></pre></td></tr></table></figure>
<p>在这个方法中，findPage() 方法接受三个参数：<br>name: 文件名关键字，用于过滤数据。<br>pageNum: 当前页码。<br>pageSize: 每页显示的记录数。<br>方法返回一个</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PageInfo&lt;NxSystemFileInfo&gt; </span><br></pre></td></tr></table></figure>
<p> 对象，该对象包含了分页信息（如总记录数、总页数、当前页数据等）。</p>
<ol>
<li>分页查询的优势<br>3.1 性能优化<br>减少内存占用: 只加载当前页的数据，避免一次性加载大量数据导致内存溢出。<br>快速响应: 加载较少的数据可以显著减少响应时间，提升用户体验。<br>3.2 用户体验<br>易用性: 用户可以通过翻页浏览大量数据，而无需等待所有数据加载完成。<br>可读性: 分页显示使得数据更加清晰有序，便于用户查找和管理。<br>3.3 减少带宽消耗<br>高效传输: 只传输当前页的数据，减少了不必要的网络流量。</li>
</ol>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="数据库表解读"><a href="#数据库表解读" class="headerlink" title="数据库表解读"></a>数据库表解读</h2><blockquote>
<p>管理员信息表 (admin_info):<br>包含管理员的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、编号、邮箱、身份证、权限等级、账户等。<br>level 字段表示管理员的权限等级，默认值为1。<br>公告信息表 (advertiser_info):<br>包含公告的名称、内容、发布时间等信息。<br>菜谱大类信息表 (classify_info):<br>包含菜谱大类的名称和描述。<br>收藏信息表 (collect_info):<br>记录用户的收藏信息，包括收藏的名称、时间、菜谱ID、笔记ID、用户ID、用户等级等。<br>笔记评论信息表 (comment_notes_info):<br>记录笔记的评论信息，包括评论内容、评论时间、评论人、关联的模块ID等。<br>食材信息表 (foods_material_info):<br>包含食材的名称、描述、文件ID、文件名、上传人、用户等级、用户ID等。<br>菜谱信息表 (foods_menu_info):<br>包含菜谱的名称、描述、菜谱标签、菜谱小类ID、文件ID、文件名、上传人、用户等级、用户ID等。<br>趣味答题信息表 (message_info):<br>包含趣味答题的名称、回答内容、回答时间等信息。<br>饮食资讯信息表 (news_info):<br>包含饮食资讯的名称和内容。<br>笔记信息表 (notes_info):<br>包含笔记的名称、上传时间、用户ID、内容、审核状态等。<br>文件信息表 (nx_system_file_info):<br>包含文件的原始文件名和存储文件名。<br>笔记点赞信息表 (praise_info):<br>记录笔记的点赞信息，包括名称、时间、笔记ID、菜谱ID、用户ID、用户等级等。<br>菜谱小类信息表 (sub_classify_info):<br>包含菜谱小类的名称、描述、菜谱大类ID等。<br>用户信息表 (user_info):<br>包含用户的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、邮箱、身份证、权限等级等。<br>level 字段表示用户的权限等级，默认值为2</p>
</blockquote>
<h1 id="控制器文及其相关文件"><a href="#控制器文及其相关文件" class="headerlink" title="控制器文及其相关文件"></a>控制器文及其相关文件</h1><p>负责 辅助信息 相关的控制器，包含：<br>MenuController (2)<br>EchartsController (2)<br>ClassifyInfoController (8)<br>NxSystemFileController (6)<br>AdvertiserInfoController (8)<br>SubClassifyInfoController (8)</p>
<h2 id="管理页面菜单动态渲染模块"><a href="#管理页面菜单动态渲染模块" class="headerlink" title="管理页面菜单动态渲染模块"></a>管理页面菜单动态渲染模块</h2><h3 id="功能描述"><a href="#功能描述" class="headerlink" title="功能描述"></a>功能描述</h3><p>根据用户不同身份加载后端管理系统菜单栏<br>功能描述：在用户在首页中点击“进入后台系统”时候，根据用户的普通身份或管理员身份加载对应的后台管理系统页面，为不同类型的用户提供对应的功能展示。<br>代码描述：在用户要进入管理系统时，前端向后端发送请求获取用户类型信息。<br>后端首先获取当前用户的信息，管理员用户，权限级别为1（level &#x3D; 1）（未登录的用户在首页不会看到“进入后台系统”的标签，所以不用担心这里会出问题）；如果是普通用户，那么权限级别为2（level &#x3D; 2）。然后根据用户权限级别（level&#x3D;1为管理员，2为普通用户）生成不同的菜单项信息到后端要返回前端的数据数组中。接着通过 getJsonObject()方法将数据数组添加到要返回给前端的对象中，最后返回一个包含菜单项信息的 JSONObject。<br>后端返回的用户信息解构后赋值到authority中，然后根据authority的数据进行v-if判断菜单栏是否渲染。</p>
<h3 id="控制器类-MenuController-java"><a href="#控制器类-MenuController-java" class="headerlink" title="控制器类 MenuController.java"></a>控制器类 MenuController.java</h3><p>这是一个用于生成菜单界面的控制器，它基于用户的不同权限级别显示不同的菜单项，并且还提供了一个获取总记录数的API。<br>getMenu 方法：根据用户权限级别生成不同的菜单项，并返回JSON格式的菜单数据。<br>getJsonObject 方法：辅助方法，用于生成单个菜单项的JSON对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span><span class="comment">//负责处理前端请求，并返回导航菜单数据</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span><span class="comment">//这是一个依赖注入注解，用于自动装配Bean。这里用于注入各种业务逻辑服务实现类。</span></span><br><span class="line">	<span class="keyword">private</span> AdminInfoServiceimpl adminInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> UserInfoServiceimpl userInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> ClassifyInfoServiceimpl classifyInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> SubClassifyInfoServiceimpl subClassifyInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> CollectInfoServiceimpl collectInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> PraiseInfoServiceimpl praiseInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> NewsInfoServiceimpl newsInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> AdvertiserInfoServiceimpl advertiserInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> MessageInfoServiceimpl messageInfoService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/getMenu&quot;, produces=&quot;application/json;charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMenu</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">		<span class="comment">//HTTP请求中获取用户会话信息，检查是否有登录用户</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> (Account) request.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Integer level;</span><br><span class="line">        <span class="keyword">if</span> (account == <span class="literal">null</span>) &#123;</span><br><span class="line">            level = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            level = account.getLevel();</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">// 创建一个JSON对象用于存储导航菜单项</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        obj.putOpt(<span class="string">&quot;code&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        obj.putOpt(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">dataArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">		<span class="comment">// 添加系统首页菜单项</span></span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;系统首页&quot;</span>, <span class="string">&quot;layui-icon-home&quot;</span>, <span class="string">&quot;/&quot;</span>));</span><br><span class="line">		<span class="comment">// 创建信息管理菜单项</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">tableObj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        tableObj.putOpt(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;信息管理&quot;</span>);</span><br><span class="line">        tableObj.putOpt(<span class="string">&quot;icon&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>);</span><br><span class="line">		<span class="comment">// 根据用户权限级别决定是否添加信息管理菜单项</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="number">1</span> == level) &#123;</span><br><span class="line">			<span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">			<span class="comment">//getJsonObject方法创建每个子菜单项，并将其添加到array中</span></span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;adminInfo&quot;</span>, <span class="string">&quot;管理员信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;adminInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;userInfo&quot;</span>, <span class="string">&quot;用户信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;userInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;classifyInfo&quot;</span>, <span class="string">&quot;菜谱大类信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;classifyInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;subClassifyInfo&quot;</span>, <span class="string">&quot;菜谱小类信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;subClassifyInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMenuInfo&quot;</span>, <span class="string">&quot;菜谱信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMenuInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMaterialInfo&quot;</span>, <span class="string">&quot;食材信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMaterialInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;collectInfo&quot;</span>, <span class="string">&quot;收藏信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;collectInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;praiseInfo&quot;</span>, <span class="string">&quot;笔记点赞信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;praiseInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;notesInfo&quot;</span>, <span class="string">&quot;笔记信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;notesInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;newsInfo&quot;</span>, <span class="string">&quot;饮食资讯信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;newsInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;advertiserInfo&quot;</span>, <span class="string">&quot;公告信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;advertiserInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;messageInfo&quot;</span>, <span class="string">&quot;趣味答题信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;messageInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;accountAdminInfo&quot;</span>, <span class="string">&quot;个人信息&quot;</span>, <span class="string">&quot;layui-icon-user&quot;</span>, <span class="string">&quot;accountAdminInfo&quot;</span>));</span><br><span class="line">			tableObj.putOpt(<span class="string">&quot;list&quot;</span>, array);</span><br><span class="line">			<span class="comment">//将array设置为tableObj的list属性，以便在前端展示这些子菜单项</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="number">2</span> == level) &#123;</span><br><span class="line">			<span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMenuInfo&quot;</span>, <span class="string">&quot;菜谱信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMenuInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;notesInfo&quot;</span>, <span class="string">&quot;笔记信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;notesInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;accountUserInfo&quot;</span>, <span class="string">&quot;个人信息&quot;</span>, <span class="string">&quot;layui-icon-user&quot;</span>, <span class="string">&quot;accountUserInfo&quot;</span>));</span><br><span class="line">			tableObj.putOpt(<span class="string">&quot;list&quot;</span>, array);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        dataArray.add(tableObj);</span><br><span class="line">		dataArray.add(getJsonObject(<span class="string">&quot;notesInfoComment&quot;</span>, <span class="string">&quot;笔记评论&quot;</span>, <span class="string">&quot;layui-icon-group&quot;</span>, <span class="string">&quot;notesInfoComment&quot;</span>));</span><br><span class="line"></span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;updatePassword&quot;</span>, <span class="string">&quot;修改密码&quot;</span>, <span class="string">&quot;layui-icon-password&quot;</span>, <span class="string">&quot;updatePassword&quot;</span>));</span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;login&quot;</span>, <span class="string">&quot;退出登录&quot;</span>, <span class="string">&quot;layui-icon-logout&quot;</span>, <span class="string">&quot;login&quot;</span>));</span><br><span class="line"></span><br><span class="line">        obj.putOpt(<span class="string">&quot;data&quot;</span>, dataArray);</span><br><span class="line">        <span class="keyword">return</span> obj.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JSONObject <span class="title function_">getJsonObject</span><span class="params">(String name, String title, String icon, String jump)</span> &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        object.putOpt(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        object.putOpt(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">        object.putOpt(<span class="string">&quot;icon&quot;</span>, icon);</span><br><span class="line">        object.putOpt(<span class="string">&quot;jump&quot;</span>, jump);</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h3><p>获取用户的权限信息的get请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&quot;/authority&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">				<span class="comment">/*如果res.data.code等于&#x27;0&#x27;，表示请求成功。</span></span><br><span class="line"><span class="comment">				将res.data.data赋值给this.authority，</span></span><br><span class="line"><span class="comment">				更新Vue实例中的authority数据属性*/</span></span><br><span class="line">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">authority</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>html动态渲染部分代码</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-yelp &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>信息展示 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fa arrow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-second-level collapse in&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(1) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;adminInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>管理员信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(2) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;userInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>用户信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(3) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;classifyInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱大类信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(4) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;subClassifyInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱小类信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(5) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;foodsMenuInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="classifyInfo-html"><a href="#classifyInfo-html" class="headerlink" title="classifyInfo.html"></a>classifyInfo.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info&quot;</span> <span class="attr">title</span>=<span class="string">&quot;跳转到个人信息&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;personalPage&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-user fa-2x&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">使用javascript:void(0)防止页面跳转</span></span><br><span class="line"><span class="comment">javascript:void(0) 是一个常用的技巧，用于在 HTML 中创建一个不会导致页面跳转的链接。具体解释如下：</span></span><br><span class="line"><span class="comment">javascript: - 这是一个伪协议，告诉浏览器后面的内容是一段 JavaScript 代码。</span></span><br><span class="line"><span class="comment">vo--&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Echarts图标生成模块"><a href="#Echarts图标生成模块" class="headerlink" title="Echarts图标生成模块"></a>Echarts图标生成模块</h2><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-info&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                            数据图表</span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;drawLine&quot;</span></span></span><br><span class="line"><span class="tag">                                    <span class="attr">v-model</span>=<span class="string">&quot;echartsModel&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in echartsModelOptions&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span>&#123;&#123;item.label&#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;float:right&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;selectEchartsType&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;echartsType&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;pie&quot;</span>&gt;</span>饼图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bar&quot;</span>&gt;</span>柱状图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- 为ECharts准备一个具备大小（宽高）的盒子 --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height:400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">            <span class="comment">//发起HTTP请求获取数据并绘制图标发送GET请求，初始化ECharts实例并设置图表选项</span></span><br><span class="line">            <span class="title function_">drawLine</span>(<span class="params"></span>) &#123;</span><br><span class="line">                axios.<span class="title function_">get</span>(<span class="string">&#x27;/echarts/get/&#x27;</span> + <span class="variable language_">this</span>.<span class="property">echartsModel</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// 基于准备好的dom，初始化echarts实例</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">echartsShowArr</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">                        <span class="keyword">let</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">                        <span class="keyword">let</span> option = <span class="variable language_">this</span>.<span class="title function_">getEchartsType</span>(<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>, <span class="variable language_">this</span>.<span class="property">echartsType</span>);</span><br><span class="line">                        myChart.<span class="title function_">setOption</span>(option, <span class="literal">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">			<span class="comment">//切换echarts图表类型</span></span><br><span class="line">             <span class="comment">//当用户选择不同的图表类型时，更新图表显示</span></span><br><span class="line">            <span class="title function_">selectEchartsType</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">                <span class="keyword">let</span> option = <span class="variable language_">this</span>.<span class="title function_">getEchartsType</span>(<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>, <span class="variable language_">this</span>.<span class="property">echartsType</span>);</span><br><span class="line">                myChart.<span class="title function_">setOption</span>(option, <span class="literal">true</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">             <span class="comment">//根据类型获取echarts配置</span></span><br><span class="line">            <span class="comment">//遍历echarts数据数组，根据指定的图表类型，从数据数组中找到匹配的图表配置并返回</span></span><br><span class="line">            <span class="title function_">getEchartsType</span>(<span class="params">echartsArr, type</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> echartsArr) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (item.<span class="property">series</span>[<span class="number">0</span>].<span class="property">type</span> === type) &#123;</span><br><span class="line">                        <span class="keyword">return</span> item;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="控制器EchartsController-java"><a href="#控制器EchartsController-java" class="headerlink" title="控制器EchartsController.java"></a>控制器EchartsController.java</h3><p>获取ECharts数据：<br>getEchartsData方法接收一个路径参数modelName，根据不同的模型名称调用相应的服务方法获取数据。<br>对于每个模型，统计性别分布或分类数量，并调用getPieData和getBarData方法生成饼图和柱状图数据。<br>最后将生成的图表数据列表封装在Result对象中返回。<br>获取选项列表：<br>getOptions方法返回一个包含所有可用模型名称及其标签的列表，用于前端选择。<br>生成图表数据：<br>getPieData方法生成饼图数据，包括标题、系列数据、图例等。<br>getBarData方法生成柱状图数据，包括标题、X轴数据、Y轴数据、图例等。</p>
<h2 id="ClassifyInfo菜谱大类分类模块"><a href="#ClassifyInfo菜谱大类分类模块" class="headerlink" title="ClassifyInfo菜谱大类分类模块"></a>ClassifyInfo菜谱大类分类模块</h2><h3 id="功能思想"><a href="#功能思想" class="headerlink" title="功能思想"></a>功能思想</h3><p>1）	菜谱分类逻辑<br>在后端管理系统中，菜单栏有“菜谱大类信息”和“菜谱小类信息”两栏。管理员用户可以对菜谱分类进行管理。菜谱分类包括菜谱大类和菜谱小类，菜谱小类是菜谱大类的详细分类。这样分类在数据增加后可以对美食进行详细的划分，让数据更有条理，给用户更好的使用体验。<br>2）	菜谱的增删查改<br>在菜谱大类信息和菜谱小类信息中，都可以实现对对应分类的添加、搜索、编辑、删除的操作。<br>3）	能供用excel表格批量导入菜谱分类<br>在菜谱大类信息和菜谱小类信息亮栏中，提供excel模板下载的功能，下载模板后通过在模板上编写要添加的分类信息和对应的描述，再将写好后的模板excel表格文件进行批量导入，可以实现一次性批量增加多条分类信息。</p>
<h3 id="前端js模块"><a href="#前端js模块" class="headerlink" title="前端js模块"></a>前端js模块</h3><h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">msg</span>(<span class="params">type, msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: type, <span class="comment">// success（成功）、warning（警告）, error(错误)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: msg,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">duration</span>: <span class="number">2000</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">center</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#wrapper&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">authority</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">permission</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">storeUser</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>)),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">objs</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageInfo</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">preActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">nextActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">entity</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);<span class="comment">//加载第一页的表格数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">user</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取权限信息</span></span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;/permission/3&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">permission</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取权限组信息</span></span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;/authority&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">authority</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadTable</span>(<span class="params">pageNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> name = <span class="variable language_">this</span>.<span class="property">name</span> === <span class="string">&#x27;&#x27;</span> ? <span class="string">&quot;all&quot;</span> : <span class="variable language_">this</span>.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">get</span>(<span class="string">&quot;/classifyInfo/page/&quot;</span> + name + <span class="string">&quot;?pageNum=&quot;</span> + pageNum).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">objs</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">pageInfo</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">preActive</span> = !(<span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">hasPreviousPage</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">nextActive</span> = !(<span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">hasNextPage</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">init</span>(<span class="params">o</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">3</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">entity</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o));</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">1</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">entity</span> = &#123;<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>&#125;;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">update</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="title function_">checkValid</span>(<span class="variable language_">this</span>.<span class="property">entity</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        axios.<span class="title function_">post</span>(</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&quot;/classifyInfo&quot;</span>, <span class="variable language_">this</span>.<span class="property">entity</span></span></span><br><span class="line"><span class="language-javascript">                        ).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;添加成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        axios.<span class="title function_">put</span>(</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&quot;/classifyInfo&quot;</span>, <span class="variable language_">this</span>.<span class="property">entity</span></span></span><br><span class="line"><span class="language-javascript">                        ).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;更新成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">del</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">2</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除？&#x27;</span>, <span class="string">&#x27;系统提示&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">cancelButtonClass</span>: <span class="string">&#x27;btn-custom-cancel&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">delete</span>(<span class="string">&quot;/classifyInfo/&quot;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;删除成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            _this.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消成功！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">downModel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                location.<span class="property">href</span> = <span class="string">&#x27;/classifyInfo/getExcelModel&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">clickUpload</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">1</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">upload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> files = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span><br><span class="line"><span class="language-javascript">                    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[i]);</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">post</span>(<span class="string">&#x27;/classifyInfo/upload&#x27;</span>, formData, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;批量导入成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">logout</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="实体类-entity"><a href="#实体类-entity" class="headerlink" title="实体类 entity"></a>实体类 entity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;classify_info&quot;)</span></span><br><span class="line"><span class="comment">//将 Java 类映射到数据库中的 classify_info表</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfo</span>  &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Column(name = &quot;name&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="meta">@Column(name = &quot;descroiption&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String descroiption;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> descroiption;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String descroiption)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.descroiption = descroiption;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="控制层-ClassifyInfoController-java"><a href="#控制层-ClassifyInfoController-java" class="headerlink" title="控制层 ClassifyInfoController.java"></a>控制层 ClassifyInfoController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/classifyInfo&quot;)</span></span><br><span class="line"><span class="comment">//注解表示该控制器处理所有以 /classifyInfo 开头的HTTP请求。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoController</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ClassifyInfoServiceimpl classifyInfoService;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;ClassifyInfo&gt; <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> ClassifyInfoVo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoService.add(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        classifyInfoService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> ClassifyInfoVo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoService.update(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;ClassifyInfo&gt; <span class="title function_">detail</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">ClassifyInfo</span> <span class="variable">classifyInfo</span> <span class="operator">=</span> classifyInfoService.findById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;List&lt;ClassifyInfoVo&gt;&gt; <span class="title function_">all</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfoService.findAll());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;PageInfo&lt;ClassifyInfoVo&gt;&gt; <span class="title function_">page</span><span class="params">(<span class="meta">@PathVariable</span> String name,</span></span><br><span class="line"><span class="params">                                                <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                                <span class="meta">@RequestParam(defaultValue = &quot;5&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                                                HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfoService.findPage(name, pageNum, pageSize, request));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="dao-ClassifyInfoDao-java"><a href="#dao-ClassifyInfoDao-java" class="headerlink" title="dao ClassifyInfoDao.java"></a>dao ClassifyInfoDao.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;ClassifyInfo&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>作用: 定义了一个数据访问层接口。<br>说明:<br>@Repository 注解表示该接口是一个数据访问层组件，Spring会自动扫描并管理这个接口。<br>extends Mapper<ClassifyInfo> 表示 ClassifyInfoDao 继承了 Mapper 接口，从而获得了基本的CRUD（创建、读取、更新、删除）操作能力。<br>Mapper 接口是TkMapper库提供的一个通用Mapper接口，包含了常用的数据库操作方法，如 select, insert, update, delete 等。<br>自定义方法 (findByName)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;ClassifyInfoVo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br></pre></td></tr></table></figure>
<p>作用: 定义了一个自定义查询方法，根据名称查找分类信息。<br>说明:<br>List<ClassifyInfoVo>: 返回类型为 ClassifyInfoVo 对象的列表。<br>findByName: 方法名称，表示根据名称查找分类信息。<br>@Param(“name”) String name: 参数注解，指定参数名称为 name。在MyBatis的XML映射文件中可以通过 #{name} 来引用这个参数。<br>这个方法需要在对应的XML映射文件中实现具体的SQL查询逻辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;ClassifyInfo&gt; &#123;</span><br><span class="line">    List&lt;ClassifyInfoVo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="vo-ClassifyInfoVo-java"><a href="#vo-ClassifyInfoVo-java" class="headerlink" title="vo ClassifyInfoVo.java"></a>vo ClassifyInfoVo.java</h3><p>使用场景<br>服务层到表现层的数据传输:<br>在服务层中，你可以创建 ClassifyInfoVo 对象，并将其填充数据后返回给表现层（如控制器）。<br>这种方式可以确保表现层接收到的数据不仅包含分类的基本信息，还包含与其相关的子分类信息。<br>JSON 序列化:<br>当将 ClassifyInfoVo 对象序列化为 JSON 格式时，subList 字段也会被包含在内。<br>这对于需要展示分类及其子分类的应用程序非常有用。使用场景<br>服务层到表现层的数据传输:<br>在服务层中，你可以创建 ClassifyInfoVo 对象，并将其填充数据后返回给表现层（如控制器）。<br>这种方式可以确保表现层接收到的数据不仅包含分类的基本信息，还包含与其相关的子分类信息。<br>JSON 序列化:<br>当将 ClassifyInfoVo 对象序列化为 JSON 格式时，subList 字段也会被包含在内。<br>这对于需要展示分类及其子分类的应用程序非常有用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoVo</span> <span class="keyword">extends</span> <span class="title class_">ClassifyInfo</span> &#123;</span><br><span class="line"><span class="comment">//subList用于存储子分类信息，有助于在返回给客户端的数据中包含更多的相关信息</span></span><br><span class="line">    List&lt;SubClassifyInfoVo&gt; subList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;SubClassifyInfoVo&gt; <span class="title function_">getSubList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> subList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSubList</span><span class="params">(List&lt;SubClassifyInfoVo&gt; subList)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subList = subList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="服务层-ClassifyInfoService-java"><a href="#服务层-ClassifyInfoService-java" class="headerlink" title="服务层 ClassifyInfoService.java"></a>服务层 ClassifyInfoService.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">add</span><span class="params">(ClassifyInfo classifyInfo)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(ClassifyInfo classifyInfo)</span>;</span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;ClassifyInfoVo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize, HttpServletRequest request)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAllPage</span><span class="params">(HttpServletRequest request, String name)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="impl-ClassifyInfoServiceimpl-java"><a href="#impl-ClassifyInfoServiceimpl-java" class="headerlink" title="impl ClassifyInfoServiceimpl.java"></a>impl ClassifyInfoServiceimpl.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.dao.ClassifyInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.dao.SubClassifyInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.service.ClassifyInfoService;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.SubClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoServiceimpl</span> <span class="keyword">implements</span> <span class="title class_">ClassifyInfoService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span> <span class="comment">//依赖注入，将 ClassifyInfoDao 和 SubClassifyInfoDao 的实例注入到当前类中</span></span><br><span class="line">    <span class="keyword">private</span> ClassifyInfoDao classifyInfoDao;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SubClassifyInfoDao subClassifyInfoDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">add</span><span class="params">(ClassifyInfo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoDao.insertSelective(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> classifyInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        classifyInfoDao.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(ClassifyInfo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoDao.updateByPrimaryKeySelective(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">findById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> classifyInfoDao.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;ClassifyInfoVo&gt; all = classifyInfoDao.findByName(<span class="string">&quot;all&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (ClassifyInfoVo classifyInfoVo : all) &#123;</span><br><span class="line">            List&lt;SubClassifyInfoVo&gt; subList = subClassifyInfoDao.findByClassifyId(classifyInfoVo.getId());</span><br><span class="line">            classifyInfoVo.setSubList(subList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;ClassifyInfoVo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize, HttpServletRequest request)</span> &#123;</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">        List&lt;ClassifyInfoVo&gt; all = findAllPage(request, name);</span><br><span class="line">        <span class="keyword">return</span> PageInfo.of(all);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAllPage</span><span class="params">(HttpServletRequest request, String name)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> classifyInfoDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ClassifyInfoMapper-xml"><a href="#ClassifyInfoMapper-xml" class="headerlink" title="ClassifyInfoMapper.xml"></a>ClassifyInfoMapper.xml</h3><p>ClassifyInfoMapper.xml部分实现代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定这个映射文件对应的 DAO 接口全限定名。MyBatis使用这个命名空间来找到对应的接口方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.dao.ClassifyInfoDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--.通过传入的name参数进行模糊查询</span></span><br><span class="line"><span class="comment">     如果name为null、空字符串或&#x27;all&#x27;，则不进行名称过滤</span></span><br><span class="line"><span class="comment">     查询结果按照文件信息的ID进行排序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.vo.ClassifyInfoVo&quot;</span>&gt;</span></span><br><span class="line">        select `classify_info`.* from `classify_info`</span><br><span class="line">        <span class="comment">&lt;!-- where 1 = 1 用于避免动态条件拼接时的语法错误,用于简化动态条件拼接。</span></span><br><span class="line"><span class="comment">       &lt;if&gt; 元素: 动态 SQL 条件，只有在 name 参数不为空且不是 &#x27;all&#x27; 时才会添加到 SQL 语句中</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">            where 1 = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27; and name != &#x27;all&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and `classify_info`.`name` like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            order by `classify_info`.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="属性和方法理解"><a href="#属性和方法理解" class="headerlink" title="属性和方法理解"></a>属性和方法理解</h4><p>数据属性 (data)<br>authority:<br>存储权限组信息。<br>permission:<br>存储用户的权限信息。<br>storeUser:<br>从localStorage获取当前登录用户的信息。<br>name:<br>搜索关键字，用于过滤分类信息。<br>user:<br>当前登录用户的信息。<br>objs:<br>表格数据列表，存储从服务器获取的分类信息。<br>pageInfo:<br>分页信息，包含总页数、当前页码、是否有上一页和下一页等。<br>preActive 和 nextActive:<br>控制分页按钮的激活状态。当没有上一页时，preActive为false；当没有下一页时，nextActive为false。<br>entity:<br>当前操作的对象，初始值为{sex: ‘男’}。用于存储要添加或更新的分类信息。<br>生命周期钩子 (created)<br>作用:<br>在Vue实例创建完成后立即调用。<br>具体操作:<br>调用loadTable(1)加载第一页的数据。<br>获取当前登录用户的信息并存储在user变量中。<br>发送GET请求获取权限信息并存储在permission变量中。<br>发送GET请求获取权限组信息并存储在authority变量中。<br>方法 (methods)<br>loadTable(pageNum):<br>作用: 根据页码加载分类信息数据。<br>参数: pageNum - 页码。<br>过程:<br>如果name为空，则使用”all”作为搜索关键字。<br>发送GET请求到&#x2F;classifyInfo&#x2F;page&#x2F;{name}?pageNum&#x3D;{pageNum}。<br>将响应数据中的列表存储在objs中，并将分页信息存储在pageInfo中。<br>更新preActive和nextActive的状态以控制分页按钮的激活状态。<br>init(o):<br>作用: 初始化模态框，填充数据并显示模态框。<br>参数: o - 要编辑的对象。<br>过程:<br>检查用户是否有相应的权限（权限索引为3）。如果没有权限，显示警告消息并返回。<br>使用深拷贝的方式将对象o赋值给entity。<br>显示模态框（通过调用$(‘#mod’).modal(‘show’)）。<br>add():<br>作用: 显示空表单以便添加新记录。<br>过程:<br>检查用户是否有相应的权限（权限索引为1）。如果没有权限，显示警告消息并返回。<br>重置entity对象为{sex: ‘男’}。<br>显示模态框（通过调用$(‘#mod’).modal(‘show’)）。<br>update():<br>作用: 保存或更新分类信息。<br>过程:<br>检查entity是否有效（假设有一个名为checkValid的函数进行验证）。<br>如果entity没有ID，则执行POST请求以添加新记录。<br>发送POST请求到&#x2F;classifyInfo，携带entity数据。<br>根据响应结果，显示成功或错误消息，并关闭模态框，重新加载第一页的数据。<br>否则，执行PUT请求以更新现有记录。<br>发送PUT请求到&#x2F;classifyInfo，携带entity数据。<br>根据响应结果，显示成功或错误消息，并关闭模态框，重新加载第一页的数据。<br>del(id):<br>作用: 删除指定ID的分类信息。<br>参数: id - 要删除的记录的ID。<br>过程:<br>检查用户是否有相应的权限（权限索引为2）。如果没有权限，显示警告消息并返回。<br>弹出确认对话框（通过调用this.$confirm），询问用户是否确认删除。<br>如果用户确认删除，则发送DELETE请求到&#x2F;classifyInfo&#x2F;{id}。<br>根据响应结果，显示成功或错误消息，并重新加载第一页的数据。<br>downModel():<br>作用: 下载Excel模板。<br>过程:<br>改变当前页面的URL为&#x2F;classifyInfo&#x2F;getExcelModel，触发下载操作。<br>clickUpload(e):<br>作用: 检查上传权限，阻止默认行为。<br>参数: e - 事件对象。<br>过程:<br>检查用户是否有相应的权限（权限索引为1）。如果没有权限，显示警告消息并阻止默认行为（通过调用e.preventDefault()）。<br>upload():<br>作用: 批量上传文件。<br>过程:<br>获取文件输入元素中的所有文件。<br>对于每个文件，创建一个FormData对象并添加文件。<br>发送POST请求到&#x2F;classifyInfo&#x2F;upload，携带FormData对象。<br>根据响应结果，显示成功或错误消息，并重新加载第一页的数据。<br>logout():<br>作用: 登出当前用户。<br>过程:<br>调用全局的logout函数，通常用于清除会话信息并跳转到登录页面</p>
<h4 id="entity部分理解"><a href="#entity部分理解" class="headerlink" title="entity部分理解"></a>entity部分理解</h4><p>为什么要创建 entity 对象？<br>在Vue实例中，entity 对象用于存储当前正在编辑或添加的分类信息。以下是具体原因：</p>
<p>数据绑定:<br>Vue的核心特性之一是双向数据绑定。通过将表单字段绑定到 entity 对象的属性上，可以轻松地同步用户输入和应用程序状态。<br>简化操作:<br>当需要向服务器发送数据时，可以直接使用 entity 对象而不需要手动收集每个表单字段的值。这减少了代码的复杂性并降低了出错的可能性。<br>复用逻辑:<br>在添加新记录和更新现有记录时，可以使用相同的 entity 对象来存储数据。这样可以避免重复代码，提高代码的可维护性。<br>初始化状态:<br>通过初始化 entity 对象，可以确保每次打开模态框时都有一个干净的状态。这对于防止不同操作之间的数据混淆非常重要。<br>为什么性别默认设置为“男”？<br>将性别默认设置为“男”是为了提供一个合理的初始值，以便在用户尚未选择其他选项时有一个明确的状态。以下是具体原因：</p>
<p>用户体验:<br>提供一个默认值可以让用户更快地完成表单填写，特别是在用户通常会选择某个特定选项的情况下（例如大多数情况下可能是男性）。<br>减少错误:<br>如果没有默认值，用户可能会忘记选择性别，导致提交表单时出现验证错误。默认值可以帮助用户避免这种疏忽。<br>一致性:<br>默认值可以保持表单的一致性，确保所有新建记录都有一个有效的性别字段。</p>
<h3 id="ClassifyInfoController接口"><a href="#ClassifyInfoController接口" class="headerlink" title="ClassifyInfoController接口"></a>ClassifyInfoController接口</h3><h2 id="NxSystemFile文件管理相关模块"><a href="#NxSystemFile文件管理相关模块" class="headerlink" title="NxSystemFile文件管理相关模块"></a>NxSystemFile文件管理相关模块</h2><h3 id="对应数据库实体类"><a href="#对应数据库实体类" class="headerlink" title="对应数据库实体类"></a>对应数据库实体类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name = &quot;nx_system_file_info&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NxSystemFileInfo</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span>  <span class="comment">//标记这个字段为主键</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">	<span class="comment">//指定主键生成策略</span></span><br><span class="line">	<span class="comment">//strategy 属性: 使用 GenerationType.IDENTITY 策略，</span></span><br><span class="line">	<span class="comment">//表示主键值由数据库自动生成（通常是自动递增的 ID）。</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Column(name = &quot;originName&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String originName;</span><br><span class="line">	<span class="meta">@Column(name = &quot;fileName&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getOriginName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> originName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOriginName</span><span class="params">(String originName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.originName = originName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getFileName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFileName</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.fileName = fileName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="控制器NxSystemFileController"><a href="#控制器NxSystemFileController" class="headerlink" title="控制器NxSystemFileController"></a>控制器NxSystemFileController</h3><h4 id="接口之间联系"><a href="#接口之间联系" class="headerlink" title="接口之间联系"></a>接口之间联系</h4><p>用户通过 upload() 或 noticeUpload() 上传文件后，文件信息会被保存到数据库。<br>用户可以通过 filePage() 查看文件列表，点击某个文件后，可以通过 getById() 接口查看该文件的详细信息</p>
<h4 id="upload-文件上传接口"><a href="#upload-文件上传接口" class="headerlink" title="upload()文件上传接口"></a>upload()文件上传接口</h4><p>实现思路：</p>
<ol>
<li>定义文件的基础保存路径<br>BASE_PATH 是文件存储的基本路径，使用 System.getProperty(“user.dir”) 获取项目的根目录，并在其下创建一个 static&#x2F;file&#x2F; 目录来存储上传的文件<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BASE_PATH</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/resources/static/file/&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>注入服务实现类<br>使用 @Resource 注解注入 NxSystemFileInfoServiceimpl 实例，用于处理与文件相关的业务逻辑。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> NxSystemFileInfoServiceimpl nxSystemFileInfoService;</span><br></pre></td></tr></table></figure></li>
<li>创建文件上传的upload()接口<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">  <span class="comment">//file.getOriginalFilename() 获取用户上传文件的原始文件名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"><span class="comment">// 1. 先查询有没有相同名称的文件(这个没应用)</span></span><br><span class="line"><span class="comment">//    NxSystemFileInfo fileInfo = nxSystemFileInfoService.findByFileName(name);</span></span><br><span class="line"><span class="comment">//    if (fileInfo != null) &#123;</span></span><br><span class="line"><span class="comment">//        throw new CustomException(&quot;1001&quot;, &quot;文件名：\&quot;&quot; + name + &quot;\&quot;已存在&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">// 文件名加个时间戳，生成唯一文件名</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.mainName(originName) 获取文件主名。</span></span><br><span class="line">    <span class="comment">//使用 System.currentTimeMillis() 添加时间戳以确保文件名唯一性。</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.extName(originName) 获取文件扩展名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> FileUtil.mainName(originName) + System.currentTimeMillis() + <span class="string">&quot;.&quot;</span> + FileUtil.extName(originName);</span><br><span class="line">    <span class="comment">// 2. 文件上传</span></span><br><span class="line">    <span class="comment">//FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName) 将文件字节数组写入指定路径</span></span><br><span class="line">    FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 信息入库，获取文件id</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NxSystemFileInfo</span>();</span><br><span class="line">    info.setOriginName(originName);</span><br><span class="line">    info.setFileName(fileName);</span><br><span class="line">    <span class="comment">//调用 nxSystemFileInfoService.add(info) 将文件信息存入数据库</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">addInfo</span> <span class="operator">=</span> nxSystemFileInfoService.add(info);</span><br><span class="line">    <span class="comment">//根据返回结果决定返回成功或失败的消息</span></span><br><span class="line">    <span class="keyword">if</span> (addInfo != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(addInfo);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;4001&quot;</span>, <span class="string">&quot;上传失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="文件上传前端js代码"><a href="#文件上传前端js代码" class="headerlink" title="文件上传前端js代码"></a>文件上传前端js代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">upload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// 获取文件输入控件中的文件</span></span><br><span class="line">                <span class="keyword">let</span> files = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>;</span><br><span class="line">                <span class="comment">// 遍历文件数组</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">                    <span class="comment">// 将文件添加到FormData对象中</span></span><br><span class="line">                    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[i]);</span><br><span class="line">                    <span class="comment">// 发起POST请求上传文件</span></span><br><span class="line">                    axios.<span class="title function_">post</span>(<span class="string">&#x27;/files/upload&#x27;</span>, formData, &#123;</span><br><span class="line">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="comment">// 文件上传成功后的处理</span></span><br><span class="line">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>,<span class="string">&#x27;文件上传成功&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileId</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">id</span>;</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileName</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">originName</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h4 id="filePage-分页查询文件信息接口"><a href="#filePage-分页查询文件信息接口" class="headerlink" title="filePage() 分页查询文件信息接口"></a>filePage() 分页查询文件信息接口</h4><p>filePage() 接口用于分页查询文件信息，可以根据文件名关键字进行筛选。<br>该接口依赖于 nxSystemFileInfoService.findPage 方法，从数据库中获取文件信息列表</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件分页查询接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name 文件名关键字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum 当前页号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize 每页大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回文件信息分页结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/page/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;PageInfo&lt;NxSystemFileInfo&gt;&gt; <span class="title function_">filePage</span><span class="params">(<span class="meta">@PathVariable</span> String name,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;NxSystemFileInfo&gt; pageInfo = nxSystemFileInfoService.findPage(name, pageNum, pageSize);</span><br><span class="line">    <span class="keyword">return</span> Result.success(pageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="download-文件下载接口"><a href="#download-文件下载接口" class="headerlink" title="download() 文件下载接口"></a>download() 文件下载接口</h4><p>实现思路：</p>
<ol>
<li>接口通过id查找文件，@GetMapping(“&#x2F;download&#x2F;{id}”): 用于根据文件 ID 下载文件。</li>
<li>先验证文件id，然后根据id用服务层方法findById()查询数据库中的文件信息</li>
<li>通过FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</li>
<li>设置响应头，指示浏览器下载文件，最后将文件内容写入响应输出流并返回给客户端<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String id, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 检查文件ID是否为&quot;null&quot;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;null&quot;</span>.equals(id)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;您未上传文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//调用服务层方法 findById 根据文件 ID 查询文件信息</span></span><br><span class="line">    <span class="comment">// 根据文件ID查询数据库中的文件信息</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;未查询到该文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取文件内容</span></span><br><span class="line">    <span class="comment">//BASE_PATH 是文件存储的基本路径。</span></span><br><span class="line">    <span class="comment">//nxSystemFileInfo.getFileName() 获取文件的新文件名。</span></span><br><span class="line">    <span class="comment">//FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重置响应</span></span><br><span class="line">    <span class="comment">//清除响应中的所有缓存和设置</span></span><br><span class="line">    <span class="comment">//确保响应对象处于干净状态，避免之前的设置干扰当前操作</span></span><br><span class="line">    response.reset();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应头，指示浏览器如何处理文件</span></span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(nxSystemFileInfo.getOriginName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Length&quot;</span>, <span class="string">&quot;&quot;</span> + bytes.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取响应的输出流，用于将文件内容写入响应</span></span><br><span class="line">    <span class="comment">//使用 BufferedOutputStream 包装 response.getOutputStream()，提高写入效率</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">toClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(response.getOutputStream());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应内容类型</span></span><br><span class="line">    <span class="comment">// application/octet-stream 是通用的二进制流类型，适用于各种类型的文件。浏览器会根据这个类型决定如何处理文件（通常是下载）</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将文件内容写入响应输出流并关闭输出流</span></span><br><span class="line">    toClient.write(bytes);<span class="comment">//将文件内容写入输出流</span></span><br><span class="line">    toClient.flush();<span class="comment">//刷新输出流，确保所有数据都被写出</span></span><br><span class="line">    toClient.close();<span class="comment">//关闭输出流，释放资源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="getById-接口"><a href="#getById-接口" class="headerlink" title="getById() 接口"></a>getById() 接口</h4><ol>
<li>功能:调用服务层方法 findById 根据文件ID 查询单个文件的信息，并验证文件是否存在。</li>
<li>返回值:返回包含文件信息的成功结果或抛出自定义异常</li>
<li>异常处理:<br>如果文件 ID 无效或文件不存在，抛出自定义异常 CustomException。<br>可能抛出 NumberFormatException 异常，表示文件 ID 格式不正确。<br>可能抛出 IOException 异常，表示文件读写过程中发生错误。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">  <span class="comment">//将字符串形式的文件 ID 转换为长整型，并调用服务层方法 findById 查询文件信息</span></span><br><span class="line">  <span class="comment">//Long.parseLong(id) 将字符串形式的文件 ID 转换为长整型</span></span><br><span class="line">  <span class="comment">//nxSystemFileInfoService.findById(Long.parseLong(id)) 方法从数据库中查找指定 ID 的文件信息。</span></span><br><span class="line">  <span class="comment">//返回的 NxSystemFileInfo 对象包含文件的各种属性，如原始文件名、新文件名等</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="deleteFile删除文件接口"><a href="#deleteFile删除文件接口" class="headerlink" title="deleteFile删除文件接口"></a>deleteFile删除文件接口</h4><p>实现思路：</p>
<ol>
<li>先接收文件ID<br>@DeleteMapping(“&#x2F;{id}”) 表示处理 DELETE 请求。<br>@PathVariable String id：从 URL 中提取文件 ID。<br>调用 nxSystemFileInfoService.findById(Long.parseLong(id)) 方法根据 ID 查找文件信息。<br>如果找不到文件信息，则抛出异常</li>
<li>获取文件名，通过FileUtil.del(new File(BASE_PATH + name)) 删除文件</li>
<li>调用 nxSystemFileInfoService.delete(Long.parseLong(id)) 方法删除数据库中的记录</li>
<li>返回删除成功的消息。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="NxSystemFileController控制器相关重点理解"><a href="#NxSystemFileController控制器相关重点理解" class="headerlink" title="NxSystemFileController控制器相关重点理解"></a>NxSystemFileController控制器相关重点理解</h4><ol>
<li>如何实现文件上传功能？<br>A: 文件上传功能通过 @PostMapping(“&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名（添加时间戳）。然后将文件内容保存到指定路径，并将文件信息（如原始文件名和生成的文件名）存入数据库。最后返回上传结果。</li>
<li>为什么在文件上传时要生成唯一的文件名？<br>A: 生成唯一的文件名是为了避免文件名冲突。通过在文件名后添加时间戳，可以确保每个上传的文件都有唯一的标识符，防止不同用户上传同名文件时发生覆盖。</li>
<li>如何实现图片上传并缩小尺寸？<br>A: 图片上传并通过 Thumbnails 库缩小尺寸的功能通过 @PostMapping(“&#x2F;notice&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名。然后使用 Thumbnails 库将图片宽度缩小到 400 像素，并保存到指定路径。最后将文件信息存入数据库，并返回上传结果。</li>
<li>如何实现文件分页查询？<br>A: 文件分页查询功能通过 @GetMapping(“&#x2F;page&#x2F;{name}”) 接口实现。首先从请求参数中获取文件名关键字、当前页号和每页大小。然后调用 nxSystemFileInfoService.findPage 方法进行分页查询，并返回分页结果。</li>
<li>如何实现文件下载功能？<br>A: 文件下载功能通过 @GetMapping(“&#x2F;download&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则读取文件内容并将其写入响应输出流，同时设置响应头以便客户端下载文件。如果找不到文件信息，则抛出异常。</li>
<li>如何实现文件删除功能？<br>A: 文件删除功能通过 @DeleteMapping(“&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则先删除文件，再删除数据库中的记录。最后返回删除成功的消息。</li>
<li>如何确保文件操作的安全性和健壮性？<br>A: 为了确保文件操作的安全性和健壮性，代码中进行了以下措施：</li>
</ol>
<p>在文件上传时生成唯一的文件名，避免文件名冲突。<br>在文件下载和删除时检查文件是否存在，防止对不存在的文件进行操作。<br>使用 try-catch 块捕获可能出现的异常，并抛出自定义异常进行处理。<br>使用 FileUtil 工具类进行文件读写操作，简化文件操作并提高安全性。<br>8. upload() 接口和 noticeUpload() 接口的区别<br>用途不同:<br>upload() 用于通用文件上传。<br>noticeUpload() 特定用于上传通知公告的图片，并对其进行尺寸调整。<br>处理流程差异:<br>upload() 直接保存上传的文件。<br>noticeUpload() 在保存文件之前使用 Thumbnails 库缩小图片尺寸。<br>返回值不同:<br>upload() 返回的是文件信息对象。<br>noticeUpload() 返回的是包含文件 URL 和标题的映射对象。</p>
<h3 id="服务层NxSystemFileService"><a href="#服务层NxSystemFileService" class="headerlink" title="服务层NxSystemFileService"></a>服务层NxSystemFileService</h3><h4 id="NxSystemFileService-jaba代码"><a href="#NxSystemFileService-jaba代码" class="headerlink" title="NxSystemFileService.jaba代码"></a>NxSystemFileService.jaba代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoService</span> &#123;</span><br><span class="line"><span class="comment">//接口定义了一组抽象方法，这些方法需要由实现该接口的具体类来提供具体的实现。</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">add</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="impl类-NxSystemFileInfoServiceImpl-java"><a href="#impl类-NxSystemFileInfoServiceImpl-java" class="headerlink" title="impl类 NxSystemFileInfoServiceImpl.java"></a>impl类 NxSystemFileInfoServiceImpl.java</h4><p>NxSystemFileInfoServiceImpl类，用于实现 NxSystemFileInfoService 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.dao.NxSystemFileInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.NxSystemFileInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.service.NxSystemFileInfoService;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NxSystemFileInfoServiceimpl</span> <span class="keyword">implements</span> <span class="title class_">NxSystemFileInfoService</span> &#123;</span><br><span class="line"><span class="comment">//实现 NxSystemFileInfoService 接口</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;authority.info&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@Value 注解:@Value(&quot;$&#123;authority.info&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//从配置文件（如 application.properties 或 application.yml）中注入属性值。</span></span><br><span class="line">    <span class="comment">//private String authorityInfo;: 声明了一个字符串类型的字段 authorityInfo，用于存储从配置文件中读取的权限信息。</span></span><br><span class="line">    <span class="keyword">private</span> String authorityInfo;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> NxSystemFileInfoDao nxSystemFileInfoDao;</span><br><span class="line">    <span class="comment">//用于依赖注入，将 NxSystemFileInfoDao 实例注入到当前类中。</span></span><br><span class="line">    <span class="comment">//声明了一个 NxSystemFileInfoDao 类型的字段 nxSystemFileInfoDao，用于与数据库进行交互</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">add</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> &#123;</span><br><span class="line">        <span class="comment">//调用 DAO 接口的方法，将文件信息插入数据库。insertSelective 方法会在插入时忽略空字段。</span></span><br><span class="line">        <span class="comment">//return nxSystemFileInfo: 返回插入后的文件信息对象</span></span><br><span class="line">        nxSystemFileInfoDao.insertSelective(nxSystemFileInfo);</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        nxSystemFileInfoDao.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> &#123;</span><br><span class="line">        nxSystemFileInfoDao.updateByPrimaryKeySelective(nxSystemFileInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.findByFileName(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.findByName(<span class="string">&quot;all&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* String name: 文件名关键字。</span></span><br><span class="line"><span class="comment">Integer pageNum: 当前页码。</span></span><br><span class="line"><span class="comment">Integer pageSize: 每页显示的记录数。</span></span><br><span class="line"><span class="comment">实现细节:</span></span><br><span class="line"><span class="comment">PageHelper.startPage(pageNum, pageSize): 使用 PageHelper 设置分页参数。</span></span><br><span class="line"><span class="comment">nxSystemFileInfoDao.findByName(name): 调用 DAO 接口的方法，获取分页数据。</span></span><br><span class="line"><span class="comment">PageInfo.of(all): 将结果包装成 PageInfo 对象，方便前端展示分页信息*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">        List&lt;NxSystemFileInfo&gt; all = nxSystemFileInfoDao.findByName(name);</span><br><span class="line">        <span class="keyword">return</span> PageInfo.of(all);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="dao层-NxSystemFileInfoDao"><a href="#dao层-NxSystemFileInfoDao" class="headerlink" title="dao层 NxSystemFileInfoDao"></a>dao层 NxSystemFileInfoDao</h3><p>NxSystemFileInfoDao接口代码</p>
<ol>
<li><p>继承 Mapper<NxSystemFileInfo></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;NxSystemFileInfo&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>作用: 继承 tk.mybatis.mapper.common.Mapper 接口，提供了基本的 CRUD 操作方法（如 selectByPrimaryKey, insert, updateByPrimaryKey, deleteByPrimaryKey 等）<br>解释: tk.mybatis.mapper.common.Mapper 是 MyBatis 的一个通用 Mapper，简化了常见的数据库操作</p>
</blockquote>
</li>
<li><p>@Repository注解<br>》 将接口标识为 Spring 的仓库组件，Spring 会自动扫描并注册这个接口为 Bean。<br>解释: 使得 NxSystemFileInfoDao 可以被其他组件（如 Service 层）通过依赖注入（Dependency Injection, DI）来使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.NxSystemFileInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//将接口标识为 Spring 的仓库组件，Spring 会自动扫描并注册这个接口为 Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;NxSystemFileInfo&gt; &#123;</span><br><span class="line">    List&lt;NxSystemFileInfo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line">    NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="NxSystemFileInfoMapper-xml"><a href="#NxSystemFileInfoMapper-xml" class="headerlink" title="NxSystemFileInfoMapper.xml"></a>NxSystemFileInfoMapper.xml</h3><p><strong>实现思路</strong>：先在mapper根元素中通过namespace属性: 指定了这个映射文件对应的 DAO 接口全限定名。MyBatis 使用这个命名空间来找到对应的接口方法。<br>然后在MyBatis映射文件NxSystemFileInfoMapper.xml文件中定义了与数据库交互的 SQL 查询语句，对应于 NxSystemFileInfoDao 接口中的方法。先通过传入的name参数进行模糊查询。如果name为null、空字符串或’all’，则不进行名称过滤，并把查询结果按照文件信息的ID进行排序</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace 属性: 指定了这个映射文件对应的 DAO 接口全限定名。</span></span><br><span class="line"><span class="comment">MyBatis使用这个命名空间来找到对应的接口方法。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.dao.NxSystemFileInfoDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--.通过传入的name参数进行模糊查询</span></span><br><span class="line"><span class="comment">     如果name为null、空字符串或&#x27;all&#x27;，则不进行名称过滤</span></span><br><span class="line"><span class="comment">     查询结果按照文件信息的ID进行排序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.NxSystemFileInfo&quot;</span>&gt;</span></span><br><span class="line">        select `nx_system_file_info`.* from `nx_system_file_info`</span><br><span class="line">        where 1 = 1</span><br><span class="line">        <span class="comment">&lt;!-- where 1 = 1 用于避免动态条件拼接时的语法错误,用于简化动态条件拼接。</span></span><br><span class="line"><span class="comment">       &lt;if&gt; 元素: 动态 SQL 条件，只有在 name 参数不为空且不是 &#x27;all&#x27; 时才会添加到 SQL 语句中</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27; and name != &#x27;all&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and `nx_system_file_info`.`originName` like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        order by `nx_system_file_info`.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByFileName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.NxSystemFileInfo&quot;</span>&gt;</span></span><br><span class="line">        select `nx_system_file_info`.* from `nx_system_file_info`</span><br><span class="line">        where `nx_system_file_info`.`fileName` = #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Melon_Nie</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/11/01/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/">http://example.com/2024/11/01/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Melon_Nie的妙妙屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE/">项目</a><a class="post-meta__tags" href="/tags/%E5%85%A8%E6%A0%88/">全栈</a></div><div class="post-share"><div class="social-share" data-image="/./myimg/girl22.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/11/07/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" title="博客篇-我的hexo博客搭建"><img class="cover" src="/./myimg/lolcute1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">博客篇-我的hexo博客搭建</div></div><div class="info-2"><div class="info-item-1">hexo安装及部署到github过程</div></div></div></a><a class="pagination-related" href="/2024/10/23/12-pinia/" title="pinia学习篇"><img class="cover" src="/./myimg/rabbit.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">pinia学习篇</div></div><div class="info-2"><div class="info-item-1">vue进阶-pinia学习整理</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/10/01/10-vue2%E5%95%86%E5%9F%8E%E8%B4%AD%E7%89%A9%E9%A1%B9%E7%9B%AE/" title="vue2项目练习-购物商城项目"><img class="cover" src="/./myimg/jinli.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-01</div><div class="info-item-2">vue2项目练习-购物商城项目</div></div><div class="info-2"><div class="info-item-1">vue2项目练习-购物商城项目学习笔记（跟做黑马程序员vue2购物商城项目）</div></div></div></a><a class="pagination-related" href="/2024/11/12/13-vue3%E5%A4%A7%E4%BA%8B%E4%BB%B6%E9%A1%B9%E7%9B%AE/" title="vue3项目练习-大事件项目（完成3&#x2F;4）"><img class="cover" src="/./myimg/lolcute2.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-12</div><div class="info-item-2">vue3项目练习-大事件项目（完成3&#x2F;4）</div></div><div class="info-2"><div class="info-item-1">vue3项目练习-大事件项目学习笔记（跟做黑马程序员vue3大项目），未全部完成</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/./myimg/avatar1.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Melon_Nie</div><div class="author-info-description">欢迎访问，祝你拥有美好的一天~</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">40</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">39</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Nie7-Melon"><i class="fab fa-github"></i><span>我的github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Nie7-Melon" target="_blank" title="Github"><i class="fab fa-github" style="color: #fad701;"></i></a><a class="social-icon" href="https://gitee.com/melon-nie" target="_blank" title="Gitee"><i class="fa-solid fa-house" style="color: #fad701;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客，如果能对你有帮助就更好啦</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">写在前面</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number"></span> <span class="toc-text">重要文件解读</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">常见注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E9%80%BB%E8%BE%91%E5%85%B3%E7%B3%BB"><span class="toc-number">2.</span> <span class="toc-text">整体架构逻辑关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ajax-axios"><span class="toc-number">3.</span> <span class="toc-text">ajax axios</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82%EF%BC%8C%E6%8E%A7%E5%88%B6%E5%B1%82%EF%BC%8Cdao%E5%B1%82%E9%87%8D%E7%82%B9%E7%90%86%E8%A7%A3"><span class="toc-number">4.</span> <span class="toc-text">服务层，控制层，dao层重点理解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MyBatis%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">4.1.</span> <span class="toc-text">MyBatis映射文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="toc-number">4.2.</span> <span class="toc-text">控制层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82"><span class="toc-number">4.3.</span> <span class="toc-text">服务层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dao%E5%B1%82"><span class="toc-number">4.4.</span> <span class="toc-text">dao层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E8%80%85%E5%85%B3%E7%B3%BB"><span class="toc-number">4.5.</span> <span class="toc-text">三者关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E8%A7%A3%E8%AF%BB"><span class="toc-number">5.</span> <span class="toc-text">目录解读</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E7%9B%AE%E5%BD%95%E5%8F%8A%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">5.1.</span> <span class="toc-text">各目录及文件的作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yml%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number">6.</span> <span class="toc-text">yml文件解读</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis-%E5%92%8C-MyBatis-Plus"><span class="toc-number">7.</span> <span class="toc-text">MyBatis 和 MyBatis-Plus</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">普通查询和分页查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number"></span> <span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.</span> <span class="toc-text">数据库表解读</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E6%96%87%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6"><span class="toc-number"></span> <span class="toc-text">控制器文及其相关文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2%E8%8F%9C%E5%8D%95%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">管理页面菜单动态渲染模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">功能描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB-MenuController-java"><span class="toc-number">1.2.</span> <span class="toc-text">控制器类 MenuController.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">1.3.</span> <span class="toc-text">前端代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#classifyInfo-html"><span class="toc-number">2.</span> <span class="toc-text">classifyInfo.html</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Echarts%E5%9B%BE%E6%A0%87%E7%94%9F%E6%88%90%E6%A8%A1%E5%9D%97"><span class="toc-number">3.</span> <span class="toc-text">Echarts图标生成模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-number">3.1.</span> <span class="toc-text">前端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8EchartsController-java"><span class="toc-number">3.2.</span> <span class="toc-text">控制器EchartsController.java</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ClassifyInfo%E8%8F%9C%E8%B0%B1%E5%A4%A7%E7%B1%BB%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">ClassifyInfo菜谱大类分类模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%80%9D%E6%83%B3"><span class="toc-number">4.1.</span> <span class="toc-text">功能思想</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%AB%AFjs%E6%A8%A1%E5%9D%97"><span class="toc-number">4.2.</span> <span class="toc-text">前端js模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js%E4%BB%A3%E7%A0%81"><span class="toc-number">4.2.1.</span> <span class="toc-text">js代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BD%93%E7%B1%BB-entity"><span class="toc-number">4.3.</span> <span class="toc-text">实体类 entity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%B1%82-ClassifyInfoController-java"><span class="toc-number">4.4.</span> <span class="toc-text">控制层 ClassifyInfoController.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dao-ClassifyInfoDao-java"><span class="toc-number">4.5.</span> <span class="toc-text">dao ClassifyInfoDao.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vo-ClassifyInfoVo-java"><span class="toc-number">4.6.</span> <span class="toc-text">vo ClassifyInfoVo.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82-ClassifyInfoService-java"><span class="toc-number">4.7.</span> <span class="toc-text">服务层 ClassifyInfoService.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#impl-ClassifyInfoServiceimpl-java"><span class="toc-number">4.8.</span> <span class="toc-text">impl ClassifyInfoServiceimpl.java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ClassifyInfoMapper-xml"><span class="toc-number">4.9.</span> <span class="toc-text">ClassifyInfoMapper.xml</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95%E7%90%86%E8%A7%A3"><span class="toc-number">4.9.1.</span> <span class="toc-text">属性和方法理解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#entity%E9%83%A8%E5%88%86%E7%90%86%E8%A7%A3"><span class="toc-number">4.9.2.</span> <span class="toc-text">entity部分理解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ClassifyInfoController%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.10.</span> <span class="toc-text">ClassifyInfoController接口</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#NxSystemFile%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3%E6%A8%A1%E5%9D%97"><span class="toc-number">5.</span> <span class="toc-text">NxSystemFile文件管理相关模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">5.1.</span> <span class="toc-text">对应数据库实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%99%A8NxSystemFileController"><span class="toc-number">5.2.</span> <span class="toc-text">控制器NxSystemFileController</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E4%B9%8B%E9%97%B4%E8%81%94%E7%B3%BB"><span class="toc-number">5.2.1.</span> <span class="toc-text">接口之间联系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#upload-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.2.</span> <span class="toc-text">upload()文件上传接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%89%8D%E7%AB%AFjs%E4%BB%A3%E7%A0%81"><span class="toc-number">5.2.3.</span> <span class="toc-text">文件上传前端js代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filePage-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.4.</span> <span class="toc-text">filePage() 分页查询文件信息接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#download-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.5.</span> <span class="toc-text">download() 文件下载接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getById-%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.6.</span> <span class="toc-text">getById() 接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deleteFile%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E6%8E%A5%E5%8F%A3"><span class="toc-number">5.2.7.</span> <span class="toc-text">deleteFile删除文件接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NxSystemFileController%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9B%B8%E5%85%B3%E9%87%8D%E7%82%B9%E7%90%86%E8%A7%A3"><span class="toc-number">5.2.8.</span> <span class="toc-text">NxSystemFileController控制器相关重点理解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%B1%82NxSystemFileService"><span class="toc-number">5.3.</span> <span class="toc-text">服务层NxSystemFileService</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NxSystemFileService-jaba%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.1.</span> <span class="toc-text">NxSystemFileService.jaba代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#impl%E7%B1%BB-NxSystemFileInfoServiceImpl-java"><span class="toc-number">5.3.2.</span> <span class="toc-text">impl类 NxSystemFileInfoServiceImpl.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dao%E5%B1%82-NxSystemFileInfoDao"><span class="toc-number">5.4.</span> <span class="toc-text">dao层 NxSystemFileInfoDao</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NxSystemFileInfoMapper-xml"><span class="toc-number">5.5.</span> <span class="toc-text">NxSystemFileInfoMapper.xml</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/05/03/31-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93-axios%E5%BA%93/" title="网络请求库-axios库"><img src="/./myimg/rabbit.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="网络请求库-axios库"/></a><div class="content"><a class="title" href="/2025/05/03/31-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93-axios%E5%BA%93/" title="网络请求库-axios库">网络请求库-axios库</a><time datetime="2025-05-03T08:21:03.000Z" title="发表于 2025-05-03 16:21:03">2025-05-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/08/30-%E6%B5%8F%E8%A7%88%E5%99%A8API/" title="DOM操作和CSS高频API"><img src="/./myimg/girl12.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DOM操作和CSS高频API"/></a><div class="content"><a class="title" href="/2025/04/08/30-%E6%B5%8F%E8%A7%88%E5%99%A8API/" title="DOM操作和CSS高频API">DOM操作和CSS高频API</a><time datetime="2025-04-08T08:53:21.000Z" title="发表于 2025-04-08 16:53:21">2025-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/06/29-jsAPI/" title="JavaScript高频API"><img src="/./myimg/qingmei.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript高频API"/></a><div class="content"><a class="title" href="/2025/04/06/29-jsAPI/" title="JavaScript高频API">JavaScript高频API</a><time datetime="2025-04-06T08:08:34.000Z" title="发表于 2025-04-06 16:08:34">2025-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/01/11-vue3/" title="vue3学习篇（2025）"><img src="/./myimg/lolcute2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue3学习篇（2025）"/></a><div class="content"><a class="title" href="/2025/04/01/11-vue3/" title="vue3学习篇（2025）">vue3学习篇（2025）</a><time datetime="2025-04-01T04:56:02.000Z" title="发表于 2025-04-01 12:56:02">2025-04-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/25/28-browser/" title="浏览器学习"><img src="/./myimg/pinkflower.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浏览器学习"/></a><div class="content"><a class="title" href="/2025/03/25/28-browser/" title="浏览器学习">浏览器学习</a><time datetime="2025-03-25T08:08:34.000Z" title="发表于 2025-03-25 16:08:34">2025-03-25</time></div></div></div></div></div></div></main><footer id="footer" style="background: linear-gradient(135deg,#FFE985 10%,#FA742B 100%);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Melon_Nie</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-vercel-nine-ashen.vercel.app',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo-vercel-nine-ashen.vercel.app',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>