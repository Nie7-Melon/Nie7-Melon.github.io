<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Canvas：Web绘图的工具</title>
    <url>/2025/02/27/01-canvas/</url>
    <content><![CDATA[<h1 id="认识canvas"><a href="#认识canvas" class="headerlink" title="认识canvas"></a>认识canvas</h1><p><code>&lt;canvas&gt;</code>  中文名叫 “画布”，是一个可以使用脚本（通常是JavaScript）在网页上绘制图形的HTML元素<br>HTML5中的 <code>&lt;canvas&gt; </code>元素为Web开发者提供了一个通过JavaScript绘制图形的强大工具。无论是制作游戏、数据可视化还是创建动态图像，Canvas都是一个非常有用的技能。</p>
<h1 id="使用canvas"><a href="#使用canvas" class="headerlink" title="使用canvas"></a>使用canvas</h1><h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><p>使用canvas的步骤如下：<br>HTML 中创建 canvas 元素<br>通过 js 获取 canvas 标签<br>从 canvas 标签中获取到绘图工具<br>通过绘图工具，在 canvas 标签上绘制图形</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1、创建 canvas 元素 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;cav&quot;</span><span class="attr">width</span>=<span class="string">&quot;300&quot;</span><span class="attr">height</span>=<span class="string">&quot;200&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 2、获取 canvas 对象</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;cav&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 3、获取 canvas 上下文环境对象</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 4、绘制第一个图形</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">100</span>, <span class="number">100</span>) <span class="comment">// 起点坐标 (x, y)</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">100</span>) <span class="comment">// 终点坐标 (x, y)</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>() <span class="comment">// 将起点和终点连接起来</span></span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//5.绘制第二个图形（如果需要）</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">beginPath</span>() <span class="comment">// 重新开启一个新路径，防止两个图形属性污染</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">20</span>, <span class="number">120</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">120</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">lineWidth</span> = <span class="number">4</span> <span class="comment">//线的宽度</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">strokeStyle</span> = <span class="string">&#x27;yellow&#x27;</span> <span class="comment">//线的颜色</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>() <span class="comment">// 将起点和终点连接起来</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol>
<li>使用canvas标签时要加上“画布”的宽高属性，不然会默认宽度300px，，高度150px</li>
<li>宽高的值不加px单位，直接设置数字即可</li>
<li>不能通过css设置canvas宽高，会出现内容被拉伸的效果</li>
<li>线条的默认宽度是 1px ，默认颜色是黑色,但由于默认情况下 canvas 会将线条的中心点和像素的底部对齐，所以会导致显示效果是 2px 和非纯黑色问题</li>
<li>Canvas 使用的是 W3C 坐标系 ，也就是遵循我们屏幕、报纸的阅读习惯，从上往下，从左往右</li>
<li>如果话多个图如果不想相互污染，需要做2件事：<br>(1)使用 beginPath() 方法，重新开一个路径<br>(2)设置新线段的样式（必须项），如果只有第一个设置了样式，第二个画布的线段没有样式，那么会继承使用第一个线段的样式而不是默认的黑色之类样式</li>
</ol>
<h2 id="设置样式"><a href="#设置样式" class="headerlink" title="设置样式"></a>设置样式</h2><p>lineWidth：线的粗细<br>strokeStyle：线的颜色<br>lineCap：线帽：默认: butt; 圆形: round; 方形: square<br><img src="/postImgs/htmlImgs/canvas1.png" alt="图片"><br>lineJoin：拐角样式：miter: 默认值，尖角；round: 圆角；bevel: 斜角<br><img src="/postImgs/htmlImgs/canvas7.png" alt="图片"><br>setLineDash([])：将描边设置成虚线<br><img src="/postImgs/htmlImgs/canvas8.png" alt="图片"></p>
<h1 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h1><h2 id="折线"><a href="#折线" class="headerlink" title="折线"></a>折线</h2><p>和 直线 差不多，都是使用 moveTo() 、lineTo() 和 stroke() 方法可以绘制折线</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">moveTo</span>(<span class="number">50</span>, <span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">100</span>, <span class="number">50</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">200</span>, <span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">lineTo</span>(<span class="number">250</span>, <span class="number">50</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/htmlImgs/canvas2.png" alt="折线"></p>
<h2 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h2><p>可以使用线段来描绘矩形，但 canvas 也提供了 rect() 等方法可以直接生成矩形</p>
<h3 id="strokeRect-描边矩形"><a href="#strokeRect-描边矩形" class="headerlink" title="strokeRect() 描边矩形"></a>strokeRect() 描边矩形</h3><p>strokeStyle 必须写在 strokeRect() 前面，不然样式不生效<br>strokeStyle：设置描边的属性（颜色、渐变、图案）<br>strokeRect(x, y, width, height)：描边矩形（x和y是矩形左上角起点；width 和 height 是矩形的宽高）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// strokeStyle 属性</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// strokeRect(x, y, width, height) 方法</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">strokeStyle</span> = <span class="string">&#x27;pink&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">strokeRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/htmlImgs/canvas2.png" alt="描边矩形"></p>
<h3 id="fillRect-填充矩形"><a href="#fillRect-填充矩形" class="headerlink" title="fillRect() 填充矩形"></a>fillRect() 填充矩形</h3><p>fillStyle 必须写在 fillRect() 之前，不然样式不生效</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// fillStyle 属性</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// fillRect(x, y, width, height) 方法</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">fillStyle</span> = <span class="string">&#x27;pink&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>) <span class="comment">// fillRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/htmlImgs/canvas4.png" alt="描边矩形"></p>
<h3 id="矩形描边-填充"><a href="#矩形描边-填充" class="headerlink" title="矩形描边+填充"></a>矩形描边+填充</h3><p>同时使用 strokeRect() 和 fillRect()会产生描边和填充的效果</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">strokeRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>) <span class="comment">// strokeRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">fillStyle</span> = <span class="string">&#x27;yellow&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>) <span class="comment">// fillRect(x, y, width, height)</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/htmlImgs/canvas5.png" alt="描边矩形"></p>
<h3 id="rect-生成矩形"><a href="#rect-生成矩形" class="headerlink" title="rect() 生成矩形"></a>rect() 生成矩形</h3><p>rect() 和 fillRect() 、strokeRect() 的用法差不多，唯一的区别是：<br>strokeRect() 和 fillRect() 这两个方法调用后会立即绘制；rect() 方法被调用后，不会立刻绘制矩形，而是需要调用 stroke() 或 fill() 辅助渲染</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cxt.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">cxt.<span class="title function_">rect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>)</span><br><span class="line">cxt.<span class="title function_">stroke</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">cxt.<span class="property">strokeStyle</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">cxt.<span class="title function_">strokerect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// -----------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cxt.<span class="property">fillStyle</span> = <span class="string">&#x27;hotpink&#x27;</span></span><br><span class="line">cxt.<span class="title function_">rect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>)</span><br><span class="line">cxt.<span class="title function_">fill</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 等价于</span></span><br><span class="line">cxt.<span class="property">fillStyle</span> = <span class="string">&#x27;yellowgreen&#x27;</span></span><br><span class="line">cxt.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h3 id="clearRect-清空矩形"><a href="#clearRect-清空矩形" class="headerlink" title="clearRect() 清空矩形"></a>clearRect() 清空矩形</h3><p>clearRect() 方法可以清空指定区域。<br>clearRect(x, y, width, height)</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="property">fillStyle</span> = <span class="string">&#x27;pink&#x27;</span> <span class="comment">// 设置填充颜色</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">fillRect</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">200</span>, <span class="number">200</span>) <span class="comment">// 填充矩形</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">clearRect</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">180</span>, <span class="number">90</span>) <span class="comment">// 清空矩形</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="清空画布"><a href="#清空画布" class="headerlink" title="清空画布"></a>清空画布</h3><p>canvas 画布元素是矩形，所以可以通过下面的代码把整个画布清空掉<br>要清空的区域：从画布左上角开始，直到画布的宽和画布的高为止</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">cxt.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, cnv.<span class="property">width</span>, cnv.<span class="property">height</span>)</span><br></pre></td></tr></table></figure>
<h2 id="圆形"><a href="#圆形" class="headerlink" title="圆形"></a>圆形</h2><p>绘制圆形的方法是 arc()<br><strong>绘制圆形之前，必须先调用 beginPath() 方法,在绘制完成之后，还需要调用 closePath() 方法</strong><br>开始角度和结束角度，都是以弧度为单位。例如 180°就写成 Math.PI ，360°写成 Math.PI * 2 ，以此类推。<br><strong>在实际开发中，为了让自己或者别的开发者更容易看懂弧度的数值，1°应该写成 Math.PI &#x2F; 180</strong></p>
<ul>
<li>100°: 100 * Math.PI &#x2F; 180</li>
<li>110°: 110 * Math.PI &#x2F; 180</li>
<li>241°: 241 * Math.PI &#x2F; 180<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">arc</span>(x, y, r, sAngle, eAngle，counterclockwise)</span><br><span class="line"><span class="comment">//x 和 y: 圆心坐标</span></span><br><span class="line"><span class="comment">//r: 半径</span></span><br><span class="line"><span class="comment">//sAngle: 开始角度</span></span><br><span class="line"><span class="comment">//eAngle: 结束角度</span></span><br><span class="line"><span class="comment">//counterclockwise: 绘制方向（true: 逆时针; </span></span><br><span class="line"><span class="comment">//false: 顺时针），默认 false</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">beginPath</span>()</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">arc</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">80</span>, <span class="number">0</span>, <span class="number">360</span>)</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">closePath</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="半圆"><a href="#半圆" class="headerlink" title="半圆"></a>半圆</h2><p>如果使用 arc() 方法画圆时，没做到刚好绕完一周（360°）就直接闭合路径，就会出现半圆的状态</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">&quot;c&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border: 1px solid #ccc;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cnv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;c&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> cxt = cnv.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">beginPath</span>()</span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">arc</span>(<span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">180</span> * <span class="title class_">Math</span>.<span class="property">PI</span> / <span class="number">180</span>) <span class="comment">// 顺时针</span></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">closePath</span>()</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  cxt.<span class="title function_">stroke</span>()</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>cxt.arc 最后一个参数没传，默认是 false ，所以是顺时针绘制<br>如果希望半圆的弧面在上方，可以将 cxt.arc 最后一个参数设置成 true<br><img src="/postImgs/htmlImgs/canvas6.png" alt="描边矩形"></p>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>canvas</tag>
        <tag>绘图工具</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML-知识整理</title>
    <url>/2024/01/07/01-html/</url>
    <content><![CDATA[<h1 id="HTML头文件（head部分）"><a href="#HTML头文件（head部分）" class="headerlink" title="HTML头文件（head部分）"></a>HTML头文件（head部分）</h1><p>元数据就是描述数据的数据,title 元素是一项元数据，用于表示整个 HTML 文档的标题</p>
<h2 id="声明"><a href="#声明" class="headerlink" title="&lt;!DOCTYPE html&gt;声明"></a><code>&lt;!DOCTYPE html&gt;</code>声明</h2><p>是一个文档类型声明，告诉浏览器当前文档的HTML版本</p>
<blockquote>
<p>如果不写<!DOCTYPE html>声明，浏览器会进入“怪异模式”（Quirks Mode）。在怪异模式下，浏览器会尝试兼容旧版本HTML和CSS的渲染方式，这可能会导致页面布局和样式出现不一致的问题。例如：<br>盒子模型差异：在怪异模式下，IE浏览器的盒子模型与标准模式不同，可能会导致页面布局错乱。<br>CSS样式差异：一些CSS属性在怪异模式下可能无法正常工作</p>
</blockquote>
<h2 id="mate元素"><a href="#mate元素" class="headerlink" title="mate元素"></a>mate元素</h2><p>meta 元素可以被包含进页面的head元素</p>
<ol>
<li>指定文档的字符编码:<code>&lt; meta charset=&quot;utf-8&quot; /&gt;</code><br>utf-8 是一个通用的字符集，它包含了任何人类语言中的大部分的字符，意味着该 web 页面可以显示任意的语言</li>
<li>添加作者和描述<br>name 指定了 meta 元素的类型；说明该元素包含了什么类型的信息。<br>content 指定了实际的元数据内容<br><code>&lt;meta name=&quot;author&quot; content=&quot;Chris Mills&quot; /&gt;</code></li>
</ol>
<h2 id="在站点增加自定义图标"><a href="#在站点增加自定义图标" class="headerlink" title="在站点增加自定义图标"></a>在站点增加自定义图标</h2><p>在head中引用： <code>&lt;link rel=&quot;icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot; /&gt;</code></p>
<h2 id="应用-CSS-和-JavaScript"><a href="#应用-CSS-和-JavaScript" class="headerlink" title="应用 CSS 和 JavaScript"></a>应用 CSS 和 JavaScript</h2><ul>
<li><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;my-css-file.css&quot; /&gt;</code></li>
<li><code>&lt;script src=&quot;my-js-file.js&quot; defer&gt;&lt;/script&gt;</code><br>最好加上 defer 以告诉浏览器在解析完成 HTML 后再加载 JavaScript。这样可以确保在加载脚本之前浏览器已经解析了所有的 HTML 内容。这样你就不会因为 JavaScript 试图访问页面上不存在的 HTML 元素而产生错误。</li>
</ul>
<h2 id="为文档设定主语言"><a href="#为文档设定主语言" class="headerlink" title="为文档设定主语言"></a>为文档设定主语言</h2><p>通过添加 lang 属性到 HTML 开始的标签中来实现<br>如：html lang&#x3D;”zh-CN”</p>
<h1 id="HTML标签整理"><a href="#HTML标签整理" class="headerlink" title="HTML标签整理"></a>HTML标签整理</h1><h2 id="HTML-语义化标签布局架构-html5新特性"><a href="#HTML-语义化标签布局架构-html5新特性" class="headerlink" title="HTML 语义化标签布局架构(html5新特性)"></a>HTML 语义化标签布局架构(html5新特性)</h2><ol>
<li>布局标签<br>这些语义化标签主要针对搜索引擎的，在页面中可以使用多次<br>都是&lt;&gt;&lt;&#x2F;&gt;的双标签替代div</li>
</ol>
<ul>
<li>header 网页头部</li>
<li>nav 网页导航栏</li>
<li>footer 网页底部</li>
<li>aside 网页侧栏</li>
<li>section 网页区块，定义某个模块的区域</li>
<li>article 网页文章</li>
<li>main：主内容。主内容中还可以有各种子内容区段，可用article、section 和div等元素表示</li>
</ul>
<ol start="2">
<li>布局元素细节<br>main:存放每个页面独有的内容。每个页面上只能用一次main，且直接位于body中，不要把它嵌套进其他元素<br>article:包围的内容即一篇文章，与页面其他部分无关<br>section:与article类似，但section更适用于组织页面使其按功能（比如迷你地图、一组文章标题和摘要）分块。<br>一般的最佳用法是：以标题 作为开头；也可以把一篇article分成若干部分并分别置于不同的 section中，也可以把一个区段section分成若干部分并分别置于不同的article中，取决于上下文<br>aside包含一些间接信息（术语条目、作者简介、相关链接，等）<br>header是简介形式的内容。如果它是body的子元素，那么就是网站的全局页眉。如果它是 article或section的子元素，那么它是这些部分特有的页眉。<br>nav包含页面主导航功能，其不应包含二级链接等内容<br>footer包含了页面的页脚部分。</li>
</ol>
<h2 id="文本格式化标签"><a href="#文本格式化标签" class="headerlink" title="文本格式化标签"></a>文本格式化标签</h2><ol>
<li>粗体，斜体，删除线，下划线（均推荐用前者）<br>加粗<strong>strong</strong>和<b>b</b><br>倾斜<em>em</em>和 <i>i</i><br>删除线<del>del</del>和 <s>s</s><br>下划线<ins>ins</ins>和<u>u</u></li>
<li>div和span标签都是没有语义的盒子，用来装内容</li>
<li>p是段落标签，h1-h6是标题标签</li>
</ol>
<h2 id="图像标签"><a href="#图像标签" class="headerlink" title="图像标签"></a>图像标签</h2><p>img src&#x3D;”图像url”</p>
<ul>
<li><p>属性：<br>src 指定图像文件的路径和文件名，是必须属性<br>alt 替换文本，图像不能展示时出现的文本 alt&#x3D;”这是一个小狗图片”<br>title 提示文本，鼠标放在图片上面显示的文字 title&#x3D;”这是一个小狗图片”<br>宽和高：只写一个那么另一个自动缩放，可以写数字可以百分比,不带单位<br>width 设置图像的宽度 width&#x3D;”300”<br>height 设置图像的高度 height&#x3D;”100”<br>border 设置图像的边框粗细 boder&#x3D;”10”</p>
</li>
<li><p>注意：<br>图像标签可以拥有多个属性，必须写在标签名img的后面<br>属性之间部分先后顺序，标签名和属性，属性和属性之间都以空格分开<br>属性用键值对的格式 key&#x3D;”value” 属性名&#x3D;”属性值”</p>
</li>
</ul>
<blockquote>
<p>警告： 未经许可，绝不要将 src 属性指向其他网站上的图像。这被称为“热链接”。大多数人认为这是不道德的，因为这会导致每当有人访问你的页面，都会有另一些不知情的人为图像交付带宽费用。这也导致你无法掌控图像，图像有可能在你不知情的情况下，被删除或替换为其他内容。</p>
</blockquote>
<blockquote>
<p>备注： 像img和video这样的元素有时被称为替换元素，因为元素的内容和大小由外部资源（如图像或视频文件）定义，而不是由元素本身的内容定义</p>
</blockquote>
<h2 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h2><p>根目录：打开文件夹的第一层（最外面的一层）</p>
<ul>
<li>相对路径<br>以引用文件所在位置为参考基础，而建立出的目录路径<br>（如：图片相对于html页面的位置）<br>同一级路径  无 <code>&lt;img src=&quot;dog.jpg”&gt;</code><br>下一级路径  &#x2F; <code>&lt;img src=&quot;image/dog.jpg”&gt; </code>在同级的文件夹的里面<br>上一级路径 ..&#x2F; <code>&lt;img src=&quot;../dog.jpg”&gt; </code>在上一级的文件夹的里面</li>
<li>绝对路径<br>直接到达目标位置<br>如”D:\WEB-INF\image\dog.jpg”<br>或完整的网络地址”<a href="http://www.xx.com/images/dog.jpg">http://www.xx.com/images/dog.jpg</a>“</li>
</ul>
<h2 id="超链接标签"><a href="#超链接标签" class="headerlink" title="超链接标签"></a>超链接标签</h2><p>a href&#x3D;”要跳转的新目标地址” target&#x3D;”页面的打开方式”  &#x2F;a</p>
<ul>
<li>属性<br>href 必须属性，指定链接目标的url地址<br>target 指定新目标的打开方式 默认值_self在原页面打开 _blacnk在新窗口打开</li>
<li>注意<br>空链接：href&#x3D;”#”<br>下载链接：地址链接是文件.exe或者是.zip等压缩包形式<br>描点链接：点击链接可以快速定位到页面中的某个位置<br>描点链接用法： href&#x3D;”#名字” 跳转到id&#x3D;”名字” 的目标位置</li>
</ul>
<h3 id="块级链接"><a href="#块级链接" class="headerlink" title="块级链接"></a>块级链接</h3><p>  如果想让标题元素变为链接，就把它包裹在锚点元素a内</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://developer.mozilla.org/zh-CN/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>MDN Web 文档<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="图片链接"><a href="#图片链接" class="headerlink" title="图片链接"></a>图片链接</h3><p>如果有需要作为链接的图片，使用a元素来包裹要引用图片的img元素。下面的示例使用相对路径来引用本地存储的 SVG 图像文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://developer.mozilla.org/zh-CN/&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;local.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;MDN Web 文档&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="使用-title-属性添加支持信息"><a href="#使用-title-属性添加支持信息" class="headerlink" title="使用 title 属性添加支持信息"></a>使用 title 属性添加支持信息</h3><p>当鼠标指针悬停在链接上时，标题将作为提示信息出现</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  我创建了一个指向</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;https://developer.mozilla.org/zh-CN/&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">title</span>=<span class="string">&quot;MDN Web 官方文档&quot;</span>&gt;</span></span><br><span class="line">    MDN Web 官方文档主页&lt;/a</span><br><span class="line">  &gt;的超链接。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="链接到-HTML-文档的特定部分（文档片段）"><a href="#链接到-HTML-文档的特定部分（文档片段）" class="headerlink" title="链接到 HTML 文档的特定部分（文档片段）"></a>链接到 HTML 文档的特定部分（文档片段）</h3><p>超链接除了可以链接到文档外，也可以链接到 HTML 文档的特定部分（被称为文档片段）。<br>必须首先给要链接到的元素分配一个 id 属性。一般链接到的特定的标题是有意义的</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span> <span class="attr">id</span>=<span class="string">&quot;Mailing_address&quot;</span>&gt;</span>邮寄地址<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为了链接到那个特定的 id，要将它放在 URL 的末尾，并在前面包含井号（#）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  要提供意见和建议，请将信件邮寄至<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;contacts.html#Mailing_address&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span>我们的地址&lt;/a</span><br><span class="line">  &gt;。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以在同一份文档下，通过链接文档片段，来链接到当前文档的另一部分</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>本页面底部可以找到<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#Mailing_address&quot;</span>&gt;</span>公司邮寄地址<span class="tag">&lt;/<span class="name">a</span>&gt;</span>。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在下载链接时使用-download-属性"><a href="#在下载链接时使用-download-属性" class="headerlink" title="在下载链接时使用 download 属性"></a>在下载链接时使用 download 属性</h3><p>当链接到要下载的资源而不是在浏览器中打开时，可以使用 download 属性来提供一个默认的保存文件名。下面是一个 Firefox 的 Windows 最新版本下载链接的示例：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">  <span class="attr">href</span>=<span class="string">&quot;https://download.mozilla.org/?product=firefox-latest-ssl&amp;os=win64&amp;lang=zh-CN&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">download</span>=<span class="string">&quot;firefox-latest-64bit-installer.exe&quot;</span>&gt;</span></span><br><span class="line">  下载最新的 Firefox 中文版 - Windows（64 位）</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="注解标签和特殊字符"><a href="#注解标签和特殊字符" class="headerlink" title="注解标签和特殊字符"></a>注解标签和特殊字符</h2><figure class="highlight plaintext"><figcaption><span>-->``` 注释语句快捷键 ctrl+/</span></figcaption><table><tr><td class="code"><pre><span class="line">空格符号 &amp;nbsp; ```&amp;nbsp;```</span><br><span class="line">小于号 &amp;lt; ```&amp;lt;```</span><br><span class="line">大于号 &amp;gt;```&amp;gt;```</span><br><span class="line">&amp;和 &amp;amp; ```&amp;amp;```</span><br><span class="line">人民币 &amp;yen; ```&amp;yen;```</span><br><span class="line">版权 &amp;copy; ```&amp;copy;```</span><br><span class="line">注册商标 &amp;reg; ```&amp;reg;```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 表格和列表</span><br><span class="line">## 表格标签</span><br><span class="line">表格用来展示数据，剧本语法：table包tr行包td列</span><br><span class="line">&lt;table&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;姓名&lt;/td&gt;&lt;td&gt;喜好&lt;/td&gt;&lt;td&gt;地域&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;西西&lt;/td&gt;&lt;td&gt;听歌&lt;/td&gt;&lt;td&gt;河北&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;冬冬&lt;/td&gt;&lt;td&gt;小说&lt;/td&gt;&lt;td&gt;山东&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">``` html</span><br><span class="line">&lt;table&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;姓名&lt;/td&gt;&lt;td&gt;喜好&lt;/td&gt;&lt;td&gt;地域&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;西西&lt;/td&gt;&lt;td&gt;听歌&lt;/td&gt;&lt;td&gt;河北&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;&lt;td&gt;琪琪&lt;/td&gt;&lt;td&gt;小说&lt;/td&gt;&lt;td&gt;天津&lt;/td&gt;&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>注意<br>表头单元格标签th：让单元格里的文本内容加粗居中显示，常用在第一行代替td<br>表格结构标签：thead包裹表格头部区域 tbody包裹表格主体</p>
</li>
<li><p>合并单元格<br>跨行合并单元格：第一行和第二行的同一列合并 rowspan<br>跨列合并单元格：第一列和第二列的同一行合并 colspan<br>如<code>&lt;td&gt; colspan=&quot;2&quot;&gt;&lt;/td&gt;</code> 2表示合并的单元格数量</p>
<table>
<thead>
<tr><td>姓名</td><td>喜好</td><td>地域</td></tr>
</thead>
<tbody>
<tr><td>西西</td><td>听歌</td><td>河北</td></tr>
<tr><td>冬冬</td><td>小说</td><td>山东</td></tr>
</tbody>
</table>
</li>
<li><p>属性：<br>border 规定表格单元是否拥有边框，默认为””没有边框，1表示有<br>align 规定表格相对周围元素的对齐方式，值：center,left,right<br>cellpadding 规定单元边沿和内容之间的空白，默认1像素<br>cellspacing 规定单元格之间的空白，默认2像素<br>width height 规定表格的宽度和高度</p>
</li>
</ul>
<h2 id="列表标签"><a href="#列表标签" class="headerlink" title="列表标签"></a>列表标签</h2><p>列表用来布局，特点：整洁，有序</p>
<h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p>ul包多个li，li前面默认有黑色小圆点<br>注意：<br>ul里只能嵌套li，不可以直接在ul里面输入其他文字或标签<br>li之间相当于一个容器，可以容纳所有元素</p>
<h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p>ol包含多个li,每个li前面有数字排序</p>
<h3 id="自定义列表"><a href="#自定义列表" class="headerlink" title="自定义列表"></a>自定义列表</h3><p>常用于对属于或名词进行解释和描述，前面没有任何符号<br>dl包含dt和dd，其中dt和dd没有个数限制，通常一个dt对应多个dd<br>dl dt 名词1 &#x2F;dt dd 名词1解释&#x2F;dd dd 名词1解释&#x2F;dd</p>
<h1 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h1><h2 id="表单标签"><a href="#表单标签" class="headerlink" title="表单标签"></a>表单标签</h2><p>目的：和用户交互，收集用户信息<br>表单域form <code>&lt;form&gt; &lt;/form&gt;</code><br>属性：<br>action&#x3D;”url地址”<br>method&#x3D;”get&#x2F;post”<br>name&#x3D;”表单域名称”</p>
<h2 id="表单控件（表单元素）"><a href="#表单控件（表单元素）" class="headerlink" title="表单控件（表单元素）"></a>表单控件（表单元素）</h2><ul>
<li><p>input输入表单元素<br>input属性:<br>type: 默认为text<br>check: 规定此input元素首次加载时应当被选中 check&#x3D;”checked”<br>value: 规定这个input元素开始的值（text）或选中的值（radio）或按钮的文字(submit)<br>name: 通常和数据库列名一致 单选按钮和复选框如果是一组那么要有相同的name值<br>maxlength: 值为正整数，规定输入字段中的字符的最大长度</p>
</li>
<li><p>type属性值：<br> button 可点击的按钮 <code>&lt;input  type=&quot;button&quot;&gt;</code><br>checkbox 复选框<code>&lt;input  type=&quot;checkbox&quot;&gt;</code><br>file 上传文件按钮<code>&lt;input  type=&quot;file&quot;&gt;</code><br>hidden 定义隐藏的输入字段<input  type="hidden"><code> image 图像上传按钮</code><input  type="image"><code> password 密码输入框</code><input  type="password"><code> radio 单选按钮`&lt;input  type=&quot;radio&quot;&gt;` reset 重置按钮，清空表单中的所有数据</code><input  type="reset"><code> submit提交按钮</code><input  type="submit"><code> text 文本框</code> <input  type="text">&#96;&#96;</p>
<p>label标签:用于绑定一个表单元素，当点击label标签内的文本时，浏览器自动将焦点（光标）转到对对应表单元素上<br>label标签的for属性应当与相关元素的id属性相同<br>比如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;fruit&quot;</span>&gt;</span> 水果  <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">id</span>=<span class="string">&quot;fruit&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>textarea 文本域元素</p>
</li>
</ul>
<p> <code> &lt;textarea rows=&quot;2&quot; cols=&quot;20&quot;&gt;这里写文本内容&lt;/textarea&gt;</code></p>
<ul>
<li>select 下拉表单元素  selected表示默认选中项<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span>&gt;</span>选项1<span class="tag">&lt;/<span class="name">option</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">option</span> <span class="attr">selected</span> &gt;</span>选项2<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">option</span>&gt;</span>选项3<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="input和label结合使用"><a href="#input和label结合使用" class="headerlink" title="input和label结合使用"></a>input和label结合使用</h2><p><code>&lt;label&gt; </code>元素代表一个文本说明，该说明与页面上的某个表单控件相关联。<br>属性 for：for 属性应当匹配它所关联的表单控件的 id 属性值。这样做可以增强用户体验，因为点击标签文本时，相应的表单控件会获得焦点（对于复选框或单选按钮，则会切换其状态）<br><code>&lt;input&gt; </code>是一个非常灵活的元素，可以通过改变它的 type 属性来创建各种类型的输入字段，比如文本框、密码框、按钮等。<br>属性 type&#x3D;”email”：当设置为 email 类型时，它会生成一个专门用于输入电子邮件地址的文本框。浏览器通常会对输入的内容进行格式验证，确保符合电子邮件的标准格式（即包含一个 ‘@’ 符号和至少一个点）。<br>属性 name：用来标识提交给服务器的数据字段名称。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>邮箱：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user_email&quot;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="表单增强-html5新特性"><a href="#表单增强-html5新特性" class="headerlink" title="表单增强(html5新特性)"></a>表单增强(html5新特性)</h2><h3 id="新增输入类型："><a href="#新增输入类型：" class="headerlink" title="新增输入类型："></a>新增输入类型：</h3><ol>
<li><p>email<br>用于输入电子邮件地址,浏览器会自动验证输入内容是否符合电子邮件格式。<br>  <code>&lt;input type=&quot;email&quot; name=&quot;user_email&quot; required&gt;</code></p>
</li>
<li><p>url<br>用于输入URL地址，浏览器会自动验证输入内容是否符合 URL 格式<br><code>&lt;input type=&quot;url&quot; name=&quot;website&quot; required&gt;</code></p>
</li>
<li><p>number<br>用于输入数字，可以设置 min、max 和 step 属性来限制输入范围<br><code>&lt;input type=&quot;number&quot; name=&quot;age&quot; min=&quot;1&quot; max=&quot;100&quot; step=&quot;1&quot;&gt; </code></p>
</li>
<li><p>date<br>用于输入日期,浏览器会提供一个日期选择器。<br><code>&lt;input type=&quot;date&quot; name=&quot;birthday&quot;&gt;</code></p>
</li>
<li><p>time<br>用于输入时间,浏览器会提供一个时间选择器。<br><code> &lt;input type=&quot;time&quot; name=&quot;meeting_time&quot;&gt;</code></p>
</li>
<li><p>datetime-local<br>用于输入日期和时间（不带时区）<br><code> &lt;input type=&quot;datetime-local&quot; name=&quot;event_time&quot;&gt;</code></p>
</li>
<li><p>month<br>  用于输入年份和月份<br><code>&lt;input type=&quot;month&quot; name=&quot;expiry_month&quot;&gt;</code></p>
</li>
<li><p>week<br>用于输入周数以及年份<br><code> &lt;input type=&quot;week&quot; name=&quot;vacation_week&quot;&gt;</code></p>
</li>
<li><p>range：<br>用于输入一个范围内的数值,通常显示为滑动条。<br><code>&lt;input type=&quot;range&quot; name=&quot;volume&quot; min=&quot;0&quot; max=&quot;100&quot; step=&quot;1&quot;&gt;</code></p>
</li>
<li><p>color<br>用于选择颜色,浏览器会提供一个颜色选择器。<br>&#96;&#96;<input type="color" name="fav_color">&#96;</p>
</li>
<li><p>search：<br>用于输入搜索关键字。<br><code>&lt;input type=&quot;search&quot; name=&quot;query&quot;&gt;</code></p>
</li>
<li><p>tel<br>用于输入电话号码。<br><code>&lt;input type=&quot;tel&quot; name=&quot;phone_number&quot;&gt;</code></p>
</li>
<li><p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;form&gt;</span><br><span class="line">    &lt;label for=&quot;email&quot;&gt;电子邮件:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; required&gt;</span><br><span class="line">    &lt;label for=&quot;url&quot;&gt;个人主页:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;url&quot; id=&quot;url&quot; name=&quot;url&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;dob&quot;&gt;出生日期:&lt;/label&gt;</span><br><span class="line">    &lt;input type=&quot;date&quot; id=&quot;dob&quot; name=&quot;dob&quot; required&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="新的表单验证"><a href="#新的表单验证" class="headerlink" title="新的表单验证"></a>新的表单验证</h3><ol>
<li>required<br>表示该输入字段是必填项</li>
<li>pattern&#x3D;”正则表达式”<br>  使用正则表达式验证输入内容</li>
<li>min&#x3D;””和max&#x3D;””<br>限制输入的最小值和最大值（适用于 number、date、range 等类型</li>
<li>minlength&#x3D;”” 和 maxlength&#x3D;””<br>限制输入的最小长度和最大长度（适用于 text、password 等类型）</li>
<li>step&#x3D;””<br>指定输入值的步长（适用于 number、range 等类型）</li>
</ol>
<h3 id="新的表单元素"><a href="#新的表单元素" class="headerlink" title="新的表单元素"></a>新的表单元素</h3><ol>
<li><code>&lt;datalist&gt;</code>：<br>提供一个输入建议列表，用户可以从列表中选择。<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">list</span>=<span class="string">&quot;browsers&quot;</span> <span class="attr">name</span>=<span class="string">&quot;browser&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">&quot;browsers&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;Chrome&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;Firefox&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;Safari&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><code>&lt;output&gt;</code><br>用于显示计算结果或脚本输出<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">oninput</span>=<span class="string">&quot;result.value=parseInt(a.value)+parseInt(b.value)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;a&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span> +</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;b&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span> =</span><br><span class="line">  <span class="tag">&lt;<span class="name">output</span> <span class="attr">name</span>=<span class="string">&quot;result&quot;</span> <span class="attr">for</span>=<span class="string">&quot;a b&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">output</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="新的表单属性"><a href="#新的表单属性" class="headerlink" title="新的表单属性"></a>新的表单属性</h3><p>1.autocomplete<br>控制输入字段的自动填充功能。<br>设置为on时启用自动填充，设置为off时禁用自动填充<br><code>&lt;input type=&quot;text&quot; name=&quot;email&quot; autocomplete=&quot;on&quot;&gt;</code><br>2. placeholder：<br>提供输入字段的提示文本。<br><code>&lt;input type=&quot;text&quot; name=&quot;username&quot; placeholder=&quot;请输入用户名&quot;&gt;</code><br>3. autofocus：<br>页面加载时自动聚焦到该输入字段。<br><code>&lt;input type=&quot;text&quot; name=&quot;search&quot; autofocus&gt;</code><br>4. multiple：<br>允许用户输入多个值（适用于 email 和 file 类型）。<br><code>&lt;input type=&quot;file&quot; name=&quot;files&quot; multiple&gt;</code><br>5. form：<br>允许输入字段与表单关联，即使不在<code>&lt;form&gt;</code> 标签内。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">form</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="缩略语"><a href="#缩略语" class="headerlink" title="缩略语"></a>缩略语</h3><p>abbr用来包裹一个缩略语或缩写，并且提供缩写的解释。为用户代理提供了如何公布&#x2F;显示内容的提示，同时告知所有用户该缩写的含义</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  我们使用</span><br><span class="line">  <span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;超文本标记语言（Hyper text Markup Language）&quot;</span>&gt;</span>HTML<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span></span><br><span class="line">  来组织网页文档。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  第 33 届<span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;夏季奥林匹克运动会&quot;</span>&gt;</span>奥运会<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span>已于 2024 年 7月在法国巴黎举行。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="标记时间和日期"><a href="#标记时间和日期" class="headerlink" title="标记时间和日期"></a>标记时间和日期</h3><p>HTML 还支持将时间和日期标记为可供机器识别的格式的time元素<br>不同的格式不容易被电脑识别——假如你想自动抓取页面上所有事件的日期并将它们插入到日历中，<time> 元素允许你附上清晰的、可被机器识别的时间或日期来实现这种需求</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-01-20&quot;</span>&gt;</span>2016 年 1 月 20 日<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 标准简单日期 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-01-20&quot;</span>&gt;</span>20 January 2016<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 只包含年份和月份--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-01&quot;</span>&gt;</span>January 2016<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 只包含月份和日期 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;01-20&quot;</span>&gt;</span>20 January<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 只包含时间，小时和分钟数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;19:30&quot;</span>&gt;</span>19:30<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 还可包含秒和毫秒 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;19:30:01.856&quot;</span>&gt;</span>19:30:01.856<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 日期和时间 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-01-20T19:30&quot;</span>&gt;</span>7.30pm, 20 January 2016<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 含有时区偏移值的日期时间 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-01-20T19:30+01:00&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span>7.30pm, 20 January 2016 is 8.30pm in France&lt;/time</span><br><span class="line">&gt;</span><br><span class="line"><span class="comment">&lt;!-- 提及特定周 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">time</span> <span class="attr">datetime</span>=<span class="string">&quot;2016-W04&quot;</span>&gt;</span>The fourth week of 2016<span class="tag">&lt;/<span class="name">time</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="标记联系方式"><a href="#标记联系方式" class="headerlink" title="标记联系方式"></a>标记联系方式</h3><p>address</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span>内容1，内容2.内容3<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">可以包含更复杂的标记和其他形式的联系方式，如：</span><br><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    内容1<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    内容2<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    内容3<span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>电话：xxxxxxx<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>邮箱：xxxxxxx<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果链接的页面包含了联系信息，像下面这样也是可以的：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">  由 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../authors/chris-mills/&quot;</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 编写的页面。</span><br><span class="line"><span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>备注：<address> 元素只能用于提供最近的 <article> 或 <body> 元素所含文件的联系信息。在一个网站的页脚使用它来包括整个网站的联系信息，或者在一篇文章里面使用它来包括作者的联系信息，这都是正确的，但不能用来标记与该页面内容无关的地址列表</p>
</blockquote>
<h3 id="上标和下标"><a href="#上标和下标" class="headerlink" title="上标和下标"></a>上标和下标</h3><p><sup> 和 <sub> 元素可以实现上标和下标，如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  咖啡因的化学方程式是 C<span class="tag">&lt;<span class="name">sub</span>&gt;</span>8<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>H<span class="tag">&lt;<span class="name">sub</span>&gt;</span>10<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>N<span class="tag">&lt;<span class="name">sub</span>&gt;</span>4<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>O<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>。</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>如果x<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span>的值为9，那么x的值为3或-3<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>




<h1 id="async-和-defer"><a href="#async-和-defer" class="headerlink" title="async 和 defer"></a>async 和 defer</h1><p>在HTML中，<code>&lt;script&gt; </code>标签用于嵌入或引用JavaScript代码。默认情况下，浏览器会按照HTML文档中 <code>&lt;script&gt;</code> 标签出现的顺序执行脚本，并且在遇到一个外部脚本时会暂停HTML解析，直到该脚本下载并执行完毕。这对于页面性能可能不是最佳选择，特别是当脚本文件较大或者网络状况不佳时。为了解决这个问题，HTML5引入了两个属性：async 和 defer。<br>async 和 defer 是 <code>&lt;script&gt;</code> 标签的两个属性，用于控制 JavaScript 脚本的加载和执行时机</p>
<h2 id="async-属性"><a href="#async-属性" class="headerlink" title="async 属性"></a>async 属性</h2><p>async：表示脚本在下载时不会阻塞页面的解析和渲染。<strong>脚本下载完成后，会立即执行</strong><br><code> &lt;script src=&quot;analytics.js&quot; async&gt;&lt;/script&gt;</code></p>
<ul>
<li>特点：<br>脚本的加载是异步的，不会阻塞页面的其他资源加载。<br>脚本下载完成后立即执行，不等待页面解析完成。<br>执行顺序：async 脚本的执行顺序取决于它们的下载完成时间，而不是它们在 HTML 文档中的顺序。</li>
<li>适用场景：适用于那些不依赖于其他脚本和DOM完全加载就能运行的独立脚本。例如，统计分析、广告追踪等脚本</li>
</ul>
<h2 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h2><p>defer表示脚本在下载时不会阻塞页面的解析和渲染。脚<strong>本会在页面解析完成后、DOMContentLoaded 事件触发前执行</strong></p>
<ul>
<li>特点：<br>脚本的加载是异步的，不会阻塞页面的其他资源加载。<br>脚本会在页面解析完成后执行，确保脚本可以访问完整的 DOM。</li>
<li>执行顺序：defer 脚本的执行顺序与它们在 HTML 文档中的顺序一致，所有设置了 defer 的脚本会按它们在文档中出现的顺序依次执行，即使某个脚本先下载完成，也会等到所有设置 defer 的脚本都下载完后，再按序执行</li>
<li>适用场景：适用于需要访问或修改DOM的脚本，确保这些脚本在文档完全构建好之后执行，但又不想等待所有资源（如图片）加载完毕。</li>
</ul>
<h2 id="辨析"><a href="#辨析" class="headerlink" title="辨析"></a>辨析</h2><p>async 脚本是无序执行，即哪个脚本先下载完就先执行；而 defer 脚本是有序执行，根据其在文档中的顺序执行。<br>使用 async 或 defer 可以提高页面的加载速度，因为它们允许HTML解析器继续工作而不必等待脚本加载和执行。</p>
<ul>
<li>实际应用场景<br>对于一些不需要立即执行的脚本（比如统计脚本、社交媒体分享按钮等），可以使用 async 来加速页面加载。<br>如果脚本依赖于DOM结构（如初始化某些UI组件），则应使用 defer，以确保在执行脚本前HTML文档已经被完整解析。<br>在现代Web开发实践中，通常推荐将关键脚本直接放在HTML底部接近结束标签处，而非头部，来避免阻塞渲染。如果必须在头部引用脚本，则应考虑使用 async 或 defer。</li>
</ul>
<h1 id="HTML5新特性"><a href="#HTML5新特性" class="headerlink" title="HTML5新特性"></a>HTML5新特性</h1><h2 id="有语义的布局标签"><a href="#有语义的布局标签" class="headerlink" title="有语义的布局标签"></a>有语义的布局标签</h2><ol>
<li>布局标签<br>这些语义化标签主要针对搜索引擎的，在页面中可以使用多次<br>都是&lt;&gt;&lt;&#x2F;&gt;的双标签替代div</li>
</ol>
<ul>
<li>header 网页头部</li>
<li>nav 网页导航栏</li>
<li>footer 网页底部</li>
<li>aside 网页侧栏</li>
<li>section 网页区块，定义某个模块的区域</li>
<li>article 网页文章</li>
<li>main：主内容。主内容中还可以有各种子内容区段，可用article、section 和div等元素表示</li>
</ul>
<ol start="2">
<li>布局元素细节<br>main:存放每个页面独有的内容。每个页面上只能用一次main，且直接位于body中，不要把它嵌套进其他元素<br>article:包围的内容即一篇文章，与页面其他部分无关<br>section:与article类似，但section更适用于组织页面使其按功能（比如迷你地图、一组文章标题和摘要）分块。<br>一般的最佳用法是：以标题 作为开头；也可以把一篇article分成若干部分并分别置于不同的 section中，也可以把一个区段section分成若干部分并分别置于不同的article中，取决于上下文<br>aside包含一些间接信息（术语条目、作者简介、相关链接，等）<br>header是简介形式的内容。如果它是body的子元素，那么就是网站的全局页眉。如果它是 article或section的子元素，那么它是这些部分特有的页眉。<br>nav包含页面主导航功能，其不应包含二级链接等内容<br>footer包含了页面的页脚部分。</li>
</ol>
<h2 id="视频video"><a href="#视频video" class="headerlink" title="视频video"></a>视频video</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">controls</span> <span class="attr">width</span>=<span class="string">&quot;600&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video.mp4&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/mp4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video.webm&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/webm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;video.ogv&quot;</span> <span class="attr">type</span>=<span class="string">&quot;video/ogg&quot;</span>&gt;</span></span><br><span class="line">  您的浏览器不支持 video 标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>controls：显示视频控制条（播放、暂停、音量、全屏等）。<br>autoplay：视频加载后自动播放（部分浏览器可能限制自动播放）<br>loop：视频循环播放。<br>muted：视频静音。<br>poster：指定视频封面图片。<br>preload：指定视频的预加载方式（auto、metadata、none）。<br>width 和 height：设置视频的宽度和高度。<br>通过 JavaScript 检测浏览器是否支持<code>&lt;video&gt;</code> 标签或特定视频格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> video = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;video&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (video.<span class="title function_">canPlayType</span>(<span class="string">&#x27;video/mp4&#x27;</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;支持 MP4 格式&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (video.<span class="title function_">canPlayType</span>(<span class="string">&#x27;video/webm&#x27;</span>)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;支持 WebM 格式&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;不支持 HTML5 视频&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="音频audio"><a href="#音频audio" class="headerlink" title="音频audio"></a>音频audio</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;audio.mp3&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/mpeg&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">&quot;audio.ogg&quot;</span> <span class="attr">type</span>=<span class="string">&quot;audio/ogg&quot;</span>&gt;</span></span><br><span class="line">  您的浏览器不支持 audio 标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>属性：<br>controls：显示音频控制条（播放、暂停、音量等）。<br>autoplay：音频加载后自动播放。<br>loop：音频循环播放。<br>muted：音频静音。<br>preload：指定音频的预加载方式（auto、metadata、none）</p>
<h2 id="新增的表单imput类型（上文中的更全）"><a href="#新增的表单imput类型（上文中的更全）" class="headerlink" title="新增的表单imput类型（上文中的更全）"></a>新增的表单imput类型（上文中的更全）</h2><p>自动经行验证用户输入或生成对应的表单<br>type&#x3D;”email&#x2F;url&#x2F;date&#x2F;time&#x2F;month&#x2F;week&#x2F;number&#x2F;tel&#x2F;search&#x2F;color”</p>
<h2 id="新增的表单属性（上文中的更全）"><a href="#新增的表单属性（上文中的更全）" class="headerlink" title="新增的表单属性（上文中的更全）"></a>新增的表单属性（上文中的更全）</h2><p>required 必填，内容不能为空<br>placeholder 提示文本，存在默认值将不显示<br>autofocus 自动聚焦属性<br>autocomplete off&#x2F;on 用户输入时浏览器基于以前输入过的值，显示出在字段中填写的选项<br>multiple 可以多选文件提交</p>
<h2 id="web存储"><a href="#web存储" class="headerlink" title="web存储"></a>web存储</h2><p>HTML5提供了两种客户端存储机制：localStorage 和 sessionStorage。它们允许开发者将数据存储在浏览器中，从而减少对服务器的请求，提升用户体验</p>
<h3 id="localStorage-和-sessionStorage的区别"><a href="#localStorage-和-sessionStorage的区别" class="headerlink" title="localStorage 和 sessionStorage的区别"></a>localStorage 和 sessionStorage的区别</h3><p><img src="/./postImgs/htmlRe1.png" alt="localStorage 和 sessionStorage的区别"></p>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ol>
<li><p>localStorage 的使用场景：<br>存储用户偏好设置（如主题、语言、字体大小等）。<br>缓存静态资源或 API 数据，减少服务器请求。<br>保存用户登录状态（需注意安全性）。</p>
</li>
<li><p>sessionStorage 的使用场景：<br>存储当前会话的临时数据（如表单数据、页面状态）。<br>在多步骤表单中保存用户输入。<br>在单页应用（SPA）中保存页面切换时的临时状态。</p>
</li>
</ol>
<h3 id="存储数据的增删改查操作"><a href="#存储数据的增删改查操作" class="headerlink" title="存储数据的增删改查操作"></a>存储数据的增删改查操作</h3><p>localStorage 和 sessionStorage 的 API 是相同的，以下以 localStorage 为例。</p>
<ol>
<li>存储数据<br>使用 setItem(key, value) 方法存储数据。<br><code>localStorage.setItem(&#39;username&#39;, &#39;JohnDoe&#39;);</code></li>
<li>读取数据<br>使用 getItem(key) 方法读取数据。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> username = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(username); <span class="comment">// 输出: JohnDoe</span></span><br></pre></td></tr></table></figure></li>
<li>更新数据<br>直接使用 setItem(key, value) 方法覆盖原有数据。<br><code>localStorage.setItem(&#39;username&#39;, &#39;JaneDoe&#39;);</code></li>
<li>删除数据<br>使用 removeItem(key) 方法删除指定数据。<br><code>localStorage.removeItem(&#39;username&#39;);</code></li>
<li>清空所有数据<br>使用 clear() 方法清空所有存储的数据。<br><code>localStorage.clear();</code></li>
<li>获取所有键值对<br>使用 key(index) 方法获取指定索引的键名，结合 length 属性遍历所有数据。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">localStorage</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> key = <span class="variable language_">localStorage</span>.<span class="title function_">key</span>(i);</span><br><span class="line">  <span class="keyword">const</span> value = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><ol>
<li>存储大小限制：<br>localStorage 和 sessionStorage 的存储大小通常为 5MB 左右，超出限制会抛出错误。<br>如果需要存储大量数据，可以考虑使用 IndexedDB。</li>
<li>数据类型：<br>localStorage 和 sessionStorage 只能存储字符串。如果需要存储对象，可以使用 JSON.stringify() 和 JSON.parse()。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storedUser = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(storedUser.<span class="property">name</span>); <span class="comment">// 输出: John</span></span><br></pre></td></tr></table></figure></li>
<li>安全性：<br>不要存储敏感信息（如密码、令牌等），因为这些数据可以被 JavaScript 访问。<br>如果需要存储敏感信息，建议使用加密技术。</li>
<li>跨域问题：<br>localStorage 和 sessionStorage 的作用域受同源策略限制，不同域名下的页面无法共享数据。</li>
</ol>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>语义化标签</tag>
        <tag>async defer</tag>
        <tag>web存储</tag>
        <tag>表格 列表 表单</tag>
      </tags>
  </entry>
  <entry>
    <title>css基础</title>
    <url>/2024/02/05/02-css/</url>
    <content><![CDATA[<h1 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h1><h2 id="css基础选择器"><a href="#css基础选择器" class="headerlink" title="css基础选择器"></a>css基础选择器</h2><p><strong>1. 标签选择器</strong><br>标签名{<br>    属性1：属性值；<br>    属性2：属性值；<br>}<br><strong>2. 类选择器</strong><br>.类名{<br>    属性1：属性值；<br>    属性2：属性值；<br>}<br>配合class&#x3D;”类名”使用<br>多类名 class&#x3D;”类名1 类名2”中间用空格隔开<br><strong>3. id选择器</strong><br>#id名{<br>    属性1：属性值；<br>    属性2：属性值；<br>}<br>id是唯一的 不可以重复使用，一般用于页面唯一性的元素上<br><strong>4. 通配符选择器</strong><br>使用*定义，选取页面中所有元素<br>*{<br>   margin：0；<br>   padding：0；<br>}</p>
<h2 id="复合选择器-关系选择器"><a href="#复合选择器-关系选择器" class="headerlink" title="复合选择器(关系选择器)"></a>复合选择器(关系选择器)</h2><p><strong>1. 后代选择器</strong><br>用于选择某个父元素里面的子元素，用单个空格（” “）字符——组合两个选择器<br>父标签 他的子标签{ 属性名：属性值；}<br>如</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>西瓜真甜<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>今晚月亮真美<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">要选择ol里面的 li：</span><br><span class="line">ol li &#123; 属性名：属性值；&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. 子元素选择器</strong><br>选择某元素最近的一级子元素（亲儿子）<br>元素1&gt;元素2{ 属性1：属性值；}<br>选择元素1里面的所有直接后代元素2<br>如想选中为<ul>的直接子元素的带有“a”类的列表项</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-attr">[class=<span class="string">&quot;a&quot;</span>]</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. 并集选择器</strong><br>选择多组标签，同时为他们定义相同的样式<br>元素1，<br>元素2，<br>元素3 { 属性名：属性值；}<br><strong>4. 邻接兄弟选择器</strong><br>邻接兄弟选择器（+）用来选中恰好处于另一个在继承关系上同级的元素旁边的物件<br>例如，选中所有紧随<code>&lt;p&gt;</code>元素之后的<code>&lt;img&gt;</code>元素：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> + <span class="selector-tag">img</span></span><br></pre></td></tr></table></figure>

<p><strong>5.通用兄弟选择器</strong><br>通用兄弟关系选择器（~）<br>想选中一个元素的兄弟元素，即使它们不直接相邻，如要选中所有的<code>&lt;p&gt;</code>元素后任何地方的<code>&lt;img&gt;</code>元素</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> ~ <span class="selector-tag">img</span></span><br></pre></td></tr></table></figure>
<h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><p><strong>1. 存在与值选择器</strong><br>基于一个元素自身是否存在（例如href）或者基于各式不同的按属性值的匹配，来选取元素<br>使用li[class]，我们就能匹配任何有 class 属性的选择器。这匹配了除了第一项以外的所有项。<br>li[class&#x3D;”a”]匹配带有一个a类的选择器，不过不会选中一部分值为a而另一部分是另一个用空格隔开的值的类，它选中了第二项。<br>无值存在选择器 [attr]只要元素包含指定的属性，不论其值为何，都会被选中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* 选择所有具有 title 属性的元素 */</span><br><span class="line">[title] &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>包含词选择器<br>选择属性值是一个以空格分隔的词列表，并且其中包含指定值的元素，如果类名包含“a”，即使它还有其他类名，此规则也会应用<br>li[class~&#x3D;”a”]会匹配一个a类，不过也可以匹配一列用空格分开、包含a类的值，它选中了第二和第三项。<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">li[class] &#123;</span><br><span class="line">  font-size: 200%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li[class=&quot;a&quot;] &#123;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">li[class~=&quot;a&quot;] &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>3. 子字符串匹配选择器</strong><br>li[class^&#x3D;”a”]匹配了任何值<strong>开头为a的属性</strong>，于是匹配了前两项。<br>li[class$&#x3D;”a”]匹配了任何值<strong>结尾为a的属性</strong>，于是匹配了第一和第三项。<br>li[class*&#x3D;”a”]匹配了任何值的<strong>字符串中出现了a的属性</strong>，于是匹配了所有项。<br>[attribute~&#x3D;”value”]匹配了任何值的<strong>属性值中包含指定单词的元素（单词以空格分隔）</strong><br><strong>4. 大小写敏感</strong><br>HTML 中是大小写敏感的,想在大小写不敏感的情况下匹配属性值的话，可以在闭合括号之前使用i值,这个标记告诉浏览器，要以大小写不敏感的方式匹配 ASCII 字符</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//第一个选择器将会匹配一个开头为a的值</span><br><span class="line">li[class^=&quot;a&quot;] &#123;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br><span class="line">//这个 选择器将会匹配开头为a或A的值</span><br><span class="line">li[class^=&quot;a&quot; i] &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="伪类和伪元素选择器"><a href="#伪类和伪元素选择器" class="headerlink" title="伪类和伪元素选择器"></a>伪类和伪元素选择器</h2><p>伪类和伪元素像是你向你的文档的某个部分应用了一个类一样，帮你在你的标记文本中减少多余的类，让你的代码更灵活、更易于维护</p>
<h3 id="伪类"><a href="#伪类" class="headerlink" title="伪类"></a>伪类</h3><p>伪类选择器用于选择处于特定状态的元素,以冒号（:）开头，后面跟一个关键字，表示某种状态或条件。</p>
<p>一些伪类：<br>a:link{} 选择没有被访问的链接<br>a:visited{} 选择已经被访问的链接<br>a:hover{} 选择鼠标指针放到上面的链接<br>a:active{} 选择活动链接（鼠标按下未弹起的链接）<br>input:focus{}选取获得焦点的表单元素<br>:first-child 和 :last-child：选择父元素的第一个或最后一个子元素<br>:nth-child() 和 :nth-of-type()：选择父元素的第n个子元素,实现隔行变色表格或轮播图中的图片切换<br>:not()：选择不符合特定条件的元素。<br>checked 和 :indeterminate：选择被选中或未确定状态的表单元素。<br>:before 和 :after：虽然它们看起来像伪元素选择器，但它们也可以作为伪类选择器使用，用于在元素内容前后插入内容</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;Before: &quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot; After&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><code>::first-line</code>是会选择一个元素（下面的情况中是<code>&lt;p&gt;</code>）中的第一行</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">p::first-line &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用户行为伪类<br>:hover——上面提到过，只会在用户将指针挪到元素上的时候才会激活，一般就是链接元素。<br>:focus——只会在用户使用键盘控制，选定元素的时候激活。<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>悬停在我上方<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: hotpink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h3><p><strong>伪元素表现得是像你往标记文本中加入全新的 HTML 元素一样，而不是向现有的元素上应用类</strong><br><strong>伪元素开头为双冒号 ::比如，::before 就是一个伪元素的示例</strong></p>
<blockquote>
<p>例如，如果你想选中一段的第一行，你可以把它用一个<span>元素包起来，然后使用元素选择器；不过，如果包起来的单词&#x2F;字符数目长于或者短于父元素的宽度，这样做会失败。由于我们一般不会知道一行能放下多少单词&#x2F;字符——因为屏幕宽度或者字体大小改变的时候这也会变——通过改变 HTML 的方式来可预测地这么做是不可能的。<br>::first-line伪元素选择器会值得信赖地做到这件事——即使单词&#x2F;字符的数目改变，它也只会选中第一行。</p>
</blockquote>
<h4 id="常见伪元素"><a href="#常见伪元素" class="headerlink" title="常见伪元素"></a>常见伪元素</h4><ol>
<li><code>::before和::after</code><br><strong>::before 和 ::after 伪元素与 content 属性的共同使用</strong><br>在 CSS 中叫做生成内容,用这些插入一个文本字符串,需要结合 content 属性一起使用<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>我是原本有的内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;这应该显示在box内容之前。&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot; ➥&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>::first-letter</code><br>选择块级元素的第一字母并对其应用样式<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">选择块级元素的第一字母并对其应用样式</span><br></pre></td></tr></table></figure></li>
<li><code>::first-line</code><br>选择块级元素的第一行文本并对其应用样式</li>
<li><code>::selection</code><br>改变用户选中文本时的背景色和文字颜色。</li>
<li></li>
</ol>
<h3 id="伪类和伪元素组合起来"><a href="#伪类和伪元素组合起来" class="headerlink" title="伪类和伪元素组合起来"></a>伪类和伪元素组合起来</h3><p>如果想让第一段的第一行加粗，你需要把:first-child和::first-line选择器放到一起</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">article</span> <span class="selector-tag">p</span><span class="selector-pseudo">:first-child</span><span class="selector-pseudo">::first-line</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">120%</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="css的引入和css三大特性"><a href="#css的引入和css三大特性" class="headerlink" title="css的引入和css三大特性"></a>css的引入和css三大特性</h1><h2 id="css引入"><a href="#css引入" class="headerlink" title="css引入"></a>css引入</h2><p><code>&lt;style&gt;在这里面写css代码&lt;/style&gt;</code><br>导入.css文件<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;styles.css&quot; /&gt;</code></p>
<h2 id="css三大特性（层叠、优先级与继承）"><a href="#css三大特性（层叠、优先级与继承）" class="headerlink" title="css三大特性（层叠、优先级与继承）"></a>css三大特性（层叠、优先级与继承）</h2><p>层叠性：相同选择器设置相同的样式冲突时，哪个离html近（写在后面）用哪个<br>继承性：子标签会继承父标签的某些样式，如文本颜色和字号行高<br>优先级：当同一个元素指定多个选择器，会有优先级产生<br>!important&gt;行内样式&gt;id&gt;类&gt;元素选择器&gt;继承和*</p>
<h3 id="层叠"><a href="#层叠" class="headerlink" title="层叠"></a>层叠</h3><p>简单的说，就是 CSS 规则的顺序很重要；当应用两条同级别的规则到一个元素的时候，写在后面的就是实际使用的规则</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line">比如这两个，最后会用Blue</span><br></pre></td></tr></table></figure>


<h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><ol>
<li>理解:<br>有些规则在最后出现，但是却应用了前面的具有冲突的规则。这是因为前面的有更高的优先级——它范围更小，因此浏览器就把它选择为元素的样式</li>
<li>优先级规则：</li>
</ol>
<ul>
<li>!important<br>覆盖所有上面所有优先级计算，强烈建议除了非常情况不要使用它<br>覆盖 !important 唯一的办法就是另一个 !important 具有相同优先级而且顺序靠后，或者更高优先级。</li>
<li>内联样式<br>内联样式，即 style 属性内的样式声明，优先于所有普通的样式，无论其优先级如何。这样的声明没有选择器，但它们的优先级可以理解为 1-0-0-0；即无论选择器中有多少个 ID，它总是比其他任何优先级的权重都要高</li>
<li>一个选择器的优先级可以说是由三个不同的值（分量）相加，可以认为是百（ID）十（类）个（元素）——三位数的三个位数：<br>最终数字大的优先<br>ID：选择器中包含 ID 选择器则百位得一分 1-0-0<br>类：选择器中包含类选择器、属性选择器或者伪类则十位得一分 0-1-0<br>元素：选择器中包含元素、伪元素选择器则个位得一分 0-0-1</li>
</ul>
<blockquote>
<p> 通用选择器（*）、组合符（+、&gt;、~、’ ‘）和调整优先级的选择器（:where()）不会影响优先级<br> 否定（:not()）和任意匹配（:is()）伪类本身对优先级没有影响，但它们的参数则会带来影响。参数中，对优先级算法有贡献的参数的优先级的最大值将作为该伪类选择器的优先级。</p>
</blockquote>
<blockquote>
<p>浏览器是根据优先级来决定当多个规则有不同选择器对应相同的元素的时候需要使用哪个规则。它基本上是一个衡量选择器具体选择哪些区域的尺度：<br>一个元素选择器不是很具体，则会选择页面上该类型的所有元素，所以它的优先级就会低一些。<br>一个类选择器稍微具体点，则会选择该页面中有特定 class 属性值的元素，所以它的优先级就要高一点</p>
</blockquote>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p><strong>一些设置在父元素上的 CSS 属性是可以被子元素继承的</strong>，有些则不能<br>例如：如果你设置一个元素的 color 和 font-family，每个在里面的元素也都会有相同的属性，除非你直接在元素上设置属性<br><strong>一些属性是不能继承的</strong>——举个例子如果你在一个元素上设置 width 为 50% ，所有的后代不会是父元素的宽度的 50%。同理还有margin、padding 和 border</p>
<h4 id="控制继承"><a href="#控制继承" class="headerlink" title="控制继承"></a>控制继承</h4><p>CSS 为控制继承提供了五个特殊的通用属性值。每个 CSS 属性都接收这些值，<br><strong>1. inherit</strong><br>设置该属性会使子元素属性和父元素相同，“开启继承”，即使该属性通常不是继承的<br>它对于想要确保样式一致性或特定情况下需要显式地继承父级样式时非常有用</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">如，你希望一个按钮的颜色与父容器的颜色一致：</span><br><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: inherit; <span class="comment">/* 按钮颜色继承自父容器 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2. initial</strong><br>将应用于选定元素的属性值设置为该属性的初始值<br>当想完全重置某个属性到默认状态时的一个强有力工具</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">如，将某个元素的 <span class="attribute">margin</span> 重置为默认值</span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: initial; <span class="comment">/* margin 重置为默认值 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>revert<br>将应用于选定元素的属性值重置为浏览器的默认样式，而不是应用于该属性的默认值。在许多情况下，此值的作用类似于 unset<br><strong>4. unset</strong><br>将属性重置为自然值<br>如果一个属性是可继承的，那么它将被设置为 inherit；如果是不可继承的，则会被设置为 initial。这对于快速清除或复位属性来说非常方便。<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">如，希望某个元素的 <span class="attribute">font-size</span> 继承自父元素，而 <span class="attribute">margin</span> 使用默认值</span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: unset; <span class="comment">/* 继承父元素的 font-size */</span></span><br><span class="line">  <span class="attribute">margin</span>: unset; <span class="comment">/* 使用 margin 的默认值 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
5.revert-layer<br>将应用于选定元素的属性值重置为在上一个层叠层中建立的值。<br><strong>6. 重设所有属性值all</strong><br>CSS 的简写属性 all 可以用于同时将这些继承值中的一个应用于（几乎）所有属性。它的值可以是上述（inherit、initial、unset 或 revert）任意一个<br>这是一种撤销对样式所做更改的简便方法，以便回到之前已知的起点<br>如：下面的示例中有两个块级引用元素。第一个用元素本身的样式，第二个设置 all 为 unset<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>当前块引用设置了样式<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">class</span>=<span class="string">&quot;fix-this&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>当前块引用未设置样式<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">blockquote</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.fix-this</span> &#123;</span><br><span class="line">  <span class="attribute">all</span>: unset;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h1 id="css背景，字体文本属性"><a href="#css背景，字体文本属性" class="headerlink" title="css背景，字体文本属性"></a>css背景，字体文本属性</h1><h2 id="css字体属性"><a href="#css字体属性" class="headerlink" title="css字体属性"></a>css字体属性</h2><ul>
<li>字体系列 font-family 值：字体类型<br>font-family:Arial,”Microsoft Tahei”,”微软雅黑”;<br>如果英文单词之间有空格，要加引号；汉字要加引号；之间分割要逗号</li>
<li>字体大小 font-size 值：16px</li>
<li>字体粗细 font-weight 值：normal boid bolder lighter 100~900**<br>normal&#x3D;400 默认值 bold&#x3D;700 加粗 数字后面不跟单位</li>
<li>字体样式 font-style 值：normal默认值 italic斜体（很少给文字加斜体）</li>
<li>字体符合属性写法font: font-style font-weight font-size font-style family</li>
</ul>
<h2 id="css文本属性"><a href="#css文本属性" class="headerlink" title="css文本属性"></a>css文本属性</h2><ul>
<li>文本颜色 color 值：颜色单词或16进制或RGB rgb(0,0,0)</li>
<li>文本对齐 text-align 值：left左对齐（默认）；righr右对齐；center居中</li>
<li>文本装饰 text-decoration<br>值：none默认没有；underline下划线；overline上划线；line-throuth删除线</li>
<li>文本缩进 text-indent 值：20px；2em；文本的第一行首行缩进多少距离</li>
<li>行间距 line-height 行间距&#x3D;文本高度+上间距+下间距</li>
<li>单行文字垂直居中：让文字的行高等于合资的高度<br>行高小于盒子高度文字偏上，反之文字偏下</li>
</ul>
<h2 id="css背景"><a href="#css背景" class="headerlink" title="css背景"></a>css背景</h2><ul>
<li>背景颜色 background-color 值transprent透明；color指定颜色</li>
<li>背景颜色半透明rgba(0,0,0,0.3) 最后a的值靠近0变淡，靠近1变不透</li>
<li>背景图片 background-image 值none没有图；url地址<br>通常放在一个盒子里面，放logo图片或者大的背景图</li>
<li>背景平铺 background-repeat 值repeat平铺；no-repeat不平铺；repeat-x平铺x轴；repeat-y平铺y轴</li>
<li>背景图位置 background-position:x y<br>值length写百分数或长度值；<br>值position写top.center,botton,left,right方位名词<br>如果方位词或数值只写了一个，那么第二个默认居中对齐；方位词和数值可以混用</li>
<li>背景图像固定 background-attachment 值scroll背景随内容滚动；fixed背景固定</li>
<li>背景符合写法：没有特定，一般习惯</li>
<li>background：背景颜色 背景图地址 背景平铺 背景是否固定 背景图位置</li>
</ul>
<h1 id="css元素显示模式"><a href="#css元素显示模式" class="headerlink" title="css元素显示模式"></a>css元素显示模式</h1><h2 id="块元素"><a href="#块元素" class="headerlink" title="块元素"></a>块元素</h2><p>常见：h1~h6,p,div,ul,ol,li<br>特点：独占一行；宽高边距都能控制，是一个容器（盒子），里面可以放行内或块级元素<br>应用：块元素水平居中：设置宽度同时盒子左右外边距设为auto</p>
<h2 id="行内元素"><a href="#行内元素" class="headerlink" title="行内元素"></a>行内元素</h2><p>默认使用 inline 作为外部显示类型<br>常见：a,strong,b,em,i,del,s,ins,u,span<br><strong>特点：</strong><br>一行可以有多个行内元素；<br>width 和 height 属性将不起作用宽高无法修改由自身撑开，只能容纳文本或其他行内元素；<br>盒子不会产生换行；<br>垂直方向的内边距、外边距以及边框会被应用但是不会把其他处于 inline 状态的盒子推开；<br>水平方向的内边距、外边距以及边框会被应用且会把其他处于 inline 状态的盒子推开；<br>应用：行内元素水平居中：给父元素添加text-align:center</p>
<h2 id="行内块元素"><a href="#行内块元素" class="headerlink" title="行内块元素"></a>行内块元素</h2><p>img,input,td<br>特点：一行可以显示多个，之间有空白缝隙；宽度无法修改由自身撑开，高度和边距可以修改<br>应用：行内块元素水平居中：给父元素添加text-align:center</p>
<h2 id="元素显示模式转换"><a href="#元素显示模式转换" class="headerlink" title="元素显示模式转换"></a>元素显示模式转换</h2><p>把元素转换为块级元素 display:block<br>把元素转化为行内元素 display:inline<br>把元素转换为行内块元素 display:inline-block</p>
<h1 id="css盒子模型"><a href="#css盒子模型" class="headerlink" title="css盒子模型"></a>css盒子模型</h1><p>一个盒子从外到内：外边距，边框，内边距，内容</p>
<h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><p>在盒子上设置了 inline-size 和 block-size（或 width 和 height）属性值，这些值就定义了内容盒子的 inline-size 和 block-size</p>
<h2 id="CSS替代盒模型"><a href="#CSS替代盒模型" class="headerlink" title="CSS替代盒模型"></a>CSS替代盒模型</h2><p><strong>在css中添加 box-sizing: border-box;</strong></p>
<ol>
<li><p>理解代替盒模型<br>代替盒模型指在标准的W3C CSS盒模型之外，使用box-sizing属性来改变元素尺寸计算的方式。<br>标准的CSS盒模型中，一个元素的总宽度和高度由内容区、内边距（padding）、边框（border）以及外边距（margin）共同构成。而通过box-sizing属性，可以改变这一默认行为，使得width和height属性包括了内容区域、内边距和边框的总和</p>
</li>
<li><p>开发中的应用<br>实际开发中，为了统一布局风格并简化尺寸计算，开发者通常会将所有元素的盒模型统一设置为 border-box。这样可以避免因盒模型差异导致的布局问题</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">//官方文档提供的代码</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line">*, *<span class="selector-pseudo">::before</span>, *<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*, *<span class="selector-pseudo">::before</span>, *<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这样做的好处：<br>简化布局计算：在 border-box 模式下，你不再需要担心内边距和边框会增加元素的总宽度或高度。例如，你可以直接设置一个宽度为 100% 的容器，而不用担心它因为内边距或边框超出父容器的宽度。<br>提高一致性：通过全局设置，所有元素的盒模型行为一致，减少了因盒模型差异导致的布局问题。<br>减少调试时间：统一的盒模型可以减少因尺寸计算错误导致的调试时间，特别是在复杂的布局或响应式设计中。</p>
</blockquote>
</li>
<li><p><strong>box-sizing有三个值：</strong><br>content-box: 这是默认的盒模型，指定了元素的宽度和高度只适用于元素的内容区域。任何内边距和边框都将在内容区域之外添加。<br>border-box: 使用这个值时，元素的宽度和高度包括了内容、内边距和边框。这意味着如果你给定一个宽度为200px的元素，并且设置了内边距或边框，那么这些内边距和边框将从这200px中扣除，而不是额外增加到元素的总尺寸上。<br>inherit: 该值表示子元素将继承父元素的box-sizing属性。</p>
</li>
</ol>
<h2 id="行内盒子display-inline-block"><a href="#行内盒子display-inline-block" class="headerlink" title="行内盒子display: inline-block"></a>行内盒子display: inline-block</h2><p>如果不希望项目换行，但又希望它使用 width 和 height 值并避免出现上述重叠现象，使用它<br>效果：设置 width 和height 属性会生效；<br>padding、margin 和 border 会推开其他元素；<br>不会换行，只有在明确添加 width 和 height 属性后，才会变得比其内容大</p>
<h2 id="边框border"><a href="#边框border" class="headerlink" title="边框border"></a>边框border</h2><ul>
<li>border-width边框粗细 值px</li>
<li>border-style边框样式 值：<ul>
<li>none无边框；solid实线边框；double双边框</li>
<li>如果一个参数那么作用四个边；</li>
<li>两个参数一个作用上下一个左右；</li>
<li>三个参数第一个作用上，第二个左右，第三个下</li>
</ul>
</li>
<li>border-color边框颜色</li>
<li>表格的细线边框：<ul>
<li>border-collapse用于合并相邻的边框 值collapse</li>
</ul>
</li>
<li>border-radius:length圆角边框 </li>
<li>值px 或% ；</li>
<li>一个值四个角，四个值分别左上、右上、右下、左下</li>
<li>设置圆形：如果是矩形，设置为高度或宽度的一般或直接写50%</li>
<li>注意：边框会影响盒子的实际大小<br>欲设置单条边的宽度、样式或颜色，可以如：<br>border-top-width<br>border-top-style<br>border-top-color</li>
</ul>
<h3 id="创建三角形："><a href="#创建三角形：" class="headerlink" title="创建三角形："></a>创建三角形：</h3><p>通过设置元素的width、height为0，并利用border属性来创建。</p>
<h2 id="内边距padding-边框和内容之间的距离"><a href="#内边距padding-边框和内容之间的距离" class="headerlink" title="内边距padding 边框和内容之间的距离"></a>内边距padding 边框和内容之间的距离</h2><ul>
<li>padding  </li>
<li>-left左内边距 -right右内边距 -top上内边距 -bottom下内边距<br> 值：px 一个值作用四个方向；两个值一个作用上下一个作用左右；三个参数第一个作用域上，第二个左右，第三个下<br>注意：内边框会影响盒子的实际大小，解决办法：让盒子的宽高减去内边距<br>如果盒子没有指定宽高，那么padding不会撑开盒子</li>
</ul>
<h2 id="外边距margin-上下左右同内边距"><a href="#外边距margin-上下左右同内边距" class="headerlink" title="外边距margin 上下左右同内边距"></a>外边距margin 上下左右同内边距</h2><p>典型应用：让块级盒子水平居中</p>
<ul>
<li>盒子必须指定了宽度width；盒子的左右外边距都设置为auto 如margin:0 auto</li>
<li>外边距合并-嵌套合并外边距塌陷：两个父子关系的块元素同一方向都有margin，会合并导致塌陷<br>-解决：为父元素设置上边框；或为父元素设置内边距；或为父元素添加overflow:hidden</li>
</ul>
<h2 id="盒子阴影和文字阴影"><a href="#盒子阴影和文字阴影" class="headerlink" title="盒子阴影和文字阴影"></a>盒子阴影和文字阴影</h2><ul>
<li>box-shadow盒子阴影<br>值：h-shadow水平阴影的位置（必有）；v-shadow垂直阴影的位置（必有）；blur模糊距离，spread阴影尺寸，color阴影颜色</li>
<li>text-shadow文字阴影<br> 值：h-shadow水平阴影的位置（必有）；v-shadow垂直阴影的位置（必有）；blur模糊距离，spread阴影尺寸，color阴影颜色</li>
</ul>
<h1 id="css布局（排版）"><a href="#css布局（排版）" class="headerlink" title="css布局（排版）"></a>css布局（排版）</h1><h2 id="display属性"><a href="#display属性" class="headerlink" title="display属性"></a>display属性</h2><p>display属性属性允许我们更改默认的显示方式<br>在css显示模式中已经详细记录过display:block和display:inline<br><strong>还有两个经常用在布局中的 display: flex 和 display: grid</strong></p>
<h2 id="flex弹性盒子布局-详细看flex文章"><a href="#flex弹性盒子布局-详细看flex文章" class="headerlink" title="flex弹性盒子布局(详细看flex文章)"></a>flex弹性盒子布局(详细看flex文章)</h2><p>必须有父盒子，给父元素设置 display :flex 弹性容器为块级元素（或 inline-flex弹性容器为行内元素）<br>子元素会自动按照一定规则挤压或拉伸</p>
<ul>
<li>弹性盒子由弹性容器(父亲)和弹性盒子(子元素)，主轴和侧轴组成</li>
<li>主轴默认在水平方向，侧轴默认在垂直方向</li>
<li>弹性容器内包含了一个或多个弹性子元素。</li>
<li>弹性子元素通常在弹性盒子内一行显示。默认情况每个容器只有一行</li>
<li>弹性容器外及弹性子元素内是正常渲染的。弹性盒子只定义了弹性子元素如何在弹性容器内布局</li>
<li>默认情况主轴内容撑开，侧轴拉伸填充<blockquote>
<p>CSS3 弹性盒（ Flexible Box 或 flexbox），是一种当页面需要适应不同的屏幕大小以及设备类型时确保元素拥有恰当的行为的布局方式。<br>引入弹性盒布局模型的目的是提供一种更加有效的方式来对一个容器中的子元素进行排列、对齐和分配空白空间</p>
</blockquote>
</li>
</ul>
<h3 id="父元素常见属性"><a href="#父元素常见属性" class="headerlink" title="父元素常见属性"></a>父元素常见属性</h3><ol>
<li>属性名justify-content: 设置主轴上的子元素排列方式<br>属性值：<ul>
<li>flex-start 默认值</li>
<li><ul>
<li>从起点开始依次排列，如果主轴是x轴，则从左到右放子元素</li>
</ul>
</li>
<li>center </li>
<li><ul>
<li>让子盒子在主轴居中对齐，如果主轴是x轴则水平居中</li>
</ul>
</li>
<li><strong>space-between</strong></li>
<li><ul>
<li>先两边贴边再平分剩余空间</li>
</ul>
</li>
<li>space-evenly</li>
<li><ul>
<li>左右两边和中间的空隙都相等</li>
</ul>
</li>
<li>space-around</li>
<li><ul>
<li>每个子元素的两侧空隙相等，注意是每个的两侧，所以俩个子盒子中间的空隙是最左和最有空隙的两倍</li>
</ul>
</li>
<li>flex-end </li>
<li><ul>
<li>从尾部开始排列<br>记忆：两侧没缝隙between ；缝隙一样大evenly；两倍缝隙around</li>
</ul>
</li>
</ul>
</li>
<li>align-content:设置侧轴上的子元素的排列方式(多行)<ul>
<li>flex-start 默认值在侧轴的头部开始排列</li>
<li>flex-end：在侧轴的尾部开始排列</li>
<li>center：在侧轴中间显示</li>
<li>space-around：子项在侧轴平分剩余空间</li>
<li>space-between：子项在侧轴先分布在两头,再平分剩余空间</li>
<li>stretch：设置子项元素高度平分父元素高度，沿侧轴线拉伸至填满容器（父元素没有设置高度时默认拉伸）</li>
</ul>
</li>
<li>flex-direction :设置主轴的方向<ul>
<li>row默认值从左到右</li>
<li>row-reverse 从右到左</li>
<li><strong>column</strong>从上到下，把主轴改成垂直方向，常用</li>
<li>column-reverse 从下到上</li>
</ul>
</li>
<li>flex-wrap:设置子元素是否换行<ul>
<li>flex 在浏览器宽度缩小后里面的最后一个盒子不会被挤下去到下面一行，而是他们都会自动缩小</li>
<li>flex-wrap 默认子元素不换行，默认都是排在一条轴线上，相当于隐含了这个代码 flex-wrap:nowrap；</li>
<li>如果想要最后的元素换行，那么flex-wrap:wrap；</li>
</ul>
</li>
<li>align-items :设置侧轴上的子元素排列方式(单行)<br>该属性是控制子项在侧轴（默认是y轴）上的排列方式在子项为单项的时候使用</li>
<li>flex-flow : 复合属性，相当于同时设置了flex-direction和flex-wrap</li>
</ol>
<h3 id="子元素常见属性"><a href="#子元素常见属性" class="headerlink" title="子元素常见属性"></a>子元素常见属性</h3><ol>
<li>flex属性</li>
</ol>
<ul>
<li>定义子项目分配剩余空间！，用flex来表示占多少份数！</li>
<li>flex:数字;默认是0.，表示占用父级默认尺寸的份数</li>
</ul>
<ol start="2">
<li>align-self 控制子项自己在侧轴上的对齐方式<ul>
<li>这个属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性</li>
<li>默认值为auto，表示继承父元素的align-items属性，如果没有父元素就等同于stretch</li>
</ul>
</li>
<li>order属性定义项目的排列顺序<ul>
<li>数值越小，排列月考i按，默认0</li>
<li>注意，和z-index不一样</li>
</ul>
</li>
</ol>
<h2 id="gird布局（详细看gird文章）"><a href="#gird布局（详细看gird文章）" class="headerlink" title="gird布局（详细看gird文章）"></a>gird布局（详细看gird文章）</h2><p>flex布局用于设计横向或纵向的布局，而Grid布局则被设计用于同时在两个维度上把元素按行和列排列整<br>把display: gird 添加到父元素，子元素会自动按照一定规则排列<br>父元素属性</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">200px</span>; <span class="comment">/* 列定义 */</span></span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> auto;   <span class="comment">/* 行定义 */</span></span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span>;                        <span class="comment">/* 间距 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>子元素属性</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;               <span class="comment">/* 跨越两列 */</span></span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;                      <span class="comment">/* 定位到第一行 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="css浮动-float"><a href="#css浮动-float" class="headerlink" title="css浮动 float"></a>css浮动 float</h2><p>float值：left或;right;none默认值，不浮动;inherit继承父元素的浮动属性</p>
<ul>
<li>浮动特性：<br>浮动元素会脱离标准流；<br>会一行内显示并且元素顶部对齐；<br>福哦的那个元素有行内块元素的特性：宽度无法修改由自身撑开，高度和边距可以修改<br>要之间有空隙用margin</li>
<li>注意：<br>浮动的元素会互相贴靠在一起没有缝隙，如果宽度装不下，多余的盒子会跑到下一行</li>
<li>浮动元素常搭配标准流父级使用<br>先用标准流的父元素排列上下位置，之后内部的子元素采取浮动排列左右位置</li>
</ul>
<h3 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h3><p>浮动的盒子只会影响浮动盒子后面的标准流，前面的不影响<br>清除浮动：不让对后面元素的排版产生影。</p>
<ul>
<li>clear 值left左侧;right右侧;both左右两侧不允许有浮动<br>如果父级盒子本身有高度，那么不需要清除浮动；<br>父级盒子没有高度，清除浮动后父级会根据浮动的盒子自动检测高度</li>
<li>额外标签法:在浮动元素末尾添加一个空的块级标签，如<br>div style&#x3D;”clear:both” &#x2F;div<br>br style&#x3D;”clear:both” &#x2F;</li>
<li>清除浮动–父级添加overflow<br>值：hidden（常用）auto ;scroll<br>缺点：无法显示溢出的部分</li>
<li>清除浮动–:after伪元素法（额外标签法的升级优化）<br>给父元素添加 .clearfix:after{<br>  content:””; 这个是伪元素必写的属性<br>  display:block; 插入的伪元素默认是行内元素，要转化为块级元素<br>  height:0; 不要看见这个元素<br>  clear:both;<br>  visibility:hidden; 不要看见这个元素<br>}</li>
<li>清除浮动–双伪元素法（额外标签法的升级优化）<br>.clearfix:before,.clearfix:after{<br>  content:””; 这个是伪元素必写的属性<br>  display:table; 转化为块级元素并且一行显示<br>}<br>.clearfix:after{<br>clear:both;<br>}</li>
</ul>
<h3 id="常见应用：实现文字环绕box-浮动元素-效果"><a href="#常见应用：实现文字环绕box-浮动元素-效果" class="headerlink" title="常见应用：实现文字环绕box(浮动元素)效果"></a>常见应用：实现文字环绕box(浮动元素)效果</h3><p>巧妙利用浮动元素不会压住文字的特性<br>在一个盒子里面放一个图片，给图片添加左浮动，盒子里的文字自动跑到右边围绕图片</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><p>让盒子自由地在某个盒子内移动位置或者固定在屏幕中的某个位置，可以压住其他盒子<br>将盒子定在某个位置，摆盒子<br>定位&#x3D;定位模式+边偏移<br>定位用来管理和微调页面中的一个特殊项的位置，依赖于position属性</p>
<h3 id="定位类型"><a href="#定位类型" class="headerlink" title="定位类型"></a>定位类型</h3><p>position: static：默认定位，不脱离文档流。<br>position: relative：相对自身定位，不脱离文档流。<br>position: absolute：相对于最近的定位祖先元素定位，脱离文档流。<br>position: fixed：相对于视口定位，脱离文档流。<br>position: sticky：滚动时固定在指定位置（如导航栏）</p>
<ul>
<li>静态定位 position: static;<br>是每个元素默认的属性</li>
<li>相对定位 position: relative;<br>允许我们相对于元素在正常的文档流中的位置移动它(从它的默认位置按坐标进行相对移动)</li>
<li>绝对定位 position: absolute;<br>类似将它单独放在一个图层中<br>相对于它最近的一级有定位的祖先的元素来说，没有父级或父级没有定位的情况，没有自选那么以浏览器为准定位<br><strong>绝对定位会脱标，不再占有原来的位置</strong></li>
<li>固定定位  position: fixed;<br>固定在浏览器可视区，相当于粘在了屏幕上不随页面滚动而滚动<br>以窗口为参照点，和父元素没有任何关系（元素一直在浏览器的某个位置上滚不走）</li>
<li>粘性定位 position: sticky;<br>它会先让元素先保持和 position: static 一样的定位，当它的相对视口位置达到某一个预设值时，它就会像 position: fixed 一样定位<br>（滚动到元素要离开页面的时候元素会卡在页面上不会消失）<br>占有原先的位置<br>必须添加上下左右其中一个才有效</li>
</ul>
<p>注意：<strong>子绝父相</strong>：子元素是绝对定位的话，父级要用相对定位<br>原因：子级决定定位不会占有位置，父盒子需要添加定位显示子盒子在父盒子内显示<br><strong>边偏移</strong><br>定义元素相对于其参考元素某边线的距离<br>四个属性top.botton,left,right<br>每个属性的值是npx</p>
<ul>
<li><strong>定位叠放次序 z-index</strong><br>选择器{z-index:n;} 数值可以说正整数，0，负整数，默认auto，数值越大盒子越靠上</li>
<li><strong>让绝对定位的盒子居中</strong><br>绝对定位的盒子不能通过margin:0 auto水平居中，用下面的计算方法可以实现水平和垂直居中<br>left:50%；让盒子的左侧移动到父元素的水平中心位置<br>margin-left:-100px；让盒子向左移动自身宽度的一半</li>
<li>行内元素添加绝对定位或者固定定位可以直接设置宽度和高度</li>
<li>块级元素添加绝对定位或者固定定位，如果不给宽度或者高度，默认大小是内容大小</li>
<li>浮动和绝对定位（固定定位）元素都不会出发外边距合并塌陷的问题</li>
<li>浮动的元素不会压住标准流的文字，定位会</li>
</ul>
<h2 id="margin负值妙用"><a href="#margin负值妙用" class="headerlink" title="margin负值妙用"></a>margin负值妙用</h2><ul>
<li>清除浮动盒子之间边框贴在一起双边框的问题<br>margin-left&#x3D;-1px; 1为border的宽度</li>
<li>鼠标经过某个盒子时，提高当前盒子的层级，让这个盒子的边框完整展示出来<br>ul li:hover{<br>如果li都有定位，那么利用z-index提高层级<br>z-index:1;;<br>border:1px solid blue;<br> }<br>ul li:hover{<br>  如果盒子没有定位，则鼠标经过添加相对定位即可<br>  position:rekative;<br>  border:1px solid blue;<br>}</li>
</ul>
<h1 id="图形样式相关"><a href="#图形样式相关" class="headerlink" title="图形样式相关"></a>图形样式相关</h1><h2 id="常见图片格式"><a href="#常见图片格式" class="headerlink" title="常见图片格式"></a>常见图片格式</h2><ul>
<li>.jpg格式：对色彩信息保留较好，高清，颜色较多，铲平类的图片经常用jpg格式</li>
<li>.gif可以保存透明背景和动画效果，实际经常用于一些图片小动画效果</li>
<li>.png格式能够保持图片透明背景</li>
<li>psd格式：PS专用，可以直接从上面复制文字，测量大小和距离</li>
</ul>
<h2 id="修改图片尺寸"><a href="#修改图片尺寸" class="headerlink" title="修改图片尺寸"></a>修改图片尺寸</h2><p>图片放到一个盒子里，改盒子，图片100%<br>.pic{width&#x3D;300px;height&#x3D;200px;}<br>.pic img{width：100%；}<br>div class&#x3D;”pic”<br>img src&#x3D;”img.png”<br>&#x2F;div</p>
<h2 id="精灵图-sprties"><a href="#精灵图-sprties" class="headerlink" title="精灵图 sprties"></a>精灵图 sprties</h2><p>目的：减少服务器接收和发送请求的次数，提高页面加载速度<br>核心：主要针对背景图片使用，把多个小背景图片整合到一张大图片中，这个大突破叫精灵图<br>移动背景图片位置此时用background-position 移动的距离就是目标图片的x和y坐标，注意一般都是负值</p>
<h2 id="字体图标-iconfont"><a href="#字体图标-iconfont" class="headerlink" title="字体图标 iconfont"></a>字体图标 iconfont</h2><p>优点：轻量，灵活，兼容性高<br>推荐下载网站 <a href="http://icomoon.io/">http://icomoon.io</a>  <a href="http://www.iconfint.cn/">http://www.iconfint.cn</a></p>
<h2 id="css三角制作"><a href="#css三角制作" class="headerlink" title="css三角制作"></a>css三角制作</h2><p>div{<br>  width:0;<br>  height:0;<br>  line-height:0;<br>  font-size:0;<br>  border:50px solid transparent;<br>  border-left-color:red;<br>}</p>
<h2 id="鼠标样式cousor"><a href="#鼠标样式cousor" class="headerlink" title="鼠标样式cousor"></a>鼠标样式cousor</h2><p>cursor: 值default 小白鼠标（默认）；pointer 小手；move 移动 text 文本 not-allowed 禁止</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="元素的显示与隐藏与溢出"><a href="#元素的显示与隐藏与溢出" class="headerlink" title="元素的显示与隐藏与溢出"></a>元素的显示与隐藏与溢出</h2><ul>
<li>display 属性用于设置元素如何显示<br>display:none 隐藏对象（不再占有原来的位置）<br>display:bolck 转换为块级元素并显示元素</li>
<li>visibility<br>visiblity:hidden 元素隐藏（继续占有原来的位置）<br>visiblity:visible 元素可视</li>
<li>overflaw 溢出 如果内容溢出一个元素的框时会发生什么<br>值：visible 不见且内容也不添加滚动条<br>hidden 溢出的部分隐藏<br>scroll 总是显示滚动条<br>auto 超出显示滚动条，不超出不显示滚动条</li>
<li>溢出的文字省略号显示</li>
<li><ul>
<li>单行文本溢出显示省略号<br>先强制一行内显示文本 white-space:nowrap;<br>超出的部分隐藏overflow:hidden;<br>文字用省略号替代超出的部分 text-overflow:ellipsis;</li>
</ul>
</li>
<li><ul>
<li>多行文本溢出显示省略号<br>overflow:hidden;<br>text-overflow:ellipsis;<br>弹性伸缩盒子模型显示 display:-wekit-box;<br>限制在一个块元素显示的文本的行数 -webkit-line-clamp:2;<br>设置或检索伸缩盒对象的子元素的排列方式-verkit-box-orient:vertical;</li>
</ul>
</li>
</ul>
<h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><ul>
<li>用户表单</li>
<li>取消表单轮廓<br>轮廓线outline online:0或online:none 去掉默认的蓝色边框</li>
<li>防止拖拽文本域<br>textarea{reseze:none}</li>
<li>设置图片或表单（行内块元素）或文字垂直对齐<br>vertical-align: 值baseline默认，元素放在父元素的基线上;top元素顶端与行中最高元素的顶端对齐;middle放在父元素的中部;bottom元素底端与行中最高元素的底端对齐</li>
<li>图片底部白边怎么取消<br>img{ vertical-align:bottom; }<br>或把图片转换为块级元素</li>
</ul>
<h2 id="css属性书写顺序"><a href="#css属性书写顺序" class="headerlink" title="css属性书写顺序"></a>css属性书写顺序</h2><p>建议遵循一下顺序：<br>1.布局定位顺序：display&#x2F;position&#x2F;float&#x2F;clear&#x2F;visibility&#x2F;overflow<br>2.自身属性：width&#x2F;height&#x2F;margin&#x2F;padding&#x2F;border&#x2F;background<br>3.文本属性：color&#x2F;font&#x2F;tect-decoration&#x2F;text-align&#x2F;vertical-align&#x2F;white-space&#x2F;break-word<br>4其他属性：content&#x2F;cursor&#x2F;border-radius&#x2F;box-shadow</p>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML-题目</title>
    <url>/2025/01/09/01-html%E9%A2%98/</url>
    <content><![CDATA[<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><h3 id="什么是DOCTYPE，为什么需要它？"><a href="#什么是DOCTYPE，为什么需要它？" class="headerlink" title="什么是DOCTYPE，为什么需要它？"></a>什么是DOCTYPE，为什么需要它？</h3><p><strong>DOCTYPE 是一个文档类型声明，它告诉浏览器页面使用的是哪种 HTML 或 XHTML 规范。</strong><br><strong>它的存在确保了浏览器能够以标准模式渲染网页，从而避免兼容性问题</strong></p>
<blockquote>
<p>对于 HTML5，DOCTYPE 简单地声明为 <code>&lt;!DOCTYPE html&gt;</code>。不同的渲染模式会影响浏览器对CSS代码甚至JavaScript脚本的解析。<br>它必须声明在HTML文档的第一行。浏览器渲染页面有两种模式，可通过document.compatMode获取：<br>CSS1Compat：标准模式，默认模式，浏览器使用W3C的标准解析渲染页面。在标准模式中，浏览器以其支持的最高标准呈现页面。<br>BackCompat：怪异模式（混杂模式），浏览器使用自己的怪异模式解析渲染页面。在怪异模式中，页面以一种比较宽松的向后兼容的方式显示。</p>
</blockquote>
<blockquote>
<p>如果不写<code>&lt;!DOCTYPE html&gt;</code>声明，浏览器会进入“怪异模式”（Quirks Mode）。<br>在怪异模式下，浏览器会尝试兼容旧版本HTML和CSS的渲染方式，这可能会导致页面布局和样式出现不一致的问题。<br>盒子模型差异：在怪异模式下，IE浏览器的盒子模型与标准模式不同，可能会导致页面布局错乱。<br>CSS样式差异：一些CSS属性在怪异模式下可能无法正常工作</p>
</blockquote>
<h3 id="HTML-和-XHTML-有什么区别？"><a href="#HTML-和-XHTML-有什么区别？" class="headerlink" title="HTML 和 XHTML 有什么区别？"></a>HTML 和 XHTML 有什么区别？</h3><p><strong>XHTML是 HTML 的一个严格版本，它遵循 XML 规则。XHTML旨在将 HTML 的灵活性与 XML 的结构化和严格性结合起来。</strong></p>
<p>严格性：XHTML 更加严格，要求所有标签必须闭合，属性值必须用引号括起来，并且标签名和属性名必须小写。<br>语法结构：HTML 对大小写不敏感，允许某些标签自动闭合；而 XHTML 是 XML 的一种应用，遵循 XML 的规则。<br>错误处理：HTML 浏览器更宽容对待错误，而 XHTML 在遇到错误时可能会停止解析。<br>命名空间支持：XHTML 支持命名空间，(这对于包含来自不同DTD的元素是有用的。)</p>
<blockquote>
<p>DTD 是文档类型定义（Document Type Definition）的缩写，它是用于定义 SGML（、HTML 和 XML 文档结构的一种机制。<br>DTD 描述了合法的标记结构，规定了哪些元素可以出现在文档中，以及这些元素如何相互嵌套。<br>通过引用特定的 DTD，浏览器或其他应用程序能够验证文档是否符合预期的格式。</p>
</blockquote>
<h3 id="解释一下-HTML-中的语义化是什么意思？"><a href="#解释一下-HTML-中的语义化是什么意思？" class="headerlink" title="解释一下 HTML 中的语义化是什么意思？"></a>解释一下 HTML 中的语义化是什么意思？</h3><p>语义化HTML是指<strong>使用具有明确语义的HTML标签</strong>来标记页面内容，使页面结构更加清晰、合理，便于人和机器理解。<br>使用语义化标签的原因包括：<br><strong>提高代码可读性：</strong>让其他开发者更容易读懂代码，理解页面结构和内容的逻辑关系。<br><strong>有利于SEO</strong>：搜索引擎爬虫能够更好地抓取和解析页面内容，从而提高网页在搜索结果中的排名。<br><strong>增强页面可访问性</strong>：屏幕阅读器等辅助设备可以更准确地读取页面内容，为有视觉障碍的用户带来更好的浏览体验。<br><strong>便于维护和扩展</strong>：当需要对页面进行修改或添加新内容时，语义化的结构使得操作更加方便快捷。</p>
<p>例如，<code>&lt;article&gt;、&lt;section&gt;、&lt;header&gt;、&lt;footer&gt;</code> 等标签可以更好地表达页面结构，有助于搜索引擎优化和提高无障碍访问能力。</p>
<h3 id="如何让网页更加无障碍友好？"><a href="#如何让网页更加无障碍友好？" class="headerlink" title="如何让网页更加无障碍友好？"></a>如何让网页更加无障碍友好？</h3><p>答：<br>使用语义化的 HTML 标签。<br>提供替代文本 (alt) 给图片和其他非文本内容。<br>确保所有交互式元素都可通过键盘导航。<br>使用ARIA属性增强动态内容和复杂组件的无障碍性。<br>确保足够的对比度，使文本易于阅读。</p>
<blockquote>
<p>ARIA（Accessible Rich Internet Applications，可访问的富互联网应用程序）属性是一组特殊属性,它们被添加<strong>到 HTML 元素中，以增强 Web 内容和应用程序的无障碍性。这些属性提供了额外的信息给辅助技术</strong>（如屏幕阅读器），使得动态内容和复杂用户界面控件（如树形菜单、滑块、选项卡面板等）对于残障人士来说更加易于理解和使用。</p>
</blockquote>
<h3 id="解释一下-HTML-中的块级元素与行内元素的区别。"><a href="#解释一下-HTML-中的块级元素与行内元素的区别。" class="headerlink" title="解释一下 HTML 中的块级元素与行内元素的区别。"></a>解释一下 HTML 中的块级元素与行内元素的区别。</h3><p>答：<br><strong>块级元素display:block：</strong>默认情况下独占一行，宽高边距都能控制，是一个容器（盒子），里面可以放行内或块级元素。常见的有 <code>&lt;div&gt;, &lt;p&gt;, &lt;h1&gt;</code> 到 <code>&lt;h6&gt; </code>等。<br>应用：块元素水平居中：设置宽度同时盒子左右外边距设为auto</p>
<p><strong>行内元素display:inline：</strong>只占据其内容所需的宽度，不会强制换行，width 和 height 属性将不起作用宽高无法修改由自身撑开，只能容纳文本或其他行内元素。它们只能包含文本或其他行内元素。常见的有 <code>&lt;span&gt;, &lt;a&gt;, &lt;img&gt;</code> 等。<br><strong>行内块元素：</strong>一行可以显示多个，之间有空白缝隙；宽度无法修改由自身撑开，高度和边距可以修改<br>应用：行内元素水平居中：给父元素添加text-align:center</p>
<h3 id="什么是-Meta-标签？它们的作用是什么？"><a href="#什么是-Meta-标签？它们的作用是什么？" class="headerlink" title="什么是 Meta 标签？它们的作用是什么？"></a>什么是 Meta 标签？它们的作用是什么？</h3><p>Meta标签位于HTML文档的 <head> 部分，提供关于文档本身的元数据。<br>这些信息通常不会直接显示给用户，会被浏览器使用，如设置字符编码 (<code>&lt;meta charset=&quot;UTF-8&quot;&gt;</code>)、指定页面描述 (<code>&lt;meta name=&quot;description&quot; content=&quot;...&quot;</code>&gt;) 和控制视口行为 (<code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</code>)。<br>关键词：<code>&lt;meta name=&quot;keywords&quot; content=&quot;关键词1,关键词2&quot;&gt;</code>，向搜索引擎提供与网页内容相关的关键词，但现代搜索引擎已较少依赖此标签。</p>
<h3 id="解释一下-HTML-中的表单元素及它们的工作原理。"><a href="#解释一下-HTML-中的表单元素及它们的工作原理。" class="headerlink" title="解释一下 HTML 中的表单元素及它们的工作原理。"></a>解释一下 HTML 中的表单元素及它们的工作原理。</h3><p>答：<br>表单元素包括 <code>&lt;form&gt;、&lt;input&gt;、&lt;textarea&gt;、&lt;select&gt;</code>等。<br>表单用于和用户交互，收集用户信息。<br>每个表单元素都有自己的类型（如文本框、密码框、复选框等）和名称属性，用于标识数据。<br>还可以使用 JavaScript 来验证用户输入并响应用户的操作。</p>
<blockquote>
<p>input type&#x3D;”button|submit|reset|checkbox|radio|file|hidden|image|password|text”<br>input和label结合使用<br>表单增强(html5新特性)<br>新增输入类型：input type&#x3D;”email|url|date|time|number|range|color|search|tel|week|datetime-local|datetime|month|time|week|col”<br>新的表单验证:required|min|max|minlength|maxlength</p>
</blockquote>
<h3 id="工程化项目"><a href="#工程化项目" class="headerlink" title="工程化项目"></a>工程化项目</h3><p>HTML一般不会直接手写最终版，而是通过构建工具处理。<br>比如Webpack里，用 html-webpack-plugin 来生成HTML，它会把我们写的模板文件和打包好的JS、CSS自动合并进去。<br>像用Vue CLI创建项目时， public&#x2F;index.html 是模板，打包后会自动把 app.js 这些资源注入到<code> &lt;body&gt;</code> 里。<br>Vite的话更简单，HTML直接作为入口文件，开发时会自动解析里面的JS模块，不用额外配置，</p>
<h3 id="什么是-iframe-如何使用它？"><a href="#什么是-iframe-如何使用它？" class="headerlink" title="什么是 iframe 如何使用它？"></a>什么是 iframe 如何使用它？</h3><p><strong>iframe（内联框架）是 HTML 中的一个元素，可以在当前页面中嵌入另一个 HTML页面</strong><br>可以通过设置 src 属性来指定要加载的 URL。<br><strong>iframe用来展示第三方内容或者将大型页面分割成较小的部分,以便管理。</strong></p>
<p>iframe标签用于在当前页面中嵌入另一个HTML页面，创建一个内嵌的框架。常见的应用场景包括：<br>在网页中嵌入第三方内容，如广告、地图、视频等，而不影响主页面的结构和样式。<br>实现多页面布局，将不同的内容模块分别放在不同的iframe中，便于管理和更新。</p>
<p>创建弹出式窗口或对话框的效果，通过调整iframe的样式和属性，使其以悬浮窗口的形式展示特定内容。<br>实现跨域通信，不同域名下的页面可以通过iframe进行数据交互和通信。</p>
<h3 id="HTML5-中新增了哪些重要特性？"><a href="#HTML5-中新增了哪些重要特性？" class="headerlink" title="HTML5 中新增了哪些重要特性？"></a>HTML5 中新增了哪些重要特性？</h3><p>答：<br><strong>新增语义化标签</strong>，如 <code>&lt;article&gt;, &lt;section&gt;, &lt;header&gt;, &lt;footer&gt;, &lt;nav&gt;, &lt;aside&gt;</code> 等。<br>媒体元素<code>&lt;audio&gt;</code>和 <code>&lt;video&gt;</code>，用于播放音频和视频文件。<br><strong>表单增强，表单控件的新类型，验证，元素，属性（见html文档）</strong><br>新标签：<br><code>&lt;section&gt;</code>：定义文档中的独立章节。<br><code>&lt;article&gt;</code>：定义独立的内容块。<br><code>&lt;nav&gt;</code>：定义导航链接。<br><code>&lt;header&gt;</code>：定义文档头部。<br><code>&lt;footer&gt;</code>：定义文档的页脚。<br><code>&lt;aside&gt;</code>：定义与页面内容稍有关系的部分（如侧边栏）。<br><code>&lt;mark&gt;</code>：标记文本，通常用于高亮显示搜索结果。<br><code>&lt;progress&gt;</code>：表示任务进度条。<progress><br><code>&lt;meter&gt;</code>：表示度量值。</p>
<p>新增功能：<br><strong>本地存储</strong>：localStorage和sessionStorage，分别用于长期存储数据（浏览器关闭后数据不丢失）和会话存储数据（浏览器关闭后数据自动删除）。<br>（存储部分的细节在下面有）</p>
<p><strong>新的API</strong>：Canvas、Geolocation API、Web Workers等，为网页开发提供了更多的交互性和动态效果<br>Canvas API，用于绘制图形。<br>Web Storage API，提供本地存储功能。<br>Geolocation API，获取用户地理位置。</p>
<h3 id="解释alt属性的作用，为什么对图片使用alt属性非常重要？"><a href="#解释alt属性的作用，为什么对图片使用alt属性非常重要？" class="headerlink" title="解释alt属性的作用，为什么对图片使用alt属性非常重要？"></a>解释alt属性的作用，为什么对图片使用alt属性非常重要？</h3><p><strong>alt属性用于为图片提供替代文本，当图片无法显示时，浏览器会显示alt属性中的文本内容</strong></p>
<p>对图片使用alt属性非常重要，原因如下：<br><strong>提供图片加载失败时的备用信息</strong>：当图片因网络问题、路径错误等原因无法正常显示时，alt文本可以作为替代内容展示给用户，让用户了解图片的大致内容。</p>
<p><strong>提升网页可访问性：屏幕阅读器可以读取alt文本</strong>，为视觉障碍用户描述图片内容，帮助他们更好地理解页面信息。<br><strong>优化SEO：搜索引擎爬虫无法直接识别图片内容，但可以读取alt文本</strong>，合理的alt描述有助于提高图片在搜索引擎图片搜索结果中的排名，进而提升整个网页的搜索引擎优化效果。</p>
<blockquote>
<p>SEO（Search Engine Optimization，搜索引擎优化）是指通过一系列技术和策略来提高网站在搜索引擎自然搜索结果中的排名，从而增加网站的可见性和流量。良好的 SEO 实践可以帮助你的网站更容易被搜索引擎索引，并且在用户搜索相关关键词时更有可能出现在前列位置。</p>
</blockquote>
<h3 id="data-属性的作用是什么？"><a href="#data-属性的作用是什么？" class="headerlink" title="data-*属性的作用是什么？"></a>data-*属性的作用是什么？</h3><p><strong>data-属性是HTML5新增的自定义属性，允许开发者在元素上存储额外的自定义数据</strong>，这些数据可以被JavaScript访问和操作，而无需依赖其他存储方式，如localStorage或cookie。<br>使用data-属性<strong>可以方便地为元素添加额外的信息，用于页面的交互和动态效果实现，</strong></p>
<p>例如<code>&lt;div data-user-id=&quot;123&quot; data-role=&quot;admin&quot;&gt;&lt;/div&gt;</code>.<br>在JavaScript中可以通过element.dataset.userId和element.dataset.role来获取这些自定义数据</p>
<h3 id="HTML5-标签的作用"><a href="#HTML5-标签的作用" class="headerlink" title="HTML5 &lt;canvas&gt; 标签的作用"></a>HTML5 <code>&lt;canvas&gt; </code>标签的作用</h3><p><code>&lt;canvas&gt;</code>元素提供了一种通过 JavaScript 来绘制图形的方式，它本质上是一个可以通过脚本（通常是JavaScript）实时渲染图像的容器。<br><code>&lt;canvas&gt; </code>最初被设计用于制作图形、动画、游戏等需要动态图像生成的应用</p>
<h2 id="HTML-性能优化"><a href="#HTML-性能优化" class="headerlink" title="HTML 性能优化"></a>HTML 性能优化</h2><p>如何优化 HTML 页面的加载性能？<br>减少 DOM 元素数量。<br>使用 rel&#x3D;”preload” 预加载关键资源。<br>使用 <picture> 标签优化图片加载。<br>使用 async 和 defer 优化脚本加载。<br>压缩 HTML、CSS、JavaScript 文件。<br>使用 CDN 加速静态资源加载。<br>资源压缩：使用 Gzip&#x2F;Brotli 压缩 HTML&#x2F;CSS&#x2F;JS 文件。<br>懒加载：用 loading&#x3D;”lazy” 延迟加载图片和非首屏资源。<br>减少重排&#x2F;重绘：避免频繁操作 DOM，批量修改样式。<br>预加载关键资源：用 <code>&lt;link rel=&quot;preload&quot;&gt;</code> 提前加载关键&#96; CSS&#x2F;JS。</p>
<h3 id="减少-DOM-元素数量"><a href="#减少-DOM-元素数量" class="headerlink" title="减少 DOM 元素数量"></a>减少 DOM 元素数量</h3><p>DOM 元素过多会导致页面渲染变慢，尤其是在低性能设备上。<br>优化方法：<br>避免不必要的嵌套标签;<br>使用 CSS 替代复杂的 HTML 结构（如用伪元素代替额外的<code>&lt;div&gt;</code>）<br>动态加载内容，避免一次性渲染大量 DOM 元素</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 不推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 推荐 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-标签的-rel-”preload”-预加载资源"><a href="#使用-标签的-rel-”preload”-预加载资源" class="headerlink" title="使用 &lt;link&gt; 标签的 rel&#x3D;”preload” 预加载资源"></a>使用 <code>&lt;link&gt;</code> 标签的 rel&#x3D;”preload” 预加载资源</h3><p>前加载关键资源（如字体、图片、脚本），减少页面加载时间<br>预加载关键资源：将重要的CSS和JavaScript文件设置为预加载，确保它们在页面加载时优先加载。<br>减少首屏加载时间：通过预加载关键资源，可以减少页面的首屏加载时间，提升用户体验。<br>说明：<br>href：指定要预加载的资源的URL。<br>as：指定资源的类型（如style、script、font等）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;font.woff2&quot;</span> <span class="attr">as</span>=<span class="string">&quot;font&quot;</span> <span class="attr">type</span>=<span class="string">&quot;font/woff2&quot;</span> <span class="attr">crossorigin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;image.jpg&quot;</span> <span class="attr">as</span>=<span class="string">&quot;image&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;script.js&quot;</span> <span class="attr">as</span>=<span class="string">&quot;script&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span> <span class="attr">as</span>=<span class="string">&quot;style&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;script.js&quot;</span> <span class="attr">as</span>=<span class="string">&quot;script&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用-标签优化图片加载"><a href="#使用-标签优化图片加载" class="headerlink" title="使用 &lt;picture&gt; 标签优化图片加载"></a>使用 <code>&lt;picture&gt;</code> 标签优化图片加载</h3><p><code>&lt;picture&gt;</code> 标签允许开发者根据不同的屏幕尺寸或设备特性选择合适的图片资源，支持响应式图片，减少不必要的带宽消耗</p>
<p>使用 <code>&lt;source&gt;</code> 标签指定不同尺寸的图片，结合 media 属性设置媒体查询</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">&quot;large.jpg&quot;</span> <span class="attr">media</span>=<span class="string">&quot;(min-width: 1024px)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">&quot;medium.jpg&quot;</span> <span class="attr">media</span>=<span class="string">&quot;(min-width: 768px)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;small.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;示例图片&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用-标签的-async-和-defer-属性优化脚本加载"><a href="#使用-标签的-async-和-defer-属性优化脚本加载" class="headerlink" title="使用 &lt;script&gt; 标签的 async 和 defer 属性优化脚本加载"></a>使用 <code>&lt;script&gt;</code> 标签的 async 和 defer 属性优化脚本加载</h3><ul>
<li><p>async：<br>异步加载脚本，加载完成后立即执行。<br>适用于不依赖其他脚本的独立脚本。<br>示例：<br><code>&lt;script src=&quot;script.js&quot; async&gt;&lt;/script&gt;</code></p>
</li>
<li><p>defer：<br>延迟加载脚本，在文档解析完成后执行<br>适用于需要依赖 DOM 或其他脚本的脚本<br>示例：<br><code>&lt;script src=&quot;script.js&quot; defer&gt;&lt;/script&gt; </code></p>
</li>
<li><p>区别：<br>async 脚本的执行顺序不确定，defer 脚本按顺序执行<br>async 适用于独立脚本，defer 适用于依赖脚本</p>
</li>
</ul>
<h3 id="async-和-defer"><a href="#async-和-defer" class="headerlink" title="async 和 defer"></a>async 和 defer</h3><p>默认情况下，浏览器会按照HTML文档中 <code>&lt;script&gt;</code> 标签出现的顺序执行脚本，并且在遇到一个外部脚本时会暂停HTML解析，直到该脚本下载并执行完毕。这对于页面性能不是最佳选择，特别是当脚本文件较大或者网络状况不佳时。<br>为了解决这个问题，HTML5引入了两个属性：async 和 defer<br>async 和 defer 是 <code>&lt;script&gt;</code> 标签的两个属性，用于控制 JavaScript 脚本的加载和执行时机</p>
<h4 id="async-属性"><a href="#async-属性" class="headerlink" title="async 属性"></a>async 属性</h4><p><strong>async：表示脚本在下载时不会阻塞页面的解析和渲染。脚本下载完成后，会立即执行</strong><br><code> &lt;script src=&quot;analytics.js&quot; async&gt;&lt;/script&gt;</code></p>
<ul>
<li>特点：<br>脚本的加载是异步的，不会阻塞页面的其他资源加载。<br>脚本下载完成后立即执行，不等待页面解析完成。<br>执行顺序：async 脚本的执行顺序取决于它们的下载完成时间，而不是它们在 HTML 文档中的顺序。</li>
<li>适用场景：适用于那些不依赖于其他脚本和DOM完全加载就能运行的独立脚本。例如，统计分析、广告追踪等脚本</li>
</ul>
<h4 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h4><p>defer表示脚本在下载时不会阻塞页面的解析和渲染。脚<strong>本会在页面解析完成后、DOMContentLoaded 事件触发前执行</strong></p>
<ul>
<li>特点：<br>脚本的加载是异步的，不会阻塞页面的其他资源加载。<br>脚本会在页面解析完成后执行，确保脚本可以访问完整的 DOM。</li>
<li>执行顺序：defer 脚本的执行顺序与它们在 HTML 文档中的顺序一致，所有设置了 defer 的脚本会按它们在文档中出现的顺序依次执行，即使某个脚本先下载完成，也会等到所有设置 defer 的脚本都下载完后，再按序执行</li>
<li>适用场景：适用于需要访问或修改DOM的脚本，确保这些脚本在文档完全构建好之后执行，但又不想等待所有资源（如图片）加载完毕。</li>
</ul>
<h4 id="辨析"><a href="#辨析" class="headerlink" title="辨析"></a>辨析</h4><p>async 脚本是无序执行，即哪个脚本先下载完就先执行；而 defer 脚本是有序执行，根据其在文档中的顺序执行。<br>使用 async 或 defer 可以提高页面的加载速度，因为它们允许HTML解析器继续工作而不必等待脚本加载和执行。</p>
<ul>
<li>实际应用场景<br>对于一些不需要立即执行的脚本（比如统计脚本、社交媒体分享按钮等），可以使用 async 来加速页面加载。<br>如果脚本依赖于DOM结构（如初始化某些UI组件），则应使用 defer，以确保在执行脚本前HTML文档已经被完整解析。<br><strong>在现代Web开发实践中，通常推荐将关键脚本直接放在HTML底部接近结束标签处，而非头部，来避免阻塞渲染。如果必须在头部引用脚本，则应考虑使用 async 或 defer。</strong></li>
</ul>
<h3 id="HTML-无障碍访问（Accessibility）"><a href="#HTML-无障碍访问（Accessibility）" class="headerlink" title="HTML 无障碍访问（Accessibility）"></a>HTML 无障碍访问（Accessibility）</h3><ol>
<li>使用 aria-* 属性增强无障碍访问<br>作用：<br>aria-* 属性用于增强 HTML 元素的可访问性，帮助屏幕阅读器理解页面内容。<br>常见属性：<br>aria-label：为元素提供描述性文本。<br>aria-labelledby：引用其他元素的 ID 作为描述。<br>aria-hidden：隐藏元素，使其对屏幕阅读器不可见<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">aria-label</span>=<span class="string">&quot;关闭弹窗&quot;</span>&gt;</span>X<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">aria-labelledby</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>为图片添加 alt 属性</li>
<li>使用语义化标签提高可访问性</li>
</ol>
<h2 id="比较陌生的题"><a href="#比较陌生的题" class="headerlink" title="比较陌生的题"></a>比较陌生的题</h2><h3 id="上述内容再出题"><a href="#上述内容再出题" class="headerlink" title="上述内容再出题"></a>上述内容再出题</h3><p>如何使用localStorage存储用户偏好设置？请给出一个示例代码。<br>如何使用<code>&lt;picture&gt;</code>标签实现响应式图片？请给出一个示例代码。<br>请解释<code>&lt;script&gt;</code>标签的async和defer属性的区别，并给出使用场景。<br>如何优化HTML页面的加载性能？请列举至少三种方法。<br>请解释aria-*属性的作用，并列举至少两个常用的aria-*属性及其用途。<br>如何使用HTML5的表单验证功能？请给出一个示例代码。<br>请解释HTML5中<code>&lt;audio&gt;</code>和<code>&lt;video&gt;</code>标签的用途，并列举它们的主要属性。<br>如何减少DOM元素数量以优化页面性能？请列举至少两种方法。<br>请解释rel&#x3D;”preload”的作用，并给出一个使用场景。<br>如何为图片添加alt属性以提高无障碍访问性？请给出一个示例代码</p>
<h3 id="如何处理HTML5新标签的浏览器兼容问题？"><a href="#如何处理HTML5新标签的浏览器兼容问题？" class="headerlink" title="如何处理HTML5新标签的浏览器兼容问题？"></a>如何处理HTML5新标签的浏览器兼容问题？</h3><p>可以使用HTML5 Shiv来解决。HTML5 Shiv是一个JavaScript库，它允许IE8及以下版本的浏览器识别并正确渲染HTML5新标签。只需在页面中引入该库即可，例如<code>&lt;script src=&quot;html5shiv.js&quot;&gt;&lt;/script&gt;</code>。此外，还可以通过添加CSS样式来为新标签设置默认的显示类型，如header, footer, section, article, nav, aside <code>&#123; display: block; &#125;</code>，以确保在不支持这些标签的浏览器中也能正常显示。</p>
<h3 id="什么是-ARIA-标签？它们的作用是什么？"><a href="#什么是-ARIA-标签？它们的作用是什么？" class="headerlink" title="什么是 ARIA 标签？它们的作用是什么？"></a>什么是 ARIA 标签？它们的作用是什么？</h3><p>答：<br>ARIA（Accessible Rich Internet Applications，可访问的富互联网应用程序）属性是一组特殊属性，它们被添加到 HTML 元素中，以增强 Web 内容和应用程序的无障碍性。<br>这些属性提供了额外的信息给辅助技术（如屏幕阅读器），使得动态内容和复杂用户界面控件（如树形菜单、滑块、选项卡面板等）对于残障人士来说更加易于理解和使用。</p>
<p>ARIA是一组属性，用于向辅助技术传达有关网页上动态内容的信息。<br>例如，aria-label 可以为没有文本内容的元素添加描述，aria-live 可以标记出实时更新的内容区域，使得屏幕阅读器能够及时通知用户变化。</p>
]]></content>
      <categories>
        <category>html+css</category>
        <category>面试题</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>面试题</tag>
      </tags>
  </entry>
  <entry>
    <title>css进阶学习笔记（css3）</title>
    <url>/2025/01/25/02-css%E8%BF%9B%E9%98%B6/</url>
    <content><![CDATA[<h1 id="css3的新特性-下面的内容在css基础中更全"><a href="#css3的新特性-下面的内容在css基础中更全" class="headerlink" title="css3的新特性(下面的内容在css基础中更全)"></a>css3的新特性(下面的内容在css基础中更全)</h1><h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><p>根据元素特定属性的选择元素<br>A元素[属性名]–选择具有属性名属性的A元素<br>A元素[属性名&#x3D;”属性值”]–选择具有该属性名且值为该属性值的A元素<br>A元素[属性名^&#x3D;”val”]–选择具有该属性名且值以val开头的A元素<br>A元素[属性名$&#x3D;”val”]–选择具有该属性名且值以val结尾的A元素<br>A元素[属性名*&#x3D;”val”]–选择具有该属性名且值含有val的A元素</p>
<h2 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h2><p>选择父级选择器里面的子元素<br>A:first-child–选择父元素中的第一个子元素<br>A:last-child–选择父元素中的最后一个子元素A<br>A:nth-child(n)–选择父元素中的第n个子元素AA<br>A:first-of-type 指定类型A的第一个<br>A:last-of-type 指定类型A的最后一个<br>A:nth-of-type 指定类型A的第n个</p>
<h2 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h2><ul>
<li>利用css创建新标签元素，不需要html标签，从而简化html结构</li>
<li>element::before 在元素内部的前面插入内容</li>
<li>elemnet::after 在元素内部的后面插入内容</li>
<li>注意：创建的元素属于行内元素</li>
<li>必须要有content属性<br>如div::before{content:”早上好，又是美好的一天呢”}</li>
<li>使用场景：<br>伪元素字体图标（配合字体图标网站）<br>鼠标放上去有黑色半透明盒子<br>伪元素清除浮动（额外标签法的升级优化）见浮动</li>
</ul>
<h2 id="css3盒子模型"><a href="#css3盒子模型" class="headerlink" title="css3盒子模型"></a>css3盒子模型</h2><p>在选择器的最后一行添加box-ing:值<br>通过box-sizing指定盒模型，有两个值：content-box,border-box<br>box-sizing:content-box 盒子大小为width+padding+border（以前默认的）<br>box-sizing:border-box 盒子大小为width。此时oadding和border不会撑大盒子，而是会挤压里面的内容（前提是padding+border不超过width）</p>
<h2 id="flex布局和grid布局（看对应文章）"><a href="#flex布局和grid布局（看对应文章）" class="headerlink" title="flex布局和grid布局（看对应文章）"></a>flex布局和grid布局（看对应文章）</h2><h1 id="css3"><a href="#css3" class="headerlink" title="css3"></a>css3</h1><h2 id="边框，圆角，边框图片"><a href="#边框，圆角，边框图片" class="headerlink" title="边框，圆角，边框图片"></a>边框，圆角，边框图片</h2><h3 id="边框border"><a href="#边框border" class="headerlink" title="边框border"></a>边框border</h3><p>border:npx 边框类型 边框颜色;<br>可以接受多个值</p>
<ul>
<li>第一个值是宽度npx，</li>
<li>第二个值是类型solid(直线)，dashed（虚线），double（双实现），ridge（突起的边框）</li>
<li>第三个值是颜色，可以英文单词可以其他表示方式</li>
</ul>
<h3 id="圆角border-radius"><a href="#圆角border-radius" class="headerlink" title="圆角border-radius"></a>圆角border-radius</h3><p>border-radius: npx 给元素添加圆角,px值越大元素越接近圆<br>值如果为百分比，则为盒子的宽度与高度的比值</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*设置一个值，那么作用于四个角*/</span></span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">15px</span>; </span><br><span class="line"><span class="comment">/*如果设置了两个值，第一个用于左上角和右下角，第二个用于右上角和左下角。*/</span></span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span> <span class="number">20px</span>;</span><br><span class="line"><span class="comment">/*四个值：左上角，右上角， 右下角，左下角*/</span> </span><br></pre></td></tr></table></figure>

<h4 id="椭圆角-50"><a href="#椭圆角-50" class="headerlink" title="椭圆角 50%"></a>椭圆角 50%</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">50px</span> / <span class="number">15px</span>;</span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">15px</span> / <span class="number">50px</span>;</span><br><span class="line"><span class="comment">/* 椭圆形50% */</span></span><br><span class="line"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br></pre></td></tr></table></figure>
<p><img src="/./postImgs/cssImgs/css3-3.png" alt="百分比别人的笔记"></p>
<h3 id="边框图片-border-image"><a href="#边框图片-border-image" class="headerlink" title="边框图片 border-image"></a>边框图片 border-image</h3><p>使用图片(border.png)作为边框</p>
<p>语法：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid transparent; <span class="comment">/* 设置一个基础边框 */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border-image-source</span>: <span class="built_in">url</span>(<span class="string">border.png</span>); <span class="comment">/* 图片路径 */</span></span><br><span class="line">  <span class="attribute">border-image-slice</span>: <span class="number">30</span> fill; <span class="comment">/* 裁剪 */</span></span><br><span class="line">  <span class="attribute">border-image-width</span>: <span class="number">10px</span>; <span class="comment">/* 边框宽度 */</span></span><br><span class="line">  <span class="attribute">border-image-outset</span>: <span class="number">0</span>; <span class="comment">/* 默认值，边框向外扩展 */</span></span><br><span class="line">  <span class="attribute">border-image-repeat</span>: stretch; <span class="comment">/* 平铺方式 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简写形式（常用）:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">10px</span> solid transparent;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">border-image</span>: <span class="built_in">url</span>(<span class="string">border.png</span>) <span class="number">30</span> fill / <span class="number">10px</span> stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>理解属性：</p>
<ul>
<li>border-image-slice<br>这是最重要的属性之一，因为它决定了如何切割图像。假设你的图像是一个正方形，并且你想让它作为边框使用，那么你需要指定从每一边裁剪掉多少像素。如果图像尺寸为100x100像素，并设置 border-image-slice: 30;，则图像会被分成9部分：顶部、底部、左侧、右侧各30像素宽&#x2F;高，中心区域为40x40像素。</li>
<li>border-image-repeat<br>决定了边框图像在边缘上的表现方式。stretch 会拉伸图像以填充空间；repeat 会简单地重复图像，可能导致不连续的效果；而 round 则会自动调整图像大小，图片会尽可能地重复以填满边框区域完整且均匀分布。</li>
</ul>
<p>感觉还是好难理解呢，下面是代码和对应图片例子：<br><img src="/./postImgs/cssImgs/css3-1.png" alt="边框图片"><br><img src="/./postImgs/cssImgs/css3-2.png" alt="边框图片"></p>
<p>定义中间部分是重复还是拉伸 <code>border-image: url(border.png) 30 stretch拉伸中间图片作为边框|round重复填充中间图片作为边框;</code></p>
<blockquote>
<p>该属性分为三个部分：<br>要用作边框的图像(“border.png”);<br>在何处对图像进行切片;<br><a href="https://www.w3schools.com/css/css3_border_images.asp">比较好的官方文档</a></p>
</blockquote>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><h3 id="背景图片background-image"><a href="#背景图片background-image" class="headerlink" title="背景图片background-image"></a>背景图片background-image</h3><p>不同的背景图像和图像用逗号隔开</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#example1</span> &#123; </span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">img_flwr.gif</span>), <span class="built_in">url</span>(<span class="string">paper.gif</span>); </span><br><span class="line">    <span class="attribute">background-position</span>: right bottom, left top; </span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat, repeat; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以给不同的图片设置多个不同的属性</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#example1</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">img_flwr.gif</span>) right bottom no-repeat, <span class="built_in">url</span>(<span class="string">paper.gif</span>) left top repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其他<br>background-image：设置背景图片。<br>background-repeat：控制背景图片的重复方式。<br>background-size：控制背景图片的大小。<br>background-position：控制背景图片的位置。<br>background-attachment：控制背景图片是否随页面滚动</p>
</blockquote>
<h4 id="背景填充方式-background-repeat-css2"><a href="#背景填充方式-background-repeat-css2" class="headerlink" title="背景填充方式 background-repeat(css2)"></a>背景填充方式 background-repeat(css2)</h4><p>控制背景图片的重复方式<br>repeat：默认值，背景图片在水平和垂直方向上重复。<br>no-repeat：背景图片不重复。<br>repeat-x：背景图片在水平方向上重复。<br>repeat-y：背景图片在垂直方向上重复。</p>
<h4 id="是否随页面滚动background-attachment（css2）"><a href="#是否随页面滚动background-attachment（css2）" class="headerlink" title="是否随页面滚动background-attachment（css2）"></a>是否随页面滚动background-attachment（css2）</h4><p>scroll：默认值，背景图片随页面滚动<br>fixed：背景图片固定在视口中，不随页面滚动</p>
<h4 id="背景大小-background-size"><a href="#背景大小-background-size" class="headerlink" title="背景大小 background-size"></a>背景大小 background-size</h4><p>小可以用长度、百分比指定，也可以使用两者之一 关键词：auto：默认值，图片保持原始大小。<br>cover：图片会缩放以覆盖整个元素，可能会裁剪图片。<br>contain：图片会缩放以适应元素，不会裁剪图片。<br><code>length或percentage</code>：指定图片的具体宽度和高度<br><img src="/./postImgs/cssImgs/css3-6.png" alt="background-size 属性"></p>
<h4 id="背景图像的区域-background-origin"><a href="#背景图像的区域-background-origin" class="headerlink" title="背景图像的区域 background-origin"></a>背景图像的区域 background-origin</h4><p>background-origin属性指定了背景图像的位置区域。<br>content-box, padding-box,和 border-box区域内可以放置背景图像。<br><img src="/./postImgs/cssImgs/css3-5.png" alt="background-origin 属性"><br><img src="/./postImgs/cssImgs/css3-4.png" alt="background-origin 属性"></p>
<h4 id="多背景图片"><a href="#多背景图片" class="headerlink" title="多背景图片"></a>多背景图片</h4><p>可以为一个元素设置多个背景图像，每个图像可以通过逗号分隔指定。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">img1.png</span>), <span class="built_in">url</span>(<span class="string">img2.png</span>);</span><br><span class="line">  <span class="attribute">background-position</span>: right bottom, left top;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat, repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h4><p>要求：用图像填充整个页面（无空白）；根据需要缩放图像；页面上的居中图像；不会导致滚动条</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">img_man.jpg</span>) no-repeat center fixed;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h2><p>线性渐变 (linear-gradient) 和 径向渐变 (radial-gradient)；<br>盒阴影 (box-shadow) 和 文本阴影 (text-shadow)</p>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><h4 id="RGBA颜色"><a href="#RGBA颜色" class="headerlink" title="RGBA颜色"></a>RGBA颜色</h4><p>A：alpha 参数是一个介于 0.0 之间的数字 （完全透明）和 1.0（完全不透明）</p>
<h4 id="HSLA-颜色"><a href="#HSLA-颜色" class="headerlink" title="HSLA 颜色"></a>HSLA 颜色</h4><p>HSL 代表色相、饱和度和亮度</p>
<ul>
<li>色相是色轮上的度数（从 0 到 360）：</li>
<li><ul>
<li>0（或 360）为红色</li>
</ul>
</li>
<li><ul>
<li>120 为绿色</li>
</ul>
</li>
<li><ul>
<li>240 是蓝色</li>
</ul>
</li>
<li>饱和度是一个百分比值：100% 是全色。</li>
<li>亮度也是一个百分比;0% 为深色（黑色），100% 为白色。<br>A：alpha 参数是一个介于 0.0 之间的数字 （完全透明）和 1.0（完全不透明）</li>
</ul>
<h4 id="不透明度opacity"><a href="#不透明度opacity" class="headerlink" title="不透明度opacity"></a>不透明度opacity</h4><p>opacity属性值必须是介于 0.0 （完全透明） 和 1.0 （完全不透明） 之间的数字</p>
<h3 id="渐变-线性渐变"><a href="#渐变-线性渐变" class="headerlink" title="渐变-线性渐变"></a>渐变-线性渐变</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(direction, color-stop1, color-stop2, ...);</span><br></pre></td></tr></table></figure>
<ul>
<li>第一个值是减白拿的方向</li>
<li><ul>
<li>如果您想对渐变的方向进行更多控制， 您可以定义一个角度，而不是预定义的方向（到 Bottom、到 top、to right、to left、to lower right 等）。值 0deg 相当于 “到顶部”。值 90deg 等效于 “to right”。值 180 度相当于 “to bottom”。</li>
</ul>
</li>
<li><ul>
<li>默认从上到下（此时direction可以不写）</li>
</ul>
</li>
<li><ul>
<li>从左到右to right</li>
</ul>
</li>
<li><ul>
<li>对角线，左上到右下to bottom right</li>
</ul>
</li>
<li><ul>
<li>使用角度 180°（从上到下）180deg</li>
</ul>
</li>
<li>后面的值是色标，≥2个颜色进行渐变<br><img src="/./postImgs/cssImgs/css3-7.png" alt="渐变角度图"></li>
</ul>
<h4 id="使用透明度（transparent）"><a href="#使用透明度（transparent）" class="headerlink" title="使用透明度（transparent）"></a>使用透明度（transparent）</h4><p>用于创建减弱变淡的效果，做法把颜色编程带有透明度的颜色即可，如</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>), <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="重复的线性渐变函数"><a href="#重复的线性渐变函数" class="headerlink" title="重复的线性渐变函数"></a>重复的线性渐变函数</h4><p>repeating-linear-gradient() 函数用于重复线性渐变：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="comment">/* 标准的语法 */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-linear-gradient</span>(red, yellow <span class="number">10%</span>, green <span class="number">20%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="渐变-径向渐变"><a href="#渐变-径向渐变" class="headerlink" title="渐变-径向渐变"></a>渐变-径向渐变</h3><p>径向渐变由其中心定义，默认情况下，形状为椭圆，大小为最远角，位置为中心</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(shape size at position, start-color, ..., last-color);</span><br></pre></td></tr></table></figure>
<p><img src="/./postImgs/cssImgs/css3-8.png" alt="渐变-径向渐变"></p>
<h3 id="渐变-圆锥渐变"><a href="#渐变-圆锥渐变" class="headerlink" title="渐变-圆锥渐变"></a>渐变-圆锥渐变</h3><p>（看文档吧）</p>
<h2 id="阴影"><a href="#阴影" class="headerlink" title="阴影"></a>阴影</h2><h3 id="文本阴影text-shadow"><a href="#文本阴影text-shadow" class="headerlink" title="文本阴影text-shadow"></a>文本阴影text-shadow</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-shadow</span>: h-offset v-offset blur-radius color;</span><br></pre></td></tr></table></figure>
<ul>
<li>h-offset：水平偏移量，正值向右偏移，负值向左偏移。</li>
<li>v-offset：垂直偏移量，正值向下偏移，负值向上偏移。</li>
<li>blur-radius：模糊半径，值越大，阴影越模糊。可以省略，省略时默认为 0。</li>
<li>color：阴影的颜色，可以是任何有效的 CSS 颜色值（如 #ff0000、red、rgba(255, 0, 0, 0.5) 等）。可以省略，省略时默认为黑色</li>
</ul>
<h4 id="常见效果"><a href="#常见效果" class="headerlink" title="常见效果"></a>常见效果</h4><ul>
<li>简单阴影：text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);</li>
<li>内阴影：text-shadow: -2px -2px 4px rgba(0, 0, 0, 0.5);</li>
<li>彩色阴影：text-shadow: 2px 2px 4px blue</li>
<li>文字边框<br>可以使用 text-shadow 属性在周围创建普通边框 一些文本（无阴影）：<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: coral;</span><br><span class="line">  <span class="attribute">text-shadow</span>: -<span class="number">1px</span> <span class="number">0</span> black, <span class="number">0</span> <span class="number">1px</span> black, <span class="number">1px</span> <span class="number">0</span> black, <span class="number">0</span> -<span class="number">1px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>多重阴影<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>:</span><br><span class="line">        <span class="number">2px</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>),</span><br><span class="line">        -<span class="number">2px</span> -<span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="文本溢出text-overflow属性"><a href="#文本溢出text-overflow属性" class="headerlink" title="文本溢出text-overflow属性"></a>文本溢出text-overflow属性</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">selector &#123;</span><br><span class="line">  <span class="attribute">text-overflow</span>: clip | ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>clip：默认值，直接裁剪文本，不添加任何指示符。<br>ellipsis：显示省略号（…）来表示被裁剪掉的文本。</p>
<p>为了使 text-overflow 生效，通常需要设置以下属性：</p>
<ul>
<li>white-space: 控制如何处理元素内的空白字符。</li>
<li>常用的值有：nowrap: 强制在同一行内显示所有文本，不允许换行。</li>
<li>overflow: 必须设置为 hidden 或其他非 visible 的值，以便隐藏超出容器部分的内容。<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  这是一个非常长的文本示例，它将超出其父容器的边界...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; <span class="comment">/* 设置一个固定的宽度 */</span></span><br><span class="line">  <span class="attribute">white-space</span>: nowrap; <span class="comment">/* 防止文本换行 */</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden; <span class="comment">/* 隐藏超出容器的内容 */</span></span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis; <span class="comment">/* 使用省略号表示被裁剪的文本 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="盒阴影-box-shadow"><a href="#盒阴影-box-shadow" class="headerlink" title="盒阴影 box-shadow"></a>盒阴影 box-shadow</h3><p>CSS3文本溢出属性指定应向用户如何显示溢出内容<br>如果多个阴影，通过逗号分隔多个阴影值</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">box-shadow</span>: h-offset v-offset blur-radius spread-radius color;</span><br></pre></td></tr></table></figure>
<ul>
<li>h-offset：水平偏移量，正值向右偏移，负值向左偏移。</li>
<li>v-offset：垂直偏移量，正值向下偏移，负值向上偏移。</li>
<li>blur-radius：模糊半径，值越大，阴影越模糊。可以省略，省略时默认为 0。</li>
<li>spread-radius：扩展半径，正值会扩大阴影的大小，负值会缩小阴影的大小。可以省略，省略时默认为 0。</li>
<li>color：阴影的颜色，可以是任何有效的 CSS 颜色值（如 #ff0000、red、rgba(255, 0, 0, 0.5) 等）。可以省略，省略时默认为黑色。</li>
</ul>
<h4 id="常见效果："><a href="#常见效果：" class="headerlink" title="常见效果："></a>常见效果：</h4><p>简单阴影：box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);<br>内阴影：box-shadow: <strong>inset</strong> 2px 2px 4px rgba(0, 0, 0, 0.5);<br>多重阴影：box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), -2px -2px 4px rgba(255, 255, 255, 0.5);<br>彩色阴影：box-shadow: 2px 2px 4px blue;<br>扩展阴影：box-shadow: 2px 2px 4px 2px rgba(0, 0, 0, 0.5);</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>文本阴影和盒阴影的内阴影和多重阴影不要搞混</p>
<ul>
<li>内阴影（不一样）</li>
<li><ul>
<li>文本：text-shadow: -2px -2px 4px rgba(0, 0, 0, 0.5);</li>
</ul>
</li>
<li><ul>
<li>盒子：内阴影：box-shadow: <strong>inset</strong> 2px 2px 4px rgba(0, 0, 0, 0.5);</li>
</ul>
</li>
<li>多重阴影（一样的）</li>
<li><ul>
<li>文本：text-shadow:<br>2px 2px 4px rgba(0, 0, 0, 0.5),<br>-2px -2px 4px rgba(255, 255, 255, 0.5);</li>
</ul>
</li>
<li><ul>
<li>盒子：多重阴影：box-shadow:<br> 2px 2px 4px rgba(0, 0, 0, 0.5),<br> -2px -2px 4px rgba(255, 255, 255, 0.5);</li>
</ul>
</li>
</ul>
<h2 id="2D与3D变换"><a href="#2D与3D变换" class="headerlink" title="2D与3D变换"></a>2D与3D变换</h2><p>2D 变形</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50px</span>, <span class="number">100px</span>) <span class="built_in">rotate</span>(<span class="number">45deg</span>) <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">1000px</span>; <span class="comment">/* 3D 透视 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">45deg</span>) <span class="built_in">rotateY</span>(<span class="number">30deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="过渡与动画"><a href="#过渡与动画" class="headerlink" title="过渡与动画"></a>过渡与动画</h2><h3 id="过渡transition（常搭配-hover）"><a href="#过渡transition（常搭配-hover）" class="headerlink" title="过渡transition（常搭配:hover）"></a>过渡transition（常搭配:hover）</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transition</span>: property duration timing-function delay;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>property：指定需要过渡的CSS属性，如background-color、width、height等。可以使用all表示所有属性。</p>
</li>
<li><p>duration：过渡的持续时间，单位为秒（s）或毫秒（ms）。</p>
</li>
<li><p>timing-function：过渡的动画曲线，常见的值有ease(默认)、linear、ease-in、ease-out、ease-in-out,或者使用 cubic-bezier() 自定义曲线</p>
</li>
<li><p>delay：过渡的延迟时间，单位为秒（s）或毫秒（ms）（可选，默认为 0s）</p>
</li>
<li><p>过渡是一个状态，定义元素从一种样式变换到另一种样式的过渡效果</p>
</li>
<li><p>transition:要过渡的属性 花费时间 运动曲线 何时开始;</p>
</li>
<li><p>属性：如宽度高度背景颜色，如果想要所有的属性都变化过渡，写一个all<br>花费时间：必须写单位，如1.5s<br>运动曲线 默认ease，可以省略<br>何时开始：必须写单位，默认0s,可以省略</p>
</li>
<li><p>如果多个属性逗号分隔，如<br>div{<br>width:200px;<br>height:100px;<br>background-color:red;<br>transition:width 0.6s,height 0.6s;<br>或transition:all 0.6s;<br>}</p>
</li>
</ul>
<h3 id="动画-keyframes-animation-：创建复杂的动画序列"><a href="#动画-keyframes-animation-：创建复杂的动画序列" class="headerlink" title="动画 (@keyframes + animation)：创建复杂的动画序列"></a>动画 (@keyframes + animation)：创建复杂的动画序列</h3><p>动画比过渡更强大，允许你定义复杂的多步骤动画序列，而不仅仅是在两个状态之间进行过渡。动画通过关键帧（@keyframes）来定义动画的不同阶段</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> slidein &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300%</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">0%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">然后，在需要应用动画的元素上引用这些关键帧：</span><br><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">animation-name</span>: slidein;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-timing-function</span>: ease-in-out;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">1s</span>;</span><br><span class="line">  <span class="attribute">animation-iteration-count</span>: infinite; <span class="comment">/* 可选，默认为1次 */</span></span><br><span class="line">  <span class="attribute">animation-direction</span>: alternate; <span class="comment">/* 可选，默认为normal */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>animation-name：定义的@keyframes动画名称。</li>
<li>duration：动画的持续时间。</li>
<li>timing-function：动画的动画曲线。</li>
<li>delay：动画的延迟时间。</li>
<li>iteration-count：动画的播放次数，infinite表示无限<br>循环。</li>
<li>direction：动画的播放方向，normal（默认值）、reverse、alternate、alternate-reverse。</li>
<li>fill-mode：动画结束后的状态，none（默认值）、forwards、backwards、both。</li>
</ul>
<h2 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h2><p>媒体查询允许你根据设备的特性（如屏幕宽度、高度、方向等）应用不同的CSS样式。这使得你可以为不同的设备（如桌面、平板、手机）提供优化的用户体验</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> media-type <span class="keyword">and</span> (media-feature) &#123;</span><br><span class="line">    <span class="comment">/* CSS规则 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>media-type：指定媒体类型</li>
<li><ul>
<li>如screen（屏幕）、print（打印）、all（所有设备）等。</li>
</ul>
</li>
<li>media-feature：指定媒体特性</li>
<li><ul>
<li>width：设备屏幕的宽度。</li>
</ul>
</li>
<li><ul>
<li>height：设备屏幕的高度。</li>
</ul>
</li>
<li><ul>
<li>orientation：设备的方向，portrait（竖屏）或landscape（横屏）。</li>
</ul>
</li>
<li><ul>
<li>aspect-ratio：设备屏幕的宽高比。</li>
</ul>
</li>
<li><ul>
<li>resolution：设备的分辨率。</li>
</ul>
</li>
</ul>
<h3 id="常用媒体特性"><a href="#常用媒体特性" class="headerlink" title="常用媒体特性"></a>常用媒体特性</h3><p><code>@media (max-width: 768px)&#123;&#125;</code>当屏幕宽度小于或等于 768px 时，应用大括号内的样式</p>
<ul>
<li>min-width 和 max-width：<br>min-width: 768px：当屏幕宽度 ≥ 768px 时生效。<br>max-width: 768px：当屏幕宽度 ≤ 768px 时生效。</li>
<li>orientation：<br>orientation: portrait：竖屏（高度 &gt; 宽度）。<br>orientation: landscape：横屏（宽度 &gt; 高度）。</li>
<li>resolution：<br>min-resolution: 2dppx：针对高分辨率屏幕（如 Retina 屏）</li>
</ul>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="字体图标"><a href="#字体图标" class="headerlink" title="字体图标"></a>字体图标</h2><p><code>&lt;i class=&quot;fas fa-star&quot;&gt;&lt;/i&gt;</code><!-- 引入 Font Awesome 库后使用 --></p>
<h2 id="滤镜filter"><a href="#滤镜filter" class="headerlink" title="滤镜filter"></a>滤镜filter</h2><p>filter:函数(npx)<br>如filter:blur(5px) 模糊处理函数blur()，n越大模糊程度越大（变虚变近视）</p>
<h2 id="calc函数"><a href="#calc函数" class="headerlink" title="calc函数"></a>calc函数</h2><p>calc()函数在声明css属性时执行一些计算<br>如width:calc(100%-80px);</p>
<h1 id="学习文档"><a href="#学习文档" class="headerlink" title="学习文档"></a>学习文档</h1><p><a href="https://www.w3schools.com/css/css3_borders.asp">css进阶学习文档</a><br><a href="https://www.runoob.com/css3/css3-borders.html">css3菜鸟教程</a></p>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>过渡与动画</tag>
        <tag>媒体查询</tag>
      </tags>
  </entry>
  <entry>
    <title>flex布局？拿下！</title>
    <url>/2025/01/16/02-flex/</url>
    <content><![CDATA[<h1 id="理解flex弹性盒子布局"><a href="#理解flex弹性盒子布局" class="headerlink" title="理解flex弹性盒子布局"></a>理解flex弹性盒子布局</h1><h2 id="初步理解"><a href="#初步理解" class="headerlink" title="初步理解"></a>初步理解</h2><p>Flex布局是一种一维的布局模型，一次只能处理一个维度上的元素布局，一行或者一列。它旨在为容器中的项目提供更有效的对齐和分配空间的方式，解决传统布局方法中的许多问题，如垂直居中、等宽元素等。<br>伸缩布局 &#x3D; 弹性布局 &#x3D; 伸缩盒布局 &#x3D; 弹性盒布局 &#x3D;flex布局</p>
<p>主要思想是使父元素能够调整子元素的宽度、高度、排列方式，从而更好的适应可用的布局空间。设定为flex布局的元素能够放大子元素使之尽可能填充可用空间，也可以收缩子元素使之不溢出。</p>
<p>主流浏览器都支持Flex布局，已经几乎不存在版本兼容问题</p>
<blockquote>
<p>Webkit内核的浏览器，必须加上-webkit前缀。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="弹性盒特点"><a href="#弹性盒特点" class="headerlink" title="弹性盒特点"></a>弹性盒特点</h2><p>弹性布局具有以下特点：<br>行内元素也可以使用Flex布局。<br>注意，设为Flex布局以后，子元素的float、clear和vertical-align属性将失效。<br>主轴与交叉轴：弹性容器具有主轴（main axis）和交叉轴（cross axis）。默认情况下，主轴是水平方向，交叉轴是垂直方向。<br>弹性容器：通过将父元素的display属性设置为flex或inline-flex来创建弹性容器。<br>子元素的弹性项目：弹性容器中的每个子元素都成为弹性项目。子元素可以指定各自在主轴和交叉轴上的大小、顺序以及对齐方式等。<br>主轴对齐：弹性项目可以在主轴上按照一定比例分配空间，也可以使用justify-content属性定义主轴的对齐方式。<br>交叉轴对齐：弹性项目可以在交叉轴上进行对齐，包括顶部对齐、底部对齐、居中对齐等，使用align-items属性定义交叉轴对齐方式。<br>换行与自动调整：可控制弹性项目是否换行，并且具备自动调整元素大小的能力。</p>
<h1 id="Flex布局"><a href="#Flex布局" class="headerlink" title="Flex布局"></a>Flex布局</h1><h2 id="使用原理"><a href="#使用原理" class="headerlink" title="使用原理"></a>使用原理</h2><p>Flex布局必须有父盒子，给父元素设置 display :flex 弹性容器为块级元素（或 inline-flex弹性容器为行内元素）<br>子元素会自动按照一定规则挤压或拉伸</p>
<ul>
<li>弹性盒子由弹性容器(父亲)和弹性盒子(子元素)，主轴和侧轴组成</li>
<li>主轴默认在水平方向，侧轴默认在垂直方向</li>
<li>弹性容器内包含了一个或多个弹性子元素。</li>
<li>弹性子元素通常在弹性盒子内一行显示。默认情况每个容器只有一行</li>
<li>弹性容器外及弹性子元素内是正常渲染的。弹性盒子只定义了弹性子元素如何在弹性容器内布局</li>
<li>默认情况主轴内容撑开，侧轴拉伸填充<blockquote>
<p>CSS3 弹性盒（ Flexible Box 或 flexbox），是一种当页面需要适应不同的屏幕大小以及设备类型时确保元素拥有恰当的行为的布局方式。<br>引入弹性盒布局模型的目的是提供一种更加有效的方式来对一个容器中的子元素进行排列、对齐和分配空白空间</p>
</blockquote>
</li>
</ul>
<h2 id="弹性盒基础"><a href="#弹性盒基础" class="headerlink" title="弹性盒基础"></a>弹性盒基础</h2><p>当一个元素开启flex布局之后，成为<strong>弹性容器（父元素）flex container</strong>。其所有<strong>子元素为flex items</strong>，每个子元素为 flex item；<br>容器默认存在两个轴：水平轴（main axis）和垂直轴（cross axis），项目默认沿主轴排列（水平轴）：</p>
<p><img src="/./postImgs/cssImgs/flex1.png" alt="flex布局属性图"></p>
<blockquote>
<p>main axis: Flex 父元素的主轴是指子元素布局的主要方向轴，它由属性flex-direction来确定主轴是水平还是垂直的，默认为水平轴。</p>
</blockquote>
<p>main-start &amp; main-end: 分别表示主轴的开始和结束，子元素在父元素中会沿着主轴从main-start到main-end排布。</p>
<p>main size: 单个项目占据主轴的长度大小。</p>
<p>cross axis: 交叉轴，与主轴垂直。</p>
<p>cross-start &amp; cross-end: 分别表示交叉轴的开始和结束。子元素在交叉轴的排布从cross-start开始到cross-end。</p>
<p>cross size: 子元素在交叉轴方向上的大小。</p>
<h2 id="容器属性（父元素属性）"><a href="#容器属性（父元素属性）" class="headerlink" title="容器属性（父元素属性）"></a>容器属性（父元素属性）</h2><h3 id="justify-content-设置主轴上的子元素排列方式"><a href="#justify-content-设置主轴上的子元素排列方式" class="headerlink" title="justify-content: 设置主轴上的子元素排列方式"></a><strong>justify-content</strong>: 设置主轴上的子元素排列方式</h3>   <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>   属性值：</p>
<ul>
<li>flex-start 默认值</li>
<li><ul>
<li>左对齐，从起点开始依次排列，如果主轴是x轴，则从左到右放子元素</li>
</ul>
</li>
<li>flex-end </li>
<li><ul>
<li>从尾部开始排列</li>
</ul>
</li>
<li>center </li>
<li><ul>
<li>让子盒子在主轴居中对齐，如果主轴是x轴则水平居中</li>
</ul>
</li>
<li><strong>space-between</strong></li>
<li><ul>
<li><strong>先两边贴边再平分剩余空间</strong></li>
</ul>
</li>
<li>space-evenly（下图未显示）</li>
<li><ul>
<li>左右两边和中间的空隙都相等(中间和两边间隙都是d)</li>
</ul>
</li>
<li>space-around</li>
<li><ul>
<li>每个子元素的两侧空隙相等，注意是每个的两侧，所以俩个子盒子中间的空隙是最左和最有空隙的两倍<br><img src="/./postImgs/cssImgs/flex2.png" alt="flex布局justify-content属性图"><br>**  记忆：两侧没缝隙space-between ；左右中间缝隙一样大space-evenly；中间是左右缝隙两倍缝隙space-around**</li>
</ul>
</li>
</ul>
<h3 id="align-items-设置侧轴上的子元素排列方式-单行"><a href="#align-items-设置侧轴上的子元素排列方式-单行" class="headerlink" title="align-items :设置侧轴上的子元素排列方式(单行)"></a>align-items :设置侧轴上的子元素排列方式(单行)</h3><p><strong>该属性是控制子项在侧轴（默认是y轴）上的排列方式在子项为单项的时候使用</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">align-items</span>: flex-start | flex-end | center | stretch | baseline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>flex-start：交叉轴的起点对齐</li>
<li>flex-end：交叉轴的终点对齐</li>
<li>center：交叉轴的中点对齐</li>
<li>stretch（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度</li>
<li>baseline: 项目的第一行文字的基线对齐<br> <img src="/./postImgs/cssImgs/flex4.png" alt="flex布局jalign-items属性图"></li>
</ul>
<h3 id="align-content-设置侧轴上的子元素的排列方式-多行"><a href="#align-content-设置侧轴上的子元素的排列方式-多行" class="headerlink" title="align-content:设置侧轴上的子元素的排列方式(多行)"></a>align-content:设置侧轴上的子元素的排列方式(多行)</h3><p><strong>align-content属性定义了多根轴线的对齐方式，若只有一根轴线的话，该属性将不会起作用</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>flex-start 默认值在侧轴的头部开始排列</li>
<li>flex-end：在侧轴的尾部开始排列</li>
<li>center：在侧轴中间显示</li>
<li>space-between：子项在侧轴先分布在两头,再平分剩余空间</li>
<li>space-around：子项在侧轴平分剩余空间</li>
<li>stretch：设置子项元素高度平分父元素高度，沿侧轴线拉伸至填满容器（父元素没有设置高度时默认拉伸）<br>   <img src="/./postImgs/cssImgs/flex3.png" alt="flex布局jalign-content属性图"></li>
</ul>
<h3 id="flex-direction-设置主轴的方向"><a href="#flex-direction-设置主轴的方向" class="headerlink" title="flex-direction :设置主轴的方向"></a>flex-direction :设置主轴的方向</h3>   <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">    <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>row默认值从左到右</li>
<li>row-reverse 从右到左</li>
<li><strong>column</strong>从上到下，把主轴改成垂直方向，常用</li>
<li>column-reverse 从下到上<br><img src="/./postImgs/cssImgs/flex-direction.png" alt="flex布局flex-direction属性图"></li>
</ul>
<h3 id="flex-wrap-设置子元素是否换行以及换行的方向"><a href="#flex-wrap-设置子元素是否换行以及换行的方向" class="headerlink" title="flex-wrap:设置子元素是否换行以及换行的方向"></a>flex-wrap:设置子元素是否换行以及换行的方向</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>nowrap（默认）：不换行</li>
<li>wrap：换行，第一行在上方。</li>
<li>wrap-reverse：换行，第一行在下方。</li>
<li>flex布局在浏览器宽度缩小后里面的最后一个盒子不会被挤下去到下面一行，而是他们都会自动缩小</li>
<li>flex-wrap 默认子元素不换行，默认都是排在一条轴线上，相当于隐含了这个代码 flex-wrap:nowrap；</li>
</ul>
<h3 id="flex-flow-复合属性"><a href="#flex-flow-复合属性" class="headerlink" title="flex-flow : 复合属性"></a>flex-flow : 复合属性</h3><p>相当于同时设置了flex-direction和flex-wrap<br>例如：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#pond</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">flex-direction</span>:column;</span><br><span class="line"><span class="attribute">flex-wrap</span>:wrap</span><br><span class="line">&#125;</span><br><span class="line">等同于</span><br><span class="line"><span class="selector-id">#pond</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">flex-flow</span>: column wrap</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="项目属性（子元素属性）"><a href="#项目属性（子元素属性）" class="headerlink" title="项目属性（子元素属性）"></a>项目属性（子元素属性）</h2><h3 id="flex属性"><a href="#flex属性" class="headerlink" title="flex属性"></a>flex属性</h3><p>  flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选</p>
<ul>
<li>定义子项目分配剩余空间！，用flex来表示占多少份数！</li>
<li>flex:数字;默认是0.，表示占用父级默认尺寸的份数</li>
<li>注意，和z-index不一样<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: none | [ &lt;<span class="string">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class="string">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class="string">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>该属性有两个快捷值：<code>auto (1 1 auto)</code> 和 <code>none (0 0 auto)</code><br>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值</p>
<h4 id="flex-1"><a href="#flex-1" class="headerlink" title="flex: 1"></a>flex: 1</h4><p>用于控制弹性容器中的子元素如何分配空间。</p>
<ul>
<li>flex-grow: 1<br>当容器中有剩余空间时，该元素会按比例放大，占据这些空间。如果所有子元素的 flex-grow 都为 1，它们将平均分配剩余空间。</li>
<li>flex-shrink: 1<br>指定弹性项目的收缩因子。<br>当容器空间不足时，该元素会按比例缩小。如果所有子元素的 flex-shrink 都为 1，它们在空间不足时会均匀地缩小。</li>
<li>flex-basis: 0%<br>指定弹性项目在分配剩余空间前的初始大小。<br>设置为 0% 意味着元素的初始大小不计入空间分配，完全由 flex-grow 和 flex-shrink 决定。</li>
<li>总结：<br>lex: 1 使元素能够根据容器的可用空间自动调整大小。<br>元素会尽可能地扩展以填充剩余空间，并在空间不足时均匀收缩。<br>常用于创建等宽列布局或使某个元素占据容器的全部剩余空间。</li>
</ul>
<h3 id="order属性"><a href="#order属性" class="headerlink" title="order属性"></a>order属性</h3><p>   order属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  <img src="/./postImgs/cssImgs/flex5.png" alt="flex布局order属性图"></p>
<h3 id="align-self-控制单个子项自己在侧轴上的对齐方式"><a href="#align-self-控制单个子项自己在侧轴上的对齐方式" class="headerlink" title="align-self 控制单个子项自己在侧轴上的对齐方式"></a>align-self 控制单个子项自己在侧轴上的对齐方式</h3><p>  这个属性允许单个项目有与其他项目不一样的对齐方式，<strong>覆盖容器的 align-items 设置</strong>。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，等同于stretch。</p>
<p>该属性可能取6个值，除了auto，其他都与align-items属性完全一致</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">  <span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>默认值为auto，表示继承父元素的align-items属性，如果没有父元素就等同于stretch<br><img src="/./postImgs/cssImgs/flex6.png" alt="flex布局align-self属性图"></li>
</ul>
<h3 id="flex-grow属性"><a href="#flex-grow属性" class="headerlink" title="flex-grow属性"></a>flex-grow属性</h3><p>flex-grow属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>![flex布局flex-grow属性图](./postImgs/cssImgs/flex7.png)
</code></pre>
<p>如果所有项目的flex-grow属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的flex-grow属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</p>
<h3 id="flex-shrink属性"><a href="#flex-shrink属性" class="headerlink" title="flex-shrink属性"></a>flex-shrink属性</h3><p>flex-shrink属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p>
<p>如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小<strong>（负值对该属性无效）</strong>。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* 默认为 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>![flex布局flex-shrink属性图](./postImgs/cssImgs/flex8.png)
</code></pre>
<h3 id="flex-basis属性"><a href="#flex-basis属性" class="headerlink" title="flex-basis属性"></a>flex-basis属性</h3><p>flex-basis属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* 默认为 auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="高频属性"><a href="#高频属性" class="headerlink" title="高频属性"></a>高频属性</h2><p>容器属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row | column;     <span class="comment">/* 主轴方向 */</span></span><br><span class="line">  <span class="attribute">justify-content</span>: center | space-between; <span class="comment">/* 主轴对齐 */</span></span><br><span class="line">  <span class="attribute">align-items</span>: center | stretch;    <span class="comment">/* 交叉轴对齐 */</span></span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;                  <span class="comment">/* 换行 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>项目属性:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;                          <span class="comment">/* 等价于 flex-grow: 1 */</span></span><br><span class="line">  <span class="attribute">align-self</span>: flex-end;             <span class="comment">/* 单个项目对齐 */</span></span><br><span class="line">  <span class="attribute">order</span>: <span class="number">2</span>;                         <span class="comment">/* 调整顺序 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="经典布局："><a href="#经典布局：" class="headerlink" title="经典布局："></a>经典布局：</h2><h2 id="圣杯布局：三栏布局（两侧固定，中间自适应）瀑布流：flex-wrap-wrap-flex-1-0-200px"><a href="#圣杯布局：三栏布局（两侧固定，中间自适应）瀑布流：flex-wrap-wrap-flex-1-0-200px" class="headerlink" title="圣杯布局：三栏布局（两侧固定，中间自适应）瀑布流：flex-wrap: wrap + flex: 1 0 200px"></a>圣杯布局：三栏布局（两侧固定，中间自适应）<br>瀑布流：flex-wrap: wrap + flex: 1 0 200px</h2><h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><p><a href="https://flexboxfroggy.com/">flex青蛙练习</a><br>  <img src="/./postImgs/cssImgs/flex9.png" alt="flex布局练习"></p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p>这篇博客我结合了MDN web文档，菜鸟编程-flex篇，AI解答和以下博主的理解：<br>[1]本文参考了菜鸟编程-flex布局语法教程篇<a href="https://www.runoob.com/w3cnote/flex-grammar.html">菜鸟编程</a><br>[2]本文参考了csdn作者<a href="https://blog.csdn.net/Cwd_wade/article/details/100692612?fromshare=blogdetail&sharetype=blogdetail&sharerId=100692612&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link">陈y_d</a>的flex布局文章<br>[3]本文参考了csdn作者<a href="https://blog.csdn.net/weixin_48998573/article/details/131240067?fromshare=blogdetail&sharetype=blogdetail&sharerId=131240067&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link">奶糖 肥晨</a>的flex布局文章<br>[4]同类好文章还有csdn作者<a href="https://blog.csdn.net/qq_74114417/article/details/143656069?fromshare=blogdetail&sharetype=blogdetail&sharerId=143656069&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link">Hopebearer_</a>的flex布局文章</p>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>flex布局</tag>
      </tags>
  </entry>
  <entry>
    <title>css-题目</title>
    <url>/2025/01/15/02-css%E9%A2%98/</url>
    <content><![CDATA[<h1 id="基础知识点快速回忆："><a href="#基础知识点快速回忆：" class="headerlink" title="基础知识点快速回忆："></a>基础知识点快速回忆：</h1><h3 id="CSS选择器："><a href="#CSS选择器：" class="headerlink" title="CSS选择器："></a>CSS选择器：</h3><p>元素选择器、类选择器（.class）、ID选择器（#id）、后代选择器、子元素选择器（&gt;）、兄弟选择器（+ 和 ~）、伪类选择器（如:hover、:first-child）等</p>
<h3 id="display属性："><a href="#display属性：" class="headerlink" title="display属性："></a>display属性：</h3><p>值包括none、block、inline、inline-block、flex、grid等</p>
<h3 id="盒模型（Box-Model）："><a href="#盒模型（Box-Model）：" class="headerlink" title="盒模型（Box Model）："></a>盒模型（Box Model）：</h3><p>内容（content）、内边距（padding）、边框（border）、外边距（margin）</p>
<h3 id="响应式设计："><a href="#响应式设计：" class="headerlink" title="响应式设计："></a>响应式设计：</h3><p>使用媒体查询（Media Queries）、相对单位（em&#x2F;rem）、弹性盒子（Flexbox）和网格系统（Grid）实现。</p>
<h3 id="Flexbox与Grid布局："><a href="#Flexbox与Grid布局：" class="headerlink" title="Flexbox与Grid布局："></a>Flexbox与Grid布局：</h3><p>Flexbox适合单一轴线布局，Grid适合复杂的二维布局。</p>
<h3 id="清除浮动（Clearfix）："><a href="#清除浮动（Clearfix）：" class="headerlink" title="清除浮动（Clearfix）："></a>清除浮动（Clearfix）：</h3><p>方法包括使用overflow: auto;或::after伪元素。</p>
<h3 id="BEM命名方法："><a href="#BEM命名方法：" class="headerlink" title="BEM命名方法："></a>BEM命名方法：</h3><p>一种保持CSS选择器结构清晰和可维护性的命名约定。</p>
<h3 id="position属性："><a href="#position属性：" class="headerlink" title="position属性："></a>position属性：</h3><p>包括static、relative、absolute、fixed、sticky</p>
<h3 id="水平垂直居中："><a href="#水平垂直居中：" class="headerlink" title="水平垂直居中："></a>水平垂直居中：</h3><p>可以使用Flexbox的align-items和justify-content属性，或者绝对定位结合transform属性。</p>
<h3 id="CSS3动画："><a href="#CSS3动画：" class="headerlink" title="CSS3动画："></a>CSS3动画：</h3><p>使用@keyframes定义动画的关键帧，然后通过animation属性应用到元素上。</p>
<h3 id="box-sizing属性："><a href="#box-sizing属性：" class="headerlink" title="box-sizing属性："></a>box-sizing属性：</h3><p>定义了如何计算元素的总宽度和高度<br>值有content-box和border-box</p>
<h3 id="CSS预处理器："><a href="#CSS预处理器：" class="headerlink" title="CSS预处理器："></a>CSS预处理器：</h3><p>如Sass、Less，允许使用变量、混合、函数等编程特性。<br>优化CSS性能：<br>减少选择器复杂度，避免过度层叠和继承，合理使用CSS3的GPU加速特性。</p>
<h3 id="层叠和继承："><a href="#层叠和继承：" class="headerlink" title="层叠和继承："></a>层叠和继承：</h3><p>层叠是指样式根据权重叠加到元素上，继承是指子元素继承父元素的样式。</p>
<h3 id="多列布局："><a href="#多列布局：" class="headerlink" title="多列布局："></a>多列布局：</h3><p>使用CSS3的多列布局相关属性如column-count、column-gap、column-rule。</p>
<h3 id="事件冒泡和事件捕获："><a href="#事件冒泡和事件捕获：" class="headerlink" title="事件冒泡和事件捕获："></a>事件冒泡和事件捕获：</h3><p>分别是事件从子元素向父元素传递的过程，和从父元素向子元素传递的过程。</p>
<h3 id="圆角（border-radius）："><a href="#圆角（border-radius）：" class="headerlink" title="圆角（border-radius）："></a>圆角（border-radius）：</h3><p>使用该属性并提供像素值或百分比来实现。</p>
<h3 id="伪类和伪元素的区别："><a href="#伪类和伪元素的区别：" class="headerlink" title="伪类和伪元素的区别："></a>伪类和伪元素的区别：</h3><p>伪类用于添加特殊状态下的样式，伪元素用于创建特殊效果。</p>
<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><h2 id="标准盒模型与怪异盒模型ie的区别及如何切换"><a href="#标准盒模型与怪异盒模型ie的区别及如何切换" class="headerlink" title="标准盒模型与怪异盒模型ie的区别及如何切换"></a>标准盒模型与怪异盒模型ie的区别及如何切换</h2><p>标准盒模型中，设置 width: 100px，实际内容区域是 100px，而 padding 和 border 会额外增加宽度；<br>怪异盒模型则把 padding 和 border 算进 width 里，更适合现代布局。<br>通过 box-sizing 属性切换，默认是 content-box，但很多框架（比如 Bootstrap）会全局设置为 border-box 来简化计算</p>
<h2 id="Less-Sass"><a href="#Less-Sass" class="headerlink" title="Less&#x2F;Sass"></a>Less&#x2F;Sass</h2><p>都是css的预处理器，允许用更强大的语法编写css，然后编译成浏览器 能够识别的普通css<br>允许变量复用、函数计算、可以嵌套（比如多层选择器时）、代码组织。 </p>
<ul>
<li>less： @，客户端编译，轻量级，不可以嵌套属性，不可以@extend,能Mixin，社区生态小，已停止更新</li>
<li>sass：&amp;，服务器编译，功能强大，可以嵌套属性，可以@extend集成，有很多第三方库，持续更新中</li>
</ul>
<h3 id="原生-CSS-的痛点："><a href="#原生-CSS-的痛点：" class="headerlink" title="原生 CSS 的痛点："></a>原生 CSS 的痛点：</h3><p>  写重复样式麻烦（比如多个按钮颜色统一修改）、嵌套层级难管理（比如  .container .header .nav  写起来长）、没有变量和函数概念。</p>
<ul>
<li>scoped 属性：<br> .vue  文件中 <code> &lt;style scoped&gt;</code>  会自动给样式加唯一属性选择器（如  data-v-xxx ），避免组件样式冲突。语法差异：Less 更简单，Sass 更灵活</li>
<li>变量定义：<br>Less：用  @  符号，比如  @width: 100px; <br>Sass：用  $  符号，比如  $width: 100px;</li>
<li>核心价值</li>
<li>提升开发效率：变量改一次全项目生效，混合类复用代码</li>
<li>优化代码结构：嵌套写法让样式和 HTML 结构对应，更容易维护</li>
<li>与 Vue3 无缝结合：scoped 保证样式隔离，预处理器让组件样式更模块化</li>
</ul>
<h3 id="Sass-中-extend-和-mixin-的区别？"><a href="#Sass-中-extend-和-mixin-的区别？" class="headerlink" title="Sass 中 @extend 和 @mixin 的区别？"></a>Sass 中 @extend 和 @mixin 的区别？</h3><p>@extend 复用选择器，生成组合样式。<br>@mixin 复用代码块，生成重复样式</p>
<h2 id="如何优化-CSS-性能？"><a href="#如何优化-CSS-性能？" class="headerlink" title="如何优化 CSS 性能？"></a>如何优化 CSS 性能？</h2><p>关键措施：<br>减少选择器复杂度：避免深层嵌套（如 body div ul li a）<br>避免行内样式：影响缓存和维护性<br>减少重排（reflow）和重绘（repaint）：<br>批量修改样式（先修改再应用）<br>使用 transform 和 opacity 进行动画（触发合成层）<br>压缩和分割 CSS：减小文件体积，利用浏览器并行加载</p>
<h2 id="flex-1什么意思"><a href="#flex-1什么意思" class="headerlink" title="flex:1什么意思"></a>flex:1什么意思</h2><p>flex: 1是个缩写，展开来是flex-grow: 1、flex-shrink: 1、flex-basis: 0<br>用于控制弹性容器中的子元素如何分配空间。</p>
<ul>
<li>flex-grow: 1<br>表示元素会主动扩张，当容器中有剩余空间时，该元素会按比例放大，占据这些空间。<br>如果所有子元素的flex-grow都为1，它们将平均分配剩余空间。</li>
<li>flex-shrink: 1<br>表示空间不足时，元素会同等缩小。<br>如果所有子元素的 flex-shrink都为1，它们在空间不足时会均匀地缩小。</li>
<li>flex-basis: 0%<br>指定弹性项目在分配剩余空间前的初始大小。<br>设置为0% 意味着元素的初始大小不计入空间分配，完全由 flex-grow 和 flex-shrink 决定。</li>
<li>总结：<br>flex: 1 使元素能够根据容器的可用空间自动调整大小。<br>元素会尽可能地扩展以填充剩余空间，并在空间不足时均匀收缩。<br>常用于创建等宽列布局或使某个元素占据容器的全部剩余空间。<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>; <span class="comment">/* 固定宽度 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main-content</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>; <span class="comment">/* 占满剩余空间 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="fixed-定位失效的原因"><a href="#fixed-定位失效的原因" class="headerlink" title="fixed 定位失效的原因"></a>fixed 定位失效的原因</h2><p>祖先元素有 transform、filter 等属性会创建新的层叠上下文，导致 fixed 定位基准改变</p>
<h2 id="盒模型的-margin-折叠问题"><a href="#盒模型的-margin-折叠问题" class="headerlink" title="盒模型的 margin 折叠问题"></a>盒模型的 margin 折叠问题</h2><p>垂直方向上相邻元素的 margin 会合并（取较大值）</p>
<h2 id="Flexbox-和-Grid-的区别"><a href="#Flexbox-和-Grid-的区别" class="headerlink" title="Flexbox 和 Grid 的区别"></a>Flexbox 和 Grid 的区别</h2><p>Flexbox 是一维布局（单行或单列），Grid 是二维布局（多行多列）。<br>Flexbox 适合组件级布局，Grid 适合页面级布局。</p>
<h2 id="position"><a href="#position" class="headerlink" title="position"></a>position</h2><p>static（默认值）<br>relative：（相对定位）为子元素提供定位上下文。<br>absolute：（绝对定位）基于最近的定位祖先元素定位。<br>fixed：（固定定位）固定在视口，适合导航栏。<br>sticky：（粘性定位）滚动时“粘”在指定位置，适合表头。<br>z-index：控制层级，需注意堆叠上下文。</p>
<h3 id="各属性值详解"><a href="#各属性值详解" class="headerlink" title="各属性值详解"></a>各属性值详解</h3><ol>
<li>static（静态定位）<br>特点：元素按默认文档流排列，top&#x2F;bottom&#x2F;left&#x2F;right 和 z-index 无效</li>
<li>relative（相对定位）<br>元素相对于自身原始位置偏移。不脱离文档流（其他元素仍占据原始空间）。常作为 absolute 定位的参考点<br>场景：需要微调元素位置，或为子元素提供绝对定位的上下文</li>
<li>absolute（绝对定位）<br>素脱离文档流，基于最近的已定位祖先元素（position 非 static）进行定位。<br>如果没有已定位的祖先元素，则相对于 <body>（即视口）定位。<br>场景：需要精确定位子元素(如弹窗、提示框)</li>
<li>fixed（固定定位）<br>元素始终固定在视口的某个位置（不随页面滚动变化）。脱离文档流。<br>场景：固定导航栏、悬浮按钮、侧边栏</li>
</ol>
<h2 id="object-fit属性"><a href="#object-fit属性" class="headerlink" title="object-fit属性"></a><code>object-fit</code>属性</h2><p>适用于图片或video的高度和宽度<br>类似<code>background-size</code>属性，但是这个属性只能作用于背景图片，而<code>object-fit</code>适用于所有图片</p>
<h1 id="布局题"><a href="#布局题" class="headerlink" title="布局题"></a>布局题</h1><h2 id="如何实现响应式布局？请列举至少-3-种方法"><a href="#如何实现响应式布局？请列举至少-3-种方法" class="headerlink" title="如何实现响应式布局？请列举至少 3 种方法"></a>如何实现响应式布局？请列举至少 3 种方法</h2><p>媒体查询（Media Query）：基于屏幕宽度应用不同样式<br>弹性布局（Flex&#x2F;Grid）：自动适应容器尺寸<br>rem&#x2F;em 单位：相对于根元素或父元素字体大小<br>viewport 单位（vw&#x2F;vh）：相对于视口尺寸</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 媒体查询实现断点布局 */</span></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">4</span>, <span class="number">1</span>fr); <span class="comment">/* 默认4列 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">1</span>fr); <span class="comment">/* 平板2列 */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr; <span class="comment">/* 手机1列 */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* vw单位实现自适应字体 */</span></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">5vw</span>; <span class="comment">/* 相对于视口宽度的5% */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="如何实现元素的垂直居中？"><a href="#如何实现元素的垂直居中？" class="headerlink" title="如何实现元素的垂直居中？"></a>如何实现元素的垂直居中？</h2><ol>
<li>行内元素：<br>line-height 等于容器高度（单行文本）</li>
<li>块级元素：<ul>
<li>Flexbox：display: flex; align-items: center; justify-content: center</li>
<li>Grid：display: grid; place-items: center</li>
<li>绝对定位 + transform：top: 50%; left: 50%; transform: translate(-50%, -50%)<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Flexbox 方案 */</span></span><br><span class="line"><span class="selector-class">.flex-center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center; <span class="comment">/* 垂直居中 */</span></span><br><span class="line">  <span class="attribute">justify-content</span>: center; <span class="comment">/* 水平居中 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Grid 方案 */</span></span><br><span class="line"><span class="selector-class">.grid-center</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  place-items: center; <span class="comment">/* 同时实现垂直和水平居中 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 绝对定位 + transform 方案（适用于未知尺寸元素） */</span></span><br><span class="line"><span class="selector-class">.absolute-center</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="圣杯布局"><a href="#圣杯布局" class="headerlink" title="圣杯布局"></a>圣杯布局</h2><blockquote>
<p>header和footer各自占领屏幕所有宽度，高度固定。<br>中间的container是一个三栏布局。<br>三栏布局两侧宽度固定不变，中间部分自动填充整个区域。<br>中间部分的高度是三栏中最高的区域的高度。</p>
</blockquote>
<h3 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;<span class="selector-tag">div</span> class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;<span class="selector-tag">main</span> class=&quot;<span class="selector-tag">main</span>&quot;&gt;中间栏&lt;/<span class="selector-tag">main</span>&gt;</span><br><span class="line">  &lt;<span class="selector-tag">div</span> class=&quot;<span class="attribute">left</span>&quot;&gt;左侧栏&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">  &lt;<span class="selector-tag">div</span> class=&quot;<span class="attribute">right</span>&quot;&gt;右侧栏&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>; <span class="comment">/* 预留左右栏宽度 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">100%</span>; <span class="comment">/* 拉回左侧栏 */</span></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">left</span>: -<span class="number">200px</span>; <span class="comment">/* 向左偏移 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">200px</span>; <span class="comment">/* 拉回右侧栏 */</span></span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">550px</span>;  <span class="comment">/* 2x leftContent width + rightContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#header</span>, <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">29</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">0.726</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">clear</span>: both;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-left</span>: <span class="number">200px</span>;   <span class="comment">/* leftContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding-right</span>: <span class="number">150px</span>;  <span class="comment">/* rightContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#container</span> <span class="selector-class">.column</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#center</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">206</span>, <span class="number">201</span>, <span class="number">201</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#left</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">200px</span>;           <span class="comment">/* leftContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: <span class="number">200px</span>;           <span class="comment">/* leftContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: -<span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">95</span>, <span class="number">179</span>, <span class="number">235</span>, <span class="number">0.972</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#right</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">150px</span>;           <span class="comment">/* rightContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: -<span class="number">150px</span>;   <span class="comment">/* rightContent width */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">right</span>: -<span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">231</span>, <span class="number">105</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span>#header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;center&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>#footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="flex弹性盒子"><a href="#flex弹性盒子" class="headerlink" title="flex弹性盒子"></a>flex弹性盒子</h3><blockquote>
<p>header和footer设置样式，横向撑满。<br>container中的left、center、right依次排布即可<br>给container设置弹性布局 display: flex;<br>left和right区域定宽，center设置 flex: 1; 即可</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">550px</span>;  </span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#header</span>, <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">29</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">0.726</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#container</span> &#123;</span></span><br><span class="line"><span class="language-css">   <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#container</span> <span class="selector-class">.column</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#center</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">206</span>, <span class="number">201</span>, <span class="number">201</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#left</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">200px</span>;        </span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">95</span>, <span class="number">179</span>, <span class="number">235</span>, <span class="number">0.972</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#right</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">150px</span>;           </span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">231</span>, <span class="number">105</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span>#header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;center&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>#footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="grid布局"><a href="#grid布局" class="headerlink" title="grid布局"></a>grid布局</h3><p>把body划分成三行四列的网格</p>
<blockquote>
<p>给body元素添加display: grid;属性变成一个grid(网格)<br>给header元素设置grid-row: 1; 和 grid-column: 1&#x2F;5; 意思是占据第一行网格的从第一条列网格线开始到第五条列网格线结束<br>给footer元素设置grid-row: 1; 和 grid-column: 1&#x2F;5; 意思是占据第三行网格的从第一条列网格线开始到第五条列网格线结束<br>给left元素设置grid-row: 2; 和 grid-column: 1&#x2F;2; 意思是占据第二行网格的从第一条列网格线开始到第二条列网格线结束<br>给center元素设置grid-row: 2; 和 grid-column: 2&#x2F;4; 意思是占据第二行网格的从第二条列网格线开始到第四条列网格线结束<br>给right元素设置grid-row: 2; 和 grid-column: 4&#x2F;5; 意思是占据第二行网格的从第四条列网格线开始到第五条列网格线结束</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://lib.sinaapp.com/js/jquery/2.0.2/jquery-2.0.2.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">min-width</span>: <span class="number">550px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: grid;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#header</span>,</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">29</span>, <span class="number">27</span>, <span class="number">27</span>, <span class="number">0.726</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#header</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-row</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-column</span>: <span class="number">1</span>/<span class="number">5</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#footer</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-row</span>: <span class="number">3</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-column</span>: <span class="number">1</span>/<span class="number">5</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.column</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">line-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#left</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-row</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-column</span>: <span class="number">1</span>/<span class="number">2</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">95</span>, <span class="number">179</span>, <span class="number">235</span>, <span class="number">0.972</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#center</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-row</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-column</span>: <span class="number">2</span>/<span class="number">4</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">206</span>, <span class="number">201</span>, <span class="number">201</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-id">#right</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-row</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">grid-column</span>: <span class="number">4</span>/<span class="number">5</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background</span>: <span class="built_in">rgb</span>(<span class="number">231</span>, <span class="number">105</span>, <span class="number">2</span>);</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span>#header<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;left&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;center&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#center<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;right&quot;</span> <span class="attr">class</span>=<span class="string">&quot;column&quot;</span>&gt;</span>#right<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>#footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="如何让元素的总宽度固定为-200px，不受-padding-影响？"><a href="#如何让元素的总宽度固定为-200px，不受-padding-影响？" class="headerlink" title="如何让元素的总宽度固定为 200px，不受 padding 影响？"></a>如何让元素的总宽度固定为 200px，不受 padding 影响？</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>; <span class="comment">/* 内边距不会撑大盒子 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="如何让一个元素覆盖在另一个元素上方"><a href="#如何让一个元素覆盖在另一个元素上方" class="headerlink" title="如何让一个元素覆盖在另一个元素上方"></a>如何让一个元素覆盖在另一个元素上方</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.overlay</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="移动端适配"><a href="#移动端适配" class="headerlink" title="移动端适配"></a>移动端适配</h1><h2 id="如何实现移动端1px边框"><a href="#如何实现移动端1px边框" class="headerlink" title="如何实现移动端1px边框"></a>如何实现移动端1px边框</h2><p>.box {<br>  border: 1px solid #000;<br>  @media (-webkit-min-device-pixel-ratio: 2) {<br>    border-width: 0.5px; &#x2F;* 高清屏适配 *&#x2F;<br>  }<br>}</p>
<h2 id="移动端点击-300ms-延迟如何解决"><a href="#移动端点击-300ms-延迟如何解决" class="headerlink" title="移动端点击 300ms 延迟如何解决"></a>移动端点击 300ms 延迟如何解决</h2><p>使用 <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt; </code>或 FastClick 库</p>
<h1 id="过度和动画"><a href="#过度和动画" class="headerlink" title="过度和动画"></a>过度和动画</h1><h2 id="如何实现无限循环动画"><a href="#如何实现无限循环动画" class="headerlink" title="如何实现无限循环动画"></a>如何实现无限循环动画</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: spin <span class="number">2s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> spin &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>); &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123; <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="transform-和-position-动画的性能差异？"><a href="#transform-和-position-动画的性能差异？" class="headerlink" title="transform 和 position 动画的性能差异？"></a>transform 和 position 动画的性能差异？</h2><p>transform 和 opacity 不会触发重排（使用 GPU 加速），性能更高</p>
]]></content>
      <categories>
        <category>html+css</category>
        <category>面试题</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>面试题</tag>
      </tags>
  </entry>
  <entry>
    <title>grid 布局？归我啦！</title>
    <url>/2025/01/21/02-grid/</url>
    <content><![CDATA[<h1 id="理解grid网格布局"><a href="#理解grid网格布局" class="headerlink" title="理解grid网格布局"></a>理解grid网格布局</h1><h2 id="初步理解"><a href="#初步理解" class="headerlink" title="初步理解"></a>初步理解</h2><p>Grid 布局即网格布局，是一种新的 CSS 布局模型，比较擅长将一个页面划分为几个主要区域，以及定义这些区域的大小、位置、层次等关系。号称是最强大的的 CSS 布局方案，是一种 CSS 二维布局。<br>使用grid布局可以轻松实现类似这样的布局<br><img src="/./postImgs/cssImgs/grid3.png" alt="grid布局展示"><br>Grid 布局总体兼容性不错，IE10以下不支持。</p>
<h2 id="grid与flex布局区别"><a href="#grid与flex布局区别" class="headerlink" title="grid与flex布局区别"></a>grid与flex布局区别</h2><p>flex 布局和 Grid 布局有实质的区别，flex 布局是一维布局，Grid 布局是二维布局。<br>flex 布局一次只能处理一个维度上的元素布局，一行或者一列。<br>Grid 布局是将容器划分成了“行”和“列”，产生了一个个的网格，我们可以将网格元素放在与这些行和列相关的位置上，从而达到布局的目的。<br>Grid 布局比flex布局强大更灵活</p>
<h2 id="巧妙解决flex布局的难题"><a href="#巧妙解决flex布局的难题" class="headerlink" title="巧妙解决flex布局的难题"></a>巧妙解决flex布局的难题</h2><p>在flex布局中，如果遇到最后一行是单数的情况，容易出现无法对齐的情况，这时候使用grid网格布局可以设置最后一行为左对齐。<br><img src="/./postImgs/cssImgs/grid1.png" alt="flex布局难解决的情况"><br>改用grid布局display：grid 是转为网格布局，这个是必须的</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* grid布局 两端对齐,最后一行左对齐*/</span></span><br><span class="line"><span class="attribute">display</span>: grid;</span><br><span class="line"><span class="comment">/* grid-template-columns：1fr | px 这是将网格分为几列，1fr是自适配单位，可以当成栅格*/</span></span><br><span class="line"><span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line"><span class="attribute">gap</span>:<span class="number">30px</span> 这是网格四周的间隔</span><br><span class="line">注意：这三个属性是给父容器添加的，子元素，可以不用设置宽度，也不用设置margin间距即可完成如下布局。</span><br></pre></td></tr></table></figure>
<p><img src="/./postImgs/cssImgs/grid2.png" alt="grid布局，最后一行不是4的倍数，但是可以左对齐"></p>
<h1 id="grid布局"><a href="#grid布局" class="headerlink" title="grid布局"></a>grid布局</h1><h2 id="使用原理"><a href="#使用原理" class="headerlink" title="使用原理"></a>使用原理</h2><p>Grid布局同样必须有父盒子，给父元素设置<code> display: grid 或 display: inline-grid</code> 创建网格容器。</p>
<p><strong>注意，设为网格布局以后，容器子元素项目的f<code>loat、display: inline-block、display: table-cell、vertical-align和column-*</code>等设置都将失效</strong></p>
<ul>
<li>网格容器：通过将父元素的display属性设置为grid或inline-grid来创建网格容器。</li>
<li>子元素的网格项目：网格容器中的每个子元素都成为网格项目。子元素可以指定各自在网格中的位置、大小以及对齐方式等。</li>
<li>行与列：网格容器默认由行和列组成，可以通过CSS属性定义行和列的数量和大小。</li>
<li>单元格：行和列的交叉区域，称为单元格（cell）</li>
<li><ul>
<li>正常情况下，n行和m列会产生n x m个单元格。比如，3行3列会产生9个单元格。</li>
</ul>
</li>
<li>网格线：划分网格的线，水平网格线划分出行，垂直网格线划分出列。</li>
<li><ul>
<li>正常情况下，n行有n + 1根水平网格线，m列有m + 1根垂直网格线，比如三行就有四根水平网格线。</li>
</ul>
</li>
<li><ul>
<li>一般而言，网格线是从左到右，从上到下，1，2，3 进行编号排序。当然也可以从右到左，从下到上，按照 -1，-2，-3…顺序进行编号排序</li>
</ul>
</li>
<li>网格间距：可以在行和列之间添加间距，使布局更加美观。<br><img src="/./postImgs/cssImgs/grid4.png" alt="grip布局，网格线"></li>
</ul>
<h2 id="容器属性（父元素属性）"><a href="#容器属性（父元素属性）" class="headerlink" title="容器属性（父元素属性）"></a>容器属性（父元素属性）</h2><h3 id="display-设置为grid或inline-grid启用网格布局"><a href="#display-设置为grid或inline-grid启用网格布局" class="headerlink" title="display: 设置为grid或inline-grid启用网格布局"></a>display: 设置为grid或inline-grid启用网格布局</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid | inline-grid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>属性值：</p>
<ul>
<li>grid：块级网格容器(数着排列)</li>
<li>inline-grid：行内网格容器(横着排列)</li>
</ul>
<h3 id="grid-template-columns和grid-template-rows"><a href="#grid-template-columns和grid-template-rows" class="headerlink" title="grid-template-columns和grid-template-rows"></a>grid-template-columns和grid-template-rows</h3><p>划分网格行和列，grid-template-columns属性定义每一列的列宽，grid-template-rows属性定义每一行的行高<br>它们的值是多样的，设置比较相似的，下面以grid-template-columns 属性为例</p>
<ol>
<li>可以使用绝对单位。也可以用百分比<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.div</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">33.33%</span> <span class="number">33.33%</span> <span class="number">33.33%</span>;</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">33.33%</span> <span class="number">33.33%</span> <span class="number">33.33%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="repeat-函数"><a href="#repeat-函数" class="headerlink" title="repeat()函数"></a>repeat()函数</h4><p>网格很多时，重复写同样的值非常麻烦，可以使用repeat()函数，简化重复的值。</p>
<ul>
<li>repeat()接受两个参数，第一个参数是重复的次数（上例是3），第二个参数是所要重复的值。<br>上面的代码用repeat()改写如下：<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">33.33%</span>);</span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">33.33%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>(很少用到) repeat()重复某种模式也可以</li>
<li><ul>
<li><code>grid-template-columns: repeat(2, 100px 20px 80px);</code></li>
</ul>
</li>
<li><ul>
<li>代码定义了6列，第一列和第四列的宽度为100px，第二列和第五列为20px，第三列和第六列为80px</li>
</ul>
</li>
</ul>
<h4 id="auto-fill-关键字"><a href="#auto-fill-关键字" class="headerlink" title="auto-fill 关键字"></a>auto-fill 关键字</h4><p>有时单元格的大小是固定的，但是容器的大小不确定。如果希望每一行（或每一列）容纳尽可能多的单元格，这时可以使用auto-fill关键字表示自动填充<br>下面代码表示列宽是100 px，但列的数量是不固定的，只要浏览器能够容纳得下，就可以放置元素</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fill, <span class="number">100px</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="fr-关键字"><a href="#fr-关键字" class="headerlink" title="fr 关键字"></a>fr 关键字</h4><p>fr 单位代表网格容器中可用空间的一等份。<br>grid-template-columns: 200px 1fr 2fr 表示第一个列宽设置为 200px，后面剩余的宽度分为两部分，宽度分别为剩余宽度的 1&#x2F;3 和 2&#x2F;3</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">200px</span> <span class="number">1</span>fr <span class="number">2</span>fr;</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">grid-auto-rows</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="minmax-函数"><a href="#minmax-函数" class="headerlink" title="minmax() 函数"></a>minmax() 函数</h4><p>minmax() 函数产生一个长度范围，表示长度就在这个范围之中都可以应用到网格项目中，给网格元素一个最小和最大的尺寸。<br>minmax() 函数接受两个参数，分别为最小值和最大值。grid-template-columns: 1fr 1fr minmax(300px, 2fr) 的意思是，第三个列宽最少也是要 300px，但是最大不能大于第一第二列宽的两倍</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr <span class="built_in">minmax</span>(<span class="number">300px</span>, <span class="number">2</span>fr);</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">grid-auto-rows</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="auto-关键字"><a href="#auto-关键字" class="headerlink" title="auto 关键字"></a>auto 关键字</h4><p>由浏览器决定长度<br>通过 auto 关键字，我们可以轻易实现三列或者两列布局<br>例如：<code>grid-template-columns: 100px auto 100px</code><br>表示第一第三列为 100px，中间由浏览器决定长度</p>
<h3 id="grid-row-gap、grid-column-gap和grid-gap属性"><a href="#grid-row-gap、grid-column-gap和grid-gap属性" class="headerlink" title="grid-row-gap、grid-column-gap和grid-gap属性"></a>grid-row-gap、grid-column-gap和grid-gap属性</h3><p>grid-row-gap 属性、grid-column-gap 属性分别设置行间距和列间距。 grid-gap 属性是两者的简写形式<br><code>grid-row-gap: 10px </code>表示行间距是 10px<br><code>grid-column-gap: 20px</code> 表示列间距是 20px<br><code>grid-gap: 10px 20px</code> 实现的效果是一样的</p>
<h3 id="grid-template-areas-属性"><a href="#grid-template-areas-属性" class="headerlink" title="grid-template-areas 属性"></a>grid-template-areas 属性</h3><p>grid-template-areas 属性用于定义区域，一个区域由一个或者多个单元格组成<br>一般这个属性跟网格元素的 grid-area 一起使用，我们在这里一起介绍。 grid-area 属性指定项目放在哪一个区域<br>例子：<br>下面代码表示划分出 个单元格，注意的是<code>.</code>符号代表空的单元格，就是没有用到该单元格</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span>  &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">120px</span>  <span class="number">120px</span>  <span class="number">120px</span>;</span><br><span class="line">  <span class="attribute">grid-template-areas</span>:</span><br><span class="line">    <span class="string">&quot;. header  header&quot;</span></span><br><span class="line">    <span class="string">&quot;sidebar content content&quot;</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#444</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面代码表示将类 .sidebar .content .header所在的元素放在上面 grid-template-areas 中定义的 sidebar content header 区域中</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.sidebar</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: sidebar;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: content;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">  <span class="attribute">grid-area</span>: header;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="grid-auto-flow-属性"><a href="#grid-auto-flow-属性" class="headerlink" title="grid-auto-flow 属性"></a>grid-auto-flow 属性</h3><ol>
<li>row和column<br>划分网格以后，容器的子元素会按照顺序，自动放置在每一个网格。<br>这个顺序由grid-auto-flow属性决定，默认值是row，先行后列(如图片左部分)<br><code>grid-auto-flow: column</code> 先列后行(如图片右部分)<br><img src="/./postImgs/cssImgs/grid5.png" alt="grid-auto-flow 属性"></li>
<li>row dense<br>表示尽可能填充，而不留空白<br>还可以设成<strong>row dense和column dense</strong>。这两个值主要用于，某些项目指定位置以后，剩下的项目怎么自动放置。</li>
</ol>
<h3 id="justify-items、align-items和place-items属性"><a href="#justify-items、align-items和place-items属性" class="headerlink" title="justify-items、align-items和place-items属性"></a>justify-items、align-items和place-items属性</h3><p>justify-items属性设置单元格内容的水平位置（左中右），align-items属性设置单元格内容的垂直位置（上中下）</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">justify-items</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-items</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这两个属性的写法完全相同，都可以取下面这些值:</p>
<ul>
<li>start：对齐单元格的起始边缘。</li>
<li>end：对齐单元格的结束边缘。</li>
<li>center：单元格内部居中。</li>
<li>stretch：拉伸，占满单元格的整个宽度（默认值）</li>
</ul>
<h3 id="justify-content、align-content和place-content-属性"><a href="#justify-content、align-content和place-content-属性" class="headerlink" title="justify-content、align-content和place-content 属性"></a>justify-content、align-content和place-content 属性</h3><p>justify-content属性是整个内容区域在容器里面的水平位置（左中右），align-content属性是整个内容区域的垂直位置（上中下）。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: start | end | center | stretch | space-around | space-between | space-evenly;</span><br><span class="line">  <span class="attribute">align-content</span>: start | end | center | stretch | space-around | space-between | space-evenly;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这两个属性的写法完全相同，都可以取下面这些值</p>
<ul>
<li>start：对齐容器的起始边框</li>
<li>end：对齐容器的结束边框</li>
<li>center：容器内部居中</li>
<li>space-around：每个项目两侧的间隔相等（项目之间的间隔比项目与容器边框的间隔大一倍）</li>
<li>space-between：项目与项目的间隔相等，项目与容器边框之间没有间隔</li>
<li>space-evenly：项目与项目的间隔相等，项目与容器边框之间也是同样长度的间隔</li>
<li>stretch：项目大小没有指定时，拉伸占据整个网格容器<br><img src="/./postImgs/cssImgs/grid6.png" alt="justify-content、align-content和place-content 属性"><br><img src="/./postImgs/cssImgs/grid7.png" alt="justify-content、align-content和place-content 属性"></li>
</ul>
<h3 id="grid-auto-columns和grid-auto-rows-属性"><a href="#grid-auto-columns和grid-auto-rows-属性" class="headerlink" title="grid-auto-columns和grid-auto-rows 属性"></a>grid-auto-columns和grid-auto-rows 属性</h3><p>我多半用不到所以没写，需要的时候查下方参考文档和文章</p>
<h2 id="项目属性（子元素属性）"><a href="#项目属性（子元素属性）" class="headerlink" title="项目属性（子元素属性）"></a>项目属性（子元素属性）</h2><h3 id="grid-column-start、grid-column-end、grid-row-start和grid-row-end属性"><a href="#grid-column-start、grid-column-end、grid-row-start和grid-row-end属性" class="headerlink" title="grid-column-start、grid-column-end、grid-row-start和grid-row-end属性"></a>grid-column-start、grid-column-end、grid-row-start和grid-row-end属性</h3><p>可以指定网格项目所在的四个边框，分别定位在哪根网格线，从而指定项目的位置</p>
<p>grid-column-start 属性：左边框所在的垂直网格线<br>grid-column-end 属性：右边框所在的垂直网格线<br>grid-row-start 属性：上边框所在的水平网格线<br>grid-row-end 属性：下边框所在的水平网格线</p>
<h3 id="grid-area属性"><a href="#grid-area属性" class="headerlink" title="grid-area属性"></a>grid-area属性</h3><p>grid-area 属性指定项目放在哪一个区域，在上面介绍 grid-template-areas 的时候有提到过</p>
<h3 id="justify-selfalign-self和place-self-属性"><a href="#justify-selfalign-self和place-self-属性" class="headerlink" title="justify-selfalign-self和place-self 属性"></a>justify-selfalign-self和place-self 属性</h3><p>justify-self 属性设置单元格内容的水平位置（左中右），跟 justify-items 属性的用法完全一致，但只作用于单个项目<br>align-self 属性设置单元格内容的垂直位置（上中下），跟align-items属性的用法完全一致，也是只作用于单个项目</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">justify-self</span>: start | end | center | stretch;</span><br><span class="line">  <span class="attribute">align-self</span>: start | end | center | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/./postImgs/cssImgs/grid8.png" alt="ustify-selfalign-self和place-self 属性"></p>
<h2 id="高频属性"><a href="#高频属性" class="headerlink" title="高频属性"></a>高频属性</h2><p>容器属性：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">200px</span>; <span class="comment">/* 列定义 */</span></span><br><span class="line">  <span class="attribute">grid-template-rows</span>: <span class="number">100px</span> auto;   <span class="comment">/* 行定义 */</span></span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span>;                        <span class="comment">/* 间距 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>项目属性:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">grid-column</span>: <span class="number">1</span> / <span class="number">3</span>;               <span class="comment">/* 跨越两列 */</span></span><br><span class="line">  <span class="attribute">grid-row</span>: <span class="number">1</span>;                      <span class="comment">/* 定位到第一行 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="经典布局："><a href="#经典布局：" class="headerlink" title="经典布局："></a>经典布局：</h2><h3 id="12列网格系统"><a href="#12列网格系统" class="headerlink" title="12列网格系统"></a>12列网格系统</h3><p>grid-template-columns: repeat(12, 1fr)</p>
<h3 id="杂志排版"><a href="#杂志排版" class="headerlink" title="杂志排版"></a>杂志排版</h3><p>grid-template-areas 定义区域</p>
<h3 id="两栏式布局"><a href="#两栏式布局" class="headerlink" title="两栏式布局"></a>两栏式布局</h3><p>只需要一行代码，左边栏设为70%，右边栏设为30%</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="number">70%</span> <span class="number">30%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="fr-实现等分响应式"><a href="#fr-实现等分响应式" class="headerlink" title="fr 实现等分响应式"></a>fr 实现等分响应式</h3><p>fr 等分单位，可以将容器的可用空间分成想要的多个等分空间。利用这个特性，我们能够轻易实现一个等分响应式。<br><code>grid-template-columns: 1fr 1fr 1fr</code> 表示容器分为三等分</p>
<h3 id="repeat-auto-fit——固定列宽，改变列数量"><a href="#repeat-auto-fit——固定列宽，改变列数量" class="headerlink" title="repeat + auto-fit——固定列宽，改变列数量"></a>repeat + auto-fit——固定列宽，改变列数量</h3><p>如<code>grid-template-columns: repeat(auto-fit, 200px) </code>表示固定列宽为 200px，数量是自适应的，只要容纳得下，就会往上排列</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(auto-fit, <span class="number">200px</span>);</span><br><span class="line">  <span class="attribute">grid-gap</span>: <span class="number">10px</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">grid-auto-rows</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="repeat-auto-fit-minmax-去掉右侧空白"><a href="#repeat-auto-fit-minmax-去掉右侧空白" class="headerlink" title="repeat+auto-fit+minmax 去掉右侧空白"></a>repeat+auto-fit+minmax 去掉右侧空白</h3><p>右侧通常会留下空白，这是我们不希望看到的。如果列的宽度也能在某个范围内自适应就好了。minmax() 函数就帮助我们做到了这点。将 <code>grid-template-columns: repeat(auto-fit, 200px) </code>改成 <code>grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) </code>表示列宽至少 200px，如果还有空余则一起等分</p>
<h3 id="repeat-auto-fit-minmax-span-dense-解决空缺问题"><a href="#repeat-auto-fit-minmax-span-dense-解决空缺问题" class="headerlink" title="repeat+auto-fit+minmax-span-dense 解决空缺问题"></a>repeat+auto-fit+minmax-span-dense 解决空缺问题</h3><p>每个网格元素的长度可能不相同，通过 span 关键字进行设置网格项目的跨度，<code>grid-column-start: span 3</code>，表示这个网格项目跨度为3<br><code>grid-auto-flow: row dense</code> 表示尽可能填充，而不留空白</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p>这篇博客我结合了MDN web文档，B站视频，AI解答和以下博主的理解：<br>[1]本文参考了CSDN作者<a href="https://blog.csdn.net/qq_18798149/article/details/133872183?fromshare=blogdetail&sharetype=blogdetail&sharerId=133872183&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link">咸虾米_</a>的grid布局文章</p>
<p>[2]本文参考了稀土掘金的grid布局文章<a href="https://juejin.cn/post/6854573220306255880">稀土掘金</a><br>[3]这篇文章也很全面<a href="https://ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">阮一峰-Grid 网格布局教程</a></p>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>grid布局</tag>
      </tags>
  </entry>
  <entry>
    <title>移动web知识整理</title>
    <url>/2024/03/17/03-%E7%A7%BB%E5%8A%A8web/</url>
    <content><![CDATA[<h1 id="移动web知识整理"><a href="#移动web知识整理" class="headerlink" title="移动web知识整理"></a>移动web知识整理</h1><h2 id="视口"><a href="#视口" class="headerlink" title="视口"></a>视口</h2><p>视口是浏览器展示页面内容的屏幕区域</p>
<h3 id="mate视口标签"><a href="#mate视口标签" class="headerlink" title="mate视口标签"></a>mate视口标签</h3><p>&lt;mate name&#x3D;”viewport” contehnt&#x3D;”width&#x3D;device-width,user-scalable&#x3D;no,initial-scale&#x3D;1.0,maxinum-scale&#x3D;1.0,min1num-scale&#x3D;1.0”</p>
<ul>
<li>width&#x3D;device-width 宽度设置为设备的宽度</li>
<li>user-scalable&#x3D;no 是否允许用户缩放：不允许；值为yes或no（1或0）</li>
<li>initial-scale&#x3D;1.0 初始缩放倍数，值为大于0的数字</li>
<li>maxinum-scale&#x3D;1.0 最大缩放比，值为大于0的数字</li>
<li>min1num-scale&#x3D;1.0 最小缩放比，值为大于0的数字</li>
</ul>
<h3 id="二倍图"><a href="#二倍图" class="headerlink" title="二倍图"></a>二倍图</h3><p>设计稿里面每个元素的尺寸的倍数<br>作用:防止图片在高分辨率屏幕下模糊失真<br>做法：准备的图片比实际需要的大小大两倍<br>如果是二倍图，把设计图1x变成2x，宽度750px变375px<br>如：需要一个50<em>50像素的图片，直接放到移动页面里面会放大两倍变成100</em>100会模糊，所以采取：放一个100<em>100的图片，然后手动地把这个图片缩小为50</em>50像素，这种方式就是二倍图<br>.box{<br>    原始图片100<em>100px，手动缩小为50</em>50<br>    background-size:50px 50px;<br>}</p>
<ul>
<li>backgroung-size:背景图片宽度 背景图片高度<br>单位：长度|百分比|cober（把背景图像扩展至足够大，使背景图像完全按副高背景区域）| contain(把背景图像扩展至最大尺寸，使其宽度和高度完全适应内容区域)</li>
</ul>
<h3 id="二倍精灵图制作"><a href="#二倍精灵图制作" class="headerlink" title="二倍精灵图制作"></a>二倍精灵图制作</h3><p>在firework里面把精灵图等比例缩放为原来的一般，然后根据大小测量坐标，注意代码里面的background-size也要写为精灵图原来的宽度的一半</p>
<h2 id="移动端开发选择"><a href="#移动端开发选择" class="headerlink" title="移动端开发选择"></a>移动端开发选择</h2><ul>
<li>单独制作移动端页面（主流）<br>网页域名前一般加m可以打开移动端页面<br>流式布局（百分比布局）；flex弹性布局；less+rem+媒体查询布局；混合布局</li>
<li>响应式页面兼容移动端（其次）<br>媒体查询；bootstarp</li>
</ul>
<h3 id="流式布局（百分比布局）"><a href="#流式布局（百分比布局）" class="headerlink" title="流式布局（百分比布局）"></a>流式布局（百分比布局）</h3><p>通过盒子的宽度设置成百分比来根据屏幕的宽度进行伸缩，内容向两侧填充</p>
<h3 id="flex布局（弹性布局）"><a href="#flex布局（弹性布局）" class="headerlink" title="flex布局（弹性布局）"></a>flex布局（弹性布局）</h3><p>flex布局用来为盒状模型提供最大的灵活性，任何一个容器都可以指定为flex布局<br>当我们为盒子设为flex布局以后，子元素的float，clear和vertial-align属性将失效<br>伸缩布局&#x3D;弹性布局&#x3D;伸缩盒布局&#x3D;弹性盒布局&#x3D;flex布局<br>原理：给父盒子添加flex属性，来控制子盒子的位置和排列方式</p>
<h4 id="flex布局父项常见属性"><a href="#flex布局父项常见属性" class="headerlink" title="flex布局父项常见属性"></a>flex布局父项常见属性</h4><ul>
<li><strong>flex-direction 设置主轴的方向</strong><br>默认主轴是x轴方向，行row，水平向右；侧轴是y轴方向，列column，水平向下<br>flex-direction:row;  默认值，从左到右<br>flex-direction:row-reserve;从右到左<br>flex-direction:colnum; 从上到下<br>flex-direction:columb-reserve;从下到上</li>
<li><strong>justify-content 设置主轴上的子元素排列方式</strong><br>属性值：<br>flex-start 默认值，从头部开始排列<br>flex-end 从尾部开始排列<br>center 在主轴居中对齐<br>space-around 平分剩余空间<br>apsce-between  先两边贴边，再平分剩余空间</li>
<li><strong>flex-wrap 设置子元素是否换行</strong><br>如在一行只能放下三个盒子，第四个盒子有溢出放不下了<br>如果不换行，那么会挤在这一行，显示不开那么会缩小每个盒子的大小<br>属性值：<br>nowrap 默认值，不换行<br>wrap 换行</li>
<li><strong>align-content 设置侧轴上单子元素的排列方式（多行）</strong><br>属性值：<br>strerch 默认值，拉伸<br>center 在侧轴居中对齐（挤在一起居中，垂直居中）<br>flex-start 从头部开始排列<br>flex-end 从尾部开始排列</li>
<li><strong>align-items 设置侧轴上单子元素的排列方式（单行）</strong><br>属性值：<br>flex-start 默认值，从头部开始排列<br>flex-end 从尾部开始排列<br>strerch 拉伸<br>center 在侧轴居中对齐（挤在一起居中，垂直居中）</li>
<li><strong>flex-flow 复合属性</strong>，相当于同时设置了flex-direction和flex-wrap<br>如flex-flow:row wrap;</li>
</ul>
<h4 id="flex布局子项常见属性"><a href="#flex布局子项常见属性" class="headerlink" title="flex布局子项常见属性"></a>flex布局子项常见属性</h4><ul>
<li>flex子项占的份数<br>默认flex:0; 常用flex:1；</li>
<li>align-self控制子项自己在侧轴的哦排列方式<br>可覆盖align-items属性，默认值auto表示继承父元素的align-items属性，没有则等同于 strerch</li>
<li>order属性定义子项的排列顺序（前后顺序）<br>默认值0；数值越小，排列越靠前，和z-index不一样</li>
</ul>
<h3 id="rem适配布局-让文字也能随屏幕大小变化而变化"><a href="#rem适配布局-让文字也能随屏幕大小变化而变化" class="headerlink" title="rem适配布局 让文字也能随屏幕大小变化而变化"></a>rem适配布局 让文字也能随屏幕大小变化而变化</h3><h4 id="rem单位"><a href="#rem单位" class="headerlink" title="rem单位"></a>rem单位</h4><p>类似em是相对于父元素，rem相对的是html元素的大小，因此通过修改html元素大小可以修改里面的其他元素的大小</p>
<h4 id="媒体查询-media-css3新语法"><a href="#媒体查询-media-css3新语法" class="headerlink" title="媒体查询 @media css3新语法"></a>媒体查询 @media css3新语法</h4><p>使用@media查询可以针对不同的媒体类型定义不同的样式<br>@media可以针对不同的屏幕尺寸设置不同的样式</p>
<ul>
<li>语法规范：<br>@media 媒体类型 关键字 （媒体特性）{ css代码}<br>@media mediatype and|not|only (media feature){ css代码}</li>
<li>媒体类型 mediatype 值：all（用于所有设备）；scree（用于电脑屏幕，平板电脑，智能手机的等）；print（用于打印机和打印预览）</li>
<li>关键字 值：and（可以将多个媒体特效链接到一起，相当于且）；<br>not（排除某个媒体类型，相当于非，可以省略）；<br>only（指定某个特定的媒体类型，可以省略）</li>
<li>媒体特性 注意要加小括号包含起来<br>值：width(定义输出设备中页面可见区域的宽度)<br>min-width(定义输出设备中页面最小可见区域的宽度)<br>max-width(定义输出设备中页面最大可见区域的宽度)</li>
</ul>
<h4 id="rem-媒体查询实现元素动态大小变化"><a href="#rem-媒体查询实现元素动态大小变化" class="headerlink" title="rem+媒体查询实现元素动态大小变化"></a>rem+媒体查询实现元素动态大小变化</h4><p>如:当屏幕宽度小于640时，文字大小会从100px变为50px<br>注意顺序先写小的再写大的<br>@media screen and (min-width:320px){<br>    html{font-size:50px}<br>}<br>@media screen and (min-width:640px){<br>    html{font-size:100px}<br>}</p>
<h4 id="针对不同的媒体引入不同的css资源"><a href="#针对不同的媒体引入不同的css资源" class="headerlink" title="针对不同的媒体引入不同的css资源"></a>针对不同的媒体引入不同的css资源</h4><p>语法：<br>《link rel&#x3D;”stylesheet” media&#x3D;”mediatype and|not|only (media feature)” href&#x3D;”mystylesheet.css”&gt;<br>比如当屏幕宽度大于640px时使用一个css样式，小于640px时使用另一个css样式</p>
<h3 id="rem适配方案1：less-媒体查询-rem"><a href="#rem适配方案1：less-媒体查询-rem" class="headerlink" title="rem适配方案1：less+媒体查询+rem"></a>rem适配方案1：less+媒体查询+rem</h3><h4 id="less基础"><a href="#less基础" class="headerlink" title="less基础"></a>less基础</h4><p>是css的扩展语言。在css语法上加入程序式语言的特性，引入了变量，混入，运算，函数等功能，简化了css编写，减少了css的维护成本<br>网站 <a href="http://lesscss.cn/">http://lesscss.cn/</a><br>less嵌套，运算</p>
<h4 id="插件easy-less"><a href="#插件easy-less" class="headerlink" title="插件easy less"></a>插件easy less</h4><p>.less后缀的文件写完保存自动生成同名.css后缀的文件<br>.less文件的内容修改，对应的.css文件内容自动修改</p>
<h3 id="ren适配方案2：flexinle-js-rem"><a href="#ren适配方案2：flexinle-js-rem" class="headerlink" title="ren适配方案2：flexinle.js+rem"></a>ren适配方案2：flexinle.js+rem</h3><p>原理：把当前设备划分为10等份，不同设备下比例一致，确定当前设备的html文字大小即可<br>如设计稿750px，那么只需要把html文字大小设置为75px，页面里的元素rem值&#x3D;页面元素的px值&#x2F;75<br>剩下的使用flexible.js去算<br>下载地址：<a href="http://github.com/amfe/lib-flexible">http://github.com/amfe/lib-flexible</a><br>里面的clone or download–download zip<br>下载后的index.js或index.min.js</p>
<h2 id="响应式开发"><a href="#响应式开发" class="headerlink" title="响应式开发"></a>响应式开发</h2><p>原理：使用媒体查询针对不同宽度的设备进行布局和样式的设置，从而适配不同设备<br>响应式布局需要一个父级元素作为布局容器，通过父级元素尺寸的改变来对里面的子元素的排列方式和大小进行改变</p>
<h3 id="Bootstrap-前端开发框架"><a href="#Bootstrap-前端开发框架" class="headerlink" title="Bootstrap 前端开发框架"></a>Bootstrap 前端开发框架</h3><p>中文网站：<a href="http://www.bootcss.com/">http://www.bootcss.com/</a><br>官网<a href="http://getbootstrap.com/">http://getbootstrap.com/</a><br>推荐<a href="http://bootstrap.css88.com/%E6%96%87%E6%A1%A3%E8%AF%A6%E7%BB%86">http://bootstrap.css88.com/文档详细</a><br>简单引入：添加代码<br>《link href&#x3D;”css&#x2F;bootstrap.min.css” rel&#x3D;”stylesheet”&gt;<br>建议：把css,fonts,js文件都放到根目录里然后再使用</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="swiper插件使用（滑动样式）"><a href="#swiper插件使用（滑动样式）" class="headerlink" title="swiper插件使用（滑动样式）"></a>swiper插件使用（滑动样式）</h3><p>-下载地址<a href="http://www.swiper.com.cn/">http://www.swiper.com.cn</a><br>进入网站–获取swiper–下载swiper–下载一个.zip<br>打开–package–js–swiper.min.js放到目录下面<br>打开–package–css–swiper.min.css放到目录下</p>
<ul>
<li>使用<br>到官网找到类似案例<br>在演示中想要的样式右上角有”新窗口打开”，点击进去–右键–查看网页源代码<br>复制html结构，css样式js语法，然后根据需求修改模块</li>
</ul>
]]></content>
      <categories>
        <category>html+css</category>
      </categories>
      <tags>
        <tag>flex布局</tag>
        <tag>mate视口</tag>
      </tags>
  </entry>
  <entry>
    <title>ES6新特性</title>
    <url>/2025/02/03/04-ES6/</url>
    <content><![CDATA[<h1 id="关键字let和const"><a href="#关键字let和const" class="headerlink" title="关键字let和const"></a>关键字let和const</h1><h2 id="let关键字"><a href="#let关键字" class="headerlink" title="let关键字"></a>let关键字</h2><p><strong>声明变量用let</strong></p>
<blockquote>
<p>特点：<br>不允许重复声明<br>块儿级作用域<br>不存在变量提升<br>不影响作用域链</p>
</blockquote>
<h2 id="const关键字"><a href="#const关键字" class="headerlink" title="const关键字"></a>const关键字</h2><p><strong>声明常量用const</strong><br>特点：<br>不允许重复声明<br>块儿级作用域<br>声明必须赋初始值<br>值不允许修改<br>标识符一般为大写</p>
<h1 id="变量的解构赋值"><a href="#变量的解构赋值" class="headerlink" title="变量的解构赋值"></a>变量的解构赋值</h1><p>ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，称为解构赋值。</p>
<p>频繁使用对象方法、数组元素时，可以使用解构赋值形式</p>
<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//数组的解构赋值</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="string">&quot;西瓜&quot;</span>, <span class="string">&quot;鸭梨&quot;</span>, <span class="string">&quot;哈密瓜&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [xg, yl, hmg] = arr;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(xg); <span class="comment">//西瓜</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(yl);  <span class="comment">//鸭梨</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hmg);  <span class="comment">//哈密瓜</span></span><br></pre></td></tr></table></figure>
<h3 id="简单对象的解构赋值"><a href="#简单对象的解构赋值" class="headerlink" title="简单对象的解构赋值"></a>简单对象的解构赋值</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//对象的解构赋值</span></span><br><span class="line"><span class="keyword">const</span> xi = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;西西&quot;</span>,</span><br><span class="line">    <span class="attr">tags</span>: [<span class="string">&quot;小说&quot;</span>, <span class="string">&quot;音乐&quot;</span>, <span class="string">&quot;游戏&quot;</span>, <span class="string">&quot;旅行&quot;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;name, tags&#125; = xi;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tags);</span><br></pre></td></tr></table></figure>

<h3 id="复杂对象的解构赋值"><a href="#复杂对象的解构赋值" class="headerlink" title="复杂对象的解构赋值:"></a>复杂对象的解构赋值:</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//复杂对象的解构赋值</span></span><br><span class="line"><span class="keyword">let</span> xixi = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;西西&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="attr">songs</span>: [<span class="string">&quot;翠花&quot;</span>, <span class="string">&quot;权志龙&quot;</span>, <span class="string">&quot;vietra&quot;</span>],</span><br><span class="line">    <span class="attr">hobby</span>: [</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&quot;小说&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&quot;游戏&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>: <span class="string">&quot;旅行&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> &#123;name, age, <span class="attr">songs</span>: [one, two, three], <span class="attr">hobby</span>: [first, second, third]&#125; = xixi;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(one);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(two);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(three);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third);</span><br></pre></td></tr></table></figure>

<h1 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h1><p>模板字符串是增强版的字符串，用反引号（&#96;&#96;）标识，特点：<br>字符串中可以出现换行符<br>可以使用 ${xxx} 形式输出变量<br><strong>当遇到字符串与变量拼接的情况使用模板字符串</strong></p>
<h2 id="变量拼接"><a href="#变量拼接" class="headerlink" title="变量拼接"></a>变量拼接</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;西西&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> result = <span class="string">`欢迎<span class="subst">$&#123;name&#125;</span>访问我的文章`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br></pre></td></tr></table></figure>
<h2 id="字符串中可以出现换行符"><a href="#字符串中可以出现换行符" class="headerlink" title="字符串中可以出现换行符"></a>字符串中可以出现换行符</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">`&lt;ul&gt;</span></span><br><span class="line"><span class="string">               &lt;li&gt;白云&lt;/li&gt;</span></span><br><span class="line"><span class="string">               &lt;li&gt;太阳&lt;/li&gt;</span></span><br><span class="line"><span class="string">               &lt;li&gt;大海&lt;/li&gt;</span></span><br><span class="line"><span class="string">           &lt;/ul&gt;`</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br></pre></td></tr></table></figure>
<h1 id="简化对象写法"><a href="#简化对象写法" class="headerlink" title="简化对象写法"></a>简化对象写法</h1><p>ES6 允许在大括号里面，直接写入变量和函数，作为对象的属性和方法，这样的书写更加简洁<br><strong>以后用简写就对了</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;西西&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> age = <span class="number">22</span>;</span><br><span class="line"><span class="keyword">let</span> speak = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//属性和方法简写</span></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    speak</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">age</span>);</span><br><span class="line">person.<span class="title function_">speak</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h1><p>ES6 允许使用「箭头」（&#x3D;&gt;）定义函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params">arg1, arg2, arg3</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2 + arg3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>特点：</p>
<ul>
<li>如果形参只有一个，则小括号可以省略</li>
<li>函数体如果只有一条语句，则花括号可以省略，函数的返回值为该条语句的执行结果</li>
<li>箭头函数 this 指向声明时所在作用域下 this 的值，箭头函数不会更改 this 指向，用来指定回调函数会非常合适</li>
<li>箭头函数不能作为构造函数实例化</li>
<li>不能使用 arguments 实参<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">省略小括号的情况：</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = num =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> num * <span class="number">10</span>;</span><br><span class="line">&#125;;</span><br><span class="line">省略花括号的情况：</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = score =&gt; score * <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">this</span> 指向声明时所在作用域中 <span class="variable language_">this</span> 的值</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> school = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="title function_">subFun</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">subFun</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">school.<span class="title function_">getName</span>();</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="rest-参数"><a href="#rest-参数" class="headerlink" title="rest 参数"></a>rest 参数</h1><p>用于获取函数的实参，用来代替 arguments 参数<br><strong>rest参数非常适合不定个数参数函数的场景</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 作用与 arguments 类似</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">add</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// rest 参数必须是最后一个形参</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">minus</span>(<span class="params">a, b, ...args</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a, b, args);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">minus</span>(<span class="number">100</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">19</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="spread扩展运算符…"><a href="#spread扩展运算符…" class="headerlink" title="spread扩展运算符…"></a>spread扩展运算符…</h1><p>扩展运算符（spread）也是三个点（…），好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列，对数组进行解包</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 展开数组</span></span><br><span class="line"><span class="keyword">let</span> lover = [<span class="string">&quot;桃冕&quot;</span>,<span class="string">&quot;松瑰&quot;</span>,<span class="string">&quot;雾刃&quot;</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>(...lover);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 展开对象</span></span><br><span class="line"><span class="keyword">let</span> skillOne = &#123;</span><br><span class="line">    <span class="attr">q</span>: <span class="string">&quot;Q技能&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> skillTwo = &#123;</span><br><span class="line">    <span class="attr">w</span>: <span class="string">&quot;W技能&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> skillThree = &#123;</span><br><span class="line">    <span class="attr">e</span>: <span class="string">&quot;E技能&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> skillFour = &#123;</span><br><span class="line">    <span class="attr">r</span>: <span class="string">&quot;R技能&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> gailun = &#123;...skillOne, ...skillTwo, ...skillThree, ...skillFour&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gailun);</span><br></pre></td></tr></table></figure>
<h1 id="Symbol类型"><a href="#Symbol类型" class="headerlink" title="Symbol类型"></a>Symbol类型</h1><p><strong>遇到唯一性的场景时要想到 Symbol</strong></p>
<h2 id="Symbol的使用"><a href="#Symbol的使用" class="headerlink" title="Symbol的使用"></a>Symbol的使用</h2><p>ES6 引入了一种新的原始数据类型 Symbol，表示独一无二的值，它是 JavaScript 语言的第七种数据类型，是一种类似于字符串的数据类型，Symbol 特点如下：</p>
<p>Symbol 的值是唯一的，用来解决命名冲突的问题<br>Symbol 值不能与其它数据进行运算<br>Symbol 定义的对象属性不能使用 for…in 循环遍 历 ，但是可以使用 Reflect.ownKeys 来获取对象的所有键名</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);  <span class="comment">//Symbol()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//因为Symbol是基本数据类型，而不是对象，不能 new 。</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="keyword">new</span> <span class="title class_">Symbol</span>();<span class="comment">//报错，Symbol is not a constructor</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用Symbol()创建一个Symbol类型的值并赋值给a变量后，你就得到了一个在内存中独一无二的值。现在除了通过变量a，任何人在任何作用域内都无法重新创建出这个值</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="title class_">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> b = <span class="title class_">Symbol</span>();</span><br></pre></td></tr></table></figure>

<h1 id="class类"><a href="#class类" class="headerlink" title="class类"></a>class类</h1><p>ES6 提供了更接近传统语言的写法，引入了 Class（类）这个概念，作为对象的模板。通过 class 关键字，可以定义类。基本上，ES6 的 class 可以看作只是 一个语法糖，它的绝大部分功能，ES5 都可以做到，新的 class 写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已，它的一些如下：</p>
<p>class：声明类<br>constructor：定义构造函数初始化<br>extends：继承父类<br>super：调用父级构造方法<br>static：定义静态方法和属性</p>
<h2 id="创建类"><a href="#创建类" class="headerlink" title="创建类"></a>创建类</h2><p>class 作为对象的模板被引入ES6，你可以通过 class 关键字定义类。class 的本质依然是一个函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">person</span> &#123;</span><br><span class="line">		<span class="comment">//关键字声明方式</span></span><br><span class="line">		<span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">                  <span class="variable language_">this</span>.<span class="property">name</span>=name</span><br><span class="line">              &#125;           </span><br><span class="line">		<span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title function_">person</span>(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line">	p.<span class="title function_">say</span>(); <span class="comment">//&#x27;hello&#x27;</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h2><p>类的继承通过extends关键字实现。<br>子类必须在constructor中调用super()</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">		<span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title function_">say</span>(<span class="params"></span>) &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;:&quot;</span> + <span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">		<span class="title function_">constructor</span>(<span class="params">name, age, sex</span>) &#123;</span><br><span class="line">			<span class="variable language_">super</span>(name, age);</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">sex</span> = sex;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> student = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;admin&quot;</span>, <span class="number">12</span>, <span class="string">&quot;male&quot;</span>);</span><br><span class="line">	student.<span class="property">name</span>;   <span class="comment">//&#x27;admin&#x27;</span></span><br><span class="line">	student.<span class="property">sex</span>;    <span class="comment">//&#x27;male&#x27;</span></span><br><span class="line">	student.<span class="title function_">say</span>(); <span class="comment">//&#x27;ren:12&#x27;</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h1 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h1><h2 id="认识Promise"><a href="#认识Promise" class="headerlink" title="认识Promise"></a>认识Promise</h2><p>Promise是ES6引入的异步编程的新解决方案，语法上Promise是一个构造函数，用来封装异步操作并可以获取其成功或失败的结果。<br>Promise 是处理异步操作的重要工具之一。它提供了一种更加清晰和可控的方式来处理异步代码，避免了传统的回调地狱问题，并使得错误处理更为直观。</p>
<p>一个 Promise 对象代表一个异步操作的最终完成（或失败），及其结果值。它的状态有三种：<br>Pending（进行中）：初始状态，既不是成功也不是失败。<br>Fulfilled（已成功）：操作成功完成。<br>Rejected（已失败）：操作失败</p>
<h2 id="Promise基本使用"><a href="#Promise基本使用" class="headerlink" title="Promise基本使用"></a>Promise基本使用</h2><h3 id="创建Promise"><a href="#创建Promise" class="headerlink" title="创建Promise"></a>创建Promise</h3><p>通过构造函数 Promise 来创建一个新的 Promise 实例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 异步操作逻辑</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* 操作成功 */</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&#x27;成功的结果&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&#x27;失败的原因&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myPromise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 异步操作</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> success = <span class="literal">true</span>; <span class="comment">// 假设这是异步操作的结果</span></span><br><span class="line">        <span class="keyword">if</span> (success) &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(<span class="string">&quot;操作成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(<span class="string">&quot;操作失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>resolve 函数用于将 Promise 状态从 Pending 转变为 Fulfilled 并返回结果。<br>reject 函数用于将 Promise 状态从 Pending 转变为 Rejected 并返回原因</p>
</blockquote>
<h3 id="使用Promise"><a href="#使用Promise" class="headerlink" title="使用Promise"></a>使用Promise</h3><p>使用 .then() 方法来处理 Promise 成功的状态，.catch() 方法来处理失败的状态：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">myPromise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 输出: 操作成功</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// 输出: 操作失败</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="链式调用"><a href="#链式调用" class="headerlink" title="链式调用"></a>链式调用</h2><p>Promise 支持链式调用，这允许你在一系列异步操作之间传递数据而不丢失上下文：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">myPromise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第一步:&#x27;</span>, result);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;下一步的数据&#x27;</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">nextResult</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;第二步:&#x27;</span>, nextResult);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;遇到错误:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line">  --- </span><br><span class="line">  myPromise</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 处理成功的结果</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;新的值&quot;</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue); <span class="comment">// 处理新的值</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// 处理失败的结果</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Promise-all-和-Promise-race"><a href="#Promise-all-和-Promise-race" class="headerlink" title="Promise.all 和 Promise.race"></a>Promise.all 和 Promise.race</h2><h3 id="Promise-all-iterable"><a href="#Promise-all-iterable" class="headerlink" title="Promise.all(iterable)"></a>Promise.all(iterable)</h3><p>接收一个可迭代对象（如数组）作为参数，当所有 Promise 都变为 Fulfilled 时返回一个包含每个 Promise 结果的新 Promise。如果有任何一个被拒绝，则返回的 Promise 将立即拒绝</p>
<p>Promise.all()用于将多个 Promise 实例包装成一个新的 Promise 实例。当所有 Promise 都成功时，返回的结果是一个数组，包含每个 Promise 的结果；如果有一个 Promise 失败，则直接返回失败的结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">const</span> p3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3]).<span class="title function_">then</span>(<span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// [3, 42, &quot;foo&quot;]</span></span><br><span class="line">&#125;);</span><br><span class="line">---</span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// 输出: [1, 2, 3]</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Promise-race-iterable"><a href="#Promise-race-iterable" class="headerlink" title="Promise.race(iterable)"></a>Promise.race(iterable)</h3><p>接收一个可迭代对象作为参数，返回一个新的 Promise，该 Promise 在传入的任意一个 Promise 变为 Fulfilled 或 Rejected 时立即改变其状态并采用那个 Promise 的值或理由</p>
<p>Promise.race()用于将多个 Promise 实例包装成一个新的 Promise 实例。它会在第一个 Promise 完成或失败时立即返回结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">500</span>, <span class="string">&#x27;one&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&#x27;two&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([p1, p2]).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// &quot;two&quot;</span></span><br><span class="line">&#125;);</span><br><span class="line">--- </span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">1000</span>, <span class="string">&#x27;one&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">2000</span>, <span class="string">&#x27;two&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2])</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 输出: one</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><h3 id="异步数据获取"><a href="#异步数据获取" class="headerlink" title="异步数据获取"></a>异步数据获取</h3><p>假设你需要从一个API获取数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fetchData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="title function_">resolve</span>(data))</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="title function_">reject</span>(error));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fetchData</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// 处理获取的数据</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// 处理错误</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="链式调用-1"><a href="#链式调用-1" class="headerlink" title="链式调用"></a>链式调用</h3><p>假设你需要先获取用户数据，然后根据用户数据获取其他信息</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getUserData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/user&#x27;</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="title function_">resolve</span>(data))</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="title function_">reject</span>(error));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getOtherInfo</span> = (<span class="params">userId</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">fetch</span>(<span class="string">`https://api.example.com/other/<span class="subst">$&#123;userId&#125;</span>`</span>)</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="title function_">resolve</span>(data))</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="title function_">reject</span>(error));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getUserData</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">user</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(user); <span class="comment">// 处理用户数据</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">getOtherInfo</span>(user.<span class="property">id</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">otherInfo</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(otherInfo); <span class="comment">// 处理其他信息</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// 处理错误</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>ES6新特性</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAX知识整理</title>
    <url>/2024/04/21/05-ajax/</url>
    <content><![CDATA[<h1 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h1><h2 id="认识ajax"><a href="#认识ajax" class="headerlink" title="认识ajax"></a>认识ajax</h2><p>AJAX是浏览器与服务器进行数据通信的技术<br>AJAX原理：AJAX原理指的是XMLHttpRequest（XHR）这个对象</p>
<h3 id="AJAX用法"><a href="#AJAX用法" class="headerlink" title="AJAX用法"></a>AJAX用法</h3><p>axios.js是js库，一个在线的js库地址，可以直接使用<br><a href="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js">https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js</a><br> 引入 axios js文件：<br>    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script><br>如果不能下载可以去里面把内容复制贴贴到自己的.js<br>先引用axios.js （一个js库），再使用axios函数传入配置对象，再用.then回调函数接受结果并处理后续内容<br>axios({<br>    url:’目标资源地址’<br>}).then(</p>
<p>)</p>
<h4 id="axios的调用"><a href="#axios的调用" class="headerlink" title="axios的调用"></a>axios的调用</h4><p>axios({配置项})<br>.then(res&#x3D;&#x3D;&gt;{})&#x2F;&#x2F;返回成功的结果<br>.catch(err&#x3D;&gt;{})&#x2F;&#x2F;返回失败的结果<br>配置项:<br>url:’请求地址”<br>method:’请求方式   GET获取    POST提交数据”<br>params:{键:值,键:值}查询参数&#x2F;url参数&#x3D;→&gt;如果接口文档写的是Query参数就用params<br>data: {键:值,键:值}请求体参数提交参数&#x3D;&gt;如果接口文档写的是 body参数就用data<br>result.data.data可以解构成const{data:{data}}&#x3D;result</p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p>目标：请求数据，返回数据，并将页面渲染<br>首先引入axios.js文件，然后axios( )函数调用，里面（ { } ）写没对象的目标资源地址，在外面用.then方法处理异步请求的结果，使用result这个参数表示服务器返回的结果，result.data.data返回数组（具体几个data自己试试）最后data.join把数组反回成字符串<br>后端返回的结果都在result.data里面</p>
<h3 id="异步请求"><a href="#异步请求" class="headerlink" title="异步请求"></a>异步请求</h3><p>在编写程序时，代码的执行通常是按照顺序一步步执行的，即同步执行。但是，有时候我们会遇到一些需要等待一段时间才能得到结果的操作，比如从网络获取数据、读取文件等。在这种情况下，如果按照同步方式去执行，程序就会被阻塞，直到这些操作完成，才能继续执行后面的代码，这样就会造成程序的效率很低。<br>为了解决这个问题，引入了异步编程的概念。异步编程允许在执行某些操作时，程序可以继续执行后面的代码，而不必等待操作完成。当操作完成后，系统会通知程序，然后执行相应的回调函数来处理结果。<br>在Web开发中，常见的异步操作包括从服务器获取数据、发送网络请求、处理用户输入等。JavaScript中的异步操作通常使用回调函数、Promise对象、async&#x2F;await等方式来处理。<br>在你提到的axios的.then()方法中，.then()就是用来处理异步请求的一种方式。它的作用是在异步操作完成后执行传入的回调函数，处理异步操作的结果。</p>
<h3 id="url"><a href="#url" class="headerlink" title="url"></a>url</h3><p>url：统一资源定位符，简称网址，如同在网络上的门牌，作为万维网的地址，用于标识网络上的资源（网页资源，图片资源，数据资源）<br>组成：比如<a href="http://hmajax.itheima.net/api/province">http://hmajax.itheima.net/api/province</a>:<br>http：协议（钥匙）<br>hmajax.itheima.net：域名（地址）<br>&#x2F;api&#x2F;province：资源路径（物品位置）<br>http协议：超文本传输协议，规定浏览器和服务器之间传输数据的格式（浏览器以指定格式传输数据到服务器，服务器以指定格式解析服务器返回的资源）<br>域名：标记服务器在互联网中的方位<br>资源路径：标记资源在服务器下的具体位置</p>
<h3 id="查询参数params"><a href="#查询参数params" class="headerlink" title="查询参数params"></a>查询参数params</h3><p>使用axios提供的params选项<br>axios在运行时，参数名和值会拼接到url?参数名&#x3D;值<br>把？后面的要查询的参数名和值写道params里面<br>axios({url:’目标资源地址’<br>params:{<br>参数名:值<br>}<br>}).then(result &#x3D; &gt;{<br>&#x2F;&#x2F;对服务器返回的参数做后续处理<br>})<br>注意：多打印，确认属性名，以便准确取到数据</p>
<h3 id="常用请求方法"><a href="#常用请求方法" class="headerlink" title="常用请求方法"></a>常用请求方法</h3><p>get:获取数据<br>post:提交数据<br>put：修改数据（全部）<br>patch：修改数据（部分）<br>delete：删除数据<br>post场景：将数据保存到服务器上<br>method &#x3D; ‘post’ (不区分大小写）<br>通过axios post提交案例<br>不要省略请求方式，哪怕是默认的<br>axios({<br>url : ‘   ‘ ,<br>method: ‘  ‘ ,<br>params: { , }  ,  &#x2F;&#x2F;查询参数<br>data : {&#x2F;&#x2F;提交参数<br> uname:  ‘  ‘ ,<br> password: ‘ ‘ ,<br>}<br>}).then(res &#x3D;&gt; {<br>        alert(res.data.message)<br>      })</p>
<h4 id="处理错误信息"><a href="#处理错误信息" class="headerlink" title="处理错误信息"></a>处理错误信息</h4><p>console.log(error.response.data.message)</p>
<h3 id="接口文档"><a href="#接口文档" class="headerlink" title="接口文档"></a>接口文档</h3><p>接口文档：后端提供的描述接口的文章。后端把数据写到接口文档里，前端根据接口文档的文章进行数据交互<br>接口：使用AJAX和服务器通讯时，使用的url，请求方法以及参数<br>在F12网络里面能看到你给服务器的数据和服务器给你的数据</p>
<h3 id="form-serialize插件：用于快速收集表单元素的值"><a href="#form-serialize插件：用于快速收集表单元素的值" class="headerlink" title="form-serialize插件：用于快速收集表单元素的值"></a>form-serialize插件：用于快速收集表单元素的值</h3><p>官网：<br><a href="https://www.npmjs.com/package/form-serialize">https://www.npmjs.com/package/form-serialize</a><br>使用前先在<script src="  " ></script>引入插件|<br>表单和要收集的数据一定要有name属性，否则无法获取数据!!!<br>要把插件引入到代码中，使用data&#x3D;serialize函数<br>第一个参数要写你要手机的表单form，如document.querySelector(‘.from表单的类名’)<br>注意以下代码写的位置！<br>document.querSelector(‘.btn’).addEventListener(‘click’,()&#x3D;&gt;{<br>const data &#x3D; serialize(document.querySelector(‘.from表单的类名’, { hash: true, empty: true })<br>&#x2F;&#x2F;会得到对象格式的数据，并且能够获取为空的input，最常用<br>console.log(data)<br>})<br>如：<br> const form &#x3D; document.querySelector(‘.login-form’)<br>      const data &#x3D; serialize(form, { hash: true, empty: true })<br>      console.log(data)<br>      &#x2F;&#x2F;得到 {username: ‘itheima007’, password: ‘7654321’}<br>      const { username, password } &#x3D; data</p>
<pre><code>  // 获取用户名和密码用上面的方法替代下面这样一个一个获取
  // const username = document.querySelector(&#39;.username&#39;).value
  // const password = document.querySelector(&#39;.password&#39;).value
</code></pre>
<h2 id="报文"><a href="#报文" class="headerlink" title="报文"></a>报文</h2><h3 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h3><p>浏览器按照http协议要求的格式向服务器发出的内容<br>http协议：贵清了浏览器发送及服务器返回内容的格式<br>组成:<br>1、请求行：请求方法，url,协议（第一行）<br>2、请求头：以键值对的格式携带的附加信息（2-n行）<br>3、空行：分隔请求头，空行之后的是发送给服务器的资源（有的浏览器没有了）<br>4、请求体：发送的资源<br>查看方式：<br>浏览器F12 -控制台-网络-XHR-找到请求（地址资源的最后一个单词），看到标头就是报文，里面有请求报文，把原始选中就能看到。<br>发送的数据在载荷里，返回的数据在响应里<br>使用请求报文排查错误：<br>一定要先打开控制台再去执行操纵（输入数据登录）<br>输入正确的用户名和密码但是无法登陆：<br>去找请求报文，先看看请求行对不对，再看看载荷，如果有问题发现后去源代码找到修改</p>
<h3 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h3><p>服务器按照http协议要求的格式，返回给浏览器的内容<br>http协议：规定了浏览器发送及服务器返回内容的格式<br>组成：<br>1、响应行（状态行）：协议、http响应状态码、状态信息，告诉浏览器服务器给你的是什么样的数据格式（第一行）<br>2、响应头：以键值对的格式写道的附加信息（2-n行）<br>3、空行：分割响应头，空行之后的是服务器返回的资源<br>4、响应体：返回的资源<br>查看方式：<br>浏览器F12 -控制台-网络-XHR-找到请求（地址资源的最后一个单词），看到标头就是报文，里面有响应报文，把原始选中就能看到。<br>返回的数据在响应里，也可以看预览（都在控制台网络里）</p>
<h3 id="http响应状态码"><a href="#http响应状态码" class="headerlink" title="http响应状态码"></a>http响应状态码</h3><p>用来表明请求是否成功完成<br>状态码开头数和对应说明：<br>1.xx :信息<br>2xx :成功<br>3xx :重定向消息<br>4xx :客户端错误<br>5xx :服务端错误<br>主要看2和4，常见：<br>404：服务器找不到资源<br>400：客户端错误</p>
<h2 id="同步代码和异步代码"><a href="#同步代码和异步代码" class="headerlink" title="同步代码和异步代码"></a>同步代码和异步代码</h2><h3 id="认识"><a href="#认识" class="headerlink" title="认识"></a>认识</h3><p>同步代码：逐行执行，原地等待结果后执行下一行<br>异步代码：地哦啊用后耗时，不原地等待而是继续执行，在将来完成后触发一个回调函数<br>JS常见异步代码：计时器，事件，AJAX<br>回调函数地狱：在回调函数中嵌套回调函数，运筹好吃嵌套下去成了回调函数地狱<br>可读性差，异常无法捕获，耦合性严重，牵一发动全身</p>
<h3 id="上者解决：Promise链式调用"><a href="#上者解决：Promise链式调用" class="headerlink" title="上者解决：Promise链式调用"></a>上者解决：Promise链式调用</h3><p>依靠then()方法会返回一个新生成的Promise对象特性，继续串联下一环任务，直到结束<br>then()回调函数中的返回值，会影响新生成的 Promise对象最终状态和结果</p>
<h3 id="async函数和await"><a href="#async函数和await" class="headerlink" title="async函数和await"></a>async函数和await</h3><p>async函数是使用async关键字声明的函数。async函数是AsyncFunction构造函数的实例，并且其中允许使用await关键字。async和 await关键字让我们可以用一种更简洁的方式写出基于Promise 的异步行为，而无需刻意地链式调用promise<br>概念:在 async 函数内，使用await关键字取代 then 函数，等待获取Promise对象成功状态的结果值<br>捕获错误：try{}catch(){}</p>
<h3 id="事件循环"><a href="#事件循环" class="headerlink" title="事件循环"></a>事件循环</h3><p>js是单线程的（某一时刻只能执行一行代码），为了让耗时代码不阻塞其他代码执行，设计了事件循环模型<br>定义:执行代码和收集异步任务的模型，在调用栈空闲，反复调用任务队列里回调函数的执行机制，就叫事件循环<br>凡是耗时的异步代码都会放到宿主环境（浏览器）执行后结果给任务队列，等调用栈空闲后会循环带哦用任务队列的代码来执行</p>
<h3 id="宏任务与微任务（两种任务队列）"><a href="#宏任务与微任务（两种任务队列）" class="headerlink" title="宏任务与微任务（两种任务队列）"></a>宏任务与微任务（两种任务队列）</h3><p>宏任务:由浏览器环境执行的异步代码<br>微任务:由JS 引擎环境执行的异步代码</p>
<h3 id="promise-all静态方法"><a href="#promise-all静态方法" class="headerlink" title="promise.all静态方法"></a>promise.all静态方法</h3><p>能够把多个小的promise对象合并一个大的promise对象，等所有Promise对象成功进.then回调函数，有一个失败就进入.catch回调函数</p>
<h3 id="token访问权限的令牌"><a href="#token访问权限的令牌" class="headerlink" title="token访问权限的令牌"></a>token访问权限的令牌</h3><p>本质是一串字符串<br>正确登录后由后端签发并返回<br>用于判断是否有登陆状态等，控制访问权限</p>
<h2 id="常用框架"><a href="#常用框架" class="headerlink" title="常用框架"></a>常用框架</h2><h3 id="Bootstrap弹框"><a href="#Bootstrap弹框" class="headerlink" title="Bootstrap弹框"></a>Bootstrap弹框</h3><p>功能：不离开房前页面。显示单独内容，供用户操作<br>如何做：<br>先找到Bootstrap中文网（百度搜，搜不到用<a href="https://www.bootcss.com/">https://www.bootcss.com/</a> ）<br>    然后进最右边的v5的标签，然后点击进入中文文档<br>    然后到了这里 <a href="https://v5.bootcss.com/docs/getting-started/introduction/">https://v5.bootcss.com/docs/getting-started/introduction/</a><br>    在里面左边的树往下找找到compinent（组件）-&gt;modal(模态框组件)<br>    点开之后在右边！的树里面找到examples（例子）<br>    例子里面是各种类型的模态框，可以点每个弹框案件看看页面弹出来的弹框是不是你想要的<br>    选好之后复制它的代码然后放到body里面，注意提前在body的上面和下面分别引入.css和.js文件<br>    进入之后运行看看有没有弹框，有的话再进一步修改代码调整模态框<br>在找到modal文档里的example之后，右侧树往下看有Usage，里面的Via data attributes下面是自定义属性控制，里面的Via JavaScript下面是js方法控制<br>属性方式控制弹窗显示或隐藏：<br>先引入.css和.js文件（网上找）创建弹框对象：</p>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- 引入bootstrap.js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>
<p>通过自定义属性，控制弹框的显示和隐藏：<br>  <button type="button"   data-bs-toggle="modal" > 显示弹框   </button><br><button type="button"  data-bs-dismiss="modal">关闭弹窗</button><br>js方法控制弹窗显示或隐藏：<br>先引入.css和.js文件（网上找）创建弹框对象：</p>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- 引入bootstrap.js -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"></script>
  在进入模态框之后，在下面写<script></script>,在里面写Js方法
  // 先创建弹框对象
    const modalDom = document.querySelector('.name-box')
    const modal = new bootstrap.Modal(modalDom)
然后调用弹框对象内置方法
      .show() 显示
      .hide() 隐藏
二者区别：第一种的标签里面有data-自定义属性，第二种里面没有，在下面写.js文件就可以 ]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>axios</tag>
        <tag>网络请求</tag>
      </tags>
  </entry>
  <entry>
    <title>JsvsScript基础整理</title>
    <url>/2024/03/31/04-js/</url>
    <content><![CDATA[<h1 id="JsvsScript介绍"><a href="#JsvsScript介绍" class="headerlink" title="JsvsScript介绍"></a>JsvsScript介绍</h1><p>JavaScript是一门编译语言，也称为”动态”或”解释执行”语言。和传统的便于语言不通，他不是提前编译的，编译结果也不能再分布式系统中进行转移，任何js代码片段再执行前都要进行编译，通常会马上执行它。<br>进一步说，JavaScript 是一种基于原型、多范式、单线程的动态语言，并且支持面向对象、命令式和声明式（如函数式编程）风格。</p>
<h2 id="JsvsScript特点"><a href="#JsvsScript特点" class="headerlink" title="JsvsScript特点"></a>JsvsScript特点</h2><p>是一门解释型语言：是指不需要被编译为机器码在执行，而是直接执行。<br>是一门动态语言，所谓的动态语言可以暂时理解为在语言中的一切内容都是不确定的。<br>是一门动态语言，所谓的动态语言可以暂时理解为在语言中的一切内容都是不确定的。<br>是一门面向对象的语言。<br>严格区分大小写。</p>
<h1 id="JsvsScript基础"><a href="#JsvsScript基础" class="headerlink" title="JsvsScript基础"></a>JsvsScript基础</h1><h2 id="如何使用js"><a href="#如何使用js" class="headerlink" title="如何使用js"></a>如何使用js</h2><p>书写位置：</p>
<ul>
<li>内部Js写在&#x2F;body上方<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">alert</span>(<span class="string">&quot;Hello,World!&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>外部写在script里面<br><code>&lt;script src=&quot;main.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<h2 id="输入输出语法"><a href="#输入输出语法" class="headerlink" title="输入输出语法"></a>输入输出语法</h2><p>prompt()输入</p>
<ul>
<li><code>let uname=prompt(&#39;请输入姓名&#39;)</code></li>
<li>document.write(‘向页面输出此内容’)</li>
<li>alert(‘页面弹出警告对话框’)</li>
<li>控制台输出：</li>
<li><ul>
<li>console.log(‘控制台打印输出’)</li>
</ul>
</li>
<li><ul>
<li>console.log(uname,age)</li>
</ul>
</li>
<li><ul>
<li>console.info(“输出一条信息”);</li>
</ul>
</li>
<li><ul>
<li>console.warn(“输出一条警告”);</li>
</ul>
</li>
<li><ul>
<li>console.error(“输出一条错误”);</li>
</ul>
</li>
</ul>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p>&#x2F;&#x2F; 单行注解<br>&#x2F;* 多行注解 *&#x2F; </p>
<h2 id="变量常量"><a href="#变量常量" class="headerlink" title="变量常量"></a>变量常量</h2><h3 id="变量声明var-let"><a href="#变量声明var-let" class="headerlink" title="变量声明var let"></a>变量声明var let</h3><ul>
<li>变量本质：是程序在内存中申请的一块用来存放数据的小空间</li>
</ul>
<ol>
<li>var<br>是js最早的变量声明方式，有函数作用域，没有块级作用域<br>  <strong>var声明过的变量可以重复声明（不合理但可以）<br>  var可以先使用再声明（不合理但可以）</strong><br>  声明变量：var name&#x3D;’xixi’<br>  多个变量逗号隔开let age&#x3D;22,uname&#x3D;’西西’ </li>
<li>let<br>声明块级作用域，更安全，尽量使用</li>
</ol>
<h3 id="常量声明const"><a href="#常量声明const" class="headerlink" title="常量声明const"></a>常量声明const</h3><p>不能重新赋值，也有块级作用域<br>常量声明时候必须初始化</p>
<blockquote>
<p>在JavaScript中，块级作用域是指变量在特定代码块中（如一个函数、循环或条件语句）声明后，其作用范围仅限于该代码块内</p>
</blockquote>
<h3 id="变量命名规则"><a href="#变量命名规则" class="headerlink" title="变量命名规则"></a>变量命名规则</h3><ul>
<li>不能用关键字</li>
<li>严格区分大小写:Name和name不一样</li>
<li>只能用下划线。字母，数字，$组成</li>
<li>数字不能开头</li>
<li>遵循小驼峰命名法，如userAge</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="typeof运算符"><a href="#typeof运算符" class="headerlink" title="typeof运算符"></a>typeof运算符</h3><p>typeof运算符检查数据是什么类型<br>console.log(typeof 变量)</p>
<h3 id="原始数据类型"><a href="#原始数据类型" class="headerlink" title="原始数据类型"></a>原始数据类型</h3><ul>
<li>String 字符串：表示文本数据，可以用<strong>单引号、双引号或反引号包围</strong>console.log(‘string’)</li>
<li>Number 数字：表示整数和浮点数<br>输出<strong>单纯输出变量就可以，不要加引号</strong> console.log(变量名)</li>
<li>Boolean 布尔值：表示true或false</li>
<li>Null 空值：表示空或无值</li>
<li>NaN 代表一个错误计算，它是一个不正确的或者一个未定义的数学操纵得到的结果<br>console.log(‘水果’-5) &#x2F;&#x2F;NaN<br>console.log(NaN-5) &#x2F;&#x2F;NaN </li>
<li>Undefined 未定义：表示变量未赋值</li>
<li>Symbol 符号：表示唯一的标识符，常用于对象属性</li>
</ul>
<blockquote>
<p>之外的类型都称为Object<br>undefined值实际上是由null值衍生出来的，所以如果比较undefined和null是否相等，会返回true。<br>从语义上看null表示的是一个空的对象，所以使用typeof检查null会返回一个Object</p>
</blockquote>
<h3 id="引用数据类型"><a href="#引用数据类型" class="headerlink" title="引用数据类型"></a>引用数据类型</h3><ul>
<li>Object 对象：键值对的集合，用于存储和管理数据<br>let person &#x3D; {<br>name: ‘Bob’,<br>age: 30,<br>isEmployee: true<br>};</li>
<li>Array 数组：有序集合，可以包含多种类型的数据<br>let fruits &#x3D; [‘apple’, ‘banana’, ‘cherry’];</li>
<li>Function 函数：可调用的代码块</li>
</ul>
<h2 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h2><p>拼接字符串和变量：<br>document.write(‘我想买’+num+’个西瓜’)<br>模板字符串：拼接内容用${}包裹住变量<br>document.write(<code>我想买$&#123;num&#125;个西瓜</code>)注意用反引号</p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="隐式转换"><a href="#隐式转换" class="headerlink" title="隐式转换"></a>隐式转换</h3><p>隐式转换：某些运算被执行时，系统内部自动将数据类型进行转换<br>+号两边只要有一个是字符串，都会把另外一个转成字符串<br>除了+以外的算数运算发如-*&#x2F;也都可以<br>使用：+号作为正号解析可以转换成数字型<br>任何数据和字符串相加的结果都是字符串<br>console.log(1+1)       &#x2F;&#x2F;2<br>console.log(1+’good’)  &#x2F;&#x2F;1good<br>console.log(2+’2’)     &#x2F;&#x2F;22<br>console.log(2-2)       &#x2F;&#x2F;0<br>console.log(2-‘2’)     &#x2F;&#x2F;0<br>console.log(11 +’11’)   &#x2F;&#x2F;22<br>console.log(1 * ‘1’)   &#x2F;&#x2F;1<br>console.log(+’123’)    &#x2F;&#x2F;123 转换为数字型（隐式转换）<br>console.log(+123)      &#x2F;&#x2F;123<br>console.log(typeof ‘123’)   &#x2F;&#x2F;string<br>console.log(typeof +’123’)  &#x2F;&#x2F;number</p>
<h3 id="显示转换"><a href="#显示转换" class="headerlink" title="显示转换"></a>显示转换</h3><p>自己写代码告诉系统该转换成什么类型</p>
<h4 id="转换为数字型-Number-数据"><a href="#转换为数字型-Number-数据" class="headerlink" title="转换为数字型 Number(数据)"></a>转换为数字型 Number(数据)</h4><p>如：转化为int型，只要整数，一刀切<br>console.log(parseInt(‘12px’))       &#x2F;&#x2F;12<br>console.log(parseInt(‘12.34px’))    &#x2F;&#x2F;12<br>console.log(parseInt(‘12.67px’))    &#x2F;&#x2F;12<br>转换为布尔值Boolean(数据)</p>
<h4 id="转换为String类型"><a href="#转换为String类型" class="headerlink" title="转换为String类型"></a>转换为String类型</h4><p>转换为字符串有三种方式：toString()、String()、 拼串(为任意的数据类型+””)<br>比如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">a = a + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> a);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><h3 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h3><p>let sum &#x3D; 5 + 3; &#x2F;&#x2F; 8<br>let difference &#x3D; 5 - 3; &#x2F;&#x2F; 2<br>let product &#x3D; 5 * 3; &#x2F;&#x2F; 15<br>let quotient &#x3D; 5 &#x2F; 3; &#x2F;&#x2F; 1.666…<br>let remainder &#x3D; 5 % 3; &#x2F;&#x2F; 2<br>let power &#x3D; 5 ** 3; &#x2F;&#x2F; 125</p>
<h3 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h3><p>&#x3D;&#x3D;两边的值是否相等<br>&#x3D;&#x3D;&#x3D;两边的值和类型是否都相等（推荐使用）<br>let isEqual &#x3D; 5 &#x3D;&#x3D; ‘5’; &#x2F;&#x2F; true<br>let isStrictEqual &#x3D; 5 &#x3D;&#x3D;&#x3D; ‘5’; &#x2F;&#x2F; false</p>
<h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>与&amp;&amp; 或|| 非!<br>let isAdult &#x3D; age &gt;&#x3D; 18 &amp;&amp; age &lt; 65;<br>let isChildOrSenior &#x3D; age &lt; 18 || age &gt;&#x3D; 65;<br>let isNotAdult &#x3D; !isAdult;</p>
<h3 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h3><p>将等号右边的值赋予给左边，左边必须是一个容器<br>赋值：&#x3D;  加法赋值：+&#x3D;  减法赋值：-&#x3D;  乘法赋值：*&#x3D;<br>除法赋值：&#x2F;&#x3D;  取余赋值：%&#x3D;  幂赋值：**&#x3D;</p>
<h4 id="自增运算符-同自减运算符"><a href="#自增运算符-同自减运算符" class="headerlink" title="自增运算符(同自减运算符)"></a>自增运算符(同自减运算符)</h4><p><strong>前置自增 先增加再运算</strong> let i&#x3D;1 console.log(++i +1) &#x2F;&#x2F;i&#x3D;2 结果3<br><strong>后置自增 先运算再增加</strong> let i&#x3D;1 console.log(i++ +1) &#x2F;&#x2F;结果2 i&#x3D;2</p>
<h3 id="三元运算符"><a href="#三元运算符" class="headerlink" title="三元运算符"></a>三元运算符</h3><p>条件 ？ 满足条件执行的代码:不满足条件执行的代码<br>如：判断输出是否小于10，如果小于0前面补0<br>num&lt;10? 0+num : num</p>
<h3 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h3><p>运算符优先级由上到下依次减小，对于同级运算符，采用从左向右依次执行的方法。<br><img src="/./postImgs/jsImgs/js1.png" alt="运算符优先级展示"></p>
<h2 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h2><p>表达式：能有一个返回的结果<br>语句：一段可以执行的代码（行为）</p>
<h3 id="分支结构（选择执行）"><a href="#分支结构（选择执行）" class="headerlink" title="分支结构（选择执行）"></a>分支结构（选择执行）</h3><p>if用于区间判断，switch用于等值判断</p>
<h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><p>根据条件判断真假，来选择性的执行代码<br>if(条件){<br>满足条件执行的代码<br>}<br>条件为真则执行{ }里的代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">if(expression1)</span><br><span class="line">    statement</span><br><span class="line">else if(expression2)</span><br><span class="line">    statement</span><br><span class="line">else</span><br><span class="line">    statement    </span><br></pre></td></tr></table></figure>
<h4 id="三元运算符-1"><a href="#三元运算符-1" class="headerlink" title="三元运算符"></a>三元运算符</h4><p>条件 ? 表达式1 : 表达式2<br>条件满足执行1不满足执行2</p>
<h4 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(表达式)&#123;</span><br><span class="line"><span class="keyword">case</span> 值<span class="number">1</span> :</span><br><span class="line">要执行的代码<span class="number">1</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> 值<span class="number">2</span> :</span><br><span class="line">要执行的代码<span class="number">2</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">default</span>;</span><br><span class="line">要执行的代码n</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> today = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span> (today) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期二&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期三&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期四&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期五&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期六&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;星期日&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;输入错误&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="循环结构（重复执行）"><a href="#循环结构（重复执行）" class="headerlink" title="循环结构（重复执行）"></a>循环结构（重复执行）</h3><h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(循环条件)&#123;</span><br><span class="line">要重复执行的代码,循环体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    i++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="do…while"><a href="#do…while" class="headerlink" title="do…while"></a>do…while</h4><p><strong>do…while循环会至少执行一次</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">do</span>&#123;</span><br><span class="line">    语句...</span><br><span class="line">&#125;<span class="keyword">while</span>(条件表达式);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">    i++;</span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt;= <span class="number">10</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><p>for(初始化表达式 ; 循环条件表达式 ; 更新表达式){<br>    语句…<br>}</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="break、continue和label"><a href="#break、continue和label" class="headerlink" title="break、continue和label"></a>break、continue和label</h4><p>break：结束最近的一次循环，可以在循环和switch语句中使用。<br>continue：结束本次循环，执行下一次循环，只能在循环中使用。<br>如果想要跳出多层循环或者跳到指定位置，可以为循环语句创建一个label，来标识当前的循环，如下例子：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">outer</span>: <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (j == <span class="number">5</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span> outer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>数组:(Array)是一种数据类型，属于引用数据类型作用:在单个变量名下存储多个数据<br><strong>注意数组是按序保存的，可以存储任意类型数据</strong></p>
<h2 id="创建数组"><a href="#创建数组" class="headerlink" title="创建数组"></a>创建数组</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">1</span>, <span class="string">&quot;2&quot;</span>, <span class="number">3</span>, <span class="string">&quot;4&quot;</span>, <span class="number">5</span>, <span class="string">&quot;6&quot;</span>, <span class="number">7</span>, <span class="string">&quot;8&quot;</span>, <span class="number">9</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">arr3[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">arr3[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">arr3[<span class="number">2</span>] = <span class="number">3</span>;</span><br><span class="line">arr3[<span class="number">3</span>] = <span class="number">4</span>;</span><br><span class="line">arr3[<span class="number">4</span>] = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<h3 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h3><ol>
<li>for循环<br>数组长度：数组名.length，长度比索引多一个<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [数据<span class="number">1</span>，数据<span class="number">2</span>，...,数据n]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span> ; i &lt;= arr. length-<span class="number">1</span>  ;i++)&#123;</span><br><span class="line">i <span class="variable language_">console</span>.<span class="title function_">log</span>(names[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>forEach遍历数组<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;西瓜&quot;</span>, <span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;鸭梨&quot;</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value, index, obj</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value + index +  obj);</span><br><span class="line">&#125;);</span><br><span class="line">西瓜 <span class="number">0</span> 西瓜，苹果，鸭梨</span><br><span class="line">苹果 <span class="number">1</span> 西瓜，苹果，鸭梨</span><br><span class="line">鸭梨 <span class="number">2</span> 西瓜，苹果，鸭梨</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="数组方法"><a href="#数组方法" class="headerlink" title="数组方法"></a>数组方法</h2><h3 id="push-方法"><a href="#push-方法" class="headerlink" title="push()方法"></a>push()方法</h3><p>push()方法：可以向数组的末尾添加一个或多个元素，并返回数组的新的长度</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.<span class="title function_">push</span>(<span class="string">&quot;4&quot;</span>, <span class="string">&quot;5&quot;</span>, <span class="string">&quot;6&quot;</span>, <span class="string">&quot;7&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);     <span class="comment">//(7)[&quot;1&quot;&quot;2&quot;&quot;3&quot;&quot;4&quot;&quot;5&quot;&quot;6&quot;&quot;7&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);  <span class="comment">//7</span></span><br></pre></td></tr></table></figure>
<h3 id="pop-方法"><a href="#pop-方法" class="headerlink" title="pop()方法"></a>pop()方法</h3><p>pop()方法可以删除数组的最后一个元素，并将被删除的元素作为返回值返回</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.<span class="title function_">pop</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);  <span class="comment">//(2)[&quot;1&quot;&quot;2&quot;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);  <span class="comment">//3</span></span><br></pre></td></tr></table></figure>
<h3 id="unshift-方法"><a href="#unshift-方法" class="headerlink" title="unshift()方法"></a>unshift()方法</h3><p>unshift()方法向数组开头添加一个或多个元素，并返回新的数组长度</p>
<h3 id="shift-方法"><a href="#shift-方法" class="headerlink" title="shift()方法"></a>shift()方法</h3><p>shift()方法可以删除数组的第一个元素，并将被删除的元素作为返回值返回</p>
<h3 id="forEach-方法"><a href="#forEach-方法" class="headerlink" title="forEach()方法"></a>forEach()方法</h3><p>forEach()方法用来遍历数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;西瓜&quot;</span>, <span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;鸭梨&quot;</span>];</span><br><span class="line">arr.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">value, index, obj</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value + index +  obj);</span><br><span class="line">&#125;);</span><br><span class="line">西瓜 <span class="number">0</span> 西瓜，苹果，鸭梨</span><br><span class="line">苹果 <span class="number">1</span> 西瓜，苹果，鸭梨</span><br><span class="line">鸭梨 <span class="number">2</span> 西瓜，苹果，鸭梨</span><br></pre></td></tr></table></figure>
<h3 id="slice-方法"><a href="#slice-方法" class="headerlink" title="slice()方法"></a>slice()方法</h3><p>slice()方法用来从数组提取指定元素，该方法不会改变元素数组，而是将截取到的元素封装到一个新数组中返回<br>索引从0开始<br>第一个参数：截取开始的位置的索引，包含开始索引<br>第二个参数：截取结束的位置的索引，不包含结束索引，第二个参数可以省略不写，此时会截取从开始索引往后的所有元素<br>注意：索引可以传递一个负值，如果传递一个负值，则从后往前计算，-1代表倒数第一个，-2代表倒数第二个。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;西瓜&quot;</span>, <span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;鸭梨&quot;</span>,<span class="string">&quot;草莓&quot;</span>,<span class="string">&quot;哈密瓜&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.<span class="title function_">slice</span>(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">//(3) [&quot;苹果&quot;,&quot;鸭梨&quot;,&quot;草莓&quot;]</span></span><br><span class="line">result = arr.<span class="title function_">slice</span>(<span class="number">3</span>); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">//(2) [&quot;草莓&quot;,&quot;哈密瓜&quot;]</span></span><br><span class="line">result = arr.<span class="title function_">slice</span>(<span class="number">1</span>, -<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">//(2) [&quot;苹果&quot;,&quot;鸭梨&quot;]</span></span><br></pre></td></tr></table></figure>
<h3 id="splice-方法"><a href="#splice-方法" class="headerlink" title="splice()方法"></a>splice()方法</h3><p>splice()方法用于删除数组中的指定元素，该方法会影响到原数组，会将指定元素从原数组中删除，并将被删除的元素作为返回值返回<br>第一个参数：表示开始位置的索引<br>第二个参数：表示要删除的元素数量<br>第三个参数及以后参数：可以传递一些新的元素，这些元素将会自动插入到开始位置索引前边</p>
<h3 id="concat-方法"><a href="#concat-方法" class="headerlink" title="concat()方法"></a>concat()方法</h3><p>concat()方法连接两个或多个数组，并将新的数组返回，该方法不会对原数组产生影响</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;孙悟空&quot;</span>, <span class="string">&quot;猪八戒&quot;</span>, <span class="string">&quot;沙和尚&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="string">&quot;白骨精&quot;</span>, <span class="string">&quot;玉兔精&quot;</span>, <span class="string">&quot;蜘蛛精&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> arr3 = [<span class="string">&quot;二郎神&quot;</span>, <span class="string">&quot;太上老君&quot;</span>, <span class="string">&quot;玉皇大帝&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.<span class="title function_">concat</span>(arr2, arr3, <span class="string">&quot;牛魔王&quot;</span>, <span class="string">&quot;铁扇公主&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="join-方法"><a href="#join-方法" class="headerlink" title="join()方法"></a>join()方法</h3><p>join()方法将数组转换为一个字符串，该方法不会对原数组产生影响，而是将转换后的字符串作为结果返回，在join()中可以指定一个字符串作为参数，这个字符串将会成为数组中元素的连接符，如果不指定连接符，则默认使用，作为连接符</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;孙悟空&quot;</span>, <span class="string">&quot;猪八戒&quot;</span>, <span class="string">&quot;沙和尚&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> result = arr.<span class="title function_">join</span>(<span class="string">&quot;@-@&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="reverse-方法"><a href="#reverse-方法" class="headerlink" title="reverse()方法"></a>reverse()方法</h3><p>reverse()方法用来反转数组（前边的去后边，后边的去前边），该方法会直接修改原数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;孙悟空&quot;</span>, <span class="string">&quot;猪八戒&quot;</span>, <span class="string">&quot;沙和尚&quot;</span>];</span><br><span class="line">arr.<span class="title function_">reverse</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr);</span><br></pre></td></tr></table></figure>

<h1 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h1><p>对象是js里的一种数据类型（引用类型），也是用于存储数据的<br>对象本质是无序的数据集合<br>好处：可以用来详细的描述某个事物，是用键值对的形式存储，语义更明了</p>
<p><strong>声明对象使用大括号；声明数组使用中括号</strong></p>
<h2 id="属性和方法"><a href="#属性和方法" class="headerlink" title="属性和方法"></a>属性和方法</h2><p>属性：对事物的描述信息，如姓名一般是名词<br>方法：事物的行为，如跑步一般是动词<br>方法是成对出现的，包括方法名和匿名函数<br>方法名和匿名函数之间使用英文∶分隔<br>多个方法之间使用英文，分隔，方法是无序的<br>方法是依附在对象中的函数（对象外是函数，对象内是方法）<br>对象方法也可以传参</p>
<h3 id="创建对象两种方法"><a href="#创建对象两种方法" class="headerlink" title="创建对象两种方法"></a>创建对象两种方法</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> dog = &#123;</span><br><span class="line">uname : <span class="string">&#x27;笨笨 &#x27;</span>,</span><br><span class="line">sing : <span class="keyword">function</span>(<span class="params"> </span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">dog</span>( <span class="string">&#x27; 汪汪 &#x27;</span> )</span><br><span class="line">&#125; , </span><br><span class="line"><span class="attr">play</span>: <span class="keyword">function</span>(<span class="params"> </span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">dog</span>( <span class="string">&#x27; 跑步 &#x27;</span> )</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> dog = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">dog.<span class="property">name</span> = <span class="string">&#x27;笨笨 &#x27;</span>,</span><br><span class="line">dog.<span class="property">age</span> = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">dog.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;汪汪, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line">dog.<span class="title function_">greet</span>(); <span class="comment">// 输出: 汪汪, my name is 笨笨</span></span><br></pre></td></tr></table></figure>
<h3 id="访问属性两种方法"><a href="#访问属性两种方法" class="headerlink" title="访问属性两种方法"></a>访问属性两种方法</h3><p>调用对象的sing方法<br>dog.sing( )</p>
<ul>
<li>对于多词属性比如中横线分割的属性dog-ben，点操作就不能用了<br>我们可以采取:对象 [ ‘ 属性 ‘ ] 方式，单引号和双引号都可，也可以用于其他正常属性<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj=&#123;</span><br><span class="line">dog-ben = <span class="string">&quot;笨笨&quot;</span></span><br><span class="line">age = <span class="number">6</span></span><br><span class="line">&#125;</span><br><span class="line">获取属性</span><br><span class="line">obj [ <span class="string">&#x27; dog-ben &#x27;</span> ] </span><br><span class="line">obj [ <span class="string">&#x27; age &#x27;</span> ]</span><br></pre></td></tr></table></figure></li>
<li><strong>点语法：使用.操作符访问属性</strong><br>console.log(person.name); &#x2F;&#x2F; 输出: Alice</li>
<li><strong>方括号语法：使用[]符操作访问属性，通常用于动态属性名或属性名包含特殊字符</strong><br>console.log(person[‘age’]); &#x2F;&#x2F; 输出: 25<br>const key &#x3D; ‘name’;<br>console.log(person[key]); &#x2F;&#x2F; 输出: Alice</li>
</ul>
<h4 id="增删改属性"><a href="#增删改属性" class="headerlink" title="增删改属性"></a>增删改属性</h4><ul>
<li>添加属性：直接为对象指定新的属性名和值<br>person.job &#x3D; ‘Engineer’;</li>
<li>修改属性：通过属性名直接赋值即可<br>person.age &#x3D; 26;</li>
<li>删除属性：使用delete操作可以符删除对象的属性<br>delete person.age;</li>
</ul>
<h3 id="遍历对象中的属性"><a href="#遍历对象中的属性" class="headerlink" title="遍历对象中的属性"></a>遍历对象中的属性</h3><p>枚举遍历对象中的属性，可以使用for … in语句循环，对象中有几个属性，循环体就会执行几次</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> 变量 <span class="keyword">in</span> 对象) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;zhangsan&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> personKey <span class="keyword">in</span> person) &#123;</span><br><span class="line">    <span class="keyword">var</span> personVal = person[personKey];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(personKey + <span class="string">&quot;:&quot;</span> + personVal);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>构造函数：构造函数就是一个普通的函数，创建方式和普通函数没有区别，不同的是构造函数习惯上首字母大写，构造函数和普通函数的还有一个区别就是调用方式的不同，普通函数是直接调用，而构造函数需要使用new关键字来调用。</p>
<p>那构造函数是怎么执行创建对象的过程呢:<br>调用构造函数，它会立刻创建一个新的对象<br>将新建的对象设置为函数中this，在构造函数中可以使用this来引用新建的对象<br>逐行执行函数中的代码<br>将新建的对象作为返回值返回</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> alice = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">const</span> bob = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Bob&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(alice.<span class="property">name</span>); <span class="comment">// 输出: Alice</span></span><br><span class="line">bob.<span class="title function_">greet</span>(); <span class="comment">// 输出: Hello, my name is Bob</span></span><br></pre></td></tr></table></figure>
<p>构造函数是一种用于创建特定类型对象的函数，通常以大写字母开头，通过new关键字创建实例。</p>
<h3 id="类-class"><a href="#类-class" class="headerlink" title="类 class"></a>类 class</h3><p>ES6 引入了class关键字，使得定义对象和继承更加简洁。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> alice = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="number">25</span>);</span><br><span class="line">alice.<span class="title function_">greet</span>(); <span class="comment">// 输出: Hello, my name is Alice</span></span><br></pre></td></tr></table></figure>
<h3 id="对象数组"><a href="#对象数组" class="headerlink" title="对象数组"></a>对象数组</h3><p>例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> students =[</span><br><span class="line">&#123; name : <span class="string">&#x27;小明&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>:, <span class="attr">hometown</span>:<span class="string">&#x27;河北省&#x27;</span>&#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;小红&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>, <span class="attr">hometown</span>:<span class="string">&#x27;河南省&#x27;</span>&#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;小刚&#x27;</span>, <span class="attr">age</span>: <span class="number">17</span>, <span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>, hometown : <span class="string">&#x27;山西省&#x27;</span>&#125;,</span><br><span class="line">&#123; <span class="attr">name</span>: <span class="string">&#x27;小丽&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span>, hometown : <span class="string">&#x27;山东省&#x27;</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>遍历对象数组：把对象数组中的所有家乡打印出来<br>利用for in 遍历对象<br>for (let 变量  in 对象名) {<br>console.log(变量)                  &#x2F;&#x2F;属性名<br>console.log( 对象 [ 变量 ] )   &#x2F;&#x2F;属性值<br>}</li>
</ul>
<p>for (let key  in 对象名) {<br>console.log(变量)                  &#x2F;&#x2F;属性名<br>console.log( 对象名 [key] )   &#x2F;&#x2F;属性值<br>&#x2F;&#x2F;注意 key是每一个属性名，类型是字符串，所以必须用 [ ] 语法<br>}</p>
<h3 id="对象操作"><a href="#对象操作" class="headerlink" title="对象操作"></a>对象操作</h3><h4 id="for…in循环：遍历对象的可枚举属性"><a href="#for…in循环：遍历对象的可枚举属性" class="headerlink" title="for…in循环：遍历对象的可枚举属性"></a>for…in循环：遍历对象的可枚举属性</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="attr">job</span>: <span class="string">&#x27;Engineer&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&#x27;: &#x27;</span> + person[key]);</span><br><span class="line">&#125;</span><br><span class="line">- <span class="title class_">Object</span>.<span class="title function_">keys</span>()：返回对象的可枚举属性名数组</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(person)); <span class="comment">// 输出: [&#x27;name&#x27;, &#x27;age&#x27;, &#x27;job&#x27;]</span></span><br><span class="line">- <span class="title class_">Object</span>.<span class="title function_">values</span>()：返回对象的可枚举属性值数组</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">values</span>(person)); <span class="comment">// 输出: [&#x27;Alice&#x27;, 25, &#x27;Engineer&#x27;]</span></span><br><span class="line">- <span class="title class_">Object</span>.<span class="title function_">entries</span>()：返回对象的可枚举属性键值对数据库</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">entries</span>(person)); <span class="comment">// 输出: [[&#x27;name&#x27;, &#x27;Alice&#x27;], [&#x27;age&#x27;, 25], [&#x27;job&#x27;, &#x27;Engineer&#x27;]]</span></span><br></pre></td></tr></table></figure>
<h4 id="合并对象-Object-assign-："><a href="#合并对象-Object-assign-：" class="headerlink" title="合并对象 Object.assign()："></a>合并对象 Object.assign()：</h4><p>Object.assign()：将一个或多个源对象的属性复制到目标对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> target = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> source = &#123; <span class="attr">b</span>: <span class="number">4</span>, <span class="attr">c</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title class_">Object</span>.<span class="title function_">assign</span>(target, source);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出: &#123; a: 1, b: 4, c: 5 &#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="展开运算符："><a href="#展开运算符：" class="headerlink" title="展开运算符："></a>展开运算符：</h4><p>展开运算符：ES6提供了一种更简洁的对象合并方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> result = &#123; ...target, ...source &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出: &#123; a: 1, b: 4, c: 5 &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="对象解构"><a href="#对象解构" class="headerlink" title="对象解构"></a>对象解构</h3><p>ES6提供了一种简洁的方法从对象中提取属性值并给变量</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = person;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// 输出: Alice</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 输出: 25</span></span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><p>函数：可以被重复使用的代码<br>函数可以把具有相同或相似逻辑的代码<br>“包裹”起来，这么做的优势是有利于代码复用</p>
<h2 id="定义函数："><a href="#定义函数：" class="headerlink" title="定义函数："></a>定义函数：</h2><h3 id="无参函数"><a href="#无参函数" class="headerlink" title="无参函数"></a>无参函数</h3><p>function 函数名( ) {<br>代码块<br>}<br>调用函数：函数名( )<br>什么时候调用函数，什么时候执行 </p>
<h3 id="有参函数"><a href="#有参函数" class="headerlink" title="有参函数"></a>有参函数</h3><p>  function 函数名( 参数1，参数2) {<br>return 参数1+参数2<br>}<br>调用函数：函数名(参数1，参数2 )<br>调用函数输出结果是参数之和参数1+参数2</p>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h3><p>没有名字的函数<br>function(){<br>代码块<br>}</p>
<ul>
<li>函数表达式(函数表达式不能再函数声明之前调用)<br>let fn &#x3D; function(){<br>代码块<br>}<br>调用fn( )</li>
<li>立即执行函数<br>不需要调用立即执行（本质上已经调用过了）<br>避免全局变量之间的污染，多个立即执行函数要用分号隔开，不然会报错<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//立即执行函数写法一 注意分号！</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"> </span>) &#123; &#125; ) ( ) ;</span><br><span class="line"><span class="comment">//立即执行函数写法二</span></span><br><span class="line">( <span class="keyword">function</span>(<span class="params"> </span>) &#123; &#125; )</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><p>ES6 引入简洁的函数语法。箭头函数不会创建自己的this，而是从作用父域中继承this</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">a, b</span>) =&gt; a + b;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure>
<ul>
<li>无参数父母参数：当函数没有参数或有多个参数时，需要用逗号<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sayHi</span> = (<span class="params"></span>) =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hi!&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">multiply</span> = (<span class="params">a, b</span>) =&gt; a * b;</span><br></pre></td></tr></table></figure></li>
<li>多行函数体：如果函数体包含多行代码，需要用大括号，并使用return语句返回值。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line"><span class="keyword">const</span> result = a + b;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
<li>如果函数只有一个形参，小括号可以省略</li>
<li>只有一行代码的时候，可以省略大括号和return</li>
<li>可也以返回一个对象</li>
</ul>
<h3 id="嵌套函数"><a href="#嵌套函数" class="headerlink" title="嵌套函数"></a>嵌套函数</h3><p>在函数中声明的函数就是嵌套函数，嵌套函数只能在当前函数中可以访问，在当前函数外无法访问</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fu</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">zi</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我是儿子&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">zi</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">fu</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="创建多个对象（重点）"><a href="#创建多个对象（重点）" class="headerlink" title="创建多个对象（重点）"></a>创建多个对象（重点）</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用工厂模式创建对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建新的对象</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    <span class="comment">// 设置对象属性</span></span><br><span class="line">    obj.<span class="property">name</span> = name;</span><br><span class="line">    obj.<span class="property">age</span> = age;</span><br><span class="line">    <span class="comment">// 设置对象方法</span></span><br><span class="line">    obj.<span class="property">sayName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//返回新的对象</span></span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person1 = <span class="title function_">createPerson</span>(<span class="string">&quot;孙悟空&quot;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> person2 = <span class="title function_">createPerson</span>(<span class="string">&quot;猪八戒&quot;</span>, <span class="number">19</span>);</span><br><span class="line"><span class="keyword">var</span> person3 = <span class="title function_">createPerson</span>(<span class="string">&quot;沙和尚&quot;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person3);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="构造函数-1"><a href="#构造函数-1" class="headerlink" title="构造函数"></a>构造函数</h3><p>构造函数：构造函数就是一个普通的函数，创建方式和普通函数没有区别，不同的是构造函数习惯上首字母大写，构造函数和普通函数的还有一个区别就是调用方式的不同，普通函数是直接调用，而构造函数需要使用new关键字来调用。</p>
<p>那构造函数是怎么执行创建对象的过程呢:<br>调用构造函数，它会立刻创建一个新的对象<br>将新建的对象设置为函数中this，在构造函数中可以使用this来引用新建的对象<br>逐行执行函数中的代码<br>将新建的对象作为返回值返回</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">greet</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello, my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> alice = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">const</span> bob = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Bob&#x27;</span>, <span class="number">30</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(alice.<span class="property">name</span>); <span class="comment">// 输出: Alice</span></span><br><span class="line">bob.<span class="title function_">greet</span>(); <span class="comment">// 输出: Hello, my name is Bob</span></span><br></pre></td></tr></table></figure>
<p>构造函数是一种用于创建特定类型对象的函数，通常以大写字母开头，通过new关键字创建实例。</p>
<h2 id="形参与实参"><a href="#形参与实参" class="headerlink" title="形参与实参"></a>形参与实参</h2><p>形参是在函数定义时声明的参数，它们是函数的占位符，用于接收调用时确定的实际值<br>实参是函数调用时传递给函数的具体值，它们对应于函数定义中的形参</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name, greeting</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;greeting&#125;</span>, <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">greet</span>(<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Hello&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>name和greeting是形参。它们定义了greet函数所需的输入<br>‘Alice’和’Hello’是实参，它们在函数调用时传递给greet函数的形参name和greeting</p>
<ul>
<li>在开发中保持实参与形参一致<br>形参多于实参：那么多出来的形参值为undefined<br>实参多于形参：多出来的实参会被忽略</li>
<li>可以给形参设置默认值<br>注意：这个默认值只会在缺少实参传递或者实参是undefind才会被执行</li>
</ul>
<h3 id="剩余参数…"><a href="#剩余参数…" class="headerlink" title="剩余参数…"></a>剩余参数…</h3><p>用…收集不确定数量的实际参量作为一个备份，从而处理多余的参数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">showItems</span>(<span class="params">...items</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(items);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">showItems</span>(<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>); <span class="comment">// 输出: [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;cherry&#x27;]</span></span><br></pre></td></tr></table></figure>

<h3 id="展开运算符…"><a href="#展开运算符…" class="headerlink" title="展开运算符…"></a>展开运算符…</h3><p>剩余参数只能用在函数里，展开运算符哪里都可以用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const arr = [1，5，3，8，2]</span><br><span class="line">console.log(...rr) // 1 5 3 8 2</span><br></pre></td></tr></table></figure>
<p>不会修改原数组。如果求数组最大值，用…arr很方便</p>
<h3 id="动态参数"><a href="#动态参数" class="headerlink" title="动态参数"></a>动态参数</h3><p>arguments 动态参数，只存在函数体里面，是伪数组<br>function getSum() {<br>&#x2F;&#x2F; arguments 动态参载只存在函数里<br>console.log( arguments)<br>}<br>getSum(2，3)<br>比如不管用户传入多少实参，都要计算出来</p>
<h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>通过return关键字把处理后的结果返回给调用者<br>return会立即结束当前函数，后面代码不会再被执行<br>return关键字和被返回的表达式之间不允许使用换行符<br>函数可以没有return，此时函数默认返回值为undefined</p>
<h3 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a>全局作用域</h3><p>作用域所有代码执行的环境（整个script标签内部）<br>局部作用域作用与函数内的代码环境，分函数作用域或块级作用域</p>
<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><ul>
<li>闭包是指一个函数能够访问其词法作用域中的变量，即使这个函数是在其词法作用域之外执行的。换句话来说，闭包可以记住并访问定义它的作用域中的变量</li>
<li>闭包是指在函数内部定义的函数可以访问其外部函数的变量和参数，即使外部函数已经返回</li>
<li>简单理解:闭包&#x3D;内层函数＋外层函数的变量<br>（函数套函数，里层函数用到外层函数的变量）</li>
<li>闭包如何工作<br>当一个函数在其内部定义了另一个函数时，内部函数可以访问外部函数的变量和参数，即使外部函数已经执行完毕。这个机制使得内部函数有了一个闭包，闭包保存了外部函数的作用域链。</li>
<li>应用：用闭包函数创建避免全局污染；实现数据的私有<br>例：<br>function makeCounter() {<br>let count &#x3D; 0;<br>return function() {<br>  count++;<br>  return count;<br>};<br>}<br>const counter &#x3D; makeCounter();<br>console.log(counter()); &#x2F;&#x2F; 输出: 1<br>console.log(counter()); &#x2F;&#x2F; 输出: 2</li>
<li>闭包的性能及注意事项<ul>
<li>内存消耗：闭包可能会导致内存占用增加，因为它们保留了对外部作用域的引用，可能会导致内存浪费。在创建大量闭包时需要小心</li>
<li>避免不必要的闭包：如果不需要访问外部变量，尽量避免创建闭包，以免增加复杂性和内存使用</li>
<li>调试困难：由于闭包涉及高层作用域链，调试和跟踪变量的生命周期可能会比较困难</li>
</ul>
</li>
</ul>
<h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>函数在其内部调用自身<br>function factorial(n) {<br>  if (n &#x3D;&#x3D;&#x3D; 0) {<br>    return 1;<br>  }<br>  return n * factorial(n - 1);<br>}</p>
<p>console.log(factorial(5)); &#x2F;&#x2F; 输出: 120</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>单一职责原则：每个功能只做一件事，以便于测试和维护。<br>剩余参数是真数组，动态参数伪数组。真数组可以用push等方法，开发中提倡用剩余参数<br>避免全局变量：尽量使用局部变量来避免变量冲突和意外的全局状态更改。</p>
<p>纯函数：首先编写纯函数，即不依赖外部状态并且不修改外部状态的函数，然后进行测试和调试。<br>错误处理：使用try…catch块捕获和处理函数中的异常<br>函数参数解构：当传递的对象有多个属性时，可以使用参数解构提高代码的可执行性。<br>function displayUser({ name, age }) {<br>  console.log(<code>Name: $&#123;name&#125;, Age: $&#123;age&#125;</code>);<br>}</p>
<p>const user &#x3D; { name: ‘Dave’, age: 25 };<br>displayUser(user);</p>
<h2 id="函数中的this关键字"><a href="#函数中的this关键字" class="headerlink" title="函数中的this关键字"></a>函数中的this关键字</h2><p>this关键字：指向函数执行时的上下文对象。不同的调用方式下，this的值可能不同。</p>
<ul>
<li>this的绑定和定义的位置(编写的位置)没有关系</li>
<li>this的绑定和调用方式以及调用的位置有关系</li>
<li>this是在运行时被绑定的;</li>
</ul>
<h3 id="this的绑定规则"><a href="#this的绑定规则" class="headerlink" title="this的绑定规则"></a>this的绑定规则</h3><ol>
<li><p>作为普通函数调用：this指向全局对象（在浏览器中为window对象）<br>  函数没有被绑定到某个对象上进行调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.普通的函数被独立的调用</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;foo:&quot;</span>,<span class="variable language_">this</span>)&#125;</span><br><span class="line">  <span class="title function_">foo</span>()</span><br><span class="line"><span class="comment">//2.函数定义在对象中，但是独立调用</span></span><br><span class="line"><span class="keyword">var</span> obj=&#123;<span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,<span class="attr">bar</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;bar:&quot;</span>, <span class="variable language_">this</span>)</span><br><span class="line">&#125;&#125;</span><br><span class="line"><span class="keyword">var</span> baz = obj.<span class="property">bar</span></span><br><span class="line"><span class="title function_">baz</span>()</span><br></pre></td></tr></table></figure></li>
<li><p>作为对象方法调用：this指向调用该方法的对象</p>
</li>
<li><p>构造函数调用：this指向新创建的对象</p>
</li>
<li><p>箭头函数调用：this指向定义箭头函数时的上下文对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Charlie&#x27;</span>,</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.<span class="title function_">greet</span>(); <span class="comment">// 输出: Hello, I&#x27;m Charlie</span></span><br></pre></td></tr></table></figure>
<p>箭头函数中的this：不会创建自己的this，而是从父级上下文中继承</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Charlie&#x27;</span>,</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, I&#x27;m <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">person.<span class="title function_">greet</span>(); <span class="comment">// 输出: Hello, I&#x27;m Charlie</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>bind、call、apply调用：this指向指定对象</p>
</li>
</ol>
<h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h3 id="随机函数Math-random"><a href="#随机函数Math-random" class="headerlink" title="随机函数Math.random()"></a>随机函数Math.random()</h3><p>Math.random()随机数函数。返回一个[0,1）的随机小数<br>生成0-10的随机数Math.floor(Math.random()<em>(10+1))<br>5-10的随机数Math.floor(Math.random()</em>(5+1)+5)<br>n-m的随机数Math.floor(Math.random()*(m-n+1)+n)</p>
<h3 id="函数剩余参数arguments"><a href="#函数剩余参数arguments" class="headerlink" title="函数剩余参数arguments"></a>函数剩余参数arguments</h3><p>动态参数：<br>arguments是函数内部内置的为驻足变量，它包含了调用函数时传入的所有实参<br>arguments是一个伪数组，只存在函数中，可以通过for循环依次得到传递过来的实参<br>如：function sum(){<br>  les s&#x3D;0<br>  for(let i&#x3D;0; i&lt;arguments.length; i++){a+&#x3D;arguments[i]}<br>  console.log(s)<br>}<br>sum(1,5)<br>sum(2,4,9)<br>函数剩余参数<br>…是语法符号，置于最末函数形参之前，用于获取多余的实参，得到的是真数组<br>如：function sum(a,…arr){<br>  console.log(arr)&#x2F;&#x2F;[5][4,9]<br>  for(let i&#x3D;0; i&lt;arguments.length; i++){a+&#x3D;arguments[i]}<br>  console.log(arr)<br>}<br>sum(1,5)<br>sum(2,4,9)<br>如：function sum(…arr){<br>  console.log(arr)&#x2F;&#x2F;[1,5][2,4,9]<br>  for(let i&#x3D;0; i&lt;arguments.length; i++){a+&#x3D;arguments[i]}<br>  console.log(arr)<br>}<br>sum(1,5)<br>sum(2,4,9)</p>
<h3 id="toString方法"><a href="#toString方法" class="headerlink" title="toString方法"></a>toString方法</h3><p>oString()函数用于将当前对象以字符串的形式返回</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用构造函数来创建对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="comment">// 设置对象的属性</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建对象的一个实例对象</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="title function_">toString</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="hasOwnProperty-检查对象是否含有该属性"><a href="#hasOwnProperty-检查对象是否含有该属性" class="headerlink" title="hasOwnProperty()检查对象是否含有该属性"></a>hasOwnProperty()检查对象是否含有该属性</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创造一个构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyClass</span>(<span class="params"></span>) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向MyClass的原型中添加一个name属性</span></span><br><span class="line"><span class="title class_">MyClass</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;我是原型中的名字&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个MyClass的实例</span></span><br><span class="line"><span class="keyword">var</span> mc = <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">mc.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用in检查对象中是否含有某个属性时，如果对象中没有但是原型中有，也会返回true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;age&quot;</span> <span class="keyword">in</span> mc);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;name&quot;</span> <span class="keyword">in</span> mc);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以使用对象的hasOwnProperty()来检查对象自身中是否含有该属性，使用该方法只有当对象自身中含有属性时，才会返回true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mc.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;age&quot;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mc.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="展开运算符…-1"><a href="#展开运算符…-1" class="headerlink" title="展开运算符…"></a>展开运算符…</h3><p>const arr&#x3D;[1,2,3,4,5,6,7]<br>console.log(…arr) &#x2F;&#x2F; 1  2 3 4 5 6 7<br>场景：求数组最大值，最小值，合并数组<br>console.log(Math.max(…arr)) &#x2F;&#x2F;7</p>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>变量或值在代码中可用性的范围</p>
<h3 id="局部作用域"><a href="#局部作用域" class="headerlink" title="局部作用域"></a>局部作用域</h3><h4 id="函数作用域"><a href="#函数作用域" class="headerlink" title="函数作用域"></a>函数作用域</h4><p>  在函数内部声明的变量只能在函数内部被访问，外部无法直接访问<br>  1.函数内部声明的变量，在函数外部无法被访问<br>  2.函数的参数也是函数内部的局部变量<br>  3.不同函数内部声明的变量无法互相访问<br>  4.函数执行完毕后，函数内部的变量实际被清空了</p>
<h4 id="块作用域"><a href="#块作用域" class="headerlink" title="块作用域"></a>块作用域</h4><p>  在JavaScript中使用{}包裹的代码称为代码块，代码块内部声明的变量外部将【有可能】无法被访问。<br>  1.let声明的变量会产生块作用域，var 不会产生块作用域<br>  2.const声明的常量也会产生块作用域<br>  3.不同代码块之间的变量无法互相访问<br>  4.推荐使用let 或 const<br>  let声明的外面无法访问，var声明的外面可以访问。var没有块作用域。</p>
<h3 id="全局作用域-1"><a href="#全局作用域-1" class="headerlink" title="全局作用域"></a>全局作用域</h3><p>script标签和.js 文件的【最外层】就是所谓的全局作用域，在此声明的变量在函数内部也可以被访问。全局作用域中声明的变量，任何其它作用域都可以被访问<br>1.为window对象动态添加的属性默认也是全局的，不推荐!<br>2.函数中未使用任何关键字声明的变量为全局变量，不推荐!<br>3.尽可能少的声明全局变量，防止全局变量被污染</p>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>作用域链本质上是底层的变量查找机制。<br>在函数被执行时，会优先查找当前函数作用域中查找变量<br>如果当前作用域查找不到则会依次逐级查找父级作用域直到全局作用域<br>1.嵌套关系的作用域串联起来形成了作用域链<br>2.相同作用域链中按着从小到大的规则查找变量<br>3.子作用域能够访问父作用域，父级作用域无法访问子级作用域</p>
<h2 id="垃圾回收机制"><a href="#垃圾回收机制" class="headerlink" title="垃圾回收机制"></a>垃圾回收机制</h2><ul>
<li>内存的生命周期<br>内存分配:当我们声明变量、函数、对象的时候，系统会自动为他们分配内存<br>内存使用:即读写内存，也就是使用变量、函数等<br>内存回收:使用完毕，由垃圾回收器自动回收不再使用的内存</li>
<li>全局变量一般不会回收(关闭页面回收)<br>一般情况下局部变量的值，不用了，会被自动回收掉</li>
<li>内存泄漏：程序中分配的内存由于某种原因程序未释放或无法释放叫做内存泄漏</li>
<li>堆栈空间分配区别:<br>1.栈（操作系统）︰由操作系统自动分配释放函数的参数值、局部变量等，基本数据类型放到栈里面。<br>2.堆（操作系统）︰一般由程序员分配释放，若程序员不释放，由垃圾回收机制回收。复杂数据类型放到堆</li>
<li>JS垃圾回收机制-算法说明<ul>
<li>引用计数法：内存不再使用，就该回收。看一个对象是否有指向它的引用<br>算法:<br>1.跟踪记录被引用的次数<br>2．如果被引用了一次，那么就记录次数1,多次引用会累加++3. 如果减少一个引用就减1 –<br>4．如果引用次数是0，则释放内存</li>
<li>标记清除法（现在常用）<br>核心:<br>1.标记清除算法将“不再使用的对象”定义为“无法达到的对象”。<br>2．就是从根部（在JS中就是全局对象）出发定时扫描内存中的对象。凡是能从根部到达的对象，都是还需要使用的。<br>3.那些无法由根部出发触及到的对象被标记为不再使用，稍后进行回收。</li>
</ul>
</li>
</ul>
<h1 id="APIs-DOM"><a href="#APIs-DOM" class="headerlink" title="APIs DOM"></a>APIs DOM</h1><p>APIs作用：通过js去操作html和浏览器<br>DOM文档对象模型，操作网页内容（标签）<br>DOM树：将Html文件以树结构直观地表现出来，直观体现标签和标签之间的关系<br>DOM对象：把一个html标签用js取过来那么它会变成一个对象Object类型，拥有属性方法内容等，此时叫dom对象<br>document:的DOM里面最大的一个对象，整个页面最大的对象</p>
<h2 id="获取、操作DOM对象"><a href="#获取、操作DOM对象" class="headerlink" title="获取、操作DOM对象"></a>获取、操作DOM对象</h2><h3 id="使用css选择器获取"><a href="#使用css选择器获取" class="headerlink" title="使用css选择器获取"></a>使用css选择器获取</h3><p><strong>1.匹配的第一个元素</strong> </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;css选择器&#x27;</span>) 必须加单引号，是字符串</span><br><span class="line">返回值：css选择器匹配的第一个元素，是对象；如果没有匹配到，返回<span class="title class_">Null</span></span><br><span class="line">可以直接修改（如修改属性）</span><br><span class="line">如<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>)  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;p&#x27;</span>) </span><br><span class="line"> <span class="keyword">const</span> tabsContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tabs&#x27;</span>); <span class="comment">// 使用CSS选择器获取容器document.querySelector(&#x27;ul li:first-cilid&#x27;) css怎么写这里就怎么写</span></span><br></pre></td></tr></table></figure>
<p><strong>2.匹配的所有的（多个）元素</strong><br>document.querySelectorAll(‘css选择器’)<br>返回值：对象集合（是伪数组）<br>不能直接修改，只能通过数组遍历的方法依次给里面的元素修改<br>document.querySelector(‘ul li’) 选择所有的li<br><strong>3.根据ID获取第一个元素</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ID&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;content&#x27;</span>);</span><br><span class="line"> <span class="string">``</span><span class="string">`   </span></span><br><span class="line"><span class="string">**4.根据标签获取一类元素**</span></span><br><span class="line"><span class="string">document.getElementByTagName(&#x27;div&#x27;)（如获取页面所有div）</span></span><br><span class="line"><span class="string">**5.根据类名获取元素**</span></span><br><span class="line"><span class="string">document.getElementsByClassName(&#x27;w&#x27;)（如获取页面所谓类名为w的元素）</span></span><br><span class="line"><span class="string">返回的是一个类数组对象（HTMLCollection），即使只有一个元素匹配，它也不是单个元素，而是一个包含元素的集合。</span></span><br><span class="line"><span class="string">**6.获取一个元素下的一类子元素**</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> js</span><br><span class="line">  <span class="keyword">var</span> tabs=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.tabs&gt;div&#x27;</span>);<span class="comment">//class=&#x27;tab&#x27;下的div</span></span><br><span class="line">  <span class="keyword">var</span> divs=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#content&gt;div&#x27;</span>);<span class="comment">//id=&#x27;content&#x27;下的div</span></span><br></pre></td></tr></table></figure>
<h3 id="操作元素内容"><a href="#操作元素内容" class="headerlink" title="操作元素内容"></a>操作元素内容</h3><h4 id="修改标签元素里面的内容"><a href="#修改标签元素里面的内容" class="headerlink" title="修改标签元素里面的内容"></a>修改标签元素里面的内容</h4><ol>
<li>对象.innerText<br>将文本内容添加&#x2F;更新到任意标签位置，显示纯文本，不解析标签<br>obj.innerText&#x3D;’我是新修改的内容’</li>
<li>对象.innerHtml<br>将文本内容添加&#x2F;更新到任意标签位置，显示纯文本，会解析标签，多标签建议使用模板字符<br><code>obj.innerText=&#39;&lt;strong&gt;我是新修改的内容&lt;/strong&gt;&#39;</code></li>
</ol>
<h4 id="操作元素属性"><a href="#操作元素属性" class="headerlink" title="操作元素属性"></a>操作元素属性</h4><p><strong>1.操作元素常用属性</strong><br>对象.属性&#x3D;’值’ 常见属性：href,title,src<br><strong>2.操作元素样式属性</strong>，如位置，大小<br>对象.style.属性&#x3D;’值’      用于量少的时候<br>元素.className&#x3D;’新类名’   用于修改大量样式<br>元素.className.add(‘类名’) 追加一个类<br>元素.className.remove(‘类名’) 删除一个类<br>元素.className.toggle(‘类名’) 切换一个类<br><strong>3.操作表单元素属性</strong>，如文本框，按钮<br>对象.属性名&#x3D;’值’<br>表单.value&#x3D;’用户名’<br>表单.type&#x3D;’password’<br>如果表单中的属性添加就有效果，移除没有效果，那么一律用布尔值表示，true代表添加了，flase代表移除了（如disable,checked,selected）<br>const ipt&#x3D;document.querySelecter(‘input’)<br>input.checked&#x3D;’true’<br>231,214,232性 data-自定义属性<br>对象.adtaset.属性名&#x3D;’值’</p>
<h2 id="间歇函数（定时器）"><a href="#间歇函数（定时器）" class="headerlink" title="间歇函数（定时器）"></a>间歇函数（定时器）</h2><p>定时器函数重复执行代码，定时器函数可以开启和关闭定时器</p>
<ul>
<li><strong>开启定时器</strong><br>setInterval(函数名！,间隔时间) Interval间歇，设置间歇函数</li>
<li>每隔一段时间调用这个函数，时间单位是毫秒<br>如：写一个间歇函数，每隔1s打印一次，函数这里是匿名函数<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;夏天和西瓜更配哦&#x27;</span>)</span><br><span class="line">&#125;,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
再如：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;夏天和西瓜更配哦&#x27;</span>)&#125;</span><br><span class="line"><span class="built_in">setInterval</span>(fn,<span class="number">1000</span>)</span><br></pre></td></tr></table></figure></li>
<li>**注意！这里是fn不是fn()，fn()**会立刻调用函数，不会每隔一秒再入调用。间隔函数会自动根据函数名去调用函数，所以要写函数名而不是写函数名加()调用函数</li>
<li>返回值：定时器的id，是一个数字<br><code>let n=setInterval(fn,1000)</code>  这个n是一个数字，关计时器用</li>
<li><strong>关闭定时器</strong><br><code>let 变量名=setInterval(函数，间隔时间)</code><br><code> clearInterval(变量名)</code> 变量名是定时器返回的ID号</li>
<li><strong>关闭定时器后再打开</strong><br> n&#x3D;setInterval(fn,1000) n是刚才关闭定时器的变量名</li>
</ul>
<h2 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a>事件监听</h2><p>事件：在编程时系统内发生的动作或发生的事情，如点击按钮<br>事件监听；让成语检测是否有事件发生，一旦有时间触发，就立即调用一个函数做出响应，也称为绑定时间或者注册事件<br>对象元素.addEventListener(‘事件类型’,要执行的函数)<br>  三要素：</p>
<ul>
<li>事件源：获取被事件触发的元素</li>
<li>事件类型：用什么方式触发的，如鼠标点击，鼠标经过</li>
<li>事件调用的函数：这个元素要做什么事儿</li>
<li>执行函数是被触发之后执行，每次触发都会执行一次<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> btn=<span class="variable language_">document</span>.<span class="title function_">querySelecter</span>(<span class="string">&#x27;.btn&#x27;</span>)</span><br><span class="line">btn.<span class="title function_">addEverntListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="title function_">alter</span>(<span class="string">&#x27;我被点击啦&#x27;</span>)&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="事件类型"><a href="#事件类型" class="headerlink" title="事件类型"></a>事件类型</h3><p>鼠标事件：鼠标触发<br>click 鼠标点击<br>mouseenter 鼠标经过<br>mouseleave 鼠标离开<br>焦点事件：表单获得光标<br>focus 获得焦点<br>blur 失去焦点<br>键盘事件：键盘触发<br>Keydown 键盘按下触发<br>Keyup 键盘抬起触发<br>文本事件：表单输入触发<br>input 用户输入事件</p>
<h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><p>事件对象：也是对象，存储事件触发时的相关信息，如鼠标信息，键盘信息<br>获取事件对象<br>在事件绑定的回调函数的第一个参数就是事件对象，一般命名为event,ev,e,如下面的e<br>元素.addEventListener(‘click’,function(e){})<br>注意，事件对象只有这个事件被触发之后才会拥有，事件不触发没有这个事件对象</p>
<h3 id="事件对象常用属性"><a href="#事件对象常用属性" class="headerlink" title="事件对象常用属性"></a>事件对象常用属性</h3><p>type：获取当前的事件类型<br>clientX&#x2F;clientY：获取光标，相当于浏览器可见窗口左上角的位置<br>offsetX&#x2F;offsetY：获取光标，相当于当前DOM元素左上角的位置<br>key：用户按下的键盘建的值<br>如：<br>input.addEventListener(‘keyup’,function(e){<br>  if(e.key&#x3D;&#x3D;&#x3D;’Enter’){<br>    console.log(‘回车键被按下啦’)<br>  }<br>})</p>
<h3 id="环境对象"><a href="#环境对象" class="headerlink" title="环境对象"></a>环境对象</h3><p>能够分析判断函数运行在不同环境中this所指代的对象，可以让我们的代码更简洁<br>每个函数里面都有this环境对象，普通函数里面this指向的是window<br>在事件函数里面，this指向的是调用者，如给点击按钮绑定事件，this指向的是按钮button</p>
<h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><p>如果将函数A作为参数传递给函数B时，我们称函数A为回调函数<br>即当一个函数当作参数来传递给另外一个函数的时候，这个函数就是回调函数<br>回调函数的很值还是函数，只不过把它当作参数使用了<br>使用匿名函数作为回调函数比较常见<br>如<br>function fn(){console.log(‘我是fn函数我被传递给了setInterval，我fn是回调函数’)}<br>setInterval(fn,1000)<br>此时A就是fn，B就是setInterval</p>
<h2 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h2><h3 id="事件捕获和事件冒泡"><a href="#事件捕获和事件冒泡" class="headerlink" title="事件捕获和事件冒泡"></a>事件捕获和事件冒泡</h3><p>事件流指的是事件完整执行过程中的流动路径，包括捕获阶段和冒泡阶段<br>捕获阶段：从document到div，从父到子<br>冒泡阶段：从div到document，从子到父<br>实际开发中以事件冒泡为主<br>事件捕获需要写对应代码才能看到效果<br>DOM.addEventListener(事件类型，事件处理函数，是否使用捕获机制)<br>低山和参数默认fales代表冒泡阶段触发，写true代表捕获阶段触发<br>事件冒泡：当一个元素的事件被触发时，同样的事件将会在该元素的所有祖先元素中依次被触发，这一过程叫事件冒泡<br>可以理解为：当一个元素触发事件后，会依次向上调用所有父级元素的同名事件<br>事件冒泡是默认存在的</p>
<h3 id="阻止冒泡和捕获"><a href="#阻止冒泡和捕获" class="headerlink" title="阻止冒泡和捕获"></a>阻止冒泡和捕获</h3><p>想要把事件限制在当前元素内，就需要阻止事件冒泡，前提：拿到事件对象<br>语法：事件对象.stopPropagation() Propagation:流动（事件捕获也能组织，不过用不到，此方法可以阻断事件流动传播）</p>
<h3 id="解绑事件"><a href="#解绑事件" class="headerlink" title="解绑事件"></a>解绑事件</h3><p>on事件方式：用null覆盖<br>如：btn.onclick&#x3D;function(){alter(‘我被点啦’)}<br>解绑：btn.onclick&#x3D;null;<br>场景：一个按钮只想让它被点击一次，点击有限次之后不能再点击<br>addEventListener事件方式：必须用removeEventListener(事件类型，事件处理函数，[获取捕获或者冒泡阶段]) []打参数可以省略<br>如：function fn(){alter(‘我被点啦’)}<br>绑定事件：btn.addEventListener(‘click’,fn)<br>解绑事件：btn.removeEventListener(‘click’,fn)<br>匿名函数无法解绑</p>
<h3 id="鼠标经过事件区别"><a href="#鼠标经过事件区别" class="headerlink" title="鼠标经过事件区别"></a>鼠标经过事件区别</h3><p>鼠标移入和鼠标移开：<br>mouseover和mouseout有冒泡效果<br>mouseenter和mouselesve没有冒泡效果（推荐）</p>
<h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><p>理解：如果给ul里面的多个li绑定点击会弹窗的事件，以前可以用for循环实现，但是很笨；使用事件委托这个技巧一次就能实现<br>事件委托利用事件流事件冒泡的特性解决一些开发需求的知识技巧，父元素注册事件，当触发子元素的时候，会冒泡到父元素身上，从而触发父元素的事件，不再需要给每个子元素都绑定<br>优点：减少绑定次数，提高程序性能<br>ul.addEventListener(‘click’,function(){})点击ul里面的li执行父级点击事件<br>实现：事件对象.target.tagName 可以获取真正触发事件的元素<br>如：const ul&#x3D;document.querySelector(‘ul’)&#x2F;&#x2F;先获取父元素<br>ul.addEventListener(‘click’,function(){})&#x2F;&#x2F;再绑定事件</p>
<h2 id="阻止默认行窃"><a href="#阻止默认行窃" class="headerlink" title="阻止默认行窃"></a>阻止默认行窃</h2><p>比如阻止链接的跳转，表单域跳转<br>语法：在函数里面加e.preventDefault()<br>注意和阻止冒泡不一样</p>
<h2 id="页面加载事件，页面滚动使事件，页面尺寸事件，元素尺寸位置"><a href="#页面加载事件，页面滚动使事件，页面尺寸事件，元素尺寸位置" class="headerlink" title="页面加载事件，页面滚动使事件，页面尺寸事件，元素尺寸位置"></a>页面加载事件，页面滚动使事件，页面尺寸事件，元素尺寸位置</h2><h3 id="页面加载事件"><a href="#页面加载事件" class="headerlink" title="页面加载事件"></a>页面加载事件</h3><p>理解：加载外部资源（图片，外联cssjs等）加载完毕时触发的事件<br>有时需要等页面资源全部处理完再做时间事情，正常js写在&#x2F;body上方，但是老代码喜欢写在head中，此时直接找dom元素找不到<br>事件名：load 给整个页面资源添加<br>如：等待页面所有资源加载完毕，就回去执行回调函数<br>window.addEventListener(‘load’,function(){})<br>事件名：DOMContentLoaded  给doocument元素加<br>当初始的Html文档被完全加载解析完成后DOMContentLoaded事件被触发，无需等待样式表，图像等完全加载<br>document.addEventListener(‘DOMContentLoaded’,function(){})</p>
<h3 id="页面滚动使事件"><a href="#页面滚动使事件" class="headerlink" title="页面滚动使事件"></a>页面滚动使事件</h3><p>滚动条在滚动的时候持续触发的事件<br>理解：有些网站在滚动条滚动到不同区域的时候会触发导航栏的变化<br>事件名：scroll<br>如：监听整个页面滚动(页面滚动就触发)：<br>window.addEventListener(‘scroll’,function(){})<br>获取位置的两个属性：<br>记录滚动被卷曲的部分，可以读可以写<br>scrollLeft滚动的左侧<br>scrollTop滚动的上侧<br>页面被滚动卷去的尺寸：<br>window.addEventListener(‘scroll’,function(){<br>&#x2F;&#x2F;注意这行代码要写在函数里面，得到的n是数字型不带单位<br>let n&#x3D;document.documentElement.scrollTop<br>配合修改样式：<br>if(n&gt;100){}<br>})</p>
<h3 id="页面尺寸事件"><a href="#页面尺寸事件" class="headerlink" title="页面尺寸事件"></a>页面尺寸事件</h3><p>会在窗口尺寸改变的时候触发事件<br>事件名：resize<br>window.addEventListener(‘resize’,function(){})<br>获取元素可见部分的宽高（不包括border,margin,滚动条等；包括padding）<br>clientWideh可见高度<br>clientHeight可见宽度<br>如检测屏幕宽度<br>window.addEventListener(‘resize’,function(){<br>let w&#x3D;docuemnt.documentElement.clientWidtn<br>console.log(w)<br>})</p>
<h3 id="元素尺寸位置"><a href="#元素尺寸位置" class="headerlink" title="元素尺寸位置"></a>元素尺寸位置</h3><p>如果自己算可能有误差，用js可以得到元素在页面中的位置，省去计算<br>获取元素宽高：包含padding,border<br>获取可视宽高，是数值方便计算，如果盒子是隐藏的那么获取结果是0<br>offsetWidth<br>offsetHeight<br>获取位置：元素距离自己定位父级元素的左、上的距离<br>没有定位那么以页面左上角为准<br>下面这两个是只读属性<br>offsetLeft<br>offsetTop</p>
<h2 id="日期对象"><a href="#日期对象" class="headerlink" title="日期对象"></a>日期对象</h2><h3 id="日期对象和方法"><a href="#日期对象和方法" class="headerlink" title="日期对象和方法"></a>日期对象和方法</h3><p>表示时间的对象<br>当前的系统时间<br>const date &#x3D; new Date()<br>指定时间<br>const date1 &#x3D; new Date(‘2024-8-15 14:20:30’)<br>前面返回的数据不能直接使用，开发中要使用方法转换为常用的格式<br>getFullYear() 获取年份 结果是4位年份<br>getMonth() 获取月份 取值0-11，注意打印要+1<br>getDate() 获取月份中的天，不是从0开始<br>getDay() 获取星期 取值0-6<br>getHours() 获取小时 取值0-23<br>getMinutes() 获取分钟 取值0-59<br>getSecond() 获取秒 取值0-59<br>使用如：<br>console.log(date.getFullYear())<br>console.log(date.getFullYear()+3)<br>在页面显示当前时间：<br>  const pre &#x3D; document.getElementById(‘myDate’)<br>                        function getMyDate() {<br>                            const date &#x3D; new Date()<br>                            return <code>今天是：$&#123;date.getFullYear()&#125;年$&#123;date.getMonth() + 1&#125;月$&#123;date.getDate() + 1&#125;日 $&#123;date.getHours()&#125;:$&#123;date.getMinutes()&#125;:$&#123;date.getSeconds()&#125;</code><br>                            let h &#x3D; date.getHours()<br>                            h &#x3D; h &lt; 10 ? ‘0’ + h : h<br>                        }<br>                        setInterval(function () {<br>                            pre.innerHTML &#x3D; getMyDate()<br>                        }, 1000)</p>
<h3 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h3><p>时间戳：1970年01月01日00：00：00秒至今的毫秒数<br>理解：比如用于计算倒计时的效果要借助时间戳计算<br>算法：将来的时间戳-当前的时间戳&#x3D;剩余的时间毫秒数，剩余的时间毫秒数转换为剩余时间的年月日时分秒就是倒计时时间<br>获取时间戳方法1：getTime()<br>const date &#x3D;new Date()<br>console.log(date.getTime())<br>获取时间戳方法2：+new Date()<br>console.log(+new Date())<br>console.log(+new Date(‘2024-8-15 15:02:35’))<br>获取时间戳方法3：Date.now()<br>console.log(Date.now())<br>注意：第三种只能得到当前的时间戳，前两种可返回指定时间的时间戳</p>
<h2 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h2><h3 id="DOM节点"><a href="#DOM节点" class="headerlink" title="DOM节点"></a>DOM节点</h3><p>DDOM树里面的每一个内容都称为节点<br>元素节点（重点）：所有的标签，html,body,div<br>属性节点：所有的属性，如href<br>文本节点：所有的文本<br>其他，如注释节点</p>
<h3 id="查找节点"><a href="#查找节点" class="headerlink" title="查找节点"></a>查找节点</h3><p>查找节点：根据节点关系查找目标节点<br>理解：如有一个广告，广告里面有关闭的x，点击关闭的x关闭的是广告，还要获取广告的div。但是点击关闭的x，直接关闭它的父亲，就不用再获取广告div了<br>节点关系：针对的找亲戚返回的都是对象<br>父节点查找：<br>子元素.parentNode<br>返回最近一级的父节点对象（亲父亲，干爹不算），没找到返回null<br>还可以套娃 子元素.parentNode.parentNode<br>子节点查找<br>父元素.children<br>获取所有子节点，包括文本节点，注释节点等<br>返回的是一个伪数组<br>console.log(ul.children)<br>兄弟节点查找<br>下一个兄弟节点nextElementSibling<br>上一个兄弟节点previousElementSibling<br>const li2 &#x3D; document.querySelector(‘ul li:nth-child(2)’)<br>console.log(li2.previousElementSibling)</p>
<h3 id="增加节点"><a href="#增加节点" class="headerlink" title="增加节点"></a>增加节点</h3><p>理解：如留言板，发布一条新增一条，再页面中增加元素时用<br>操作：创建一个新的节点，把新的节点放入到指定的元素内部<br>创建一个新的元素节点<br>document.createElement(‘标签名’)<br>如创建一个新的div元素<br>const div&#x3D;document.createElement(‘div’)<br>插入到父元素中的某个子元素里面<br>如插入到这个父元素的最后一个子元素<br>父元素.appendChild(要插入的元素)<br>document.body.appendChild(div)<br>如插入到这个父元素中的某个子元素的前面<br>父元素.insertBefore(要插入的元素,在哪个元素前面)</p>
<h3 id="克隆节点"><a href="#克隆节点" class="headerlink" title="克隆节点"></a>克隆节点</h3><p>复制一个原有的节点，把复制的节点放入到指定的元素内部<br>克隆节点<br>元素.cloneNode(布尔值)<br>true，克隆时会包含后代节点一起克隆<br>false（默认），克隆不会包含后代节点</p>
<h3 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h3><p>一个节点在页面中已不需要，要通过父元素删除，如果不存在父子关系那么删除失败<br>父元素.removeChild(子元素)</p>
<h2 id="移动端事件和js插件swiper"><a href="#移动端事件和js插件swiper" class="headerlink" title="移动端事件和js插件swiper"></a>移动端事件和js插件swiper</h2><p>触屏事件touch，响应触控笔或用户手指<br>常见触屏事件:<br>touchstart 触摸到一个DOM元素时触发<br>touchmove 在一个DOM元素上滑动时触发<br>touchend 从一个DOM元素上移时触发</p>
<h3 id="js插件"><a href="#js插件" class="headerlink" title="js插件"></a>js插件</h3><p>swiper插件<br>多个swiper插件同时使用时，注意区分类名</p>
<h1 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h1><p>BOM 浏览器对象模型，提供了与浏览器窗口进行交互的对象集合，核心对象是window。BOM没有统一的标准，兼容性较差，它包含了document、location、navigator、screen、history等对象</p>
<h2 id="Window对象"><a href="#Window对象" class="headerlink" title="Window对象"></a>Window对象</h2><p>Window对象是BOM的核心，代表当前浏览器窗口或标签页。<br>包含了许多方法和属性，如：<br>alert(), prompt(), confirm()：用于弹出对话框。<br>setTimeout(), setInterval()：用于定时执行代码。<br>location：包含当前页面的URL信息，并允许你导航到其他页面。<br>history：提供对浏览器历史记录的操作。</p>
<h3 id="Navigator对象"><a href="#Navigator对象" class="headerlink" title="Navigator对象"></a>Navigator对象</h3><p>提供有关浏览器的信息<br>常用属性有：<br>navigator.userAgent: 返回用户代理字符串，可用于识别用户的浏览器和操作系统</p>
<h3 id="Screen对象"><a href="#Screen对象" class="headerlink" title="Screen对象"></a>Screen对象</h3><p>包含关于用户屏幕的信息。<br>常用属性有：<br>screen.width, screen.height: 屏幕分辨率。</p>
<h3 id="Location对象"><a href="#Location对象" class="headerlink" title="Location对象"></a>Location对象</h3><p>用于获取当前页面的URL地址，也可以用来加载新的页面。<br>方法包括：<br>location.reload(): 刷新当前页面。<br>属性包括：<br>location.href: 当前页面的完整URL。<br>js页面跳转,如（实际配合定时器使用）：<br>location.href&#x3D;’<a href="http://www.baidu.com/">http://www.baidu.com</a>‘<br>search属性获取地址中携带的参数，符号?后面的部分<br>console.log(location.search)</p>
<h3 id="History对象"><a href="#History对象" class="headerlink" title="History对象"></a>History对象</h3><p>提供了对浏览器会话历史的访问。<br>方法包括：<br>history.back(): 后退一页。<br>history.forward(): 前进一页。<br>history.go(n): 移动n个历史记录条目</p>
<h2 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h2><h3 id="延时函数-（定时事件）"><a href="#延时函数-（定时事件）" class="headerlink" title="延时函数 （定时事件）"></a>延时函数 （定时事件）</h3><p>定时器用于在指定的时间后执行代码<br>setTimeout仅仅执行一次，需要等待，就算等待的毫秒数是0也要先执行后面的代码<br>setTimeout(回调函数，等待的毫秒数)<br>清除延时函数：<br>let timer &#x3D; setTimout(回调函数，等待的毫秒数)<br>clearTimeout(timeoutId)<br>每一次调用延时器都会产生一个新的延时器<br>如：单击按钮，等待 3 秒，然后控制台会输出Hello</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在这里写JavaScript代码，因为JavaScript是由上到下执行的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 创建延时器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> timer = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;, <span class="number">3000</span>);</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 清除延时器</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// clearTimeout(timer);        </span></span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="间歇函数"><a href="#间歇函数" class="headerlink" title="间歇函数"></a>间歇函数</h3><p>间歇函数每隔一段时间就执行一次，除非手动清除，延时函数只会执行一次<br>setInterval(回调函数，间隔的毫秒数)：每隔指定时间重复执行函数<br>clearInterval(intervalId)清除定时器</p>
<h1 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h1><h2 id="js执行机制"><a href="#js执行机制" class="headerlink" title="js执行机制"></a>js执行机制</h2><p>js语言是单线程，就是说同一个时间只能做一件事。<br>js的同步任务都在主线程上执行，形成一个执行栈<br>js的异步任务通过回调函数实现，在任务队列中等待<br>异步任务包括：普通事件（click等），资源加载（load等），定时器（间歇函数延时函数等）</p>
<h2 id="数组map和join方法渲染表格"><a href="#数组map和join方法渲染表格" class="headerlink" title="数组map和join方法渲染表格"></a>数组map和join方法渲染表格</h2><h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><p>字符串拼接：mao()和join()数组方法实现<br>map()遍历数组处理数据，并且返回新的数组<br>map有返回值，forEach没有返回值<br>如 const arr[‘西瓜’,’苹果’,’水蜜桃’,’香蕉’]<br>const newArr&#x3D;arr.map(function(ele,index){<br>  console.log(ele) &#x2F;&#x2F;数组元素<br>  console.log(index)&#x2F;&#x2F;数组索引号<br>  return ele+’味’<br>})<br>console.log(newArr)&#x2F;&#x2F;[‘西瓜味’,’苹果味’,’水蜜桃味’,’香蕉味’]</p>
<h3 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h3><p>join()方法把数组中的所有元素转换成一个字符串<br>console.log(arr.join(‘’))&#x2F;&#x2F;西瓜苹果水蜜桃香蕉<br>console.log(arr.join(‘|’))&#x2F;&#x2F;西瓜|苹果|水蜜桃|香蕉<br>join()括号里指定分隔符，空字符串(‘’)表示元素之间都没有任何字符</p>
<h3 id="渲染表格应用"><a href="#渲染表格应用" class="headerlink" title="渲染表格应用"></a>渲染表格应用</h3><p>理解：要在表格中根据数据新增一行数据<br>步骤：封装一个函数，函数里使用map()遍历数组（数据对象），更换tr里面的数据，然后返回有数据的tr数组<br>join()方法把有数组的数组转换成字符串<br>字符串通过innerHTML赋值给tbody<br>tbdoy.innerHTML&#x3D;trArr.join(‘’)</p>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="是否包含某内容test"><a href="#是否包含某内容test" class="headerlink" title="是否包含某内容test()"></a>是否包含某内容test()</h3><p>定义规则&#x2F;&#x2F;  const reg&#x3D;&#x2F;里面写内容&#x2F;<br>test()方法：查询是否有符合规则（和&#x2F;&#x2F;里面的内容一样的内容）<br>语法：reg.test(被检测的字符串)<br>返回值：匹配true 不匹配false<br>如：const reg&#x3D;&#x2F;太阳&#x2F;<br>console.log(reg.text(‘太阳当空照，花儿对我笑’)) &#x2F;&#x2F;true</p>
<h3 id="是否包含某内容exec"><a href="#是否包含某内容exec" class="headerlink" title="是否包含某内容exec()"></a>是否包含某内容exec()</h3><p>在一个指定字符串中执行一个搜索匹配，成功返回一个数组，反正null<br>如：const reg&#x3D;&#x2F;西瓜&#x2F;<br>console.log(reg.exec(‘夏天不能没有西瓜’))<br>返回[‘西瓜’,index:6,input’夏天不能没有西瓜’]<br>返回的数组中,index表示reg出现在6位(0123456)</p>
<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><p>边界符：表示位置，开头和结尾，必须用什么开头，用什么结尾<br>^表示匹配行首的文本（以谁开始）<br>$表示匹配行尾的文本（以谁结束）<br>console.log(&#x2F;^夏&#x2F;.test(‘夏天不能没有西瓜’)) &#x2F;&#x2F;true<br>console.log(&#x2F;^天&#x2F;.test(‘夏天不能没有西瓜’))&#x2F;&#x2F;false<br>console.log(&#x2F;瓜$&#x2F;.test(‘夏天不能没有西瓜’)) &#x2F;&#x2F;true<br>console.log(&#x2F;天$&#x2F;.test(‘夏天不能没有西瓜’))&#x2F;&#x2F;false<br>如果^和$放在一起叫精确匹配<br>console.log(&#x2F;^西$&#x2F;.test(‘西’)) &#x2F;&#x2F;true<br>console.log(&#x2F;西$&#x2F;.test(‘西西’))&#x2F;&#x2F;false<br>量词：设定某个模式的出现次数<br><em>重复0次或更多次<br>+重复1次或更多次<br>?重复0次或1次<br>{n}重复n次<br>{n,}重复n次或更多次<br>{n,m}重复n次到m次<br>注意逗号左右两侧千万不能有空格<br>console.log(&#x2F;西</em>$&#x2F;.test(‘’))&#x2F;&#x2F;true<br>console.log(&#x2F;西*$&#x2F;.test(‘西西’))&#x2F;&#x2F;true<br>console.log(&#x2F;西*$&#x2F;.test(‘西’))&#x2F;&#x2F;true<br>console.log(&#x2F;西{2}$&#x2F;.test(‘西西’))&#x2F;&#x2F;true<br>如果^和$放在一起叫精确匹配，出现别的就是false<br>console.log(&#x2F;西*$&#x2F;.test(‘西西嘻’))&#x2F;&#x2F;false<br>console.log(&#x2F;西*$&#x2F;.test(‘西嘻’))&#x2F;&#x2F;false<br>字符类：<br>[]匹配字符集合，如[abd]那么&#x2F;^[abd]$&#x2F;.test(‘包含abc任意一个字符都true’)<br>[a-zA-Z0-9]<br>^[1-9][0-9]{4,}&amp; 表示从10000开始，[0-9]{4}表示0000-9999<br>[^]取反号[^a-z]表示匹配除了小写字母以外的字符<br>.表示匹配除了换行符之外的任何单个字符<br>预定义类<br>\d表示0~9</p>
]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>node.js知识整理</title>
    <url>/2024/05/18/06-node.js/</url>
    <content><![CDATA[<h1 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h1><h2 id="认识node-js"><a href="#认识node-js" class="headerlink" title="认识node.js"></a>认识node.js</h2><p>node.js是独立执行javaScript代码的环境<br>node.js和浏览器环境的Js最大区别：<br>node.js环境中没有BOM和DOM<br>如何用：<br>注意，下载安装后不要再变路径了，不然会出问题。<br>在vscode里面对应的JS文件右击–在集成终端中打开–输入node  xx.js，xx 是文件名，然后就可以执行js文件<br>作用：编写后端程序:提供数据和网页资源等<br>前端工程化:集成各种开发中使用的工具和技术</p>
<h3 id="url中的端口号："><a href="#url中的端口号：" class="headerlink" title="url中的端口号："></a>url中的端口号：</h3><p>端口号<br>http: &#x2F;&#x2F;hmajax.itheima.net:80&#x2F;api&#x2F;province<br>其中:80就是端口号<br>标记服务器里不同功能的服务程序端口号<br>范围:0-65535之间的任意整数<br>http协议，默认访问80端口</p>
<h3 id="在Node-js中执行js代码（注意路径）："><a href="#在Node-js中执行js代码（注意路径）：" class="headerlink" title="在Node.js中执行js代码（注意路径）："></a>在Node.js中执行js代码（注意路径）：</h3><p>打开终端，输入node要执行的js文件（以.js结尾）路径<br>先切换到执行文件所处的路径：终端输入 cd js所在的文件夹路径（或者直接在这个文件夹里面右键打开终端）<br>然后再输入node xx.js<br>注意！！要切换到文件所在的文件夹运行文件，尽量不要拼接路径，不要用.&#x2F;或..&#x2F;的相对路径，容易动态拼接失败<br>也可以提供完整的路径，但是移植性差，不利于维护，如：<br> fs.readFile(‘C:\Users\escook\Desktop\Node.js基础\day1\code\files\1.txt’, ‘utf8’, function(err, dataStr) {<br>  if (err) {<br>    return console.log(‘读取文件失败！’ + err.message)<br>  }<br>  console.log(‘读取文件成功！’ + dataStr)<br>})<br>推荐：使用__dirname表示当前文件所处的路径<br> console.log(__dirname)打印的是当前文件所处的路径<br>如：<br>fs.readFile(__dirname + ‘&#x2F;files&#x2F;1.txt’, ‘utf8’, function(err, dataStr) {<br>  if (err) {<br>    return console.log(‘读取文件失败！’ + err.message)<br>  }<br>  console.log(‘读取文件成功！’ + dataStr)<br>})</p>
<h3 id="node中的全局对象"><a href="#node中的全局对象" class="headerlink" title="node中的全局对象"></a>node中的全局对象</h3><p>－ node中的常见对象<br>  全局对象–<code>global===globalThis</code>（类似window）<br>module，exports，require()，Buffer</p>
<ul>
<li>特殊的对象<br>这个对线实际上是模块中的变量，每个模块都有，看起来像全局变量<br>_dirname 打印显示当前文件的目录结构（常用）<br>_filename 打印显示当前文件的目录结构＋文件名称<br>－ 模块化时重要的对象<br>module，exports，require（后面详细讲解）</li>
<li>定时器函数<br><code>setTimeout()</code>，<code>setInterval()</code><br><code>setImmdiate()</code>立即执行，事件循环中用，<code>process.nextTick()</code>额外执行函数，事件循环中用<br><strong>（后面两个谁先执行不一定）</strong>（面试可能会问）</li>
</ul>
<h2 id="JS模块化开发"><a href="#JS模块化开发" class="headerlink" title="JS模块化开发"></a>JS模块化开发</h2><h3 id="什么是模块化开发"><a href="#什么是模块化开发" class="headerlink" title="什么是模块化开发"></a>什么是模块化开发</h3><p>（图片转文字）</p>
<h3 id="CommonJS规范（CJS）和Node关系"><a href="#CommonJS规范（CJS）和Node关系" class="headerlink" title="CommonJS规范（CJS）和Node关系"></a>CommonJS规范（CJS）和Node关系</h3><p>CommonJS是一个大家都认同的规范，每个框架里都有自己的实现。最早规范在服务器里，后面也用于浏览器<br>主要包含两个规范：<br>模块中导出内容用exports<br>模块中导入内容用require<br>A模块定义的数据和规则，B想要用，那么A要把东西导出，B导入<br>A中 <code>exports exKey1=Key1</code><br>B中 <code>require re=(&quot;./a文件名.js&quot;)</code></p>
<ul>
<li>这里的re相当于直接获取导出的对象，下面代码通过re.属性名或re.函数名进行使用，但是有更简单的方法：</li>
<li>**在开发中，最常用的是导入一个文件后对需要用到的对象进行结构，把属性结构出来，用起来更方便 **</li>
</ul>
<h4 id="exports和require的本质–引用赋值"><a href="#exports和require的本质–引用赋值" class="headerlink" title="exports和require的本质–引用赋值"></a>exports和require的本质–引用赋值</h4><p>exports默认是一个空对象<code>exports=&#123;&#125;</code>，在进行导出时相当于给对象添加属性<br>require原理：当通过<code>const bar = require()</code>函数拿到对象，相当于返回的是这个对象的引用地址，本质是引用赋值<br>（图片）</p>
<h3 id="module-exports导出（用的多）"><a href="#module-exports导出（用的多）" class="headerlink" title="module.exports导出（用的多）"></a>module.exports导出（用的多）</h3><p>单独exports导出效果等同于用<code>module.exports.Key1=Key1</code>导出；导入代码不用改变<br>在内存中有一个module对象，里面有exports属性；这两种方法指向的都是同一个对象，如果修改改的是同样的东西<br>（图片）</p>
<h3 id="Node导出的本质（内存）＋最常用写法"><a href="#Node导出的本质（内存）＋最常用写法" class="headerlink" title="Node导出的本质（内存）＋最常用写法"></a>Node导出的本质（内存）＋最常用写法</h3><p>本质是在导出module中的export<br><mark>开发中最常用的写法是：</mark></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">key1,</span><br><span class="line">key2,</span><br><span class="line">key3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><mark>写大括号就会创建新对象开辟新的内存</mark><br><strong>这样再export.key1＝新赋值修改key1没有意义，修改原来的对象不会影响到我拿到的新对象；但是module.exports.Key1&#x3D;新赋值才会修改我拿到的对象</strong></p>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><h3 id="fs文件系统模块"><a href="#fs文件系统模块" class="headerlink" title="fs文件系统模块"></a>fs文件系统模块</h3><p>是Node.js官方提供的用来操作文件的模块<br>在js代码中要使用fs模块，需要先导入：const fs &#x3D; require(‘fs’)</p>
<h4 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h4><p>fs.readFile()方法：用来读取指定文件中的内容<br>语法：fs.readFile(path[,option],callback)<br>path:文件路径，如.&#x2F;file&#x2F;hello.txt<br>option：可选路径，表示以什么编码格式读取文件<br>callback：读取完成后通过回调函数拿到读取的结果,如function(err,dataStr){<br>    console.log(err) &#x2F;&#x2F;如果读取成功err为null，失败为错误对象<br>console.log(dataStr) &#x2F;&#x2F;如果失败这里是undefined<br>}<br>如：const fs &#x3D; require(‘fs’)<br>fs.readFile(‘.&#x2F;files&#x2F;hello.txt’, ‘utf8’, function(err, dataStr) {<br>  if (err) {<br>    return console.log(‘读取文件失败！’ + err.message)<br>  }<br>  console.log(‘读取文件成功！’ + dataStr)<br>})</p>
<h4 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h4><p>fs.writeFile()方法：用来向指定问价中写入内容<br>语法：fs.writeFile(path,data[,option],callback)<br>path:文件路径，如.&#x2F;file&#x2F;hello.txt<br>data:要写入的内容<br>option：可选路径，表示以什么编码格式写入文件，默认utf8<br>callback：写入完成后的回调函数<br>如：const fs &#x3D; require(‘fs’)<br>fs.writeFile(‘.&#x2F;files&#x2F;3.txt’, ‘晚上好呀’, function(err) {&#x2F;&#x2F;如果写入成功,err&#x3D;null 如果写入失败，err的值是一个错误对象<br>  if (err) {<br>    return console.log(‘文件写入失败！’ + err.message)<br>  }<br>  console.log(‘文件写入成功！’)<br>})</p>
<h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p>const fs &#x3D; require(‘fs’)</p>
<p>&#x2F;&#x2F; 2. 调用 fs.readFile() 读取文件的内容<br>fs.readFile(‘..&#x2F;素材&#x2F;成绩.txt’, ‘utf8’, function(err, dataStr) {<br>  &#x2F;&#x2F; 3. 判断是否读取成功<br>  if (err) {<br>    return console.log(‘读取文件失败！’ + err.message)<br>  }<br>  &#x2F;&#x2F; console.log(‘读取文件成功！’ + dataStr)</p>
<p>  &#x2F;&#x2F; 4.1 先把成绩的数据，按照空格进行分割<br>  const arrOld &#x3D; dataStr.split(‘ ‘)<br>  &#x2F;&#x2F; 4.2 循环分割后的数组，对每一项数据，进行字符串的替换操作<br>  const arrNew &#x3D; []<br>  arrOld.forEach(item &#x3D;&gt; {<br>    arrNew.push(item.replace(‘&#x3D;’, ‘：’))<br>  })<br>  &#x2F;&#x2F; 4.3 把新数组中的每一项，进行合并，得到一个新的字符串<br>  const newStr &#x3D; arrNew.join(‘\r\n’)</p>
<p>  &#x2F;&#x2F; 5. 调用 fs.writeFile() 方法，把处理完毕的成绩，写入到新文件中<br>  fs.writeFile(‘.&#x2F;files&#x2F;成绩-ok.txt’, newStr, function(err) {<br>    if (err) {<br>      return console.log(‘写入文件失败！’ + err.message)<br>    }<br>    console.log(‘成绩写入成功！’)<br>  })<br>})</p>
<h3 id="path路径模块"><a href="#path路径模块" class="headerlink" title="path路径模块"></a>path路径模块</h3><p>是官方提供的用来处理路径的模块，提供了一系列的方法和属性满足用户对路径的处理需求<br>养成路径不写中文的好习惯！！！！！！！！！！<br>在js代码中要使用fs模块，需要先导入：const path &#x3D; require(‘path’)</p>
<h4 id="路径拼接"><a href="#路径拼接" class="headerlink" title="路径拼接"></a>路径拼接</h4><p>path.join()：将多个路径片段拼接成一个完整的路径字符串<br>语法：path.join([…paths])<br>…pathsz<string>路径片段的序列<br>返回值：<string><br>..&#x2F; 会抵消前面的路径<br>如：<br>const path &#x3D; require(‘path’)<br>const fs &#x3D; require(‘fs’)<br>&#x2F;&#x2F; 注意：  ..&#x2F; 会抵消前面的路径,前面的c被抵消了<br>const pathStr &#x3D; path.join(‘&#x2F;a’, ‘&#x2F;b&#x2F;c’, ‘..&#x2F;..&#x2F;‘, ‘.&#x2F;d’, ‘e’)<br>console.log(pathStr)  &#x2F;&#x2F; \a\b\d\e<br>fs.readFile(__dirname + ‘&#x2F;files&#x2F;1.txt’)<br>__dirname到达当前文件夹，拼接当前文件目录：<br>fs.readFile(path.join(__dirname, ‘.&#x2F;files&#x2F;1.txt’), ‘utf8’, function(err, dataStr) {<br>  if (err) {<br>    return console.log(err.message)<br>  }<br>  console.log(dataStr)<br>})</p>
<h4 id="通过路径获取文件名"><a href="#通过路径获取文件名" class="headerlink" title="通过路径获取文件名"></a>通过路径获取文件名</h4><p>path.basename()：从路径字符串中，获取路径中的最后一部分，通常用于将文件名解析出来<br>语法：path.basename(path[,ext])<br>path:一个路径的字符串<br>ext<string>：可选参数，表示文件的阔扎名<br>返回<string>表示路径中的最后一部分<br>如：<br>const path &#x3D; require(‘path’)<br>&#x2F;&#x2F; 定义文件的存放路径<br>const fpath &#x3D; ‘&#x2F;a&#x2F;b&#x2F;c&#x2F;index.html’<br>const fullName &#x3D; path.basename(fpath)<br>console.log(fullName)  &#x2F;&#x2F;输出index.html</p>
<p>const nameWithoutExt &#x3D; path.basename(fpath, ‘.html’)<br>console.log(nameWithoutExt)  &#x2F;&#x2F;输出index</p>
<h3 id="http模块"><a href="#http模块" class="headerlink" title="http模块"></a>http模块</h3><p>是用来创建web服务器的模块，通过http模块提供的http.createServe()方法可以把一台普通的电脑变成一台web服务器<br>要使用http模块，要先导入const http &#x3D; require(‘http’)</p>
<h4 id="创建最基本的web服务器"><a href="#创建最基本的web服务器" class="headerlink" title="创建最基本的web服务器"></a>创建最基本的web服务器</h4><ol>
<li>导入 http 模块<br>const http &#x3D; require(‘http’)</li>
<li>创建 web 服务器实例<br>const server &#x3D; http.createServer()</li>
<li>为服务器实例绑定 request 事件，监听客户端的请求<br>只要有客户端来请求自己的服务器，就会触发request事件，从而调用这个事件处理函数<br>server.on(‘request’, function (req, res)&#x3D;&gt;{<br>  console.log(‘Someone visit our web server.’)<br>})</li>
<li>启动服务器<br>调用服务器实例的,listen(端口号，cb回调)方法，启动web服务器<br>server.listen(8080, function () {<br>  console.log(‘server running at <a href="http://127.0.0.1:8080/">http://127.0.0.1:8080</a>‘)<br>})</li>
</ol>
<h4 id="req请求对象"><a href="#req请求对象" class="headerlink" title="req请求对象"></a>req请求对象</h4><p>req请求对象：只要服务器接收到了客户端的请求，就会调用通过serve.on()为服务器绑定的request事件处理函数<br>req包含了与客户端相关的数据和属性如url,mrthod<br>如：<br>const http &#x3D; require(‘http’)<br>const server &#x3D; http.createServer()<br>server.on(‘request’, (req, res) &#x3D;&gt; {<br>  &#x2F;&#x2F; req.url 是客户端请求的 URL 地址<br>  const url &#x3D; req.url<br>  &#x2F;&#x2F; req.method 是客户端请求的 method 类型<br>  const method &#x3D; req.method<br>  const str &#x3D; <code>Your request url is $&#123;url&#125;, and request method is $&#123;method&#125;</code><br>  console.log(str)<br>  &#x2F;&#x2F; 调用 res.end() 方法，向客户端响应一些内容，将内容响应给客户端<br>  res.end(str)<br>})<br>server.listen(80, () &#x3D;&gt; {<br>  console.log(‘server running at <a href="http://127.0.0.1/">http://127.0.0.1</a>‘)<br>})</p>
<h4 id="解决中文乱码"><a href="#解决中文乱码" class="headerlink" title="解决中文乱码"></a>解决中文乱码</h4><p>res.setHeader() 方法，设置 Content-Type 响应头，解决中文乱码的问题<br>res.setHeader(‘Content-Type’, ‘text&#x2F;html; charset&#x3D;utf-8’)<br>如：<br>const http &#x3D; require(‘http’)<br>const server &#x3D; http.createServer()<br>server.on(‘request’, (req, res) &#x3D;&gt; {<br>  &#x2F;&#x2F; 定义一个字符串，包含中文的内容<br>  const str &#x3D; <code>您请求的 URL 地址是 $&#123;req.url&#125;，请求的 method 类型为 $&#123;req.method&#125;</code><br>  &#x2F;&#x2F; 调用 res.setHeader() 方法，设置 Content-Type 响应头，解决中文乱码的问题<br>  res.setHeader(‘Content-Type’, ‘text&#x2F;html; charset&#x3D;utf-8’)<br>  &#x2F;&#x2F; res.end() 将内容响应给客户端<br>  res.end(str)<br>})<br>server.listen(80, () &#x3D;&gt; {<br>  console.log(‘server running at <a href="http://127.0.0.1/">http://127.0.0.1</a>‘)<br>})</p>
<h4 id="根据不同的url响应不同的html内容"><a href="#根据不同的url响应不同的html内容" class="headerlink" title="根据不同的url响应不同的html内容"></a>根据不同的url响应不同的html内容</h4><p>const http &#x3D; require(‘http’)<br>const server &#x3D; http.createServer()<br>server.on(‘request’, (req, res) &#x3D;&gt; {<br>  &#x2F;&#x2F; 1. 获取请求的 url 地址<br>  const url &#x3D; req.url<br>  &#x2F;&#x2F; 2. 设置默认的响应内容为 404 Not found<br>  let content &#x3D; ‘<h1>404 Not found!</h1>‘<br>  &#x2F;&#x2F; 3. 判断用户请求的是否为 &#x2F; 或 &#x2F;index.html 首页<br>  &#x2F;&#x2F; 4. 判断用户请求的是否为 &#x2F;about.html 关于页面<br>  if (url &#x3D;&#x3D;&#x3D; ‘&#x2F;‘ || url &#x3D;&#x3D;&#x3D; ‘&#x2F;index.html’) {<br>    content &#x3D; ‘<h1>首页</h1>‘<br>  } else if (url &#x3D;&#x3D;&#x3D; ‘&#x2F;about.html’) {<br>    content &#x3D; ‘<h1>关于页面</h1>‘<br>  }<br>  &#x2F;&#x2F; 5. 设置 Content-Type 响应头，防止中文乱码<br>  res.setHeader(‘Content-Type’, ‘text&#x2F;html; charset&#x3D;utf-8’)<br>  &#x2F;&#x2F; 6. 使用 res.end() 把内容响应给客户端<br>  res.end(content)<br>})</p>
<p>server.listen(80, () &#x3D;&gt; {<br>  console.log(‘server running at <a href="http://127.0.0.1/">http://127.0.0.1</a>‘)<br>})</p>
<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><p>理解：提高代码复用性，就像学后端的时候把常用的功能封装成一个个函数，放到tool.java中，就是模块化开发，别的地方要用直接调用这个函数就可以，这里也是，别的地方要用这个功能直接调用这个模块就可以，就是在B.js中要调用A.js中的功能。<br>每一个模块都是单独的，都有自己独立的作用域<br>要使用标准语法，来把模块内想要使用的方法或属性进行导出和导入</p>
<h3 id="CommonJS标准-导入导出"><a href="#CommonJS标准-导入导出" class="headerlink" title="CommonJS标准-导入导出"></a>CommonJS标准-导入导出</h3><p>node.js默认支持这个标准语法<br>导出：<br>module.exports&#x3D;{<br>    对外属性名1：属性值.<br>    对外属性名2：属性值.<br>    对外方法1：方法<br>}<br>导入：require(‘模块名或路径’)<br>如果导入内置模块（fs,path,http）写模块名<br>如果导入自己写的模块，要写路径如const obj&#x3D;require(.&#x2F;A.js)<br>后面可以const result &#x3D; obj.导出的属性名或方法名来接收使用</p>
<h3 id="ECMAScript-标准-默认导出和导入"><a href="#ECMAScript-标准-默认导出和导入" class="headerlink" title="ECMAScript 标准-默认导出和导入"></a>ECMAScript 标准-默认导出和导入</h3><p>要使用这个标准，需要在运行模块所在的文件夹新建package.json文件，并设置{“type”:”module”}就是把这行代码写进去<br>导出：<br>export default{<br>    对外属性名1：属性值.<br>    对外属性名2：属性值.<br>    对外方法1：方法<br>}<br>导入：import 变量名 from’模块名或路径’<br>这个变量名就相当于export deafult导出的对象</p>
<h3 id="ECMAScript-标准-命名导出和导入"><a href="#ECMAScript-标准-命名导出和导入" class="headerlink" title="ECMAScript 标准-命名导出和导入"></a>ECMAScript 标准-命名导出和导入</h3><p>导出：export修饰定义语句<br>如：<br>export const baseURL &#x3D;’<a href="http://xxxx.xxx.net/">http://xxxx.xxx.net</a><br>export const getArraySum &#x3D;xxxxxx<br>导入：import{同名导出变量1,同名导出变量2} from’模块名或路径’<br>如何选择：如果按需加载少量的，用命名导入导出<br>如果要全部加载，用默认导入导出</p>
<h2 id="包"><a href="#包" class="headerlink" title="包"></a>包</h2><p>将模块，代码，其他资料聚合成一个文件夹，就是包<br>所有包的根目录里面必须有package.json文件（也叫清单文件，记录包的清单信息）<br>如：有一个utils文件夹下面有各种.js和.json等文件，就管这个utils文件夹叫包<br>package.json文件常用配置项：<br>{<br>  “name”: “cz_utils”,  &#x2F;&#x2F;软件包名称<br>  “version”: “1.0.0”,  &#x2F;&#x2F;软件包当前版本号<br>  “description”: “一个数组和字符串常用工具方法的包”, &#x2F;&#x2F;软件包简短描述<br>  “main”: “index.js”,  &#x2F;&#x2F;软件包入口点<br>  “author”: “itheima”,  &#x2F;&#x2F;软件包作者<br>  “license”: “MIT”  &#x2F;&#x2F;软件包许可证（商用后可以用作者名字宣传）<br>}</p>
<h3 id="包分类："><a href="#包分类：" class="headerlink" title="包分类："></a>包分类：</h3><p>项目包：用于编写项目和业务逻辑<br>软件包：封装工具和方法进行使用（如utils文件夹）<br>注意:导入软件包时，引入的默认是indexjs 模块文件&#x2F;main 属性指定的模块文件<br>本地软件包:当前项目内使用，封装属性和方法，存在于node modules<br>全局软件包（nodemon）:本机所有项目使用，封装命令和工具，存在于系统设置的位置</p>
<h3 id="软件包结构"><a href="#软件包结构" class="headerlink" title="软件包结构"></a>软件包结构</h3><p>utils文件夹下有lib工具模块文件夹，index.js，package.json<br>lib工具模块文件夹下有arr.js,str.js<br>lib文件夹下是软件包里要封装的工具和方法的源代码<br>index.js文件是默认向外暴露的唯一出口，把所有工具模块下的方法集中起来，统一向外暴露<br>package.json是软件包的说明清单文件<br>node.js软件包入门例子中arr.js,str.js用默认导出，index.js中引入，再统一导出<br>和utils文件夹同级的server.js文件导入index.js统一导出的属性和方法</p>
<h3 id="npm软件包管理器"><a href="#npm软件包管理器" class="headerlink" title="npm软件包管理器"></a>npm软件包管理器</h3><p>是别人帮我们写好了各种工具的软件包，相当于已经写好了各种功能的各种函数，我们只要通过对应名字用就可以了</p>
<h4 id="npm使用"><a href="#npm使用" class="headerlink" title="npm使用"></a>npm使用</h4><p>下载不成功的话用管理员启动vscode<br>右键项目文件夹在终端输入命令：<br>1.初始化清单文件：npm init -y 得到package.json文件，用来记录当前项目已经下载了哪些软件包（如果项目已经有了这个文件那么跳过1，-y表示都是默认的意思）<br>2.下载软件包：npm i 软件包名称 （npm管理器帮你找到对应的软件包下载到当前项目<br>3.使用软件包（下载的软件包导入时候输入名字即可，不用路径导入）<br>在进行2操作后，package.json文件会记录你下载过的软件包和对应版本号<br>在进行2操作后，项目文件夹下会生成一个node_modules的文件夹，里面放着你下载的软件包们<br>在进行2操作后，项目文件夹下还会生成package-lock.json文件，用于锁定版本号</p>
<h4 id="npm安装所有依赖"><a href="#npm安装所有依赖" class="headerlink" title="npm安装所有依赖"></a>npm安装所有依赖</h4><p>比如你搬运的代码或拿到的项目有npm的一些软件包，但是你没下载，缺少node_modules的文件夹，现在只有package-lock.json，package.json，server.js，无法正常运行，缺少本地软件包<br>那么要自己用npm下载以来<br>方法：在项目终端输入命令：npm i<br>会自动下载package.json中记录的所有软件包到node_modules文件夹，这个文件夹内容的下载比磁盘传递的速度要快得多</p>
<h4 id="全局软件包nodemon"><a href="#全局软件包nodemon" class="headerlink" title="全局软件包nodemon"></a>全局软件包nodemon</h4><p>本地软件包:当前项目内使用，封装属性和方法，存在于node modules<br>全局软件包:本机所有项目使用，封装命令和工具，存在于系统设置的位置<br>nodemon作用：代替node命令，检测代码更改，自动重启程序<br>使用：<br>1.安装:npm i nodemon -g(-g代表安装到全局环境中)<br>2.运行:nodemon 待执行的目标js文件<br>（P96里评论说：系统禁止运行脚本的话可以换一个命令  npx nodemon run dev，但npx好像是临时的，不是下载后还能用的；也有说连外网就好下了的）</p>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>功能-命令<br>执行 js 文件：node xxx<br>初始化 package.json：npm init -y<br>下载本地软件包：npm i 软件包名<br>下载全局软件包：npm i 软件包名 -g<br>删除软件包：npm uni 软件包名</p>
]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>vuex学习篇（2024）</title>
    <url>/2024/09/17/09-vuex/</url>
    <content><![CDATA[<h2 id="认识vuex"><a href="#认识vuex" class="headerlink" title="认识vuex"></a>认识vuex</h2><p>vuex是一个vue状态管理工具（状态就是数据）<br>vuex 是一个插件，可以帮我们管理 vue 通用的数据(多组件共享的数据)<br>vuex是单一组件树，只有一个store，但是可以分模块<br>状态管理：在开发中要处理各种各样的数据，这些数据需要保存在一个位置，对这些数据的管理就称为状态管理<br>之前在组件中进行数据管理，但是实际开发中项目很复杂，数据变多，还那样做项目会变得臃肿<br>vuex的核心是store仓库，本质上是一个容器，包含应用中大部分的状态state</p>
<ul>
<li>理解：<br>比如一个购物车案例，你买了两个西瓜，那么这个2个西瓜和对应价钱这些数据不光会用在西瓜这个物品展示的组件上，还会用到结算金额的组件上，多组件共享数据的情景使用vuex可以帮我们管理</li>
<li>使用场景:<br>某个状态在很多个组件来使用(个人信息)<br>多个组件共同维护一份数据(购物车)<br>关键词：通用，多组件共享</li>
<li>vuex优势:<br>共同维护一份数据，数据集中化管理<br>响应式变化（任何一个组件修改数据，所有用到这个数据的地方也都会对应修改）<br>操作简洁(vuex提供了一些辅助函数)</li>
</ul>
<h3 id="创建一个空仓库："><a href="#创建一个空仓库：" class="headerlink" title="创建一个空仓库："></a>创建一个空仓库：</h3><p>理解：既然要多组件共享数据，那么肯定要有个地方存放这些数据。安装vuex插件，初始化一个空仓库，将来的组件想要用数据在这里拿即可<br>步骤：安装 vuex;新建vuex模块文件（创建文件夹store，在下面创建index.js文件定义vuex，在main.js中挂载使用）;创建仓库(new Vuex.Store())；main.js导入挂载（在main.js中导入挂载到vue实例上）</p>
<h4 id="安装vuex，创建空仓库"><a href="#安装vuex，创建空仓库" class="headerlink" title="安装vuex，创建空仓库"></a>安装vuex，创建空仓库</h4><p>装包（后续如果在创建项目的时候把vuex勾选上那么其实不需要装包的，会自动帮你搭好）：在终端输入npm add vuex@3 –force ，如果报错npm add vuex@3 –legacy-peer-deps（他人经验有备无患）<br>我用的第一个命令强制安装了，但是弹出了很多warn<br>要验证是否成功安装了vuex，在任意组件中使用一下，在组件中访问仓库，控制台打印一下 this.&amp;store,如果成功那么能看到这个store，如果没成功那么现实undefind</p>
<p>index.js代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//这里面存放的就是 vuex 相关的核心代码</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">// 插件安装</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="comment">//创建仓库</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>()</span><br><span class="line"><span class="comment">//导出给main.js使用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>
<p>main.js代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index&#x27;</span>  <span class="comment">//新增，导入挂载</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,  <span class="comment">//新增</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="核心概念-state状态"><a href="#核心概念-state状态" class="headerlink" title="核心概念-state状态"></a>核心概念-state状态</h3><p>理解：已经有了空仓库，那么要给仓库提供数据，还要能使用仓库的数据<br>state：状态即数据（类似vue组件中的data）<br>data是组件自己的数据<br>state是所有组件共享的数据</p>
<ol>
<li><p>提供数据：<br>state提供唯一的公共数据源，所有共享的数据都要统一放到store中的state中存储，在stste对象中可以添加要共享的数据<br>const store&#x3D;new Vuex.Store({<br>  store:{<br> &#x2F;&#x2F;要添加的数据写在这里<br> 数据名1:’早上好’,<br> 数据名2:123<br>  }<br>})</p>
</li>
<li><p>获取使用数据<br>方法1：<br>通过store直接访问找到仓库，然后再找到仓库的state，再拿到数据<br>先获取store两种方法(1)this.$store(2)import导入store<br>在模板中<br>在组件逻辑中：this.$store.state.数据名<br>在js模块中：store.sttate.数据名<br>方法2：<br>通过辅助函数简化代码，mapState辅助函数帮助我们把store中的数据自动映射到组件的计算属性中，mapState辅助函数会自动生成数据映射<br>步骤：<br>(1)导入mapState，<br>在.vue中引入import{mapState}from ‘vuex’<br>(2)用数组方式引入state，mapState([‘数据名’])多个之间用逗号分开<br>(3)展开运算符映射，computed:{…mapState([‘数据名’])}多个之间用逗号分开<br>这样做以后.vue中使用数据不需要再，直接使用即可</p>
</li>
</ol>
<h3 id="核心概念-mutations"><a href="#核心概念-mutations" class="headerlink" title="核心概念-mutations"></a>核心概念-mutations</h3><p>理解：vuex同样遵循单项数据流，意味着组件中不能能直接修改仓库的数据，如果任意组件都能修改仓库的数据，那么很难维护，所以要修改数据需要用到mutations<br>在store声明中增加代码strict:true开启严格模式，这样在组件中修改仓库数据会及时报错，但是上线后要关闭这行代码，因为监测消耗运行成本</p>
<h4 id="通过mutations修改数据"><a href="#通过mutations修改数据" class="headerlink" title="通过mutations修改数据"></a>通过mutations修改数据</h4><p>理解：本质上是组件想要修改数据，仓库提供一个修改数据的党法，组件把修改请求提交给仓库，由仓库来进行修改操作<br>使用步骤：</p>
<ol>
<li>在store声明的地方定义mutations对象，在对象中存放修改state的方法<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutatios</span>:&#123;</span><br><span class="line"><span class="attr">state</span>:&#123;</span><br><span class="line">  <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">mutations</span>:&#123;</span><br><span class="line">  <span class="title function_">addCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    state.<span class="property">count</span> +=<span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure></li>
<li>在组件中提交调用mytations<br>在组件中的相关函数中<br>this.$store.commit(‘addCount’)</li>
</ol>
<h4 id="mutation函数传参语法"><a href="#mutation函数传参语法" class="headerlink" title="mutation函数传参语法"></a>mutation函数传参语法</h4><ol>
<li>在mutations中对应函数提供参数<br>mutations:{<br>  addCount(state,n){<br> state.count +&#x3D;n<br>  }<br>}</li>
<li>在页面中提交调用mutation<br>this.$store.commit(‘addCount’,10)</li>
</ol>
<h4 id="辅助函数-mapMutations（简化方法代码）"><a href="#辅助函数-mapMutations（简化方法代码）" class="headerlink" title="辅助函数-mapMutations（简化方法代码）"></a>辅助函数-mapMutations（简化方法代码）</h4><p>mapMutations和mapState很像，它是把位于mutations中的方法提取了出来，映射到methods中<br>比如有函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>:&#123;</span><br><span class="line">  <span class="title function_">addCount</span>(<span class="params">state,n</span>)&#123;</span><br><span class="line">    state.<span class="property">count</span> +=n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你要在组件中用，可以</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>&#123;mapMutations&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;subCount&#x27;</span>])</span><br><span class="line">&#125;</span><br><span class="line">等价于</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">  <span class="title function_">sunCount</span>(<span class="params">n</span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;addCount&#x27;</span>,n)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>调用的时候需要<code>this.subCount(100)</code></p>
<h3 id="核心概念-actions"><a href="#核心概念-actions" class="headerlink" title="核心概念-actions"></a>核心概念-actions</h3><p>理解：处理异步操作，如一秒钟之后修改…<br>区别：mutations必须是同步的（便于检测数据变化，记录调试），而actions是处理异步操作的<br>比如下面的代码，context代表上下文，也可以理解为仓库</p>
<ol>
<li>提供action方法<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">actions</span>:&#123;</span><br><span class="line">  <span class="title function_">setAsyncCount</span>(<span class="params">context，num</span>)&#123;</span><br><span class="line">    <span class="comment">//一秒后，给一个数，去修改 num</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;changeCount&#x27;</span>,num)&#125;，<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>页面中dispatch调用<br><code>this.$store.dispatch(&#39;changeCount&#39;，200)</code><br>注意，改数据都是mutations，但如果是异步，就在外面套一层dispatch</li>
</ol>
<h4 id="辅助函数-mapActions"><a href="#辅助函数-mapActions" class="headerlink" title="辅助函数-mapActions"></a>辅助函数-mapActions</h4><p>mapActions 是把位于 actions中的方法提取了出来，映射到组件methods中，化简methods<br>类似前面的辅助函数，在vue中只需要：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapActions &#125;<span class="keyword">from</span><span class="string">&#x27;vuex</span></span><br><span class="line"><span class="string">methods:f</span></span><br><span class="line"><span class="string">...mapActions([&#x27;</span>changecountAction<span class="string">&#x27;])</span></span><br><span class="line"><span class="string">this.changecountAction(666)//进行调用</span></span><br></pre></td></tr></table></figure>
<h3 id="核心概念-getters"><a href="#核心概念-getters" class="headerlink" title="核心概念-getters"></a>核心概念-getters</h3><p>类似组件中的计算属性，除了state之外还需要从state中派生出一些状态，这些状态是依赖state的，此时会用到getters<br>理解：比如state中定义了一个list为1-20的数组，但是组件中要展示大于10的数据，那么此时纪要定义一个getters来找到大于10的数据<br><code>state:&#123;list:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]&#125;</code></p>
<ol>
<li>定义getters<br>注意：getters函数的第一个参数（形参）是state，而且必须要有返回值<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">getter</span>:&#123;</span><br><span class="line">  <span class="title function_">filterList</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">list</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span>=&gt;</span>tiem&gt;<span class="number">5</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>使用：访问getters<br>（1）通过store访问getters<br><code>&#123;&#123; $store.getters.filterList &#125;&#125;</code><br>（2）通过辅助函数mapGetters映射<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">  ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;filterList&#x27;</span>])</span><br><span class="line">&#125;</span><br><span class="line">&#123;&#123;filterList&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="核心概念-模块module"><a href="#核心概念-模块module" class="headerlink" title="核心概念-模块module"></a>核心概念-模块module</h3><p>由于 vuex 使用单一状态树，应用的所有状态会集中到一个比较大的对象。当应用变得非常复杂时<br>store 对象就有可能变得相当臃肿。(当项目变得越来越大的时候，Vuex会变得越来越难以维护)<br>理解：<br>vuex中和数据相关的所有东西都放在一起，那么当项目变大后和js文件的东西会变得越来越大难以维护，那么希望能够把这些东西才拆分成一个个小的模块，每一个小的模块里面装各自的state,mtation,action,getter</p>
<h4 id="模块拆分："><a href="#模块拆分：" class="headerlink" title="模块拆分："></a>模块拆分：</h4><p>在store文件夹下面新建一个modules文件夹，里面放<code>xxx1.js,xxx2.js...（一个模块一个xxx.js）</code>每一个js文件就是一个模块<br>在每个.js文件中写各自的内容，在最后进行导出<br>如user.js代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state =&#123;</span><br><span class="line"><span class="attr">userInfo</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;zs‘</span></span><br><span class="line"><span class="string">age: 18</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">const mutations=&#123;&#125;</span></span><br><span class="line"><span class="string">const actions=&#123;&#125;</span></span><br><span class="line"><span class="string">const getters=&#123;&#125;</span></span><br><span class="line"><span class="string">export default&#123;</span></span><br><span class="line"><span class="string">  state,</span></span><br><span class="line"><span class="string">  mutations,</span></span><br><span class="line"><span class="string">  actions,</span></span><br><span class="line"><span class="string">  getters</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>使用的时候在index.js中导入挂载代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title function_">store</span>(&#123;</span><br><span class="line">  <span class="comment">//在这里面最后面加下面的代码</span></span><br><span class="line"><span class="attr">modules</span>:&#123;</span><br><span class="line">user</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>导出导入后，要验证是否配置成功，在调试工具看Root下面是否有子模块user</p>
<h4 id="子模块中的state访问"><a href="#子模块中的state访问" class="headerlink" title="子模块中的state访问"></a>子模块中的state访问</h4><p>尽管已经分模块了，但其实子模块的状态，还是会挂到根级别的 state 中，属性名就是模块名。本质还是单一模块树，但是拆分子模块后可维护性高了很多<br>方法1；直接通过模块名访问<br><code>$store.state.模块名.属性名</code><br>方法2：通过mapState映射<br>默认根级别的映射<code>mapState([&#39;属性名&#39;])</code><br>子模块的映射<code>mapState(&#39;模块名&#39;,[&#39;属性名&#39;])</code><br>注意，需要开启命名空间：在子模块导出的地方第一行加上namespaced:true，可以理解为给一个一个模块起了不同的名字划分了不同空间</p>
<h4 id="子模块中的getters访问"><a href="#子模块中的getters访问" class="headerlink" title="子模块中的getters访问"></a>子模块中的getters访问</h4><p>方法1；直接通过模块名访问<br><code>$store.getters.[&#39;模块名/属性名&#39;]</code><br>方法2：通过mapGetters映射<br>默认根级别的映射<code>mapGetters([&#39;属性名&#39;])</code><br>子模块的映射<code>mapGetters(&#39;模块名&#39;,[&#39;属性名&#39;])</code><br>注意，需要开启命名空间：在子模块导出的地方第一行加上<code>namespaced:true</code>，可以理解为给一个一个模块起了不同的名字划分了不同空间</p>
<h4 id="子模块中的mutation的调用和语法"><a href="#子模块中的mutation的调用和语法" class="headerlink" title="子模块中的mutation的调用和语法"></a>子模块中的mutation的调用和语法</h4><p>默认模块中的mutation和actions会被挂载到全局，需要开启命名空间，才会挂载到子模块<br>调用子模块中的mutation:<br>方法1；直接通过store访问<br><code>$store.commit.[&#39;模块名/属性名&#39;,额外参数]</code><br>方法2：通过mapMutations映射<br>默认根级别的映射<code>mapMutations([&#39;属性名&#39;])</code><br>子模块的映射<code>mapMutations(&#39;模块名&#39;,[&#39;属性名&#39;])</code><br>注意，需要开启命名空间</p>
<h4 id="子模块中的action的调用和语法"><a href="#子模块中的action的调用和语法" class="headerlink" title="子模块中的action的调用和语法"></a>子模块中的action的调用和语法</h4><p>默认模块中的mutation和actions会被挂载到全局，需要开启命名空间，才会挂载到子模块<br>调用子模块中的action:<br>方法1；直接通过stores访问<br><code>$store.commit.[&#39;模块名/属性名&#39;,额外参数]</code><br>方法2：通过mapActions映射<br>默认根级别的映射<code>mapActions([&#39;属性名&#39;])</code><br>子模块的映射<code>mapActions(&#39;模块名&#39;,[&#39;属性名&#39;])</code><br>注意，需要开启命名空间</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue--从vue2入门到了解</title>
    <url>/2024/07/03/07-vue/</url>
    <content><![CDATA[<h1 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h1><p>本文是vue2的学习笔记，包含2024学习B站黑马程序员课程，和2025年学习B站尚硅谷课程的总结和心得，难点部分有详细的理解过程和例子，适合学习和回顾知识<br>由于包含了两次不同来源课程的学习，知识排版略有混乱，不过无伤大雅^_^</p>
<h1 id="认识Vue"><a href="#认识Vue" class="headerlink" title="认识Vue"></a>认识Vue</h1><h2 id="什么是Vue"><a href="#什么是Vue" class="headerlink" title="什么是Vue"></a>什么是Vue</h2><p>是一套构建用户界面的渐进式框架<br>Vue2官网：<a href="https://v2.cn.vuejs.org/">https://v2.cn.vuejs.org/</a><br>构建用户界面是基于数据渲染出用户可以看到的界面<br>渐进式就是循序渐进，不一定非得把Vue中的所有API都学完才能开发Vue，可以学一点开发一点<br>Vue的两种开发方式：</p>
<ol>
<li>Vue核心包开发，场景：局部模块改造</li>
<li>Vue核心包&amp;Vue插件&amp;工程化，场景：整站开发</li>
</ol>
<h2 id="框架和库"><a href="#框架和库" class="headerlink" title="框架和库"></a>框架和库</h2><p>框架就是一套完整的解决方案<br>库：类似工具箱，是一堆方法的集合，比如 axios、lodash、echarts等<br>框架：是一套完整的解决方案，实现了大部分功能，我们只需要按照一定的规则去编码即可<br>框架的特点：有一套必须让开发者遵守的规则或者约束<br>学框架就是学习的这些规则 <a href="https://v2.cn.vuejs.org/">官网</a></p>
<h2 id="创建Vue实例-vm-vue实例对象"><a href="#创建Vue实例-vm-vue实例对象" class="headerlink" title="创建Vue实例(vm&#x3D;vue实例对象)"></a>创建Vue实例(vm&#x3D;vue实例对象)</h2><p>核心步骤（4步）：</p>
<ol>
<li>准备容器，如<div id="app"></div></li>
<li>引包（官网<a href="https://v2.cn.vuejs.org/v2/guide/installation.html%E4%B8%8A%E6%89%BE%EF%BC%89">https://v2.cn.vuejs.org/v2/guide/installation.html上找）</a><br>— 开发版本（完整适合学习）&#x2F;生产版本（压缩后的）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
<li>创建Vue实例  new Vue()</li>
<li>指定配置项，渲染数据<ol>
<li>el:指定挂载点</li>
<li>data提供数据<br>如：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 这里将来会编写一些用于渲染的代码逻辑 </span></span><br><span class="line"><span class="comment">  双大括号&#123;&#123;&#125;&#125;，然后把变量名丢进去，就会把值渲染出来--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 一旦引入 VueJS核心包，在全局环境，就有了 Vue 构造函数，就可以创建实例</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 通过 el 配置选择器，就可以指定 Vue 管理的是哪个盒子</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//要渲染需要现有提供的数据，通过 data 提供数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&#x27;Hello &#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">count</span>: <span class="number">666</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="响应式特性"><a href="#响应式特性" class="headerlink" title="响应式特性"></a>响应式特性</h2><p>响应式就是数据变，视图对应变<br>如何访问 和 修改 data中的数据（响应式演示）<br>data中的数据, 最终会被添加到实例上<br>① 访问数据： “实例.属性名”<br>② 修改数据： “实例.属性名”&#x3D; “值”</p>
<h2 id="vue中的数据代理"><a href="#vue中的数据代理" class="headerlink" title="vue中的数据代理"></a>vue中的数据代理</h2><p>数据代理：通过一个对象代理对另一个对象中属性的操作（读写）<br><img src="/postImgs/vue2/vue01.png" alt="vue中的数据代理"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj =&#123;<span class="attr">x</span>:<span class="number">100</span>&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> obj2 = &#123;<span class="attr">y</span>:<span class="number">200</span>&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//通过obj2调用x，获取的是obj.x的值</span></span></span><br><span class="line"><span class="language-javascript">object.<span class="title function_">defineProperty</span>(obj2,<span class="string">&#x27;x&#x27;</span>,&#123;<span class="title function_">get</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> obj.<span class="property">x</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">set</span>(<span class="params">vuale</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  obj.<span class="property">x</span>=value</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h1><h2 id="MVVM模型"><a href="#MVVM模型" class="headerlink" title="MVVM模型"></a>MVVM模型</h2><p>M－model 对应data数据<br>V-view 模板<br>VM- 视图模型，vue实例对象<br>前端主流的框架都是这个思想：把数据放在要求的位置（Model），写出模板代码（view）。里面具体怎么插入值中间的vm实例对象来操作<br><img src="/postImgs/vue2/vue01.jpg" alt="vue中的MVVM"><br>插值表达式可以直接用vm上的东西和$符(vue原型)后面的原型</p>
<h2 id="数据代理–js中的Object-defineProperty方法"><a href="#数据代理–js中的Object-defineProperty方法" class="headerlink" title="数据代理–js中的Object.defineProperty方法"></a>数据代理–js中的Object.defineProperty方法</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person=&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;枫糖&#x27;</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;女&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(对象名,<span class="string">&#x27;属性名&#x27;</span>,｛</span><br><span class="line">｝)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person,<span class="string">&#x27;home&#x27;</span>,｛</span><br><span class="line"><span class="attr">value</span>:<span class="string">&#x27;泽兰&#x27;</span></span><br><span class="line">｝)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)<span class="comment">//&#123;name:&#x27;枫糖&#x27;,sex:&#x27;女&#x27;,home:&#x27;泽兰&#x27;&#125;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// 只输出 &#x27;name&#x27;, &#x27;sex&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用这个方法添加的属性和直接写上去的属性（name和sex）有什么区别呢？"><a href="#使用这个方法添加的属性和直接写上去的属性（name和sex）有什么区别呢？" class="headerlink" title="使用这个方法添加的属性和直接写上去的属性（name和sex）有什么区别呢？"></a>使用这个方法添加的属性和直接写上去的属性（name和sex）有什么区别呢？</h3><h4 id="属性默认不参与枚举"><a href="#属性默认不参与枚举" class="headerlink" title="属性默认不参与枚举"></a>属性默认不参与枚举</h4><p><code>console.log(Object.keys.(person))</code>&#x2F;&#x2F;只有name和sex</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> person)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;@&#x27;</span>,person[key])</span><br><span class="line"><span class="comment">//输出的是name和sex属性的属性值，用@分隔开，还是没有home属性参与</span></span><br><span class="line"><span class="comment">//@ 枫糖</span></span><br><span class="line"><span class="comment">//@ 女</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果想要使用这个方法添加的属性也参与枚举，添加一行代码<code>enumerable:true</code>即可,控制属性是否可以枚举，默认值false</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineproperty</span>(person,<span class="string">&#x27;home&#x27;</span>,｛</span><br><span class="line"><span class="attr">value</span>:<span class="string">&#x27;泽兰&#x27;</span></span><br><span class="line"><span class="attr">enumerable</span>:<span class="literal">true</span></span><br><span class="line">｝)</span><br></pre></td></tr></table></figure>
<h4 id="属性值默认不可以修改"><a href="#属性值默认不可以修改" class="headerlink" title="属性值默认不可以修改"></a>属性值默认不可以修改</h4><p>要想修改添加代码<code>writabe:true</code><br>控制属性是否可以被修改，默认值false</p>
<h4 id="属性不可以随意删除"><a href="#属性不可以随意删除" class="headerlink" title="属性不可以随意删除"></a>属性不可以随意删除</h4><p>想要属性可以被删除添加代码<code>configurable:true</code><br>控制属性是否可以被删除，默认值是false</p>
<h4 id="get和set：让hometown和person之间联系起来"><a href="#get和set：让hometown和person之间联系起来" class="headerlink" title="get和set：让hometown和person之间联系起来"></a><strong>get和set</strong>：让hometown和person之间联系起来</h4><p>get函数，必须有返回值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> hometown = <span class="string">&#x27;泽兰&#x27;</span></span><br><span class="line"><span class="keyword">let</span> person=&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;枫糖&#x27;</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;女&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person, <span class="string">&#x27;home&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">//getter：当读取 person.home 时调用此函数</span></span><br><span class="line">  <span class="attr">get</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人读取了home属性&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> _hometown; <span class="comment">// 返回关联的内部变量值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//setter：当设置 person.home 时调用此函数</span></span><br><span class="line">  <span class="attr">set</span>: <span class="keyword">function</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;有人修改了home属性&#x27;</span>, newValue);</span><br><span class="line">    _hometown = newValue; <span class="comment">// 修改关联的内部变量</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="comment">// 通常需要可枚举</span></span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span> <span class="comment">// 通常需要可配置</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">home</span>); <span class="comment">// 输出: &quot;有人读取了home属性&quot;, 然后 &quot;泽兰&quot;</span></span><br><span class="line">person.<span class="property">home</span> = <span class="string">&#x27;星露谷&#x27;</span>; <span class="comment">// 输出: &quot;有人修改了home属性 星露谷&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(_hometown); <span class="comment">// &quot;星露谷&quot; (内部变量被修改)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">home</span>); <span class="comment">// 输出: &quot;有人读取了home属性&quot;, 然后 &quot;星露谷&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>home 属性本身并不存储值。它的值是通过 get 函数动态返回的（这里是 _hometown 的值）。当给它赋值时，是通过 set 函数去修改关联的 _hometown 变量。</p>
</blockquote>
<h2 id="vue中的数据代理（和-data）"><a href="#vue中的数据代理（和-data）" class="headerlink" title="vue中的数据代理（和_data）"></a>vue中的数据代理（和_data）</h2><p>vm里面（data里的数据）就是用的数据代理<br>有人读取vm里的name，那么name属性的getter工作，获取data.name<br>如果有人修改vm里的name，那么name属性的setter工作，把data.name修改掉</p>
<h3 id="想要获取data-name，该怎么获取？"><a href="#想要获取data-name，该怎么获取？" class="headerlink" title="想要获取data.name，该怎么获取？"></a>想要获取data.name，该怎么获取？</h3><p>如果直接vm.data会发现undefinded，vm.data.name更找不到<br>查看vm模型，在里面有_data:{}<br><strong>_是一种程序员之间默认的协定，属于实例自己的私有数据</strong><br>_data里面涉及到数据劫持<br>所以vm._data＝options.data &#x3D;data<br>所以vm._data &#x3D;&#x3D;&#x3D;data<br>要找data中的数据，用vm._data.name获取</p>
<h2 id="总结！！！"><a href="#总结！！！" class="headerlink" title="总结！！！"></a>总结！！！</h2><blockquote>
<p>如果能理解了就能看懂下面这段话，不理解仔细看笔记数据代理部分，或者重看B站尚硅谷vue-数据代理这部分视频<br>如果vue没有数据代理，那么想要获取名字，不能再<code>&#123;&#123;name&#125;&#125;</code>，而是要<code>&#123;&#123;_data.name&#125;&#125;</code><br>因为vm里面的是_data，开始是没有data里面的属性(name)的，而我们能够直接拿到<code>&#123;&#123;name&#125;&#125;</code>是因为vue通过Object,defineProperty()做了数据代理，为每一个添加到vm上的属性都指定一个getter&#x2F;setter，把data里的数据放到了vm中一份，目的就是写代码更方便<br><img src="/postImgs/vue2/vue2.jpg" alt="vue中的数据代理"></p>
</blockquote>
<h2 id="认识-简单计算属性"><a href="#认识-简单计算属性" class="headerlink" title="认识 简单计算属性"></a>认识 简单计算属性</h2><p>定义:要用的属性不存在，要通过已有属性计算得来<br>原理:底层借助了0bjcet.defineproperty方法提供的getter和setter<br>理解：比如买了三个苹果两个桃子一个西瓜，要基于每个的数量（现有的数据）计算出一共买了多少个东西（计算出的新属性）（累加函数reduce）<br>计算属性：基于现有的<strong>属性</strong>，计算出来的新属性。依赖的数据变化会自动重新计算</p>
<p>优势:与methods实现相比，内部有缓存机制(复用)，效率更高，调试方便。<br>备注:<br>1.计算属性最终会出现在vm上，直接读取使用即可。<br>2.如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发</p>
<p>语法：声明在<strong>computed配置项中</strong>（和data并列），一个计算属性对应一个对象<br>使用起来和普通属性一样使用<br>不是函数，是属性，不加括号！！！</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">  计算属性名()&#123;</span><br><span class="line">    基于现有数据，编写求职逻辑</span><br><span class="line">    在计算属性内部，可以直接通过<span class="variable language_">this</span>访问到vm</span><br><span class="line">    想要用data里面的数据，用<span class="variable language_">this</span>.属性名来获取属性值</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">    <span class="keyword">return</span> 结果</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="computed-计算属性-vs-methods-方法"><a href="#computed-计算属性-vs-methods-方法" class="headerlink" title="computed 计算属性 vs methods 方法"></a>computed 计算属性 vs methods 方法</h2><ol>
<li>computed 计算属性:<br>作用:封装了一段对于数据的处理，求得一个结果。<br>语法:</li>
</ol>
<p>① 写在 computed 配置项中<br>② 作为属性，直接使用 → <code>this.计算属性 &#123;&#123; 计算属性 &#125;&#125;</code></p>
<ol start="2">
<li>methods 方法:<br>作用:给实例提供一个方法，调用以处理业务逻辑。<br>语法:</li>
</ol>
<p>① 写在 methods 配置项中<br>② 作为方法，需要调用 → <code>this.方法名()&#123;&#123;方法名()&#125;&#125;</code> @事件名&#x3D;”方法名’</p>
<ol start="3">
<li>缓存特性(提升性能):<br>计算属性会对计算出来的结果缓存，再次使用直接读取缓存依赖项变化了，会自动重新计算 →并再次缓存</li>
</ol>
<h2 id="完整计算属性"><a href="#完整计算属性" class="headerlink" title="完整计算属性"></a>完整计算属性</h2><p>计算属性默认的简写，只能读取访问，不能够修改，如果要修改，需要写计算属性的完整写法<br>注意get方法有缓存<br>get在什么时候调用呢<br>初次读取计算属性的时候，和所依赖的数据发生变化的时候被调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">  计算属性名:&#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      一段逻辑代码(计算逻辑)</span><br><span class="line">    <span class="keyword">return</span> 结果</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">修改的值</span>)&#123;</span><br><span class="line">    一段逻辑代码(修改逻辑)</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">firstName</span>:<span class="string">&#x27;枫&#x27;</span>,</span><br><span class="line">    <span class="attr">lastName</span>:<span class="string">&#x27;糖&#x27;</span></span><br><span class="line">    <span class="comment">//fullName:&#x27;枫-糖&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">  <span class="attr">fullName</span>:&#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;get被调用了&#x27;</span>)</span><br><span class="line"><span class="comment">// console.log(this)//此处的this是vm</span></span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//set什么时候调用？当fullName被修改时。</span></span><br><span class="line"><span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;set&#x27;</span>,value)</span><br><span class="line"><span class="keyword">const</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">firstName</span> = arr[<span class="number">0</span>]</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">lastName</span> = arr[<span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="计算属性简单写法"><a href="#计算属性简单写法" class="headerlink" title="计算属性简单写法"></a>计算属性简单写法</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">  <span class="title function_">fullName</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstName</span>+<span class="string">&#x27;-&#x27;</span>+<span class="variable language_">this</span>.<span class="property">lastName</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="watch侦听器（监听器）"><a href="#watch侦听器（监听器）" class="headerlink" title="watch侦听器（监听器）"></a>watch侦听器（监听器）</h1><h2 id="简单写法"><a href="#简单写法" class="headerlink" title="简单写法"></a>简单写法</h2><p>场景：直接监视简单类型数据（只有一个）<br>作用：监视数据变化，执行一些业务逻辑或异步操作<br>简单写法</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line">  <span class="attr">data1</span>:<span class="string">&#x27;西瓜&#x27;</span></span><br><span class="line">  <span class="attr">obj</span>:&#123;</span><br><span class="line">    <span class="attr">data2</span>:<span class="string">&#x27;桃子&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line">  数据属性名(newValue,oldValue)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;对象.属性名&#x27;</span>(newValue,oldValue)&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：下面的数据属性名是data1，对象.属性名是’obj.data2’，watch里面监听的方法要和data里面的数据名字一致<br>newVlaue表示变化后的新值，oldValue表示变化之前的旧值，可以省略，用哪个写哪个</p>
<h2 id="完整写法：添加额外配置项"><a href="#完整写法：添加额外配置项" class="headerlink" title="完整写法：添加额外配置项"></a>完整写法：添加额外配置项</h2><p>常用在监视对象中的所有属性变化，就是有多个地方的内容需要监视和修改，不要写多个监听器，写一个里面加上deep:true即可<br>deep:true 对复杂类型深度监视<br>immmediate:true 初始化立即执行一次handler方法<br>上面两个看情况写在<br>数据属性名(){写这里}</p>
<p>深度监视:<br>(1).Vue中的watch默认不监测对象内部值的改变(一层)<br>(2).配置deep:true可以监测对象内部值改变(多层)。<br>备注:<br>(1).Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以<br>(2).使用watch时根据数据的具体结构，决定是否采用深度监视。</p>
<h3 id="完整写法和简单写法对比"><a href="#完整写法和简单写法对比" class="headerlink" title="完整写法和简单写法对比"></a>完整写法和简单写法对比</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">isHot</span>:<span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>:&#123;</span><br><span class="line">    <span class="comment">//正常写法</span></span><br><span class="line">    <span class="attr">isHot</span>:&#123;</span><br><span class="line">      <span class="attr">immmediate</span>:<span class="literal">true</span></span><br><span class="line">      <span class="attr">deep</span>:<span class="literal">true</span></span><br><span class="line">      <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">lou</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>,newValue,oldValue)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//简写</span></span><br><span class="line">        <span class="title function_">isHot</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">lou</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>,newValue,oldValue)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="监视多级结构中某个属性的变化"><a href="#监视多级结构中某个属性的变化" class="headerlink" title="监视多级结构中某个属性的变化"></a>监视多级结构中某个属性的变化</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">isHot</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">numbers</span>:&#123;</span><br><span class="line">      <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">b</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">watch</span>:&#123;</span><br><span class="line">    <span class="attr">isHot</span>:&#123;</span><br><span class="line">      <span class="string">&#x27;number.a&#x27;</span>:&#123;</span><br><span class="line">        <span class="title function_">handler</span>(<span class="params"></span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a被改变了&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="在vue外部监听"><a href="#在vue外部监听" class="headerlink" title="在vue外部监听"></a>在vue外部监听</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>:(&#123;</span><br><span class="line">  <span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>:&#123;</span><br><span class="line">    <span class="attr">isHot</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">numbers</span>:&#123;</span><br><span class="line">      <span class="attr">a</span>:<span class="number">1</span>,</span><br><span class="line">      <span class="attr">b</span>:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">//注意，这里的isHot一定要写成&#x27;isHot&#x27;</span></span><br><span class="line">vm.<span class="property">$watch</span>:(<span class="string">&#x27;isHot&#x27;</span>,&#123;</span><br><span class="line">  <span class="comment">//isHot被改变时，handler被调用</span></span><br><span class="line">   <span class="title function_">handler</span>(<span class="params">newValue,oldValue</span>)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被改变了&#x27;</span>,newVlaue)</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>注意，上面的isHot一定要写成’isHot’</strong><br><strong>在js中这些要用单引号’’包裹，在vue实例中可以省略，但正常的还是要加单引号</strong></p>
<h1 id="Vue指令"><a href="#Vue指令" class="headerlink" title="Vue指令"></a>Vue指令</h1><h2 id="认识指令"><a href="#认识指令" class="headerlink" title="认识指令"></a>认识指令</h2><p>指令是 Vue 提供的带有 v- 前缀 的 特殊 标签属性，能提高程序员操作 DOM 的效率，是 vue 开发中最基础、最常用、最简单的知识点<br>vue会根据不同指定针对标签实现不同功能<br>vue 中的指令按照不同的用途可以分为如下 6 大类：</p>
<ul>
<li>内容渲染指令（v-html、v-text）</li>
<li>条件渲染指令（v-show（控制显示与否）、v-if（控制存在与否）、v-else、v-else-if）</li>
<li>事件绑定指令（v-on）</li>
<li>属性绑定指令 （v-bind）</li>
<li>双向绑定指令（v-model）</li>
<li>列表渲染指令（v-for）</li>
</ul>
<h2 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h2><p>是一种Vue的模板语法，用来渲染出Vue提供的数据<br>任何可以求得结果的都叫表达式<br>插值表达式不能够解析标签，要解析标签用指令！！<br><strong>模板里面的内容尽可能少</strong><br>注意在插值语法里想要展现函数的返回值，必须要函数名()小括号()不能省略！</p>
<h3 id="作用：利用表达式进行插值，渲染到页面中"><a href="#作用：利用表达式进行插值，渲染到页面中" class="headerlink" title="作用：利用表达式进行插值，渲染到页面中"></a>作用：利用表达式进行插值，渲染到页面中</h3><p>表达式：是可以被求值的代码，JS引擎会讲其计算出一个结果<br>以下的情况都是表达式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">money + <span class="number">100</span></span><br><span class="line">money - <span class="number">100</span></span><br><span class="line">money * <span class="number">10</span></span><br><span class="line">money / <span class="number">10</span> </span><br><span class="line">price &gt;= <span class="number">100</span> ? <span class="string">&#x27;真贵&#x27;</span>:<span class="string">&#x27;还行&#x27;</span></span><br><span class="line">obj.<span class="property">name</span></span><br><span class="line">arr[<span class="number">0</span>]</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line">obj.<span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>插值表达式语法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;h3&gt;&#123;&#123;title&#125;&#125;&lt;h3&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;nickName.toUpperCase()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;age &gt;= 18 ? &#x27;成年&#x27;:&#x27;未成年&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;obj.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;fn()&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="错误用法"><a href="#错误用法" class="headerlink" title="错误用法"></a>错误用法</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>在插值表达式中使用的数据 必须在data中进行了提供(必须声明过)</span><br><span class="line">&lt;p&gt;&#123;&#123;hobby&#125;&#125;&lt;<span class="regexp">/p&gt;  /</span>/如果在data中不存在hobby则会报错</span><br><span class="line"><span class="number">2.</span>支持的是表达式，而非语句！，比如：<span class="keyword">if</span>   <span class="keyword">for</span> ...</span><br><span class="line">&lt;p&gt;&#123;&#123;<span class="keyword">if</span>&#125;&#125;&lt;/p&gt;</span><br><span class="line"><span class="number">3.</span>不能在标签属性中使用 &#123;&#123;  &#125;&#125; 插值 (插值表达式只能标签中间使用)</span><br><span class="line">&lt;p title=<span class="string">&quot;&#123;&#123;username&#125;&#125;&quot;</span>&gt;我是P标签&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h2 id="内容渲染指令v-html、v-text"><a href="#内容渲染指令v-html、v-text" class="headerlink" title="内容渲染指令v-html、v-text"></a>内容渲染指令v-html、v-text</h2><h3 id="v-text-类似innerText"><a href="#v-text-类似innerText" class="headerlink" title="v-text (类似innerText)"></a>v-text (类似innerText)</h3><p>向其所在的标签插入文本<strong>内容</strong>，替换掉整个标签里的内容,会覆盖标签原有内容<br>（更多情况下还是使用插值语法，更灵活，插值语法不会替换掉本来有的其他内容）<br>不能够解析标签</p>
<h3 id="v-html（类似-innerHTML）"><a href="#v-html（类似-innerHTML）" class="headerlink" title="v-html（类似 innerHTML）"></a>v-html（类似 innerHTML）</h3><p>向其所在的标签插入html，替换掉标签里的内容,会覆盖标签原有内容<br>能够识别解析html结构</p>
<h4 id="v-html安全性问题"><a href="#v-html安全性问题" class="headerlink" title="v-html安全性问题"></a>v-html安全性问题</h4><p>再网站上动态渲染任意HTML容易导致XSS（盗走cookie盗用你的身份）攻击<br>一定要在可信的内容上使用v-html<br>不能用在用户提交的内容上</p>
<h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><h3 id="v-show-v-if-v-else-if-v-else"><a href="#v-show-v-if-v-else-if-v-else" class="headerlink" title="v-show,v-if,v-else-if,v-else"></a>v-show,v-if,v-else-if,v-else</h3><ul>
<li>v-show :调整display属性，显示与隐藏，实际上元素还在;用于切换频繁的地方   </li>
<li>v-if  v-else-if : 存在与否 ，用于切换频率低的地方</li>
<li>他们是一组判断，如果前面的v-if和v-else-if 的条件一样，那么v-if判断为真就不在走v-else-if ；如果是多个v-if判断，那么他们登记一样，前面的判断为真还会走后面的v-if判断</li>
<li>v-else 后面不用写判断，写了也没用，else是最后剩下的，前面都没有那么就是它<br>注意：v-if,v-else-if,v-else-if,v-else他们是紧挨在一起的，中间不允许放其他东西（比如插入一个div）打断，如果打断了，前面的奏效后面的无效了</li>
</ul>
<h3 id="template配合v-if使用"><a href="#template配合v-if使用" class="headerlink" title="template配合v-if使用"></a>template配合v-if使用</h3><p>templat只能配合v-if不能配合v-show</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>枫糖雾刃松瑰<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>虞寻歌图蓝B8017913<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="列表渲染-v-for-要配-key使用！"><a href="#列表渲染-v-for-要配-key使用！" class="headerlink" title="列表渲染 v-for 要配:key使用！"></a>列表渲染 v-for 要配:key使用！</h2><h3 id="v-for使用方法"><a href="#v-for使用方法" class="headerlink" title="v-for使用方法"></a>v-for使用方法</h3><p><code>v-for=&quot;形参 in 数据池名&quot; :key=&quot;形参.id&quot; </code><br><code>v-for=&quot;(形参,index) in 数据池名&quot; :key=&quot;index &quot; </code></p>
<ul>
<li>index是自动给的索引值从0开始，如果数据池里面没有id，那么就用索引值给key</li>
<li><strong>使用遍历生成多个同样结构的数据，必须给每个结构生成一个唯一标识</strong></li>
<li><strong>v-for 里面的in 可以换成of，of有迭代器的数据都能遍历（比如字符串，数组，集合，映射，nodelist ,argment</strong></li>
</ul>
<h3 id="想要生成：姓名－id，的列表该怎么做"><a href="#想要生成：姓名－id，的列表该怎么做" class="headerlink" title="想要生成：姓名－id，的列表该怎么做"></a>想要生成：姓名－id，的列表该怎么做</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;p in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span></span><br><span class="line">//或者这样写</span><br><span class="line">//<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(p,index) in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;p.name&#125;&#125;-&#123;&#123;p.id&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>＝&quot;<span class="attr">text</span>/<span class="attr">javascript</span>&quot;&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>:<span class="string">&quot;#root&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">persons</span>:[</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="string">&#x27;001&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;枫糖&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="string">&#x27;002&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;雾刃&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;<span class="attr">id</span>:<span class="string">&#x27;003&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;松瑰&#x27;</span>&#125;</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>多用于遍历数组和遍历对象，但是还有其他用法如下：</p>
<h3 id="不要学的太死板，这样的遍历v-for也可以"><a href="#不要学的太死板，这样的遍历v-for也可以" class="headerlink" title="不要学的太死板，这样的遍历v-for也可以"></a>不要学的太死板，这样的遍历v-for也可以</h3><p><img src="/postImgs/vue2/vue03.png" alt="v-for"></p>
<h2 id="在用v-for时-key的原理"><a href="#在用v-for时-key的原理" class="headerlink" title="在用v-for时 key的原理"></a>在用v-for时 key的原理</h2><p>key的作用是给节点进行标识（类似身份证号）<br>如果不写Key，那么vue会默认把index作为key<br><strong>重点：开发中尽量使用唯一标识的值作为Key，比如id，身份证号，学号</strong></p>
<h3 id="key为index和id有什么区别"><a href="#key为index和id有什么区别" class="headerlink" title="key为index和id有什么区别"></a>key为index和id有什么区别</h3><p>理解：key用index在<strong>对数据进行打乱顺序</strong>操作时会<strong>有问题</strong>：<br>在数组的<strong>前面</strong>添加一个对象<br><img src="/postImgs/vue2/vue04.png" alt="v-for"><br><img src="/postImgs/vue2/vue05.png" alt="v-for"><br>添加后表面上没问题，但实际上这样效率低，同时如果用这些数据干别的事情（比如跟input框）会出现错乱<br><strong>虚拟的dom上有key，但是真实的没有，因为被vue占用了</strong></p>
<h3 id="key工作原理图"><a href="#key工作原理图" class="headerlink" title="key工作原理图"></a>key工作原理图</h3><p>index作为key工作原理图<br><img src="/postImgs/vue2/vue06.png" alt="index作为key"><br>用id作为Key不会数据错乱：<br><img src="/postImgs/vue2/vue07.png" alt="id作为key"></p>
<h3 id="小结（面试题）"><a href="#小结（面试题）" class="headerlink" title="小结（面试题）"></a>小结（面试题）</h3><p><img src="/postImgs/vue2/vue08.png" alt="小结">）</p>
<h2 id="vue中对已知列表进行过滤（模糊搜索）"><a href="#vue中对已知列表进行过滤（模糊搜索）" class="headerlink" title="vue中对已知列表进行过滤（模糊搜索）"></a>vue中对已知列表进行过滤（模糊搜索）</h2><p>比如关键字搜索筛查（模糊搜索）<br>获取用户输入（v-model双向绑定）－&gt;筛选数据（当用户输入的关键词发生变变化时）<br>思路：使用indexOf函数进行匹配查找，使用filter方法过滤，把过滤后的数据用新数组接收，把新数组作为数据池给v-for输出展示<br><strong>如果用原数组，那么原来的数据会被改变，原数据不要修改</strong> </p>
<h3 id="使用watch"><a href="#使用watch" class="headerlink" title="使用watch"></a>使用watch</h3><p><img src="/postImgs/vue2/vue12.png" alt="watch"><br><img src="/postImgs/vue2/vue13.png" alt="watch"><br><strong>但是这个样子一上来是没有数据展示的，想要开始有数据展现，巧空字符串！！</strong><br>添加一行<code>immediate:true,</code><br>先直接调用一次，调用的这一次是空字符串，全部能匹配到<br><img src="/postImgs/vue2/vue11.png" alt="巧用字符串"></p>
<h3 id="使用计算属性（最佳）"><a href="#使用计算属性（最佳）" class="headerlink" title="使用计算属性（最佳）"></a>使用计算属性（最佳）</h3><p><img src="/postImgs/vue2/vue10.png" alt="计算属性"><br>里面的return 是返回给filter，外面的return是返回给数组对象</p>
<h2 id="功能升级－对列表进行排序"><a href="#功能升级－对列表进行排序" class="headerlink" title="功能升级－对列表进行排序"></a>功能升级－对列表进行排序</h2><p>思路：先过滤，再排序<br>在data里面添加sortType属性（规定升序降序原顺序分别为2，1，0）<br>在查找过滤后，用一个数组收集结果，对数组进行判断查看是否需要排序<br>使用arr.sort进行排序</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">data</span>:&#123;</span><br><span class="line"><span class="attr">keyword</span>:<span class="string">&#x27;&#x27;</span>,<span class="comment">//搜索的关键字</span></span><br><span class="line"><span class="attr">sortTyper</span>:<span class="number">0</span>, <span class="comment">//用于排序类型选择</span></span><br><span class="line"><span class="attr">persons</span>:[&#123;&#125;,&#123;&#125;,&#123;&#125;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line"><span class="title function_">filPersons</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//arr数组接收模糊搜索后的结果</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="title function_">filter</span>(<span class="function">(<span class="params">p</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> p.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyword</span>)!==-<span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//对arr数组进行排序判断</span></span><br><span class="line"><span class="comment">//如果sortType有值，进行排序</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">sortType</span>)&#123;</span><br><span class="line">arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">p1,p2</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sortType</span>===<span class="number">2</span> ? p1.<span class="property">age</span> - p2.<span class="property">age</span> : p2.<span class="property">age</span>-p1.<span class="property">age</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/vue2/vue14.png" alt="多种排序功能"></p>
<h2 id="条件渲染笔记（旧）"><a href="#条件渲染笔记（旧）" class="headerlink" title="条件渲染笔记（旧）"></a>条件渲染笔记（旧）</h2><h3 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h3><ol>
<li>作用：  控制元素显示与否</li>
<li>语法：  v-show &#x3D; “表达式”   表达式值为 true 显示， false 隐藏</li>
<li>原理：  切换 css的display:none 控制显示隐藏</li>
<li>场景：频繁切换显示隐藏的场景</li>
</ol>
<h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><ol>
<li>作用：  控制元素存在与否</li>
<li>底层原理：根据 判断条件 控制元素的 创建 和 移除（条件渲染）</li>
<li>语法：  v-if&#x3D; “表达式”          表达式值 true显示， false 隐藏</li>
<li>原理：  基于条件判断，是否创建 或 移除元素节点</li>
<li>场景：  要么显示，要么隐藏，不频繁切换的场景<br>   示例代码：   <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>我是v-show控制的盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>我是v-if控制的盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">flag</span>: <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="v-else-和-v-else-if"><a href="#v-else-和-v-else-if" class="headerlink" title="v-else 和 v-else-if"></a>v-else 和 v-else-if</h3><ol>
<li>作用：辅助v-if进行判断渲染，</li>
<li>语法：v-else  v-else-if&#x3D;”判断表达式”</li>
<li>需要紧接着v-if使用</li>
<li>v-else 和 v-else-if二者必须同时存在，不能只存在一个<br>示例代码：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;gender===1&quot;</span>&gt;</span>性别：♂ 男<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>性别：♀ 女<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  &lt;hr&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;score &gt;=90&quot;</span>&gt;</span>成绩评定A：奖励电脑一台<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score &gt;=80&quot;</span>&gt;</span>成绩评定B：奖励周末郊游<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score &gt;=70&quot;</span>&gt;</span>成绩评定C：奖励零食礼包<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score &lt;70&quot;</span>&gt;</span>成绩评定D：惩罚一周不能玩手机<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">gender</span>: <span class="number">2</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">score</span>: <span class="number">95</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="注册事件指令-v-on（旧）"><a href="#注册事件指令-v-on（旧）" class="headerlink" title="注册事件指令 v-on（旧）"></a>注册事件指令 v-on（旧）</h2><p>如需为DOM注册事件，及其的简单，语法如下：<br>作用：注册事件&#x3D;提娜佳监听+提供处理逻辑</p>
<ul>
<li><code>&lt;button v-on:事件名=&quot;内联语句&quot;&gt;按钮&lt;/button&gt;</code></li>
<li><code>&lt;button v-on:事件名=&quot;事件处理函数&quot;&gt;按钮&lt;/button&gt;</code></li>
<li><code>&lt;button v-on:事件名=&quot;处理函数(实参)&quot;&gt;按钮&lt;/button&gt;</code></li>
<li><code>v-on:</code> 简写为 <strong>@</strong><br>如果没有参数，默认传入一个event事件对象，event.target拿到发生事件的目标。如果有参数，后面加逗号,$evnet这样event还在，不然就找不到了<br><strong>所有被vue管理的函数都写普通函数，尽量不要写箭头函数</strong><br>普通函数看调用，箭头函数看定义<br>这里如果写箭头函数，那么this指向的不是event而是windows</li>
</ul>
<h3 id="vue中的修饰符"><a href="#vue中的修饰符" class="headerlink" title="vue中的修饰符"></a>vue中的修饰符</h3><h4 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h4><ol>
<li>@事件名.prevent  →  阻止默认行为<br>如<code>&lt;a href=&quot;http://www.atguigu.com&quot; @click.prevent=&quot;showInfo&quot;&gt;点我提示信息&lt;/a&gt;</code></li>
<li>@事件名stop:阻止事件冒泡(常用)</li>
<li>@事件名once:事件只触发一次(常用)</li>
</ol>
<h4 id="指令修饰符"><a href="#指令修饰符" class="headerlink" title="指令修饰符 ."></a>指令修饰符 .</h4><p>通过 . 指明一些指令后缀，不同后缀封装了不同的处理操作，用于简化代码</p>
<h4 id="按键修饰符："><a href="#按键修饰符：" class="headerlink" title="按键修饰符："></a>按键修饰符：</h4><p>@keydown 按下就触发，不同抬起来<br>@keyup 按下去松手后触发（一般用）</p>
<p><strong>e.keyCode 获取按键的编码，e.key用于获取按键的名字，但是常用按键有别名，省去判断了：</strong><br>.enter&#x3D;回车键 （如@keyup.enter）监听键盘回车<br>.delete&#x3D;删除键<br>.esc&#x3D;退出键ESC<br>.space&#x3D;空格键<br>.tab&#x3D;换行键 （这个键要用keydown，因为这个键本身有移除焦点的功能）<br>.up .down .left .right 上下左右键</p>
<p>其他的转化为<strong>key值（按键的名字）</strong>去绑定，但注意如果这个名字是两个单词组成的，要转化为kebab-case（短横线命名）（如值为MyCat转化成@keyup.my-cat&#x3D;”函数名”）</p>
<h4 id="系统修饰符（特殊用法）"><a href="#系统修饰符（特殊用法）" class="headerlink" title="系统修饰符（特殊用法）"></a>系统修饰符（特殊用法）</h4><p>ctrl、alt、shift、meta<br>(1).配合keyup使用:按下修饰键的同时，再按下其他键，随后释放其他键，事件才被触发<br>(2).<strong>配合keydown使用:正常触发事件</strong></p>
<h4 id="v-model修饰符："><a href="#v-model修饰符：" class="headerlink" title="v-model修饰符："></a>v-model修饰符：</h4><p>v-model.trim 去除首位空格<br>v-model.number 转数字(比如检测用户输入是不是数字，如果不是数字那么无法转数字表示用户输错了)</p>
<h4 id="修饰符可以连着写"><a href="#修饰符可以连着写" class="headerlink" title="修饰符可以连着写"></a>修饰符可以连着写</h4><p>比如一边阻止默认事件，一边阻止事件冒泡<br><code>@click.prevent.stop</code></p>
<h4 id="定制键名小技巧"><a href="#定制键名小技巧" class="headerlink" title="定制键名小技巧"></a>定制键名小技巧</h4><p>Vue.config.keyCodes.自定义键名 &#x3D;键码，可以去定制按键别名<br><code>@click.ctrl.y</code></p>
<h3 id="v-on-内联语句：可执行的代码"><a href="#v-on-内联语句：可执行的代码" class="headerlink" title="v-on 内联语句：可执行的代码"></a>v-on 内联语句：可执行的代码</h3><p><code>&lt;button @click=&quot;count--&quot;&gt;-&lt;/button&gt;</code><br>   <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count--&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">count</span>: <span class="number">100</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="v-on-事件处理函数"><a href="#v-on-事件处理函数" class="headerlink" title="v-on 事件处理函数"></a>v-on 事件处理函数</h3><p><code>&lt;button v-on:事件名=&quot;fn&quot;&gt;按钮&lt;/button&gt;</code><br>   注意：</p>
<ul>
<li>事件处理函数应该写到一个跟data同级的配置项（methods）中</li>
<li>methods中的函数内部的this都指向Vue实例</li>
<li>在methods中访问data里面的数据用this.属性名<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;fn&quot;</span> &gt;</span>切换显示隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>黑马程序员<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">isShow</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">//app.isShow = !app.isShow //这样写有些麻烦，用this简单</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">//在methods中访问data里面的数据用this.属性名</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">isShow</span>=!<span class="variable language_">this</span>.<span class="property">isShow</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="v-on-给事件处理函数传参"><a href="#v-on-给事件处理函数传参" class="headerlink" title="v-on 给事件处理函数传参"></a>v-on 给事件处理函数传参</h3><p>&lt;button v-on:事件名&#x3D;”fn(参数1，参数2)”&gt;按钮</button></p>
<ul>
<li>如果不传递任何参数，则方法无需加小括号；methods方法中可以直接使用 e 当做事件对象</li>
<li>如果传递了参数，则实参 <code>$event</code> 表示事件对象，固定用法。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">h3</span>&gt;</span>小黑自动售货机<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;buy(5)&quot;</span>&gt;</span>可乐5元<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;buy(10)&quot;</span>&gt;</span>咖啡10元<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;buy(8)&quot;</span>&gt;</span>牛奶8元<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>银行卡余额：&#123;&#123; money &#125;&#125;元<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">money</span>: <span class="number">100</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="title function_">buy1</span>(<span class="params">price</span>)&#123;<span class="variable language_">this</span>.<span class="property">money</span>-=price&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="属性绑定指令-v-bind"><a href="#属性绑定指令-v-bind" class="headerlink" title="属性绑定指令 v-bind"></a>属性绑定指令 v-bind</h2><p>理解：比如图片需要切换，图片的url要变，用这个动态更换图片的Url<br>作用：动态设置html的标签属性 比如：src、url、title<br>语法：v-bind:属性名&#x3D;”属性值（表达式）”<br>v-bind:可以简写成 :<br>比如，有一个图片，它的 <code>src</code> 属性值，是一个图片地址。这个地址在数据 data 中存储，则可以这样设置属性值：</p>
<ul>
<li><code>&lt;img v-bind:src=&quot;url&quot; /&gt;</code></li>
<li><code>&lt;img :src=&quot;url&quot; /&gt;</code>   （v-bind可以省略）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgUrl&quot;</span> <span class="attr">v-bind:title</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imgUrl&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">imgUrl</span>: <span class="string">&#x27;./imgs/10-02.png&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">msg</span>: <span class="string">&#x27;hello 波仔&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="黑马小案例-波仔的学习之旅"><a href="#黑马小案例-波仔的学习之旅" class="headerlink" title="黑马小案例-波仔的学习之旅"></a>黑马小案例-波仔的学习之旅</h3><p>需求：默认展示数组中的第一张图片，点击上一页下一页来回切换数组中的图片<br>实现思路：<br>1.数组存储图片路径 [‘url1’,’url2’,’url3’，…]<br>2.可以准备个下标index 去数组中取图片地址。<br>3.通过v-bind给src绑定当前的图片地址<br>4.点击上一页下一页只需要修改下标的值即可<br>5.当展示第一张的时候，上一页按钮应该隐藏。展示最后一张的时候，下一页按钮应该隐藏</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>上一页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">button</span>&gt;</span>下一页<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       <span class="attr">list</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-00.gif&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-01.gif&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-02.gif&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-03.gif&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-04.png&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">         <span class="string">&#x27;./imgs/11-05.png&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">       ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">     &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="v-bind对于样式控制的增强"><a href="#v-bind对于样式控制的增强" class="headerlink" title="v-bind对于样式控制的增强"></a>v-bind对于样式控制的增强</h3><p>对于样式的切换（是否添加类）<br>语法<br>:class&#x3D;”对象<br>适用场景：如各个标签之间的选择，只选一个,于一个类名来回切换（true,false）如果是true表示有这个对象，反之没有</p>
<div class="box" :class="{ pink: true, big: true }"></div>

<p>:class&#x3D;”数组”<br>适用场景：批量添加或删除类，加上之后这里面所有的类都会被添加到盒子上</p>
<div class="box" :class="['pink', 'big']">这样添加一组类</div>
- 对于样式的切换（操作style）控制单个变化
  :style="样式对象"
  style属性名不支持带-的写法，如background-color是不对的，正确的是小驼峰写法，或者加单引号

<h3 id="例子：导航栏点击高亮"><a href="#例子：导航栏点击高亮" class="headerlink" title="例子：导航栏点击高亮"></a>例子：导航栏点击高亮</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;activeIndex = index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; active: index === activeIndex &#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">activeIndex</span>: <span class="number">2</span>, <span class="comment">// 记录高亮</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">list</span>: [</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;京东秒杀&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;每日特价&#x27;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;品类秒杀&#x27;</span> &#125;</span></span><br><span class="line"><span class="language-javascript">      ]</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="列表渲染指令-v-for"><a href="#列表渲染指令-v-for" class="headerlink" title="列表渲染指令 v-for"></a>列表渲染指令 v-for</h2><p>Vue 提供了 v-for 列表渲染指令，用来辅助开发者基于一个数组来循环渲染一个列表结构。<br>v-for 指令需要使用 <code>(item, index) in arr</code> 形式的特殊语法，其中：</p>
<ul>
<li>item 是数组中的每一项</li>
<li>index 是每一项的索引，不需要可以省略</li>
<li>arr 是被遍历的数组<br>此语法也可以遍历对象和数字<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//遍历对象</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key, index) in object&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">value:对象中的值</span><br><span class="line">key:对象中的键</span><br><span class="line">index:遍历索引从0开始</span><br><span class="line"></span><br><span class="line">//遍历数字</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">&quot;item in 10&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">item从1 开始</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="小案例-小黑的书架"><a href="#小案例-小黑的书架" class="headerlink" title="小案例-小黑的书架"></a>小案例-小黑的书架</h3><p>需求：<br>1.根据左侧数据渲染出右侧列表（v-for）<br>2.点击删除按钮时，应该把当前行从列表中删除（获取当前行的id，利用filter进行过滤）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>小黑的书架<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>《红楼梦》<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>曹雪芹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">booksList</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;《红楼梦》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;曹雪芹&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;《西游记》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;吴承恩&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;《水浒传》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;施耐庵&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&#x27;《三国演义》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;罗贯中&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>小黑的书架<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in booksList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.author &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- 注册点击事件 →  通过 id 进行删除数组中的 对应项 --&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;del(item.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">booksList</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;《红楼梦》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;曹雪芹&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;《西游记》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;吴承恩&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;《水浒传》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;施耐庵&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&#x27;《三国演义》&#x27;</span>, <span class="attr">author</span>: <span class="string">&#x27;罗贯中&#x27;</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">del</span> (id) &#123;</span><br><span class="line">        <span class="comment">// console.log(&#x27;删除&#x27;, id)</span></span><br><span class="line">        <span class="comment">// 通过 id 进行删除数组中的 对应项 → filter(不会改变原数组)</span></span><br><span class="line">        <span class="comment">// filter: 根据条件，保留满足条件的对应项，得到一个新数组。</span></span><br><span class="line">        <span class="comment">// console.log(this.booksList.filter(item =&gt; item.id !== id))</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">booksList</span> = <span class="variable language_">this</span>.<span class="property">booksList</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== id)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="v-for中的key"><a href="#v-for中的key" class="headerlink" title="v-for中的key"></a>v-for中的key</h2><p>语法：key&#x3D;”唯一值”<br>作用：给列表项添加的唯一标识。便于Vue进行列表项的正确排序复用<br>为什么加key：Vue 的默认行为会尝试原地修改元素（就地复用）<br>实例代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in booksList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.author &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;del(item.id)&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ol>
<li>key 的值只能是字符串 或 数字类型</li>
<li>key 的值必须具有唯一性</li>
<li>推荐使用  id 作为 key（唯一），不推荐使用 index 作为 key（会变化，不对应）<li v-for="(item,index)in xxx" :key="唯一值"></li>
</ol>
<h2 id="双向绑定指令-v-model"><a href="#双向绑定指令-v-model" class="headerlink" title="双向绑定指令 v-model"></a>双向绑定指令 v-model</h2><p>所谓双向绑定就是：</p>
<ol>
<li>数据改变后，呈现的页面结果会更新</li>
<li>页面结果更新后，数据也会随之而变<br>作用： 给表单元素（input、radio、select）使用，双向绑定数据，可以快速 <strong>获取</strong> 或 <strong>设置</strong> 表单元素内容<br>语法：v-model&#x3D;”变量”</li>
</ol>
<p>需求：使用双向绑定实现以下需求</p>
<ol>
<li>点击登录按钮获取表单中的内容</li>
<li>点击重置按钮清空表单中的内容<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">      v-model 可以让数据和视图，形成双向数据绑定</span><br><span class="line">      (<span class="number">1</span>) 数据变化，视图自动更新</span><br><span class="line">      (<span class="number">2</span>) 视图变化，数据自动更新</span><br><span class="line">      可以快速[获取]或[设置]表单元素的内容</span><br><span class="line">     --&gt;</span><br><span class="line">    账户：&lt;input type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;username&quot;</span>&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=<span class="string">&quot;password&quot;</span> v-model=<span class="string">&quot;password&quot;</span>&gt; &lt;br&gt;&lt;br&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">login</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">username</span>, <span class="variable language_">this</span>.<span class="property">password</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">reset</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">username</span> = <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">password</span> = <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="v-model作用于其他表单元素"><a href="#v-model作用于其他表单元素" class="headerlink" title="v-model作用于其他表单元素"></a>v-model作用于其他表单元素</h3><p>v-model会根据空间类型自动选取正确的方式更新元素（比如单选复选文本域下拉菜单这些都会自动帮你绑定关联更新数据）<br>注意给到后台的都是value值，而不是展示给用户看的选择文字</p>
<h3 id="收集表单数据-重点"><a href="#收集表单数据-重点" class="headerlink" title="收集表单数据(重点)"></a>收集表单数据(重点)</h3><p><code>&lt;input type=&quot;text&quot;/&gt;，</code>v-model收集的是value值，用户输入的就是value值。<br><code>&lt;input type=&quot;radio&quot;/&gt;</code> v-model收集的是value值，且要给标签配置value值。<br><code>&lt;input type=&quot;checkbox&quot;/&gt;</code><br>1.没有配置input的value属性，那么收集的就是checked（勾选 or 未勾选，是布尔值）<br>.配置input的value属性:<br>(1)v-model的初始值是非数组，那么收集的就是checked（勾选 or 未勾选，是布尔值）<br>(2)v-model的初始值是数组，那么收集的的就是value组成的数组</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">				账号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;userInfo.account&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.password&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				年龄：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;userInfo.age&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				性别：</span><br><span class="line">				男<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span></span><br><span class="line">				女<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				爱好：</span><br><span class="line">				学习<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;study&quot;</span>&gt;</span></span><br><span class="line">				打游戏<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;game&quot;</span>&gt;</span></span><br><span class="line">				吃饭<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;eat&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.city&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择家乡<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;wuhan&quot;</span>&gt;</span>武汉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				其他信息：</span><br><span class="line">				<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;userInfo.other&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.agree&quot;</span>&gt;</span>阅读并接受<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.atguigu.com&quot;</span>&gt;</span>《用户协议》<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">			<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">			<span class="attr">data</span>:&#123;</span><br><span class="line">				<span class="attr">userInfo</span>:&#123;</span><br><span class="line">					<span class="attr">account</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">					<span class="attr">password</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">					<span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">					<span class="attr">sex</span>:<span class="string">&#x27;female&#x27;</span>,</span><br><span class="line">					<span class="attr">hobby</span>:[],</span><br><span class="line">					<span class="attr">city</span>:<span class="string">&#x27;beijing&#x27;</span>,</span><br><span class="line">					<span class="attr">other</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">					<span class="attr">agree</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="attr">methods</span>: &#123;</span><br><span class="line">				<span class="title function_">demo</span>(<span class="params"></span>)&#123;</span><br><span class="line">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>))</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="v-model的三个修饰符"><a href="#v-model的三个修饰符" class="headerlink" title="v-model的三个修饰符"></a>v-model的三个修饰符</h3><p>lazy：失去焦点再收集数据<br>number：输入字符串转为有效的数字<br>trim：输入首尾空格过滤</p>
<h4 id="黑马综合案例-小黑记事本"><a href="#黑马综合案例-小黑记事本" class="headerlink" title="黑马综合案例-小黑记事本"></a>黑马综合案例-小黑记事本</h4><p>指令修饰符 .<br>通过 . 指明一些指令后缀，不同后缀封装了不同的处理操作，用于简化代码<br>按键修饰符：<br>@keyup.enter 监听键盘回车<br>v-model系师傅：<br>v-model.trim 去除首位空格<br>v-model.number 转数字(比如检测用户输入是不是数字，如果不是数字那么无法转数字表示用户输错了)<br>事件修饰符：<br>@事件名.stop 阻止冒泡（比如点击子盒子不想触发父盒子）<br>@事件名.prevent 阻止默认行为 （比如a href一个链接，不想点击跳转<br>@事件名.stop.prevent —&gt;可以连用 即阻止事件冒泡也阻止默认行为</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  &lt;input @keyup.<span class="property">enter</span>=<span class="string">&quot;fn&quot;</span> v-model=<span class="string">&quot;username&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">      <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">      <span class="title function_">fn</span> (e) &#123;</span><br><span class="line">        <span class="comment">// if (e.key === &#x27;Enter&#x27;) &#123;</span></span><br><span class="line">        <span class="comment">//   console.log(&#x27;键盘回车的时候触发&#x27;, this.username)</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;键盘回车的时候触发&#x27;</span>, <span class="variable language_">this</span>.<span class="property">username</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="v-cloak指令（配合css使用）"><a href="#v-cloak指令（配合css使用）" class="headerlink" title="v-cloak指令（配合css使用）"></a>v-cloak指令（配合css使用）</h2><p>一个特殊的属性，没有属性值，在Vue实例创建完毕并接管容器后，会删掉v-clock属性<br>使用css配合v-cloak来解决网速慢页面展示出<code>&#123;&#123;xxx&#125;&#125;</code>的问题<br>解决js阻塞问题<br>场景：比如你的vue.js因为种种原因要延迟几秒才能获取，那么此时你的页面无法渲染vue，页面可能会出现各种<code>&#123;&#123;&#125;&#125;</code>内容，这些不希望给用户看到</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123;hometown&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h2><p>只读一次，v-once所在的节点再初次动态渲染之后，就视为静态资源，以后的数据改变不会引起v-once所在结构的更新，可以用于优化性能<br>下面例子中，不管点多少次，v-once所在标签的n都是最开始的n值，后续点按钮不会再动态渲染了</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> =<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-once</span> &gt;</span> 初始化的数字的值是:&#123;&#123;n&#125;&#125;  <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span> 当前的数字的值是：&#123;&#123;n&#125;&#125; <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span> 点我数字＋1 <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h2><p>作用：跳过其所在节点的编译过程<br>使用：利用它跳过没有使用指令语法，没有使用插值语法的节点，能够加快编译<br><img src="/postImgs/vue2/vue20.png" alt="v-pre"></p>
<h1 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h1><h2 id="过滤器-filter"><a href="#过滤器-filter" class="headerlink" title="过滤器 filter"></a>过滤器 filter</h2><h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p><strong>过滤器不会改变原有的数据，而是产生新的数据</strong></p>
<ol>
<li>注册过滤器<br>全局：Vue.filter(name,callback)<br>局部:：new Vue({  fliter:{ }  })</li>
<li>使用情况<br><code>&#123;&#123;  xxx |  过滤器名  &#125;&#125;</code>或者<code>v-bind: 属性 ＝&quot;xxx | 过滤器名&quot;</code></li>
</ol>
<h3 id="过滤器传参"><a href="#过滤器传参" class="headerlink" title="过滤器传参"></a>过滤器传参</h3><p>| 前面的是默认的参数(value)，是一定会传递给丨后面的过滤器的，要想传递自己的参数给过滤器，在过滤器后面传递自己的格式<code>如timeFormater(&#39;YYYY_MM_DD&#39;)</code><br>但是！此时这个timeFormater过滤器肯定需要多一个形参str收集小括号里的参数，但是这样会影响没有传参使用这个过滤器的情况<br>此时要给过滤器的str规定形参默认值（ES6），代表如果以后形参有传递那么用形参的格式，如果没有用默认值的形式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">div id=&quot;root&quot;&gt;</span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>显示格式化后的时间<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 计算属性实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;fmtTime&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- methods实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;getFmtTime()&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 过滤器实现 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;time | timeFormater&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- 过滤器实现（传参） --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span>&gt;</span>现在是：&#123;&#123;time | timeFormater(&#x27;YYYY_MM_DD&#x27;) | mySlice&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h3</span> <span class="attr">:x</span>=<span class="string">&quot;msg | mySlice&quot;</span>&gt;</span>尚硅谷<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root2&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;msg | mySlice&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//全局过滤器</span></span></span><br><span class="line"><span class="language-javascript">		<span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;mySlice&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">time</span>:<span class="number">1621561377603</span>, <span class="comment">//时间戳</span></span></span><br><span class="line"><span class="language-javascript">				<span class="attr">msg</span>:<span class="string">&#x27;晚上好，西西&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">fmtTime</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(<span class="variable language_">this</span>.<span class="property">time</span>).<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">getFmtTime</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(<span class="variable language_">this</span>.<span class="property">time</span>).<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">//局部过滤器</span></span></span><br><span class="line"><span class="language-javascript">			<span class="attr">filters</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">timeFormater</span>(<span class="params">value,str=<span class="string">&#x27;YYYY年MM月DD日 HH:mm:ss&#x27;</span></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// console.log(&#x27;@&#x27;,value)</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span> <span class="title function_">dayjs</span>(value).<span class="title function_">format</span>(str)</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">el</span>:<span class="string">&#x27;#root2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">msg</span>:<span class="string">&#x27;hello,atguigu!&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;)</span></span><br><span class="line"><span class="language-javascript">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="多个过滤器串联"><a href="#多个过滤器串联" class="headerlink" title="多个过滤器串联"></a>多个过滤器串联</h3><p>上面的格式化时间过滤器继续添加要求，想要只截取前四四位年份，再添加一个过滤器进行这个事情<br>此时time是第一个参数传递给第一个过滤器，第一个过滤器return的返回值再传递给第二个过滤器，第二个过滤器的return的值是最后的结果<br><img src="/postImgs/vue2/vue19.png" alt="多个过滤器串联"></p>
<h3 id="局部过滤器和全局过滤器"><a href="#局部过滤器和全局过滤器" class="headerlink" title="局部过滤器和全局过滤器"></a>局部过滤器和全局过滤器</h3><h4 id="局部过滤器"><a href="#局部过滤器" class="headerlink" title="局部过滤器"></a>局部过滤器</h4><p>局部过滤器要写在实例的filters:{}里面，和data,methods,computed同级<br>前面展示的都是局部过滤器<br>局部过滤器写在vue实例里面，只有这个实例可以用<br>如果是局部过滤器，组件之间的过滤器不能互相使用</p>
<h4 id="全局过滤器"><a href="#全局过滤器" class="headerlink" title="全局过滤器"></a>全局过滤器</h4><p>写在vue实例上面</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;过滤器名&#x27;</span>,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> value.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>data.now()函数返回当前时间的时间戳，但是我们想要显示格式化后的时间，这里使用一个函数<br>轻量级处理时间的函数day.js<br>BootCDM网站－day.js<br>显示格式化后的时间：（计算属性、methods、过滤器实现）</p>
<h1 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h1><p>把原生dom的操作自封装（所有关于dom元素的操作都需要自己操作）<br>写在配置项<code>directives:&#123; &#125;</code>里面，和data,methods,computed,filters同级</p>
<h2 id="如何定义自定义指令"><a href="#如何定义自定义指令" class="headerlink" title="如何定义自定义指令"></a>如何定义自定义指令</h2><p>在元素上使用的时候要写<code>v-自定义属性名</code>，但是在定义的时候不加v-，直接写自定义属性名即可</p>
<h3 id="自定义属性的两种写法"><a href="#自定义属性的两种写法" class="headerlink" title="自定义属性的两种写法"></a>自定义属性的两种写法</h3><ol>
<li><p>key-value（对象写法）<br>能更好地处理细节</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line"> 自定义属性名:&#123;</span><br><span class="line"> <span class="attr">key1</span>:value;</span><br><span class="line"><span class="attr">key2</span>:value，</span><br><span class="line"><span class="title function_">fun1</span>(<span class="params"></span>)&#123;&#125;,</span><br><span class="line"><span class="title function_">fun2</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数写法（有些功能无法实现）<br>用于需求简单的情况</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line">自定义属性名:<span class="keyword">function</span>(<span class="params"></span>)&#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//－－－－或者---</span></span><br><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line">自定义属性名:()&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义属性函数语法"><a href="#自定义属性函数语法" class="headerlink" title="自定义属性函数语法"></a>自定义属性函数语法</h3><ol>
<li><p>自定义属性接受两个参数<br>element（自定义指令所在的元素可以简写成el）和binding（绑定对象）<br>重要的是binding.value </p>
</li>
<li><p>自定义函数何时会被调用<br>（1）一上来会被调用（指令与元素成功绑定时！！仅仅是在内存建立了关系，不是成功放入页面时，这里可能有坑，比如无法使用element.focus()直接实现一进入页面就获取焦点，要实现这个功能要用完整写法）<br>（2）指令所在的模板（vm绑定的id&#x3D;root的 div大盒子）被重新解析时</p>
</li>
</ol>
<h3 id="自定义指令Key-value对象写法语法"><a href="#自定义指令Key-value对象写法语法" class="headerlink" title="自定义指令Key-value对象写法语法"></a>自定义指令Key-value对象写法语法</h3><p>vue提供了三个固定函数可以使用<br>（要把函数写到自定义指令里面才会调用）<br>这三个函数都可以接受element和binding两个参数（前面有详细说明）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line"> 自定义属性名:&#123;</span><br><span class="line"> <span class="attr">key1</span>:value;</span><br><span class="line"><span class="attr">key2</span>:value，</span><br><span class="line"><span class="comment">//1.bind()函数，一上来调用（指令与元素成功绑定时）</span></span><br><span class="line"><span class="title function_">bind</span>(<span class="params"></span>)&#123;</span><br><span class="line">element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//2. inserted()函数，指令所在元素被插入页面时调用</span></span><br><span class="line"><span class="title function_">inserted</span>(<span class="params"></span>)&#123;</span><br><span class="line">element.<span class="title function_">focus</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//3. update()函数，指令所在的模板（大div）被重新解析时</span></span><br><span class="line"><span class="title function_">update</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//这句话</span></span><br><span class="line">element.<span class="property">value</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>往往bind和upadta的逻辑是一样的，因此如果没有特殊要求，使用自定义属性函数写法就可以完成</strong></p>
<h3 id="自定义指令注意细节"><a href="#自定义指令注意细节" class="headerlink" title="自定义指令注意细节"></a>自定义指令注意细节</h3><h4 id="指令名"><a href="#指令名" class="headerlink" title="指令名"></a>指令名</h4><p>指令定义时不加v-，但是使用时要加v-<br>当指令复杂有多个单词组成时，不要用小驼峰命名法<br>如，在元素中写<code>&lt;span v-big-Name=&quot;n&quot;&gt;&lt;/span&gt;</code><br>在调用自定义指令函数的时候还原成完整的函数写法<strong>用单引号包裹</strong><br>多个单词用my-cat不要用myCat</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line"><span class="string">&#x27;big-number&#x27;</span>:<span class="keyword">function</span>(<span class="params">element,binding</span>)&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//可以精简成</span></span><br><span class="line"><span class="string">&#x27;big-number&#x27;</span>(element,binding)&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="指令回调函数中的this"><a href="#指令回调函数中的this" class="headerlink" title="指令回调函数中的this"></a>指令回调函数中的this</h4><p>所有指令相关回调函数里的this全是window，不是vm！！</p>
<h4 id="局部和全局自定义指令"><a href="#局部和全局自定义指令" class="headerlink" title="局部和全局自定义指令"></a>局部和全局自定义指令</h4><p><strong>前面的是局部自定义指令</strong>，只能给对应的vue实例使用，其他的vue实例不能用<br>想要其他vue实例都能使用自定义指令，要写成全局自定义指令（和过滤器一样的道理）<br><strong>下面是全局自定义指令</strong><br><code>Vue.directive(&#39;自定义指令名&#39;,&#123;&#125;)</code><br><img src="/postImgs/vue2/vue19.jpg" alt="全局自定义指令"><br><img src="/postImgs/vue2/vue20.jpg" alt="全局自定义指令"></p>
<h3 id="自定义属性视频小结"><a href="#自定义属性视频小结" class="headerlink" title="自定义属性视频小结"></a>自定义属性视频小结</h3><p>上面的笔记比以下详细，只多不少</p>
<blockquote>
<pre><code>需求1：定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大10倍。
        需求2：定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点。
        自定义指令总结：
                一、定义语法：
                            (1).局部指令：
                                        new Vue(&#123;															new Vue(&#123;
                                            directives:&#123;指令名:配置对象&#125;   或   		directives&#123;指令名:回调函数&#125;
                                        &#125;) 																		&#125;)
                            (2).全局指令：
                                            Vue.directive(指令名,配置对象) 或   Vue.directive(指令名,回调函数)

                二、配置对象中常用的3个回调：
                            (1).bind：指令与元素成功绑定时调用。
                            (2).inserted：指令所在元素被插入页面时调用。
                            (3).update：指令所在模板结构被重新解析时调用。

                三、备注：
                            1.指令定义时不加v-，但使用时要加v-；
                            2.指令名如果是多个单词，要使用kebab-case命名方式，不要用camelCase命名。
</code></pre>
</blockquote>
<h1 id="vue监测数据改变的原理"><a href="#vue监测数据改变的原理" class="headerlink" title="vue监测数据改变的原理"></a>vue监测数据改变的原理</h1><h2 id="vue如何监测对象里的数据改变的"><a href="#vue如何监测对象里的数据改变的" class="headerlink" title="vue如何监测对象里的数据改变的"></a>vue如何监测对象里的数据改变的</h2><p>简而言之：靠setter<br>这部分理解的很费解，下面是一些总结，慢慢理解<br><img src="/postImgs/vue2/vue15.png" alt="巧用字符串"><br>vm._data是在vm对象里面创建了一个_data的属性,属性值是obs对象,同时给对象data改变地址的赋值<br>所以修改页面双向绑定的数据，首先经过vue对应同名属性的一层代理到_data，再经过_data的二层代理，修改到了滞于内存中的原数据data（作为数据源）<br>可以理解为obj间接的赋予了data中属性的get和set功能，同时_data也具备了这个功能，而vm自身中的属性因为代理了_data同样具备了这个功能，因此修改任意一个都会引起set函数进行页面渲染<br>就是，data从保存数据者变成了纯粹的代理，数据交给函数形参obj保管了，每次操作数据，我们找data，data就找obj<br>这里data和_obs里面保存的都是地址，它们指向的是同一个内存空间<br>下面这样是不对的，按按钮数据被修改不会被直接更新<br><img src="/postImgs/vue2/vue16.png" alt="巧用字符串"></p>
<h2 id="vue如何监测数组里的数据改变的"><a href="#vue如何监测数组里的数据改变的" class="headerlink" title="vue如何监测数组里的数据改变的"></a>vue如何监测数组里的数据改变的</h2><p>数据劫持：当数据修改了，set会拿到数据做两件事：修改数据，并重新解析模版</p>
<h1 id="vue生命周期"><a href="#vue生命周期" class="headerlink" title="vue生命周期"></a>vue生命周期</h1><h2 id="思考理解"><a href="#思考理解" class="headerlink" title="思考理解"></a>思考理解</h2><p>为什么要它？引入例子：想要一个一打开页面就让字体颜色从黑体变浅再从黑变浅的效果，那么这个渐变效果的定时器放在哪里？<br>我开始想的放methos但是如下！<br><img src="/postImgs/vue2/vue21.jpg" alt="vue中的MVVM"></p>
<p>这个例子中，粉色框部分的函数不能够写在methods里面：如果写在里面只能有两种结果：作为回调函数使用（但是需求是一进页面字体就开始变浅再变黑再变浅循环），这里没有按钮没有点击事件之类的触发，所以不可以；<br>第二种通过插值表达式<code>&#123;&#123;change()&#125;&#125;</code>调用函数来开启，但是！！调动函数让data里的透明度数据变化会重新解析再次调用，无限循环调用change()函数形成一个指数爆炸的死循环，所以也是很不对的。</p>
<p><strong>此时就需要生命周期函数mounted</strong><br><code>mounted()&#123;&#125;</code> <strong>没有冒号！</strong><br>不写在methods里面，而是和data,methods平级<br>调用时机：vue完成模板的解析，并把初始的（一上来第一次解析的）真实的DOM元素放入页面后（挂载完毕）调用mounted</p>
<p>把前面提到的定时器函数放到这里面，能够实现需求</p>
<h2 id="认识声明周期"><a href="#认识声明周期" class="headerlink" title="认识声明周期"></a>认识声明周期</h2><p>Vue生命周期：就是一个Vue实例从创建到销毁的整个过程<br>生命周期四个阶段：① 创建 ② 挂载 ③ 更新 ④ 销毁<br>1.创建阶段：创建响应式数据<br>2.挂载阶段：渲染模板<br>3.更新阶段：修改数据，更新视图<br>4.销毁阶段：销毁Vue实例<br>创建阶段和挂载阶段只会执行一次，更新阶段会执行多次</p>
<h2 id="生命周期函数"><a href="#生命周期函数" class="headerlink" title="生命周期函数"></a>生命周期函数</h2><p>本质上就是函数，但是是vue在关键时刻帮我们调用的函数<br>vue在帮我们调用生命周期函数的时候，this的指向是vm或组件实例对象</p>
<p>（生命周期又名生命周期回调函数、生命周期函数、生命周期钩子）<br><img src="/postImgs/vue2/vue22.jpg" alt="生命周期钩子">钩子很形象了</p>
<p>理解：一些特定的代码要在特定的阶段之后执行，如：<br>发送请求：在创建阶段的最后<br>操作dom：在挂载阶段结束之后<br>写这种类型的代码就要使用声明周期钩子<br>Vue生命周期过程中，会自动运行一些函数，被称为【生命周期钩子】→  让开发者可以在【特定阶段】运行自己的代码、<br>就是说在创建到销毁的声明周期中，开发者可以让程序在特定的阶段指定特点的函数<br>一共有八个特定的阶段：是上面声明周期四个阶段的开始和结束<br>从头到尾依次是：<br>beforeCreate,created,beforeMount,mounted,beforeUpdate,updated,brforeDestroy,destroyed<br>但是最常用的是created 和mounted<br>在created发送初始化渲染请求<br>在mounted进行dom操作<br>brforeDestroy释放vue以外的资源，清除定时器，延时器<br>语法如：<br><code>beforeCreate()&#123;逻辑代码&#125;，created()&#123;逻辑代码&#125;</code></p>
<h3 id="挂载完毕-mounted（最重要）"><a href="#挂载完毕-mounted（最重要）" class="headerlink" title="挂载完毕 mounted（最重要）"></a>挂载完毕 mounted（最重要）</h3><p>mounted(){} <strong>没有冒号！</strong><br>不写在methods里面，而是和data,methods平级<br>调用时机：vue完成模板的解析，并把<strong>初始的（一上来第一次解析的）</strong> 真实的DOM元素放入页面后（挂载完毕）调用mounted</p>
<h3 id="将要销毁-beforeUpdate函数（重要）"><a href="#将要销毁-beforeUpdate函数（重要）" class="headerlink" title="将要销毁 beforeUpdate函数（重要）"></a>将要销毁 beforeUpdate函数（重要）</h3><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;opacity&#125;&quot;</span>&gt;</span>欢迎学习Vue<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;opacity = 1&quot;</span>&gt;</span>透明度设置为1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;stop&quot;</span>&gt;</span>点我停止变换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span> <span class="comment">//阻止 vue 在启动时生成生产提示。</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	 <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">data</span>:&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="attr">opacity</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">stop</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.$destroy()</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">//Vue完成模板的解析并把初始的真实DOM元素放入页面后（挂载完毕）调用mounted</span></span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>,<span class="variable language_">this</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setInterval&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="number">0.01</span></span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt;= <span class="number">0</span>) <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,<span class="number">16</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;vm即将驾鹤西游了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>常用的生命周期钩子：<br>1.mounted: 发送ajax请求、启动定时器、绑定自定义事件、订阅消息等【初始化操作】<br>2.beforeDestroy: 清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】<br>关于销毁Vue实例<br>1.销毁后借助Vue开发者工具看不到任何信息<br>2.销毁后自定义事件会失效，但原生DOM事件依然有效<br>3.一般不会在beforeDestroy操作数据，因为即便操作数据，也不会再触发更新流程了</p>
<h1 id="注意细节"><a href="#注意细节" class="headerlink" title="注意细节"></a>注意细节</h1><h2 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h2><h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h3><p>‘arr’.indexOf(‘A’)<br>如果包含，返回出现在位置的索引值，如果不包含，返回-1<br>只要返回值!&#x3D;&#x3D;-1，那么就是包含<br><strong>indexOf(‘’)一个空字符串是0，不是-1</strong><br><img src="/postImgs/vue2/vue17.png" alt="indexOf"></p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>这个方法不修改原来的函数，但是会返回一个新的数组</p>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort( )"></a>sort( )</h3><p>进行排序，收到两个数据项，要升序返回a-b，要降序返回b-a</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><h3 id="插值表达式和函数"><a href="#插值表达式和函数" class="headerlink" title="插值表达式和函数"></a>插值表达式和函数</h3><p>在插值语法里想要展现函数的返回值，必须要<code>&#123;&#123;函数名()&#125;&#125;</code>小括号()不能省略！<br>如果<code>&#123;&#123;函数名&#125;&#125;</code>这样返回的是函数代码，不是return的值</p>
<h3 id="computed计算属性和watch侦听属性"><a href="#computed计算属性和watch侦听属性" class="headerlink" title="computed计算属性和watch侦听属性"></a>computed计算属性和watch侦听属性</h3><p>computed和watch之间的区别:<br>1.computed能完成的功能，watch都可以完成<br>2.watch能完成的功能，computed不一定能完成，例如:watch可以进行异步操作<br>两个重要的小原则:<br>1.所被Vue管理的函数，最好写成普通函数，这样this的指向才是vm 或 组件实例对象。<br>2.所有不被Vue所管理的函数(定时器的回调函数、ajax的回调函数等)，最好写成箭头函数,这样this的指向才是vm或组件实例对象。<br>3.计算属性不能开启异步任务去</p>
<p>小结：<br>computed计算属性和watch监听属性，同样的需求前面一般更简单，但是由于computed是根据return的返回值，异步处理只能由watch来处理（比如加监听器，监听器里面的箭头函数不归vue管理，所以这里用箭头函数没问题）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span>=<span class="literal">false</span> <span class="comment">//阳止 vue 在启动时生成生产提示。</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;<span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">firstName</span>:<span class="string">&#x27;张&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">lastName</span>:<span class="string">&#x27;三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">fullName</span>:<span class="string">&#x27;张-三&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">watch</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">firstName</span>(<span class="params">val</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"> <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;<span class="variable language_">this</span>.<span class="property">fullName</span> =val +<span class="string">&#x27;_&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">lastName</span></span></span><br><span class="line"><span class="language-javascript">&#125;,<span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="title class_">TlastName</span>(val)&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">this</span>.<span class="property">firstName</span> +<span class="string">&#x27;_&#x27;</span>+ valthis.<span class="property">fullName</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-for-key值"><a href="#v-for-key值" class="headerlink" title="v-for key值"></a>v-for key值</h3><p>开发中尽量使用唯一标识的值作为Key，比如id，身份证号，学号<br>key用index在<strong>对数据进行打乱顺序</strong>操作时会<strong>有问题</strong>：<br>在数组的<strong>前面</strong>添加一个对象(图片)<br>添加后表面上没问题，但实际上这样效率低，同时如果用这些数据干别的事情（比如跟input框）会出现错乱<br><strong>虚拟的dom上有key，但是真实的没有，因为被vue占用了</strong></p>
<h3 id="v-if小组"><a href="#v-if小组" class="headerlink" title="v-if小组"></a>v-if小组</h3><p>v-if  v-else-if : 存在与否 ，用于切换频率低的地方<br> 他们是一组判断，如果前面的v-if和v-else-if 的条件一样，那么v-if判断为真就不在走v-else-if ；如果是多个v-if判断，那么他们登记一样，前面的判断为真还会走后面的v-if判断<br>v-else 后面不用写判断，写了也没用，else是最后剩下的，前面都没有那么就是它<br>注意：v-if,v-else-if,v-else-if,v-else他们是紧挨在一起的，中间不允许放其他东西（比如插入一个div）打断，如果打断了，前面的奏效后面的无效了</p>
<h4 id="template配合v-if使用-1"><a href="#template配合v-if使用-1" class="headerlink" title="template配合v-if使用"></a>template配合v-if使用</h4><p>templat只能配合v-if不能配合v-show</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template v-<span class="keyword">if</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>枫糖雾刃松瑰<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>虞寻歌图蓝B8017913<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ol>
<li>vue中data里的数据只要发生变化，模板<code>&#123;&#123;&#125;&#125;</code>都要重新解析，如果里面有函数也会重新调用</li>
<li>注意get方法有缓存<br>get在什么时候调用呢<br>初次读取计算属性的时候，和所依赖的数据发生变化的时候被调用</li>
<li>折叠代码小技巧<br>要折叠一部分代码，在这部分代码的前面和后面写<br>&#x2F;&#x2F;#region<br>&#x2F;&#x2F;#endregion</li>
<li>指令是不能脱离元素存在的</li>
<li>回调函数：我们定义的我们没执行，但是最终执行力</li>
</ol>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>vue指令</tag>
        <tag>数据代理</tag>
        <tag>过滤器</tag>
        <tag>侦听器</tag>
      </tags>
  </entry>
  <entry>
    <title>工程化开发和脚手架（旧）</title>
    <url>/2024/08/13/08-VueCli/</url>
    <content><![CDATA[<h1 id="工程化开发和脚手架"><a href="#工程化开发和脚手架" class="headerlink" title="工程化开发和脚手架"></a>工程化开发和脚手架</h1><h2 id="脚手架Vue-CLI"><a href="#脚手架Vue-CLI" class="headerlink" title="脚手架Vue CLI"></a>脚手架Vue CLI</h2><p>npm 是 NodeJS 下的包管理器，vue-cli脚手架模板就是基于 node 下的 npm 来完成安装的。<br>webpack: 它的主要用途是通过CommonJS的语法把所有浏览器端需要发布的静态资源做相应的准备，比如资源的合并和打包。<br>vue-cli：官方提供的一个脚手架，用于快速生成一个 vue 的项目模板</p>
<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><p>右键菜单打开终端管理员，进入后开始：<br>1.全局安装（只需安装一次即可） yarn global add @vue&#x2F;cli 或者 npm i @vue&#x2F;cli -g</p>
<ol start="2">
<li>查看vue&#x2F;cli版本： vue –version</li>
<li>创建项目架子：<strong>vue create project-name</strong>(项目名不能使用中文)</li>
<li>启动项目：<strong>yarn serve</strong> 或者 <strong>npm run serve</strong>(命令不固定，找package.json)</li>
</ol>
<h4 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h4><p>我安装的是npm，但是直接输入全局安装指令没成功，于是<br>先在下载Node的文件夹下面建了两个文件夹node_global和node_cache<br>然后cmd输入：<br>C:\Users\Administrator&gt;npm config set prefix “D:\Pragram\node-v20.17.0.msi\node_global”<br>C:\Users\Administrator&gt;npm config set cache “D:\Pragram\node-v20.17.0.msi\node_cache”<br>C:\Users\Administrator&gt;npm config set registry <a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><br>C:\Users\Administrator&gt;npm config get registry<br>C:\Users\Administrator&gt;npm config list<br>然后配置系统环境变量<br>然后npm install -g @vue&#x2F;cli<br>但是报错<br>C:\Users\Administrator&gt;npm install -g @vue&#x2F;cli<br>npm ERR! code CERT_HAS_EXPIRED<br>npm ERR! errno CERT_HAS_EXPIRED<br>npm ERR! request to <a href="https://registry.npm.taobao.org/@vue%2fcli">https://registry.npm.taobao.org/@vue%2fcli</a> failed, reason: certificate has expired</p>
<p>npm ERR! A complete log of this run can be found in:<br>npm ERR!     D:\RunSoftware\nodejs\node_cache_logs\2024-09-04T13_04_05_644Z-debug-0.log<br>于是我换了一个源：npm config set registry <a href="https://registry.npmjs.org/">https://registry.npmjs.org/</a><br>不行，继续换<br>npm config set registry <a href="https://mirrors.cloud.tencent.com/npm/">https://mirrors.cloud.tencent.com/npm/</a><br>继续npm i @vue&#x2F;cli -g<br>还是报错，但是这次起码很快而且有显示再跑，报错内容：<br>C:\Users\Administrator&gt; npm i @vue&#x2F;cli -g<br>npm ERR! code FETCH_ERROR<br>npm ERR! errno FETCH_ERROR<br>npm ERR! invalid json response body at <a href="https://mirrors.cloud.tencent.com/npm/electron-to-chromium">https://mirrors.cloud.tencent.com/npm/electron-to-chromium</a> reason: Invalid response body while trying to fetch <a href="https://mirrors.cloud.tencent.com/npm/electron-to-chromium">https://mirrors.cloud.tencent.com/npm/electron-to-chromium</a>: read ECONNRESET</p>
<p>npm ERR! A complete log of this run can be found in:<br>npm ERR!     D:\RunSoftware\nodejs\node_cache_logs\2024-09-05T03_48_41_073Z-debug-0.log<br>有时候，清除 npm 缓存可以解决问题<br>npm cache clean –force<br>我重新安装了新版的node.js<br>更新完 Node.js 后，运行以下命令以安装最新的 npm：<br>npm install -g npm<br>然后npm install -g @vue&#x2F;cli<br>终于成功了！！！！<br>然后 npm i @vue&#x2F;cli -g<br>成功后vue –version<br>开始我没有成功输出版本号，因为我的环境变量有问题<br>npm root -g<br>把这个输出的值加到环境变量里面去，如果这个输出失败那就是node.js的文件夹路径没有正确放到环境变量里，加进去就好</p>
<h4 id="创建项目启动项目过程"><a href="#创建项目启动项目过程" class="headerlink" title="创建项目启动项目过程"></a>创建项目启动项目过程</h4><p>在终端输入 vue create xiangmuming<br>其中xiangmuming输入什么那么这个项目文件就会命名什么，不能是中文命名<br>注意在哪里的终端创建，项目就会被创建在哪里<br>也可以管理员运行vscode，然后在这里的文件夹下面右键终端运行输入命令创建<br>然后在选项中选择vue2(此时在学)<br>然后会生成一个你命名的文件夹，里面有很多文件目录，给你搭好了架子<br>但是！我又出问题了，显示vue : 无法加载文件 D:\Pragram\node-v20.17.0.msi\node_global\vue.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;<br>?LinkID&#x3D;135170 中的 about_Execution_Policies。<br>所在位置 行:1 字符: 1</p>
<ul>
<li>vue create domo1</li>
<li><pre><code>  + CategoryInfo          : SecurityError: (:) []，PSSecurityException
  + FullyQualifiedErrorId : UnauthorizedAccess
解决办法：管理员运行终端然后输入
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
Get-ExecutionPolicy -List
npx vue create demo1
成功进入选择界面~
选择后
Vue CLI v5.0.8
✨  Creating project in D:\Pragram code\webFront\web-front-end\vue\03vuecli\demo1.
⚙️  Installing CLI plugins. This might take a while...
等一会儿会建好
启动项目：
先进入你创建的文件夹目录，然后再输入
npm run serve
成功后会显示
 DONE  Compiled successfully in 3407ms                                                                                                        15:48:28


App running at:
- Local:   http://localhost:8080/ 
- Network: http://10.20.54.212:8080/
</code></pre>
</li>
</ul>
<p>进入local网址成功显示就证明项目运行成功<br>注意，npm run serve的serve是根据package.json里面的  “scripts”: {<br>    “serve”: “vue-cli-service serve”,}<br>    其中的serve决定的，如果别的项目这里不是serve，就改成对应的东西</p>
<h4 id="项目目录介绍"><a href="#项目目录介绍" class="headerlink" title="项目目录介绍"></a>项目目录介绍</h4><p>脚手架中的文件有很多，三个重要文件：</p>
<ol>
<li>main.js  入口文件</li>
<li>App.vue  App根组件 </li>
<li>index.html 模板文件</li>
</ol>
<h3 id="组件化开发"><a href="#组件化开发" class="headerlink" title="组件化开发"></a>组件化开发</h3><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><p>在一个建立好的demo文件中，要展现多个前面页面或者例子，不要没换一个就新建一个demo，直接把原有的src文件夹复制一个重命名，然后删了之前的src文件夹新建一个src文件夹，在src文件夹里面写新的页面或者新的例子。可以有多个src的复制保存版，但是叫src的必须只有一个，也只会运行叫src的文件夹里的东西<br>src文件夹包含components文件夹,App.vue文件，main.js文件<br>快速生成三个部分快捷键：&lt;vue 选择第一个点击会自动生成框架<br>vue2只能有一个根组件（只能有一个最大的盒子，不能有两个一样大的盒子并列放），vue3可以<br>组件名遵循大驼峰命名法</p>
<h4 id="组件化和根组件"><a href="#组件化和根组件" class="headerlink" title="组件化和根组件"></a>组件化和根组件</h4><p>组件化：一个页面可以拆分成一个个组件，每个组件有着自己独立的样式、结构、行为<br>好处：便于维护，利于复用，提升开发效率<br>根组件：整个应用最上层的组件，包裹所有普通小组件（可以理解成最外边最大的盒子）</p>
<h4 id="App-vue单文件组件的组成"><a href="#App-vue单文件组件的组成" class="headerlink" title="App.vue单文件组件的组成"></a>App.vue单文件组件的组成</h4><p>分为三个部分：结构，行为，样式（不一定三个都有，也可以只有一个）<br>template：结构 （有且只能一个根元素）<br>script:   js逻辑<br>style： 样式 (可支持less，需要装包)<br>让组件支持less<br>  （1） style标签，lang&#x3D;”less” 开启less功能<br>  （2） 装包: yarn add less less-loader -D 或者npm i less less-loader -D</p>
<h4 id="普通组件的局部注册"><a href="#普通组件的局部注册" class="headerlink" title="普通组件的局部注册"></a>普通组件的局部注册</h4><p>理解：把一个页面分成多个部分（多个小盒子），把这个页面的每一个部分单独建一个.vue文件都放到components文件夹里，每一部分对应的.vue文件里面写这个文件的三个部分（结构，行为，样式）。在components文件夹同级的App.vue文件中导入并注册每个部分的.vue文件，直接使用引用文件的变量名即可把每一部分的内容放到页面里面（把小盒子导入到大盒子里面）<br>当成html标签使用即可  &lt;组件名&gt;&lt;&#x2F;组件名&gt;<br>局部注册特点：只能在注册的组件内使用<br>示例代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>.<span class="property">vue</span>文件</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 头部组件 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HmHeader</span>&gt;</span><span class="tag">&lt;/<span class="name">HmHeader</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 主体组件 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HmMain</span>&gt;</span><span class="tag">&lt;/<span class="name">HmMain</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 底部组件 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HmFooter</span>&gt;</span><span class="tag">&lt;/<span class="name">HmFooter</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 如果 HmFooter + tab 出不来 → 需要配置 vscode</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">         设置中搜索 trigger on tab → 勾上</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">    --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HmHeader</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HmHeader.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HmMain</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HmMain.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HmFooter</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HmFooter.vue&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// &#x27;组件名&#x27;: 组件对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HmHeader</span>: <span class="title class_">HmHeader</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HmMain</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HmFooter</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.App</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">600px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">700px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-color</span>: <span class="number">#87ceeb</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h4 id="普通组件的全局注册"><a href="#普通组件的全局注册" class="headerlink" title="普通组件的全局注册"></a>普通组件的全局注册</h4><p>如果局部注册是在一个大盒子里放多个小盒子，那么全局注册就是有一个东西所有的小盒子都想用（比如按钮），那么要在main.js中进行全局注册<br>全局注册特点：所有组件内都能使用<br>进行全局注册 → 在所有的组件范围内都能直接使用<br>Vue.component(组件名，组件对象)<br>注意一次只能导入一个，没有s<br>导入文件代码要写在顶部，这是规范<br>在导入的文件最后加不加.vue都可以，有时候自动补全.vue有时候没有都没关系<br>代码例子 main.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文件核心作用：导入App.vue，基于App.vue创建结构渲染index.html</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">// 编写导入的代码，往代码的顶部编写(规范)</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HmButton</span> <span class="keyword">from</span> <span class="string">&#x27;./components/HmButton&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行全局注册 → 在所有的组件范围内都能直接使用</span></span><br><span class="line"><span class="comment">// Vue.component(组件名，组件对象)</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;HmButton&#x27;</span>, <span class="title class_">HmButton</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Vue实例化，提供render方法 → 基于App.vue创建结构渲染index.html</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="comment">// render: h =&gt; h(App),</span></span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">createElement</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 基于App创建元素结构</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="title class_">App</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="组件进阶"><a href="#组件进阶" class="headerlink" title="组件进阶"></a>组件进阶</h3><h4 id="scoped解决组件的样式冲突"><a href="#scoped解决组件的样式冲突" class="headerlink" title="scoped解决组件的样式冲突"></a>scoped解决组件的样式冲突</h4><p>理解：在样式style中，默认是全局样式，就是一个局部样式的style也会影响所有组件，一个局部组件设置的div样式会影响到其他组件里面的div，一般是不希望这样的，所以有了scoped这个设置，让局部样式只能作于与它对应的局部组件<br>使用方法：在局部组件的.vue文件中的style标签后面加scoped，变成<style scoped><br><br><br>原理：当前组件内的标签都被添加data-v-hase值的属性，css选择器都被添加data-v-hash值的属性选择器，这样会让标签和css选择器的data-v-hash值对应才会被作用，只有当前组件的元素，才会有这个自定义属性，才会被这个样式作用到</p>
<h4 id="data必须是一个函数"><a href="#data必须是一个函数" class="headerlink" title="data必须是一个函数"></a>data必须是一个函数</h4><p>组件开发时，一个组件的data选项要求是一个函数，这样能保证每个组件实例，维护独立的一份数据对象<br>这样每次创建新的组件实例，都会新执行一次data函数，得到一个新的对象<br>不是组件化开发的时候，data选项写成了对象类型data:{}<br>组件化开发时，要这样写 data(){retuen{}}<br>理解：比如你一共有三个加减计数的组件，但是她们的数据都是conunt，那么data(){retuen{count:100}}这样的话这三个计数组件每次创建都会新执行一次函数，一共会创建三个count对象，三个组件的count数据不会干扰，也不用多写函数<br>data必须是一个函数，这样能保证每个组件实例，维护独立的一份数据对象</p>
<h3 id="组件通信：组件与组件之间的数据传递"><a href="#组件通信：组件与组件之间的数据传递" class="headerlink" title="组件通信：组件与组件之间的数据传递"></a>组件通信：组件与组件之间的数据传递</h3><p>组建的数据都是独立的，无法直接访问其他组件的数据，要用其他组件的数据就要进行组件通信</p>
<h4 id="父子通信"><a href="#父子通信" class="headerlink" title="父子通信"></a>父子通信</h4><p>直接包裹的关系<br>props和$emit<br>如果子组件想要用父组件的data数据，需要用props的方法获取父组件传递的数据，子组件想要修改父组件数据要用$emit的方法通知父组件更新</p>
<h4 id="父子通信-父传子"><a href="#父子通信-父传子" class="headerlink" title="父子通信-父传子"></a>父子通信-父传子</h4><p>父传子方法：<br>在父.vue中给子组件添加自定义属性，在子vue中，子组件内部通过props接收数据，然后在组件中直接使用<br>关键代码如：<br> <!-- 1.父.vue中正常引入子组件子.vue--><br>import Son from ‘.&#x2F;components&#x2F;Son.vue’<br>export default {<br>  components: {<br>    Son,<br>  },<br>}</p>
<!-- 2.父.vue中给组件标签，添加属性方式 赋值 -->
<pre><code>&lt;Son :title=&quot;myTitle&quot;&gt;&lt;/Son&gt;
</code></pre>
<!-- 3.子.vue中通过props来接受-->
<p>export default {<br>props:[‘title’]<br>}</p>
<!-- 4.子.vue中直接使用props的值-->
<p>  我是Son组件 工程化开发和脚手架（旧）</p>
<p>完整例子：<br>App.vue<br><template><br>  <div class="app" style="border: 3px solid #000; margin: 10px"><br>    我是APP组件<br>    <!-- 1.给组件标签，添加属性方式 赋值 --><br>    <Son :title="myTitle"></Son><br>  </div><br></template></p>
<script>
import Son from './components/Son.vue'
export default {
  name: 'App',
  data() {
    return {
      myTitle: '学前端，就来黑马程序员',
    }
  },
  components: {
    Son,
  },
}
</script>
<p>son.vue<br><template><br>  <div class="son" style="border:3px solid #000;margin:10px"><br>    <!-- 3.直接使用props的值 --><br>    我是Son组件 工程化开发和脚手架（旧）<br>  </div><br></template></p>
<script>
export default {
  name: 'Son-Child',
  // 2.通过props来接受
  props:['title']
}
</script>
<h4 id="父子通信-子传父"><a href="#父子通信-子传父" class="headerlink" title="父子通信-子传父"></a>父子通信-子传父</h4><p>子元素如果想改父亲的数据，不能直接修改，要使用$emit通知父亲我想改数据，父元素那边接收修改的信息，然后修改数据，再把修改后的数据传给子元素<br>关键代码：<br>App.vue<br> &lt;Son :title&#x3D;”myTitle” @changTitle&#x3D;”handleChange”&gt;</Son><br>export default {<br>  name: ‘App’,<br>  data() {<br>    return {<br>      myTitle: ‘这是父亲本来传给子元素的数据’,<br>    }<br>  },<br>  components: {<br>    Son,<br>  },<br>  methods: {<br>    &#x2F;&#x2F; 3.提供处理函数，提供逻辑<br>    handleChange(newTitle) {<br>      this.myTitle &#x3D; newTitle<br>    },<br>  },<br>}<br>son.vue<br>我是Son组件 工程化开发和脚手架（旧）<br>    &lt;button @click&#x3D;”changeFn”&gt;修改title</button><br>export default {<br>  name: ‘Son-Child’,<br>  props: [‘title’],<br>  methods: {<br>    changeFn() {<br>      &#x2F;&#x2F; 通过this.$emit() 向父组件发送通知<br>      this.$emit(‘changTitle’,’我要把数据改成这个！’)<br>    },<br>  },<br>}</p>
<h4 id="props校验"><a href="#props校验" class="headerlink" title="props校验"></a>props校验</h4><p>理解：父元素给子元素传值，子元素在用props接收的时候，可以对收到的值进行校验<br>四种校验：<br>类型校验: 校验的数据属性名：要求的类型 如 width:Number<br>非空校验(是否必填)：required:true<br>默认值(如果父元素传的数据没有值那么用这个默认值):default:默认值<br>自定义校验(写函数，value代表收到的值)<br>validator(value){<br>  &#x2F;&#x2F;自定义校验逻辑<br>  return true&#x2F;false是否通过校验<br>}</p>
<h4 id="prop-data-单向数据流"><a href="#prop-data-单向数据流" class="headerlink" title="prop data 单向数据流"></a>prop data 单向数据流</h4><p>prop和data都可以给组件提供数据，区别：<br>data的数据是自己的，可以随便改<br>prop的数据是外部的，父亲给的，不能直接改，遵循单向数据流<br>单向数据流：父级prop的数据更新，会向下流动，影响子组件，这个数据流动是单项的，就是说子组件不能直接修改父组件</p>
<h4 id="v-model-简化代码"><a href="#v-model-简化代码" class="headerlink" title="v-model 简化代码"></a>v-model 简化代码</h4><p>v-model本质是一个语法糖，就是value属性和Input事件的合写，作用：提供数据的双向绑定<br>数据和视图一方变化另一方会跟着变化<br>可以在父传子子传父的过程中简化代码<br>注意：$event用于在模板中获取事件的形参<br>1.表单类组件封装，实现父子组件数据双向绑定<br>父传子：v-model超杰绑定数据<br>子传父：监听输入，子传父传值给父组件修改<br>2.父组件v-model简化代码，实现父子组件数据双向绑定<br>子组件props通过value接收，事件触发Input<br>父组件v-model给组件直接绑数据</p>
<h4 id="sync修饰符-简化代码"><a href="#sync修饰符-简化代码" class="headerlink" title=".sync修饰符 简化代码"></a>.sync修饰符 简化代码</h4><p>可以实现子组件和父组件的双向绑定<br>和v-model不同的是，prop属性名可以自定义，不是固定的value<br>场景：封装弹窗类的基础组件，visible属性true显示false隐藏<br>本质：:属性名和@update:属性名合写<br>代码例：</p>
<pre><code>&lt;button @click=&quot;openDialog&quot;&gt;退出按钮&lt;/button&gt;
&lt;!-- isShow.sync  =&gt; :isShow=&quot;isShow&quot; @update:isShow=&quot;isShow=$event&quot; --&gt;
&lt;BaseDialog :isShow.sync=&quot;isShow&quot;&gt;&lt;/BaseDialog&gt;
</code></pre>
<p>import BaseDialog from ‘.&#x2F;components&#x2F;BaseDialog.vue’<br>export default {<br>  data() {<br>    return {<br>      isShow: false,<br>    }<br>  },<br>  methods: {<br>    openDialog() {<br>      this.isShow &#x3D; true<br>      &#x2F;&#x2F; console.log(document.querySelectorAll(‘.box’));<br>    },<br>  },<br>  components: {<br>    BaseDialog,<br>  },<br>}</p>
<h4 id="ref和-refs-简化代码"><a href="#ref和-refs-简化代码" class="headerlink" title="ref和$refs 简化代码"></a>ref和$refs 简化代码</h4><p>作用:利用 ref 和 $refs 可以用于 获取 dom 元素,或组件实例<br>特点:查找范围→&gt;当前组件内(更精确稳定)<br>使用：<br>1.获取dom：在目标标签添加ref属性<br>2.使用：在method(){通过this.$refs.xxx}获取目标标签</p>
<h4 id="vue异步更新-nextTick"><a href="#vue异步更新-nextTick" class="headerlink" title="vue异步更新 $nextTick"></a>vue异步更新 $nextTick</h4><p>理解：如想要点击编辑按钮后显示输入框并且让编辑框获得焦点，但直接写显示输入框和获取焦点的代码是不会成功的，因为vue是异步更新而不是执行一行代码更新一次，异步更新DOM可以提升性能<br>想要在DOM更新完成之后做某件事，如上面的输入框现实后获取焦点，可以使用$nextTick<br>$nextTick:等DOM更新后才会触发执行此方法里的函数体<br>语法：this.$nextTick(函数体)</p>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><p>自己定义的指令，可以封装一些 dom 操作，扩展额外功能<br>理解：比如说我有多个地方有获取元素焦点的需求，但是每次都写一遍很麻烦，那么就用自定义指令封装这个dom操作，用的时候调用这个自定义指令就可以实现</p>
<h4 id="自定义指令使用方法"><a href="#自定义指令使用方法" class="headerlink" title="自定义指令使用方法"></a>自定义指令使用方法</h4><p>语法：<br>全局注册：（在main.js中写）<br>Vue.directive(‘指令名’,{<br>  “inserted”(el){<br>    &#x2F;&#x2F;可以对el标签扩展额外功能<br>    el.focus()<br>    }<br>})<br>局部注册：（只能在当前组件范围内写）<br>directive:{<br>  “指令名”:{<br>    inserted(){<br>      &#x2F;&#x2F;可以对el标签扩展额外的功能<br>      el.focus()<br>    }<br>  }<br>}<br>使用方法：<br>&lt;input v-指令名 type&#x3D;”text”&gt;<br>当然如果没有绑定用指令也可以做到：<br>mounted(){<br>  this.$refs.inp.focus()<br>}<br>只是这样麻烦，复用性不高，适合少次使用</p>
<h4 id="自定义指令-指令的值"><a href="#自定义指令-指令的值" class="headerlink" title="自定义指令-指令的值"></a>自定义指令-指令的值</h4><p>通过binding.value可以拿到指令值，指令值修改会触发update函数<br>理解：要实现一个color指令-传入不同的颜色，给标签设置文字颜色<br>做法：在绑定指令时，可以通过“等号”的形式为指令绑定具体的参数值</p>
<div v-volor="color">我的颜色要被改变了</div>
通过binding.value获取指令值
directives:{
  color:{
    insert（el,binding）{
      el.style.color =binding.value
      },
      update(el,binding){
        el.style.color = binding.value
      }
  }
}
代码例子：
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-color</span>=<span class="string">&quot;color1&quot;</span>&gt;</span>指令的值1测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-color</span>=<span class="string">&quot;color2&quot;</span>&gt;</span>指令的值2测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color1</span>: <span class="string">&#x27;red&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">color2</span>: <span class="string">&#x27;orange&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">directives</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">color</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 1. inserted 提供的是元素被添加到页面中时的逻辑</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">inserted</span> (el, binding) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// console.log(el, binding.value);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// binding.value 就是指令的值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 2. update 指令的值修改的时候触发，提供值变化后，dom更新的逻辑</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">update</span> (el, binding) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;指令的值修改了&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">#### -v-loading指令封装</span><br><span class="line">理解：实际开发过程中，发送请求需要时间，在请求的数据未回来时，页面会处于空白状态，会导致用户体验不好，此时需要封装一个-v-loading指令，实现加载中的效果（如转圈圈）</span><br><span class="line">本质就是个蒙层把空白区域盖住，当数据回来并完全渲染后再关闭loading状态，移除蒙层</span><br><span class="line">实现：</span><br><span class="line"><span class="number">1.</span> 准备一个 loading 类，通过伪元素定位，设置宽高，实现蒙层（用为元素添加和移除类即可，比div简单）</span><br><span class="line"><span class="number">2.</span> 开启关闭 loading 状态(添加移除蒙层)，本质只需要添加移除类即可</span><br><span class="line"><span class="number">3.</span> 结合自定义指令的语法进行封装复用</span><br><span class="line">如：给div添加一个蒙层（加载中效果）</span><br><span class="line">默认在style中已经有了.<span class="property">loading</span>:before&#123;内容&#125;</span><br><span class="line">&lt;div <span class="keyword">class</span>=box v-loading=<span class="string">&quot;isLoading&quot;</span>&gt;</span><br><span class="line">当isLoading为ture那么盒子处于加载中状态，flase为加载完成</span><br><span class="line">在data中提供一个变量isLoading</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span>&#123;</span><br><span class="line">      <span class="attr">list</span>:[],</span><br><span class="line">      <span class="attr">isLoading</span>:<span class="literal">true</span> <span class="comment">//默认一进来是加载中状态</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">给v-loading指令添加逻辑</span><br><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line">  <span class="attr">loading</span>:&#123;</span><br><span class="line">    <span class="title function_">inserted</span>(<span class="params">el,binding</span>)&#123;</span><br><span class="line">      <span class="comment">//初始状态</span></span><br><span class="line">      binding.<span class="property">value</span> ? el.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading&#x27;</span>) : el.<span class="property">classList</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">update</span>(<span class="params">el,binding</span>)&#123;</span><br><span class="line">      <span class="comment">//数据变化时判断</span></span><br><span class="line">       binding.<span class="property">value</span> ? el.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;loading&#x27;</span>) : el.<span class="property">classList</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">### 插槽</span><br><span class="line">#### 默认插槽</span><br><span class="line">作用:让组件内部的一些结构支持自定义</span><br><span class="line">理解:要在页面中显示一个对话框，封装成一个组件，但是组件的内容部分不希望写死，希望弹出的对话框的内容能使用的时候自定义，那么可以使用插槽</span><br><span class="line">注意：默认插槽通过只能完成一个位置的定制，比如要么定制弹窗内容但是其他标题和选项部分不变，要么定制弹窗选项但是弹窗标题和内容不变，无法定制弹窗的多个部分的内容</span><br><span class="line">插槽基本语法:</span><br><span class="line"><span class="number">1.</span>组件内需要定制（自定义更改内容）的结构部分，改用&lt;slot&gt;&lt;/slot&gt;占位</span><br><span class="line"><span class="number">2.</span>使用组件方法：&lt;<span class="title class_">MyDialog</span>&gt;&lt;/<span class="title class_">MyDialog</span>&gt;标签内部,传入你要自定义现实的内容进行结构替换slot</span><br><span class="line">当你要使用多次这个对话框但是里面的内容要修改时，直接用两次&lt;<span class="title class_">MyDialog</span>&gt;&lt;/<span class="title class_">MyDialog</span>&gt;标签即可</span><br><span class="line">如：</span><br><span class="line">&lt;<span class="title class_">MyDialog</span>&gt;我是第一个对话框要展示的内容&lt;/<span class="title class_">MyDialog</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MyDialog</span>&gt;</span>我是第二个对话框要展示的内容<span class="tag">&lt;/<span class="name">MyDialog</span>&gt;</span></span></span><br><span class="line">注意：只有&lt;<span class="title class_">MyDialog</span>&gt;&lt;/<span class="title class_">MyDialog</span>&gt;标签写在父vue中，而完整的对话框组件写在子.<span class="property">vue</span>中，和正常组件一样只不过这里的div写的是对话框</span><br><span class="line"></span><br><span class="line">#### 插槽-后备内容（默认值）</span><br><span class="line">通过插槽完成了内容的定制，传什么显示什么，但是如果不传，则是空白，那么可以提供默认值，没有内容现实默认值</span><br><span class="line">语法：在&lt;slot&gt;标签内放置内容，作为默认显示内容，让&lt;<span class="title class_">MyDialog</span>&gt;中没写内容时显示默认内容，如果有的话那么slot标签会被完全替换掉</span><br><span class="line"></span><br><span class="line">#### 插槽--具名插槽</span><br><span class="line">一个组件内有多处结构，需要外部传入标签，进行定制。比如一个弹窗的标题，内容，选项都想要定制，那么这时不能用默认插槽要用具名插槽</span><br><span class="line">语法：</span><br><span class="line"><span class="number">1.</span>在多个要定制的地方使用slot标签+name=属性名区分名字</span><br><span class="line"><span class="number">2.</span>tamplate配合v-<span class="attr">solt</span>:name属性名来分发对应的标签</span><br><span class="line"><span class="number">3.</span>第二部可以简写为 #插槽名，看下面代码好理解</span><br><span class="line">如：</span><br><span class="line"><span class="string">``</span><span class="string">` js</span></span><br><span class="line"><span class="string">1.</span></span><br><span class="line"><span class="string">&lt;div class=&quot;dialog-header&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;slot name=&quot;head&quot;&gt;&lt;/slot&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;div class=&quot;dialog-content&quot;&gt;</span></span><br><span class="line"><span class="string">&lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;div class=&quot;dialog-footer&quot;&gt;&lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">2.</span></span><br><span class="line"><span class="string">&lt;MyDialog&gt;</span></span><br><span class="line"><span class="string">&lt;template v-slot:head&gt;标题我要自定义&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;template v-slot:content&gt;内容文本我也要自定义&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;template v-slot:footer&gt;</span></span><br><span class="line"><span class="string">&lt;button&gt;按钮我还要自定义&lt;/button&gt;&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;/MyDialog&gt;</span></span><br><span class="line"><span class="string">3.2可以简化为</span></span><br><span class="line"><span class="string">&lt;MyDialog&gt;</span></span><br><span class="line"><span class="string">&lt;template #head&gt;标题我要自定义&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;template #content&gt;内容文本我也要自定义&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;template #footer&gt;</span></span><br><span class="line"><span class="string">&lt;button&gt;按钮我还要自定义&lt;/button&gt;&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;/MyDialog&gt;</span></span><br></pre></td></tr></table></figure>
#### 插槽--作用域插槽
作用域插槽是插槽的一个传参语法，不属于插槽的分类，插槽只分为两大类，默认插槽（一处内容自定义）和作用于插槽（多处内容自定义）
作用域插槽: 定义 slot 插槽的同时,是可以传值的。给 插槽 上可以 绑定数据，将来 使用组件时可以用
理解：封装表格组件
1.父传子，动态渲染表格内容
2.利用默认插槽，定制操作列
3.删除或查看都需要用到 当前项的 id，属于组件内部的数据,就需要通过作用域插槽传值绑定，进而使用
语法：
1.给 slot 标签,以 添加属性的方式传值
<slot :id="item.id" msg="测试文本"></slot>
2.所有添加的属性,都会被收集到一个对象中
{id:3，msg:'测试文本'}
3.在template中,通过、#插槽名="obj” 接收，默认插槽名为 default
<MyTable :list="list"<template #default="obj">
<button @click="del(obj.id)">删除</button>
</template>
</MyTable>

<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><h4 id="单页应用城区SPA"><a href="#单页应用城区SPA" class="headerlink" title="单页应用城区SPA"></a>单页应用城区SPA</h4><p>SPA：所有功能在一个html页面上实现（如网易云，切换到不同内容导航不会动，不会跳转到别的页面，反之京东每点击一个会跳转到新的页面，京东是多页）<br>单页的按需更新性能高开发效率高，用户体验更好<br>最大的原因是单页能做到页面按需更新，要做到这个就要明确访问路径和组件的对应关系，就要用到路由</p>
<h4 id="Vue路由：路径和组件的映射关系"><a href="#Vue路由：路径和组件的映射关系" class="headerlink" title="Vue路由：路径和组件的映射关系"></a>Vue路由：路径和组件的映射关系</h4><p>当却换到不同地址时组件会随之变化</p>
<h4 id="VueRouter插件"><a href="#VueRouter插件" class="headerlink" title="VueRouter插件"></a>VueRouter插件</h4><p>作用：修改地址栏路径时，切换显示匹配的组件<br>是Vue官方的一个路由插件，是一个第三方包</p>
<h4 id="路由插件使用步骤（5-2）重点"><a href="#路由插件使用步骤（5-2）重点" class="headerlink" title="路由插件使用步骤（5+2）重点"></a>路由插件使用步骤（5+2）重点</h4><p>使用步骤5+2<br>五个基础步骤（固定的）（在main.js中）<br>1.下载VueRouter模块到当前工程 版本3.6.5<br>（vue2对应路由版本3.x，Vuex3.x）<br>（vue3对应路由版本4.x，Vuex4.x）<br>npm i <a href="mailto:&#x76;&#117;&#101;&#x2d;&#x72;&#x6f;&#117;&#x74;&#101;&#114;&#64;&#x33;&#x2e;&#x36;&#46;&#53;">&#x76;&#117;&#101;&#x2d;&#x72;&#x6f;&#117;&#x74;&#101;&#114;&#64;&#x33;&#x2e;&#x36;&#46;&#53;</a><br>然后运行npm<br>2.引入<br>import VueRouter from ‘vue-router’<br>3.安装注册（插件的初始化）<br>Vue.use(VueRouter)<br>4.创建路由对象<br>导入进来后要初始化一个路由对象<br>const router &#x3D; nwe VueRouter()<br>5.注入，将路由对象注入到nue Vue实例中，建立关联<br>new Vue({<br>  render:h&#x3D;&gt;h(app),<br>  router（这里注意完整写法是router:router,只有上面创建路由对象名是router的时候才可以简写成一个router）<br>}).$mount(‘#app’)<br>当注入后，代表这个vue实例已经被路由接管了，地址栏后面会显示一个#&#x2F;<br>2个核心步骤（不同的项目配置的不一样）：（还是main.js文件下）<br>总结：1.建组件配规则；2.建导航配出口</p>
<p>1.创建需要的组件（放到views目录），配置对应的路由规则<br>在路由部分的.vue组件推荐放到views（视图）文件夹的目录下面，不再用components文件夹<br>语法{ path: 路径, component: 组件 }路径和组件之间的对应关系<br>注意路径是用的地址栏的绝对路径，不是.&#x2F;是&#x2F;</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Find</span> <span class="keyword">from</span> <span class="string">&#x27;./views/Find&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">My</span> <span class="keyword">from</span> <span class="string">&#x27;./views/My&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Friend</span> <span class="keyword">from</span> <span class="string">&#x27;./views/Friend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// routes 路由规则们</span></span><br><span class="line">  <span class="comment">// route  一条路由规则 </span></span><br><span class="line">  <span class="comment">//这里routs代表很多条规则，如果是route表示一条规则</span></span><br><span class="line">  <span class="comment">//语法&#123; path: 路径, component: 组件 &#125;路径和组件之间的对应关系</span></span><br><span class="line">  <span class="comment">//注意路径是用的地址栏的绝对路径，不是./是/</span></span><br><span class="line">  <span class="attr">routes</span>: [ </span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/find&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Find</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/my&#x27;</span>, <span class="attr">component</span>: <span class="title class_">My</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/friend&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Friend</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>完整版</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Find</span> <span class="keyword">from</span> <span class="string">&#x27;./views/Find&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">My</span> <span class="keyword">from</span> <span class="string">&#x27;./views/My&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Friend</span> <span class="keyword">from</span> <span class="string">&#x27;./views/Friend&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>) <span class="comment">// VueRouter插件初始化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// routes 路由规则们</span></span><br><span class="line">  <span class="comment">// route  一条路由规则 &#123; path: 路径, component: 组件 &#125;</span></span><br><span class="line">  <span class="comment">//这里routs代表很多条规则，如果是route表示一条规则</span></span><br><span class="line">  <span class="attr">routes</span>: [ </span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/find&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Find</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/my&#x27;</span>, <span class="attr">component</span>: <span class="title class_">My</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/friend&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Friend</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>2.配置导航，配置对应的路由出口（路径匹配的组件显示的位置）（在app.vue中，不再是在main,js中）<br>如下面的a超链接，修改对应的路由出口<br>  <router-view></router-view>标签用来控制组件显示的位置：如果导航栏在下面要修改的组件部分在下面，就按照下面的例子代码一样把  <router-view></router-view>放在下面；如果导航栏在下面要修改的组件的部分在上面，那么就把这部分放在导航栏的代码上面</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer_wrap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/find&quot;</span>&gt;</span>发现音乐<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/my&quot;</span>&gt;</span>我的音乐<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/friend&quot;</span>&gt;</span>朋友<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!-- 路由出口 → 匹配的组件所展示的位置 --&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="组件存放目录"><a href="#组件存放目录" class="headerlink" title="组件存放目录"></a>组件存放目录</h4><p>目的：分类来存放更容易维护，更清晰<br>.vue文件分为两类：页面组件和复用组件<br>页面组件里面的复用组件可能在多个页面中运用<br>src&#x2F;views文件夹存放页面组件（进行页面展示，配合路由使用）<br>src&#x2F;components文件夹存放复用组件（进行数据展示，相当于零件）</p>
<h4 id="路由模块封装"><a href="#路由模块封装" class="headerlink" title="路由模块封装"></a>路由模块封装</h4><p>理解：之前所有的的路由配置都堆在main.js中，但是代码和路由插件越来越多，都放在这里面不好，所以要将路由模块抽离出来，这样利于维护<br>注意下面移动组建后路劲可能会发生变化，记得调整相对路径<br>从当前文件找可能出错，为了可维护性更好，使用绝对路径更好，使用@,@iius当前的src目录，@&#x2F;views&#x2F;xxx这样更好，不用再关心哪个文件出发，而是从src往下找<br>将main.js中路由相关的东西放到src&#x2F;router&#x2F;index.js文件中<br>main.js中只剩下如下代码<br>注意index.js中需要重新导入vue，并且在最后要进行导出，这样在main.js中才可以进行导入<br>关键代码：<br>import Vue from ‘vue’ &#x2F;&#x2F;这行代码注意要新增，移过来之后要用到vue就要导一下<br>import Vue from ‘vue’ &#x2F;&#x2F;这行代码注意要新增，移过来之后要用到vue就要导一下<br>import router from ‘.&#x2F;router&#x2F;index’ &#x2F;&#x2F;这里导入index.js</p>
<p>完整代码main.js：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index&#x27;</span> <span class="comment">//这里导入index.js</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>完整代码index.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Find</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Find&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">My</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/My&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Friend</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Friend&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">//这行代码注意要新增，移过来之后要用到vue就要导一下</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>) <span class="comment">// VueRouter插件初始化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建了一个路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// routes 路由规则们</span></span><br><span class="line">  <span class="comment">// route  一条路由规则 &#123; path: 路径, component: 组件 &#125;</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/find&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Find</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/my&#x27;</span>, <span class="attr">component</span>: <span class="title class_">My</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/friend&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Friend</span> &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router<span class="comment">//导出这样在main.js中可以导入</span></span><br></pre></td></tr></table></figure>
<h4 id="声明式导航-导航高亮"><a href="#声明式导航-导航高亮" class="headerlink" title="声明式导航-导航高亮"></a>声明式导航-导航高亮</h4><p>理解：实现在导航栏点击哪个哪个就变成高亮<br>使用全局组件router-link取代a标签<br>方法：<br>router-link to&#x3D;指定路径，注意to后面没有#号，a标签是有#的<br>功能：实现跳转的同时，会默认提供高亮类名，自带激活时的类名，可以直接设置高亮样式<br>在类名中，要高亮的会自动加两个类<br>：class&#x3D;”router-link-exact-active  router-link-active”<br>这两个类用哪个都行，在style中给一个类配置颜色即可，详细区别在后面<br>如本来是</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;footer_wrap&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/find&quot;</span>&gt;</span>发现音乐<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/my&quot;</span>&gt;</span>我的音乐<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#/friend&quot;</span>&gt;</span>朋友<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>改变为</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;footer_wrap&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/find&quot;</span>&gt;</span>发现音乐<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/my&quot;</span>&gt;</span>我的音乐<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/friend&quot;</span>&gt;</span>朋友<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h5 id="声明式导航-两个类名区别"><a href="#声明式导航-两个类名区别" class="headerlink" title="声明式导航-两个类名区别"></a>声明式导航-两个类名区别</h5><p>理解：有的导航栏不是只有一个，父导航栏下可能还有子导航栏，如果想要父导航栏点击后点击他的子导航栏都有高亮的话选择模糊匹配，如果只想要之选某一个时有高亮，选择精确匹配<br>class&#x3D;”router-link-exact-active  router-link-active”<br>router-link-active：模糊匹配（用的多，更适用需求）<br>比如代码是to”&#x2F;my”,那么这个类名可以匹配&#x2F;my &#x2F;my&#x2F;a &#x2F;my&#x2F;b …就是&#x2F;my开头的路径都能匹配到<br>router-link-exact-active：精确匹配<br>比如代码是to”&#x2F;my”,那么这个类名只可以匹配&#x2F;my</p>
<h5 id="声明式导航-两个类名定制"><a href="#声明式导航-两个类名定制" class="headerlink" title="声明式导航-两个类名定制"></a>声明式导航-两个类名定制</h5><p>如果觉得这两个类名太长了，想要自定义怎么办？<br>在new<br>const router &#x3D;new VueRouter({<br>routes:[…],<br>linkActiveclass:”类名1”<br>linkExactActiveclass:”类名2”<br>})<br>精确匹配的类名会变成类名1，模糊匹配的类名会变成类名2</p>
<h4 id="声明式导航-跳转传参"><a href="#声明式导航-跳转传参" class="headerlink" title="声明式导航-跳转传参"></a>声明式导航-跳转传参</h4><p>目标：在跳转路由时，进行传值<br>1.查询参数传参<br>语法格式：<br>to&#x3D;”&#x2F;path?参数名&#x3D;值”<br>to&#x3D;”&#x2F;path?参数名&#x3D;值&amp;参数名&#x3D;值”<br>对应页面组件接收传递过来的值<br>语法格式：<br>&amp;route.query.参数名<br>this.&amp;route.query.参数名<br>2.动态路由传参<br>先配置动态路由<br>const router &#x3D; new VueRouter({<br>  routes:[<br>    …,<br>path:’&#x2F;search&#x2F;:words’<br>mcomponent:search<br>}]})<br>然后配置导航链接<br>to&#x3D;”&#x2F;path?参数值”<br>如果是多个值那么&#x2F;:key1&#x2F;:key2’<br>对应页面组件接收传递过来的值<br>&amp;route.params.参数名<br>this.&amp;route.query.参数名</p>
<h4 id="路由重定向"><a href="#路由重定向" class="headerlink" title="路由重定向"></a>路由重定向</h4><p>理解：网页打开的时候默认打开的是网页的跟路径，当未匹配到组件的时候，会出现空白。不想出现空白，希望匹配到某个path后能够强制跳转到path路径，这样让空白处有组件展示<br>语法：<br>{path:匹配路径,redirect:重定向到的路径}<br>如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>:[</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,<span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,<span class="attr">component</span>:<span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&#x27;/search/:words&#x27;</span>,<span class="attr">component</span>:<span class="title class_">Search</span>&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="vue路由-404"><a href="#vue路由-404" class="headerlink" title="vue路由-404"></a>vue路由-404</h5><p>理解：当路径找不到匹配时，给一个提示页面<br>位置：匹配在路由的最后<br>语法：{path:”*”,component:NotFind}<br><em>表示匹配所有规则，一旦上面的都没有被命中，那么就会被</em>命中<br>当前面的路由都没有找到的时候，会展示这个路由展示NotFind组件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">routes</span>:[</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,<span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,<span class="attr">component</span>:<span class="title class_">Home</span> &#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&#x27;/search/:words&#x27;</span>,<span class="attr">component</span>:<span class="title class_">Search</span>&#125;</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;*&quot;</span>,<span class="attr">component</span>:<span class="title class_">NotFind</span>&#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>
<h5 id="vue路由-模式设置"><a href="#vue路由-模式设置" class="headerlink" title="vue路由-模式设置"></a>vue路由-模式设置</h5><p>  理解：通常我们的路由是hash设置（默认），特点是有#号，单双看起来不太自然，平时我们访问页面地址栏很少有#。那么想要我们的地址路径也没有#，实现有#到无#的切换，只需要把mode:”history”即可，改为history路由（常用），注意采用history以后上线需要服务端支持，后台会配置<br>  <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>:<span class="string">&quot;history&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h4 id="编程式导航-基本跳转"><a href="#编程式导航-基本跳转" class="headerlink" title="编程式导航-基本跳转"></a>编程式导航-基本跳转</h4><p>  理解：在实际中总会有一个需求，搜索框后面有一个按钮“搜索一下”“百度一下”，然后点击这个按钮就会跳转，那么它是怎么实现的呢<br>  编程式导航：通过js代码进行跳转<br>  （注意，两种跳转都支持上面的两种传参方式）<br>  两种语法<br>  1.path路径跳转（建议方便）<br>  语法：<br>  简写this.$router.push(‘路由路径’)<br>  完整写法：this.$router.push({path:’路由路径’})<br>  比如把&#x2F;home或者&#x2F;list丢进去<br>  2.name命名路由跳转（适合path路径单词长的场景）<br>  语法：<br>  this.$router.push({name:’路由名’})<br>  在路由里面配置{name:’路由名’,path:’&#x2F;path&#x2F;xxx’，component:xxx}</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>:[</span><br><span class="line">    ...,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&#x27;路由名&#x27;</span>,<span class="attr">path</span>:<span class="string">&#x27;/path/xxx&#x27;</span>，<span class="attr">component</span>:xxx&#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line">在.<span class="property">vue</span>中函数里使用name命名路由跳转</span><br><span class="line"><span class="title function_">goSearch</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;<span class="attr">name</span>:<span class="string">&#x27;路由名&#x27;</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="自定义创建项目"><a href="#自定义创建项目" class="headerlink" title="自定义创建项目"></a>自定义创建项目</h2><p>目标:基于 VueCli 自定义创建项目架子<br>步骤：安装脚手架，创建项目，选择自定义</p>
<h3 id="创建运行项目步骤回顾"><a href="#创建运行项目步骤回顾" class="headerlink" title="创建运行项目步骤回顾"></a>创建运行项目步骤回顾</h3><p>创建项目过程前面写过，不同的是之前的三个选项(vue2,vue3,features)之前选择的是vue2,而现在要选择的是features<br>在终端输入 vue create xiangmuming<br>其中xiangmuming输入什么那么这个项目文件就会命名什么，不能是中文命名<br>注意在哪里的终端创建，项目就会被创建在哪里<br>也可以管理员运行vscode，然后在这里的文件夹下面右键终端运行输入命令创建<br>然后在选项中选择vue2(此时在学)<br>然后会生成一个你命名的文件夹，里面有很多文件目录，给你搭好了架子<br>但是！我又出问题了，显示vue : 无法加载文件 D:\Pragram\node-v20.17.0.msi\node_global\vue.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:&#x2F;go.microsoft.com&#x2F;fwlink&#x2F;<br>?LinkID&#x3D;135170 中的 about_Execution_Policies。<br>所在位置 行:1 字符: 1</p>
<ul>
<li>vue create domo1</li>
<li><pre><code>  + CategoryInfo          : SecurityError: (:) []，PSSecurityException
  + FullyQualifiedErrorId : UnauthorizedAccess
解决办法：管理员运行终端然后输入
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
Get-ExecutionPolicy -List
npx vue create demo1
2.成功进入选择界面~
选择第三个features之后进入勾选页面，在这选择babel,router,lirter/css pro-processors/formatte这四个，空格即可成功选择
选择后回车
3.然后让你选择版本，我们选vue2，选2
4.然后选择路由模式，问选择history模式还是hash模式,history模式需要后台配置一些规则，我们这里先选择hash模式，选n
5.然后选择css预处理器，我们选择less
6.选择用哪种规范，这里选择第三个 ESLint+Standard config 无分号规范（标准化）（注意选择这个之后以后代码多加个分号都会给你报错）
7.你需要在什么时候进行校验呢，选择第一个Lint on save在保存的时候
8.你想要即将这些配置文件放在哪里，选第一个，放在一个单独的文件中（这样好管理
9.是否保存你的自定义创建项目，选择n，不要保存，每次创建自己来一来，改的时候也好改
（到此创建成功，注意以后的项目最好都是用创建好的这个作为根目录，而不要每次都创建一个新的项目只在里面写一点代码，类似之前demo1的例子）
启动项目和之前一样。先到这个文件目录下面，然后终端run
</code></pre>
</li>
</ul>
<h3 id="ESlint代码规范"><a href="#ESlint代码规范" class="headerlink" title="ESlint代码规范"></a>ESlint代码规范</h3><h4 id="代码规范和错误解决"><a href="#代码规范和错误解决" class="headerlink" title="代码规范和错误解决"></a>代码规范和错误解决</h4><p>理解：希望整个团队写出来的代码风格是一样的统一的<br>代码规范:一套写代码的约定规则。例如，”赋值符号的左右是否需要空格”<br>“一句结束是否是要加;”<br>目前使用最高：JavaScript Standard sty!e 规范说明 <a href="https://standardjs.com/rules-zhcn.html">https://standardjs.com/rules-zhcn.html</a><br>下面是这份规则中的一小部分:<br>字符串使用单引号<br>‘abc’<br>无分号const name &#x3D; ‘zs’<br>关键字后加空格 if(name &#x3D;’ls) {…}<br>函数名后加空格 function name(arg) {..}<br>坚持使用全等 &#x3D;&#x3D;&#x3D;摒弃 &#x3D;&#x3D;<br>超多1行的额外换行不被允许</p>
<ul>
<li>解决代码规范错误<br>手动修正：<br>代码规范出错别担心，会报错提示你的，会明确告诉你在哪里和除了什么错<br>自动修正：<br>使用小工具，在保存的时候帮你自动修复错误<br>基于 vscode 插件 ESLint 高亮错误，并通过配置 自动 帮助我们修复错误<br>要手动配置一下：（我没有在vscode配置，后面想配置在vueP90课跟着配置）<br>&#x2F;&#x2F;当保存的时候，eslint自动帮我们修复错误<br>“editor.codeActionsOnSave”{<br>source.fixA11”: true<br>},<br>&#x2F;&#x2F;保存代码，不自动格式化<br>“editor.formatOnSave”:false<br>注意！！！自动修正成立需要vocode工作区打开的是项目根目录！！不可以是根目录的父级目录！！不然不会成功还容易莫名其妙报错！虽然我也不知道为什么但是只打开项目根目录一下子就好了！</li>
</ul>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
  </entry>
  <entry>
    <title>pinia学习篇</title>
    <url>/2024/10/23/12-pinia/</url>
    <content><![CDATA[<h1 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h1><h2 id="认识Pinia（和vuex对比）"><a href="#认识Pinia（和vuex对比）" class="headerlink" title="认识Pinia（和vuex对比）"></a>认识Pinia（和vuex对比）</h2><p>Pinia 是 Vue 的专属的最新 <strong>状态管理</strong>，是 Vuex 状态管理工具的替代品，pinia更适配vue3</p>
<h3 id="和vuex的区别"><a href="#和vuex的区别" class="headerlink" title="和vuex的区别"></a>和vuex的区别</h3><p>1.提供更加简单的API (去掉了mutation)<br>2.提供符合，Composition组合式风格的API(和 Vue3 新语法统一)<br>3.去掉了modules的嵌套结构，每一个store都是一个独立的模块，不再是vuex的单一组件树<br>4.配合TypeScript更加友好，提供可靠的类型推断<br>5.不再有命名空间的概念，不需要记住它们的复杂关系</p>
<h2 id="Pinia安装和基本使用"><a href="#Pinia安装和基本使用" class="headerlink" title="Pinia安装和基本使用"></a>Pinia安装和基本使用</h2><p><code>npm install pinia</code><br>创建js文件，注册导入Pinia<br>创建store文件夹，在里面创建index.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>() <span class="comment">//创建pinia实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pinia</span><br></pre></td></tr></table></figure>
<p>在main.js中挂载pinia实例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">use</span>(pinia).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="pinia管理数据"><a href="#pinia管理数据" class="headerlink" title="pinia管理数据"></a>pinia管理数据</h3><p>后续希望Pinia管理的数据，在store文件夹创建对应的.js文件，每个想要定义的单独数据单独放在一个store里<br>在每个单独的store里面定义仓库<code>defineStore()</code>返回的结果是一个函数，一返回的函数统一用useID命名方式，如<code>useCounter</code><br><code>diefineStore()</code>，在里面传入第一个参数作为仓库的表示，<br>定义store后会自动管理，直接导出即可</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeCounter&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">state</span>:<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure>
<p>要使用时Home.vue</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br></pre></td></tr></table></figure>
<p>使用数据<code>&lt;h2&gt;count:&#123;&#123;counterStore.count&#125;&#125;&lt;/h2&gt;</code><br><strong>不需要再<code>.state</code>，直接用数据就可以了</strong></p>
<h2 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h2><h3 id="认识Store"><a href="#认识Store" class="headerlink" title="认识Store"></a>认识Store</h3><p>一个store (如 Pinia)是一个实体，它会持有为绑定到你组件树的状态和业务逻辑，有点像始终存在，并且每个人都可以读取和写入的组件<br>可以在应用程序中定义任意数量的store来管理你的状态<br><strong>Store有三个核心概念:state、 getters、 actions;</strong><br>等同于组件的data、computed、methods;<br>一旦store被实例化，你就可以直接在 store 上访问 state、getters 和 actions 中定义的任何属性</p>
<h3 id="定义Store"><a href="#定义Store" class="headerlink" title="定义Store"></a>定义Store</h3><p>使用<code>defineStore()</code>定义，返回的函数统一用useX命名方式，具体前面有写<br>当定义好后，在浏览器调试工具里面可以看到，如图<br><img src="/postImgs/vue/pinia1.png" alt="URL的hash"></p>
<h3 id="使用数据注意–解构响应性"><a href="#使用数据注意–解构响应性" class="headerlink" title="使用数据注意–解构响应性"></a>使用数据注意–解构响应性</h3><p>store不能直接解构，不然会让数据失去响应式：</p>
<ol>
<li>不解构<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  counterStore.<span class="property">count</span>++ <span class="comment">//pinia里面可以直接这样做</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用数据<code>&lt;h2&gt;count:&#123;&#123;counterStore.count&#125;&#125;&lt;/h2&gt;</code>，没问题</li>
<li>解构错误使用<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"><span class="keyword">const</span> &#123;count&#125; = counterStore <span class="comment">//这里解构了</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  counterStore.<span class="property">count</span>++ <span class="comment">//pinia里面可以直接这样做</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用解构的数据<code>&lt;h2&gt;count:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</code><br>刚开始能展示出来，但是数据变化count不会跟着变，失去了响应式</li>
<li>解构正确使用(toRefs)<br>如果你非要解构＋响应式，使用toRefs<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"><span class="keyword">const</span> &#123;count,sum,age&#125; = <span class="title function_">toRefs</span>(counterStore) <span class="comment">//这里解构了</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  counterStore.<span class="property">count</span>++ <span class="comment">//pinia里面可以直接这样做</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用解构的数据<code>&lt;h2&gt;count:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</code>，现在能成功响应</li>
<li>解构正确使用(storeToRefs)<br>要解构＋响应式，也可以用Pinia提供的storeToRefs<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br><span class="line"><span class="keyword">const</span> &#123;count,sum,age&#125; = <span class="title function_">storeToRefs</span>(counterStore) <span class="comment">//这里解构了</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">changeCount</span>(<span class="params"></span>)&#123;</span><br><span class="line">  counterStore.<span class="property">count</span>++ <span class="comment">//pinia里面可以直接这样做</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用解构的数据<code>&lt;h2&gt;count:&#123;&#123;count&#125;&#125;&lt;/h2&gt;</code>，现在能成功响应</li>
</ol>
<h2 id="Pinia核心概念–State"><a href="#Pinia核心概念–State" class="headerlink" title="Pinia核心概念–State"></a>Pinia核心概念–State</h2><h3 id="改变State"><a href="#改变State" class="headerlink" title="改变State"></a>改变State</h3><ol>
<li>读取和写入 state<br>默认情况下，可以通过 store 实例访问状态来直接读取和写入状态<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> counterStore =<span class="title function_">useCounter</span>()</span><br><span class="line">counterStore.<span class="property">counter</span>++</span><br><span class="line">counterStore.<span class="property">name</span>=<span class="string">&quot;nienie&quot;</span></span><br></pre></td></tr></table></figure></li>
<li>重置state<code>$reset()</code><br>调用 store 上的 $reset() 方法将状态 重置 到其初始值;<br>除了直接用 <code>store.counter++</code>修改store，还可以调用 <code>$patch</code> 方法<br>它允许使用部分<code>state</code>对象同时应用多个更改<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> counterStore =<span class="title function_">usecounter</span>()</span><br><span class="line">counterStore.$patch(&#123;</span><br><span class="line">  <span class="attr">counter</span>:<span class="number">100.</span></span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;nie&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自己的方法不加<code>$</code>，如果是他给我们提供的一般有<code>$</code></p>
</blockquote>
</li>
</ol>
<h2 id="Pinia核心概念–Getters"><a href="#Pinia核心概念–Getters" class="headerlink" title="Pinia核心概念–Getters"></a>Pinia核心概念–Getters</h2><p>getters相当于store的计算属性，可以在 getters 中定义一个函数，这个函数会返回一个值，这个值会缓存，只有当依赖的 state 发生变化时才会重新计算<br>getters函数中默认接收一个state作为参数</p>
<h3 id="Getters基本使用"><a href="#Getters基本使用" class="headerlink" title="Getters基本使用"></a>Getters基本使用</h3><p>一个getters中也可以引入另外一个getters</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeCounter&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">state</span>:<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// getters中可以引入另外一个getters</span></span><br><span class="line">    <span class="title function_">doubleCountPlusOne</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">doubleCount</span> + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&#x27;@/store/counter&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">useCounter</span>()</span><br></pre></td></tr></table></figure>
<p><code>&lt;h2&gt;count1:&#123;&#123;counterStore.doubleCount&#125;&#125;&lt;/h2&gt;</code><br><code>&lt;h2&gt;count2:&#123;&#123;counterStore.doubleCountPlusOne&#125;&#125;&lt;/h2&gt;</code><br>同样不需要写.getters，使用很简洁</p>
<h3 id="getters也支持返回一个函数"><a href="#getters也支持返回一个函数" class="headerlink" title="getters也支持返回一个函数"></a>getters也支持返回一个函数</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeCounter&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">state</span>:<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span>,</span><br><span class="line">    <span class="attr">friends</span>:[</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">111</span>,<span class="attr">name</span>:<span class="string">&quot;雾刃&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">112</span>,<span class="attr">name</span>:<span class="string">&quot;枫糖&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">113</span>,<span class="attr">name</span>:<span class="string">&quot;松瑰&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// getters中可以引入另外一个getters</span></span><br><span class="line">    <span class="title function_">doubleCountPlusOne</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">doubleCount</span> + <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getFriendsById</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">id</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;state.<span class="property">friends</span>.<span class="property">length</span>;i++)&#123;</span><br><span class="line">          <span class="keyword">const</span> item = state.<span class="property">friends</span>[i]</span><br><span class="line">          <span class="keyword">if</span>(item.<span class="property">id</span> === id)&#123;</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure>
<p><code>&lt;h2&gt;count2:&#123;&#123;counterStore.getFriendsById(111)&#125;&#125;&lt;/h2&gt;</code>返回<code>&#123;id:111,name:&quot;雾刃&quot;&#125;</code></p>
<h3 id="getters中可以使用别的store中的数据"><a href="#getters中可以使用别的store中的数据" class="headerlink" title="getters中可以使用别的store中的数据"></a>getters中可以使用别的store中的数据</h3><p>导入别的store，然后在getters中获取别的store信息，再使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUser &#125; <span class="keyword">from</span> <span class="string">&#x27;@/store/user&#x27;</span></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeCounter&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">state</span>:<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span>,</span><br><span class="line">    <span class="attr">friends</span>:[</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">111</span>,<span class="attr">name</span>:<span class="string">&quot;雾刃&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">112</span>,<span class="attr">name</span>:<span class="string">&quot;枫糖&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">113</span>,<span class="attr">name</span>:<span class="string">&quot;松瑰&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">   <span class="title function_">showMessage</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> userStore = <span class="title function_">useUser</span>() <span class="comment">//中获取别的store信息</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`姓名：<span class="subst">$&#123;userStore.name&#125;</span>`</span></span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure>
<h2 id="Pinia核心概念–Actions"><a href="#Pinia核心概念–Actions" class="headerlink" title="Pinia核心概念–Actions"></a>Pinia核心概念–Actions</h2><ul>
<li>Actions 相当于组件中的 methods</li>
<li>用 defineStore()中的 actions 属性定义，非常适合定义业务逻辑</li>
<li>和getters一样，在action中可以通过this访问整个store实例的所有操作</li>
<li>actions是支持异步操作的，并且可以编写异步函数，在函数中使用await<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useCounter = <span class="title function_">defineStore</span>(<span class="string">&#x27;storeCounter&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">state</span>:<span class="function">()=&gt;</span>(&#123;</span><br><span class="line">    <span class="attr">count</span>:<span class="number">100</span>,</span><br><span class="line">    <span class="attr">friends</span>:[</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">111</span>,<span class="attr">name</span>:<span class="string">&quot;雾刃&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">112</span>,<span class="attr">name</span>:<span class="string">&quot;枫糖&quot;</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>:<span class="number">113</span>,<span class="attr">name</span>:<span class="string">&quot;松瑰&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="title function_">doubleCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// getters中可以引入另外一个getters</span></span><br><span class="line">    <span class="title function_">doubleCountPlusOne</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">doubleCount</span> + <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">getFriendsById</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">id</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;state.<span class="property">friends</span>.<span class="property">length</span>;i++)&#123;</span><br><span class="line">          <span class="keyword">const</span> item = state.<span class="property">friends</span>[i]</span><br><span class="line">          <span class="keyword">if</span>(item.<span class="property">id</span> === id)&#123;</span><br><span class="line">            <span class="keyword">return</span> item</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>:&#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>)&#123;&#125;,</span><br><span class="line">    <span class="comment">//actions是支持异步操作的</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">fetchHomeMultidata</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> res=<span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;http://....&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">banners</span> = data.<span class="property">data</span>.<span class="property">banner</span>.<span class="property">list</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">recommend</span> = data.<span class="property">data</span>.<span class="property">recommend</span>.<span class="property">list</span></span><br><span class="line">    <span class="keyword">return</span> data </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounter</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Pinia基础使用和持久化工具-旧笔记"><a href="#Pinia基础使用和持久化工具-旧笔记" class="headerlink" title="Pinia基础使用和持久化工具(旧笔记)"></a>Pinia基础使用和持久化工具(旧笔记)</h2><h3 id="创建项目-按照官方文档安装"><a href="#创建项目-按照官方文档安装" class="headerlink" title="创建项目(按照官方文档安装)"></a>创建项目(按照官方文档安装)</h3><p>使用 Vite 创建一个空的 Vue3项目<br>npm ceate vue@latest<br>这里面的pinia选的No,这里根据官方文档安装pinia，学会后后面直接选Yes<br><a href="https://pinia.vuejs.org/zh/">https://pinia.vuejs.org/zh/</a><br>这里是vue3使用方法，官方文档也有2的使用方法<br>首先导包挂载，在项目的main.js中修改代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>() <span class="comment">//创建pinia实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>) <span class="comment">//创建根实例</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="store"><a href="#store" class="headerlink" title="store"></a>store</h3><p>有Option Store和Setup Store，推荐使用后者，模块化，更易维护和操作<br>在src文件夹中创建store文件夹，在里面创建仓库名.js,每个仓库之间是独立的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; definestore &#125;<span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span>&#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//定义store，一但调用这个函数useCounterStore就可以使用return的内容</span></span><br><span class="line"><span class="comment">// definestore(仓库的唯一标识，()=&gt;&#123;...&#125;)</span></span><br><span class="line"><span class="comment">//一个命名规范：导出的函数名都用use开头，store结尾，中间是仓库名</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//声明数据 state-countconst</span></span><br><span class="line">count =<span class="title function_">ref</span>(<span class="number">0</span>)<span class="comment">// 声明操作数据的方法 action（普通函数）</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addCount</span> = (<span class="params"></span>) =&gt;count.<span class="property">value</span>++</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">subCount</span> = (<span class="params"></span>) =&gt;count.<span class="property">value</span>--</span><br><span class="line"><span class="comment">//声明基于数据派生的计算属性getters</span></span><br><span class="line"><span class="keyword">const</span> double = <span class="title function_">computed</span>(<span class="function">()=&gt;</span>count.<span class="property">alue</span> * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明数据 state - msg</span></span><br><span class="line"><span class="keyword">const</span> msg = <span class="title function_">ref</span>(<span class="string">&#x27;hello,pinia&#x27;</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#123;count,</span><br><span class="line">msg,</span><br><span class="line">addCount,</span><br><span class="line">subCount,</span><br><span class="line">double</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="action异步实现"><a href="#action异步实现" class="headerlink" title="action异步实现"></a>action异步实现</h3><p>pinia的action不需要考虑同步异步，都支持，和组件中获取异步数据的写法完全一致</p>
<h3 id="storeToRefs工具函数"><a href="#storeToRefs工具函数" class="headerlink" title="storeToRefs工具函数"></a>storeToRefs工具函数</h3><p>理解：如果直接导入仓库的函数，然后再页面直接结构使用return的数据的值。不进行处理，那么数据会丢失响应式(函数不会，函数可以直接解构)<br>改进：先导入import {storeToRefs} from ‘pinia’ 然后在结构的时候使用一个方法storeToRefs(函数名)</p>
<h3 id="Pinia持久化插件"><a href="#Pinia持久化插件" class="headerlink" title="Pinia持久化插件"></a>Pinia持久化插件</h3><p>官方文档：<a href="https://prazdevs.github.io/pinia-plugin-persistedstate/zh/">https://prazdevs.github.io/pinia-plugin-persistedstate/zh/</a></p>
<ol>
<li><p>安装插件 pinia-plugin-persistedstate<br>官方文档说版本要高于2.0.0，在项目package.json文件夹里的dependencies里面有pinia的版本</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">npm i pinia-plugin-persistedstate</span><br></pre></td></tr></table></figure>
</li>
<li><p>在main.js中将插件添加到Pinia实例上</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//将插件添加到Pinia实例上</span></span><br><span class="line"><span class="comment">//官方文档</span></span><br><span class="line"><span class="keyword">import</span>&#123;createPinia&#125;<span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> piniaPluginPersistedstate <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">pinia.<span class="title function_">use</span>(piniaPluginPersistedstate)</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"><span class="comment">//完整的main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="comment">// 导入持久化的插件</span></span><br><span class="line"><span class="keyword">import</span> persist <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>() <span class="comment">// 创建Pinia实例</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>) <span class="comment">// 创建根实例</span></span><br><span class="line">app.<span class="title function_">use</span>(pinia.<span class="title function_">use</span>(persist)) <span class="comment">// pinia插件的安装配置</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>) <span class="comment">// 视图的挂载eatePinia().use(persist))</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置 store&#x2F;counter.js<br>在修改数据的时候优先往本地存，在你刷新的时候优先从本地获取<br>开启当前模块的持久化：在要配置的.js文件中store的第三个参数添加{<br>  persist: true<br>}<br>完成后重启项目，在F12vue中可以看到，也可以在F12的Application中看到存储到本地的数据</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    doubleCount,</span><br><span class="line">    increment</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">persist</span>: <span class="literal">true</span> <span class="comment">//开启当前模块的持久化</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他配置看官网文档</p>
</li>
</ol>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>pinia</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3学习篇（2025）</title>
    <url>/2025/04/01/11-vue3/</url>
    <content><![CDATA[<h1 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h1><h2 id="vue3的优势"><a href="#vue3的优势" class="headerlink" title="vue3的优势"></a>vue3的优势</h2><ul>
<li>更容易维护:组合式API;更好的TypeScript支持</li>
<li>更小的体积;良好的TreeShaking;按需引入</li>
<li>更快的速度;重写diff算法;模版编译优化;更高效的组件初始化</li>
<li>更优的数据响应式;Proxy</li>
<li>渐进式框架：表示在项目中可以一点点引入来使用ue，不一定需要全部使用<br>（目前前端最流行的三大框架：Vue，React,＝，Angular）<br>vue的本质：js库</li>
</ul>
<h2 id="Vue初体验："><a href="#Vue初体验：" class="headerlink" title="Vue初体验："></a>Vue初体验：</h2><h3 id="动态展示数据"><a href="#动态展示数据" class="headerlink" title="动态展示数据"></a>动态展示数据</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> =<span class="string">&quot;app&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">template</span>: <span class="string">`&lt;h3&gt;&#123;&#123;message&#125;&#125;&lt;/h3&gt;`</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">title</span>:<span class="string">&quot;vue3初体验&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">message</span>:<span class="string">&quot;早上好，小聂同学&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">&lt;script&gt;</span></span><br></pre></td></tr></table></figure>
<p>开发中从服务器把数据请求到data中，再通过插值语法动态地把数据放进去<br>声明式编程和响应式编程<br>vue受到MVVM模型启发，帮我们绑定数据，绑定dom；view视图和Model数据方法通过vuemodel这个桥梁来完成</p>
<h1 id="OptionsAPI"><a href="#OptionsAPI" class="headerlink" title="OptionsAPI"></a>OptionsAPI</h1><h2 id="data属性选项"><a href="#data属性选项" class="headerlink" title="data属性选项"></a>data属性选项</h2><p>在vue3中，data属性值必须是函数，用return返回对象的形式<br>（vue2中官方推荐是一个函数，传入对象也可以，但在vue3中不可以）</p>
<h3 id="数据劫持"><a href="#数据劫持" class="headerlink" title="数据劫持"></a>数据劫持</h3><p>data中返回的对象会被Vue的响应式系统劫持，之后对该对象的修改或访问都会在劫持中被处理，一旦数据发生变化就会重新加载。<br>vue2和vue3的数据劫持方式不同：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//vue2采用</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(info,<span class="string">&quot;属性名&quot;</span>,&#123;</span><br><span class="line"><span class="attr">set</span>:</span><br><span class="line"><span class="attr">get</span>: </span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//vue3采用</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(indo,&#123;<span class="attr">set</span>:</span><br><span class="line"><span class="attr">get</span>:</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="options-api–methods"><a href="#options-api–methods" class="headerlink" title="options api–methods"></a>options api–methods</h2><p>methods只是个对象类型，没有作用域的说法<br>这些方法可以被绑定到模板中;<br>在该方法中，我们可以使用this关键字来直接访问到data中返回的对象的属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methos</span>:&#123;</span><br><span class="line"><span class="comment">//完整写法</span></span><br><span class="line"><span class="attr">myfunc</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;.....&#125;</span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="title function_">myfunc</span>(<span class="params"></span>)&#123;....&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>methods里使用的this是vue帮你绑定好的this<br><mark>注意：不应该使用箭头函数来定义method函数(例如 plus:()&#x3D;&gt;this.a++)<br>因为箭头函数绑定了父级作用域的上下文，this的指向是window，而不是组件实例，结果会是undefined</mark></p>
<h2 id="options-API-computed计算属性"><a href="#options-API-computed计算属性" class="headerlink" title="options API - computed计算属性"></a>options API - computed计算属性</h2><p><strong>对于任何响应式数据的复杂逻辑操作，使用计算属性，比如需要对数据进行一些转化再现实，或对数据进行一些转化</strong><br>计算属性将被混入到组件实例中，所有getter和seter的this上下文自动被绑定为组件实例<br><strong>在计算属性中可以使用this</strong></p>
<blockquote>
<p>为什么不用methods?<br>methods会把所有data的使用过程都变成一个方法的调用</p>
</blockquote>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>核心步骤：1.导入computed函数2.执行函数在回调函数中return基于响应式数据做计算的值，用变量接收<br>应用如：基于原数据，动态计算新数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 导入</span><br><span class="line">import &#123;ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">// 原始数据</span><br><span class="line">const count = ref(0)</span><br><span class="line">// 计算属性</span><br><span class="line">const doubleCount = computed(()=&gt;count.value * 2)</span><br><span class="line"></span><br><span class="line">// 原始数据</span><br><span class="line">const list = ref([1,2,3,4,5,6,7,8])</span><br><span class="line">console.log(list) //得到的是list对象</span><br><span class="line">console.log(list.value) //得到的是数组[1,2,3,4,5,6,7,8]</span><br><span class="line">// 计算属性list</span><br><span class="line">const filterList = computed(item=&gt;item &gt; 2)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>计算属性默认对应的是一个函数<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">计算属性名()&#123;</span><br><span class="line"><span class="keyword">return</span> .....</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用时<code>&#123;&#123;计算属性名&#125;&#125;</code>直接调用</li>
<li>和methods区别<br><strong>计算属性是有缓存的</strong></li>
</ol>
<h1 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h1><p>要有一个意识：绑定可以分为绑定内容，绑定属性，绑定事件</p>
<h2 id="Mustache模板语法"><a href="#Mustache模板语法" class="headerlink" title="Mustache模板语法"></a>Mustache模板语法</h2><p>当data中的数据发生改变时，对应的内容也会发生更新<br><img src="/postImgs/vue/mustache.png" alt="Mustache模板语法"></p>
<h2 id="基本指令（用得少）"><a href="#基本指令（用得少）" class="headerlink" title="基本指令（用得少）"></a>基本指令（用得少）</h2><ol>
<li>v-once<br>v-once指令可以让我们渲染的内容只渲染一次，后续的修改不会被渲染<br>(当数据发生变化时，元素或者组件以及其所有的子元素将视为静态内容并且跳过)<br>该指令可以用于性能优化</li>
<li>v-pre<br>跳过不需要编译的节点，显示原始的Mustache标签，加快编译的速度</li>
<li>v-text<br>v-text指令，将内容插入到模板中，不会被编译成dom节点，而是直接被渲染成文本，如果有文本会被替代</li>
<li>v-html<br>v-html指令，将内容插入到模板中，会被编译成dom节点，而不是文本</li>
<li>v-cloak<br>这个指令保持在元素上直到关联组件实例结束编译<br>和CSS 规则如 <code>[v-cloak]&#123;display:none&#125;</code>一起用时<br>这个指令可以隐藏未编译的 Mustache 标签直到组件实例准备完毕<br><img src="/postImgs/vue/cloak.png" alt="v-cloak"></li>
</ol>
<h2 id="v-memo指令（性能优化）"><a href="#v-memo指令（性能优化）" class="headerlink" title="v-memo指令（性能优化）"></a>v-memo指令（性能优化）</h2><p>先用一个例子理解：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>= <span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-memo</span>=<span class="string">&quot;[name]&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>下午好&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>今天&#123;&#123;day&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </span><br></pre></td></tr></table></figure>
<p>那么这个被<code>v-memo</code>包裹的div里，只有name属性对应的值改变时才会重新渲染，day值改变将不会更新渲染<br><img src="/postImgs/vue/memo.png" alt="v-memo"></p>
<h2 id="v-bind（绑定属性）"><a href="#v-bind（绑定属性）" class="headerlink" title="v-bind（绑定属性）"></a>v-bind（绑定属性）</h2><p><strong>前面的指令主要是将值插入到模板内容中</strong><br>想动态绑定一些属性，使用<code>v-bind</code>，缩写为<code>:</code></p>
<h3 id="v-bind绑定基本属性"><a href="#v-bind绑定基本属性" class="headerlink" title="v-bind绑定基本属性"></a>v-bind绑定基本属性</h3><p>使用场景：如动态绑定img的src属性（两张图来回切换：三元运算符实现），a元素的href属性</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;imgUrl&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;switchImg&quot;</span>&gt;</span>切换图片<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;href&quot;</span>&gt;</span>点击跳转链接&lt;/a &gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">imgUrl01</span>:<span class="string">&quot;..........&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">imgUrl02</span>:<span class="string">&quot;..........&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">imgShow</span>:<span class="string">&quot;......&quot;</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">href</span>:<span class="string">&quot;..........&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">switchImg</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">imgShow</span>=<span class="variable language_">this</span>.<span class="property">imgShow</span>===<span class="variable language_">this</span>.<span class="property">imgUrl01</span> ? <span class="variable language_">this</span>.<span class="property">imgUrl02</span> : <span class="variable language_">this</span>.<span class="property">imgUrl01</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="v-bind绑定class属性"><a href="#v-bind绑定class属性" class="headerlink" title="v-bind绑定class属性"></a>v-bind绑定class属性</h3><p>比如当数据处于某个状态时为一种样式<br><strong>特殊：动态class可以写成对象语法</strong><br>绑定class有对象语法和数组语法<br>动态绑定的class可以和普通class并存，互不影响</p>
<h4 id="动态绑定calss属性–对象语法（常用）"><a href="#动态绑定calss属性–对象语法（常用）" class="headerlink" title="动态绑定calss属性–对象语法（常用）"></a>动态绑定calss属性–对象语法（常用）</h4><p>下面的对象语法中只有一个键值对，里面可以写多个键值对，值应该是boolean语法</p>
<ol>
<li>对象语法绑定一个键值对<br>这个例子，这种有和无切换的写法很常用，要想到<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active: isActive&#125;&quot;</span>@<span class="attr">click</span>=<span class="string">&quot;btnClick&quot;</span>&gt;</span>点我切换样式<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">isActive</span>:<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">btnClick</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">isActive</span> = ! <span class="variable language_">this</span>.<span class="property">isActive</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在写methods中时，我的this.isActive总是忘记写this，为什么这里要加this呢，不加可以吗?<br>首先<strong>不可以不加this，不然会找不到属性名报未声明的错误</strong>，其次伟大的AI老师这样说：</p>
</blockquote>
</li>
<li>对象语法绑定多个键值对<br>如果用对象语法绑定很多个键值对，都写在标签中可能不好看，那么这时候可以把这堆对象语法封装成一个函数放到methods属性中，在标签中只写这封装的函数名即可</li>
</ol>
<h4 id="动态绑定class属性–数组语法（用得少）"><a href="#动态绑定class属性–数组语法（用得少）" class="headerlink" title="动态绑定class属性–数组语法（用得少）"></a>动态绑定class属性–数组语法（用得少）</h4><p>比如<code>&lt;h3 :class=&quot;[&#39;Mon&#39;,&#39;Tue&#39;,&#39;Wed&#39;,&#39;Thu&#39;,&#39;Fri&#39;,&#39;Sat&#39;,&#39;Sun&#39;]&quot;&gt;&lt;/h3&gt;</code><br><mark>注意不可以写成双引号包双引号哦，比如这个<code>:class=:&quot;[&quot;Mon&quot;,&quot;Tue&quot;]&quot;</code>错误写法</mark><br>数组语法也能使用变量，比如’Mon’改成data里的属性名放进去<br>数组语法中也能使用对象，可以但开发中几乎不用</p>
<h3 id="v-bind绑定style属性（常用）"><a href="#v-bind绑定style属性（常用）" class="headerlink" title="v-bind绑定style属性（常用）"></a>v-bind绑定style属性（常用）</h3><p>用来绑定一些css内敛样式</p>
<blockquote>
<p>同样有对象语法和数组语法，后者类似前面的，很少用，下面只举例对象语法<br>动态绑定style，后面跟对象类型，<mark>一旦用<strong>对象类型</strong>，里面的值就要有限制</mark><br>如<code>&lt;h3 v-bind:style=&quot;&#123;color: myColor, &#39;font-size&#39;: &#39;25px&#39;&#125;&quot;</code><br>如<code>&lt;h3 v-bind:style=&quot;&#123;color: myColor, &#39;fontSize&#39;: size+&#39;px&#39;&#125;&quot;</code><br><strong>短横线的单词和数值记得用单引号包裹起来，短横线也可以用驼峰fontSize</strong><br><strong>如果<code>size</code>是数字的话，要在拼单位<code>&#39;px&#39;</code></strong><br>如果里面东西很多，都写在标签中可能不好看，这时候也可以把这堆对象语法封装成一个对象放到data属性中，在标签中只写这封装的对象名即可（少用）</p>
</blockquote>
<h3 id="v-bind–动态绑定属性名称（少用了解）"><a href="#v-bind–动态绑定属性名称（少用了解）" class="headerlink" title="v-bind–动态绑定属性名称（少用了解）"></a>v-bind–动态绑定属性名称（少用了解）</h3><p>比如不确定是color，还是font-size，用 <code>:[属性名]＝&quot;值&quot;</code> 的格式来定义<br>比如<code>&lt;div :[name]=&quot;value&quot;&gt;&lt;/div&gt;</code>，name的值在data里面取</p>
<h3 id="v-bind–绑定一个对象（重要）"><a href="#v-bind–绑定一个对象（重要）" class="headerlink" title="v-bind–绑定一个对象（重要）"></a>v-bind–绑定一个对象（重要）</h3><p><strong>在给组件传参的时候用很多</strong><br>如果在标签上挨个写属性属性名很麻烦，直接绑定一个对象，去data里往这个对象里慢慢放东西，会自动挨个遍历对象里的东西绑定上去</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-bind</span>=<span class="string">&quot;infos&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">---</span><br><span class="line">data: function()&#123;</span><br><span class="line">infos:&#123; name:&quot;小聂&quot;,age:23&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="v-on绑定事件"><a href="#v-on绑定事件" class="headerlink" title="v-on绑定事件"></a>v-on绑定事件</h2><p><code>v-on: </code>简写<code>@</code>，参数event</p>
<h3 id="v-on绑定事件基本使用"><a href="#v-on绑定事件基本使用" class="headerlink" title="v-on绑定事件基本使用"></a>v-on绑定事件基本使用</h3><p>一个标签上可以绑定多个事件，如果觉得绑定的事件太多，可以写成对象的形式<br><code>&lt;div v-on:click=&quot;dicClick&quot; @mousemove=&quot;divMousemove&quot;&gt;&lt;/div&gt;</code><br><code>&lt;div v-on=&quot;&#123;click: divClick, mousemove: divMousemove&#125;&quot;&gt;&lt;/div&gt;</code></p>
<p><strong>两种写法都可，但是上面的可读性更强，下面的认识就好</strong></p>
<h3 id="v-on绑定事件参数传递"><a href="#v-on绑定事件参数传递" class="headerlink" title="v-on绑定事件参数传递"></a>v-on绑定事件参数传递</h3><ol>
<li>默认传递event对象<br>如果在绑定事件时没有传递任何参数，那么会默认绑定event对象作为参数，被传递过来</li>
<li>明确参数<br>有明确参数会把event<strong>替代</strong>掉<br><code>参数没加引号会从data里面找属性对应的值，如果传递的参数是值，记得要加单引号</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick(&#x27;nie&#x27;, 23)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">btnClick</span>(<span class="params">name, age</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>明确参数＋event对象<br>想要传参的时候也把event传过去，要<code>$event</code>这样写<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnClick(&#x27;nie&#x27;,23,$event)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">btnClick</span>(<span class="params">name, age, event</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(name, age, event)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="v-on的修饰符"><a href="#v-on的修饰符" class="headerlink" title="v-on的修饰符"></a>v-on的修饰符</h3><p>修饰符相当于自动帮你调方法对事件进行了处理<br><img src="/postImgs/vue/xsf.png" alt="v-on的修饰符"></p>
<h2 id="vue条件渲染"><a href="#vue条件渲染" class="headerlink" title="vue条件渲染"></a>vue条件渲染</h2><p>（v-if,v-else-if,v-else,v-show之类的，和vue2一样）</p>
<ul>
<li>v-show不支持template</li>
<li>v-show不可以和v-else一起使用</li>
<li>v-show元素无论是否需要显示到浏览器上，它的DOM实际都是有存在的，只是通过CSS的display属性来进行切换</li>
<li>v-if当条件为false时，其对应的原生不会被渲染到DOM中;</li>
<li>如果我们的原生需要在显示和隐藏之间频繁的切换，那么使用v-show</li>
<li>如果不会频繁的发生切换，那么使用v-if;</li>
</ul>
<h2 id="templat元素的使用"><a href="#templat元素的使用" class="headerlink" title="templat元素的使用"></a>templat元素的使用</h2><p>template元素可以当做不可见的包裹元素，配合v-if使用，但是最终template不会被渲染出来</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;isShowCode&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;.......&quot;</span>&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="遍历渲染"><a href="#遍历渲染" class="headerlink" title="遍历渲染"></a>遍历渲染</h2><ul>
<li>v-for可以遍历数组，对象，数字（从1开始数）</li>
<li>v-for可以和template结合</li>
<li>v-for …in…和v-for …of…的效果是一样的</li>
<li>v-for记得要有key</li>
</ul>
<p>支持有一二三个参数:<br>一个参数:<code>&quot;value in object&quot;</code><br>二个参数:<code>&quot;(value,key)in object&quot;</code><br> 三个参数:<code>&quot;(value, key, index) in object&quot;</code></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">u1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key,index)in info&quot;</span>&gt;</span>&#123;&#123;value&#125;&#125;-&#123;&#123;key&#125;&#125;-&#123;&#123;index&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="vue数组侦听监测"><a href="#vue数组侦听监测" class="headerlink" title="vue数组侦听监测"></a>vue数组侦听监测</h2><p>Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新。<br>这些被包裹过的方法包括:<br>push();pop();shift();unshift();splice();sort();reverse()<br>不修改原数组的方法是不能侦听的</p>
<h2 id="双向绑定–-v-model"><a href="#双向绑定–-v-model" class="headerlink" title="双向绑定– v-model"></a>双向绑定– v-model</h2><h3 id="v-model基本使用"><a href="#v-model基本使用" class="headerlink" title="v-model基本使用"></a>v-model基本使用</h3><p>它负责监听用户的输入事件来更新数据<br>常用在表单，选项元素伤，创建双向数据绑定<br>简单原理类似：v-bind+v-on的使用，但是真实开发中都是使用v-model来实现<br>给表单输入框设置默认内容–v-bind<br><code>&lt;input type=&quot;text&quot; v-bind:balye=&quot;message&quot;&gt;</code><br>要让表单和vue的内容互相影响–v-model<br><code>&lt;label&gt;&lt;input type=&quot;text&quot; v-model=&quot;count&quot;&gt;&lt;/label&gt; </code><br>count在data里面</p>
<h3 id="v-model的特殊绑定-重要"><a href="#v-model的特殊绑定-重要" class="headerlink" title="v-model的特殊绑定(重要)"></a>v-model的特殊绑定(重要)</h3><ol>
<li><p>v-model绑定checkbox单选框<br><mark>单选框：v-model默认绑定的是布尔值，单选框value属性不会影响v-model的值</mark></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;agree&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;agree&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;isAgree&quot;</span>&gt;</span> 同意协议</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;inAgree: false&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>v-model绑定checkbox多选框<br><mark>多选框：绑定到属性中的值是一个数组，除了v-model，必须要绑定一个value值，当选中时会自动把值添加到属性数组里</mark></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>你有什么爱好呀<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;play&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;play&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;play&quot;</span>&gt;</span> 玩游戏</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;music&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;music&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;music&quot;</span>&gt;</span> 听音乐</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">data()&#123;</span><br><span class="line">return&#123; hobbies: []</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>v-model绑定radio</p>
</li>
<li><p><mark>使用v-model绑定同一个值会有互斥的效果，不再需要name属性进行互斥；也必须要写value属性，v-model会把选中的按钮的值赋值给data中接收的数据</mark></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gender&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;male&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>&gt;</span>男</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;female&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>&gt;</span>女</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">gender: &quot;female&quot;</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>v-model绑定select<br>select添加mutiple属性是多选，不添加这个属性是单选；select多选时只可以使用size属性<br><mark>v-model要添加到select标签上，和前面不一样！</mark><br><mark>单选时，传递的是选中的值；多选时，传递的是数组（类似checkbox多选框）</mark></p>
<select>
<option value="yxg">虞寻歌</option>
<option value="wr">雾刃</option>
<option value="ft">枫糖</option>
<option value="sg">松瑰</option>
</select></li>
</ol>
<h3 id="v-model的值绑定"><a href="#v-model的值绑定" class="headerlink" title="v-model的值绑定"></a>v-model的值绑定</h3><p>上面写的例子，这些东西都是自己写死的，但是真是开发中这些值是服务器给的，前端进行值绑定<br>比如说，服务器传递来的数据是对象数组，把数组放多选框中，如下图select的值绑定<br><img src="/postImgs/vue/model1.png" alt="v-model的值绑定"><br>再比如的chexobox的值绑定，如下图<br><img src="/postImgs/vue/model2.png" alt="v-model的值绑定"></p>
<h3 id="v-model修饰符"><a href="#v-model修饰符" class="headerlink" title="v-model修饰符"></a>v-model修饰符</h3><p>可以同时使用多个修饰符</p>
<ol>
<li>.lazy<br>将v-model绑定的事件变为change事件，只有在提交时候（比如回车）才会触发</li>
<li>.number<br>自动将内容转换成数字<br>如果让用户输入数字，只要用户输入了就会变成字符串类型，这时用v-model.number会把用户输入的数字转化成数字类型</li>
<li>.trim<br>去除收尾空格<br>组件（这部分笔记看之前的把，会用就好）</li>
</ol>
<h1 id="vue3项目创建"><a href="#vue3项目创建" class="headerlink" title="vue3项目创建"></a>vue3项目创建</h1><h2 id="create-vue创建项目"><a href="#create-vue创建项目" class="headerlink" title="create-vue创建项目"></a>create-vue创建项目</h2><p>vue3推荐使用：create-vue是Vue官方新的脚手架工具，底层切换到了 vite(下一代构建工具)，为开发提供极速响应</p>
<ol>
<li>要已安装16.0以上的node.js</li>
<li>npm init vue@latest 这一指令将会安装并执行 create-vue<br>是这样的（我有一步和不一样所以项目有点不一样）<img src="/postImgs/oldImg/vue3Pic1.png" alt="alt text"><br>视频是这样的<img src="/postImgs/oldImg/vue3Pic4.png" alt="alt text"><br>然后进入项目安装依赖运行<br>是这样的<img src="/postImgs/oldImg/vue3Pic2.png" alt="alt text"><br>进入页面是这样的<img src="/postImgs/oldImg/vue3Pic3.png" alt="alt text"></li>
</ol>
<h3 id="项目目录和关键文件"><a href="#项目目录和关键文件" class="headerlink" title="项目目录和关键文件"></a>项目目录和关键文件</h3><p>关键文件:</p>
<p>1.vite.config.js-项目的配置文件 基于vite的配置<br>2.package.json-项目包文件 核心依赖项变成了 Vue<br>3.x和 vite3.main.js-入口文件 createApp函数创建应用实例<br>createApp(app).mount(…)设置挂载点，前半段在创建实例，后半段在把实例往上挂载<br>4.app.vue-根组件 SFC单文件组件 script-template-style<br>变化一:脚本script和模板template顺序调整，结构和样式放在一起更利于维护<br>变化二:模板template不再要求唯一根元素<br>变化三:脚本script添加setup标识支持组合式API<br>(加上setup允许在script中直接编写组合式API)<br>5.index.html-单页入口 提供id为app的挂载点</p>
<hr>
（但是我的打开.js文件的地方是.ts文件，文件里的代码和视频是一样的，检查发现是在创建项目的时候是否使用JSX语法的地方应该是NO，我选了YES）
语言类型：.ts 文件是 TypeScript 文件，而 .js 文件是 JavaScript 文件。TypeScript 是 JavaScript 的超集，它为 JavaScript 添加了静态类型和其他一些语言特性。

<p>类型检查：TypeScript 具有静态类型检查功能，可以在编译时捕获一些常见的错误，并提供更好的代码提示和自动补全。JavaScript 不具备这种类型检查功能，它是一种动态类型的脚本语言。</p>
<p>语法扩展：TypeScript 扩展了 JavaScript 的语法，使得可以使用类、接口、泛型等特性，以及其他一些新的语法和功能。JavaScript 本身不支持这些语法扩展。</p>
<p>编译过程：TypeScript 需要先编译成 JavaScript，然后才能在浏览器或 Node.js 环境中运行。而 JavaScript 文件可以直接在浏览器或 Node.js 中执行，无需额外的编译步骤。</p>
<hr>
可能会弹提示因为你在跑vue3的项目但是插件用的还是vue2，去扩展禁用“vetur”安装“vue-Official”



<h2 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h2><p>新一代前端<strong>构建工具</strong><br>优势：<br>开发过程中无需打包，可快速冷启动<br>轻量快速的热重载<br>真正的按需编译，不再等待整个应用编译完成<br><img src="/postImgs/vue/vite01.jpg" alt="vite"></p>
<h3 id="用vite创建vue3工程"><a href="#用vite创建vue3工程" class="headerlink" title="用vite创建vue3工程"></a>用vite创建vue3工程</h3><p><strong>看官方文档，更新版本命令可能会变动</strong><br>初始化工程：根据官方命名创建的工程（最开始的样子，自己没有改动）<br>构造函数和工厂函数：</p>
<ul>
<li>构造函数一般首字母大写，用new构造</li>
<li>工厂函数一般首字母小写，不用构造，直接调用就好</li>
</ul>
<h2 id="别名配置"><a href="#别名配置" class="headerlink" title="别名配置"></a>别名配置</h2><p>别名配置<br><img src="/postImgs/vue/bm1.png" alt="别名配置"><br>但是做完这一步虽然别名能用，但是没有提示<br>做下面的配置可以让编译器有提示<br><img src="/postImgs/vue/bm2.png" alt="别名配置"></p>
<h1 id="组合式API"><a href="#组合式API" class="headerlink" title="组合式API"></a>组合式API</h1><h2 id="组合式API-setup选项"><a href="#组合式API-setup选项" class="headerlink" title="组合式API-setup选项"></a>组合式API-setup选项</h2><ol>
<li><p>组合式API:一系列函数<br>写法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    setup()&#123;</span><br><span class="line">      </span><br><span class="line">    &#125;,</span><br><span class="line">    beforeCreate()&#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>执行时机：在beforeCreate钩子之前执行<img src="/postImgs/oldImg/vue3Pic5.png" alt="alt text"></p>
</li>
<li><p>setup中写代码的特点<br>setup函数中，获取不到this(this是undefined)<br>在setup函数中写的数据和方法需要在末尾以对象的方式return，才能给模版使用</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    setup()&#123;</span><br><span class="line">      const message = &#x27;this is message&#x27;</span><br><span class="line">      const logMessage = ()=&gt;&#123;</span><br><span class="line">        console.log(message)</span><br><span class="line">      &#125;</span><br><span class="line">      // 必须return才可以</span><br><span class="line">      return &#123;</span><br><span class="line">        message,</span><br><span class="line">        logMessage</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li><code>&lt;script setup&gt;</code>语法糖<br>script标签添加setup标记，不需要再写导出语句，默认会添加导出语句，帮助我们return,在template里面直接用就好了</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  const message = &#x27;this is message&#x27;</span><br><span class="line">  const logMessage = ()=&gt;&#123;</span><br><span class="line">    console.log(message)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="组合式API-reactive和ref函数"><a href="#组合式API-reactive和ref函数" class="headerlink" title="组合式API - reactive和ref函数"></a>组合式API - reactive和ref函数</h2><ol>
<li>reactive：接受对象类型数据的参数传入，返回一个响应式的对象</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const state = reactive(&#123;</span><br><span class="line">   msg:&#x27;this is msg&#x27;</span><br><span class="line"> &#125;)</span><br><span class="line"> const setSate = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图</span><br><span class="line">   state.msg = &#x27;this is new msg&#x27;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; state.msg &#125;&#125;</span><br><span class="line">  &lt;button @click=&quot;setState&quot;&gt;change msg&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>ref：接收简单类型或者对象类型的数据传入并返回一个响应式的对象<br>本质：如果接收的类型是简单类型，那么会在原有的类型外层包一个对象，包成了复杂类型，再接入reactive实现响应式<br>注意：访问数据需要通过.value，因为它包了一层</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"> // 导入</span><br><span class="line"> import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"> // 执行函数 传入参数 变量接收</span><br><span class="line"> const count = ref(0)</span><br><span class="line"> const setCount = ()=&gt;&#123;</span><br><span class="line">   // 修改数据更新视图必须加上.value</span><br><span class="line">   count.value++</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;setCount&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>reactive 对比 ref</p>
</li>
<li><p>都是用来生成响应式数据</p>
</li>
<li><p>不同点</p>
<ol>
<li>reactive不能处理简单类型的数据</li>
<li>ref参数类型支持更好，但是必须通过.value做访问修改</li>
<li>ref函数内部的实现依赖于reactive函数</li>
</ol>
</li>
<li><p>在实际工作中的推荐</p>
<ol>
<li>推荐使用ref函数，减少记忆负担，小兔鲜项目都使用ref</li>
</ol>
</li>
</ol>
<h1 id="组件（这部分笔记看之前的把，会用就好）"><a href="#组件（这部分笔记看之前的把，会用就好）" class="headerlink" title="组件（这部分笔记看之前的把，会用就好）"></a>组件（这部分笔记看之前的把，会用就好）</h1><p>开发中一定要进行好组件拆分</p>
<h2 id="组件使用"><a href="#组件使用" class="headerlink" title="组件使用"></a>组件使用</h2><h3 id="注册全局组件（用得少）"><a href="#注册全局组件（用得少）" class="headerlink" title="注册全局组件（用得少）"></a>注册全局组件（用得少）</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">app.component(&quot;组件名&quot;,&#123;</span><br><span class="line">template:...,</span><br><span class="line">data()&#123;return&#123;&#125;</span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></figure>
<p>每个组件里面可以有自己的逻辑（data,methods等）</p>
<h3 id="注册局部组件（常用）"><a href="#注册局部组件（常用）" class="headerlink" title="注册局部组件（常用）"></a>注册局部组件（常用）</h3><p>放在app中，和data同级</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line">组件名: &#123;组件对象值&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="组件名称规则"><a href="#组件名称规则" class="headerlink" title="组件名称规则"></a>组件名称规则</h2><p>定义组件名有两种方式</p>
<ol>
<li>短横线分隔符my-cat<br>使用时&#96;&#96;<my-cat></my-cat>&#96;</li>
<li>大驼峰标识MyCat<br>使用时<code>&lt;my-cat&gt;&lt;/my-cat&gt;</code><br>或<code>&lt;MyCat&gt;&lt;/MyCat&gt;</code></li>
</ol>
<h2 id="在项目中使用组件（快速回忆）"><a href="#在项目中使用组件（快速回忆）" class="headerlink" title="在项目中使用组件（快速回忆）"></a>在项目中使用组件（快速回忆）</h2><p>main.js中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title function_">create</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>App.vue中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;app&quot;&gt;</span><br><span class="line">&lt;app-header&gt;&lt;/app-header&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">//导入</span><br><span class="line">import AppHeader from &#x27;./components/AppHeader.vue&#x27;</span><br><span class="line">//注册</span><br><span class="line">export default&#123;</span><br><span class="line">components:&#123;AppHeader&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>组件放在components文件夹<br>compenments&#x2F;AppHeader.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;我是头部组件&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>组件也可以导入其他组件</p>
<h1 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h1><h2 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h2><h3 id="父传子props"><a href="#父传子props" class="headerlink" title="父传子props"></a>父传子props</h3><p>数据在父组件上，父用子组件展示数据，要把数据传递给子组件展示</p>
<ol>
<li><p>父用子组件时，通过属性的形式传递东西</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;show-info name=&quot;why&quot; age=&quot;18&quot; height=&quot;1.88&quot; /&gt;</span><br><span class="line">&lt;show-info name=&quot;kobe&quot; age=&quot;30&quot; height=&quot;1.87&quot;/&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>子组件拿到父传递的数据，放到对应的位置上<br>子组件要通过<code>props</code>来接收父组件传递过来的属性<br><img src="/postImgs/vue/props1.png" alt="父传子props"><br>简而言之，就是父组件通过属性的形式给这些名称赋值，子组件通过props拿到这些名称，使用这些名称展示数据</p>
</li>
<li><p>props 的数组写法<br>子组件使用props数组的形式接收数据(同1中写法)<br><code>export default&#123; pops:[&quot;name&quot;,&quot;age&quot;,&quot;height&quot;] &#125;</code></p>
</li>
<li><p>props的对象形式语法（常用）<br>这种写法可以对父传递的数据进行验证<br>默认值和必传一般二选一</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">default</span>&#123;</span><br><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">  <span class="attr">name</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">String</span>，</span><br><span class="line">  <span class="attr">default</span>: <span class="string">&quot;我是默认的name哦&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">age</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">  <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">height</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">  <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">//必传</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>type常见的类型（图片转内容）</p>
</li>
<li><p>特殊类型－－对象<br>如果type使用的是Object类型<br>那么默认值必须写函数（箭头不箭头都可以），函数返回一个对象<br>比如</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">friend&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">  <span class="attr">default</span>:<span class="function">()=&gt;</span>(&#123;name : <span class="string">&quot;nie&quot;</span>&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">message</span>:&#123;</span><br><span class="line"> <span class="attr">type</span>:<span class="title class_">Object</span>,</span><br><span class="line"> <span class="title function_">default</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">message</span>:<span class="string">&quot;hello,nie&quot;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>特殊类型 – 数组<br>如果type的类型是数组，那么也需要用函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">hobbies</span>:&#123;</span><br><span class="line"> <span class="attr">typr</span>: <span class="title class_">Array</span>,</span><br><span class="line"> <span class="attr">default</span>: <span class="function">()=&gt;</span>[<span class="string">&quot;虞寻歌&quot;</span>,<span class="string">&quot;枫糖&quot;</span>,<span class="string">&quot;雾刃&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>规则命名<br>如果是小驼峰，那么组件用小驼峰或者-小写（和之前类似的规则一样，vue中组件命名都遵循这样的写法）</p>
</li>
<li><p>父传子子没接受<br>如果父传子了一个属性，但是子没有接受，就称之为<strong>非prop的Attributue</strong>，该属性会默认添加到子组件的根元素上（根节点上）<br>如果不喜欢没添加的属性被传递到根元素上，可以给子组件的<code>export default&#123;&#125;</code>里面添加<code>inheritAttrs: false</code><br>这是可以用<code>$attrs.xxx</code>获取，如图<br><img src="/postImgs/vue/props2.png" alt="父传子props"></p>
</li>
</ol>
<h3 id="子传父-emit"><a href="#子传父-emit" class="headerlink" title="子传父$emit"></a>子传父$emit</h3><p>在子组件中触发一些事件时进行子传父<br>子组件发生的事件要改变父组件的内容<br>要让子组件发出去一个自定义事件<br>第一个参数是自定义的事件名称，第二个参数是参数<br><img src="/postImgs/vue/emit1.png" alt="父传子props"><br>子组件触发自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;btnClick(10)&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">methods:&#123;</span><br><span class="line">btnClick(count)&#123;</span><br><span class="line">this.$emit(&quot;sub&quot;,count)</span><br><span class="line">&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>父组件修改数据</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;sub-counter @sub=&quot;subClick&quot;&gt;&lt;/sub-counter&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">methods:&#123;</span><br><span class="line">subClick(count)&#123;</span><br><span class="line">this.counter = count</span><br><span class="line">&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>小结：子组件监听对应事件发生，用this.$emit(“ye”)发送事件，父组件在子组件上用@ye&#x3D;”yemethods”接收事件，触发父组件的方法methods:{yemethods(){} }<br><img src="/postImgs/vue/emit2.png" alt="父传子props"></p>
<h3 id="emits数组"><a href="#emits数组" class="headerlink" title="emits数组"></a>emits数组</h3><ol>
<li>emits数组语法（用的多）<br>在子组件中用emits定义所有自定义事件名称，注册说明一下，这样父组件会有提示<br>export default {<br>emits:[“自定义事件1”,”自定义事件2”],<br>methods:{}<br>}</li>
<li>emits对象语法（用得少）<br>用对象写法的好处是可以对参数进行验证<br>比如验证发送的数组必须要小于10<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">emits</span>:&#123;</span><br><span class="line"><span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">count</span>)&#123;</span><br><span class="line"> <span class="keyword">if</span>(count&lt;=<span class="number">10</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="插槽Slot"><a href="#插槽Slot" class="headerlink" title="插槽Slot"></a>插槽Slot</h2><h3 id="认识插槽"><a href="#认识插槽" class="headerlink" title="认识插槽"></a>认识插槽</h3><p><img src="/postImgs/vue/slot1.png" alt="插槽"><br>在组件中预留插槽，插槽中具体放什么东西由使用者决定，而不是组件写死</p>
<h3 id="插槽的使用"><a href="#插槽的使用" class="headerlink" title="插槽的使用"></a>插槽的使用</h3><ol>
<li>插槽基本使用<br>抽取共性做成插槽来占位，预留不同，让外部（组件使用者，如父组件）决定到底显示什么元素<br>把要显示的东西放到子组件标签中，这部分内容会放到子组件的插槽中<br>插槽用一个div包裹住，这样好控制<br><img src="/postImgs/vue/slot2.png" alt="插槽"><br>（图片）</li>
<li>插槽默认值<br>如果父组件使用时没有传递东西，就会显示子组件插槽中的内容；如父组件使用时有传递东西，那么子组件插槽中的内容会被父组件传递的内容替换掉</li>
</ol>
<h3 id="具名插槽（多个插槽）"><a href="#具名插槽（多个插槽）" class="headerlink" title="具名插槽（多个插槽）"></a>具名插槽（多个插槽）</h3><p>具名插槽的缩写<code>v-slot:</code> 可以换成<code>#</code><br>告诉是给哪个插槽传入什么内容<br>插槽如果没有起名字，默认名default<br><img src="/postImgs/vue/slot3.png" alt="插槽"><br><img src="/postImgs/vue/slot4.png" alt="插槽"></p>
<h4 id="动态插槽名"><a href="#动态插槽名" class="headerlink" title="动态插槽名"></a>动态插槽名</h4><p><img src="/postImgs/vue/slot5.png" alt="插槽"></p>
<h4 id="渲染作用域"><a href="#渲染作用域" class="headerlink" title="渲染作用域"></a>渲染作用域</h4><p>父级模板的所有内容都是在父级作用域中编译的<br>子模板中的所有内容都是在子作用域中编译的</p>
<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>看图，有点绕（特殊场景用，平时用得少）<br><img src="/postImgs/vue/slot8.png" alt="插槽"><br><img src="/postImgs/vue/slot6.png" alt="插槽"></p>
<h2 id="非父子组件通信–provide和inject"><a href="#非父子组件通信–provide和inject" class="headerlink" title="非父子组件通信–provide和inject"></a>非父子组件通信–provide和inject</h2><h3 id="provide和inject-（用的较少）"><a href="#provide和inject-（用的较少）" class="headerlink" title="provide和inject （用的较少）"></a>provide和inject （用的较少）</h3><p>依赖注入，父组件通过provide提供数据，子组件通过inject使用数据<br>特点：父组件不知道子组件在哪里使用熟悉，子组件也不知道inject来自哪里（其实也不需要知道）<br><img src="/postImgs/vue/prop4.png" alt="provide和inject"><br>想要在provide中使用this获取data里的数据，需要把provide写成函数，函数才有作用域<br><img src="/postImgs/vue/prop5.png" alt="provide和inject"></p>
<h2 id="非父子组件通信–全局事件总线-bus（常用）"><a href="#非父子组件通信–全局事件总线-bus（常用）" class="headerlink" title="非父子组件通信–全局事件总线$bus（常用）"></a>非父子组件通信–全局事件总线$bus（常用）</h2><h3 id="全局事件总线库–hy-event-store"><a href="#全局事件总线库–hy-event-store" class="headerlink" title="全局事件总线库–hy-event-store"></a>全局事件总线库–hy-event-store</h3><p>通过第三方库使用事件总线<br>其他的第三方库也可以，逻辑都是差不多的</p>
<ol>
<li>先安装<code>pnpm install hy-event-store</code></li>
<li>创建总线js<br>创建一个文件夹utils&#x2F;event-bus.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">HEventBus</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;hy-event-store&#x27;</span></span><br><span class="line"><span class="keyword">const</span> eventBus = <span class="keyword">new</span> <span class="title class_">HYEventBus</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> eventBus</span><br></pre></td></tr></table></figure></li>
<li>在组件中导入<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">&#x27;./utils/event-bus&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>发送事件<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">eventBus.<span class="title function_">emit</span>(<span class="string">&quot;事件名&quot;</span>,有要传的参数写后面)</span><br></pre></td></tr></table></figure></li>
<li>监听事件<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">eventBus.<span class="title function_">on</span>(<span class="string">&quot;事件名&quot;</span>,<span class="function">(<span class="params">有参数的话这里写形参接收</span>)=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure></li>
<li>事件总线的移除<br>如果使用时间总线的组件被移除， 那么这个书剑总线也应该被移除<br>使用methods进行时间总线逻辑的处理，在移除的时候要有事件名和移除的方法<br><img src="/postImgs/vue/eventbus1.png" alt="事件总线的移除"></li>
<li>注意<br>父子组件可以用但是不推荐，父子组件还是乖乖用前面的父子通信吧<br>在真实开发中使用总线的时候把移除的代码写上最好</li>
</ol>
<h1 id="组件化补充"><a href="#组件化补充" class="headerlink" title="组件化补充"></a>组件化补充</h1><h2 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h2><p>组件创建、挂载、更新、卸载的过程<br>要在这个过程的某个阶段添加自己的逻辑代码，使用生命周期<br>在vue2中有很详细的理解过程，这里不重新写了，看这个图片，很清晰<br>这些函数写在<code>export default</code>里面，和<code>data()&#123;&#125;</code>通级别<br>两个最重要的，其他几乎不用<br><img src="/postImgs/vue/smzq1.png" alt="事件总线的移除"></p>
<h2 id="组件中的-ref引用"><a href="#组件中的-ref引用" class="headerlink" title="组件中的$ref引用"></a>组件中的$ref引用</h2><p>在vue中不推荐使用原生DOM操作，那么想要获取一个元素或组件，就要用<code>$ref</code><br>在标签上绑定一个ref属性和属性值<br>如<code>&lt;h3 ref=&quot;title&quot;&gt;&lt;/h3&gt;</code><br>在js代码中<code>this.$refs.title</code>获取元素</p>
<h3 id="ref获取组件实例"><a href="#ref获取组件实例" class="headerlink" title="ref获取组件实例"></a>ref获取组件实例</h3><p>组件实例有一个$refs属性，他有一个对象Objetc，有注册过ref attributed的所有DOM元素和组件实例<br>如果用ref拿组件<code>&lt;banner ref=&quot;banner&quot;/&gt;</code>，<code>this.$refs.banner</code>拿到的是组件实例<br><strong>拿到组件实例之后，父组件可以主动调用子组件中的方法</strong><br>（两个图和一个图）<br>父组件还可以拿到组件实例后拿到组件的根元素<code>this.$refs.banner.$el</code>，如果子组件有两个跟元素，那么拿到的是第一个node节点<br>要拿到组件实例跟元素中的节点，<code>this.$refs.banner.$el.nextElementSibling</code>（真实开发中几乎不会这样用）<br><strong>开发中尽量一个组件只有一个根元素</strong></p>
<h2 id="动态组件（了解）"><a href="#动态组件（了解）" class="headerlink" title="动态组件（了解）"></a>动态组件（了解）</h2><h2 id="内置组件keep-alive"><a href="#内置组件keep-alive" class="headerlink" title="内置组件keep-alive"></a>内置组件keep-alive</h2><p>让某一个组件保持存活的状态<br>在一个组件不再使用时，默认情况下会被销毁掉，下次用再创建，如果切换频繁，使用<code>keep-alive</code>会让它依然保持存活<br>在使用组件时，用<code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code>标签把组件包裹起来，还有匹配对应组件名<br>同时组件要添加name属性<br><img src="/postImgs/vue/ref1.png" alt="内置组件keep-alive"></p>
<h3 id="存活组件的生命周期"><a href="#存活组件的生命周期" class="headerlink" title="存活组件的生命周期"></a>存活组件的生命周期</h3><p>使用activated（进入活跃状态，如选中），和deactivated函数</p>
<h3 id="方式一：v-if逻辑判断"><a href="#方式一：v-if逻辑判断" class="headerlink" title="方式一：v-if逻辑判断"></a>方式一：v-if逻辑判断</h3><h3 id="方式二：动态组件comonent（简洁）"><a href="#方式二：动态组件comonent（简洁）" class="headerlink" title="方式二：动态组件comonent（简洁）"></a>方式二：动态组件comonent（简洁）</h3><p>is中的组件要来自两个地方，全局注册的组件和局部注册的组件</p>
<h1 id="CompositionAPI"><a href="#CompositionAPI" class="headerlink" title="CompositionAPI"></a>CompositionAPI</h1><h2 id="options-api"><a href="#options-api" class="headerlink" title="options api"></a>options api</h2><p>之前学的都是这个，弊端是对同一个数据的操作有些零散<br>在vue3的composition API中，对一个数据的所有操作都在一个地方完成，把一些分散的东西放在一起，封装一个函数，维护简单，使用的时候注册使用<br>在vue3中，composition API是主流，要向这边转换</p>
<h2 id="Setup函数的基本使用"><a href="#Setup函数的基本使用" class="headerlink" title="Setup函数的基本使用"></a>Setup函数的基本使用</h2><p>setup函数默认有两个参数：props和context<br>setup里定义的数据和函数需要返回<br>setup里定义的数据默认不是响应式的，要变成响应式，需要用<code>ref()</code>进行包裹<br>template中，对于ref对象中的内容会自动解包，所以模板语法中直接用即可，不需要.value<br><strong>setup里面不能使用this</strong><br><img src="/postImgs/vue/setup1.png" alt="Setup函数的基本使用"></p>
<h2 id="setup逻辑的封装思路"><a href="#setup逻辑的封装思路" class="headerlink" title="setup逻辑的封装思路"></a>setup逻辑的封装思路</h2><p>如果一套逻辑不止在一个组件中使用，可以把setup里面的逻辑封装成一个.js文件，在文件中记得return；在setup中引入这个.js文件，解构使用即可<br><img src="/postImgs/vue/setup2.png" alt="Setup函数的基本使用"><br><img src="/postImgs/vue/setup3.png" alt="Setup函数的基本使用"><br>使用时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">upset</span>(<span class="params"></span>)&#123;</span><br><span class="line">....</span><br><span class="line"><span class="keyword">return</span> &#123;counter,increment,decrement&#125;</span><br><span class="line"><span class="comment">//上面这行return可以写成下面这样</span></span><br><span class="line"><span class="keyword">return</span> &#123; ...<span class="title function_">useCounter</span>()&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Setup中的响应式数据"><a href="#Setup中的响应式数据" class="headerlink" title="Setup中的响应式数据"></a>Setup中的响应式数据</h2><h3 id="数据响应式reactive函数"><a href="#数据响应式reactive函数" class="headerlink" title="数据响应式reactive函数"></a>数据响应式reactive函数</h3><ol>
<li>基本使用<br>如果想为在setup中定义的数据提供响应式的特性，那么我们可以使用reactive的函数:<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> state =<span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>:<span class="string">&quot;coderwhy&quot;</span>,<span class="attr">counter</span>:<span class="number">100</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span> &#123;state&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>因为当使用reactive函数处理我们的数据之后，数据再次被使用时就会进行依赖收集(数据会被劫持)</li>
<li>其实编写的data选项，也是在内部交给了reactive函数将其编程响应式对象的;</li>
</ul>
<ol start="2">
<li>数据限制<br>reactive API对传入的类型是有限制的，它要求必须传入对象或者数组类型</li>
</ol>
<h3 id="数据响应式ref函数（常用）"><a href="#数据响应式ref函数（常用）" class="headerlink" title="数据响应式ref函数（常用）"></a>数据响应式ref函数（常用）</h3><p>定义简单类型的数据（也可也定义复杂类型的数据）<br>ref 会返回一个可变的响应式对象，该对象作为一个 响应式的引用 维护着它内部的值，这就是ref名称的来源<br>它内部的值是在ref的value属性中被维护的；<br>模板中引入ref的的值时，Vue会自动帮助我们进行解包操作，所以我们并不需要在模板中通过ref.value的方式来使用;<br>但是在setup函数内部，它依然是一个ref引用，所以对其进行操作时，需要使用 ref.value的方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">ref</span>(<span class="number">100</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>)&#123;</span><br><span class="line">  counter.<span class="property">value</span>++</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">return</span> &#123;counter,increment&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>解包小细节<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--默认情况下在template中使用ref时，vue会自动对其进行解包(取出其中value)·--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数：&#123;&#123;counter&#125;&#125;く/h2&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counter++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">&lt;! ---使用的时候不需要写.value--</span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数:&#123;&#123;info.counter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!---修改的时候需要写.value-</span></span><br><span class="line"><span class="comment">&lt;button @click=&quot;info.counter.value++&quot;&gt;+1&lt;/button&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="ref和reactive的使用场景"><a href="#ref和reactive的使用场景" class="headerlink" title="ref和reactive的使用场景"></a>ref和reactive的使用场景</h3><ol>
<li>reactive的使用场景<br>reactive多应用于本地的数据<br>多个数据之间是由关系的（有联系，比如数据的聚合，组织在一起会有特定的作用）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> account=<span class="title function_">reactive</span>(&#123;</span><br><span class="line"><span class="attr">username</span>:<span class="string">&quot;nie&quot;</span></span><br><span class="line"><span class="attr">password</span>:<span class="string">&quot;123456&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span> &#123;account&#125;</span><br></pre></td></tr></table></figure></li>
<li>ref的使用场景（其他场景几乎都用ref）<br>定义本地的一些简单数据<br>定义从网络中获取的数据使用ref<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> musics = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> serverMusics·=[<span class="string">&quot;虞寻歌&quot;</span>,<span class="string">&quot;雾刃&quot;</span>,<span class="string">&quot;枫糖&quot;</span>]</span><br><span class="line">musics.<span class="property">value</span> =serverMusics</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="readonly-用较少"><a href="#readonly-用较少" class="headerlink" title="readonly(用较少)"></a>readonly(用较少)</h3><p>vue代码要符合单向数据流原则，如果在开发中遵循单向数据流，那么不用这个函数也一样<br>比如，父组件把Info对象传给子组件，子组件可以获取info对象展示。默认情况子组件可以把info对象中的数据进行修改，同时父组件的Info数据也会被修改。<br>实际中不希望子组件轻易修改数据，如果要修改，那么应该让子组件把事件传递给父组件，让父组件来修改<br>规范的写法如图：<br><img src="/postImgs/vue/setup4.png" alt="Setup函数的基本使用"><br>readonly使用方法：<br>先引入<br><code>import &#123;readonly&#125; from &#39;vue&#39;</code><br>再用readonly函数包裹数据<br><code>const rdInfo = readonly(account)</code><br>再导出<br><code>return &#123;rdInfo&#125;</code></p>
<blockquote>
<p>readonly返回的对象都是不允许修改的；<br>但是经过readonly处理的原来的对象是允许被修改的；<br>比如const info &#x3D;readonly(obj),info对象是不允许被修改的;<br>当obj被修改时，readonly返回的info对象也会被修改;<br>但是不能去修改readonly返回的对象info;<br>其实本质上就是readonly返回的对象的setter方法被劫持了而已；</p>
</blockquote>
<h3 id="一些判断函数（了解）"><a href="#一些判断函数（了解）" class="headerlink" title="一些判断函数（了解）"></a>一些判断函数（了解）</h3><ol>
<li>isProxy<br> 检査对象是否是由reactive或readonly创建的proxy</li>
<li>isReactive<br>检查对象是否是由reactive创建的响应式代理<br>如果该代理是readonly建的，但包裹了由reactive创建的另一个代理，它也会返回true;、</li>
<li>isReadonly<br>检查对象是否是由 readonly 创建的只读代理,</li>
<li>toRaw<br>返回reactive或readonly代理的原始对象(不建议保留对原始对象的持久引用。请谨慎使用)</li>
<li>shallowReactive<br>创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)</li>
<li>shallowReadonly<br>创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换(深层还是可读、可写的)</li>
</ol>
<h3 id="setup语法糖"><a href="#setup语法糖" class="headerlink" title="setup语法糖"></a>setup语法糖</h3><p>不需要再<code>export default&#123;setup()&#123; return&#123;&#125;&#125;&#125;</code><br>把setup写在script标签中即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import&#123;useRoute&#125;from &#x27;vue-router&#x27;</span><br><span class="line">import &#123;&#125; from &#x27;&#x27;</span><br><span class="line">const route = useRoute();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="侦听函数watch"><a href="#侦听函数watch" class="headerlink" title="侦听函数watch"></a>侦听函数watch</h2><p>在某些情况下，希望在代码逻辑中侦听一个或者多个数据的变化，这个时候就需要用侦听器watch来完成了<br>数据变化时执行回调函数，两个额外参数<code>immediate:true</code>控制立刻执行，<code>deep:true</code>开启深度侦听</p>
<ol>
<li><p>侦听单个数据<br>默认有两个参数:newValue&#x2F;oldValue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>侦听多个数据<br> 侦听多个数据，第一个参数改写成数组的写法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  const name = ref(&#x27;cp&#x27;)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch([count, name], ([newCount, newName],[oldCount,oldName])=&gt;&#123;</span><br><span class="line">    console.log(`count或者name变化了，[newCount, newName],[oldCount,oldName]`)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line"><span class="comment">//1.默认有两个参数:newValue/oldValue</span></span><br><span class="line"><span class="title function_">message</span>(<span class="params">newValue,oldValue</span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;message数据发生了变化:&quot;</span>，newValue，oldValue)</span><br><span class="line">F&#125;</span><br><span class="line"><span class="title function_">info</span>(<span class="params">newValue, oldValue</span>)&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;info数据发生了变化:&quot;</span>，newValue，oldValue)&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>监听对象类型<br>如果侦听的目标是对象类型，那么拿到的是代理对象<br>想获取原生对象用下面的方法：<br><code>console.log(&#123;...newValue &#125;)</code><br><code>console.log(Vue.toRaw(newValue))</code></p>
</li>
<li><p>immediate参数<br>在侦听器创建时立即出发回调，响应式数据变化之后继续执行回调</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const count = ref(0)</span><br><span class="line">  // 2. 调用watch 侦听变化</span><br><span class="line">  watch(count, (newValue, oldValue)=&gt;&#123;</span><br><span class="line">    console.log(`count发生了变化，老值为$&#123;oldValue&#125;,新值为$&#123;newValue&#125;`)</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">    immediate: true</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>deep参数<br>通过watch监听的ref对象默认是浅层侦听的，直接修改嵌套的对象属性不会触发回调执行，需要开启deep</li>
</ol>
<p>这样可以监听对象的某个属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">watch</span>:&#123;</span><br><span class="line"><span class="attr">info</span>:&#123;</span><br><span class="line"><span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue, oldValue);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&#x27;info.name&#x27;</span>: <span class="keyword">function</span>(<span class="params">newValue, oldValue</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue);</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 直接修改不会引发回调执行</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  // 1. 导入watch</span><br><span class="line">  import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">  const state = ref(&#123; count: 0 &#125;)</span><br><span class="line">  // 2. 监听对象state 并开启deep</span><br><span class="line">  watch(state, ()=&gt;&#123;</span><br><span class="line">    console.log(&#x27;数据变化了&#x27;)</span><br><span class="line">  &#125;,&#123;deep:true&#125;)</span><br><span class="line">  const changeStateByCount = ()=&gt;&#123;</span><br><span class="line">    // 此时修改可以触发回调</span><br><span class="line">    state.value.count++</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>使用this.$watch侦听<br>可以在created的生命周期中，使用<code>this.$watchs</code>来侦听:<br>第一个参数是要侦听的源;<br>第二个参数是侦听的回调函数callback;<br>第三个参数是额外的其他选项，比如deep、immediate;<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.$watch(<span class="string">&#x27;message&#x27;</span>,<span class="function">(<span class="params">newValue, oldValue</span>)=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(newValue,oldValue);&#125;,&#123;<span class="attr">deep</span>: <span class="literal">true</span>,<span class="attr">imediate</span>: <span class="literal">true</span>&#125;)&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="侦听"><a href="#侦听" class="headerlink" title="侦听"></a>侦听</h2><h3 id="侦听多个数据源"><a href="#侦听多个数据源" class="headerlink" title="侦听多个数据源"></a>侦听多个数据源</h3><p>侦听器还可以使用数组同时侦听多个源:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name =<span class="title function_">ref</span>(<span class="string">&quot;NIE&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> age =<span class="title function_">ref</span>(<span class="number">18</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeName</span>=(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">  name.<span class="property">value</span>=<span class="string">&quot;james&quot;</span>;&#125;</span><br><span class="line"><span class="title function_">watch</span>([name, age],<span class="function">(<span class="params">newValues, oldValues</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newValues,oldValues);&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="watchEffect停止侦听"><a href="#watchEffect停止侦听" class="headerlink" title="watchEffect停止侦听"></a>watchEffect停止侦听</h3><p>如果在发生某些情况下，我们希望停止侦听，这个时候我们可以获取watchEffect的返回值函数，调用该函数即可</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> stopWatch=<span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;watchEffect执行~&quot;</span>，name.<span class="property">value</span>, age.<span class="property">value</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeAge</span> =(<span class="params"></span>)=&gt;&#123;</span><br><span class="line">age.<span class="property">value</span>++;</span><br><span class="line"><span class="keyword">if</span>(age.<span class="property">value</span>&gt;<span class="number">20</span>)&#123;</span><br><span class="line"><span class="title function_">stopWatch</span>();&#125;</span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Setup-Hooks思想"><a href="#Setup-Hooks思想" class="headerlink" title="Setup-Hooks思想"></a>Setup-Hooks思想</h2><p>把一些操作封装一个.js,在setup中调用即可，看下面代码就明白了<br><img src="/postImgs/vue/hooks1.png" alt="Setup-Hooks思想"></p>
<h1 id="vue-router"><a href="#vue-router" class="headerlink" title="vue router"></a>vue router</h1><h2 id="路由的基本使用"><a href="#路由的基本使用" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h2><h3 id="路由的基本使用-1"><a href="#路由的基本使用-1" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h3><p>1.创建路由对象routes: 映射关系history: 修改url的模式(hash&#x2F;history)<br>2.让路由对象生效app.use(router)<br>3.<code>&lt;router-view&gt;&lt;/router-view&gt;</code>的占位<br>4.<code>&lt;router-link to=&quot;/home/news&quot;&gt;新闻&lt;/router-link&gt;</code>进行路由的切换<br><img src="/postImgs/vue/router1.png" alt="路由的基本使用"></p>
<h3 id="路由的默认路径"><a href="#路由的默认路径" class="headerlink" title="路由的默认路径"></a>路由的默认路径</h3><p>path配置的是根路径:<code>/</code><br><code>redirect</code>是重定向,也就是我们将根路径重定向到&#x2F;home的路径下,这样就可以得到想要的结果了.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes=<span class="title function_">createRouter</span>(&#123;</span><br><span class="line">[</span><br><span class="line">&#123;<span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,<span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">&#123;<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,<span class="attr">component</span>:<span class="title class_">Home</span> &#125;,</span><br><span class="line">&#123; <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,<span class="attr">component</span>:<span class="title class_">About</span> &#125;</span><br><span class="line">]&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="路由的嵌套"><a href="#路由的嵌套" class="headerlink" title="路由的嵌套"></a>路由的嵌套</h3><p>嵌套路由将路由配置到路由对象中，然后通过router-view进行展示</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes=[</span><br><span class="line">  &#123; <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,<span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../views/Home.vue&#x27;</span>)</span><br><span class="line">  ,<span class="attr">children</span>:[</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/home/news&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../views/HomeNews.vue&#x27;</span>) </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>:<span class="string">&#x27;/home/message&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../views/HomeMessage.vue&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    ]&#125;,</span><br><span class="line">  ]</span><br><span class="line">&lt;router-link to=<span class="string">&quot;/home/news&quot;</span>&gt;新闻&lt;/router-link&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home/message&quot;</span>&gt;</span>消息<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="router-link属性"><a href="#router-link属性" class="headerlink" title="router-link属性"></a>router-link属性</h3><p>router-link事实上有很多属性可以配置:<br>to属性:是一个字符串，或者是一个对象<br>replace属性:当点击时，会调用<code>router.replace()</code>，而不是 <code>routerpush()</code>;<br>active-class属性:设置激活a元素后应用的class，默认是<code>router-link-active</code><br>exact-active-class属性:链接精准激活时，应用于渲染的<code>&lt;a&gt;</code>的 class，默认是<code>&#39; router-link-exact-active</code>;</p>
<h3 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h3><p>Vue Router默认就支持动态来导入组件:<br>这是因为component可以传入一个组件，也可以接收一个函数，该函数 需要放回一个Promise;而import函数就是返回一个Promise<br>使用<code>/*webpackChunkName:&quot;home-chunk&quot;*/</code>对分包进行命名</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes=[</span><br><span class="line">&#123; <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,<span class="attr">redirect</span>:<span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">&#123; <span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="comment">/*webpackChunkName:&quot;home-chunk&quot;*/</span><span class="string">&#x27;../pages/Home.vue&#x27;</span>)&#125;,</span><br><span class="line">&#123; <span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/About.vue&#x27;</span>)&#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//在router-link中进行如下跳转:</span></span><br><span class="line">&lt;router-link to=<span class="string">&quot;/user/123&quot;</span>&gt;用户:<span class="number">123</span>&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
<p>在模板中获取到ID<br><code>&lt;h2&gt;User:&#123;&#123; $route.params.id &#125;&#125;&lt;/h2&gt;</code><br>在代码中获取ID<br><code>console.log(route.params.id);</code><br>在created中获取值<br><code>this.$route.params</code></p>
<h3 id="路由的传参–query"><a href="#路由的传参–query" class="headerlink" title="路由的传参–query"></a>路由的传参–query</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">  <span class="attr">query</span>:&#123;<span class="attr">name</span>:<span class="string">&#x27;nie&#x27;</span>,<span class="attr">age</span>:<span class="number">23</span>&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>接受用<code>&#123;&#123;$route.query&#125;&#125;</code>he<br>这样传递的参数会在地址的后面跟<code>?name=nie&amp;age=23</code></p>
<h3 id="动态路由基本匹配"><a href="#动态路由基本匹配" class="headerlink" title="动态路由基本匹配"></a>动态路由基本匹配</h3><p>很多时候我们需要将给定匹配模式的路由映射到同一个组件:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span></span><br><span class="line"><span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/User.vue&#x27;</span>)&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="路由匹配规则加"><a href="#路由匹配规则加" class="headerlink" title="路由匹配规则加*"></a>路由匹配规则加*</h3><p>在<code>/:pathMatch(.*)</code> 后面又加了一个 <code>*</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>:<span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>,</span><br><span class="line"><span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/NotFound.vue&#x27;</span>)&#125;</span><br></pre></td></tr></table></figure>
<p>它们的区别在于解析的时候，是否解析&#x2F;:<br><code>path:/:pathMatch(.*)*&#39;</code><br>Not Found: [ “user”, “hahah”, “123” ]<br><code>path:&#39;/:pathMatch(.*)&#39;</code><br>Not Found: user&#x2F;hahah&#x2F;123</p>
<h3 id="URL的hash"><a href="#URL的hash" class="headerlink" title="URL的hash"></a>URL的hash</h3><p>URL的hash也就是锚点(#),本质上是改变window.location的href属性<br><img src="/postImgs/vue/history.png" alt="URL的hash"></p>
<h3 id="页面的前进后退"><a href="#页面的前进后退" class="headerlink" title="页面的前进后退"></a>页面的前进后退</h3><p>router也有back:<br>通过调用<code>history.back()</code>回溯历史,相当于<code>router.go(-1);</code><br>router也有forward:<br>通过调用 <code>history.forward()</code>在历史中前进。相当于 <code>router.go(1);</code><br>router的go方法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//向前移动一条记录，与router.forward()相同</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">1</span>)</span><br><span class="line"><span class="comment">//返回一条记录，与router.back()相同</span></span><br><span class="line">router.<span class="title function_">go</span>(-<span class="number">1</span>)</span><br><span class="line"><span class="comment">//前进3条记录</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">3</span>)</span><br><span class="line"><span class="comment">//如果没有那么多记录，静默失败router.go(-100)</span></span><br><span class="line">router.<span class="title function_">go</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<h2 id="动态管理路由"><a href="#动态管理路由" class="headerlink" title="动态管理路由"></a>动态管理路由</h2><h3 id="动态添加路由"><a href="#动态添加路由" class="headerlink" title="动态添加路由"></a>动态添加路由</h3><p>比如说，向服务器发送一个请求，判断用户是管理员还是普通用户，根据用户角色的不同动态加载路由</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> isAdmin = <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span>(isAdmin)&#123;</span><br><span class="line">  router.<span class="title function_">addRoute</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/admin&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/Admin.vue&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  router.<span class="title function_">addRoute</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/vip&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/Vip.vue&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="删除路由（了解，很少用到）"><a href="#删除路由（了解，很少用到）" class="headerlink" title="删除路由（了解，很少用到）"></a>删除路由（了解，很少用到）</h3><p>方法1:添加一个name相同的路由，由于路由name是唯一的，所以后面的name会替代前面相同name的路由，进行删除</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">addRoute</span>(&#123;</span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;/vip&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;admin&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/Vip.vue&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">router.<span class="title function_">addRoute</span>(&#123;</span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;/admin&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;admin&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/Admin.vue&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>方法2:通过removeRoute方法，传入路由的名称name,进行删除;</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">addRoute</span>(&#123; </span><br><span class="line">  <span class="attr">path</span>:<span class="string">&#x27;/admin&#x27;</span>,<span class="attr">name</span>:<span class="string">&#x27;admin&#x27;</span>,<span class="attr">component</span>:<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;../pages/Admin.vue&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">router.<span class="title function_">removeRoute</span>(<span class="string">&#x27;admin&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>方法3:通过addRoute方法的返回值回调（特少用）:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> removeRoute = router.<span class="title function_">addRoute</span>(&#123;routeRecord&#125;)</span><br><span class="line"><span class="title function_">removeRoute</span>()</span><br></pre></td></tr></table></figure>
<h3 id="路由其他方法"><a href="#路由其他方法" class="headerlink" title="路由其他方法"></a>路由其他方法</h3><p><code>router.hasRoute()</code>:检查路由是否存在<br><code> router.getRoutes()</code>:获取一个包含所有路由记录的数组</p>
<h2 id="路由导航守卫"><a href="#路由导航守卫" class="headerlink" title="路由导航守卫"></a>路由导航守卫</h2><p>在跳转路由之前拦截并进行判断<br>守卫有很多很多，但是最常用的是全局前置守卫</p>
<h3 id="全局的前置守卫–beforeEach"><a href="#全局的前置守卫–beforeEach" class="headerlink" title="全局的前置守卫–beforeEach"></a>全局的前置守卫–beforeEach</h3><ol>
<li>语法<br>在进行任何的路由跳转之前，传入这个函数的都会被回调，在导航触发时会被回调<br><code>router.beforeEach((to,from)=&gt;&#123;&#125;)</code><br><code>to</code> 到哪里去，即将进入的路由对象<br><code>from</code> 从哪里来，即将厉害的路由对象<br>还有第三个参数<code>next</code>可选，不推荐使用<br>有返回值：<br>false:取消当前导航<br>不返回或undefined:进行默认导航<br>返回一个路由地址（可以是string类型路径，也可以是一个对象包含path\query\params等信息），进行跳转</li>
<li>在进入订单页面时，判断用户是否登录<blockquote>
<p>如何判断用户是否登录呢<br>一般在localStorage中存储用户信息，保存一个token如果存在，则用户登录，否则未登录</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to,<span class="keyword">from</span></span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span>(!token &amp;&amp; to.<span class="property">path</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;/order&#x27;</span>)!==-<span class="number">1</span>)&#123;</span><br><span class="line">  <span class="comment">//或if(!token &amp;&amp; to.path===&quot;/order&quot;)&#123;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//想要推出登录，直接删除token即可</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="完整的导航解析流程（来自官方文档）（了解）"><a href="#完整的导航解析流程（来自官方文档）（了解）" class="headerlink" title="完整的导航解析流程（来自官方文档）（了解）"></a>完整的导航解析流程（来自官方文档）（了解）</h3><p>导航被触发-&gt;在失活的(要离开的)组件里调用 beforeRouteLeave 守卫。<br>调用全局的 beforeEach 守卫。<br>在重用的组件里调用 beforeRouteUpdate 守卫(2.2+)。<br>在路由配置里调用 beforeEnter。<br>解析异步路由组件。<br>在被激活的组件里调用 beforeRouteEnter。<br>调用全局的 beforeResolve（异步组件被解析之后，跳转之前）<br>调用全局的 afterEach 钩子。触发 DOM 更新。<br>调用 beforeRouteEnter 守卫中传给 next 的回调函数，创建好的组件实例会作为回调函数的参数传入。</p>
<h1 id="Vuex状态管理"><a href="#Vuex状态管理" class="headerlink" title="Vuex状态管理"></a>Vuex状态管理</h1><p>虽然pinia比vuex更优秀，但是vuex还是要掌握<br>vuex有五个核心概念<br><mark>vuex的学习笔记在vue2中也有，那边记得很详细清楚，这里不再写了</mark></p>
<h1 id="pinia状态管理"><a href="#pinia状态管理" class="headerlink" title="pinia状态管理"></a>pinia状态管理</h1><p><mark>pinia学习笔记在pinia文章中也有，那边记得很详细清楚，这里不再写了</mark></p>
<h1 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h1><p><mark>这部分学习笔记看网络请求文章</mark></p>
<h1 id="综合小例子"><a href="#综合小例子" class="headerlink" title="综合小例子"></a>综合小例子</h1><h2 id="模板语法案例-–-书籍购物车（重要）"><a href="#模板语法案例-–-书籍购物车（重要）" class="headerlink" title="模板语法案例 – 书籍购物车（重要）"></a>模板语法案例 – 书籍购物车（重要）</h2><h3 id="案例说明"><a href="#案例说明" class="headerlink" title="案例说明"></a>案例说明</h3><p><img src="/postImgs/vue/xlz1.png" alt="书籍购物车"><br>要求：<br>1.在界面上以表格的形式，显示一些书籍的数据<br>2.在底部显示书籍的总价格;<br>3.点击+或者-可以增加或减少书籍数量(如果为1，那么不能继续-)<br>4.点击移除按钮，可以将书籍移除(当所有的书籍移除完毕时，显示:购物车为空~)</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先把大的架子搭起来，再完成一个个模块</p>
<ol>
<li><p>搭建界面内容<br>表格标题＋表格标题简单美化<br>实际开发中表格内的数据量和内容取决于服务器传过来的，所以表格内容用v-for<br>在现在练习时，books数据是自己写的，但是内容都写进data中有些多了不好看，放到<code>data.js</code>文件夹，用script引入文件夹，在data中直接可以读取到<code>data.js</code>文件夹的books<br>原因是script引入的是全局作用域，所以可以直接用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">table</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-tag">th</span>,<span class="selector-tag">td</span>&#123;</span></span><br><span class="line"><span class="language-css"><span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css"><span class="attribute">padding</span>: <span class="number">8px</span>  <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>书籍名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>出版日期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">....</span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;item in books&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.index+1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;item.price&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">books</span>: books</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//真实的开发一般这样做</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">created</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">fetch</span>(<span class="string">&quot;url&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">books</span>=res</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>完善–计算价格，价格前拼接人民币符号<br>购买数量的前后应该有加号减号两个按钮<br>用计算属性计算总价<br>关于价格的前面要加人民币符号，使用一个<mark>methods方法给所有的价格前面拼接符号，牢记这种思想</mark><br>（vue2有过滤器，vue3删掉了，用拼接的方法也好用）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;<span class="title function_">formatPrice</span>(<span class="params">price</span>)&#123;<span class="keyword">return</span> <span class="string">&quot;$&quot;</span>+ price&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数量加减操作<br>前面使用v-for循环渲染表格和生成加减号，那么点击加减号如何判断改变的是哪条数据的加减号呢<br>思路：让加减方法传递和接收 <code>index</code>或者<code>item</code>，拿到这两个数据之一，对<code>index.count</code>或者<code>item.count</code>进行操作</p>
</li>
<li><p>减号失效禁用–v-bind动态绑定<br>注意减号减到1就不能再减了，让这个减号按钮禁用（添加属性disable）<br><code>&lt;button v-bind:disabled=&quot;item.count &lt;=1&quot; @click=&quot;decrement(index,item)&quot;&gt;-&lt;/button&gt;</code><br>使用v-bind动态绑定</p>
</li>
<li><p>移除书籍操作<br>还是和减号的思路一样，要确定移除的是哪一本，传递并接收参数，在方法中对这个参数进行操作<br><code>this.books.split(item,1)</code></p>
</li>
<li><p>购物车是否有内容不同展示<br>当移除掉所有数据后，清除购物车表格，进行汉字提示<br>使用v-if,v-else条件渲染，根据<code>books.length</code>判断，不等于0那就是有，等于0就是没有数据</p>
</li>
</ol>
<p><code>&lt;template v-if=&quot;books.length&quot;&gt;</code></p>
<h3 id="购物车案例完整代码"><a href="#购物车案例完整代码" class="headerlink" title="购物车案例完整代码"></a>购物车案例完整代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">table</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border-collapse</span>: collapse;</span></span><br><span class="line"><span class="language-css">      <span class="comment">/* text-align: center; */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">thead</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">th</span>,</span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">td</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#aaa</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.搭建界面内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;books.length&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>书籍名称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>出版日期<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>价格<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>购买数量<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">tr</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in books&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span></span></span><br><span class="line"><span class="tag">            @<span class="attr">click</span>=<span class="string">&quot;rowClick(index)&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:class</span>=<span class="string">&quot;&#123; active: index === currentIndex &#125;&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.date &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; formatPrice(item.price) &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">&quot;item.count &lt;= 1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;decrement(index, item)&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">              &#123;&#123; item.count &#125;&#125;</span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment(index, item)&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;removeBook(index, item)&quot;</span>&gt;</span>移除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>总价: &#123;&#123; formatPrice(totalPrice) &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>购物车为空, 请添加喜欢的书籍~<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>商场中有大量的IT类的书籍, 请选择添加学习<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;data.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1.创建app</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// data: option api</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">books</span>: books,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">currentIndex</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// computed</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">totalPrice</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 1.直接遍历books</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// let price = 0</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// for (const item of this.books) &#123;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   price += item.price * item.count</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// return price</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 2.reduce(自己决定)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">books</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">preValue, item</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> preValue + item.<span class="property">price</span> * item.<span class="property">count</span></span></span><br><span class="line"><span class="language-javascript">          &#125;, <span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">formatPrice</span>(<span class="params">price</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="string">&#x27;¥&#x27;</span> + price</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 监听-和+操作</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">decrement</span>(<span class="params">index, item</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击-&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// this.books[index].count--</span></span></span><br><span class="line"><span class="language-javascript">          item.<span class="property">count</span>--</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">increment</span>(<span class="params">index, item</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击+:&#x27;</span>, index)</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// this.books[index].count++</span></span></span><br><span class="line"><span class="language-javascript">          item.<span class="property">count</span>++</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">removeBook</span>(<span class="params">index, item</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">books</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">rowClick</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2.挂载app</span></span></span><br><span class="line"><span class="language-javascript">    app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="选中某一行-–-排他思想"><a href="#选中某一行-–-排他思想" class="headerlink" title="选中某一行 – 排他思想"></a>选中某一行 – 排他思想</h3><p>点击某一行的数据，选中这一行数据（用active类，控制active添加到这一行数据上）<br>对这个类进行动态绑定<br><img src="/postImgs/vue/xlz2.png" alt="书籍购物车"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;active: index === currentIndex&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;liClick(index)&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in movies&quot;</span>&gt;</span></span><br><span class="line">      &#123;&#123;item&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../lib/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 1.创建app</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// data: option api</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">movies</span>: [<span class="string">&quot;星际穿越&quot;</span>, <span class="string">&quot;阿凡达&quot;</span>, <span class="string">&quot;大话西游&quot;</span>, <span class="string">&quot;黑客帝国&quot;</span>],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">currentIndex</span>: -<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">liClick</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;liClick:&quot;</span>, index)</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">currentIndex</span> = index</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="组件间通信案例"><a href="#组件间通信案例" class="headerlink" title="组件间通信案例"></a>组件间通信案例</h2><h2 id="组件动态使用小例子（视频08）"><a href="#组件动态使用小例子（视频08）" class="headerlink" title="组件动态使用小例子（视频08）"></a>组件动态使用小例子（视频08）</h2><h2 id="组件的封装和抽取（视频0506）"><a href="#组件的封装和抽取（视频0506）" class="headerlink" title="组件的封装和抽取（视频0506）"></a>组件的封装和抽取（视频0506）</h2>]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vue2项目练习-购物商城项目</title>
    <url>/2024/10/01/10-vue2%E5%95%86%E5%9F%8E%E8%B4%AD%E7%89%A9%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h1 id="vue2项目练习-购物商城项目"><a href="#vue2项目练习-购物商城项目" class="headerlink" title="vue2项目练习-购物商城项目"></a>vue2项目练习-购物商城项目</h1><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><h3 id="基于vueCli自定义创建项目架子"><a href="#基于vueCli自定义创建项目架子" class="headerlink" title="基于vueCli自定义创建项目架子"></a>基于vueCli自定义创建项目架子</h3><p>我在vue2my文件夹中创建的项目，在这个文件夹中打开终端，vue create shopping，<br>选择第三个自定义，<br>选择babel,router,vuex,css Pre-processors,Linter&#x2F;Formatter<br>选择2.x  选择n  选择less  选择Standard  选择lint on save  选择第一个  选择n<br>创建成功后，在项目终端npm run serve，进入<a href="http://localhost:8080/">http://localhost:8080/</a> 成功即可<br>注意！！！写项目vocode工作区打开的是项目根目录！！不可以是根目录的父级目录！！不然不会成功还容易莫名其妙报错！虽然我也不知道为什么但是只打开项目根目录一下子就好了！</p>
<h3 id="调整初始化目录"><a href="#调整初始化目录" class="headerlink" title="调整初始化目录"></a>调整初始化目录</h3><p>理解：默认的目录不够完美，想要将目录调整成符合企业规范的目录<br>三步走：<br>1.删除多余的文件<br>vue自动生成的和vue页面的图片和vue展示代码<br>assents里面的logo，components里的helloworld.vue，views里面的两个.vue文件<br>2.修改路由配置和App.vue文件<br>对路由规则进行清空,router的index.js文件清空后：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>:[]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<p>App.vue只留下路由出口</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>3.新增两个目录api&#x2F;utils<br>① api接口模块:发送ajax请求的接口模块<br>② utils 工具模块:自己封装的一些工具方法模块</p>
<h3 id="vant组件库"><a href="#vant组件库" class="headerlink" title="vant组件库"></a>vant组件库</h3><p>组件库：第三方封装好了很多的组件，整合到一起就是一个组件库<br>vue组件库一般按照不同平台进行分为pc端和移动端<br>第三方vue组件库vant-ui。vant2支持vue2，vant4支持vue3<br><a href="https://vant-ui.github.io/vant/v2/#/zh-CN/">https://vant-ui.github.io/vant/v2/#/zh-CN/</a><br>安装和使用方法网站有提供文档可以直接使用。</p>
<h4 id="安装vant组件库"><a href="#安装vant组件库" class="headerlink" title="安装vant组件库"></a>安装vant组件库</h4><p>Vue 2 项目，安装 Vant 2：<br>npm i vant@latest-v2 -S<br>上面这行是官方文档的代码，但是我这样安装失败，<br>安装出问题，跟着别人用：npm i vant@latest-v2 -S –legacy-peer-deps<br>安装成功</p>
<h4 id="按需导入"><a href="#按需导入" class="headerlink" title="按需导入"></a>按需导入</h4><p>vant分为全部导入和按需导入，推荐自动按需导入。<br>全部导入的方法在官方文档中有，此项目采用自动按需导入<br>1.安装vant组件库（上面已完成）<br>2.安装插件npm i babel-plugin-import -D<br>-D的意思是把这个插件安装成开发依赖，只在开发过程中使用<br>官方文档的的命令我还是失败，使用npm i babel-plugin-import -D –legacy-peer-deps<br>安装插件成功<br>3.babel.config.js中配置（分为低版本和高版本，官方文档上面的一种是低版本适用的，下面的是高版本使用的，这里使用高版本）<br>找到项目中的这个文件，然后贴贴，不要替换掉之前的，把文档里的往里面添加，添加后的文件代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 对于使用 babel7 的用户，可以在 babel.config.js 中配置</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [<span class="string">&#x27;import&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">libraryName</span>: <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">      <span class="attr">libraryDirectory</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">      <span class="attr">style</span>: <span class="literal">true</span></span><br><span class="line">    &#125;, <span class="string">&#x27;vant&#x27;</span>]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.main.js按需导入注册<br>官方文档：<br>接着你可以在代码中直接引入 Vant 组件，插件会自动将代码转化为方式二中的按需引入形式<br>比如你要使用buton插件和其他插件，那么在main.js中<br>import { Button，插件名2 } from ‘vant’;<br>Vue.use(Button)<br>Vue.use(插件名2)<br>如果导入失败重启项目重启终端试试<br>但是！这样下去按需导入的越来越多会导致main.js的代码越来越多，所以通常要把这部分按需导入的内容放到utils文件夹下面，在里面新建一个文件vant-ui.js，把刚才的代码放进来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">最终main.<span class="property">js</span>需要加代码</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/utils/vant-ui&#x27;</span></span><br><span class="line">vant-ui.<span class="property">js</span>文件代码</span><br><span class="line"><span class="comment">// 按需导入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"><span class="comment">// 这里注意上面是vant不是vants！！！</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Button</span>)</span><br></pre></td></tr></table></figure>
<p>5.测试使用<br>在.vue中<br><van-button type="primary">主要按钮</van-button><br>渲染不出来关了vscode重来一遍就可以</p>
<h3 id="项目中的vw适配-基于postcss"><a href="#项目中的vw适配-基于postcss" class="headerlink" title="项目中的vw适配-基于postcss"></a>项目中的vw适配-基于postcss</h3><p>写的代码都是px，但是要移动端适配，使用插件帮我们把px自动转化成vw<br>步骤看vant官网-进阶用法-浏览器适配文档<br>1.安装插件<br>npm下载:npm install <a href="mailto:&#x70;&#x6f;&#x73;&#x74;&#x63;&#x73;&#115;&#x2d;&#x70;&#x78;&#x2d;&#x74;&#x6f;&#x2d;&#x76;&#105;&#101;&#119;&#x70;&#111;&#114;&#116;&#64;&#49;&#46;&#x31;&#46;&#49;">&#x70;&#x6f;&#x73;&#x74;&#x63;&#x73;&#115;&#x2d;&#x70;&#x78;&#x2d;&#x74;&#x6f;&#x2d;&#x76;&#105;&#101;&#119;&#x70;&#111;&#114;&#116;&#64;&#49;&#46;&#x31;&#46;&#49;</a> -D –force<br>2.根目录新建postcss.config.js文件，填入配置（和src是并列的）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// postcss.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;postcss-px-to-viewport&#x27;</span>: &#123;</span><br><span class="line">      <span class="comment">//vw适配的标准屏的宽度</span></span><br><span class="line">      <span class="comment">//如果设计图是750，调成1倍图是375这里写370</span></span><br><span class="line">      <span class="comment">//如果设计图是640的，那么调成1倍图标准图是320</span></span><br><span class="line">      <span class="attr">viewportWidth</span>: <span class="number">375</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后就可以在.vue文件的style中写代码了</p>
<h2 id="代码编写"><a href="#代码编写" class="headerlink" title="代码编写"></a>代码编写</h2><h3 id="路由设计配置"><a href="#路由设计配置" class="headerlink" title="路由设计配置"></a>路由设计配置</h3><h4 id="根据项目分析路由"><a href="#根据项目分析路由" class="headerlink" title="根据项目分析路由"></a>根据项目分析路由</h4><p>分析项目页面，设计路由，先配一级路由再配二级路由<br>一级路由：单个页面，独立展示的<br>（登录login，首页架子layout，搜索页search，搜索列表search，商品详情prodetail，结算支付pay，订单管理myorder）<br>二级路由：首页架子下面的（首页，分类，购物车，我的）</p>
<h4 id="配置一级路由"><a href="#配置一级路由" class="headerlink" title="配置一级路由"></a>配置一级路由</h4><p>1.在views中新建文件夹，每一个一级路由建一个文件夹：登录login，首页架子layout，搜索页search，搜索列表search，商品详情prodetail，结算支付pay，订单管理myorder<br>2.在每个文件夹下面建立一个主核心文件 index.vue，注意seach里面有两个.vue，搜索页用的inde.vue，搜索列表是list.vue<br>3.在router文件夹index.js中配置路由规则</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//原本路由文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: []</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//所有一级路由配置后</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">// 如果文件是文件夹里面的index.vue文件，那么写到文件夹就可以，会自动找到里面的index文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/login&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Layout</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/layout&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Search</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/search&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">SearchList</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/search/list&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ProDetail</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/prodetail&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Pay</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/pay&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyOrder</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/myorder&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,</span><br><span class="line">    <span class="comment">// 下面这里首页架子layout因为一点进来就是，所以用/</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Layout</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/search&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Search</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/searchlist&#x27;</span>, <span class="attr">component</span>: <span class="title class_">SearchList</span> &#125;,</span><br><span class="line">    <span class="comment">// 这里加Id因为动态路由传参，确认将来是哪个商品，路由参数中携带id</span></span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/prodetail/:id&#x27;</span>, <span class="attr">component</span>: <span class="title class_">ProDetail</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/pay&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Pay</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/myorder&#x27;</span>, <span class="attr">component</span>: <span class="title class_">MyOrder</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h4 id="配置二级路由（底部导航）"><a href="#配置二级路由（底部导航）" class="headerlink" title="配置二级路由（底部导航）"></a>配置二级路由（底部导航）</h4><p>二级路由关键的是导航栏，四个二级路由就是导航栏的四个小图标，所以先实现底部导航<br>通过vant组件库文档实现底部导航tabbar<br>1.vant-ui.js中按需引入<br>在vant2文档中找到导航组件-Tabbar标签栏-引入<br>把上面的</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Tabbar</span>, <span class="title class_">TabbarItem</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Tabbar</span>);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">TabbarItem</span>);</span><br></pre></td></tr></table></figure>
<p>直接cv到vant-ui.js<br>(视频上保存会自动合并import的组件，我的不会，手动给它们放进去不报错就行)<br>2.layout.vue中粘贴官方代码<br>把下面基础用法中van-tabbar标签包裹的内容，v-model的东西删掉目前不要，记得把它们放到div中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;van-tabbar &gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;home-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;search&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;friends-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;setting-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">&lt;/van-tabbar&gt;</span><br></pre></td></tr></table></figure>
<p>cv到架子里，layout文件夹index.vue<br>这时候打开运行页面能够看到底部有导航栏了<br>3.修改导航的文字和图标和颜色<br>（1）图标修改<br>文字很好修改，修改图标要去vant组件库找，vant2文档-基础组件-icon图标，右边有好多的小图标，想要换成哪个就把上面标签icon&#x3D;”值”的值改成图标下面的值即可<br>这里我没按视频的，自己选了几个好看的用<br>（2）颜色修改<br>颜色的修改还是看vant2文档，icon 的 color 属性用来设置图标的颜色，但是这个我试了没用，跟着视频走，不要去icon图标里找，去tabbar导航栏找-自定义颜色<br>文档<van-tabbar v-model="active" active-color="#ee0a24" inactive-color="#000"><br>其中active-color是图标激活时的颜色，inactive-color是图标未激活时的颜色<br>以上三步完成后的底部导航</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    &lt;van-tabbar  active-color=<span class="string">&quot;#f8612c&quot;</span> inactive-color=<span class="string">&quot;#000&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;flower-o&quot;</span> &gt;</span>首页<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;shop-collect-o&quot;</span>&gt;</span>分类页<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;gift-o&quot;</span> &gt;</span>购物车<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;user-circle-o&quot;</span>&gt;</span>我的<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">&lt;/van-tabbar&gt;</span><br></pre></td></tr></table></figure>
<hr>
导航栏完成后，根据导航栏配置二级路由：配置导航链接和路由出口
1.在架子layout文件夹里面建立四个.vue文件，代表四个导航栏出口目标
home.vue;category.vue;cart.vue;user.vue
四个文件夹配置最基本的代码，如
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>   User<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;UserIndex&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
2.在router-index.js中配置二级路由
修改添加以下代码，注意关键词children和书写格式
ctrl+D可以选同一行的两个相同部分同时修改，cv后修改名字很好用
（再加一行代码redirect: '/home', // 重定向，做一点优化，让访问/的时候访问Home）

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 二级路由</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/layout/home&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Category</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/layout/category&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Cart</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/layout/cart&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/layout/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,</span><br><span class="line">    <span class="comment">// 下面这里首页架子layout因为一点进来就是，所以用/</span></span><br><span class="line">    <span class="comment">//修改增加的主要是下面这些</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Layout</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="comment">// 重定向，做一点优化，让访问/的时候访问Home</span></span><br><span class="line">      <span class="attr">childeren</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/category&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Category</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/cart&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Cart</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>, <span class="attr">component</span>: <span class="title class_">User</span> &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//...后面的一级路由没变动，省略</span></span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>3.给标签栏配置路由模式<br>vant2文档-tabbar标签栏-路由模式文档中：<br>标签栏支持路由模式，用于搭配 vue-router 使用。路由模式下会匹配页面路径和标签的 to 属性，并自动选中对应的标签<br>核心：在导航标签后面加route！！不是router!!!，在小图标里面加to地址</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  &lt;van-tabbar  route active-color=<span class="string">&quot;#f8612c&quot;</span> inactive-color=<span class="string">&quot;#000&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;flower-o&quot;</span> &gt;</span>首页<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">&quot;/category&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;shop-collect-o&quot;</span>&gt;</span>分类页<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">&quot;/cart&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;gift-o&quot;</span> &gt;</span>购物车<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">&quot;/user&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;user-circle-o&quot;</span>&gt;</span>我的<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span></span><br><span class="line">&lt;/van-tabbar&gt;</span><br></pre></td></tr></table></figure>
<p>然后配置路由出口，写在导航栏上面，这样内容在上导航栏在下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>
<p>（如果一点击导航栏不显示跳转后页面的内容而且底部导航栏也不见了，那么是router-index.js里面的children拼写错误）</p>
<h3 id="登录页"><a href="#登录页" class="headerlink" title="登录页"></a>登录页</h3><h4 id="登录页静态布局"><a href="#登录页静态布局" class="headerlink" title="登录页静态布局"></a>登录页静态布局</h4><h5 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h5><ol>
<li>在src下新建文件夹style-common.less重置默认样式<br>以后样式都放在style文件夹<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 重置默认样式</span></span><br><span class="line">* &#123;</span><br><span class="line">  <span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">  box-<span class="attr">sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文字溢出省略号</span></span><br><span class="line">.<span class="property">text</span>-ellipsis-<span class="number">2</span> &#123;</span><br><span class="line">  <span class="attr">overflow</span>: hidden;</span><br><span class="line">  -webkit-line-<span class="attr">clamp</span>: <span class="number">2</span>;</span><br><span class="line">  text-<span class="attr">overflow</span>: ellipsis;</span><br><span class="line">  <span class="attr">display</span>: -webkit-box;</span><br><span class="line">  -webkit-box-<span class="attr">orient</span>: vertical;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>main.js中导入应用<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/styles/common.less&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>将图片素材放到assets文件夹里面</li>
</ol>
<h5 id="登录页静态布局编写"><a href="#登录页静态布局编写" class="headerlink" title="登录页静态布局编写"></a>登录页静态布局编写</h5><p>1.头部组件说明(vant-NavBar组件)<br>在views文件夹-login文件夹-index.vue中编写，登录可以分为t头部和主体两部分，头部用到组件vant-NavBar<br>去官方文档-导航组件-NavBar<br>先引入-到utils中导入NavBar<br>然后在login-index.vue中使用，用什么导入什么，这里我导入的是</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;van-nav-bar</span><br><span class="line">  title=<span class="string">&quot;用户登录&quot;</span></span><br><span class="line">  left-arrow @click-left=<span class="string">&quot;$router.go(-1)&quot;</span>&gt;&lt;/van-nav-bar&gt;</span><br></pre></td></tr></table></figure>
<p>添加一个点击左边会跳转到上一级路由的逻辑<br>然后运行，进入<a href="http://localhost:8080/#/login">http://localhost:8080/#/login</a>  可以看到上方有导航栏了，点击左上角箭头能返回<br>2.通用样式覆盖<br>希望以后所有的页面左上角的箭头都能变成蓝色的这个小箭头，把他变成通用样式<br>页面打开，F12看小箭头的类van-icon van-icon-arrow-left van-nav-bar__arrow<br>其中van-nav-bar__arrow是这个小箭头的样式<br>回到刚才的styles-common.less中配置<br>注意是写道less文件不是写到.css文件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//配置导航左边箭头的通用样式，加两个类的权重让它的权重更高一些</span></span><br><span class="line">.<span class="property">van</span>-nav-bar&#123;</span><br><span class="line"> .<span class="property">van</span>-nav-bar__arrow&#123;</span><br><span class="line">    <span class="attr">color</span>:#631ee4;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.其他静态结构编写<br>copy的文件代码</p>
<h4 id="登录页逻辑功能-重难点"><a href="#登录页逻辑功能-重难点" class="headerlink" title="登录页逻辑功能(重难点)"></a>登录页逻辑功能(重难点)</h4><p>在以后项目中，通常将axios请求方法封装到request模块<br>理解：使用 axios 来请求后端接口<br>一般都会对 axios 进行 一些配置(比如:配置基础地址，请求响应拦截器等)<br>所以项目开发中,都会对 axios 进行基本的二次封装,单独封装到一个request 模块中,便于维护使用<br>再理解：后面代码把axios用instance创建实例，这样这目前的功能是instance这个实例带来的，后续找别的接口再封装新的实例，这样各个实例各个接口各个功能之间不会被污染，创建后的配置配置的是创建出来的实例<br>接口文档：<a href="https://apifox.com/apidoc/shared-12ab6b18-adc2-444c-ad11-0e60f5693f66/doc-2221080">https://apifox.com/apidoc/shared-12ab6b18-adc2-444c-ad11-0e60f5693f66/doc-2221080</a></p>
<p>演示地址：<a href="http://cba.itlike.com/public/mweb/#/">http://cba.itlike.com/public/mweb/#/</a></p>
<p>基地址：<a href="http://cba.itlike.com/public/index.php?s=/api/">http://cba.itlike.com/public/index.php?s=/api/</a><br>方法：<br>1.安装axios<br>npm i –save axios –legacy-peer-deps<br>2.在utils文件夹中新建request.js文件，根据axios官方文档进行导入和创建实例<br>axios官方文档<br><a href="https://www.axios-http.cn/docs/instance">https://www.axios-http.cn/docs/instance</a><br>把axios里面实例的代码贴到文件夹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://some-domain.com/api/&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">1000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;<span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;foobar&#x27;</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后再根据项目修改基础地址和超时时间<br>3.创建实例，添加配置，导出实例<br>根据官方文档cv代码，然后修改axios为上面创建的Instance，并且给axios剥一层.data<br>官方剥下来的代码和修改后的说明，完整request.js文件代码如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// 创建axios实例，对创建出来的实例进行自定义配置</span></span><br><span class="line"><span class="comment">// 这样的好处是不会污染原始的axios实例</span></span><br><span class="line"><span class="comment">// 创建实例代码在axios官方文档cv</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// baseURL看接口文档的基础地址更改</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://smart-shop.itheima.net/index.php?s=/api&#x27;</span>,</span><br><span class="line">  <span class="comment">// 超时时间，这里是5s</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;X-Custom-Header&#x27;</span>: <span class="string">&#x27;foobar&#x27;</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上面创建，下面写自定义配置：请求，响应拦截器</span></span><br><span class="line"><span class="comment">// axios官方文档拦截器代码cv</span></span><br><span class="line"><span class="comment">// 官方代码的拦截器是axios的拦截器</span></span><br><span class="line"><span class="comment">// 这里我们希望拦截器作用到上面创建的instance上面</span></span><br><span class="line"><span class="comment">// 所以要把官方文档拦截器中的axios. 改成instance.</span></span><br><span class="line"><span class="comment">// 然后再格局项目修改URL基地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 对请求错误做些什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="comment">// 2xx 范围内的状态码都会触发该函数。</span></span><br><span class="line">  <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">  <span class="comment">// 下面这行最后加一行.data，因为默认axio会多包装一层data，不好处理，要响应拦截器处理一下</span></span><br><span class="line">  <span class="keyword">return</span> response</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 超出 2xx 范围的状态码都会触发该函数。</span></span><br><span class="line">  <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出配置好的实例</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance</span><br></pre></td></tr></table></figure>
<p>4.进行测试<br>在login.vue文件进行测试<br>在script里连接接口进行测试，代码如下</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 导入axios文件</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;LoginPage&#x27;</span>,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">created</span> () &#123;</span><br><span class="line">    <span class="comment">// 去接口文档10.图像验证码找接口地址</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/captcha/image&#x27;</span>)</span><br><span class="line">    <span class="comment">// 如果能成功打印出结果代表axios连接测试成功</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">    <span class="comment">// 运行项目，去/login页面看控制台是否有返回的结果</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>！！！问题解决<br>然后运行，进入login页面看控制台，我的开始报错了，看别人发的，跨域问题，在封装axios里，把设置秒数下面的headers删掉就好啦<br>就是这句代码 headers: { ‘X-Custom-Header’: ‘foobar’ }</p>
<h4 id="图形验证码功能进一步完成"><a href="#图形验证码功能进一步完成" class="headerlink" title="图形验证码功能进一步完成"></a>图形验证码功能进一步完成</h4><p>在上面测试axios的时候使用的是获取图形验证码完成的，这里继续上面的实现图形验证码功能<br>理解：图形验证码本质是从后台请求回来的图片，用户在左边输入，如果和后台的匹配，那么会继续提供服务，否则不提供服务。本质是强制人工服务，确保你是真人，防御机器攻击<br>功能：输入正确的图形验证码后，才会发送短信验证码，接口文档的11是获取短信验证码，有三个参数：captchaCode（图形验证码）captchaKey（图形验证码key）mobile（接收验证码手机）<br>做法理解：<br>1.动态将请求回来的base64图片解析渲染出来<br>2.点击验证码图片盒子会刷新验证码<br>理解参数：key是图形验证码的唯一标识，后台根据图形验证码和key比对确定唯一的正确结果，然后才会给对应的手机号发送验证码<br>做法实现：<br>1.去login-index.vue中的增加数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 导入axios文件</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;LoginPage&#x27;</span>,</span><br><span class="line">  <span class="comment">// 图形验证码输入正确后发短信验证码</span></span><br><span class="line">  <span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">picCode</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 用户输入的图形验证码</span></span><br><span class="line">      <span class="attr">picKey</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 请求完毕的图形验证码的唯一标识</span></span><br><span class="line">      <span class="attr">picUrl</span>: <span class="string">&#x27;&#x27;</span><span class="comment">// 用来做渲染的存储请求渲染的图片地址</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">created</span> () &#123;</span><br><span class="line">    <span class="comment">// 下面注释掉的是测试用的代码</span></span><br><span class="line">    <span class="comment">// 去接口文档10.图像验证码找接口地址</span></span><br><span class="line">    <span class="comment">// const res = await request.get(&#x27;/captcha/image&#x27;)</span></span><br><span class="line">    <span class="comment">// 如果能成功打印出结果代表axios连接测试成功</span></span><br><span class="line">    <span class="comment">// console.log(res)</span></span><br><span class="line">    <span class="comment">// 运行项目，去/login页面看控制台是否有返回的结果</span></span><br><span class="line">  <span class="comment">//* *********************** */</span></span><br><span class="line">    <span class="comment">// 下面这些是实现图形验证码输入正确后发短信验证码的部分</span></span><br><span class="line">    <span class="comment">// 获取图形验证码</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getPicCode</span>()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// 获取图形验证码</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getPicCode</span> () &#123;</span><br><span class="line">      <span class="comment">// 下面获取后端data</span></span><br><span class="line">      <span class="comment">// const res = await request.get(&#x27;/captcha/image&#x27;)</span></span><br><span class="line">      <span class="comment">// console.log(res)</span></span><br><span class="line">      <span class="comment">// 解构一下直接获取数据</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; base64, key &#125; &#125; = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/captcha/image&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picUrl</span> = base64 <span class="comment">// 存储地址</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picKey</span> = key <span class="comment">// 存储唯一标识</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2.修改上面的页面，验证码图片不要用写死的图片地址，改为后台传过来的托地址</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 原本是这行写死的图片，现在要改为后台传过来的图片地址</span></span><br><span class="line"><span class="comment">&lt;img src=&quot;@/assets/code.png&quot; alt=&quot;&quot;&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;picUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>！！！问题解决：<br>这里成功后打开页面能显示出验证码图片，同时刷新会获得不同的验证码图片<br>如果没有获取到图片检查发现是没有获得picUrl数据，检查配置文件request.js，可能是这里没有.data&#x2F;&#x2F; 下面这行最后加一行.data，因为默认axio会多包装一层data，不好处理，要响应拦截器处理一下<br>  return response.data<br>3. 改进：动态渲染图形验证码，并且点击图片时要重新刷新验证码<br>注册一个点击事件即可</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;picUrl&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;picUrl&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getPicCode&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/loginPic1.png" alt="成功后的注册页面截图"></p>
<h4 id="api-接口模块-封装图片验证码接口"><a href="#api-接口模块-封装图片验证码接口" class="headerlink" title="api 接口模块 -封装图片验证码接口"></a>api 接口模块 -封装图片验证码接口</h4><p>目标:将请求封装成方法，统一存放到api模块，与页面分离<br>理解：前面的login-index.js文件后续接口请求越来越多可能有请求A,请求B，但是后续的其他页面可能用到请求A，请求B，而且一个页面中写多个请求不好看，所以要对接口请求进行封装（带入后端课的模块化封装代码理解，一个意思）<br>目的：写一个API模块存放封装好的请求函数（里面有请求A函数，请求B函数….），其他页面直接拿函数调用即可<br>做法：<br>1.在api文件夹下建立login.js（存放登录相关的接口请求）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 此处用于存放所有登录相关的接口请求</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request.js&#x27;</span></span><br><span class="line"><span class="comment">// 1.获取图形验证码</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getPiccode</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="comment">// return必不可少!!!!</span></span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/captcha/image&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.修改login-index.vue代码<br>首先把之前导入的axios接口注释掉，改为从login.js中按需导入需要的函数getPiccode()</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入axios文件</span></span><br><span class="line"><span class="comment">// import request from &#x27;@/utils/request.&#x27;</span></span><br><span class="line"><span class="comment">// 封装后上面的代码放到login.js里面了</span></span><br><span class="line"><span class="comment">// 改为按需导入封装好的函数</span></span><br><span class="line"><span class="comment">// getPiccode名字冲突没关系，这个是全局的，下面是实例的，用的时候如果是this.getPiccode就是实例的，没有this.就是全局的</span></span><br><span class="line"><span class="keyword">import</span> &#123; getPiccode &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/login&#x27;</span></span><br></pre></td></tr></table></figure>
<p>然后在代码中methods部分把之前的从axios接口获取数据的部分改为导入的函数getPiccode()</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="comment">// 获取图形验证码</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getPicCode</span> () &#123;</span><br><span class="line">      <span class="comment">// 下面获取后端data</span></span><br><span class="line">      <span class="comment">// const res = await request.get(&#x27;/captcha/image&#x27;)</span></span><br><span class="line">      <span class="comment">// console.log(res)</span></span><br><span class="line">      <span class="comment">// 解构一下直接获取数据</span></span><br><span class="line">      <span class="comment">// 封装后：调用全局的getPiccode()函数</span></span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; base64, key &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getPiccode</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picUrl</span> = base64 <span class="comment">// 存储地址</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picKey</span> = key <span class="comment">// 存储唯一标识</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">picUrl</span>)<span class="comment">// 检查是否获取到了图片</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="toast轻提示"><a href="#toast轻提示" class="headerlink" title="toast轻提示"></a>toast轻提示</h4><p>理解：用户输入正确的验证码后，该输入手机号然后获取短信验证码了，但是手机号可能输入错误，alter弹窗不好看，toast轻提示更好。不管验证码发送失败或成功，都应该给到用户一个小提醒（在页面中弹出一个黑色半透明的小提示）<br>补充：toast不止是能进行文本提示，将来添加loading小动画效果也都可以，各种语法在官方文档都有<br>方法：<br>先根据vant文档进行注册安装，然后再使用<br>两种使用方法：<br>1.导入调用（组件内或非组件中均可以用）<br>2.通过this直接调用不需要导入（必须在组件内，本质是把方法注册挂载到了vue原型上）</p>
<hr>
操作：
1.vant2官网文档-基础组件-toast轻提示
先引入注册,utils文件夹-vant-ui.js文件中引入注册
2.使用方法1（导入调用）
这种方法组件内或非组件中均可以用，非常灵活
在login-index.vue中导入,调用直接Toast('提示内容')即可

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Toast</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"><span class="comment">//在methods中图形验证码加载成功后添加轻提示测试</span></span><br><span class="line">  <span class="comment">// 获取图形验证码</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">getPicCode</span> () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; base64, key &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getPiccode</span>()</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picUrl</span> = base64 <span class="comment">// 存储地址</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">picKey</span> = key <span class="comment">// 存储唯一标识</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">picUrl</span>)<span class="comment">// 检查是否获取到了图片</span></span><br><span class="line">      <span class="title class_">Toast</span>(<span class="string">&#x27;测试导入调用轻提示;获取图形验证码成功啦&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/loginQingtishi1.png" alt="alt text"><br>2.使用方法2（只能在组件内直接调用，不需要导入）<br>注释掉刚才方法1添加的所有代码，在刚才Toast(‘’)的位置改成this.$toast(‘提示内容’)即可<br>必须要能拿到组件实例才能调this.$toast(‘提示内容’)<br>成功后是这样的<img src="/postImgs/oldImg/loginQingtishi2.png" alt="alt text"></p>
<h4 id="短信验证倒计时-短信验证请求"><a href="#短信验证倒计时-短信验证请求" class="headerlink" title="短信验证倒计时+短信验证请求"></a>短信验证倒计时+短信验证请求</h4><p>理解：在点击获取短信验证码成功后，按钮地方变成灰色的倒计时60秒，如：重新发送(28)秒。在倒计时之前要进行一些校验处理，比如只有图片验证码正确，手机号填写正确，才会发送验证码同时才会进行倒计时。通常前面的校验完成后会发送请求，这里同时要封装短信验证请求接口，给用户发送成功的轻提示（此项目短信验证码默认为246810）<br>实现分析：</p>
<h5 id="点击按钮，实现倒计时效果"><a href="#点击按钮，实现倒计时效果" class="headerlink" title="点击按钮，实现倒计时效果"></a>点击按钮，实现倒计时效果</h5><p>由于倒计时从60开始每隔一秒-1，到0之后还要恢复到60，所以需要一个变量总秒数存60，还要一个变量代表当前秒数<br>1.在data中增加两个个变量<br>totalSecond:60&#x2F;&#x2F;倒计时总秒数<br>second:60&#x2F;&#x2F;当前秒数。默认相等，开定时器对它–<br>2.给“获取验证码”按钮添加点击事件，只有当两个变量相对都是60的时候才展示按钮和这个文字</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;getCode&quot;</span>&gt;</span>&#123;&#123;second===totalSecond?&#x27;获取验证码&#x27;:second+&#x27;秒后重新发送&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在mehods中提供getCode方法<br>先data中增加变量timer:null &#x2F;&#x2F;定时器id</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取短信验证码</span></span><br><span class="line"><span class="title function_">getCode</span> () &#123;</span><br><span class="line">  <span class="comment">//先判断定时器是否开着，切两个变量都等于60才可以开启倒计时</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">timer</span>&amp;&amp;<span class="variable language_">this</span>.<span class="property">second</span>===<span class="variable language_">this</span>.<span class="property">totalSecond</span>)&#123;</span><br><span class="line">  <span class="comment">// 开启倒计时效果</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">timer</span>=<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">second</span>--</span><br><span class="line">  <span class="comment">//小于1后停止定时器并归位</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">second</span>&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span>=<span class="literal">null</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">second</span>=<span class="variable language_">this</span>.<span class="property">totalSecond</span></span><br><span class="line">  &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后打开login页面能够实现点击按钮后开始倒计时的效果<br>3.最后记得在methods下面写销毁：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">destroyed</span> () &#123;</span><br><span class="line">  <span class="comment">// 离开页面清楚定时器</span></span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="验证码请求校验处理"><a href="#验证码请求校验处理" class="headerlink" title="验证码请求校验处理"></a>验证码请求校验处理</h5><p>理解：在倒计时之前的校验处理（对手机号，验证码），这两部分不能为空，而且手机号格式要正确，验证码要和图片匹配<br>实现：<br>1.先提供两个变量并给输入框 v-model 绑定变量</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 手机号</span></span><br><span class="line">    <span class="attr">picCode</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// 图形验证码</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">&lt;input v-model=&quot;mobile&quot; class=&quot;inp&quot; maxlength=&quot;11&quot; placeholder=&quot;请输入手机号码&quot; type=&quot;text&quot;&gt;</span><br><span class="line">&lt;input v-model=&quot;picCode&quot; class=&quot;inp&quot; maxlength=&quot;5&quot; placeholder=&quot;请输入图形验证码&quot; type=&quot;text&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>2.封装一个方法判断是否合法，同时添加轻提示：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// 校验电话和图形验证码输入框内容</span></span><br><span class="line"><span class="title function_">validFn</span> () &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^1[3-9]\d&#123;9&#125;$/</span>.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">mobile</span>)) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$toast(<span class="string">&#x27;请输入正确的手机号&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/^\w&#123;4&#125;$/</span>.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">picCode</span>)) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.$toast(<span class="string">&#x27;请输入正确的图形验证码&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.完善倒计时函数，请求倒计时前进行电话号和验证码校验</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取短信验证码</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getCode</span> () &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">validFn</span>()) &#123;</span><br><span class="line">    <span class="comment">//如果没通过没必要往下走了直接return，通过会继续走</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//后面代码不变</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/loginPic4.png" alt="alt text"></p>
<h5 id="封装调用短信验证请求接口，发送请求添加提示"><a href="#封装调用短信验证请求接口，发送请求添加提示" class="headerlink" title="封装调用短信验证请求接口，发送请求添加提示"></a>封装调用短信验证请求接口，发送请求添加提示</h5><p>去接口文档找-11登录-获取短信验证码</p>
<ol>
<li>在api-login.js中封装接口 <figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取短信验证码</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getMsgCode</span> = (<span class="params">captchaCode, captchaKey, mobile</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">post</span>(<span class="string">&#x27;/captcha/sendSmsCaptcha&#x27;</span>, &#123;</span><br><span class="line">    <span class="comment">//下面的和上面的地址都根据接口文档写</span></span><br><span class="line">    <span class="attr">form</span>: &#123;</span><br><span class="line">      captchaCode,</span><br><span class="line">      captchaKey,</span><br><span class="line">      mobile</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
同时记得在login-index.vue中导入函数<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getPiccode, getMsgCode &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/login&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>调用接口，添加发送请求和轻提示<br>在判断定时器可开始后面，开启倒计时前面增加发送获取短信验证码的请求，和发送成功的轻提示<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取短信验证码</span></span><br><span class="line"><span class="comment">//！！！！！！！！！这里加async了！！！！！！！！！！！！！！！！</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">getCode</span> () &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">validFn</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">timer</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">second</span> === <span class="variable language_">this</span>.<span class="property">totalSecond</span>) &#123;</span><br><span class="line">  <span class="comment">// 在这里，判断定时器可开始后面，开启倒计时前面增加发送获取短信验证码的请求，和发送成功的轻提示</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 这两行注释掉的是验证代码，检查有没有从接口获取成功，出现status:200就是成功</span></span><br><span class="line">   <span class="comment">// const res = await getMsgCode(this.picCode, this.picKey, this.mobile)</span></span><br><span class="line">   <span class="comment">// console.log(res)</span></span><br><span class="line">   <span class="keyword">await</span> <span class="title function_">getMsgCode</span>(<span class="variable language_">this</span>.<span class="property">picCode</span>, <span class="variable language_">this</span>.<span class="property">picKey</span>, <span class="variable language_">this</span>.<span class="property">mobile</span>)</span><br><span class="line">   <span class="variable language_">this</span>.$toast(<span class="string">&#x27;短信验证码发送成功，请注意查收&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 开启倒计时</span></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="登录功能"><a href="#登录功能" class="headerlink" title="登录功能"></a>登录功能</h4><h5 id="阅读接口文档，封装登录接口"><a href="#阅读接口文档，封装登录接口" class="headerlink" title="阅读接口文档，封装登录接口"></a>阅读接口文档，封装登录接口</h5><p>接口文档-12.手机验证码登录<br>1.在login.js中封装方法<br>&#x2F;&#x2F; 验证码登录接口</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">codeLogin</span> = (<span class="params">mobile, smsCode</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">post</span>(<span class="string">&#x27;/passport/login&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">form</span>: &#123;</span><br><span class="line">      <span class="attr">isParty</span>: <span class="literal">false</span>,c</span><br><span class="line">      mobile,</span><br><span class="line">      <span class="attr">partyData</span>: &#123;&#125;,</span><br><span class="line">      smsCode</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="登录前的校验（手机号，图形验证码，短信验证码）"><a href="#登录前的校验（手机号，图形验证码，短信验证码）" class="headerlink" title="登录前的校验（手机号，图形验证码，短信验证码）"></a>登录前的校验（手机号，图形验证码，短信验证码）</h5><p>2.去.vue中调用接口，给登录按钮注册点击事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//记得先导入</span></span><br><span class="line"><span class="keyword">import</span> &#123; getPiccode, getMsgCode, codeLogin &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//添加data</span></span><br><span class="line"><span class="attr">msgCode</span>: <span class="string">&#x27;&#x27;</span><span class="comment">// 短信验证码</span></span><br><span class="line"><span class="comment">//methods添加</span></span><br><span class="line">    <span class="comment">// 登录校验</span></span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span> () &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">validFn</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="regexp">/^\d&#123;6&#125;$/</span>.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">msgCode</span>)) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.$toast(<span class="string">&#x27;请输入正确的手机验证码&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//调用方法，发送给请求 ，成功添加提示并跳转</span></span><br><span class="line">      <span class="comment">// 测试，控制台看是不是200，，但我这里没成功，测试代码有问题，不测试直接能正常跑</span></span><br><span class="line">      <span class="comment">// const res2 =await codeLogin(this.mobile, this.msgCode)</span></span><br><span class="line">      <span class="comment">// console(res2)</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">codeLogin</span>(<span class="variable language_">this</span>.<span class="property">mobile</span>, <span class="variable language_">this</span>.<span class="property">msgCode</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>)  <span class="comment">// 成功后跳转到首页</span></span><br><span class="line">      <span class="variable language_">this</span>.$toast(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<p>在写登录功能之前都挺快挺好的，我跟着写完登录功能后开始变得特别卡，十多秒才加载出来图片验证码，输入后登录说我验证码输出错误，无法成功登录<br>！！！！找到了一点原因，看报错信息是我没获取到输入的短信验证码，我没有给输入框做绑定，前面把下面这行代码丢掉了！！</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;inp&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;msgCode&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;6&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入短信验证码&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>但是还在在报错无法登录呢，控制台的报错没看懂，而且有时候能加载出图形验证码有时候不行了5s会超时我改成了50s，现在很卡<br>！！成功了，是我的登录功能的测试代码有问题，把测试代码注释掉就能正常跑了而且很快，不卡也不报错了<br>成功后是这样的<img src="/postImgs/oldImg/loginPic8.png" alt="alt text"></p>
<h3 id="响应拦截器统一处理错误提示（在最后有问题！！）"><a href="#响应拦截器统一处理错误提示（在最后有问题！！）" class="headerlink" title="响应拦截器统一处理错误提示（在最后有问题！！）"></a>响应拦截器统一处理错误提示（在最后有问题！！）</h3><p>理解：每次请求都有成功和失败的可能，在代码中一般都是判断验证是否成功，而失败后也需要错误提示，希望通过响应拦截器把失败的情况统一处理<br>响应拦截器是拿到数据的第一个数据流转站，可以在这里面统一处理错误情况<br>再理解：上面的图形验证码部分已写的只判断了验证码格式，没有判断验证码和图片上的内容是否一致，这个事情是后端返回的，在控制台-网络-Response中后台有返回结果，返回的status&#x3D;200说明一致，返回500说不匹配，message消息也有提示<br>现在希望这些不在页面中额外处理，而是通过拦截器进行判断：如果status不是200那么抛出一个错误，await只会等待成功的正确的promise</p>
<h4 id="添加响应拦截器"><a href="#添加响应拦截器" class="headerlink" title="添加响应拦截器"></a>添加响应拦截器</h4><p>那么要在resquest.js中添加响应拦截器，获取返回的数据，用结果做判断</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">  <span class="comment">// 2xx 范围内的状态码都会触发该函数。</span></span><br><span class="line">  <span class="comment">// 对响应数据做点什么</span></span><br><span class="line">  <span class="keyword">const</span> res = response.<span class="property">data</span></span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">status</span> !== <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="title class_">Toast</span>(res.<span class="property">message</span>)</span><br><span class="line">    <span class="comment">// 抛出一个错误额的promise</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res.<span class="property">message</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="comment">// 超出 2xx 范围的状态码都会触发该函数。</span></span><br><span class="line">  <span class="comment">// 对响应错误做点什么</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>！！！我的这里还是不对的，根提供的标准代码比对找不出问题<br>现在的情况是，有时候进去控制台会报错验证码图片出不来，有时候就能正常运行。<br>不管我输入的验证码和图片是否匹配都会提示短信发送成功和进行60s倒计时。<br>只有输入完246810验证码点击登录的时候，才会判断我前面输入的图片验证码和图片是否匹配，而且提示的也不是中文是一堆英文东西<br>有时候不管输入的对不对都出来一堆英文，网络-响应-看不到信息<br>问题是批片验证码匹配应该作用在发送短信验证码这里而不是登录这里啊，找半天找不出错误原因，接口文档看了都对应着<br>现在是保留上面的问题但是如果图片验证和短信验证码都输入正确的话能够成功登录<br>！！主要问题还是不能判断图片验证码输入正确与否后提供短信验证码，短信验证码一直能提供！！！</p>
<h3 id="登录页逻辑功能完善"><a href="#登录页逻辑功能完善" class="headerlink" title="登录页逻辑功能完善"></a>登录页逻辑功能完善</h3><h4 id="登录权证信息存储"><a href="#登录权证信息存储" class="headerlink" title="登录权证信息存储"></a>登录权证信息存储</h4><p>理解：在登录成功后，返回的data数据里面有token和userID的信息，这些是登录权证，很重要，是token是请求一些接口时候必须携带的凭证，如果没有携带接口请求可能有问题，userID是用户的唯一标识。所以这两个东西都应该存储起来，以前是存储到本地，但是为了方便，工作中更应该存储到vuex里面米娜，这样是响应式，而且任何组件中都可以非常快速地拿到存储的信息，好获取<br>在这里我们把登录返回成功的登录权证以对象的形式存储到vuex中的user模块<br>步骤：构建user模块&#x3D;》挂载到vuex&#x3D;》提供共mutatios&#x3D;》在页面中commit调用</p>
<h5 id="登录权证信息存储操作"><a href="#登录权证信息存储操作" class="headerlink" title="登录权证信息存储操作"></a>登录权证信息存储操作</h5><p>1.构建user模块<br>store文件夹-新建modules文件夹-user.js文件<br>注意，vuex中状态的提供state可以写成对象state(){}也可以写成冒号state:{}，为了保证数据独立性通常写成对象</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//回顾一下：state提供数据；utations提供数据修改操作；actions提供异步；getters提供基于state派生出来的属性</span></span><br><span class="line">  <span class="title function_">state</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="comment">// 个人权证相关</span></span><br><span class="line">      <span class="attr">userInfo</span>: &#123;</span><br><span class="line">        <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">userId</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.挂载到 vuex 上<br>在store文件夹-index.js文件中挂载</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    user,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>挂载成功后就可以在控制台看了<br>成功后是这样的<img src="/postImgs/oldImg/loginPic9.png" alt="alt text"><br>上面user旁边的namespaced这个东西，有它代表开启了命名空间，说明它和别的是独立的（否则就是公用的）</p>
<p>3.提供一个存储个人权证信息的mutations<br>user.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="comment">// 所有mutations的第一个参数，都是state</span></span><br><span class="line">  <span class="title function_">setUserInfo</span> (state, obj) &#123;</span><br><span class="line">    state.<span class="property">userInfo</span> = obj</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4.在login-index.vue页面中commit调用<br>在登录成功拿到res后，基于res进行提交</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 登录按钮（校验 &amp; 提交）</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">login</span> () &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">validFn</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">codeLogin</span>(<span class="variable language_">this</span>.<span class="property">mobile</span>, <span class="variable language_">this</span>.<span class="property">msgCode</span>)</span><br><span class="line">  <span class="comment">//下面这一行是新增的</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;user/setUserInfo&#x27;</span>, res.<span class="property">data</span>)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">  <span class="variable language_">this</span>.$toast(<span class="string">&#x27;登录成功&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/loginPic9.png" alt="alt text"></p>
<h4 id="vuex持久化处理"><a href="#vuex持久化处理" class="headerlink" title="vuex持久化处理"></a>vuex持久化处理</h4><p>理解：刚才已经能够把用户信息存入vuex中，但问题是一刷新信息就会消失，要想让数据一直存在，要封装storage存储模块，利用本地存储进行持久化处理<br>在storage模块封装函数，每次用的时候只需要调用，能够简化代码</p>
<h5 id="vuex持久化处理操作"><a href="#vuex持久化处理操作" class="headerlink" title="vuex持久化处理操作"></a>vuex持久化处理操作</h5><p>utils文件夹-新建storage.js文件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 约定一个通用的键名</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">INFO_KEY</span> = <span class="string">&#x27;shopping_info&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取个人信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> defaultObj = &#123; <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">userId</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">INFO_KEY</span>)</span><br><span class="line">  <span class="keyword">return</span> result ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(result) : defaultObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置个人信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setInfo</span> = (<span class="params">obj</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">INFO_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除个人信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">removeInfo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="variable constant_">INFO_KEY</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.在user.js中，存入vuex中的同时存入到本地，刷新页面后虽然vuex的丢失了，但是可以去本地读取信息，来初始化vuex的起始数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//首先导入方法</span></span><br><span class="line"><span class="keyword">import</span> &#123; getInfo, setInfo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"><span class="comment">//然后增加userInfo: getInfo()和setInfo(obj)</span></span><br><span class="line"><span class="title function_">state</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 个人权证相关</span></span><br><span class="line">    <span class="comment">//  userInfo: &#123;</span></span><br><span class="line">    <span class="comment">//    token: &#x27;&#x27;,</span></span><br><span class="line">    <span class="comment">//    userId: &#x27;&#x27;</span></span><br><span class="line">      <span class="comment">//  &#125;</span></span><br><span class="line">      <span class="comment">// 上面的不要了，改进为从本地信息获取vuex的初始化信息</span></span><br><span class="line">      <span class="attr">userInfo</span>: <span class="title function_">getInfo</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// 所有mutations的第一个参数，都是state</span></span><br><span class="line">    <span class="title function_">setUserInfo</span> (state, obj) &#123;</span><br><span class="line">      state.<span class="property">userInfo</span> = obj</span><br><span class="line">      <span class="comment">// 存入vuex的同时存入本地</span></span><br><span class="line">      <span class="title function_">setInfo</span>(obj)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="添加请求loading效果"><a href="#添加请求loading效果" class="headerlink" title="添加请求loading效果"></a>添加请求loading效果</h4><p>理解：有时候网不好，所以一次请求的结果可能需要一段时间后才能回来，此时给用户添加loading提示会更友好<br>好处：<br>1.节流处理：防止用户再一次请求还没回来之前，多次进行点击，发送无效请求，有利于网站性能<br>2.友好提示：告知用户，目前是在加载中，请耐心等待，用户体验会更好</p>
<h5 id="loading操作"><a href="#loading操作" class="headerlink" title="loading操作"></a>loading操作</h5><p>1.在请求拦截器中，每次请求，打开Loading<br>utils-request.js请求拦截器中写<br>在vant2文档-Toast轻提示-右侧加载提示，把文档加载提示的代码丢到请求拦截器中，同时根据文档配置一下loading图标</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  <span class="comment">// 开启loading，禁止背景点击 (节流处理，防止多次无效触发)</span></span><br><span class="line">  <span class="title class_">Toast</span>.<span class="title function_">loading</span>(&#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&#x27;加载中...&#x27;</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// 禁止背景点击</span></span><br><span class="line">    <span class="attr">loadingType</span>: <span class="string">&#x27;spinner&#x27;</span>, <span class="comment">// 配置loading图标</span></span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span> <span class="comment">// 不会自动消失，如果不配置默认两秒自动消失</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/loginPic11.png" alt="alt text"><br>因为一进入页面就会触发获取验证码图片的请求所以会触发加载中，而设置了duration: 0 不会自动消失，如果不配置默认两秒自动消失</p>
<p>2.在响应拦截器收到信息之后关闭掉loading，还是去官网找文档-API中有方法-Toast.clear关闭提示</p>
<p>注意：Toast默认是单例模式，后面的Toast调用了会将前一个Toast效果覆盖，同时只会存在一个toast效果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在响应拦截器中</span></span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 正确情况，直接走业务核心逻辑，清除loading效果</span></span><br><span class="line">    <span class="title class_">Toast</span>.<span class="title function_">clear</span>()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="页面访问拦截-路由前置守卫"><a href="#页面访问拦截-路由前置守卫" class="headerlink" title="页面访问拦截-路由前置守卫"></a>页面访问拦截-路由前置守卫</h4><p>理解：对于这个项目来说，大部分页面游客都可以直接访问，但是有些支付页面，订单页面这种，和用户强绑定的页面，游客不可以访问，只有登录后的用户才可以访问，这时候就需要做拦截处理</p>
<p>路由导航守卫文档地址 - <a href="https://v3.router.vuejs.org/zh/guide/advanced/navigation-guards.html">全局前置守卫</a></p>
<p>1.所有的路由一旦被匹配到，都会先经过全局前置守卫<br>2.只有全局前置守卫放行，才会真正解析渲染组件，才能看到页面内容<br>语法：官网文档有<br>当一个导航触发时，全局前置守卫按照创建顺序调用。守卫是异步解析执行，此时导航在所有守卫 resolve 完之前一直处于 等待中<br>当访问权限页面时，拦截或放行的关键点：用户是否有登录权证token<br>在router文件夹-index.js文件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局前置导航守卫</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123; ... &#125;)</span><br><span class="line"><span class="comment">// 全局前置导航守卫，注意这三个量的位置顺序不能变</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有的路由在真正被访问到之前(解析渲染对应组件页面前)，都会先经过全局前置守卫</span></span><br><span class="line"><span class="comment">// 只有全局前置守卫放行了，才会到达对应的页面</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局前置导航守卫</span></span><br><span class="line"><span class="comment">// to:   到哪里去，到哪去的完整路由信息对象 (路径，参数)</span></span><br><span class="line"><span class="comment">// from: 从哪里来，从哪来的完整路由信息对象 (路径，参数)</span></span><br><span class="line"><span class="comment">// next(): 是否放行</span></span><br><span class="line"><span class="comment">// (1) next()     直接放行，放行到to要去的路径</span></span><br><span class="line"><span class="comment">// (2) next(路径)  进行拦截，拦截到next里面配置的路径</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个数组，专门用户存放所有需要权限访问的页面</span></span><br><span class="line"><span class="keyword">const</span> authUrls = [<span class="string">&#x27;/pay&#x27;</span>, <span class="string">&#x27;/myorder&#x27;</span>]</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// console.log(to, from, next)</span></span><br><span class="line">  <span class="comment">// 看 to.path 是否在 authUrls 中出现过</span></span><br><span class="line">  <span class="keyword">if</span> (!authUrls.<span class="title function_">includes</span>(to.<span class="property">path</span>)) &#123;</span><br><span class="line">    <span class="comment">// 非权限页面，直接放行</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 是权限页面，需要判断token</span></span><br><span class="line">  <span class="keyword">const</span> token = store.<span class="property">getters</span>.<span class="property">token</span></span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>成功后未登录访问&#x2F;pay链接会自动跳转到login页面</p>
<h3 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h3><h4 id="首页-静态结构"><a href="#首页-静态结构" class="headerlink" title="首页-静态结构"></a>首页-静态结构</h4><p>1.views&#x2F;layout&#x2F;home.vue静态布局使用的已给代码cv<br>2.封装商品组件，因为在很多地方都要用到商品组件。在components文件夹新建GoodsItem.vue商品组件，记得都要给name<br>此时运行F12会报错，如Unknown custom element: <van-search>因为这里使用了vant组件但是没有注册，要进行按需导入<br>3.在utils&#x2F;vant-ui.js按需导入组件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Search</span>, <span class="title class_">Swipe</span>, <span class="title class_">SwipeItem</span>, <span class="title class_">Grid</span>, <span class="title class_">GridItem</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">GridItem</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Search</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Swipe</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">SwipeItem</span>)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Grid</span>)</span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/homePic1.png" alt="alt text"></p>
<h4 id="首页-封装接口"><a href="#首页-封装接口" class="headerlink" title="首页-封装接口"></a>首页-封装接口</h4><p>1.在接口文档找到对应后端地址和所需参数<br>在api文件夹新建home.js</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 此处用于存放所有首页相关的接口请求</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取首页数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getHomeData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// get请求的参数传参注意</span></span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/page/detail&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">pageId</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.在页面中调用<br>先导入，然后created里面发请求<br>成功后是这样的<img src="/postImgs/oldImg/homePic2.png" alt="alt text"><br>然后从后台返回的数据data中解构出pageData</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">GoodsItem</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/GoodsItem.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; getHomeData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/home&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;HomePage&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">GoodsItem</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">bannerList</span>: [],  <span class="comment">//轮播图</span></span><br><span class="line">      <span class="attr">navList</span>: [],     <span class="comment">//导航</span></span><br><span class="line">      <span class="attr">proList</span>: []      <span class="comment">//商品</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">created</span> () &#123;</span><br><span class="line">    <span class="comment">//从后台返回的数据data中解构出pageData，下面的1，3，6是后端接口返回的数据数组上标注的</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; pageData &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getHomeData</span>()</span><br><span class="line">    <span class="comment">//轮播图</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bannerList</span> = pageData.<span class="property">items</span>[<span class="number">1</span>].<span class="property">data</span></span><br><span class="line">    <span class="comment">//导航</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">navList</span> = pageData.<span class="property">items</span>[<span class="number">3</span>].<span class="property">data</span></span><br><span class="line">    <span class="comment">//商品</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">proList</span> = pageData.<span class="property">items</span>[<span class="number">6</span>].<span class="property">data</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li><p>轮播图、导航、猜你喜欢渲染<br>布置静态页面的时候那些图片都是写死了的，现在把这些改为后端传过来的数据</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;!-- 轮播图 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">van-swipe</span> <span class="attr">class</span>=<span class="string">&quot;my-swipe&quot;</span> <span class="attr">:autoplay</span>=<span class="string">&quot;3000&quot;</span> <span class="attr">indicator-color</span>=<span class="string">&quot;white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">van-swipe-item</span> <span class="attr">v-for</span>=<span class="string">&quot;item in bannerList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.imgUrl&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.imgUrl&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">van-swipe-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">van-swipe</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 导航 --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">column-num</span>=<span class="string">&quot;5&quot;</span> <span class="attr">icon-size</span>=<span class="string">&quot;40&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">van-grid-item</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">v-for</span>=<span class="string">&quot;item in navList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.imgUrl&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">:icon</span>=<span class="string">&quot;item.imgUrl&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">:text</span>=<span class="string">&quot;item.text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/category&#x27;)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!-- 猜你喜欢 --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;guess&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;guess-title&quot;</span>&gt;</span>—— 猜你喜欢 ——<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">GoodsItem</span> <span class="attr">v-for</span>=<span class="string">&quot;item in proList&quot;</span>  <span class="attr">:item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.goods_id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">GoodsItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>成功后是这样的<img src="/postImgs/oldImg/homePic3.png" alt="alt text"></p>
</li>
<li><p>商品组件动态渲染<br>原来首页静态布局商品组件的图片是多个一样的商品重复，现在把写死的商品改为后端接口提供回来的数据<br>成功后是这样的，每个商品都不一样<img src="/postImgs/oldImg/homePic4.png" alt="alt text"></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;item.goods_name&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(`/prodetail/$&#123;item.goods_id&#125;`)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.goods_image&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;tit text-ellipsis-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;&#123; item.goods_name &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;count&quot;</span>&gt;</span>已售 &#123;&#123; item.goods_sales &#125;&#125;件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;new&quot;</span>&gt;</span>¥&#123;&#123; item.goods_price_min &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;old&quot;</span>&gt;</span>¥&#123;&#123; item.goods_price_max &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">item</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Object</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="搜索页"><a href="#搜索页" class="headerlink" title="搜索页"></a>搜索页</h3><h4 id="搜索页面和历史搜索记录"><a href="#搜索页面和历史搜索记录" class="headerlink" title="搜索页面和历史搜索记录"></a>搜索页面和历史搜索记录</h4><ol>
<li>views&#x2F;search&#x2F;index.vue 搜索页面静态布局：用给的cv的</li>
<li>把组件按需导入，导入Icon组件</li>
<li>data 中提供数据，和搜索框双向绑定 (实时获取用户内容)</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;van-search v-model=<span class="string">&quot;search&quot;</span> show-action placeholder=<span class="string">&quot;请输入搜索关键词&quot;</span> clearable&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">action</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/van-search&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>准备假数据，进行基本的历史纪录渲染</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">history</span>: [<span class="string">&#x27;手机&#x27;</span>, <span class="string">&#x27;空调&#x27;</span>, <span class="string">&#x27;白酒&#x27;</span>, <span class="string">&#x27;电视&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;search-history&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;history.length &gt; 0&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  ...</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in history&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch(item)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;&#123; item &#125;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>点击搜索，或者下面搜索历史按钮，都要进行搜索历史记录更新 (去重，新搜索的内容置顶)<br>搜索有两种方法：在搜索框输入关键词搜索和点击历史搜索记录进行搜索，搜索后进行判断，看看这个关键词在历史记录里有没有出现过，如果出现过那么先删除掉之前的历史记录再把这个添加到最前面，如果没有出现过就直接添加到最前面</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;div @click=<span class="string">&quot;goSearch(search)&quot;</span>&gt;搜索&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;item in history&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goSearch(item)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;list-item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123; item &#125;&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="title function_">goSearch</span> (key) &#123;</span><br><span class="line">  <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">indexOf</span>(key)</span><br><span class="line">  <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">splice</span>(index, <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">unshift</span>(key)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/searchlist?search=<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>清空历史</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;van-icon @click=<span class="string">&quot;clear&quot;</span> name=<span class="string">&quot;delete-o&quot;</span> size=<span class="string">&quot;16&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="title function_">clear</span> () &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">history</span> = []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后完成是这样的<img src="/postImgs/oldImg/searchPic1.png" alt="alt text"></p>
</li>
</ol>
<h4 id="搜索历史的持久化"><a href="#搜索历史的持久化" class="headerlink" title="搜索历史的持久化"></a>搜索历史的持久化</h4><p>目前只要刷新那么搜索历史会重置，要将用户的搜索历史进行持久化处理，往utils文件夹&#x2F;storage.js中放</p>
<ol>
<li>持久化到本地 - 封装方法</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">HISTORY_KEY</span> = <span class="string">&#x27;hm_history_list&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取搜索历史</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getHistoryList</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="variable constant_">HISTORY_KEY</span>)</span><br><span class="line">  <span class="keyword">return</span> result ? <span class="title class_">JSON</span>.<span class="title function_">parse</span>(result) : []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置搜索历史</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">setHistoryList</span> = (<span class="params">arr</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="variable constant_">HISTORY_KEY</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(arr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>页面中调用 - 实现持久化</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">search</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">history</span>: <span class="title function_">getHistoryList</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">goSearch</span> (key) &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="title function_">setHistoryList</span>(<span class="variable language_">this</span>.<span class="property">history</span>)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">`/searchlist?search=<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">clear</span> () &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">history</span> = []</span><br><span class="line">    <span class="title function_">setHistoryList</span>([])</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$toast</span>.<span class="title function_">success</span>(<span class="string">&#x27;清空历史成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后刷新也不会丢失之前的搜索历史<br>还可以改进：如果搜索框内容为空那么不可以搜索</p>
<h3 id="搜索列表页"><a href="#搜索列表页" class="headerlink" title="搜索列表页"></a>搜索列表页</h3><p>根据搜索的关键字进入搜索列表页，展示搜索的详情，基于关键字进行渲染</p>
<h4 id="页面静态布局和动态渲染"><a href="#页面静态布局和动态渲染" class="headerlink" title="页面静态布局和动态渲染"></a>页面静态布局和动态渲染</h4><p>静态布局用的给的代码cv，在search文件夹&#x2F;list.vue<br>在api新建文件夹product.js</p>
<ol>
<li>计算属性，基于query 解析路由参数</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">querySearch</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">search</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>根据不同的情况，设置输入框的值</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;van-search</span><br><span class="line">  ...</span><br><span class="line">  :value=<span class="string">&quot;querySearch || &#x27;搜索商品&#x27;&quot;</span></span><br><span class="line">&gt;&lt;/van-search&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>api/product.js</code> 封装接口，获取搜索商品</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取搜索商品列表数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getProList</span> = (<span class="params">paramsObj</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; categoryId, goodsName, page &#125; = paramsObj</span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/goods/list&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      categoryId,</span><br><span class="line">      goodsName,</span><br><span class="line">      page</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>页面中基于 goodsName 发送请求，动态渲染</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span> () &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">proList</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="keyword">async</span> <span class="title function_">created</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; list &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getProList</span>(&#123;</span><br><span class="line">    <span class="attr">goodsName</span>: <span class="variable language_">this</span>.<span class="property">querySearch</span>,</span><br><span class="line">    <span class="attr">page</span>: <span class="variable language_">this</span>.<span class="property">page</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">proList</span> = list.<span class="property">data</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">GoodsItem</span> <span class="attr">v-for</span>=<span class="string">&quot;item in proList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.goods_id&quot;</span> <span class="attr">:item</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">GoodsItem</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>最后完成是这样的<img src="/postImgs/oldImg/searchPic2.png" alt="alt text"></p>
<h4 id="商品分类搜索页面"><a href="#商品分类搜索页面" class="headerlink" title="商品分类搜索页面"></a>商品分类搜索页面</h4><p>1 封装接口 <code>api/category.js</code></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取分类数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getCategoryData</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> request.<span class="title function_">get</span>(<span class="string">&#x27;/category/list&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2 分类页静态结构<br>layout&#x2F;category.vue</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;category&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 分类 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">&quot;全部分类&quot;</span> <span class="attr">fixed</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 搜索框 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">van-search</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">readonly</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">shape</span>=<span class="string">&quot;round&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">background</span>=<span class="string">&quot;#f1f1f2&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入搜索关键词&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">click</span>=<span class="string">&quot;$router.push(&#x27;/search&#x27;)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 分类列表 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.category_id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; active: index === activeIndex &#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;activeIndex = index&quot;</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;$router.push(`/searchlist?categoryId=$&#123;item.category_id&#125;`)&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list[activeIndex]?.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.category_id&quot;</span> <span class="attr">class</span>=<span class="string">&quot;cate-goods&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;item.image?.external_url&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; getCategoryData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/category&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;CategoryPage&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">created</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">this</span>.<span class="title function_">getCategoryList</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">list</span>: [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">activeIndex</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">async</span> <span class="title function_">getCategoryList</span> () &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; list &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getCategoryData</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">list</span> = list</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>3 搜索页，基于分类 ID 请求</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">created</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; list &#125; &#125; = <span class="keyword">await</span> <span class="title function_">getProList</span>(&#123;</span><br><span class="line">    <span class="attr">categoryId</span>: <span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">categoryId</span>,</span><br><span class="line">    <span class="attr">goodsName</span>: <span class="variable language_">this</span>.<span class="property">querySearch</span>,</span><br><span class="line">    <span class="attr">page</span>: <span class="variable language_">this</span>.<span class="property">page</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">proList</span> = list.<span class="property">data</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后完成是这样的<img src="/postImgs/oldImg/searchPic3.png" alt="alt text"></p>
<h3 id="商品详情页面"><a href="#商品详情页面" class="headerlink" title="商品详情页面"></a>商品详情页面</h3><p>和之前一样：页面静态结构-封装接口-动态路由获取参数-基于ID获取数据进行渲染<br>api文件夹新建product.js,cart.js<br>views文件夹&#x2F;prodetail文件夹&#x2F;index.vue<br>mixins文件夹，components文佳佳GoodsItem.vue</p>
<h3 id="加入购物车页面"><a href="#加入购物车页面" class="headerlink" title="加入购物车页面"></a>加入购物车页面</h3><h4 id="加入购物车弹层"><a href="#加入购物车弹层" class="headerlink" title="加入购物车弹层"></a>加入购物车弹层</h4><p>用户浏览商品可能要购买，当用户点击加入购物车或立刻购买时，能够弹出一个小的弹层</p>
<ol>
<li>准备弹层，点击能够被唤起<br>在vant官网找到反馈组件-ActionnSheet 动作面板，右侧有弹层效果展示，我们用自定义面板。<br>不管用哪个都需要先按需引入ActionSheet(utils&#x2F;vant-ui.js)，然后往下找到自定义面板，通过插槽可以自定义面板的展示内容。<br>回到代码，views&#x2F;prodetail&#x2F;index.vue,在底部div下面添加加入购物车的弹层（复制文档代码）<br>给加入购物车和立即购买两个按钮添加点击事件，在下面methds提供方法，在data中提供一个参数showPannel，这个参数值变为true则唤起弹层<br>再在data中声明一个参数mode，点击不同按钮触发的方法分别给mode赋值为’cart’和’buyNow’，根据mode的不同值来动态设置弹层标题的文字现实内容</li>
<li>完善弹层结构<br>直接CV的视频提供的代码修改弹层的静态结构和弹层的样式</li>
<li>结合数据动态渲染弹层<br>弹层中的商品图片goods_image，商品购买价格goods_price_min，库存stock_total<br>在静态结构中把这些写死的地方改为<br>对库存进行判断，有库存才现实提交按钮，没有库存的话提交按钮变成灰色现实文字“该商品已抢完”</li>
</ol>
<h4 id="弹层优化–封装数字框组件"><a href="#弹层优化–封装数字框组件" class="headerlink" title="弹层优化–封装数字框组件"></a>弹层优化–封装数字框组件</h4><ol>
<li>理解<br>再加入购物车和购物车列表中都会用到数字狂组件，所以把弹层中的数字框组件进行封装<br>组件名：CountBox<br>静态结构：左中右三部分<br>数字框的数字，应该是外部传递进来的(父传子)<br>点击+-号，可以修改数字(子传父)<br>使用 v-model 实现封装(:value 和 @input 的简写)（父传子和子传父简写）</li>
</ol>
<p>数字框组件：点击减号加号数字减一加一，同时点击数字能够直接修改为输入的值，也要对数字和库存数量进行判断，最大不超过库存数量<br>2. 实现<br>在components文件夹创建组件CountBox.vue，在里面写静态结构,然后把这个组件加入到弹窗中对应的位置上<br>数字框的默认值应该是父亲给传递过来的，在商品详情页prodetail&#x2F;index.vue中加入data，addCount给默认值1，作为数字框的默认值，也是数字框绑定的数据<br>点击加减号都可以向上提交数据，向父组件提交input事件，同时判断数据不能&lt;&#x3D;1<br>用户自输入的数据进行判断：在数据变化时拿到数据和库存进行判断，对它进行转数字处理，如果是合法的数字那么继续走，如果是不合法的数字或者&lt;1的数，那么回退成原来的value值</p>
<h4 id="判断token添加登录提示"><a href="#判断token添加登录提示" class="headerlink" title="判断token添加登录提示"></a>判断token添加登录提示</h4><ol>
<li>理解：加入购物车这个功能只能是已经登录的用户才能够操作，如果是未登录的用户，那么给他登录提示引导他到登陆页，登录完成后再跳转回来；如果用户token存在，俺么继续加入购物车操作</li>
<li>操作：在prodetail&#x2F;index.vue里面添加函数判断token是否存在，这个函数在用户点击加入购物车弹窗里的提交时会触发<br>这个判断操作封装到了mixins&#x2F;loginConfirm.js文件中的loginConfirm ()函数下，在页面中导入直接调用函数进行判断</li>
</ol>
<h4 id="添加商品到购物车"><a href="#添加商品到购物车" class="headerlink" title="添加商品到购物车"></a>添加商品到购物车</h4><ol>
<li>理解：封装接口，进行加入购物车的请求<br>在api&#x2F;cart.js中封装接口，在页面中调用接口，同时在购物车图标右上角渲染购物车内商品数量的红色角标</li>
<li>操作：根据后端结构传入参数<br>在utils&#x2F;requers.js中添加代码<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;@/store&#x27;</span></span><br><span class="line">  <span class="comment">// 只要有token，就在请求时携带，便于请求需要授权的接口</span></span><br><span class="line">  <span class="keyword">const</span> token = store.<span class="property">getters</span>.<span class="property">token</span></span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;Access-Token&#x27;</span>] = token</span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">platform</span> = <span class="string">&#x27;H5&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="购物车页面"><a href="#购物车页面" class="headerlink" title="购物车页面"></a>购物车页面</h3><ol>
<li>理解：购物车模块的数据库比较多，通常会封装一些小组件（商品组件，数字框组件），为了便于维护，把购物车的数据基于vuex分模块管理</li>
<li>需求分析<br>基本静态结构(快速实现)<br>构建 vuex cart 模块，获取数据存储<br>基于数据动态渲染购物车列表<br>封装getters实现动态统计<br>全选反选功能<br>数字框修改数量功能<br>编辑切换状态，删除功能<br>空购物车处理</li>
<li>操作<br>（1）先完成购物车静态结构，然后在store&#x2F;modules文件夹建立cart.js文件，挂载到index.js中，成功后在F12vue中Root除了User还能看到Cart模块</li>
</ol>
<p>（2）获取购物车列表是异步的放在actions里面<br>前提：必须是登陆过的用户才能获取购物车列表<br>注意：这里发请求是异步的，主要原因是为了避免阻塞页面的渲染和交互。如果前端发起请求是同步的，那么在请求返回之前，浏览器会一直等待，页面就会被阻塞，用户无法进行其他操作，这会给用户带来不好的体验。<br>同时要手动维护数据，给每一项添加一个isChecked状态，来标记当前商品是否选中，默认值true选中<br>mutations里面提供一个设置购物车列表cartList的mutation</p>
<h2 id="报错！！"><a href="#报错！！" class="headerlink" title="报错！！"></a>报错！！</h2><h3 id="登录页面发送验证码后控制台报错"><a href="#登录页面发送验证码后控制台报错" class="headerlink" title="登录页面发送验证码后控制台报错"></a>登录页面发送验证码后控制台报错</h3><p>Uncaught (in promise) Error: A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received<br>未捕获（在 promise 中）错误：一个监听器通过返回 true 指示了异步响应，但在收到响应之前，消息通道已关闭。<br>已解决：我将axios响应时间的50s改成5s后报错消失</p>
<h3 id="登录点击后报错"><a href="#登录点击后报错" class="headerlink" title="登录点击后报错"></a>登录点击后报错</h3><p>vue.runtime.esm.js:3065  SQLSTATE[23000]: Integrity constraint violation: 1048 Column ‘platform’ cannot be null<br>Vue.runtime.esm.js:3065 错误信息：SQLSTATE[23000]：实体完整性违反：1048 列 ‘platform’ 不能为空<br>终于解决了！！！！！！！<br>原因是在request.js文件中的axios这里</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导入axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Toast</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span></span><br><span class="line"><span class="comment">// 创建axios实例，对创建出来的实例进行自定义配置</span></span><br><span class="line"><span class="comment">// 这样的好处是不会污染原始的axios实例</span></span><br><span class="line"><span class="comment">// 创建实例代码在axios官方文档cv</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// baseURL看接口文档的基础地址更改</span></span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;http://smart-shop.itheima.net/index.php?s=/api&#x27;</span>,</span><br><span class="line">  <span class="comment">// 超时时间，这里是5s</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span>,</span><br><span class="line">  <span class="comment">// 视频和接口文件有下面这行代码，但是我的测试的时候报错了，看别人发的把这行删掉，然后就成功啦</span></span><br><span class="line">  <span class="comment">// headers: &#123; &#x27;X-Custom-Header&#x27;: &#x27;foobar&#x27; &#125;</span></span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="attr">platform</span>: <span class="string">&#x27;H5&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">其中  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="attr">platform</span>: <span class="string">&#x27;H5&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  加上就不会再报错了</span><br></pre></td></tr></table></figure>
<p>具体的错误原因是尝试将NULL值插入到不允许为空（NOT NULL约束）的platform列中</p>
<h3 id="未获取到对应mp4文件"><a href="#未获取到对应mp4文件" class="headerlink" title="未获取到对应mp4文件"></a>未获取到对应mp4文件</h3><p>0a2fmquapKejn62L4K2doafhoaWlmqmeoaGk.mp4:1<br>GET <a href="https://m4.pptvyun.com/pvod/e11a0/dy2NW_VbPWwd4odtyKM_KELVHXM/eyJkbCI6MTY3Njg3OTgzNywiZXMiOjYwNDgwMCwiaWQiOiIwYTJmbXF1YXBLZWpuNjJMNEsyZG9hZmhvYVdsbXFtZW9hR2siLCJ2IjoiMS4wIn0/0a2fmquapKejn62L4K2doafhoaWlmqmeoaGk.mp4">https://m4.pptvyun.com/pvod/e11a0/dy2NW_VbPWwd4odtyKM_KELVHXM/eyJkbCI6MTY3Njg3OTgzNywiZXMiOjYwNDgwMCwiaWQiOiIwYTJmbXF1YXBLZWpuNjJMNEsyZG9hZmhvYVdsbXFtZW9hR2siLCJ2IjoiMS4wIn0/0a2fmquapKejn62L4K2doafhoaWlmqmeoaGk.mp4</a> 502 (Bad Gateway)</p>
<h3 id="未注册组件报错"><a href="#未注册组件报错" class="headerlink" title="未注册组件报错"></a>未注册组件报错</h3><p>F12报错<br> Unknown custom element: <van-rate> - did you register the component correctly? For recursive components, make sure to provide the “name” option.<br>未知自定义元素:<van-rate> -您是否正确注册了该组件?对于递归组件，确保提供“name”选项</p>
<p>解决：是我的vant-ui.js没有注册使用对应组件Rate</p>
]]></content>
      <categories>
        <category>vue</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>项目</tag>
      </tags>
  </entry>
  <entry>
    <title>微信小程序学习</title>
    <url>/2024/11/27/15-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="小程序"><a href="#小程序" class="headerlink" title="小程序"></a>小程序</h1><h2 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h2><p>多看官方文档：<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/">https://developers.weixin.qq.com/miniprogram/dev/framework/</a></p>
<h3 id="字体图标（借助阿里巴巴矢量图库）"><a href="#字体图标（借助阿里巴巴矢量图库）" class="headerlink" title="字体图标（借助阿里巴巴矢量图库）"></a>字体图标（借助阿里巴巴矢量图库）</h3><ol>
<li>首先先找到所需的图标，鼠标放到图标上点击添加入库（三个小按钮上面的小按钮），然后点页面右上角的购物车图标，点击添加至项目。</li>
<li>添加至项目后右上角小购物车图标里就没有图标了，要点击首页导航栏上面的资源管理-我的项目，点击”font-class”，点击查看在线连接，点击”暂无代码，点击生成”，然后会生成一个css链接，点击这个css链接里面的代码就是这些字体图标的代码。</li>
<li>为了防止一个可能影响调试的报错，在生成css代码前，先在”资源管理-我的项目”页面找到”项目设置”，然后把base64勾选上，再生成css代码</li>
<li>在项目根目录下新建文件夹iconfont&#x2F;iconfont.wxss文件或iconfont.scss文件，把刚才生成的css代码贴进来</li>
<li>在app.scss中导入全局注册iconfont，注意导入后必须要以分号结尾<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span><span class="string">&quot;./iconfont/iconfont.scss&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>在页面中使用这些图标，在想要添加字体图标的text组件文字前再加一个text组件，给它们添加类名class&#x3D;”字体图标类名”然后保存，即可在页面中生效<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-shouye&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span> 同城配送<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-on_time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span> 行业龙头<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-peisong&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span> 半小时送达<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;icon-tubiao_dianzan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span> 100% 好评<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<strong>注意text嵌套text必须在一行，否则会出现图标和字不在同一行的情况</strong></li>
</ol>
<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><h3 id="主体文件和页面文件"><a href="#主体文件和页面文件" class="headerlink" title="主体文件和页面文件"></a>主体文件和页面文件</h3><p>一个完整的小程序项目分为两个部分：主体文件和页面文件</p>
<ol>
<li>主体文件又称小程序全局文件，顾名思义，全局文件能够作用于整个小程序，影响到小程序的每个页面，主体文件必须放到项目的根目录下，主要由三部分组成：</li>
</ol>
<table>
<thead>
<tr>
<th align="center">文件名</th>
<th align="center">作用</th>
<th align="center">是否必须</th>
</tr>
</thead>
<tbody><tr>
<td align="center">app.js</td>
<td align="center">小程序入口文件</td>
<td align="center">必须</td>
</tr>
<tr>
<td align="center">app.json</td>
<td align="center">小程序的全局配置</td>
<td align="center">必须</td>
</tr>
<tr>
<td align="center">app.wxss</td>
<td align="center">小程序的全局样式</td>
<td align="center">非必须</td>
</tr>
</tbody></table>
<ol start="2">
<li>页面文件是每个页面所需的文件，小程序页面文件都存放在 pages 目录下，一个页面一个文件夹，每个页面通常由四个文件组成，每个文件只对当前页面有效：</li>
</ol>
<table>
<thead>
<tr>
<th align="center">文件名</th>
<th align="center">作用</th>
<th align="center">是否必须</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.js</td>
<td align="center">页面逻辑</td>
<td align="center">必须</td>
</tr>
<tr>
<td align="center">.wxml</td>
<td align="center">页面结构</td>
<td align="center">必须</td>
</tr>
<tr>
<td align="center">.wxss</td>
<td align="center">页面样式</td>
<td align="center">非必须</td>
</tr>
<tr>
<td align="center">.json</td>
<td align="center">页面配置</td>
<td align="center">非必须</td>
</tr>
</tbody></table>
<blockquote>
<p> 注意：</p>
<ol>
<li>页面文件，wxss、json 文件能够覆盖主体文件中的样式和配置</li>
<li>强烈建议：页面文件夹名称和页面文件名称要保持一致</li>
</ol>
</blockquote>
<h3 id="新建页面方式"><a href="#新建页面方式" class="headerlink" title="新建页面方式"></a>新建页面方式</h3><ol>
<li><p>在 pages 目录上 点击右键 <code>新建文件夹</code>，输入页面目录的名称，在 list  目录上 点击右键 <code>点击 page</code>，输入页面文件的名称</p>
<blockquote>
<p>注意：<br>在输入页面文件名称的时候，不要输入后缀名<br>新建页面成功以后，会在 app.json 的 pages 选项中新增页面路径</p>
</blockquote>
</li>
<li><p>在 app.json 的 pages 选项中，新增页面路径<br>在新增页面目录以后，会自动在 pages 目录下生成页面文件</p>
</li>
</ol>
<h2 id="小程序组件（标签）"><a href="#小程序组件（标签）" class="headerlink" title="小程序组件（标签）"></a>小程序组件（标签）</h2><h3 id="小程序标签和html区别"><a href="#小程序标签和html区别" class="headerlink" title="小程序标签和html区别"></a>小程序标签和html区别</h3><ol>
<li>wxml<br><code>WXML</code> 类似 <code>HTML</code> 的角色，在 <code>WXML</code> 中需要用小程序提供的 <code>view</code>、<code>text</code> 、<code>image</code>、<code>navigator</code> 等标签来构建页面结构</li>
<li>wxss<br><code>WXSS</code> 类似 <code>CSS</code> 的角色，<code>WXSS</code> 具有 <code>CSS</code> 大部分的特性，小程序在 <code>WXSS</code> 也做了一些扩充和修改，新增了尺寸单位 <code>rpx</code>、提供了全局的样式和局部样式，<code>WXSS</code> 仅支持部分 <code>CSS</code> 选择器。</li>
<li>rpx<br><code>rpx </code>:  小程序新增的拓展单位，可以根据屏幕宽度进行自适应，小程序规定任何型号手机：屏幕宽都为 750 rpx。<blockquote>
<p>建议：<br>iPhone6 的设计稿一般是 750px，小程序的宽是 750rpx<br>​	在我们开发小程序页面时，量取多少px，直接写多少rpx，开发方便，也能适配屏幕的适配<br>原因：<br>​	设计稿宽度是 750px，而 iPhone6 的手机设备宽度是 375px， 设计稿想完整展示到手机中，就需要缩小一倍<br>​	在 iPhone6下，px 和 rpx 的换算关系是：1rpx &#x3D; 0.5px， 750rpx &#x3D; 375px，刚好能够填充满整个屏幕的宽度</p>
</blockquote>
</li>
<li>全局样式和局部样式<br>全局样式：指在 <code>app.wxss</code>中定义的样式规则，作用于每一个页面，例如：设置字号、背景色、宽高等全局样式<br>局部样式：指在<code>page.wxss</code>中定义的样式规则，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。</li>
</ol>
<h3 id="轮播图组件swiper"><a href="#轮播图组件swiper" class="headerlink" title="轮播图组件swiper"></a>轮播图组件swiper</h3><ol>
<li><code>swiper</code>：滑块视图容器，常用来实现轮播图，其中只可放置 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper-item.html">swiper-item</a> 组件，否则会导致未定义的行为</li>
<li><code>swiper-item</code>：仅可放置在<a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">swiper</a>组件中，宽高自动设置为100%，代表 <code>swiper</code> 中的每一项</li>
<li>使用 <code>swiper</code> 组件提供的属性，实现轮播图的订制，常见属性如下：</li>
</ol>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">说明</th>
<th align="center">类型</th>
</tr>
</thead>
<tbody><tr>
<td align="center">indicator-dots</td>
<td align="center">是否显示面板指示点</td>
<td align="center">boolean (默认 false)</td>
</tr>
<tr>
<td align="center">indicator-color</td>
<td align="center">指示点颜色</td>
<td align="center">color (默认：rgba(0, 0, 0, .3))</td>
</tr>
<tr>
<td align="center">indicator-active-color</td>
<td align="center">当前选中的指示点颜色</td>
<td align="center">color (默认：#000000)</td>
</tr>
<tr>
<td align="center">autoplay</td>
<td align="center">是否自动切换</td>
<td align="center">boolean (默认 false)</td>
</tr>
<tr>
<td align="center">interval</td>
<td align="center">自动切换时间间隔</td>
<td align="center">number (默认 5000)</td>
</tr>
<tr>
<td align="center">circular</td>
<td align="center">是否采用衔接滑动</td>
<td align="center">boolean (默认 false)</td>
</tr>
<tr>
<td align="center"><a href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">其他属性…</a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="轮播图代码"><a href="#轮播图代码" class="headerlink" title="轮播图代码"></a>轮播图代码</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 轮播图区域 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;swiper&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span></span></span><br><span class="line"><span class="tag">    <span class="attr">circular</span></span></span><br><span class="line"><span class="tag">    <span class="attr">autoplay</span></span></span><br><span class="line"><span class="tag">    <span class="attr">indicator-dots</span></span></span><br><span class="line"><span class="tag">    <span class="attr">interval</span>=<span class="string">&quot;2000&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">indicator-color</span>=<span class="string">&quot;#efefef&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">indicator-active-color</span>=<span class="string">&quot;#ccc&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 在小程序中图片不能使用 img 标签，使用后不会生效 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;img src=&quot;../../assets/banner/banner-1.png&quot; alt=&quot;&quot;/&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 需要使用 images 组件 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- image 组件不给 src 属性设置默认值，也占据宽和高 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- image 默认具有宽度，宽是 320px 高度是 240px --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- mode 属性：用来设置图片的裁切模式、纵横比例、显示的位置 --&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- show-menu-by-longpress 属性：长按转发给朋友、收藏、保存图片 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/banner/banner-1.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFill&quot;</span> <span class="attr">show-menu-by-longpress</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/banner/banner-2.png&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/banner/banner-3.png&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><code>➡️ pages/index/index.scss</code></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** index.wxss **/</span></span><br><span class="line">page &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#efefef</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">swiper &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">360</span>rpx;</span><br><span class="line"></span><br><span class="line">  swiper-item &#123;</span><br><span class="line">    <span class="selector-tag">image</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 Sass 拓展语言中，&amp; 符号表示父选择器的引用。它用于在嵌套的选择器中引用父选择器</span></span><br><span class="line">    <span class="comment">// 下面这段代码在编译以后，生成的代码是 swiper-item:first-child</span></span><br><span class="line">    <span class="comment">// &amp;:first-child &#123;</span></span><br><span class="line">    <span class="comment">//   background-color: skyblue;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &amp;:nth-child(2) &#123;</span></span><br><span class="line">    <span class="comment">//   background-color: lightcoral;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &amp;:last-child &#123;</span></span><br><span class="line">    <span class="comment">//   background-color: lightseagreen;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="text-组件"><a href="#text-组件" class="headerlink" title="text 组件"></a>text 组件</h3><p>text 是文本组件，类似于 span，是行内元素 </p>
<h3 id="页面跳转组件navigator"><a href="#页面跳转组件navigator" class="headerlink" title="页面跳转组件navigator"></a>页面跳转组件navigator</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/list/list&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/assets/cate-2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span>&gt;</span>鲜花玫瑰<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>常用的属性有 2 个：<br>1）url ：当前小程序内的跳转链接<br>在进行 页面跳转时，需要再路径的前面添加 &#x2F; 斜线，否则跳转不成功<br>2）open-type ：跳转方式<br>navigate：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面，保留上一级页面<br>redirect： 关闭当前页面，跳转到应用内的某个页面。但不能跳转到 tabbar 页面，关闭上一级页面<br>switchTab：只能跳转到tabBar页面，不能跳转到非v&#x3D;tabbar页面，并关闭其他所有非 tabBar 页面<br>reLaunch：关闭所有页面，打开到应用内的某个页面<br>navigateBack：关闭当前页面，返回上一页面或多级页面（delta属性表示返回的层级，默认返回上一个页面dekta&#x3D;1）<br>1.要么写navigate要么啥也不写，因为其余的会关闭页面，你navigateBack不回去<br>2.tabBar页面不能navigateBack上一页，如要返回使用：switchTab</p>
<blockquote>
<p>注意：</p>
<ol>
<li><p>路径后可以带参数。参数与路径之间使用 ? 分隔，参数键与参数值用 &#x3D; 相连，不同参数用 &amp; 分隔<br>例如：<code>/list?id=10&amp;name=hua</code>，在 <code>onLoad(options)</code> 生命周期函数 中获取传递的参数 </p>
</li>
<li><p>属性 <code>open-type=&quot;switchTab&quot;</code> 时不支持传参</p>
</li>
</ol>
</blockquote>
<h3 id="可滚动视图区域scroll-view"><a href="#可滚动视图区域scroll-view" class="headerlink" title="可滚动视图区域scroll-view"></a>可滚动视图区域scroll-view</h3><p>它可以在小程序中实现类似于网页中的滚动条效果，用户可以通过手指滑动或者点击滚动条来滚动内容，scroll-view 组件可以设置滚动方向、滚动条样式、滚动到顶部或底部时的回调函数等属性，可以根据实际需求进行灵活配置。</p>
<h4 id="横向滚动（scroll-x-属性）"><a href="#横向滚动（scroll-x-属性）" class="headerlink" title="横向滚动（scroll-x 属性）"></a>横向滚动（scroll-x 属性）</h4><p>使用横向滚动时，需要添加 scroll-x 属性，然后通过 css 进行结构绘制，实现页面横向滚动</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hot&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;scroll-x&quot;</span> <span class="attr">scroll-x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.hot</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">16</span>rpx;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.scroll-x</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">background-color</span>: lightblue;</span><br><span class="line"></span><br><span class="line">    view&#123;</span><br><span class="line">      <span class="attribute">display</span>: inline-block;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightseagreen;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:first-child</span>&#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightpink;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="纵向滚动（scroll-y-属性）"><a href="#纵向滚动（scroll-y-属性）" class="headerlink" title="纵向滚动（scroll-y 属性）"></a>纵向滚动（scroll-y 属性）</h4><p>使用竖向滚动时，需要给<a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">scroll-view</a>一个固定高度，同时添加  scroll-y 属性，实现页面纵向滚动</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;hot&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;scroll-y&quot;</span> <span class="attr">scroll-y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>1<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>3<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><code>➡️ pages/index/index.wxss</code>： </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.hot</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">16</span>rpx;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.scroll-y</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">    <span class="attribute">background-color</span>: lightsalmon;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">60</span>rpx;</span><br><span class="line"></span><br><span class="line">    view &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:nth-child</span>(odd) &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightseagreen;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;<span class="selector-pseudo">:nth-child</span>(even) &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: lightcoral;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h3><p>小程序的样式文件中可以使用 <code>background-image</code> 属性来设置一个元素的背景图像，但是小程序的 <code>background-image</code> 不支持本地路径。<br>否则会提示：本地资源图片无法通过 WXSS 获取，可以使用网络图片，或者 base64，或者使用<image/>标签</p>
<p>如果用base64，那么在网上找转化base64的网址转化图片，然后把生成的图片地址写进去，但是这样的地址会特别特别长，如果编译器设置了自动换行那么非常占行</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.image</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">  <span class="comment">/* 错误做法：本地资源图片无法通过 WXSS 获取 */</span></span><br><span class="line">  <span class="comment">/* background-image: url(&#x27;../../static/微信.jpg&#x27;); */</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 法1：使用网络图片 */</span></span><br><span class="line">  <span class="comment">/* background-image: url(&#x27;http://8.131.91.46:6677/TomAndJerry.jpg&#x27;); */</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">/* 法2：使用 base64 格式展示图片 */</span></span><br><span class="line">  <span class="comment">/* base64 编码的文件很长，这个地址老师在这边进行了简写，在测试的时候，需要自己将这里转成完成的 64 编码 */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAeAB4AAD/.....&quot;</span>)</span><br><span class="line">  background-position: center;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="其他组件"><a href="#其他组件" class="headerlink" title="其他组件"></a>其他组件</h3><h2 id="小程序事件系统"><a href="#小程序事件系统" class="headerlink" title="小程序事件系统"></a>小程序事件系统</h2><p>小程序中和用户做交互需要编写 <code>JS</code> 脚本文件，例如：响应用户的点击、获取用户输入的值等等</p>
<h3 id="事件绑定和事件对象"><a href="#事件绑定和事件对象" class="headerlink" title="事件绑定和事件对象"></a>事件绑定和事件对象</h3><ol>
<li>事件绑定<br>小程序中绑定事件使用 <code>bind</code> 方法，<code>click</code> 事件也需要使用 <code>tap</code> 事件来进行代替，绑定事件的方式有两种，bind+(:)+tap&#x3D;”事件名”：</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;handler&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handler&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>事件处理函数需要写到 <code>.js</code> 文件中，在 <code>.js</code> 文件中需要调用小程序提供的 <code>Page</code> 方法来注册小程序的页面，直接在 <code>Page</code> 方法中创建事件处理函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/home/home.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 页面的初始数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">  <span class="title function_">handler</span> () &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我被执行啦~~~&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 其他 coding...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>当组件触发事件时，绑定的事件的处理函数会收到一个事件对象，用来记录事件发生时的相关信息。在触发事件时，事件处理程序会主动的给我们传入一个参数 —— <code>event</code>（事件对象）这个对象里面有很多东西，控制台打印看看，需要什么后面加.获取数据</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/home/home.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 页面的初始数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 事件处理程序</span></span><br><span class="line">  <span class="title function_">handler</span> (event) &#123;</span><br><span class="line">    <span class="comment">// console.log(&#x27;我被触发了~~~&#x27;)</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 其他 coding...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="冒泡和非冒泡事件"><a href="#冒泡和非冒泡事件" class="headerlink" title="冒泡和非冒泡事件"></a>冒泡和非冒泡事件</h3><ol>
<li>事件分为冒泡事件和非冒泡事件：<br>冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。<br>非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。<br>使用 <code>bind</code> 绑定的事件，会触发事件冒泡，如果想阻止事件冒泡，用 <code>catch</code> 来绑定事件<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;parentHandler&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 使用 bind 绑定的事件，会产生事件冒泡 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;button bindtap=&quot;handler&quot;&gt;按钮&lt;/button&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 使用 catcht 绑定的事件，会阻止事件冒泡 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">catchtap</span>=<span class="string">&quot;handler&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">  <span class="title function_">handler</span> (event) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是子绑定的事件 ~~~&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">parentHandler</span> () &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我是父绑定的事件 ~~~&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><code>WXML</code> 中冒泡事件列表如下表：</li>
</ol>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">触发条件</th>
</tr>
</thead>
<tbody><tr>
<td align="left">touchstart</td>
<td align="left">手指触摸动作开始</td>
</tr>
<tr>
<td align="left">touchmove</td>
<td align="left">手指触摸后移动</td>
</tr>
<tr>
<td align="left">touchcancel</td>
<td align="left">手指触摸动作被打断，如来电提醒，弹窗</td>
</tr>
<tr>
<td align="left">touchend</td>
<td align="left">手指触摸动作结束</td>
</tr>
<tr>
<td align="left">tap</td>
<td align="left">手指触摸后马上离开</td>
</tr>
<tr>
<td align="left">longpress</td>
<td align="left">手指触摸后，超过350ms再离开，如果指定了事件回调函数并触发了这个事件，tap事件将不被触发</td>
</tr>
<tr>
<td align="left">longtap</td>
<td align="left">手指触摸后，超过350ms再离开（推荐使用 longpress 事件代替）</td>
</tr>
<tr>
<td align="left">transitionend</td>
<td align="left">会在 WXSS transition 或 wx.createAnimation 动画结束后触发</td>
</tr>
<tr>
<td align="left">animationstart</td>
<td align="left">会在一个 WXSS animation 动画开始时触发</td>
</tr>
<tr>
<td align="left">animationiteration</td>
<td align="left">会在一个 WXSS animation 一次迭代结束时触发</td>
</tr>
<tr>
<td align="left">animationend</td>
<td align="left">会在一个 WXSS animation 动画完成时触发</td>
</tr>
<tr>
<td align="left">touchforcechange</td>
<td align="left">在支持 3D Touch 的 iPhone 设备，重按时会触发</td>
</tr>
</tbody></table>
<blockquote>
<p>​除上表之外的其他组件自定义事件，如无特殊声明都是非冒泡事件<br>例如 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/form.html">form</a> 的<code>submit</code>事件，<a href="https://developers.weixin.qq.com/miniprogram/dev/component/input.html">input</a> 的<code>input</code>事件</p>
</blockquote>
<h3 id="事件传参-data-自定义数据"><a href="#事件传参-data-自定义数据" class="headerlink" title="事件传参-data-自定义数据"></a>事件传参-data-自定义数据</h3><p>在 wxml 文件中，使用 <code>data-*</code> 属性将数据传递给事件处理函数。例如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;parentHandler&quot;</span> <span class="attr">data-parent-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-parentName</span>=<span class="string">&quot;tom&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要进行事件传参，需要再组件上通过 data- 的方式传递数据 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;button bindtap=&quot;btnHandler&quot; data-id=&quot;1&quot; data-name=&quot;tom&quot;&gt;按钮&lt;/button&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">data-id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">data-name</span>=<span class="string">&quot;tom&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 js 文件中，可以通过 event.currentTarget.dataset 获取传递的数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 按钮触发的事件处理函数</span></span><br><span class="line">  <span class="title function_">btnHandler</span> (event) &#123;</span><br><span class="line">    <span class="comment">// currentTarget 事件绑定者，也就是指：哪个组件绑定了当前事件处理函数</span></span><br><span class="line">    <span class="comment">// target 事件触发者，也就是指：哪个组件触发了当前事件处理函数</span></span><br><span class="line">    <span class="comment">// currentTarget 和 target 都是指按钮，因为是按钮绑定的事件处理函数，同时点击按钮触发事件处理函数</span></span><br><span class="line">    <span class="comment">// 这时候通过谁来获取数据都可以</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">id</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// view 绑定的事件处理函数</span></span><br><span class="line">  <span class="title function_">parentHandler</span> (event) &#123;</span><br><span class="line">    <span class="comment">// 点击view区域(不点击按钮)</span></span><br><span class="line">    <span class="comment">// currentTarget 事件绑定者：view</span></span><br><span class="line">    <span class="comment">// target 事件触发者：view</span></span><br><span class="line">    <span class="comment">// currentTarget 和 target 都是指 view，如果想获取 view 身上的数据，使用谁都可以</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 点击按钮(不点击view区域)</span></span><br><span class="line">    <span class="comment">// currentTarget 事件绑定者：view</span></span><br><span class="line">    <span class="comment">// target 事件触发者：按钮</span></span><br><span class="line">    <span class="comment">// 如果想获取 view 身上的数据，就必须使用 currentTarget 才可以</span></span><br><span class="line">    <span class="comment">// 如果想获取的是事件触发者本身的数据，就需要使用 target</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在传递参数的时候，如果自定义属性是多个单词，单词与单词直接使用中划线 - 进行连接</span></span><br><span class="line">    <span class="comment">// 在事件对象中会被转换为小托峰写法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">parentId</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在传递参数的时候，如果自定义属性是多个单词，单词如果使用的是小托峰写法</span></span><br><span class="line">    <span class="comment">// 在事件对象中会被转为全部小写的</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">parentname</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：<br>​	使用 <code>data-</code> 方法传递参数的时候，多个单词由连字符 <code>-</code> 连接<br>​	连字符写法会转换成驼峰写法，而大写字符会自动转成小写字符<br>​	例如：<br>​		<code>data-element-type</code> ，最终会呈现为 <code>event.currentTarget.dataset.elementType </code><br>​		<code>data-elementType</code> ，最终会呈现为 <code>event.currentTarget.dataset.elementtype</code></p>
</blockquote>
<h3 id="事件传参-mark-自定义数据"><a href="#事件传参-mark-自定义数据" class="headerlink" title="事件传参-mark 自定义数据"></a>事件传参-mark 自定义数据</h3><ol>
<li><p>小程序进行事件传参的时候，除了使用 <code>data-*</code> 属性传递参数外，还可以使用 <code>mark</code> 标记传递参数<br><code>mark</code>是一种自定义属性，可以在组件上添加，用于来识别具体触发事件的 target 节点。同时 <code>mark</code> 还可以用于承载一些自定义数据（类似于 <code>dataset</code> ）</p>
</li>
<li><p><code>mark</code> 和 <code>dataset</code> 很相似，主要区别在于：<br><code>mark</code> 会包含从触发事件的节点到根节点上所有的 <code>mark:</code> 属性值 (事件委托的)</p>
</li>
</ol>
<p><code>dataset</code> 仅包含触发事件那一个节点的 <code>data-</code> 属性值。</p>
<ol start="3">
<li>代码说明：<br>在 wxml 文件中，使用 <code>mark:自定义属性</code> 的方式将数据传递给事件处理函数</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">bindtap</span>=<span class="string">&quot;parentHandler&quot;</span> <span class="attr">mark:parentid</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mark:parentname</span>=<span class="string">&quot;tom&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果需要使用 mark 进行事件传参，需要使用 mark:自定义属性的方式进行参数传递 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;button bindtap=&quot;btnHandler&quot; mark:id=&quot;1&quot; mark:name=&quot;tom&quot;&gt;按钮&lt;/button&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">mark:id</span>=<span class="string">&quot;1&quot;</span> <span class="attr">mark:name</span>=<span class="string">&quot;tom&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 按钮绑定的事件处理函数</span></span><br><span class="line">  <span class="title function_">btnHandler</span> (event) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">mark</span>.<span class="property">id</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">mark</span>.<span class="property">name</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// view 绑定的事件处理函数</span></span><br><span class="line">  <span class="title function_">parentHandler</span> (event) &#123;</span><br><span class="line">    <span class="comment">// 先点击view区域 (不点击按钮)</span></span><br><span class="line">    <span class="comment">// 通过事件对象获取的是 view 身上绑定的数据</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 先点击按钮 (不点击view区域)</span></span><br><span class="line">    <span class="comment">// 通过事件对象获取到的是 触发事件的节点以及父节点身上所有的 mark 数据</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><h3 id="声明和绑定数据"><a href="#声明和绑定数据" class="headerlink" title="声明和绑定数据"></a>声明和绑定数据</h3><ol>
<li>小程序页面中使用的数据均需要在 Page() 方法的 data 对象中进行声明定义<br>在将数据声明好以后，需要在 WXML 中绑定数据，数据绑定最简单的方式是使用 Mustache 语法<code>&#123;&#123;双大括号&#125;&#125;</code>将变量包起来。<blockquote>
<p>在<code>&#123;&#123;双大括号&#125;&#125;</code>内部可以做一些简单的运算，支持如下几种方式：<br>算数运算<br>三元运算<br>逻辑判断</p>
</blockquote>
</li>
<li>在 <code>&#123;&#123; &#125;&#125;</code> 语法中，只能写表达式，不能写语句，也不能调用 js 相关的方法</li>
<li>代码讲解<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果需要展示数据，在 wxml 中需要使用双大括号写法将变量进行包裹 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 展示内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; school &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; obj.name &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 绑定属性值，如果需要动态绑定一个变量，属性值也需要使用双大括号进行包裹 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">&quot;&#123;&#123; id &#125;&#125;&quot;</span>&gt;</span>绑定属性值<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 如果属性值是布尔值，也需要使用双大括号进行包裹 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">checked</span>=<span class="string">&quot;&#123;&#123; isChecked &#125;&#125;&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 算术运算 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; id + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; id - 1 &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 三元运算 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; id === 1 ? &#x27;等于&#x27; : &#x27;不等于&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 逻辑判断 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; id === 1 &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在双大括号写法内部，只能写表达式，不能写语句，也不能调用 js 的方法 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;view&gt;&#123;&#123; if (id === 1) &#123;&#125; &#125;&#125;&lt;/view&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;view&gt;&#123;&#123; for (const i = 0; i &lt;= 10; i++) &#123;&#125; &#125;&#125;&lt;/view&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; obj.name.toUpperCase() &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对应vxml的.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 在小程序页面中所需要使用的数据均来自于 data 对象</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">isChecked</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">school</span>: <span class="string">&#x27;西华大学&#x27;</span>,</span><br><span class="line">    <span class="attr">obj</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;西西&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="声明和修改数据"><a href="#声明和修改数据" class="headerlink" title="声明和修改数据"></a>声明和修改数据</h3><ol>
<li>小程序中修改数据并不能直接进行赋值（赋值的方法能够修改数据但不能够更新页面数据），而是要通过调用 <code>this.setData</code> 方法才能实现<br>将需要修改的数据以 <code>key:value</code> 的形式传给 <code>this.setData</code> 方法。<br><code>this.setData</code> 方法有两个作用：<br>1）更新数据<br>2）驱动视图（页面）数据更新</li>
<li>代码举例：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 页面的初始数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateNum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="comment">// key (num)是需要修改的数据</span></span><br><span class="line">      <span class="comment">// value (this.data.num + 1)是最新值</span></span><br><span class="line">      <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">num</span> + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="setData-修改（增删改）对象类型数据"><a href="#setData-修改（增删改）对象类型数据" class="headerlink" title="setData-修改（增删改）对象类型数据"></a>setData-修改（增删改）对象类型数据</h3><p>在实际开发中，我们经常会在 <code>data</code> 中声明对象类型的数据，小程序中通过调用 setData 方法可以修改页面的数据，包括对象类型的数据。下面是修改对象类型数据的方法：</p>
<ol>
<li><p>先定义一个对象</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 定义页面中使用的数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;西西&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">      <span class="attr">gender</span>: <span class="string">&#x27;女&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新增或修改对象中的数据：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//把函数绑定在页面的按钮上，点击页面中的按钮触发函数</span></span><br><span class="line"><span class="title function_">updateUserInfo</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="comment">//新增单个或多个属性：</span></span><br><span class="line">     <span class="string">&#x27;userInfo.color&#x27;</span>: <span class="string">&#x27;orange&#x27;</span>,</span><br><span class="line">     <span class="comment">//修改属性值：</span></span><br><span class="line">     <span class="string">&#x27;userInfo.name&#x27;</span>: <span class="string">&#x27;琪琪&#x27;</span></span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>新增或修改数据：使用ES6的展开运算符<br>在修改对象类型的数据时，可以使用 ES6 的展开运算符(…)先复制对象，然后利用新值对旧值覆盖的方式修改</p>
</li>
</ol>
 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> userInfo = &#123;</span><br><span class="line"> <span class="comment">//把userInfo这个对象的数据复制过来</span></span><br><span class="line">  ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">userInfo</span>,</span><br><span class="line">  <span class="comment">//下面的属性值会覆盖userInfo中同名属性值</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Jerry&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改对象中的多个属性</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">userInfo</span>:userInfo</span><br><span class="line">  <span class="comment">//或userInfo</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>使用 Object.assign 方法合并对象<br>增加或修改对象中的属性<br>可以用Object.assign()方法将多个对象合并为一个对象，从后往前合并</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> userInfo = <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">userInfo</span>,&#123;<span class="attr">name</span>:<span class="string">&#x27;西西&#x27;</span>,&#123;<span class="attr">age</span>:<span class="number">22</span>&#125;)</span><br><span class="line"></span><br><span class="line"> <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">     <span class="attr">userInfo</span>:userInfo</span><br><span class="line">     <span class="comment">//或userInfo</span></span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>使用解构赋值修改对象属性<br>在修改对象类型的数据时，可以使用解构赋值来修改对象属性<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将 userInfo 从 data 中进行解构</span></span><br><span class="line"><span class="keyword">const</span> &#123; userInfo &#125; = <span class="variable language_">this</span>.<span class="property">data</span></span><br><span class="line"><span class="comment">// 产生一份新数据</span></span><br><span class="line"><span class="keyword">const</span> newUserInfo = &#123;</span><br><span class="line">  ...userInfo,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Jerry&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 修改对象中的多个属性</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">userInfo</span>: newUserInfo</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>删除对象中的属性<br>在删除对象中的属性时，<strong>不能</strong>使用 <code>delete</code> 操作符，因为小程序的数据绑定机制不支持监听 delete 操作<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用展开运算符拷贝一份数据，产生一个新对象</span></span><br><span class="line"><span class="keyword">const</span> newUser = &#123; ...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">userInfo</span> &#125;</span><br><span class="line"><span class="comment">// 使用 delete 删除新对象中的属性</span></span><br><span class="line"><span class="keyword">delete</span> newUser.<span class="property">age</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="comment">// 将新的对象进行赋值</span></span><br><span class="line">  <span class="attr">userInfo</span>: newUser</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li>注意事项：<br>小程序的数据绑定机制只能监听到 setData 方法中修改的数据，无法监听到直接删除属性的操作，所以在删除对象属性时，需要先将对象复制一份再进行操作，然后再调用setData方法更新数据。</li>
</ol>
<h3 id="setData-修改数组类型数据"><a href="#setData-修改数组类型数据" class="headerlink" title="setData-修改数组类型数据"></a>setData-修改数组类型数据</h3><p>数组类型数据也是经常会使用的数据格式之一，下面是修改数组类型数据的方法：</p>
<ol>
<li><p>定义一个数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 定义页面中使用的数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">animalList</span>: [<span class="string">&#x27;熊猫&#x27;</span>, <span class="string">&#x27;小狗&#x27;</span>, <span class="string">&#x27;小猫&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>使用数组的push方法新增属性<br>在修改数组类型的数据时，可以使用数组的 push 方法来添加元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//使用数组的push方法来添加元素</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">animalList</span>.<span class="title function_">push</span>(<span class="string">&#x27;新增了我哦&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用setData进行赋值，更新视图</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">animalList</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">animalList</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>使用数组的concat方法合并数组<br>在修改数组类型的数据时，可以使用数组的 concat 方法来合并数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用 concat 方法来合并数组</span></span><br><span class="line"><span class="keyword">const</span> newList = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">animalList</span>.<span class="title function_">concat</span>(<span class="string">&#x27;新增了我哦&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 setData 进行赋值</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">animalList</span>: newList</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>使用 ES6 的展开运算符<br>使用 ES6 的展开运算符先复制数组，然后进行合并</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用 ES6 的展开运算符(...)先复制数组，然后进行合并</span></span><br><span class="line"><span class="keyword">const</span> newList = [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">animalList</span>, <span class="string">&#x27;新增了我哦&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 setData 进行赋值</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">animalList</span>: newList</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改数组中某个元素的值：<br>利用索引的方式进行修改，但必须使用 wx:for 来进行渲染数组，否则会出现错误</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="string">&#x27;animalList[2]&#x27;</span>: <span class="string">&#x27;修改了我哦&#x27;</span> </span><br><span class="line">  <span class="comment">//输入对象里面还有东西，可以这样</span></span><br><span class="line"> <span class="comment">//&#x27;animalList[2].name&#x27;: &#x27;修改了我哦&#x27; </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>使用数组的 filter 方法删除元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用数组的 filter 方法来删除元素</span></span><br><span class="line"><span class="comment">//把熊猫筛选出来删掉，其他的组成一个新数组</span></span><br><span class="line"><span class="keyword">const</span> newList = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">animalList</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item !== <span class="string">&#x27;熊猫&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 setData 进行赋值</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">animalList</span>: newList</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="数据绑定-简易双向绑定"><a href="#数据绑定-简易双向绑定" class="headerlink" title="数据绑定-简易双向绑定"></a>数据绑定-简易双向绑定</h3><ol>
<li>简易双向绑定机制:在对应值之前加入 <code>model:</code> 前缀<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">model:value</span>=<span class="string">&quot;&#123;&#123; value &#125;&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">model:checked</span>=<span class="string">&quot;&#123;&#123;isChecked&#125;&#125;&quot;</span>/&gt;</span>是否同意该协议</span><br></pre></td></tr></table></figure>
如果输入框的值被改变了，<code>data</code> 的数据也会随着改变,同时， WXML 中所有绑定了数据的位置也会被一同更新</li>
</ol>
<blockquote>
<p>注意：<br>简易双向绑定的属性值如下限制：</p>
<ol>
<li>只能是一个单一字段的绑定，不支持拼接操作，例如：错误用法：<br><code>&lt;input model:value=&quot;值为 &#123;&#123;value&#125;&#125;&quot; /&gt;</code></li>
<li>不能写data路径，也就是不支持数组和对象，例如：<strong>错误用法</strong>：<br><code>&lt;input model:value=&quot;&#123;&#123; a.b &#125;&#125;&quot; /&gt;</code><br><code>&lt;input model:value=&quot;&#123;&#123; obj.value &#125;&#125;&quot; /&gt;</code><br><code> </code></li>
</ol>
</blockquote>
<h3 id="列表渲染-基本使用"><a href="#列表渲染-基本使用" class="headerlink" title="列表渲染-基本使用"></a>列表渲染-基本使用</h3><ol>
<li>列表渲染：就是指通过循环遍历一个数组或对象，将其中的每个元素渲染到页面上</li>
</ol>
<ol>
<li>只需要在组件上使用 <code>wx:for</code> 属性绑定一个数组，即可使用数组中各项的数据重复渲染该组件<br>默认数组当前项的变量名默认为 <code>item</code><br>默认数组的当前项的下标变量名默认为 <code>index</code></li>
<li>注意：在使用 <code>wx:for</code> 对数组进行遍历的时候，建议加上 <code>wx:key</code> 属性，如不提供 <code>wx:key</code>，会报一个 <code>warning</code>， 如果明确知道该列表是静态，即以后数据不会改变，或者不必关注其顺序，可以选择忽略</li>
</ol>
<ol start="2">
<li><code>wx:key</code>可以提升性能<br><code>wx:key</code>值以两种形式提供：</li>
</ol>
<ol>
<li>字符串：代表需要遍历的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变</li>
<li>保留关键字 <code>*this</code> 代表在 for 循环中的 item 本身，当 item 本身是一个唯一的字符串或者数字时可以使用<br>wx:key 的属性值不需要使用双大括号进行包裹，直接写遍历的数组 中 item 的某个属性，一般是id</li>
</ol>
<ol start="3">
<li><p>当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且 <strong>提高列表渲染时的效率</strong> </p>
</li>
<li><p>代码示例</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--每一项的变量名默认是 item --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--每一项下标(索引)的变量名默认是 index --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--如果渲染的是数组，item:数组的每一项，index:下标--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; numList &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;-&#123;&#123; index &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--如果渲染的是对象，item:对象属性的值，index:对象属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; obj &#125;&#125;&quot;</span>&gt;</span>&#123;&#123; item &#125;&#125;-&#123;&#123; index &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>渲染多节点结构块：<br>如果需要渲染一个包含多节点的结构块，可以使用一个 <code>&lt;block/&gt;</code> 标签将多个组件包装起来</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; animal &#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.avatar &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<br><code>&lt;block/&gt;</code> 并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性。</p>
</blockquote>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><ol>
<li>条件渲染主要用来控制页面结构的展示和隐藏，在微信小程序中实现条件渲染有两种方式：</li>
</ol>
<ol>
<li>使用 <code>wx:if</code>、<code>wx:elif</code>、<code>wx:else</code> 属性组</li>
<li>使用 <code>hidden</code> 属性：hidden 属性属性值如果是true会隐藏结构，如果是 false会展示结构</li>
</ol>
<ol start="2">
<li><code>wx:if</code> 和 <code>hidden</code> 二者的区别：</li>
</ol>
<ul>
<li><code>wx:if</code> ：当条件为 <code>true</code> 时将内容渲染出来，否则元素不会进行渲染，通过移除&#x2F;新增节点的方式来实现</li>
<li><code>hidden</code> ：当条件为 <code>true</code> 时会将内容隐藏，否则元素会显示内容，通过css的 <code>display</code> 样式属性来实现的</li>
</ul>
<ol start="3">
<li>代码演示<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 wx:if、wx:elif、wx:else 属性组控制元素的隐藏和控制 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123; num === 1 &#125;&#125;&quot;</span>&gt;</span>num 等于 &#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:elif</span>=<span class="string">&quot;&#123;&#123; num === 2 &#125;&#125;&quot;</span>&gt;</span>num 等于 &#123;&#123; num &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>大于 2<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用hidden属性组控制元素的隐藏和控制 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123; num !== 1 &amp;&amp; num !== 2 &amp;&amp; num !== 3 &amp;&amp; num &lt; 3&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">  &#123;&#123; num &lt; 3 ? &#x27;num 等于&#x27; + num : &#x27;大于 2&#x27; &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;updateNum&quot;</span>&gt;</span>修改数据<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">// 页面的初始数据</span></span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 更新数据</span></span><br><span class="line">  <span class="title function_">updateNum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">      <span class="attr">num</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">num</span> + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="小程序的生命周期"><a href="#小程序的生命周期" class="headerlink" title="小程序的生命周期"></a>小程序的生命周期</h2><h3 id="小程序运行机制"><a href="#小程序运行机制" class="headerlink" title="小程序运行机制"></a>小程序运行机制</h3><ol>
<li>冷启动与热启动：<br>小程序启动可以分为两种情况，一种是冷启动，一种是热启动</li>
</ol>
<ol>
<li><p>冷启动：如果用户首次打开，或小程序销毁后被用户再次打开，此时小程序需要重新加载启动</p>
</li>
<li><p>热启动：如果用户已经打开过某小程序，然后在一定时间内再次打开该小程序，此时小程序并未被销毁，只是从后台状态进入前台状态</p>
</li>
</ol>
<ol start="2">
<li>前台与后台状态：</li>
</ol>
<ol>
<li><p>小程序启动后，界面被展示给用户，此时小程序处于「前台」状态。</p>
</li>
<li><p>当用户「关闭」小程序时，小程序并没有真正被关闭，而是进入了「后台」状态，当用户再次进入微信并打开小程序，小程序又会重新进入「前台」状态</p>
</li>
</ol>
<blockquote>
<p>切后台的方式包括但不限于以下几种：</p>
<ul>
<li>点击右上角胶囊按钮离开小程</li>
<li>安卓点击返回键离开小程序</li>
<li>屏幕左侧右滑离开小程序</li>
</ul>
<ol start="3">
<li>挂起：<br>小程序进入「后台」状态一段时间后（5 秒），微信停止小程序 JS 线程执行，小程序进入「挂起」状态，当开发者使用了后台播放音乐、后台地理位置等能力时，小程序可以在后台持续运行，不会进入到挂起状态</li>
<li>销毁：<br>如果用户很久没有使用小程序，或者系统资源紧张，小程序会被销毁，即完全终止运行。</li>
</ol>
</blockquote>
<p>当小程序进入后台并被「挂起」后，如果很长时间（目前是 30 分钟）都未再次进入前台，小程序会被销毁</p>
<p>当小程序占用系统资源过高，可能会被系统销毁或被微信客户端主动回收。</p>
<h3 id="小程序更新机制"><a href="#小程序更新机制" class="headerlink" title="小程序更新机制"></a>小程序更新机制</h3><ol>
<li>理解<br>在访问小程序时，微信会将小程序代码包缓存到本地。<br>开发者在发布了新的小程序版本以后，微信客户端会检查本地缓存的小程序有没有新版本，并进行小程序代码包的更新。</li>
<li>小程序的更新机制有两种：启动时同步更新和启动时异步更新</li>
</ol>
<ol>
<li>启动时同步更新（能覆盖%99的用户）：<br>微信运行时，会定期检查最近使用的小程序是否有更新。如果有更新，下次小程序启动时会同步进行更新，更新到最新版本后再打开小程序。如果 用户长时间未使用小程序时，会强制同步检查版本更新</li>
<li>启动时异步更新（同步更新没被覆盖到的）<br>启动时异步更新：在启动前没有发现更新，小程序每次 冷启动 时，都会异步检查是否有更新版本。如果发现有新版本，将会异步下载新版本的代码包，<strong>将新版本的小程序在下一次冷启动进行使用</strong>，当前访问使用的依然是本地的旧版本代码</li>
</ol>
<ol start="3">
<li>在启动时异步更新的情况下，如果开发者希望立刻进行版本更新，可以使用API 进行处理。在有新版本时提示用户重启小程序更新新版本。API<a href="https://developers.weixin.qq.com/miniprogram/dev/api/base/update/wx.getUpdateManager.html">wx.getUpdateManager</a><br>视频有举例的代码，但是具体怎么搞还是要看官方文档</li>
</ol>
<h3 id="小程序生命周期"><a href="#小程序生命周期" class="headerlink" title="小程序生命周期"></a>小程序生命周期</h3><ol>
<li>初步理解<br>应用生命周期是指应用程序进程从创建到消亡的整个过程<br>小程序的生命周期指的是 小程序从启动到销毁的整个过程</li>
<li>仔细理解<br>在打开一个小程序应用的时候都需要经历一系列的初始化步骤，比如页面是否加载完成、页面是否初次渲染完成等等。<br>在此过程中，小程序会运行生命周期钩子的函数，这些函数由小程序框架本身提供，被称为生命周期函数，生命周期函数会按照顺序依次自动触发调用，帮助程序员在特定的时机执行特定的操作，辅助程序员完成一些比较复杂的逻辑。让开发者有机会在特定阶段运行自己的代码。</li>
<li>小程序的生命周期分类：<br>分为三类：应用别级、页面级别和组件级别种类型</li>
</ol>
<h4 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h4><ol>
<li>简单理解：<br>应用生命周期通常是指一个小程序从 启动 → 运行 → 销毁的整个过程</li>
<li>应用生命周期函数理解<br>应用生命周期伴随着一些函数，称为应用生命周期函数，应用生命周期函数需要 在 app.js 文件的 App() 方法中定义<br>理解：当整个小程序应用运行到某个时机的时候，我们需要做一些事情。例如：当小程序启动成功之后，我们要获取小程序的一些信息，就可以在小程序启动成功时的钩子函数中写代码获取我们想要的信息</li>
<li>应用生命周期函数组成<br>应用生命周期函数由 onLaunch（小程序初始化，只会在冷启动的时候执行一次）、onShow（小程序冷启动或切前台执行）、onHide（小程序切后台执行）三个函数组成。<br>启动小程序 → onLaunch → onShow → onHide<br>注意：当小程序切后台被挂起后，如果在三分钟以内切回前台（热启动），那么会再次执行onShow；如果是小程序被销毁或者挂起的事件太久（30分钟以上），那么切回前台会重新启动小程序然后执行onLaunch再执行onShow</li>
<li>代码如何写<br>在app.js文件中输入app，选带方框的App按回车，会自动生成上面这三个钩子函数<br>如：app.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onLaunch</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 监听小程序初始化</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onLaunch: 当小程序初始化完成时，会触发 onLaunch&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 当小程序启动，或从后台进入前台显示，会触发 onShow</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="comment">// 监听小程序的显示</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onShow: 当小程序启动，或从后台进入前台显示&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 当小程序从前台进入后台，会触发 onHide</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 监听小程序的隐藏</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onHide: 小程序从前台进入后台&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h4><ol>
<li>简单理解：<br>页面生命周期就是指小程序页面从 加载 → 运行 → 销毁的整个过程</li>
<li>页面生命周期函数理解：<br>当某个页面运行到某个时机的时候，我们需要做一些事情，例如: 当某个页面加载完毕之后，需要发请求获取当前页面所需的数据，就可以在对应的页面加载完成后的钩子函数中执行发送请求的代码。<br>小程序中的一个页面都需要在对应页面的 <code>.js</code> 文件中调用 <code>Page()</code> 方法来注册。<code>Page()</code> 接受一个 <code>Object</code> 类型参数，其指定页面的初始数据、生命周期回调、事件处理函数等。</li>
<li>应用生命周期函数组成：</li>
</ol>
<ol>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onLoad-Object-query">onLoad</a> 页面加载时触发 (一个页面只会调用一次) </li>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onShow">onShow</a> 页面显示时触发，页面显示&#x2F;切入前台时触发    </li>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onReady">onReady</a>  页面初次渲染完成时触发(一个页面只会调用一次)<br />代表页面已经准备妥当，可以和视图层进行交互 </li>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onHide">onHide</a>  页面隐藏&#x2F;切入后台时触发             |</li>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onUnload">onUnload</a>     页面卸载时触发</li>
</ol>
<ol start="4">
<li>代码演示<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// pages/home/home.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">// coding...</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 生命周期函数--监听页面加载</span></span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面加载完毕&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期函数--监听页面显示</span></span><br><span class="line">  <span class="attr">onShow</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听页面显示，此时页面处于显示状态&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期函数--监听页面初次渲染完成</span></span><br><span class="line">  <span class="attr">onReady</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面初次渲染已经完成&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期函数--监听页面隐藏</span></span><br><span class="line">  <span class="attr">onHide</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前页面处于隐藏状态&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 生命周期函数--监听页面卸载</span></span><br><span class="line">  <span class="attr">onUnload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面卸载时触发&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="生命周期补充说明（两个细节）"><a href="#生命周期补充说明（两个细节）" class="headerlink" title="生命周期补充说明（两个细节）"></a>生命周期补充说明（两个细节）</h4><ol>
<li>tabBar 页面之间相互切换，页面不会被销毁</li>
<li>点击左上角，返回上一个页面，会销毁当前页面(被打开页面)</li>
</ol>
<h2 id="小程序的API"><a href="#小程序的API" class="headerlink" title="小程序的API"></a>小程序的API</h2>]]></content>
      <categories>
        <category>项目</category>
      </categories>
  </entry>
  <entry>
    <title>全栈项目篇-食悦平台（重后端）</title>
    <url>/2024/11/01/14-web%E5%85%A8%E6%A0%88%E9%A1%B9%E7%9B%AE-%E9%A3%9F%E5%A0%82%E7%BE%8E%E9%A3%9F/</url>
    <content><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>这篇文章记录学校课程，web全栈项目中我负责的部分，以后端为主（因为我后端的知识遗忘太多了..）</p>
<h1 id="重要文件解读"><a href="#重要文件解读" class="headerlink" title="重要文件解读"></a>重要文件解读</h1><h2 id="常见注解"><a href="#常见注解" class="headerlink" title="常见注解"></a>常见注解</h2><ol>
<li>@Resource:<br>这是一个 Java 注解，用于依赖注入。它类似于 Spring 的 @Autowired，但更通用，支持更多的注入方式。</li>
<li>@Service<br>标记这是一个<br>Spring 服务组件。Spring 会自动扫描并管理这个类的实例</li>
<li>@Override<br>注解在 Java 中用于明确表示一个方法重写了父类或实现了接口中的某个方法。<br>在服务层impl类中常用<br>使用 @Override 注解有几个重要的好处：</li>
</ol>
<p>提高代码可读性: 清晰地表明该方法是重写自父类或接口的方法。<br>编译时检查: 如果父类或接口中不存在对应的方法，编译器会报错，从而防止拼写错误或其他误操作。<br>维护方便: 当父类或接口发生变化时，IDE 可以提示哪些方法需要更新。<br>4. @RestController<br>是@Controller 和 @ResponseBody 的组合，简化了WESTful Web服务的开发</p>
<h2 id="整体架构逻辑关系"><a href="#整体架构逻辑关系" class="headerlink" title="整体架构逻辑关系"></a>整体架构逻辑关系</h2><p><a href="https://lxblog.com/qianwen/share?shareId=07210c85-20fe-4b6b-8091-7a06745de5b0">https://lxblog.com/qianwen/share?shareId=07210c85-20fe-4b6b-8091-7a06745de5b0</a></p>
<p>前端发送请求到控制器，控制器调用服务层，服务层调用serviceimpl来实现服务器接口的方法，然后进入dao数据访问层，在MyBatis 映射文件 Mapper.xml里面定义了sql语句，然后进行数据库数据操作。实体类entity表示数据库表的接口，vo视图对象用于传输数据的对象，包含更多展示的或关联的信息<br>假设我们正在构建一个简单的分类管理系统，其中涉及以下几个主要组件：</p>
<p>实体类 (Entity): 表示数据库表的结构。<br>视图对象 (VO): 用于传输数据的对象。<br>数据访问层 (DAO): 负责与数据库进行交互。<br>服务层 (Service): 处理业务逻辑。<br>控制层 (Controller): 处理客户端请求。<br>MyBatis 映射文件: 定义 SQL 语句。</p>
<p>以下是各个文件之间的交互关系：</p>
<p>前端 (index.html):<br>用户通过浏览器发送 HTTP 请求到后端。<br>使用 Fetch API 发送 GET 请求到 &#x2F;classifyInfo 端点。<br>接收并解析后端返回的 JSON 数据，显示分类信息及其+子分类信息。<br>控制器 (ClassifyInfoController.java):<br>处理前端发送的 HTTP 请求。<br>根据请求路径和方法调用相应的服务层方法。<br>返回处理结果给前端。<br>服务层 (ClassifyInfoServiceImpl.java):<br>实现具体的业务逻辑。<br>调用数据访问层方法操作数据库。<br>将处理结果返回给控制器。<br>数据访问层 (ClassifyInfoDao.java):<br>定义与数据库交互的方法。<br>通过 MyBatis 映射文件执行具体的 SQL 语句。<br>MyBatis 映射文件 (ClassifyInfoMapper.xml):<br>定义具体的 SQL 语句。<br>与数据访问层接口中的方法对应。<br>实体类 (ClassifyInfo.java):<br>表示数据库表的结构。<br>用于存储分类信息的基本数据。<br>视图对象 (ClassifyInfoVo.java):<br>用于传输数据的对象。<br>包含更多的展示信息或关联信息。</p>
<h2 id="ajax-axios"><a href="#ajax-axios" class="headerlink" title="ajax axios"></a>ajax axios</h2><p><a href="https://lxblog.com/qianwen/share?shareId=99c467a7-56f9-4604-afdc-1d870d291744">https://lxblog.com/qianwen/share?shareId=99c467a7-56f9-4604-afdc-1d870d291744</a></p>
<h2 id="服务层，控制层，dao层重点理解"><a href="#服务层，控制层，dao层重点理解" class="headerlink" title="服务层，控制层，dao层重点理解"></a>服务层，控制层，dao层重点理解</h2><h3 id="MyBatis映射文件"><a href="#MyBatis映射文件" class="headerlink" title="MyBatis映射文件"></a>MyBatis映射文件</h3><p>映射文件（如 NxSystemFileInfoDao.xml）通常位于 src&#x2F;main&#x2F;resources&#x2F;mapper&#x2F; 目录下）定义了具体的 SQL 查询语句，与 DAO 接口中的方法一一对应</p>
<h3 id="控制层"><a href="#控制层" class="headerlink" title="控制层"></a>控制层</h3><ol>
<li>作用: 处理 HTTP 请求和响应。<br>将业务逻辑交给 Service 层处理<br>返回业务结果</li>
<li>特点:<br>处理 HTTP 请求：接收客户端的请求并返回响应。<br>路由和参数解析：根据 URL 和请求参数调用相应的方法。<br>调用 Service 层：将具体的业务逻辑交给 Service 层处理。<br>返回结果：将 Service 层的结果封装成 HTTP 响应返回给客户端。</li>
</ol>
<h3 id="服务层"><a href="#服务层" class="headerlink" title="服务层"></a>服务层</h3><ol>
<li>作用：处理业务逻辑：实现具体的业务功能。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作<br>返回响应 </li>
<li>特点<br>业务逻辑处理：实现应用程序的核心业务逻辑。<br>事务管理：管理数据库事务，确保数据的一致性。<br>权限控制：检查用户是否有权执行某些操作。<br>数据校验：验证输入数据的有效性和完整性。<br>调用 DAO 层：与数据库交互，执行 CRUD 操作。<br>抽象接口：提供清晰的业务接口，便于测试和维护</li>
</ol>
<h3 id="dao层"><a href="#dao层" class="headerlink" title="dao层"></a>dao层</h3><ol>
<li>作用：与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>提供基础 CRUD 操作：通过继承通用 Mapper 接口简化操作<br>返回数据结果</li>
<li>特点<br>与数据库交互：执行 SQL 操作，如查询、插入、更新和删除。<br>CRUD 操作：提供基础的增删改查方法。<br>自定义查询：可以根据需要编写自定义的查询方法。<br>隔离数据库细节：隐藏底层数据库的具体实现细节，使得业务逻辑层不直接依赖数据库。<br>提高可维护性：集中管理数据库操作，减少重复代码</li>
</ol>
<h3 id="三者关系"><a href="#三者关系" class="headerlink" title="三者关系"></a>三者关系</h3><ol>
<li>控制层调用服务层：<br>Controller 接收请求后，调用 Service 层的方法处理业务逻辑。</li>
<li>服务层调用 DAO 层：<br>Service 层在处理业务逻辑时，调用 DAO 层的方法与数据库交互。</li>
<li>数据流：<br>请求 -&gt; Controller -&gt; Service -&gt; DAO -&gt; 数据库<br>数据库 -&gt; DAO -&gt; Service -&gt; Controller -&gt; 响应</li>
</ol>
<h2 id="目录解读"><a href="#目录解读" class="headerlink" title="目录解读"></a>目录解读</h2><h3 id="各目录及文件的作用"><a href="#各目录及文件的作用" class="headerlink" title="各目录及文件的作用"></a>各目录及文件的作用</h3><p>src&#x2F;main&#x2F;java&#x2F;com.example&#x2F;<br>controller&#x2F;：存放所有的控制器类，这些类负责处理HTTP请求，调用服务层方法，并返回响应。<br>例如：MenuController.java, EchartsController.java, ClassifyInfoController.java 等。<br>service&#x2F;：存放服务层接口，这些接口定义了业务逻辑的方法。<br>例如：AdminInfoService.java, UserInfoService.java 等。<br>service&#x2F;impl&#x2F;：存放服务层接口的具体实现类。<br>例如：AdminInfoServiceImpl.java, UserInfoServiceImpl.java 等。<br>dao&#x2F; or repository&#x2F;：存放数据访问对象（DAO）或仓库（Repository）接口，这些接口定义了与数据库交互的方法。<br>例如：AdminInfoDao.java, UserInfoDao.java 等。<br>entity&#x2F;：存放实体类，这些类通常对应数据库中的表，用于封装数据。<br>例如：AdminInfo.java, UserInfo.java 等。<br>config&#x2F;：存放配置类，这些类用于配置Spring框架的各种组件。<br>例如：WebConfig.java, DatabaseConfig.java 等。<br>common&#x2F;：存放通用工具类、常量类等。<br>例如：Result.java, Utils.java 等。<br>Application.java：项目的启动类，通常包含Spring Boot应用的入口点。<br>例如：@SpringBootApplication 注解的类。<br>src&#x2F;main&#x2F;resources&#x2F;<br>application.properties：配置文件，用于配置应用的各种参数，如数据库连接、服务器端口等。<br>例如：spring.datasource.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mydb 等。<br>static&#x2F;：存放静态资源文件，如CSS、JavaScript、图片等。<br>例如：style.css, script.js, logo.png 等。<br>templates&#x2F;：存放模板文件，通常用于Thymeleaf或其他模板引擎。<br>例如：index.html, login.html 等。<br>src&#x2F;test&#x2F;java&#x2F;com.example&#x2F;<br>TestClasses.java：存放测试类，这些类用于编写单元测试和集成测试。<br>例如：MenuControllerTest.java, UserServiceTest.java 等。</p>
<h2 id="yml文件解读"><a href="#yml文件解读" class="headerlink" title="yml文件解读"></a>yml文件解读</h2><p>application.yml 文件详解<br>server 配置<br>yaml<br>深色版本<br>server:<br>  port: 8080<br>  connection-timeout: 60000<br>port: 8080<br>指定应用运行的端口号，默认是8080。<br>connection-timeout: 60000<br>设置连接超时时间，单位是毫秒。这里设置为60000毫秒，即60秒。<br>spring 配置<br>yaml<br>深色版本<br>spring:<br>  datasource:<br>    driver-class-name: com.mysql.cj.jdbc.Driver<br>    username: root<br>    password: 123456<br>    url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>  thymeleaf:<br>    cache: false #关闭缓存<br>  servlet:<br>    multipart:<br>      max-file-size: 100MB<br>      max-request-size: 100MB<br>datasource:<br>driver-class-name: com.mysql.cj.jdbc.Driver<br>指定数据库驱动类名，这里是MySQL的驱动。<br>username: root<br>数据库用户名。<br>password: 123456<br>数据库密码。<br>url: jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;deliciousFoods?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf-8&amp;allowMultiQueries&#x3D;true&amp;useSSL&#x3D;false&amp;serverTimezone&#x3D;GMT%2b8<br>数据库连接URL，包括数据库地址、端口、数据库名以及一些连接参数。<br>useUnicode&#x3D;true: 使用Unicode字符集。<br>characterEncoding&#x3D;utf-8: 设置字符编码为UTF-8。<br>allowMultiQueries&#x3D;true: 允许执行多条SQL语句。<br>useSSL&#x3D;false: 不使用SSL连接。<br>serverTimezone&#x3D;GMT%2b8: 设置服务器时区为东八区（北京时间）。<br>thymeleaf:<br>cache: false<br>关闭Thymeleaf模板缓存，方便开发时实时看到模板变化。<br>servlet:<br>multipart:<br>max-file-size: 100MB<br>设置单个文件上传的最大大小为100MB。<br>max-request-size: 100MB<br>设置整个请求的最大大小为100MB。<br>mybatis 配置<br>yaml<br>深色版本<br>mybatis:<br>  mapper-locations: classpath:mapper&#x2F;<em>.xml<br>  type-aliases-package: com.example.entity<br>mapper-locations: classpath:mapper&#x2F;</em>.xml<br>指定MyBatis的Mapper XML文件的位置，这里设置为classpath下的mapper目录中的所有.xml文件。<br>type-aliases-package: com.example.entity<br>指定实体类所在的包路径，MyBatis会自动扫描该包下的类并为其生成别名。<br>pagehelper 配置<br>yaml<br>深色版本<br>pagehelper:<br>  helper-dialect: mysql<br>  reasonable: true<br>  support-methods-arguments: true<br>  params: count&#x3D;countSql<br>helper-dialect: mysql<br>指定分页插件使用的数据库方言，这里是MySQL。<br>reasonable: true<br>是否开启合理化模式，当总页数小于等于0时，返回第一页或最后一页。<br>support-methods-arguments: true<br>是否支持通过方法参数传递分页参数。<br>params: count&#x3D;countSql<br>分页参数的名称，这里设置为countSql。<br>authority 配置<br>yaml<br>深色版本<br>authority:<br>  info: ‘[{“models”:[{“modelId”:1,”operation”:[1,2,3,4]},{“modelId”:1000001,”operation”:[1,2,3,4]},{“modelId”:1000002,”operation”:[1,2,3,4]},{“modelId”:2,”operation”:[1,2,3,4]},{“modelId”:3,”operation”:[1,2,3,4]},{“modelId”:4,”operation”:[1,2,3,4]},{“modelId”:5,”operation”:[1,2,3,4]},{“modelId”:6,”operation”:[1,2,3,4]},{“modelId”:7,”operation”:[1,2,3,4]},{“modelId”:8,”operation”:[1,2,3,4]},{“modelId”:9,”operation”:[1,2,3,4]},{“modelId”:10,”operation”:[1,2,3,4]}],”level”:1,”modelId”:1,”name”:”管理员”},{“models”:[{“modelId”:5,”operation”:[4,1,2,3]},{“modelId”:9,”operation”:[4,1,2,3]}],”level”:2,”modelId”:2,”name”:”用户”}]’<br>info:<br>这是一个JSON字符串，定义了不同角色的权限信息。<br>每个角色包含models（模型）、level（权限级别）、modelId（模型ID）和name（角色名称）。<br>models是一个列表，每个元素包含modelId和operation（操作权限）。<br>logging 配置<br>yaml<br>深色版本<br>logging:<br>  file: log&#x2F;my.log<br>file: log&#x2F;my.log<br>指定日志文件的路径和名称，日志将被写入到log&#x2F;my.log文件中。<br>总结<br>server: 配置应用的端口和连接超时时间。<br>spring: 配置数据源、Thymeleaf模板引擎和文件上传限制。<br>mybatis: 配置MyBatis的Mapper XML文件位置和实体类包路径。<br>pagehelper: 配置分页插件的相关参数。<br>authority: 配置角色权限信息。<br>logging: 配置日志文件的路径和名称。</p>
<h2 id="MyBatis-和-MyBatis-Plus"><a href="#MyBatis-和-MyBatis-Plus" class="headerlink" title="MyBatis 和 MyBatis-Plus"></a>MyBatis 和 MyBatis-Plus</h2><p>MyBatis<br>定义<br>MyBatis 是一个优秀的持久层框架，它支持定制化SQL、存储过程以及高级映射。MyBatis 消除了几乎所有的JDBC代码和手动设置参数以及获取结果集。MyBatis 可以通过简单的XML或注解来配置和映射原生信息，将接口和Java的POJOs(Plain Old Java Objects)映射成数据库中的记录。</p>
<p>主要特点<br>轻量级：MyBatis 是一个轻量级的框架，不会占用太多的系统资源。<br>灵活：支持XML和注解两种方式配置SQL语句，可以根据项目需求选择合适的方式。<br>强大的映射功能：支持一对一、一对多、多对多等复杂关系的映射。<br>动态SQL：提供强大的动态SQL生成功能，可以根据条件动态生成SQL语句。<br>缓存机制：支持一级缓存和二级缓存，可以显著提高查询性能。<br>事务管理：支持事务管理，确保数据的一致性和完整性。<br>使用场景<br>当你需要对SQL进行精细控制时，MyBatis 是一个很好的选择。<br>适用于中小型项目，特别是那些需要高度定制化SQL的项目。<br>适合与Spring框架集成，形成完整的Web应用开发框架。<br>MyBatis-Plus<br>定义<br>MyBatis-Plus（简称MP）是MyBatis的增强工具，旨在简化开发、提高效率。它在MyBatis的基础上只做增强不做改变，为简化开发、提高效率而生。MyBatis-Plus 提供了许多开箱即用的功能，如CRUD操作、乐观锁、逻辑删除、分页等，使得开发者可以更加专注于业务逻辑的实现。</p>
<p>主要特点<br>无侵入：MyBatis-Plus 在MyBatis的基础上进行了扩展，完全兼容MyBatis的所有特性。<br>性能监控：内置性能分析插件，可以监控SQL执行时间，帮助优化性能。<br>内置分页插件：提供了一套强大的分页插件，支持多种数据库。<br>代码生成器：内置代码生成器，可以快速生成实体类、Mapper接口、Mapper XML文件等。<br>CRUD操作：提供了丰富的CRUD操作，无需编写SQL语句即可完成基本的增删改查操作。<br>乐观锁：支持乐观锁机制，防止并发更新数据时出现的问题。<br>逻辑删除：支持逻辑删除，可以在数据库中保留数据的同时标记为已删除。<br>全局配置：支持全局配置，可以统一管理一些常用的配置项。<br>使用场景<br>当你需要快速开发一个项目，且项目中包含大量的CRUD操作时，MyBatis-Plus 是一个非常好的选择。<br>适用于大型项目，特别是那些需要高效开发、减少重复代码的项目。<br>适合与Spring Boot框架集成，可以快速搭建企业级应用。<br>对比<br>特性	MyBatis	MyBatis-Plus<br>灵活性	高	中<br>学习曲线	中	低<br>内置功能	基础	丰富（如分页、代码生成等）<br>性能监控	无	内置<br>代码生成	无	内置<br>CRUD操作	手动编写SQL	内置<br>乐观锁	无	支持<br>逻辑删除	无	支持</p>
<h2 id="普通查询和分页查询"><a href="#普通查询和分页查询" class="headerlink" title="普通查询和分页查询"></a>普通查询和分页查询</h2><p>分页查询<br><a href="https://lxblog.com/qianwen/share?shareId=b8a915f8-46de-492f-8a3e-b42b3a9d068b">https://lxblog.com/qianwen/share?shareId=b8a915f8-46de-492f-8a3e-b42b3a9d068b</a></p>
<p>普通查询<br>定义: 普通查询是指一次性从数据库中检索所有符合条件的数据记录。<br>特点:<br>一次性加载: 所有符合条件的数据都会被一次性加载到内存中。<br>适用场景: 数据量较小的情况，或者不需要对数据进行分页展示的场景。<br>优点: 实现简单，易于理解。<br>缺点: 当数据量较大时，可能导致性能问题（如内存不足、响应时间长）。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
<p>在这个方法中，findAll() 方法会返回所有 NxSystemFileInfo 记录的列表。<br>2. 分页查询<br>定义: 分页查询是指将大量数据分成多个小部分（称为“页”），每次只加载其中的一部分数据。<br>特点<br>按需加载: 只加载当前需要显示的那一部分数据，减少内存占用。<br>适用场景: 大数据量的情况，需要在前端进行分页展示的场景。<br>优点: 提高性能，减少服务器压力，提高用户体验。<br>缺点: 实现相对复杂一些，需要额外的参数来控制分页逻辑。<br>示例:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span>;</span><br></pre></td></tr></table></figure>
<p>在这个方法中，findPage() 方法接受三个参数：<br>name: 文件名关键字，用于过滤数据。<br>pageNum: 当前页码。<br>pageSize: 每页显示的记录数。<br>方法返回一个</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">PageInfo&lt;NxSystemFileInfo&gt; </span><br></pre></td></tr></table></figure>
<p> 对象，该对象包含了分页信息（如总记录数、总页数、当前页数据等）。</p>
<ol>
<li>分页查询的优势<br>3.1 性能优化<br>减少内存占用: 只加载当前页的数据，避免一次性加载大量数据导致内存溢出。<br>快速响应: 加载较少的数据可以显著减少响应时间，提升用户体验。<br>3.2 用户体验<br>易用性: 用户可以通过翻页浏览大量数据，而无需等待所有数据加载完成。<br>可读性: 分页显示使得数据更加清晰有序，便于用户查找和管理。<br>3.3 减少带宽消耗<br>高效传输: 只传输当前页的数据，减少了不必要的网络流量。</li>
</ol>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="数据库表解读"><a href="#数据库表解读" class="headerlink" title="数据库表解读"></a>数据库表解读</h2><blockquote>
<p>管理员信息表 (admin_info):<br>包含管理员的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、编号、邮箱、身份证、权限等级、账户等。<br>level 字段表示管理员的权限等级，默认值为1。<br>公告信息表 (advertiser_info):<br>包含公告的名称、内容、发布时间等信息。<br>菜谱大类信息表 (classify_info):<br>包含菜谱大类的名称和描述。<br>收藏信息表 (collect_info):<br>记录用户的收藏信息，包括收藏的名称、时间、菜谱ID、笔记ID、用户ID、用户等级等。<br>笔记评论信息表 (comment_notes_info):<br>记录笔记的评论信息，包括评论内容、评论时间、评论人、关联的模块ID等。<br>食材信息表 (foods_material_info):<br>包含食材的名称、描述、文件ID、文件名、上传人、用户等级、用户ID等。<br>菜谱信息表 (foods_menu_info):<br>包含菜谱的名称、描述、菜谱标签、菜谱小类ID、文件ID、文件名、上传人、用户等级、用户ID等。<br>趣味答题信息表 (message_info):<br>包含趣味答题的名称、回答内容、回答时间等信息。<br>饮食资讯信息表 (news_info):<br>包含饮食资讯的名称和内容。<br>笔记信息表 (notes_info):<br>包含笔记的名称、上传时间、用户ID、内容、审核状态等。<br>文件信息表 (nx_system_file_info):<br>包含文件的原始文件名和存储文件名。<br>笔记点赞信息表 (praise_info):<br>记录笔记的点赞信息，包括名称、时间、笔记ID、菜谱ID、用户ID、用户等级等。<br>菜谱小类信息表 (sub_classify_info):<br>包含菜谱小类的名称、描述、菜谱大类ID等。<br>用户信息表 (user_info):<br>包含用户的基本信息，如姓名、密码、昵称、性别、年龄、生日、手机号、地址、邮箱、身份证、权限等级等。<br>level 字段表示用户的权限等级，默认值为2</p>
</blockquote>
<h1 id="控制器文及其相关文件"><a href="#控制器文及其相关文件" class="headerlink" title="控制器文及其相关文件"></a>控制器文及其相关文件</h1><p>负责 辅助信息 相关的控制器，包含：<br>MenuController (2)<br>EchartsController (2)<br>ClassifyInfoController (8)<br>NxSystemFileController (6)<br>AdvertiserInfoController (8)<br>SubClassifyInfoController (8)</p>
<h2 id="管理页面菜单动态渲染模块"><a href="#管理页面菜单动态渲染模块" class="headerlink" title="管理页面菜单动态渲染模块"></a>管理页面菜单动态渲染模块</h2><h3 id="功能描述"><a href="#功能描述" class="headerlink" title="功能描述"></a>功能描述</h3><p>根据用户不同身份加载后端管理系统菜单栏<br>功能描述：在用户在首页中点击“进入后台系统”时候，根据用户的普通身份或管理员身份加载对应的后台管理系统页面，为不同类型的用户提供对应的功能展示。<br>代码描述：在用户要进入管理系统时，前端向后端发送请求获取用户类型信息。<br>后端首先获取当前用户的信息，管理员用户，权限级别为1（level &#x3D; 1）（未登录的用户在首页不会看到“进入后台系统”的标签，所以不用担心这里会出问题）；如果是普通用户，那么权限级别为2（level &#x3D; 2）。然后根据用户权限级别（level&#x3D;1为管理员，2为普通用户）生成不同的菜单项信息到后端要返回前端的数据数组中。接着通过 getJsonObject()方法将数据数组添加到要返回给前端的对象中，最后返回一个包含菜单项信息的 JSONObject。<br>后端返回的用户信息解构后赋值到authority中，然后根据authority的数据进行v-if判断菜单栏是否渲染。</p>
<h3 id="控制器类-MenuController-java"><a href="#控制器类-MenuController-java" class="headerlink" title="控制器类 MenuController.java"></a>控制器类 MenuController.java</h3><p>这是一个用于生成菜单界面的控制器，它基于用户的不同权限级别显示不同的菜单项，并且还提供了一个获取总记录数的API。<br>getMenu 方法：根据用户权限级别生成不同的菜单项，并返回JSON格式的菜单数据。<br>getJsonObject 方法：辅助方法，用于生成单个菜单项的JSON对象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span><span class="comment">//负责处理前端请求，并返回导航菜单数据</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuController</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Resource</span><span class="comment">//这是一个依赖注入注解，用于自动装配Bean。这里用于注入各种业务逻辑服务实现类。</span></span><br><span class="line">	<span class="keyword">private</span> AdminInfoServiceimpl adminInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> UserInfoServiceimpl userInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> ClassifyInfoServiceimpl classifyInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> SubClassifyInfoServiceimpl subClassifyInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> CollectInfoServiceimpl collectInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> PraiseInfoServiceimpl praiseInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> NewsInfoServiceimpl newsInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> AdvertiserInfoServiceimpl advertiserInfoService;</span><br><span class="line">	<span class="meta">@Resource</span></span><br><span class="line">	<span class="keyword">private</span> MessageInfoServiceimpl messageInfoService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/getMenu&quot;, produces=&quot;application/json;charset=UTF-8&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMenu</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">		<span class="comment">//HTTP请求中获取用户会话信息，检查是否有登录用户</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> (Account) request.getSession().getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Integer level;</span><br><span class="line">        <span class="keyword">if</span> (account == <span class="literal">null</span>) &#123;</span><br><span class="line">            level = <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            level = account.getLevel();</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">// 创建一个JSON对象用于存储导航菜单项</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        obj.putOpt(<span class="string">&quot;code&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        obj.putOpt(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">dataArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">		<span class="comment">// 添加系统首页菜单项</span></span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;系统首页&quot;</span>, <span class="string">&quot;layui-icon-home&quot;</span>, <span class="string">&quot;/&quot;</span>));</span><br><span class="line">		<span class="comment">// 创建信息管理菜单项</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">tableObj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        tableObj.putOpt(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;信息管理&quot;</span>);</span><br><span class="line">        tableObj.putOpt(<span class="string">&quot;icon&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>);</span><br><span class="line">		<span class="comment">// 根据用户权限级别决定是否添加信息管理菜单项</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="number">1</span> == level) &#123;</span><br><span class="line">			<span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">			<span class="comment">//getJsonObject方法创建每个子菜单项，并将其添加到array中</span></span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;adminInfo&quot;</span>, <span class="string">&quot;管理员信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;adminInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;userInfo&quot;</span>, <span class="string">&quot;用户信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;userInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;classifyInfo&quot;</span>, <span class="string">&quot;菜谱大类信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;classifyInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;subClassifyInfo&quot;</span>, <span class="string">&quot;菜谱小类信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;subClassifyInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMenuInfo&quot;</span>, <span class="string">&quot;菜谱信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMenuInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMaterialInfo&quot;</span>, <span class="string">&quot;食材信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMaterialInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;collectInfo&quot;</span>, <span class="string">&quot;收藏信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;collectInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;praiseInfo&quot;</span>, <span class="string">&quot;笔记点赞信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;praiseInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;notesInfo&quot;</span>, <span class="string">&quot;笔记信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;notesInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;newsInfo&quot;</span>, <span class="string">&quot;饮食资讯信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;newsInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;advertiserInfo&quot;</span>, <span class="string">&quot;公告信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;advertiserInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;messageInfo&quot;</span>, <span class="string">&quot;趣味答题信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;messageInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;accountAdminInfo&quot;</span>, <span class="string">&quot;个人信息&quot;</span>, <span class="string">&quot;layui-icon-user&quot;</span>, <span class="string">&quot;accountAdminInfo&quot;</span>));</span><br><span class="line">			tableObj.putOpt(<span class="string">&quot;list&quot;</span>, array);</span><br><span class="line">			<span class="comment">//将array设置为tableObj的list属性，以便在前端展示这些子菜单项</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="number">2</span> == level) &#123;</span><br><span class="line">			<span class="type">JSONArray</span> <span class="variable">array</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;foodsMenuInfo&quot;</span>, <span class="string">&quot;菜谱信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;foodsMenuInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;notesInfo&quot;</span>, <span class="string">&quot;笔记信息&quot;</span>, <span class="string">&quot;layui-icon-table&quot;</span>, <span class="string">&quot;notesInfo&quot;</span>));</span><br><span class="line">			array.add(getJsonObject(<span class="string">&quot;accountUserInfo&quot;</span>, <span class="string">&quot;个人信息&quot;</span>, <span class="string">&quot;layui-icon-user&quot;</span>, <span class="string">&quot;accountUserInfo&quot;</span>));</span><br><span class="line">			tableObj.putOpt(<span class="string">&quot;list&quot;</span>, array);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        dataArray.add(tableObj);</span><br><span class="line">		dataArray.add(getJsonObject(<span class="string">&quot;notesInfoComment&quot;</span>, <span class="string">&quot;笔记评论&quot;</span>, <span class="string">&quot;layui-icon-group&quot;</span>, <span class="string">&quot;notesInfoComment&quot;</span>));</span><br><span class="line"></span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;updatePassword&quot;</span>, <span class="string">&quot;修改密码&quot;</span>, <span class="string">&quot;layui-icon-password&quot;</span>, <span class="string">&quot;updatePassword&quot;</span>));</span><br><span class="line">        dataArray.add(getJsonObject(<span class="string">&quot;login&quot;</span>, <span class="string">&quot;退出登录&quot;</span>, <span class="string">&quot;layui-icon-logout&quot;</span>, <span class="string">&quot;login&quot;</span>));</span><br><span class="line"></span><br><span class="line">        obj.putOpt(<span class="string">&quot;data&quot;</span>, dataArray);</span><br><span class="line">        <span class="keyword">return</span> obj.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> JSONObject <span class="title function_">getJsonObject</span><span class="params">(String name, String title, String icon, String jump)</span> &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">object</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        object.putOpt(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        object.putOpt(<span class="string">&quot;title&quot;</span>, title);</span><br><span class="line">        object.putOpt(<span class="string">&quot;icon&quot;</span>, icon);</span><br><span class="line">        object.putOpt(<span class="string">&quot;jump&quot;</span>, jump);</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="前端代码"><a href="#前端代码" class="headerlink" title="前端代码"></a>前端代码</h3><p>获取用户的权限信息的get请求</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            axios.<span class="title function_">get</span>(<span class="string">&quot;/authority&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">				<span class="comment">/*如果res.data.code等于&#x27;0&#x27;，表示请求成功。</span></span><br><span class="line"><span class="comment">				将res.data.data赋值给this.authority，</span></span><br><span class="line"><span class="comment">				更新Vue实例中的authority数据属性*/</span></span><br><span class="line">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">authority</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>html动态渲染部分代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-yelp &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>信息展示 <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;fa arrow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav nav-second-level collapse in&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(1) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;adminInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>管理员信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(2) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;userInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>用户信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(3) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;classifyInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱大类信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(4) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;subClassifyInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱小类信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span> <span class="attr">v-if</span>=<span class="string">&quot;authority.indexOf(5) != -1&quot;</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;foodsMenuInfo.html&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-table&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>菜谱信息<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="classifyInfo-html"><a href="#classifyInfo-html" class="headerlink" title="classifyInfo.html"></a>classifyInfo.html</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info&quot;</span> <span class="attr">title</span>=<span class="string">&quot;跳转到个人信息&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;personalPage&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-user fa-2x&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">使用javascript:void(0)防止页面跳转</span></span><br><span class="line"><span class="comment">javascript:void(0) 是一个常用的技巧，用于在 HTML 中创建一个不会导致页面跳转的链接。具体解释如下：</span></span><br><span class="line"><span class="comment">javascript: - 这是一个伪协议，告诉浏览器后面的内容是一段 JavaScript 代码。</span></span><br><span class="line"><span class="comment">vo--&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Echarts图标生成模块"><a href="#Echarts图标生成模块" class="headerlink" title="Echarts图标生成模块"></a>Echarts图标生成模块</h2><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel panel-info&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-heading&quot;</span>&gt;</span></span><br><span class="line">                            数据图表</span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;margin-left: 10px&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;drawLine&quot;</span></span></span><br><span class="line"><span class="tag">                                    <span class="attr">v-model</span>=<span class="string">&quot;echartsModel&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in echartsModelOptions&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span>&gt;</span>&#123;&#123;item.label&#125;&#125;<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">select</span> <span class="attr">style</span>=<span class="string">&quot;float:right&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;selectEchartsType&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;echartsType&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;pie&quot;</span>&gt;</span>饼图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bar&quot;</span>&gt;</span>柱状图<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- 为ECharts准备一个具备大小（宽高）的盒子 --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height:400px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">            <span class="comment">//发起HTTP请求获取数据并绘制图标发送GET请求，初始化ECharts实例并设置图表选项</span></span><br><span class="line">            <span class="title function_">drawLine</span>(<span class="params"></span>) &#123;</span><br><span class="line">                axios.<span class="title function_">get</span>(<span class="string">&#x27;/echarts/get/&#x27;</span> + <span class="variable language_">this</span>.<span class="property">echartsModel</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// 基于准备好的dom，初始化echarts实例</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">echartsShowArr</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>.<span class="property">length</span>) &#123;</span><br><span class="line">                        <span class="keyword">let</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">                        <span class="keyword">let</span> option = <span class="variable language_">this</span>.<span class="title function_">getEchartsType</span>(<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>, <span class="variable language_">this</span>.<span class="property">echartsType</span>);</span><br><span class="line">                        myChart.<span class="title function_">setOption</span>(option, <span class="literal">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">			<span class="comment">//切换echarts图表类型</span></span><br><span class="line">             <span class="comment">//当用户选择不同的图表类型时，更新图表显示</span></span><br><span class="line">            <span class="title function_">selectEchartsType</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> myChart = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;main&#x27;</span>));</span><br><span class="line">                <span class="keyword">let</span> option = <span class="variable language_">this</span>.<span class="title function_">getEchartsType</span>(<span class="variable language_">this</span>.<span class="property">echartsShowArr</span>, <span class="variable language_">this</span>.<span class="property">echartsType</span>);</span><br><span class="line">                myChart.<span class="title function_">setOption</span>(option, <span class="literal">true</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">             <span class="comment">//根据类型获取echarts配置</span></span><br><span class="line">            <span class="comment">//遍历echarts数据数组，根据指定的图表类型，从数据数组中找到匹配的图表配置并返回</span></span><br><span class="line">            <span class="title function_">getEchartsType</span>(<span class="params">echartsArr, type</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> echartsArr) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (item.<span class="property">series</span>[<span class="number">0</span>].<span class="property">type</span> === type) &#123;</span><br><span class="line">                        <span class="keyword">return</span> item;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="控制器EchartsController-java"><a href="#控制器EchartsController-java" class="headerlink" title="控制器EchartsController.java"></a>控制器EchartsController.java</h3><p>获取ECharts数据：<br>getEchartsData方法接收一个路径参数modelName，根据不同的模型名称调用相应的服务方法获取数据。<br>对于每个模型，统计性别分布或分类数量，并调用getPieData和getBarData方法生成饼图和柱状图数据。<br>最后将生成的图表数据列表封装在Result对象中返回。<br>获取选项列表：<br>getOptions方法返回一个包含所有可用模型名称及其标签的列表，用于前端选择。<br>生成图表数据：<br>getPieData方法生成饼图数据，包括标题、系列数据、图例等。<br>getBarData方法生成柱状图数据，包括标题、X轴数据、Y轴数据、图例等。</p>
<h2 id="ClassifyInfo菜谱大类分类模块"><a href="#ClassifyInfo菜谱大类分类模块" class="headerlink" title="ClassifyInfo菜谱大类分类模块"></a>ClassifyInfo菜谱大类分类模块</h2><h3 id="功能思想"><a href="#功能思想" class="headerlink" title="功能思想"></a>功能思想</h3><p>1）	菜谱分类逻辑<br>在后端管理系统中，菜单栏有“菜谱大类信息”和“菜谱小类信息”两栏。管理员用户可以对菜谱分类进行管理。菜谱分类包括菜谱大类和菜谱小类，菜谱小类是菜谱大类的详细分类。这样分类在数据增加后可以对美食进行详细的划分，让数据更有条理，给用户更好的使用体验。<br>2）	菜谱的增删查改<br>在菜谱大类信息和菜谱小类信息中，都可以实现对对应分类的添加、搜索、编辑、删除的操作。<br>3）	能供用excel表格批量导入菜谱分类<br>在菜谱大类信息和菜谱小类信息亮栏中，提供excel模板下载的功能，下载模板后通过在模板上编写要添加的分类信息和对应的描述，再将写好后的模板excel表格文件进行批量导入，可以实现一次性批量增加多条分类信息。</p>
<h3 id="前端js模块"><a href="#前端js模块" class="headerlink" title="前端js模块"></a>前端js模块</h3><h4 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">msg</span>(<span class="params">type, msg</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: type, <span class="comment">// success（成功）、warning（警告）, error(错误)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: msg,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">duration</span>: <span class="number">2000</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">offset</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">center</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#wrapper&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">authority</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">permission</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">storeUser</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>)),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">user</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">objs</span>: [],</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">pageInfo</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">preActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">nextActive</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">entity</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">created</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);<span class="comment">//加载第一页的表格数据</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取用户信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">user</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取权限信息</span></span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;/permission/3&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">permission</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//获取权限组信息</span></span></span><br><span class="line"><span class="language-javascript">            axios.<span class="title function_">get</span>(<span class="string">&quot;/authority&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">authority</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">loadTable</span>(<span class="params">pageNum</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> name = <span class="variable language_">this</span>.<span class="property">name</span> === <span class="string">&#x27;&#x27;</span> ? <span class="string">&quot;all&quot;</span> : <span class="variable language_">this</span>.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">                axios.<span class="title function_">get</span>(<span class="string">&quot;/classifyInfo/page/&quot;</span> + name + <span class="string">&quot;?pageNum=&quot;</span> + pageNum).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">objs</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">pageInfo</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">preActive</span> = !(<span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">hasPreviousPage</span>);</span></span><br><span class="line"><span class="language-javascript">                        <span class="variable language_">this</span>.<span class="property">nextActive</span> = !(<span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">hasNextPage</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">init</span>(<span class="params">o</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">3</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">entity</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(o));</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">add</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">1</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">entity</span> = &#123;<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>&#125;;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;show&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">update</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="title function_">checkValid</span>(<span class="variable language_">this</span>.<span class="property">entity</span>)) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                        axios.<span class="title function_">post</span>(</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&quot;/classifyInfo&quot;</span>, <span class="variable language_">this</span>.<span class="property">entity</span></span></span><br><span class="line"><span class="language-javascript">                        ).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;添加成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        axios.<span class="title function_">put</span>(</span></span><br><span class="line"><span class="language-javascript">                            <span class="string">&quot;/classifyInfo&quot;</span>, <span class="variable language_">this</span>.<span class="property">entity</span></span></span><br><span class="line"><span class="language-javascript">                        ).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;更新成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                $(<span class="string">&#x27;#mod&#x27;</span>).<span class="title function_">modal</span>(<span class="string">&#x27;hide&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;)</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">del</span>(<span class="params">id</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">2</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> _this = <span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$confirm(<span class="string">&#x27;确认删除？&#x27;</span>, <span class="string">&#x27;系统提示&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确定&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">cancelButtonClass</span>: <span class="string">&#x27;btn-custom-cancel&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">delete</span>(<span class="string">&quot;/classifyInfo/&quot;</span> + id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;删除成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            _this.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;);</span></span><br><span class="line"><span class="language-javascript">                &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;取消成功！&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">downModel</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                location.<span class="property">href</span> = <span class="string">&#x27;/classifyInfo/getExcelModel&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">clickUpload</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">permission</span>.<span class="title function_">indexOf</span>(<span class="number">1</span>) === -<span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="title function_">msg</span>(<span class="string">&#x27;warning&#x27;</span>, <span class="string">&#x27;你没有权限操作&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    e.<span class="title function_">preventDefault</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">upload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> files = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span><br><span class="line"><span class="language-javascript">                    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[i]);</span></span><br><span class="line"><span class="language-javascript">                    axios.<span class="title function_">post</span>(<span class="string">&#x27;/classifyInfo/upload&#x27;</span>, formData, &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span></span><br><span class="line"><span class="language-javascript">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;批量导入成功&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">this</span>.<span class="title function_">loadTable</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;)</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">logout</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="实体类-entity"><a href="#实体类-entity" class="headerlink" title="实体类 entity"></a>实体类 entity</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;classify_info&quot;)</span></span><br><span class="line"><span class="comment">//将 Java 类映射到数据库中的 classify_info表</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfo</span>  &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Column(name = &quot;name&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="meta">@Column(name = &quot;descroiption&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String descroiption;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> descroiption;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String descroiption)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.descroiption = descroiption;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="控制层-ClassifyInfoController-java"><a href="#控制层-ClassifyInfoController-java" class="headerlink" title="控制层 ClassifyInfoController.java"></a>控制层 ClassifyInfoController.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/classifyInfo&quot;)</span></span><br><span class="line"><span class="comment">//注解表示该控制器处理所有以 /classifyInfo 开头的HTTP请求。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoController</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ClassifyInfoServiceimpl classifyInfoService;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;ClassifyInfo&gt; <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> ClassifyInfoVo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoService.add(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        classifyInfoService.delete(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> ClassifyInfoVo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoService.update(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;ClassifyInfo&gt; <span class="title function_">detail</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="type">ClassifyInfo</span> <span class="variable">classifyInfo</span> <span class="operator">=</span> classifyInfoService.findById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;List&lt;ClassifyInfoVo&gt;&gt; <span class="title function_">all</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfoService.findAll());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/page/&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result&lt;PageInfo&lt;ClassifyInfoVo&gt;&gt; <span class="title function_">page</span><span class="params">(<span class="meta">@PathVariable</span> String name,</span></span><br><span class="line"><span class="params">                                                <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                                <span class="meta">@RequestParam(defaultValue = &quot;5&quot;)</span> Integer pageSize,</span></span><br><span class="line"><span class="params">                                                HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(classifyInfoService.findPage(name, pageNum, pageSize, request));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="dao-ClassifyInfoDao-java"><a href="#dao-ClassifyInfoDao-java" class="headerlink" title="dao ClassifyInfoDao.java"></a>dao ClassifyInfoDao.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;ClassifyInfo&gt; &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>作用: 定义了一个数据访问层接口。<br>说明:<br>@Repository 注解表示该接口是一个数据访问层组件，Spring会自动扫描并管理这个接口。<br>extends Mapper<ClassifyInfo> 表示 ClassifyInfoDao 继承了 Mapper 接口，从而获得了基本的CRUD（创建、读取、更新、删除）操作能力。<br>Mapper 接口是TkMapper库提供的一个通用Mapper接口，包含了常用的数据库操作方法，如 select, insert, update, delete 等。<br>自定义方法 (findByName)</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;ClassifyInfoVo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br></pre></td></tr></table></figure>
<p>作用: 定义了一个自定义查询方法，根据名称查找分类信息。<br>说明:<br>List<ClassifyInfoVo>: 返回类型为 ClassifyInfoVo 对象的列表。<br>findByName: 方法名称，表示根据名称查找分类信息。<br>@Param(“name”) String name: 参数注解，指定参数名称为 name。在MyBatis的XML映射文件中可以通过 #{name} 来引用这个参数。<br>这个方法需要在对应的XML映射文件中实现具体的SQL查询逻辑。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;ClassifyInfo&gt; &#123;</span><br><span class="line">    List&lt;ClassifyInfoVo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="vo-ClassifyInfoVo-java"><a href="#vo-ClassifyInfoVo-java" class="headerlink" title="vo ClassifyInfoVo.java"></a>vo ClassifyInfoVo.java</h3><p>使用场景<br>服务层到表现层的数据传输:<br>在服务层中，你可以创建 ClassifyInfoVo 对象，并将其填充数据后返回给表现层（如控制器）。<br>这种方式可以确保表现层接收到的数据不仅包含分类的基本信息，还包含与其相关的子分类信息。<br>JSON 序列化:<br>当将 ClassifyInfoVo 对象序列化为 JSON 格式时，subList 字段也会被包含在内。<br>这对于需要展示分类及其子分类的应用程序非常有用。使用场景<br>服务层到表现层的数据传输:<br>在服务层中，你可以创建 ClassifyInfoVo 对象，并将其填充数据后返回给表现层（如控制器）。<br>这种方式可以确保表现层接收到的数据不仅包含分类的基本信息，还包含与其相关的子分类信息。<br>JSON 序列化:<br>当将 ClassifyInfoVo 对象序列化为 JSON 格式时，subList 字段也会被包含在内。<br>这对于需要展示分类及其子分类的应用程序非常有用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.vo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoVo</span> <span class="keyword">extends</span> <span class="title class_">ClassifyInfo</span> &#123;</span><br><span class="line"><span class="comment">//subList用于存储子分类信息，有助于在返回给客户端的数据中包含更多的相关信息</span></span><br><span class="line">    List&lt;SubClassifyInfoVo&gt; subList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;SubClassifyInfoVo&gt; <span class="title function_">getSubList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> subList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSubList</span><span class="params">(List&lt;SubClassifyInfoVo&gt; subList)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subList = subList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="服务层-ClassifyInfoService-java"><a href="#服务层-ClassifyInfoService-java" class="headerlink" title="服务层 ClassifyInfoService.java"></a>服务层 ClassifyInfoService.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ClassifyInfoService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">add</span><span class="params">(ClassifyInfo classifyInfo)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(ClassifyInfo classifyInfo)</span>;</span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;ClassifyInfoVo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize, HttpServletRequest request)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAllPage</span><span class="params">(HttpServletRequest request, String name)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="impl-ClassifyInfoServiceimpl-java"><a href="#impl-ClassifyInfoServiceimpl-java" class="headerlink" title="impl ClassifyInfoServiceimpl.java"></a>impl ClassifyInfoServiceimpl.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.dao.ClassifyInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.dao.SubClassifyInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.service.ClassifyInfoService;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.SubClassifyInfoVo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.ClassifyInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.vo.ClassifyInfoVo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassifyInfoServiceimpl</span> <span class="keyword">implements</span> <span class="title class_">ClassifyInfoService</span> &#123;</span><br><span class="line">    <span class="meta">@Resource</span> <span class="comment">//依赖注入，将 ClassifyInfoDao 和 SubClassifyInfoDao 的实例注入到当前类中</span></span><br><span class="line">    <span class="keyword">private</span> ClassifyInfoDao classifyInfoDao;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SubClassifyInfoDao subClassifyInfoDao;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">add</span><span class="params">(ClassifyInfo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoDao.insertSelective(classifyInfo);</span><br><span class="line">        <span class="keyword">return</span> classifyInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        classifyInfoDao.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(ClassifyInfo classifyInfo)</span> &#123;</span><br><span class="line">        classifyInfoDao.updateByPrimaryKeySelective(classifyInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ClassifyInfo <span class="title function_">findById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> classifyInfoDao.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;ClassifyInfoVo&gt; all = classifyInfoDao.findByName(<span class="string">&quot;all&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (ClassifyInfoVo classifyInfoVo : all) &#123;</span><br><span class="line">            List&lt;SubClassifyInfoVo&gt; subList = subClassifyInfoDao.findByClassifyId(classifyInfoVo.getId());</span><br><span class="line">            classifyInfoVo.setSubList(subList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;ClassifyInfoVo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize, HttpServletRequest request)</span> &#123;</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">        List&lt;ClassifyInfoVo&gt; all = findAllPage(request, name);</span><br><span class="line">        <span class="keyword">return</span> PageInfo.of(all);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;ClassifyInfoVo&gt; <span class="title function_">findAllPage</span><span class="params">(HttpServletRequest request, String name)</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> classifyInfoDao.findByName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ClassifyInfoMapper-xml"><a href="#ClassifyInfoMapper-xml" class="headerlink" title="ClassifyInfoMapper.xml"></a>ClassifyInfoMapper.xml</h3><p>ClassifyInfoMapper.xml部分实现代码</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--指定这个映射文件对应的 DAO 接口全限定名。MyBatis使用这个命名空间来找到对应的接口方法--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.dao.ClassifyInfoDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--.通过传入的name参数进行模糊查询</span></span><br><span class="line"><span class="comment">     如果name为null、空字符串或&#x27;all&#x27;，则不进行名称过滤</span></span><br><span class="line"><span class="comment">     查询结果按照文件信息的ID进行排序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.vo.ClassifyInfoVo&quot;</span>&gt;</span></span><br><span class="line">        select `classify_info`.* from `classify_info`</span><br><span class="line">        <span class="comment">&lt;!-- where 1 = 1 用于避免动态条件拼接时的语法错误,用于简化动态条件拼接。</span></span><br><span class="line"><span class="comment">       &lt;if&gt; 元素: 动态 SQL 条件，只有在 name 参数不为空且不是 &#x27;all&#x27; 时才会添加到 SQL 语句中</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">            where 1 = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27; and name != &#x27;all&#x27;&quot;</span>&gt;</span></span><br><span class="line">                and `classify_info`.`name` like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            order by `classify_info`.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="属性和方法理解"><a href="#属性和方法理解" class="headerlink" title="属性和方法理解"></a>属性和方法理解</h4><p>数据属性 (data)<br>authority:<br>存储权限组信息。<br>permission:<br>存储用户的权限信息。<br>storeUser:<br>从localStorage获取当前登录用户的信息。<br>name:<br>搜索关键字，用于过滤分类信息。<br>user:<br>当前登录用户的信息。<br>objs:<br>表格数据列表，存储从服务器获取的分类信息。<br>pageInfo:<br>分页信息，包含总页数、当前页码、是否有上一页和下一页等。<br>preActive 和 nextActive:<br>控制分页按钮的激活状态。当没有上一页时，preActive为false；当没有下一页时，nextActive为false。<br>entity:<br>当前操作的对象，初始值为{sex: ‘男’}。用于存储要添加或更新的分类信息。<br>生命周期钩子 (created)<br>作用:<br>在Vue实例创建完成后立即调用。<br>具体操作:<br>调用loadTable(1)加载第一页的数据。<br>获取当前登录用户的信息并存储在user变量中。<br>发送GET请求获取权限信息并存储在permission变量中。<br>发送GET请求获取权限组信息并存储在authority变量中。<br>方法 (methods)<br>loadTable(pageNum):<br>作用: 根据页码加载分类信息数据。<br>参数: pageNum - 页码。<br>过程:<br>如果name为空，则使用”all”作为搜索关键字。<br>发送GET请求到&#x2F;classifyInfo&#x2F;page&#x2F;{name}?pageNum&#x3D;{pageNum}。<br>将响应数据中的列表存储在objs中，并将分页信息存储在pageInfo中。<br>更新preActive和nextActive的状态以控制分页按钮的激活状态。<br>init(o):<br>作用: 初始化模态框，填充数据并显示模态框。<br>参数: o - 要编辑的对象。<br>过程:<br>检查用户是否有相应的权限（权限索引为3）。如果没有权限，显示警告消息并返回。<br>使用深拷贝的方式将对象o赋值给entity。<br>显示模态框（通过调用$(‘#mod’).modal(‘show’)）。<br>add():<br>作用: 显示空表单以便添加新记录。<br>过程:<br>检查用户是否有相应的权限（权限索引为1）。如果没有权限，显示警告消息并返回。<br>重置entity对象为{sex: ‘男’}。<br>显示模态框（通过调用$(‘#mod’).modal(‘show’)）。<br>update():<br>作用: 保存或更新分类信息。<br>过程:<br>检查entity是否有效（假设有一个名为checkValid的函数进行验证）。<br>如果entity没有ID，则执行POST请求以添加新记录。<br>发送POST请求到&#x2F;classifyInfo，携带entity数据。<br>根据响应结果，显示成功或错误消息，并关闭模态框，重新加载第一页的数据。<br>否则，执行PUT请求以更新现有记录。<br>发送PUT请求到&#x2F;classifyInfo，携带entity数据。<br>根据响应结果，显示成功或错误消息，并关闭模态框，重新加载第一页的数据。<br>del(id):<br>作用: 删除指定ID的分类信息。<br>参数: id - 要删除的记录的ID。<br>过程:<br>检查用户是否有相应的权限（权限索引为2）。如果没有权限，显示警告消息并返回。<br>弹出确认对话框（通过调用this.$confirm），询问用户是否确认删除。<br>如果用户确认删除，则发送DELETE请求到&#x2F;classifyInfo&#x2F;{id}。<br>根据响应结果，显示成功或错误消息，并重新加载第一页的数据。<br>downModel():<br>作用: 下载Excel模板。<br>过程:<br>改变当前页面的URL为&#x2F;classifyInfo&#x2F;getExcelModel，触发下载操作。<br>clickUpload(e):<br>作用: 检查上传权限，阻止默认行为。<br>参数: e - 事件对象。<br>过程:<br>检查用户是否有相应的权限（权限索引为1）。如果没有权限，显示警告消息并阻止默认行为（通过调用e.preventDefault()）。<br>upload():<br>作用: 批量上传文件。<br>过程:<br>获取文件输入元素中的所有文件。<br>对于每个文件，创建一个FormData对象并添加文件。<br>发送POST请求到&#x2F;classifyInfo&#x2F;upload，携带FormData对象。<br>根据响应结果，显示成功或错误消息，并重新加载第一页的数据。<br>logout():<br>作用: 登出当前用户。<br>过程:<br>调用全局的logout函数，通常用于清除会话信息并跳转到登录页面</p>
<h4 id="entity部分理解"><a href="#entity部分理解" class="headerlink" title="entity部分理解"></a>entity部分理解</h4><p>为什么要创建 entity 对象？<br>在Vue实例中，entity 对象用于存储当前正在编辑或添加的分类信息。以下是具体原因：</p>
<p>数据绑定:<br>Vue的核心特性之一是双向数据绑定。通过将表单字段绑定到 entity 对象的属性上，可以轻松地同步用户输入和应用程序状态。<br>简化操作:<br>当需要向服务器发送数据时，可以直接使用 entity 对象而不需要手动收集每个表单字段的值。这减少了代码的复杂性并降低了出错的可能性。<br>复用逻辑:<br>在添加新记录和更新现有记录时，可以使用相同的 entity 对象来存储数据。这样可以避免重复代码，提高代码的可维护性。<br>初始化状态:<br>通过初始化 entity 对象，可以确保每次打开模态框时都有一个干净的状态。这对于防止不同操作之间的数据混淆非常重要。<br>为什么性别默认设置为“男”？<br>将性别默认设置为“男”是为了提供一个合理的初始值，以便在用户尚未选择其他选项时有一个明确的状态。以下是具体原因：</p>
<p>用户体验:<br>提供一个默认值可以让用户更快地完成表单填写，特别是在用户通常会选择某个特定选项的情况下（例如大多数情况下可能是男性）。<br>减少错误:<br>如果没有默认值，用户可能会忘记选择性别，导致提交表单时出现验证错误。默认值可以帮助用户避免这种疏忽。<br>一致性:<br>默认值可以保持表单的一致性，确保所有新建记录都有一个有效的性别字段。</p>
<h3 id="ClassifyInfoController接口"><a href="#ClassifyInfoController接口" class="headerlink" title="ClassifyInfoController接口"></a>ClassifyInfoController接口</h3><h2 id="NxSystemFile文件管理相关模块"><a href="#NxSystemFile文件管理相关模块" class="headerlink" title="NxSystemFile文件管理相关模块"></a>NxSystemFile文件管理相关模块</h2><h3 id="对应数据库实体类"><a href="#对应数据库实体类" class="headerlink" title="对应数据库实体类"></a>对应数据库实体类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table(name = &quot;nx_system_file_info&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NxSystemFileInfo</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span>  <span class="comment">//标记这个字段为主键</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">	<span class="comment">//指定主键生成策略</span></span><br><span class="line">	<span class="comment">//strategy 属性: 使用 GenerationType.IDENTITY 策略，</span></span><br><span class="line">	<span class="comment">//表示主键值由数据库自动生成（通常是自动递增的 ID）。</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Column(name = &quot;originName&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String originName;</span><br><span class="line">	<span class="meta">@Column(name = &quot;fileName&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getOriginName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> originName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOriginName</span><span class="params">(String originName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.originName = originName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getFileName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> fileName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFileName</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.fileName = fileName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="控制器NxSystemFileController"><a href="#控制器NxSystemFileController" class="headerlink" title="控制器NxSystemFileController"></a>控制器NxSystemFileController</h3><h4 id="接口之间联系"><a href="#接口之间联系" class="headerlink" title="接口之间联系"></a>接口之间联系</h4><p>用户通过 upload() 或 noticeUpload() 上传文件后，文件信息会被保存到数据库。<br>用户可以通过 filePage() 查看文件列表，点击某个文件后，可以通过 getById() 接口查看该文件的详细信息</p>
<h4 id="upload-文件上传接口"><a href="#upload-文件上传接口" class="headerlink" title="upload()文件上传接口"></a>upload()文件上传接口</h4><p>实现思路：</p>
<ol>
<li>定义文件的基础保存路径<br>BASE_PATH 是文件存储的基本路径，使用 System.getProperty(“user.dir”) 获取项目的根目录，并在其下创建一个 static&#x2F;file&#x2F; 目录来存储上传的文件<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BASE_PATH</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/resources/static/file/&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>注入服务实现类<br>使用 @Resource 注解注入 NxSystemFileInfoServiceimpl 实例，用于处理与文件相关的业务逻辑。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Resource</span></span><br><span class="line"><span class="keyword">private</span> NxSystemFileInfoServiceimpl nxSystemFileInfoService;</span><br></pre></td></tr></table></figure></li>
<li>创建文件上传的upload()接口<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">  <span class="comment">//file.getOriginalFilename() 获取用户上传文件的原始文件名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"><span class="comment">// 1. 先查询有没有相同名称的文件(这个没应用)</span></span><br><span class="line"><span class="comment">//    NxSystemFileInfo fileInfo = nxSystemFileInfoService.findByFileName(name);</span></span><br><span class="line"><span class="comment">//    if (fileInfo != null) &#123;</span></span><br><span class="line"><span class="comment">//        throw new CustomException(&quot;1001&quot;, &quot;文件名：\&quot;&quot; + name + &quot;\&quot;已存在&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">// 文件名加个时间戳，生成唯一文件名</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.mainName(originName) 获取文件主名。</span></span><br><span class="line">    <span class="comment">//使用 System.currentTimeMillis() 添加时间戳以确保文件名唯一性。</span></span><br><span class="line">    <span class="comment">//使用 FileUtil.extName(originName) 获取文件扩展名。</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> FileUtil.mainName(originName) + System.currentTimeMillis() + <span class="string">&quot;.&quot;</span> + FileUtil.extName(originName);</span><br><span class="line">    <span class="comment">// 2. 文件上传</span></span><br><span class="line">    <span class="comment">//FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName) 将文件字节数组写入指定路径</span></span><br><span class="line">    FileUtil.writeBytes(file.getBytes(), BASE_PATH + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 信息入库，获取文件id</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">NxSystemFileInfo</span>();</span><br><span class="line">    info.setOriginName(originName);</span><br><span class="line">    info.setFileName(fileName);</span><br><span class="line">    <span class="comment">//调用 nxSystemFileInfoService.add(info) 将文件信息存入数据库</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">addInfo</span> <span class="operator">=</span> nxSystemFileInfoService.add(info);</span><br><span class="line">    <span class="comment">//根据返回结果决定返回成功或失败的消息</span></span><br><span class="line">    <span class="keyword">if</span> (addInfo != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(addInfo);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;4001&quot;</span>, <span class="string">&quot;上传失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="文件上传前端js代码"><a href="#文件上传前端js代码" class="headerlink" title="文件上传前端js代码"></a>文件上传前端js代码</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">upload</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">// 获取文件输入控件中的文件</span></span><br><span class="line">                <span class="keyword">let</span> files = <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">file</span>.<span class="property">files</span>;</span><br><span class="line">                <span class="comment">// 遍历文件数组</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; files.<span class="property">length</span>; i++) &#123;</span><br><span class="line">                    <span class="keyword">let</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span><br><span class="line">                    <span class="comment">// 将文件添加到FormData对象中</span></span><br><span class="line">                    formData.<span class="title function_">append</span>(<span class="string">&#x27;file&#x27;</span>, files[i]);</span><br><span class="line">                    <span class="comment">// 发起POST请求上传文件</span></span><br><span class="line">                    axios.<span class="title function_">post</span>(<span class="string">&#x27;/files/upload&#x27;</span>, formData, &#123;</span><br><span class="line">                        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span></span><br><span class="line">                    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="comment">// 文件上传成功后的处理</span></span><br><span class="line">                        <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;success&#x27;</span>,<span class="string">&#x27;文件上传成功&#x27;</span>);</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileId</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">id</span>;</span><br><span class="line">                            <span class="variable language_">this</span>.<span class="property">entity</span>.<span class="property">fileName</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">originName</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">msg</span>(<span class="string">&#x27;error&#x27;</span>, res.<span class="property">data</span>.<span class="property">msg</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h4 id="filePage-分页查询文件信息接口"><a href="#filePage-分页查询文件信息接口" class="headerlink" title="filePage() 分页查询文件信息接口"></a>filePage() 分页查询文件信息接口</h4><p>filePage() 接口用于分页查询文件信息，可以根据文件名关键字进行筛选。<br>该接口依赖于 nxSystemFileInfoService.findPage 方法，从数据库中获取文件信息列表</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件分页查询接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name 文件名关键字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageNum 当前页号</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> pageSize 每页大小</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 返回文件信息分页结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/page/&#123;name&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;PageInfo&lt;NxSystemFileInfo&gt;&gt; <span class="title function_">filePage</span><span class="params">(<span class="meta">@PathVariable</span> String name,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;1&quot;)</span> Integer pageNum,</span></span><br><span class="line"><span class="params">                                                   <span class="meta">@RequestParam(defaultValue = &quot;10&quot;)</span> Integer pageSize)</span> &#123;</span><br><span class="line"></span><br><span class="line">    PageInfo&lt;NxSystemFileInfo&gt; pageInfo = nxSystemFileInfoService.findPage(name, pageNum, pageSize);</span><br><span class="line">    <span class="keyword">return</span> Result.success(pageInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="download-文件下载接口"><a href="#download-文件下载接口" class="headerlink" title="download() 文件下载接口"></a>download() 文件下载接口</h4><p>实现思路：</p>
<ol>
<li>接口通过id查找文件，@GetMapping(“&#x2F;download&#x2F;{id}”): 用于根据文件 ID 下载文件。</li>
<li>先验证文件id，然后根据id用服务层方法findById()查询数据库中的文件信息</li>
<li>通过FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</li>
<li>设置响应头，指示浏览器下载文件，最后将文件内容写入响应输出流并返回给客户端<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/download/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">download</span><span class="params">(<span class="meta">@PathVariable</span> String id, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 检查文件ID是否为&quot;null&quot;</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;null&quot;</span>.equals(id)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;您未上传文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//调用服务层方法 findById 根据文件 ID 查询文件信息</span></span><br><span class="line">    <span class="comment">// 根据文件ID查询数据库中的文件信息</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;未查询到该文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取文件内容</span></span><br><span class="line">    <span class="comment">//BASE_PATH 是文件存储的基本路径。</span></span><br><span class="line">    <span class="comment">//nxSystemFileInfo.getFileName() 获取文件的新文件名。</span></span><br><span class="line">    <span class="comment">//FileUtil.readBytes 方法读取文件内容并将其转换为字节数组</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重置响应</span></span><br><span class="line">    <span class="comment">//清除响应中的所有缓存和设置</span></span><br><span class="line">    <span class="comment">//确保响应对象处于干净状态，避免之前的设置干扰当前操作</span></span><br><span class="line">    response.reset();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应头，指示浏览器如何处理文件</span></span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(nxSystemFileInfo.getOriginName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Length&quot;</span>, <span class="string">&quot;&quot;</span> + bytes.length);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取响应的输出流，用于将文件内容写入响应</span></span><br><span class="line">    <span class="comment">//使用 BufferedOutputStream 包装 response.getOutputStream()，提高写入效率</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">toClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(response.getOutputStream());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置响应内容类型</span></span><br><span class="line">    <span class="comment">// application/octet-stream 是通用的二进制流类型，适用于各种类型的文件。浏览器会根据这个类型决定如何处理文件（通常是下载）</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/octet-stream&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将文件内容写入响应输出流并关闭输出流</span></span><br><span class="line">    toClient.write(bytes);<span class="comment">//将文件内容写入输出流</span></span><br><span class="line">    toClient.flush();<span class="comment">//刷新输出流，确保所有数据都被写出</span></span><br><span class="line">    toClient.close();<span class="comment">//关闭输出流，释放资源</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="getById-接口"><a href="#getById-接口" class="headerlink" title="getById() 接口"></a>getById() 接口</h4><ol>
<li>功能:调用服务层方法 findById 根据文件ID 查询单个文件的信息，并验证文件是否存在。</li>
<li>返回值:返回包含文件信息的成功结果或抛出自定义异常</li>
<li>异常处理:<br>如果文件 ID 无效或文件不存在，抛出自定义异常 CustomException。<br>可能抛出 NumberFormatException 异常，表示文件 ID 格式不正确。<br>可能抛出 IOException 异常，表示文件读写过程中发生错误。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">  <span class="comment">//将字符串形式的文件 ID 转换为长整型，并调用服务层方法 findById 查询文件信息</span></span><br><span class="line">  <span class="comment">//Long.parseLong(id) 将字符串形式的文件 ID 转换为长整型</span></span><br><span class="line">  <span class="comment">//nxSystemFileInfoService.findById(Long.parseLong(id)) 方法从数据库中查找指定 ID 的文件信息。</span></span><br><span class="line">  <span class="comment">//返回的 NxSystemFileInfo 对象包含文件的各种属性，如原始文件名、新文件名等</span></span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="deleteFile删除文件接口"><a href="#deleteFile删除文件接口" class="headerlink" title="deleteFile删除文件接口"></a>deleteFile删除文件接口</h4><p>实现思路：</p>
<ol>
<li>先接收文件ID<br>@DeleteMapping(“&#x2F;{id}”) 表示处理 DELETE 请求。<br>@PathVariable String id：从 URL 中提取文件 ID。<br>调用 nxSystemFileInfoService.findById(Long.parseLong(id)) 方法根据 ID 查找文件信息。<br>如果找不到文件信息，则抛出异常</li>
<li>获取文件名，通过FileUtil.del(new File(BASE_PATH + name)) 删除文件</li>
<li>调用 nxSystemFileInfoService.delete(Long.parseLong(id)) 方法删除数据库中的记录</li>
<li>返回删除成功的消息。<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result&lt;NxSystemFileInfo&gt; <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> &#123;</span><br><span class="line">    <span class="type">NxSystemFileInfo</span> <span class="variable">nxSystemFileInfo</span> <span class="operator">=</span> nxSystemFileInfoService.findById(Long.parseLong(id));</span><br><span class="line">    <span class="keyword">if</span> (nxSystemFileInfo == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;数据库未查到此文件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        FileUtil.readBytes(BASE_PATH + nxSystemFileInfo.getFileName());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">CustomException</span>(<span class="string">&quot;1001&quot;</span>, <span class="string">&quot;此文件已被您删除&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Result.success(nxSystemFileInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="NxSystemFileController控制器相关重点理解"><a href="#NxSystemFileController控制器相关重点理解" class="headerlink" title="NxSystemFileController控制器相关重点理解"></a>NxSystemFileController控制器相关重点理解</h4><ol>
<li>如何实现文件上传功能？<br>A: 文件上传功能通过 @PostMapping(“&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名（添加时间戳）。然后将文件内容保存到指定路径，并将文件信息（如原始文件名和生成的文件名）存入数据库。最后返回上传结果。</li>
<li>为什么在文件上传时要生成唯一的文件名？<br>A: 生成唯一的文件名是为了避免文件名冲突。通过在文件名后添加时间戳，可以确保每个上传的文件都有唯一的标识符，防止不同用户上传同名文件时发生覆盖。</li>
<li>如何实现图片上传并缩小尺寸？<br>A: 图片上传并通过 Thumbnails 库缩小尺寸的功能通过 @PostMapping(“&#x2F;notice&#x2F;upload”) 接口实现。首先获取用户上传文件的原始文件名，并生成一个唯一的文件名。然后使用 Thumbnails 库将图片宽度缩小到 400 像素，并保存到指定路径。最后将文件信息存入数据库，并返回上传结果。</li>
<li>如何实现文件分页查询？<br>A: 文件分页查询功能通过 @GetMapping(“&#x2F;page&#x2F;{name}”) 接口实现。首先从请求参数中获取文件名关键字、当前页号和每页大小。然后调用 nxSystemFileInfoService.findPage 方法进行分页查询，并返回分页结果。</li>
<li>如何实现文件下载功能？<br>A: 文件下载功能通过 @GetMapping(“&#x2F;download&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则读取文件内容并将其写入响应输出流，同时设置响应头以便客户端下载文件。如果找不到文件信息，则抛出异常。</li>
<li>如何实现文件删除功能？<br>A: 文件删除功能通过 @DeleteMapping(“&#x2F;{id}”) 接口实现。首先根据文件 ID 查找文件信息。如果找到文件信息，则先删除文件，再删除数据库中的记录。最后返回删除成功的消息。</li>
<li>如何确保文件操作的安全性和健壮性？<br>A: 为了确保文件操作的安全性和健壮性，代码中进行了以下措施：</li>
</ol>
<p>在文件上传时生成唯一的文件名，避免文件名冲突。<br>在文件下载和删除时检查文件是否存在，防止对不存在的文件进行操作。<br>使用 try-catch 块捕获可能出现的异常，并抛出自定义异常进行处理。<br>使用 FileUtil 工具类进行文件读写操作，简化文件操作并提高安全性。<br>8. upload() 接口和 noticeUpload() 接口的区别<br>用途不同:<br>upload() 用于通用文件上传。<br>noticeUpload() 特定用于上传通知公告的图片，并对其进行尺寸调整。<br>处理流程差异:<br>upload() 直接保存上传的文件。<br>noticeUpload() 在保存文件之前使用 Thumbnails 库缩小图片尺寸。<br>返回值不同:<br>upload() 返回的是文件信息对象。<br>noticeUpload() 返回的是包含文件 URL 和标题的映射对象。</p>
<h3 id="服务层NxSystemFileService"><a href="#服务层NxSystemFileService" class="headerlink" title="服务层NxSystemFileService"></a>服务层NxSystemFileService</h3><h4 id="NxSystemFileService-jaba代码"><a href="#NxSystemFileService-jaba代码" class="headerlink" title="NxSystemFileService.jaba代码"></a>NxSystemFileService.jaba代码</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoService</span> &#123;</span><br><span class="line"><span class="comment">//接口定义了一组抽象方法，这些方法需要由实现该接口的具体类来提供具体的实现。</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">add</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(String name)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="impl类-NxSystemFileInfoServiceImpl-java"><a href="#impl类-NxSystemFileInfoServiceImpl-java" class="headerlink" title="impl类 NxSystemFileInfoServiceImpl.java"></a>impl类 NxSystemFileInfoServiceImpl.java</h4><p>NxSystemFileInfoServiceImpl类，用于实现 NxSystemFileInfoService 接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.dao.NxSystemFileInfoDao;</span><br><span class="line"><span class="keyword">import</span> com.example.entity.NxSystemFileInfo;</span><br><span class="line"><span class="keyword">import</span> com.example.service.NxSystemFileInfoService;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NxSystemFileInfoServiceimpl</span> <span class="keyword">implements</span> <span class="title class_">NxSystemFileInfoService</span> &#123;</span><br><span class="line"><span class="comment">//实现 NxSystemFileInfoService 接口</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;authority.info&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@Value 注解:@Value(&quot;$&#123;authority.info&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//从配置文件（如 application.properties 或 application.yml）中注入属性值。</span></span><br><span class="line">    <span class="comment">//private String authorityInfo;: 声明了一个字符串类型的字段 authorityInfo，用于存储从配置文件中读取的权限信息。</span></span><br><span class="line">    <span class="keyword">private</span> String authorityInfo;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> NxSystemFileInfoDao nxSystemFileInfoDao;</span><br><span class="line">    <span class="comment">//用于依赖注入，将 NxSystemFileInfoDao 实例注入到当前类中。</span></span><br><span class="line">    <span class="comment">//声明了一个 NxSystemFileInfoDao 类型的字段 nxSystemFileInfoDao，用于与数据库进行交互</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">add</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> &#123;</span><br><span class="line">        <span class="comment">//调用 DAO 接口的方法，将文件信息插入数据库。insertSelective 方法会在插入时忽略空字段。</span></span><br><span class="line">        <span class="comment">//return nxSystemFileInfo: 返回插入后的文件信息对象</span></span><br><span class="line">        nxSystemFileInfoDao.insertSelective(nxSystemFileInfo);</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        nxSystemFileInfoDao.deleteByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(NxSystemFileInfo nxSystemFileInfo)</span> &#123;</span><br><span class="line">        nxSystemFileInfoDao.updateByPrimaryKeySelective(nxSystemFileInfo);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.findByFileName(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;NxSystemFileInfo&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nxSystemFileInfoDao.findByName(<span class="string">&quot;all&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* String name: 文件名关键字。</span></span><br><span class="line"><span class="comment">Integer pageNum: 当前页码。</span></span><br><span class="line"><span class="comment">Integer pageSize: 每页显示的记录数。</span></span><br><span class="line"><span class="comment">实现细节:</span></span><br><span class="line"><span class="comment">PageHelper.startPage(pageNum, pageSize): 使用 PageHelper 设置分页参数。</span></span><br><span class="line"><span class="comment">nxSystemFileInfoDao.findByName(name): 调用 DAO 接口的方法，获取分页数据。</span></span><br><span class="line"><span class="comment">PageInfo.of(all): 将结果包装成 PageInfo 对象，方便前端展示分页信息*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageInfo&lt;NxSystemFileInfo&gt; <span class="title function_">findPage</span><span class="params">(String name, Integer pageNum, Integer pageSize)</span> &#123;</span><br><span class="line">        PageHelper.startPage(pageNum, pageSize);</span><br><span class="line">        List&lt;NxSystemFileInfo&gt; all = nxSystemFileInfoDao.findByName(name);</span><br><span class="line">        <span class="keyword">return</span> PageInfo.of(all);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="dao层-NxSystemFileInfoDao"><a href="#dao层-NxSystemFileInfoDao" class="headerlink" title="dao层 NxSystemFileInfoDao"></a>dao层 NxSystemFileInfoDao</h3><p>NxSystemFileInfoDao接口代码</p>
<ol>
<li><p>继承 Mapper<NxSystemFileInfo></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;NxSystemFileInfo&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>作用: 继承 tk.mybatis.mapper.common.Mapper 接口，提供了基本的 CRUD 操作方法（如 selectByPrimaryKey, insert, updateByPrimaryKey, deleteByPrimaryKey 等）<br>解释: tk.mybatis.mapper.common.Mapper 是 MyBatis 的一个通用 Mapper，简化了常见的数据库操作</p>
</blockquote>
</li>
<li><p>@Repository注解<br>》 将接口标识为 Spring 的仓库组件，Spring 会自动扫描并注册这个接口为 Bean。<br>解释: 使得 NxSystemFileInfoDao 可以被其他组件（如 Service 层）通过依赖注入（Dependency Injection, DI）来使用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.entity.NxSystemFileInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> tk.mybatis.mapper.common.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//将接口标识为 Spring 的仓库组件，Spring 会自动扫描并注册这个接口为 Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">NxSystemFileInfoDao</span> <span class="keyword">extends</span> <span class="title class_">Mapper</span>&lt;NxSystemFileInfo&gt; &#123;</span><br><span class="line">    List&lt;NxSystemFileInfo&gt; <span class="title function_">findByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line">    NxSystemFileInfo <span class="title function_">findByFileName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="NxSystemFileInfoMapper-xml"><a href="#NxSystemFileInfoMapper-xml" class="headerlink" title="NxSystemFileInfoMapper.xml"></a>NxSystemFileInfoMapper.xml</h3><p><strong>实现思路</strong>：先在mapper根元素中通过namespace属性: 指定了这个映射文件对应的 DAO 接口全限定名。MyBatis 使用这个命名空间来找到对应的接口方法。<br>然后在MyBatis映射文件NxSystemFileInfoMapper.xml文件中定义了与数据库交互的 SQL 查询语句，对应于 NxSystemFileInfoDao 接口中的方法。先通过传入的name参数进行模糊查询。如果name为null、空字符串或’all’，则不进行名称过滤，并把查询结果按照文件信息的ID进行排序</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace 属性: 指定了这个映射文件对应的 DAO 接口全限定名。</span></span><br><span class="line"><span class="comment">MyBatis使用这个命名空间来找到对应的接口方法。--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.dao.NxSystemFileInfoDao&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--.通过传入的name参数进行模糊查询</span></span><br><span class="line"><span class="comment">     如果name为null、空字符串或&#x27;all&#x27;，则不进行名称过滤</span></span><br><span class="line"><span class="comment">     查询结果按照文件信息的ID进行排序--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.NxSystemFileInfo&quot;</span>&gt;</span></span><br><span class="line">        select `nx_system_file_info`.* from `nx_system_file_info`</span><br><span class="line">        where 1 = 1</span><br><span class="line">        <span class="comment">&lt;!-- where 1 = 1 用于避免动态条件拼接时的语法错误,用于简化动态条件拼接。</span></span><br><span class="line"><span class="comment">       &lt;if&gt; 元素: 动态 SQL 条件，只有在 name 参数不为空且不是 &#x27;all&#x27; 时才会添加到 SQL 语句中</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27; and name != &#x27;all&#x27;&quot;</span>&gt;</span></span><br><span class="line">            and `nx_system_file_info`.`originName` like concat(&#x27;%&#x27;, #&#123;name&#125;, &#x27;%&#x27;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        order by `nx_system_file_info`.id</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findByFileName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.example.entity.NxSystemFileInfo&quot;</span>&gt;</span></span><br><span class="line">        select `nx_system_file_info`.* from `nx_system_file_info`</span><br><span class="line">        where `nx_system_file_info`.`fileName` = #&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>前后端协作</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>项目</tag>
        <tag>全栈</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3项目练习-大事件项目（完成3/4）</title>
    <url>/2024/11/12/13-vue3%E5%A4%A7%E4%BA%8B%E4%BB%B6%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h1 id="vue3大事件项目"><a href="#vue3大事件项目" class="headerlink" title="vue3大事件项目"></a>vue3大事件项目</h1><h2 id="创建项目-pnpm"><a href="#创建项目-pnpm" class="headerlink" title="创建项目(pnpm)"></a>创建项目(pnpm)</h2><p>先安装pnpm，然后使用pnpm创建项目<br>注意安装pnpm的时候在一个空文件夹下安装，不要按照到电脑磁盘根目录，可能权限不够<br>pnpm<img src="/postImgs/oldImg/xmvue3Pic1.png" alt="alt text"><br>pnpm创建项目<img src="/postImgs/oldImg/xmvue3Pic2.png" alt="alt text"><br>为项目安装依赖<img src="/postImgs/oldImg/xmvue3Pic3.png" alt="alt text"><br>项目接口文档<a href="https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835">https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835</a></p>
<p>本项目的技术栈 本项目技术栈基于 <a href="http://es6.ruanyifeng.com/">ES6</a>、<a href="https://cn.vuejs.org/index.html">vue3</a>、<a href="https://pinia.web3doc.top/">pinia</a>、<a href="https://router.vuejs.org/">vue-router</a> 、vite 、axios 和 <a href="https://element-plus.org/">element-plus</a></p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Eslint-prettier配置代码风格"><a href="#Eslint-prettier配置代码风格" class="headerlink" title="Eslint+prettier配置代码风格"></a>Eslint+prettier配置代码风格</h3><p>理解：让代码更严谨规范<br>配置文件.eslintrc.cjs (eslint.config.js)</p>
<ol>
<li>二者结合起来配置<br>Eslint规范纠错（校验），prettier风格美观配置（格式化）</li>
<li>vue组件名称多单词组成（忽略index.vue）</li>
<li>props解构（关闭）<br>props解构默认报错，因为会丢失响应式，但是后续会有响应式，关闭这个报错<br>视频提供的代码如下，但是由于视频项目修改的配置文件和我项目拥有的配置文件不一样，所以我问了chat帮我把以下代码添加到我的文件中<br>配置的规则：</li>
<li>不适用双引号，全部使用单引号</li>
<li>每行代码的长度不超过80（做项目通常分屏，一边写代码一边看效果演示，80长度适合）</li>
<li>无分号</li>
<li>对象最后一个属性后面没有逗号</li>
<li>换行符号不做显示（因为win和mac这个不一致）<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">rules</span>: &#123;</span><br><span class="line">  <span class="string">&#x27;prettier/prettier&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">singleQuote</span>: <span class="literal">true</span>, <span class="comment">// 单引号</span></span><br><span class="line">      <span class="attr">semi</span>: <span class="literal">false</span>, <span class="comment">// 无分号</span></span><br><span class="line">      <span class="attr">printWidth</span>: <span class="number">80</span>, <span class="comment">// 每行宽度至多80字符</span></span><br><span class="line">      <span class="attr">trailingComma</span>: <span class="string">&#x27;none&#x27;</span>, <span class="comment">// 不加对象|数组最后逗号</span></span><br><span class="line">      <span class="attr">endOfLine</span>: <span class="string">&#x27;auto&#x27;</span> <span class="comment">// 换行符号不限制（win mac 不一致）</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;warn&#x27;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">ignores</span>: [<span class="string">&#x27;index&#x27;</span>] <span class="comment">// vue组件名称多单词组成（忽略index.vue）</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&#x27;vue/no-setup-props-destructure&#x27;</span>: [<span class="string">&#x27;off&#x27;</span>], <span class="comment">// 关闭 props 解构的校验</span></span><br><span class="line">  <span class="comment">// 💡 添加未定义变量错误提示，create-vue@3.6.3 关闭，这里加上是为了支持下一个章节演示。</span></span><br><span class="line">  <span class="string">&#x27;no-undef&#x27;</span>: <span class="string">&#x27;error&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>如果有在vscode安装prettier插件要禁用 format on save 关闭<br>需要安装Eslint插件，并配置保存时自动修复（这个配置给vscode的设置配置，我在vue2大项目中跟着配置过了，这里就不写了）</p>
<h4 id="eslintrc-cjs文件和eslint-config-mjs文件"><a href="#eslintrc-cjs文件和eslint-config-mjs文件" class="headerlink" title=".eslintrc.cjs文件和eslint.config.mjs文件"></a>.eslintrc.cjs文件和eslint.config.mjs文件</h4><p>视频中出现的是前者而我项目创建的文件是后者，以下是chat的回复：<br>.eslintrc.cjs：是一个 CommonJS 模块格式的配置文件，通常用于较旧的 ESLint 版本或需要 CommonJS 的环境。<br>eslint.config.mjs：是一个 ECMAScript 模块格式 (ESM) 配置文件，通常用于支持 ES 模块的更现代的设置中。<br>.mjs代表“模块”，它使用export导出配置的语法</p>
<h3 id="配置代码检查工作流"><a href="#配置代码检查工作流" class="headerlink" title="配置代码检查工作流"></a>配置代码检查工作流</h3><p>理解：在提交代码（上传仓库）前再做一遍检查，类似生命周期里的一个钩子，在特定的时期（提交时）执行特定的命令。<br>简要理解：不让你把编译器看出来的报错代码上传到仓库，只能上传vscode不报错的正确代码到仓库</p>
<ol>
<li><p>初始化 git 仓库，执行 git init 即可</p>
</li>
<li><p>初始化 husky 工具配置，执行 pnpm dlx husky-init &amp;&amp; pnpm install 即可<a href="https://typicode.github.io/husky/">https://typicode.github.io/husky/</a></p>
</li>
<li><p>修改 .husky&#x2F;pre-commit 文件</p>
</li>
</ol>
<p>操作：</p>
<ol>
<li>在vscode打开项目终端，注意这里打开bash终端，因为这是和git相关的操作<img src="/postImgs/oldImg/xmvue3Pic4.png" alt="终端git bash"><br>2.初始化git<br>git init </li>
<li>安装<br>pnpm dlx husky-init &amp;&amp; pnpm install<br>成功后我的显示以下内容<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">husky - <span class="title class_">Git</span> hooks installed</span><br><span class="line"></span><br><span class="line"><span class="attr">devDependencies</span>:</span><br><span class="line">+ husky <span class="number">8.0</span><span class="number">.3</span> (<span class="number">9.1</span><span class="number">.6</span> is available)    </span><br><span class="line"></span><br><span class="line"><span class="title class_">Done</span> <span class="keyword">in</span> <span class="number">2.</span>4s</span><br></pre></td></tr></table></figure>
4.安装后在项目中自动新建了一个.husky文件夹，里面有pre-commit文件，文件里就是代码提交前要做的事情（根据写入的从package.json文件夹找规则）</li>
</ol>
<p>把这个文件里的npm test进行修改<br>如果改为pnpm lint是全量检查，会有耗时问题和历史问题<br>实际上更推荐暂存区eslint校验，保证每次新写的代码是规范的</p>
<h4 id="暂存区Eslint校验"><a href="#暂存区Eslint校验" class="headerlink" title="暂存区Eslint校验"></a>暂存区Eslint校验</h4><p>理解：不让把暂存区中的报错代码上传到仓库</p>
<ol>
<li><p>安装lint-staged包（还是在bash里面）<br>pnpm i lint-staged -D</p>
</li>
<li><p>对<code>package.json</code>配置lint-staged命令<br>在文件后面最后增加如下代码</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;lint-staged&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;*.&#123;js,ts,vue&#125;&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;eslint --fix&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在scripts中的和后面增加”lint-staged”: “lint-staged”</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="comment">// ... 省略 ...</span></span><br><span class="line">  <span class="string">&quot;lint-staged&quot;</span>: <span class="string">&quot;lint-staged&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>修改 .husky&#x2F;pre-commit 文件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">pnpm lint-staged</span><br></pre></td></tr></table></figure>
<p>我的这里中间出了问题，chat帮我解决了，写在报错部分了</p>
</li>
<li><p>测试<br>我在main.js中写了一行错误代码然后尝试添加提交到仓库，在提交时被发现拦截<br><img src="/postImgs/oldImg/xmvue3Pic6.png" alt="vscode git暂存区校验成功"><br><img src="/postImgs/oldImg/xmvue3Pic7.png" alt="小乌龟 git暂存区校验成功"></p>
</li>
</ol>
<h3 id="调整目录"><a href="#调整目录" class="headerlink" title="调整目录"></a>调整目录</h3><p>默认生成的目录结构不满足我们的开发需求，所以这里需要做一些自定义改动：</p>
<ul>
<li>删除一些初始化的默认文件</li>
<li>修改剩余代码内容</li>
<li>新增调整我们需要的目录结构</li>
<li>拷贝初始化资源文件，安装预处理器插件</li>
</ul>
<ol>
<li>删除文件<br>src&#x2F;assets文件夹文件<br>src&#x2F;components文件夹文件<br>src&#x2F;stores文件夹文件</li>
<li>修改内容</li>
</ol>
<ul>
<li><p>src&#x2F;router&#x2F;index.js修改为以下内容（把routers内容清空了）</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
</li>
<li><p>src&#x2F;App.vue内容清空</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>src&#x2F;main.js内容清空</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>新增需要目录：api（请求模块）文件夹和utils（工具函数）文件夹</p>
</li>
<li><p>将项目需要的全局样式和图片文件，cv到assets文件夹, 并将assets&#x2F;main.scss全局样式文件在main.js中引入<br>安装 sass 依赖<br>pnpm add sass -D<br>main.js中添加下面代码，注意自己的样式尽量往下放让它权重高一点，保证它的优先级</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/main.scss&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="路由调整"><a href="#路由调整" class="headerlink" title="路由调整"></a>路由调整</h3><h4 id="vue3路由：vue-router4"><a href="#vue3路由：vue-router4" class="headerlink" title="vue3路由：vue-router4"></a>vue3路由：vue-router4</h4><p>相对于vue-router3，4相当于给VueRouter封装了一下，内部还是newVueRouter；导包是按需导入而不是导入VueRouter;history配置模式<br>vue3向前兼容vue2的语法</p>
<ul>
<li>路由模式<br>1.history 模式使用 createWebHistory()<br>2.hash 模式使用 createWebHashHistory()<br>3.参数是基础路径，默认&#x2F;</li>
<li>history: createWebHistory(import.meta.env.BASE_URL)<br>在官网Vite官方文档-环境变量和模式中也有说明<br>import.meta.env.BASE_URL  是vite中的环境变量，可以在vite.config.js中配置，base配置项，默认是&#x2F;这样以后修改会很方便<br>import.meta.env.BASE_URL 是Vite 环境变量：<a href="https://cn.vitejs.dev/guide/env-and-mode.html">https://cn.vitejs.dev/guide/env-and-mode.html</a></li>
</ul>
<blockquote>
<p>在 Vue3 CompositionAPI 中<br>import {useRoute,useRouter } from ‘vue-router’<br>1.获取路由对象（写入） router useRouter<br>const router &#x3D;useRouter<br>router是大的路由对象<br>2.获取路由参数（读取） route useRouteconst<br>route &#x3D;useRoute()<br>route是路由参数</p>
</blockquote>
<p>代码解析</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// createRouter 创建路由实例</span></span><br><span class="line"><span class="comment">// 配置 history 模式</span></span><br><span class="line"><span class="comment">// 1. history模式：createWebHistory     地址栏不带 #</span></span><br><span class="line"><span class="comment">// 2. hash模式：   createWebHashHistory 地址栏带 #</span></span><br><span class="line"><span class="comment">// vue3向前兼容vue2的语法</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">//在官网Vite官方文档-环境变量和模式中也有说明</span></span><br><span class="line">  <span class="comment">//import.meta.env.BASE_URL  是vite中的环境变量</span></span><br><span class="line">  <span class="comment">//可以在vite.config.js中配置，base配置项，这样以后修改会很方便</span></span><br><span class="line">  <span class="comment">//默认是/</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  <span class="attr">routes</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h3 id="按需引入-自动导入Element-Plus"><a href="#按需引入-自动导入Element-Plus" class="headerlink" title="按需引入-自动导入Element Plus"></a>按需引入-自动导入Element Plus</h3><p>先安装,再按需导入，然后<mark>直接使用组件</marik><br><mark>成功后你要用哪个插件不需要像vue2项目里一样为它单独导入注册再使用，而是直接使用即可，它发现你使用会自动帮你导入！！！</marik></p>
<ol>
<li>安装<br>官方文档：<a href="https://element-plus.org/zh-CN/">https://element-plus.org/zh-CN/</a><br>打开文档-导航栏右侧指南-左侧基础-安装<br>pnpm install element-plus</li>
<li>使用<br>文档的基础-快速开始-按需导入-自动导入（根据文档操作）<br>首先你需要安装unplugin-vue-components 和 unplugin-auto-import这两款插件<br>pnpm add -D unplugin-vue-components unplugin-auto-import</li>
<li>配置<br>根据文档cv代码到vite.config.js文件最后，然后修改：<br>导包部分：已经有了的删掉，没有的移动到前面<br>defineConfig- plugins部分:加入文档内容</li>
</ol>
<h4 id="使用一下！"><a href="#使用一下！" class="headerlink" title="使用一下！"></a>使用一下！</h4><p>配置结束后重新启动项目<br>然后就可以在项目的任意位置使用组件啦<br>还是官方文档-右上角组件-找到想要的样式-样式右下角查看源代码-找到想要的<mark>直接CV到项目！</mark><br>成功<img src="/postImgs/oldImg/xmvue3Pic8.png" alt="用他两个按钮测试一下"></p>
<h4 id="小问题"><a href="#小问题" class="headerlink" title="小问题"></a>小问题</h4><p>我好像把东西安装到了项目文件上层的一个文件夹里了，而不是项目本身这个文件夹，后来删除项目父文件夹的其他文件，在项目里重新安装导入了<br>注意打开项目的时候一定要只打开项目根文件夹，不要再打错啦！！</p>
<h3 id="Pinia构建持久化仓库"><a href="#Pinia构建持久化仓库" class="headerlink" title="Pinia构建持久化仓库"></a>Pinia构建持久化仓库</h3><p>理解：解决多组件共享一个数据的情况</p>
<h4 id="Pinia构建用户仓库"><a href="#Pinia构建用户仓库" class="headerlink" title="Pinia构建用户仓库"></a>Pinia构建用户仓库</h4><p>Pinia:在main.js中默认已经配好了（创建项目时配置的），所以只需要在stores文件夹中新建index.js文件和modules文件夹-建立仓库文件即可</p>
<p>新建用户仓库模块user.js，然后在App.vue里面测试</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户模块 </span></span><br><span class="line"><span class="comment">//token（自己本身的字段） setToken（登录） removeToken（退出）</span></span><br><span class="line"><span class="comment">//useUserStore 养成命名规范</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(</span><br><span class="line">  <span class="string">&#x27;big-user&#x27;</span>,</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line"> <span class="comment">//定义数据</span></span><br><span class="line">    <span class="keyword">const</span> token = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="comment">///定义操作数据的方法（下面这两个可以二合一，传空串进来也相当于remove，但这样写更清楚）</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">setToken</span> = newToken =&gt; &#123;</span><br><span class="line">      token.<span class="property">value</span> = newToken</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">removeToken</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      token.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">         <span class="comment">//不要忘记return暴露出去！</span></span><br><span class="line">      token,</span><br><span class="line">      setToken,</span><br><span class="line">      removeToken</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="测试一下！"><a href="#测试一下！" class="headerlink" title="测试一下！"></a>测试一下！</h4><p>App.vue测试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/stores/modules/user&#x27;</span><br><span class="line">//拿到仓库对象，然后从仓库对象里面拿我们想要的数据和token</span><br><span class="line">const userStore = useUserStore()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot;&gt;Warning&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot;&gt;Danger&lt;/el-button&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; userStore.token &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;el-button @click=&quot;userStore.setToken(&#x27;测试：我是token字符串&#x27;)&quot;</span><br><span class="line">      &gt;登录测试&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button @click=&quot;userStore.removeToken&quot;&gt;退出测试&lt;/el-button&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmvue3Pic9.png" alt="构建用户仓库成功"></p>
<h4 id="仓库持久化"><a href="#仓库持久化" class="headerlink" title="仓库持久化"></a>仓库持久化</h4><p>需要用pinia的持久化插件（官方文档步骤）</p>
<ol>
<li>先安装<br>pnpm add pinia-plugin-persistedstate -D</li>
<li>main.js中使用</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> persist <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line">...</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>().<span class="title function_">use</span>(persist))</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>配置 stores&#x2F;user.js，传递第三个参数persist<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(</span><br><span class="line">  ....,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">persist</span>: <span class="literal">true</span> <span class="comment">// 持久化</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
配置后重启服务，token会持久化，刷新后token还在不会丢</li>
</ol>
<h3 id="Pinia仓库统一管理"><a href="#Pinia仓库统一管理" class="headerlink" title="Pinia仓库统一管理"></a>Pinia仓库统一管理</h3><p>操作目标：Pinia独立维护；仓库统一导出；<br>操作：在main.js中，将和pinia相关的内容提取到stores文件夹下的index.js文件中，让index.js作为统一出口<br>main.js中导入index.js导出的pinia即可<br>并且app.vue文件要导入仓库的对象只需要从哪个@&#x2F;stores导入即可，就不用再&#x2F;modules&#x2F;user.js了，能这么写说明是在该文件夹下的index.js里面导出了</p>
<p>stores&#x2F;index.js文件夹代码解析：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//main.js中剪切过来的</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persist <span class="keyword">from</span> <span class="string">&#x27;pinia-plugin-persistedstate&#x27;</span></span><br><span class="line"><span class="comment">//拆成两行</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">pinia.<span class="title function_">use</span>(persist)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pinia</span><br><span class="line"><span class="comment">//import &#123; useUserStore &#125; from &#x27;./modules/user&#x27;</span></span><br><span class="line"><span class="comment">//export &#123; useUserStore &#125;</span></span><br><span class="line"><span class="comment">//import &#123; useCountStore &#125; from &#x27;./modules/counter&#x27;</span></span><br><span class="line"><span class="comment">//export &#123; useCountStore &#125;</span></span><br><span class="line"><span class="comment">//上面这四行太繁琐，学习下面两行代码实现统一导出！！</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span> <span class="comment">//接收user模块的所有按需导出</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./modules/counter&#x27;</span> <span class="comment">//接收/counter模块的所有按需导出</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="axios请求工具设置"><a href="#axios请求工具设置" class="headerlink" title="axios请求工具设置"></a>axios请求工具设置</h3><p>和vue2大项目类似，看官方文档有步骤<br>项目接口文档<a href="https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835">https://apifox.com/apidoc/shared-26c67aee-0233-4d23-aab7-08448fdf95ff/api-93850835</a></p>
<ol>
<li><p>安装axios<br>pnpm add axios</p>
</li>
<li><p>新建 utils&#x2F;request.js 封装 axios 模块</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;http://big-event-vue-api-t.itheima.net&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// TODO 1. 基础地址，超时时间</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 2. 携带token</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">err</span>) =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 3. 处理业务失败</span></span><br><span class="line">    <span class="comment">// TODO 4. 摘取核心响应数据</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 5. 处理401错误</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance</span><br></pre></td></tr></table></figure>


</li>
<li><p>axios 基本配置<br>utils&#x2F;request.js文件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ElMessage</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> baseURL = <span class="string">&#x27;http://big-event-vue-api-t.itheima.net&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="comment">// TODO 1. 基础地址，超时时间</span></span><br><span class="line">  baseURL,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">10000</span> <span class="comment">//10s</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 2. 携带token</span></span><br><span class="line">    <span class="keyword">const</span> useStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">    <span class="keyword">if</span> (useStore.<span class="property">token</span>) &#123;</span><br><span class="line">      <span class="comment">//看接口文档</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">Authorization</span> = useStore.<span class="property">token</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 4. 摘取核心响应数据</span></span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">data</span>.<span class="property">code</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//看接口文档，如果后端返回的数据是0</span></span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// TODO 3. 处理业务失败</span></span><br><span class="line">    <span class="comment">// 处理业务失败, 给错误提示，抛出错误</span></span><br><span class="line">    <span class="comment">//ElMessage类似vent，是从Element Plus里面导入的组件</span></span><br><span class="line">    <span class="comment">//记得上面先导入（视频弹幕说这上面不导入反而可以成功）</span></span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">message</span> || <span class="string">&#x27;服务异常&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(res.<span class="property">data</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TODO 5. 处理401错误</span></span><br><span class="line">    <span class="comment">// 错误的特殊情况 =&gt; 401 权限不足 或 token 过期 =&gt; 拦截到登录</span></span><br><span class="line">    <span class="keyword">if</span> (err.<span class="property">response</span>?.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 错误的默认情况 =&gt; 只要给提示</span></span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span> || <span class="string">&#x27;服务异常&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance</span><br><span class="line"><span class="keyword">export</span> &#123; baseURL &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="中英国际化处理"><a href="#中英国际化处理" class="headerlink" title="中英国际化处理"></a>中英国际化处理</h3><p>官方文档-左侧导航栏-配置组件-Config Provider全局配置<br>默认是英文的，由于这里不涉及切换， 所以在 在App.vue 中直接导入配置，将整个项目全部包裹</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> zhCn <span class="keyword">from</span> <span class="string">&#x27;element-plus/dist/locale/zh-cn.mjs&#x27;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- App.vue只需要留一个路由出口 router-view即可</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">     locale=&quot;zhCn&quot;主要是这个值的变化决定语言的变化，如果这里做个按钮修改值，那么即可修改语言--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-config-provider</span> <span class="attr">:locale</span>=<span class="string">&quot;zhCn&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-config-provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><h3 id="根据页面分析路由"><a href="#根据页面分析路由" class="headerlink" title="根据页面分析路由"></a>根据页面分析路由</h3><p>根据提供的完整项目地址看项目观察：<a href="https://fe-bigevent-web.itheima.net/login">https://fe-bigevent-web.itheima.net/login</a><br>首先运行项目先看到登录页面，用户登录旁边有“注册”，点击后页面地址不变还是&#x2F;login，这里是通过切换组件来实现的，公用一个路由<br>登录后进入首页，左侧导航栏有三个分类，点击每部分发现地址在变，对应的右侧在切换，说明这里要配置路由<br>架构：一级路由：登录页面，首页架子；二级路由：文章分类，文章管理，基本资料，更换头像，重置密码</p>
<p><strong>约定路由规则</strong> </p>
<table>
<thead>
<tr>
<th>path</th>
<th>文件</th>
<th>功能</th>
<th>组件名</th>
<th>路由级别</th>
</tr>
</thead>
<tbody><tr>
<td>&#x2F;login</td>
<td>views&#x2F;login&#x2F;LoginPage.vue</td>
<td>登录&amp;注册</td>
<td>LoginPage</td>
<td>一级路由</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>views&#x2F;layout&#x2F;LayoutContainer.vue</td>
<td>布局架子</td>
<td>LayoutContainer</td>
<td>一级路由</td>
</tr>
<tr>
<td>├─ &#x2F;article&#x2F;manage</td>
<td>views&#x2F;article&#x2F;ArticleManage.vue</td>
<td>文章管理</td>
<td>ArticleManage</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ &#x2F;article&#x2F;channel</td>
<td>views&#x2F;article&#x2F;ArticleChannel.vue</td>
<td>频道管理</td>
<td>ArticleChannel</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ &#x2F;user&#x2F;profile</td>
<td>views&#x2F;user&#x2F;UserProfile.vue</td>
<td>个人详情</td>
<td>UserProfile</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ &#x2F;user&#x2F;avatar</td>
<td>views&#x2F;user&#x2F;UserAvatar.vue</td>
<td>更换头像</td>
<td>UserAvatar</td>
<td>二级路由</td>
</tr>
<tr>
<td>├─ &#x2F;user&#x2F;password</td>
<td>views&#x2F;user&#x2F;UserPassword.vue</td>
<td>重置密码</td>
<td>UserPassword</td>
<td>二级路由</td>
</tr>
</tbody></table>
<h3 id="创建路由架子"><a href="#创建路由架子" class="headerlink" title="创建路由架子"></a>创建路由架子</h3><p>类似vue2路由创建，在views文件夹下创建各个路由名命名的文件夹<br>然后在router&#x2F;index.js配置路由</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/LoginPage.vue&#x27;</span>) &#125;, <span class="comment">// 登录页</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/layout/LayoutContainer.vue&#x27;</span>),</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/article/manage&#x27;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/article/manage&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/article/ArticleManage.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/article/channel&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/article/ArticleChannel.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/user/profile&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/user/UserProfile.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/user/avatar&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/user/UserAvatar.vue&#x27;</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/user/password&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/user/UserPassword.vue&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>配置成功后在地址栏输入不同的地址有对应的显示<br><img src="/postImgs/oldImg/xmvue3Pic10.png" alt="路由配置成功"><br><img src="/postImgs/oldImg/xmvue3Pic11.png" alt="路由配置成功"></p>
<h2 id="登录页"><a href="#登录页" class="headerlink" title="登录页"></a>登录页</h2><h3 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h3><p>静态解构，登录和注册的基本切换，注册功能的校验+调用后端成功注册，登录功能的校验+登录+存token<br>静态结构使用element-plus表单</p>
<h3 id="静态布局"><a href="#静态布局" class="headerlink" title="静态布局"></a>静态布局</h3><ol>
<li>清空布局<br>把之前测试组件路由的代码都清空掉，只留一个路由出口（我这里把之前的作为副本保存然后新建了一个空的app.vue）</li>
<li>安装图标库<br>页面用到的一些小图标来自element-plus图标库<br>pnpm i @element-plus&#x2F;icons-vue<br>然后重启项目</li>
<li>登录页静态布局<br>在src文件夹&#x2F;views&#x2F;login.LoginPage.vue CV提供的静态结构<br><strong>结构说明</strong><br>官方文档有说明，不用背 <a href="https://element-plus.org/zh-CN/">https://element-plus.org/zh-CN/</a><br>理解代码：<blockquote>
<p>el-row表示一行，一行分成24份；el-col表示列<br>(1) :span&#x3D;”12”  代表在一行中，占12份 (50%)<br>(2) :span&#x3D;”6”   表示在一行中，占6份  (25%)<br>(3) :offset&#x3D;”3” 代表在一行中，左侧margin占3份</p>
</blockquote>
<hr>
el-form 整个表单组件
el-form-item 表单的一行 （一个表单域）
el-input 表单元素（输入框）</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-row <span class="keyword">class</span>=<span class="string">&quot;login-page&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span> <span class="attr">class</span>=<span class="string">&quot;bg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span> <span class="attr">:offset</span>=<span class="string">&quot;3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">v-model</span>=<span class="string">&quot;formModel.username&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">:prefix-icon</span>=<span class="string">&quot;User&quot;</span>  //<span class="attr">element-plus</span> <span class="attr">图标配置</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     </span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmVue3Login1.jpg" alt="登录页结构"></p>
<h3 id="逻辑处理"><a href="#逻辑处理" class="headerlink" title="逻辑处理"></a>逻辑处理</h3><ol>
<li>表达切换<br>进入login页面默认是登录表单，点击表单左下角注册按钮切换到注册，再点击返回按钮切换到登录<br>使用const isRegister &#x3D; ref(false)进行切换，true和false对应注册和登录</li>
<li>表单校验<br>还是使用组件库，Form表单-表单校验<br><a href="https://element-plus.org/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C">https://element-plus.org/zh-CN/component/form.html#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C</a><blockquote>
</blockquote>
(1) el-form 属性 :model&#x3D;”ruleForm”      绑定的整个form的数据对象 { xxx, xxx, xxx }<br>用来收集全部数据，这样后面提交或者重置都方便<br>(2) el-form 属性 :rules&#x3D;”rules”         绑定的整个rules规则对象  { xxx, xxx, xxx }<br>可以理解为（2）里的每一个对应（1）里面每一个属性的校验规则<br>(3) 表单元素 属性 v-model&#x3D;”ruleForm.xxx” 给表单元素绑定form的某个子属性<br>(4) el-form-item 属性 prop 配置生效的是哪个校验规则 (和rules中的字段要对应)<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-form</span><br><span class="line">  ref=<span class="string">&quot;ruleFormRef&quot;</span></span><br><span class="line">  style=<span class="string">&quot;max-width: 600px&quot;</span></span><br><span class="line">  :model=<span class="string">&quot;ruleForm&quot;</span> <span class="comment">//收集表单全部数据</span></span><br><span class="line">  :rules=<span class="string">&quot;rules&quot;</span></span><br><span class="line">  label-width=<span class="string">&quot;auto&quot;</span></span><br><span class="line">  <span class="keyword">class</span>=<span class="string">&quot;demo-ruleForm&quot;</span></span><br><span class="line">  :size=<span class="string">&quot;formSize&quot;</span></span><br><span class="line">  status-icon</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;Activity name&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>在表单中给表单元素配置prop&#x3D;”属性名”和v-module<br>如密码<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-form-item prop=<span class="string">&quot;password&quot;</span>&gt;</span><br><span class="line">          <span class="language-xml"><span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">v-model</span>=<span class="string">&quot;formModel.password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">:prefix-icon</span>=<span class="string">&quot;Lock&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure></li>
<li>提供数据对象和校验规则<br>提供一个整个的用于提交的form数据对象formModel，看后端接口文档来定<br>提供整个表单的校验规则rules（官方文档告诉了怎么配）<br>注意rules校验属性名和上面对象的属性名一样</li>
</ol>
<ul>
<li>非空校验 required: true      message消息提示，  trigger触发校验的时机 blur change</li>
<li>长度校验 min:xx, max: xx</li>
<li>正则校验 pattern: 正则规则    \S 非空字符</li>
<li>自定义校验 &#x3D;&gt; 自己写逻辑校验 (校验函数)</li>
<li>validator: (rule, value, callback)<br>(1) rule  当前校验规则相关的信息<br>(2) value 所校验的表单元素目前的表单值<br>(3) callback 无论成功还是失败，都需要 callback 回调</li>
<li>callback() 校验成功</li>
<li>callback(new Error(错误信息)) 校验失败</li>
</ul>
<blockquote>
<p>‘blur’触发器： 当设置为’blur’时，验证将在表单元素失去焦点时触发。这适用于需要在用户完成输入后立即进行验证的场景，如文本输入框。例如，当用户填写完一个输入框并切换到另一个输入框时，可以立即检查该输入框的内容是否符合要求。</p>
</blockquote>
<blockquote>
<p>‘change’触发器： 相比之下，当设置为’change’时，验证将在表单元素的值发生变化时触发。这适用于如下拉选择框、日期选择器、复选框和单选框等元素，这些元素在用户选择选项后需要立即进行验证。</p>
</blockquote>
<blockquote>
<p>不设置触发器： 如果不设置trigger属性，Element UI将使用默认的触发器，通常是在表单提交时进行验证。这意味着，除非用户尝试提交表单，否则不会执行任何验证。</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formModel = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">repassword</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">···</span><br><span class="line"><span class="keyword">const</span> rules = &#123;</span><br><span class="line">  <span class="attr">username</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入用户名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">5</span>, <span class="attr">max</span>: <span class="number">10</span>, <span class="attr">message</span>: <span class="string">&#x27;用户名必须是 5-10位 的字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">password</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pattern</span>: <span class="regexp">/^\S&#123;6,15&#125;$/</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;密码必须是 6-15位 的非空字符&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">repassword</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pattern</span>: <span class="regexp">/^\S&#123;6,15&#125;$/</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;密码必须是 6-15位 的非空字符&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">validator</span>: <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 判断 value 和 当前 form 中收集的 password 是否一致</span></span><br><span class="line">        <span class="keyword">if</span> (value !== formModel.<span class="property">value</span>.<span class="property">password</span>) &#123;</span><br><span class="line">          <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;两次输入密码不一致&#x27;</span>))</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="title function_">callback</span>() <span class="comment">// 就算校验成功，也需要callback</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/postImgs/oldImg/xmvue3Login2.png" alt="登录页结构"></p>
<h3 id="注册预校验"><a href="#注册预校验" class="headerlink" title="注册预校验"></a>注册预校验</h3><p>在注册提交之前要有一次预校验，比如空着点注册肯定不行，通过校验才能完成提交请求<br>文档Form表单组件-Form API最下面Form Exposes，form组件实例暴露出来的一些方法</p>
<blockquote>
<p>validate方法	对整个表单的内容进行验证。 接收一个回调函数，或返回 Promise<br>要想拿到form组件实例，要添加const form &#x3D; ref()</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">register</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 注册成功之前，先进行校验，校验成功 → 请求，校验失败 → 自动提示</span></span><br><span class="line">  <span class="keyword">await</span> form.<span class="property">value</span>.<span class="title function_">validate</span>()</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="注册登录请求"><a href="#注册登录请求" class="headerlink" title="注册登录请求"></a>注册登录请求</h3><ol>
<li>创建api文件夹-user.js文件，根据后端接口写</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">userRegisterService</span> = (<span class="params">&#123; username, password, repassword &#125;</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">post</span>(<span class="string">&#x27;/api/reg&#x27;</span>, &#123; username, password, repassword &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">userLoginService</span> = (<span class="params">&#123; username, password &#125;</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">post</span>(<span class="string">&#x27;/api/login&#x27;</span>, &#123; username, password &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取用户基本信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">userGetInfoService</span> = (<span class="params"></span>) =&gt; request.<span class="title function_">get</span>(<span class="string">&#x27;/my/userinfo&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>同时在app.vue导入api，修改注册请求（登录同理）<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">register</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 注册成功之前，先进行校验，校验成功 → 请求，校验失败 → 自动提示</span></span><br><span class="line">  <span class="keyword">await</span> form.<span class="property">value</span>.<span class="title function_">validate</span>()</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">userRegisterService</span>(formModel.<span class="property">value</span>)</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span><br><span class="line">  isRegister.<span class="property">value</span> = <span class="literal">false</span> <span class="comment">//注册成功后切换到登录表单</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>优化提示弹窗<br>上面的alert明显不好看，我们要更好看的<br>官方文档-左侧导航栏往下找到Feedback反馈组件-Message消息提示-不同状态-查看代码-poen四种表示方式<br><img src="/postImgs/oldImg/xmvue3Login3.png" alt="这样的提示真好看"><br>这里用第二中提示注册成功<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span><br></pre></td></tr></table></figure>
修改后运行程序注册后能成功弹出，但是vscode上还是显示红色报错，这是因为前面我们按需自动导入了，但是eslink不知道，所以给eslink中配置全局变量规则可以不报错<br>给eslint.config.js文件最后添加<br>(视频成功我开始没成功，我的这个文件是eslint.config.js，视频是.eslintrc.cjs文件，前面做配置的时候就出现了问题我让AI帮我变成我的文件适用的代码，这里没有变)<br>（后来关掉vscode重新打开项目发现不报错了，重启是个好方法！）<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">globals</span>: &#123;</span><br><span class="line">    <span class="title class_">ElMessage</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="title class_">ElMessageBox</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="title class_">ElLoading</span>: <span class="string">&#x27;readonly&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="/postImgs/oldImg/xmvue3Login4.png" alt="注册成功"></li>
</ol>
<h2 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h2><h3 id="需求-1"><a href="#需求-1" class="headerlink" title="需求"></a>需求</h3><ol>
<li>基本架子拆解（菜单组件的使用）：采用分成左右两部分的架子，左侧是菜单(el-menu包含el-menu-item；二级菜单嵌套el-sub-menu，el-menu-item)，官方文档学习</li>
<li>登录访问拦截：首页的内容必须是登录过的用户才能访问，没有登录的用户不能访问</li>
<li>用户基本信息获取和渲染：首页-个人中心-基本信息，展示用户的基本资料，右上角用户头像小菜单也能到达</li>
<li>右上角小菜单和退出功能</li>
<li>优化-退出询问</li>
</ol>
<h3 id="首页基本架子"><a href="#首页基本架子" class="headerlink" title="首页基本架子"></a>首页基本架子</h3><p>views&#x2F;layout&#x2F;LayoutContauer.vue<br>主要用到el-menu组件，Container布局容器（官方文档）</p>
<p>el-container</p>
<ul>
<li><p>el-aside 左侧</p>
<ul>
<li>el-menu 左侧边栏菜单</li>
</ul>
</li>
<li><p>el-container  右侧</p>
<ul>
<li>el-header  右侧头部<ul>
<li>el-dropdown</li>
</ul>
</li>
<li>el-main  右侧主体<ul>
<li>router-view</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="架子代码"><a href="#架子代码" class="headerlink" title="架子代码"></a>架子代码</h4><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">Management</span>,</span><br><span class="line">  <span class="title class_">Promotion</span>,</span><br><span class="line">  <span class="title class_">UserFilled</span>,</span><br><span class="line">  <span class="title class_">User</span>,</span><br><span class="line">  <span class="title class_">Crop</span>,</span><br><span class="line">  <span class="title class_">EditPen</span>,</span><br><span class="line">  <span class="title class_">SwitchButton</span>,</span><br><span class="line">  <span class="title class_">CaretBottom</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> avatar <span class="keyword">from</span> <span class="string">&#x27;@/assets/default.png&#x27;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- </span><br><span class="line">    el-menu 整个菜单组件</span><br><span class="line">      :default-active=&quot;$route.path&quot;  配置默认高亮的菜单项</span><br><span class="line">      这个值一旦和下面的Index相等就会高亮</span><br><span class="line">      router  router选项开启，el-menu-item 的 index 就是点击跳转的路径</span><br><span class="line"></span><br><span class="line">    el-menu-item 菜单项</span><br><span class="line">      index=&quot;/article/channel&quot; 配置的是访问的跳转路径，配合default-active的值，实现高亮</span><br><span class="line">  active-text-color激活时的颜色</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">      --&gt;</span><br><span class="line">  &lt;el-container class=&quot;layout-container&quot;&gt;</span><br><span class="line">    &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;el-aside__logo&quot;&gt;&lt;/div&gt;</span><br><span class="line">      &lt;el-menu</span><br><span class="line">        active-text-color=&quot;#ffd04b&quot;</span><br><span class="line">        background-color=&quot;#232323&quot;</span><br><span class="line">        :default-active=&quot;$route.path&quot;</span><br><span class="line">        text-color=&quot;#fff&quot;</span><br><span class="line">        router</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;el-menu-item index=&quot;/article/channel&quot;&gt;</span><br><span class="line">          &lt;el-icon&gt;&lt;Management /&gt;&lt;/el-icon&gt;</span><br><span class="line">          &lt;span&gt;文章分类&lt;/span&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;el-menu-item index=&quot;/article/manage&quot;&gt;</span><br><span class="line">          &lt;el-icon&gt;&lt;Promotion /&gt;&lt;/el-icon&gt;</span><br><span class="line">          &lt;span&gt;文章管理&lt;/span&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">         &lt;!-- 多级菜单el-sub-menu --&gt;</span><br><span class="line">        &lt;el-sub-menu index=&quot;/user&quot;&gt;</span><br><span class="line">          &lt;!-- 多级菜单的大标题 - 具名插槽 title --&gt;</span><br><span class="line">          &lt;template #title&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;UserFilled /&gt;&lt;/el-icon&gt;</span><br><span class="line">            &lt;span&gt;个人中心&lt;/span&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">          &lt;!-- 多级菜单展开的内容 - 默认插槽 --&gt;</span><br><span class="line">          &lt;el-menu-item index=&quot;/user/profile&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;User /&gt;&lt;/el-icon&gt;</span><br><span class="line">            &lt;span&gt;基本资料&lt;/span&gt;</span><br><span class="line">          &lt;/el-menu-item&gt;</span><br><span class="line">          &lt;el-menu-item index=&quot;/user/avatar&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;Crop /&gt;&lt;/el-icon&gt;</span><br><span class="line">            &lt;span&gt;更换头像&lt;/span&gt;</span><br><span class="line">          &lt;/el-menu-item&gt;</span><br><span class="line">          &lt;el-menu-item index=&quot;/user/password&quot;&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;EditPen /&gt;&lt;/el-icon&gt;</span><br><span class="line">            &lt;span&gt;重置密码&lt;/span&gt;</span><br><span class="line">          &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-sub-menu&gt;</span><br><span class="line">      &lt;/el-menu&gt;</span><br><span class="line">    &lt;/el-aside&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;el-header&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          黑马程序员：&lt;strong&gt;&#123;&#123;</span><br><span class="line">            userStore.user.nickname || userStore.user.username</span><br><span class="line">          &#125;&#125;&lt;/strong&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;el-dropdown placement=&quot;bottom-end&quot; @command=&quot;handleCommand&quot;&gt;</span><br><span class="line">          &lt;!-- 展示给用户，默认看到的 --&gt;</span><br><span class="line">          &lt;span class=&quot;el-dropdown__box&quot;&gt;</span><br><span class="line">            &lt;el-avatar :src=&quot;userStore.user.user_pic || avatar&quot; /&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;CaretBottom /&gt;&lt;/el-icon&gt;</span><br><span class="line">          &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">          &lt;!-- 折叠的下拉部分 --&gt;</span><br><span class="line">          &lt;template #dropdown&gt;</span><br><span class="line">            &lt;el-dropdown-menu&gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;profile&quot; :icon=&quot;User&quot;</span><br><span class="line">                &gt;基本资料&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;avatar&quot; :icon=&quot;Crop&quot;</span><br><span class="line">                &gt;更换头像&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;password&quot; :icon=&quot;EditPen&quot;</span><br><span class="line">                &gt;重置密码&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;logout&quot; :icon=&quot;SwitchButton&quot;</span><br><span class="line">                &gt;退出登录&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/el-dropdown-menu&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-dropdown&gt;</span><br><span class="line">      &lt;/el-header&gt;</span><br><span class="line">      &lt;el-main&gt;</span><br><span class="line">        &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">      &lt;/el-main&gt;</span><br><span class="line">      &lt;el-footer&gt;大事件 ©2023 Created by 黑马程序员&lt;/el-footer&gt;</span><br><span class="line">    &lt;/el-container&gt;</span><br><span class="line">  &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.layout-container &#123;</span><br><span class="line">  height: 100vh;</span><br><span class="line">  .el-aside &#123;</span><br><span class="line">    background-color: #232323;</span><br><span class="line">    &amp;__logo &#123;</span><br><span class="line">      height: 120px;</span><br><span class="line">      background: url(&#x27;@/assets/logo.png&#x27;) no-repeat center / 120px auto;</span><br><span class="line">    &#125;</span><br><span class="line">    .el-menu &#123;</span><br><span class="line">      border-right: none;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .el-header &#123;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    .el-dropdown__box &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      align-items: center;</span><br><span class="line">      .el-icon &#123;</span><br><span class="line">        color: #999;</span><br><span class="line">        margin-left: 10px;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      &amp;:active,</span><br><span class="line">      &amp;:focus &#123;</span><br><span class="line">        outline: none;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .el-footer &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    color: #666;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>在</p>
<h3 id="登录访问拦截"><a href="#登录访问拦截" class="headerlink" title="登录访问拦截"></a>登录访问拦截</h3><p>和vue2项目的登录拦截一样，在router文件夹&#x2F;index.js文件添加<br>一定记得要从仓库导入用户仓库！！不然永远拿不到用户的token<br>vue router官方文档-导航守卫<a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html">https://router.vuejs.org/zh/guide/advanced/navigation-guards.html</a><br>登录访问拦截 &#x3D;&gt; 默认是直接放行的<br>根据返回值决定，是放行还是拦截！！！！</p>
<blockquote>
<p>返回值：</p>
</blockquote>
<ol>
<li>undefined &#x2F; true  直接放行</li>
<li>false 拦回from的地址页面</li>
<li>具体路径 或 路径对象  拦截到对应的地址<br>‘&#x2F;login’   { name: ‘login’ }<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//一定记得要从仓库导入用户仓库！！不然永远拿不到用户的token</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores&#x27;</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to</span>) =&gt;</span> &#123;</span><br><span class="line"> 如果没有token, 且访问的是非登录页，拦截到登录，其他情况正常放行</span><br><span class="line">  <span class="keyword">const</span> useStore = <span class="title function_">useUserStore</span>()</span><br><span class="line">  <span class="keyword">if</span> (!useStore.<span class="property">token</span> &amp;&amp; to.<span class="property">path</span> !== <span class="string">&#x27;/login&#x27;</span>) <span class="keyword">return</span> <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="用户基本信息的获取和渲染"><a href="#用户基本信息的获取和渲染" class="headerlink" title="用户基本信息的获取和渲染"></a>用户基本信息的获取和渲染</h3><ol>
<li>封装接口：<br>去后端拿获取用户的的基本信息的接口，api&#x2F;user.js后面新建方法：获取用户基本信息（注意方法命名规范）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">userGetInfoService</span> = (<span class="params"></span>) =&gt; request.<span class="title function_">get</span>(<span class="string">&#x27;/my/userinfo&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>个人信息放到仓库中：<br>和token的维护类似，个人信息也会在多个地方使用，放到用户仓库中统一维护。在store&#x2F;modules&#x2F;user.js文件中定义数据user和获取用户信息的getUser方法，最后在return里暴露出去<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> user = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getUser</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"> <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">userGetInfoService</span>() <span class="comment">// 请求获取数据</span></span><br><span class="line">  user.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  <span class="comment">//这里到底几个.data怎么拿到数据存从后端接口文档返回的数据信息看</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>页面调用<br>回到首页页面，从仓库里导入用户仓库<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores&#x27;</span></span><br></pre></td></tr></table></figure>
然后使用生命周期钩子，让页面加载完后发送请求，获取到用户信息<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> userStore = <span class="title function_">useUserStore</span>()</span><br><span class="line"><span class="comment">//onMounted生命周期钩子，页面加载完发送请求</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  userStore.<span class="title function_">getUser</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<img src="/postImgs/oldImg/xmvue3Layout1.png" alt="成功后pinia里面有显示"><br>这里面user对象是empty，因为还没有设置个人信息</li>
<li>动态渲染信息<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  黑马程序员：&lt;strong&gt;&#123;&#123; userStore.<span class="property">user</span>.<span class="property">nickname</span> || userStore.<span class="property">user</span>.<span class="property">username</span> &#125;&#125;&lt;/strong&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-avatar</span> <span class="attr">:src</span>=<span class="string">&quot;userStore.user.user_pic || avatar&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="右上角小菜单和退出功能"><a href="#右上角小菜单和退出功能" class="headerlink" title="右上角小菜单和退出功能"></a>右上角小菜单和退出功能</h3><p>右上角头像下拉菜单还是官方文档里面有<br>注意退出登录不光要跳转到登录页，还要清空本地的数据，token和用户信息<br>清除用户信息：先在用户仓库新增一个方法setUser，让用于信息&#x3D;<br>首页相关代码：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleCommand</span> = <span class="keyword">async</span> (<span class="params">key</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (key === <span class="string">&#x27;logout&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 退出操作</span></span><br><span class="line">    <span class="comment">// 清除本地的数据 (token + user信息)</span></span><br><span class="line">    userStore.<span class="title function_">removeToken</span>()</span><br><span class="line">    userStore.<span class="title function_">setUser</span>(&#123;&#125;)</span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 跳转操作</span></span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">`/user/<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">···</span><br><span class="line"></span><br><span class="line">&lt;el-header&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          黑马程序员：<span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123;</span></span><br><span class="line"><span class="language-xml">            userStore.user.nickname || userStore.user.username</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        &lt;el-dropdown placement=&quot;bottom-end&quot; @command=&quot;handleCommand&quot;&gt;</span><br><span class="line">          &lt;!-- 展示给用户，默认看到的 --&gt;</span><br><span class="line">          &lt;span class=&quot;el-dropdown__box&quot;&gt;</span><br><span class="line">            &lt;el-avatar :src=&quot;userStore.user.user_pic || avatar&quot; /&gt;</span><br><span class="line">            &lt;el-icon&gt;&lt;CaretBottom /&gt;&lt;/el-icon&gt;</span><br><span class="line">          &lt;/span&gt;</span><br><span class="line"></span><br><span class="line">          &lt;!-- 折叠的下拉部分 --&gt;</span><br><span class="line">          &lt;template #dropdown&gt;</span><br><span class="line">            &lt;el-dropdown-menu&gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;profile&quot; :icon=&quot;User&quot;</span><br><span class="line">                &gt;基本资料&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;avatar&quot; :icon=&quot;Crop&quot;</span><br><span class="line">                &gt;更换头像&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;password&quot; :icon=&quot;EditPen&quot;</span><br><span class="line">                &gt;重置密码&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">              &lt;el-dropdown-item command=&quot;logout&quot; :icon=&quot;SwitchButton&quot;</span><br><span class="line">                &gt;退出登录&lt;/el-dropdown-item</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/el-dropdown-menu&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-dropdown&gt;</span><br><span class="line">      &lt;/el-header&gt;</span><br></pre></td></tr></table></figure>
<h3 id="优化-退出询问"><a href="#优化-退出询问" class="headerlink" title="优化-退出询问"></a>优化-退出询问</h3><p>用户可能不小心点到退出，所以在退出前进行弹窗询问<br>官方文档-左侧导航栏Message Box 消息弹出框-确认消息</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleCommand</span> = <span class="keyword">async</span> (<span class="params">key</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (key === <span class="string">&#x27;logout&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 退出操作(新增-弹窗询问)</span></span><br><span class="line">      <span class="keyword">await</span> <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;你确认要进行退出么&#x27;</span>, <span class="string">&#x27;温馨提示&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">      <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确认&#x27;</span>,</span><br><span class="line">      <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 清除本地的数据 (token + user信息)</span></span><br><span class="line">    userStore.<span class="title function_">removeToken</span>()</span><br><span class="line">    userStore.<span class="title function_">setUser</span>(&#123;&#125;)</span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 跳转操作</span></span><br><span class="line">    router.<span class="title function_">push</span>(<span class="string">`/user/<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="文章分类页面"><a href="#文章分类页面" class="headerlink" title="文章分类页面"></a>文章分类页面</h2><h3 id="需求-2"><a href="#需求-2" class="headerlink" title="需求"></a>需求</h3><ol>
<li>基本架子-PageContainer </li>
<li>封装文章分类渲染 &amp;loading 处理</li>
<li>文章分类添加编辑 [element-plus 弹层]</li>
<li>文章分类删除</li>
</ol>
<h4 id="文章分类架子"><a href="#文章分类架子" class="headerlink" title="文章分类架子"></a>文章分类架子</h4><p>article&#x2F;ArticleChannel.vue<br>官方文档-左侧导航栏Data数据展示-Card卡片</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">&quot;page-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>文章分类<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;extra&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>添加分类<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     ...</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.page-container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">min-height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.header</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">justify-content</span>: space-between;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="封装组件"><a href="#封装组件" class="headerlink" title="封装组件"></a>封装组件</h4><p>由于内容部分的样式不止是在文章分类页面会使用，其他页面展示内容部分也需要用，所以把他们封装成组件更好地复用<br>封装到：components文件夹&#x2F;PageContainer.vue文件<br>写死的地方使用插槽：文章标题（props 父传子），文章内容（default默认插槽），右侧按钮（extra具名插槽）</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: &#123;</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-card</span> <span class="attr">class</span>=<span class="string">&quot;page-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;extra&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;extra&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.page-container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">min-height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.header</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">justify-content</span>: space-between;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="使用组件改进页面"><a href="#使用组件改进页面" class="headerlink" title="使用组件改进页面"></a>使用组件改进页面</h4><p>页面中直接使用测试 (unplugin-vue-components 会自动注册)</p>
<ul>
<li>文章分类测试：</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">page-container</span> <span class="attr">title</span>=<span class="string">&quot;文章分类&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">extra</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span> 添加分类 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    主体部分</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">page-container</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>文章管理测试：</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">page-container</span> <span class="attr">title</span>=<span class="string">&quot;文章管理&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">extra</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>发布文章<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    主体部分</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">page-container</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="文章分类渲染和加载处理"><a href="#文章分类渲染和加载处理" class="headerlink" title="文章分类渲染和加载处理"></a>文章分类渲染和加载处理</h3><h4 id="api接口"><a href="#api接口" class="headerlink" title="api接口"></a>api接口</h4><p>无论是渲染什么都要发请求获取数据，所以要在api文件夹创建artical.js文件，从接口文档找-获取-文章分类<br>注意接口说明：获取分类每个用户之间是独立的<br>我这里把文章相关的所有接口都放进来了</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="comment">// 获取文章分类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artGetChannelsService</span> = (<span class="params"></span>) =&gt; request.<span class="title function_">get</span>(<span class="string">&#x27;/my/cate/list&#x27;</span>)</span><br><span class="line"><span class="comment">// 添加文章分类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artAddChannelService</span> = (<span class="params">data</span>) =&gt; request.<span class="title function_">post</span>(<span class="string">&#x27;/my/cate/add&#x27;</span>, data)</span><br><span class="line"><span class="comment">// 编辑文章分类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artEditChannelService</span> = (<span class="params">data</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">put</span>(<span class="string">&#x27;/my/cate/info&#x27;</span>, data)</span><br><span class="line"><span class="comment">// 删除文章分类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artDelChannelService</span> = (<span class="params">id</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">delete</span>(<span class="string">&#x27;/my/cate/del&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123; id &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="页面调用接口获取数据"><a href="#页面调用接口获取数据" class="headerlink" title="页面调用接口获取数据"></a>页面调用接口获取数据</h4><p>在页面中发送获取接口请求</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;artGetChannelsService&#125; <span class="keyword">from</span> <span class="string">&#x27;../../api/article&#x27;</span></span><br><span class="line"><span class="comment">//把数据存到channelList中</span></span><br><span class="line"><span class="keyword">const</span> channelList = <span class="title function_">ref</span>([])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChannelList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetChannelsService</span>()</span><br><span class="line">  channelList.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span> <span class="comment">//看接口文档返回的格式</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="页面渲染数据（表格组件）（用的多）"><a href="#页面渲染数据（表格组件）（用的多）" class="headerlink" title="页面渲染数据（表格组件）（用的多）"></a>页面渲染数据（表格组件）（用的多）</h4><p>官方文档-Table表格<br>下面是官方文档的代码，下面的tableData对象包裹表格的数据</p>
<blockquote>
<p>:data–表格名称<br>prop对象中找对应属性名渲染<br>label 列名</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Date&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Name&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;Address&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">const</span> tableData = [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">date</span>: <span class="string">&#x27;2016-05-03&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;Tom&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">address</span>: <span class="string">&#x27;No. 189, Grove St, Los Angeles&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>在文档下面-Table表格-单选有有说：如果需要显示索引，可以增加</li>
<li>el-table-column，设置type属性为Index.即可显示从哪个1开始的序号，跟着它给表格加索引号</li>
<li>图标还是从组件库拿</li>
</ul>
<h4 id="加载处理"><a href="#加载处理" class="headerlink" title="加载处理"></a>加载处理</h4><p>还是官方文档-反馈组件-Loading加载</p>
<ol>
<li>定义变量，v-loading绑定</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">&lt;el-table v-loading=<span class="string">&quot;loading&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>发送请求前开启，请求结束关闭</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getChannelList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetChannelsService</span>()</span><br><span class="line">  channelList.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="文章分类的添加编辑和删除"><a href="#文章分类的添加编辑和删除" class="headerlink" title="文章分类的添加编辑和删除"></a>文章分类的添加编辑和删除</h3><p>点击添加和编辑都会显示element plues弹层，放在一起实现</p>
<h4 id="Dialog对话框组件"><a href="#Dialog对话框组件" class="headerlink" title="Dialog对话框组件"></a>Dialog对话框组件</h4><p>在官方文档-左侧导航栏反馈组件-Dialog对话框中<br>看他给的代码</p>
<blockquote>
<p>点击按钮，把他dialogVisible的布尔值改成true就会展示对话框<br>记得去上面提供一个变量dialogVisible<br> :before-closes 是关闭对话框之前要做的事情（比如说关闭提醒），这里不要就把这局删了</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-button plain @click=<span class="string">&quot;dialogVisible = true&quot;</span>&gt;</span><br><span class="line">    <span class="title class_">Click</span> to open the <span class="title class_">Dialog</span></span><br><span class="line">  &lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-dialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">v-model</span>=<span class="string">&quot;dialogVisible&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">title</span>=<span class="string">&quot;Tips&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">width</span>=<span class="string">&quot;500&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">:before-close</span>=<span class="string">&quot;handleClose&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>This is a message<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span>&gt;</span>Cancel<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Confirm</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>把它封装成组件（放到article文件夹&#x2F;components文件夹&#x2F;ChannelEdit.vue中），<mark>组件对外暴露一个方法open，基于open传递的参数来区分是添加还是编辑</mark></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//open(&#123;&#125;)  =&gt; 表单无需渲染，说明是添加</span></span><br><span class="line"><span class="comment">// open(&#123; id, cate_name, ... &#125;)  =&gt; 表单需要渲染，说明是编辑</span></span><br><span class="line"><span class="comment">// open调用后，可以打开弹窗</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  formModel.<span class="property">value</span> = &#123; ...row &#125; <span class="comment">// 添加 → 重置了表单内容，编辑 → 存储了需要回显的数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 向外暴露方法，意味着在外部可以调用组件的方法，可以传参可以显示</span></span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  open</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="页面导入对话框组件"><a href="#页面导入对话框组件" class="headerlink" title="页面导入对话框组件"></a>页面导入对话框组件</h4><p>先导入，然后页面直接用(记得加个ref给这个组件做绑定)<br>如果是添加那么对话框里没东西，如果是编辑里面是row，就是 channelList 的一项</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ChannelEdit</span> <span class="keyword">from</span> <span class="string">&#x27;./components/ChannelEdit.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> dialog = <span class="title function_">ref</span>()</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onEditChannel</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  dialog.<span class="property">value</span>.<span class="title function_">open</span>(row)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onAddChannel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  dialog.<span class="property">value</span>.<span class="title function_">open</span>(&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line">···</span><br><span class="line"> &lt;channel-edit ref=<span class="string">&quot;dialog&quot;</span> @success=<span class="string">&quot;onSuccess&quot;</span>&gt;&lt;/channel-edit&gt;</span><br></pre></td></tr></table></figure>
<h4 id="完善组件-添加和编辑"><a href="#完善组件-添加和编辑" class="headerlink" title="完善组件-添加和编辑"></a>完善组件-添加和编辑</h4><ol>
<li>提供数据<br>回到封装对话框组件的地方，在里面提供要处理的数据formModel，这里是分类名称和分类别名（看接口文档找属性名，cate_name和cate_alias）,然后在对话框表单里面和formModel做绑定<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formModel = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">cate_name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cate_alias</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">···</span><br><span class="line"> &lt;el-form :model=<span class="string">&quot;formModel&quot;</span>&gt;</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;分类名称&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cate_name&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">v-model</span>=<span class="string">&quot;formModel.cate_name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&quot;请输入分类名称&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;分类别名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cate_alias&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">v-model</span>=<span class="string">&quot;formModel.cate_alias&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&quot;请输入分类别名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>添加规则<br>给el-form添加rules，同时在上面提供规则<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"> &lt;el-form :model=<span class="string">&quot;formModel&quot;</span> :rules=<span class="string">&quot;rules&quot;</span>&gt;</span><br><span class="line">···</span><br><span class="line"><span class="keyword">const</span> rules=&#123;</span><br><span class="line">   <span class="attr">cate_name</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入分类名称&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pattern</span>: <span class="regexp">/^\S&#123;1,10&#125;$/</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;分类名必须是 1-10 位的非空字符&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">cate_alias</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入分类别名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pattern</span>: <span class="regexp">/^[a-zA-Z0-9]&#123;1,15&#125;$/</span>,</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;分类名必须是 1-15 位的字母或数字&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>open方法优化<br>新增 ormModel.value &#x3D; { …row }，但这里没有听懂，大概意思是要编辑的时候把原来有的内容显示到对话框里面<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  formModel.<span class="property">value</span> = &#123; ...row &#125; <span class="comment">// 添加 → 重置了表单内容，编辑 → 存储了需要回显的数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>修改对话框题目<br>柑橘能否获取到id判断是编辑还是添加<br>  <el-dialog
 v-model="dialogVisible"
 :title="formModel.id ? '编辑分类' : '添加分类'"
 width="30%"></li>
</ol>
<h4 id="提交前的校验"><a href="#提交前的校验" class="headerlink" title="提交前的校验"></a>提交前的校验</h4><p>类似用户注册前最后的校验<br>先给form一个ref，然后对它进行判断<br>formModel.value是表单对象</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">  &lt;el-form ref=<span class="string">&quot;formRef&quot;</span>&gt;</span><br><span class="line">···    </span><br><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;success&#x27;</span>])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onSubmit</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> formRef.<span class="property">value</span>.<span class="title function_">validate</span>()</span><br><span class="line">  <span class="keyword">const</span> isEdit = formModel.<span class="property">value</span>.<span class="property">id</span></span><br><span class="line">  <span class="keyword">if</span> (isEdit) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">artEditChannelService</span>(formModel.<span class="property">value</span>)</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;编辑成功&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">artAddChannelService</span>(formModel.<span class="property">value</span>)</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;添加成功&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">  <span class="title function_">emit</span>(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功后让页面再请求一下数据，立刻更新页面</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//在调用组件的页面添加</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onSuccess</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">getChannelList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>成功后效果是这样的<img src="/postImgs/oldImg/xmvue3wz1.png" alt="添加文章分类"><br><img src="/postImgs/oldImg/xmvue3wz2.png" alt="添加分类后展示"><br><img src="/postImgs/oldImg/xmvue3wz3.png" alt="编辑文章分类"></p>
<h3 id="文章分类的删除"><a href="#文章分类的删除" class="headerlink" title="文章分类的删除"></a>文章分类的删除</h3><p>调用ElMessageBox提示框确认是否删除<br>删除这里的后端接口参数是query，传Id过去，这里和前面的有区别</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onDelChannel</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;你确认要删除该分类么&#x27;</span>, <span class="string">&#x27;温馨提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确认&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">artDelChannelService</span>(row.<span class="property">id</span>)</span><br><span class="line">  <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;删除成功&#x27;</span>)</span><br><span class="line">  <span class="title function_">getChannelList</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmvue3wz4.png" alt="删除文章分类提示"><br><img src="/postImgs/oldImg/xmvue3wz5.png" alt="成功删除文章分类"></p>
<h2 id="文章管理页面"><a href="#文章管理页面" class="headerlink" title="文章管理页面"></a>文章管理页面</h2><h3 id="需求-3"><a href="#需求-3" class="headerlink" title="需求"></a>需求</h3><ol>
<li>文章列表渲染，上面有搜索功能，下面有分页跳转功能</li>
<li>添加文章功能（抽屉样式展示，包括文件上传）</li>
<li>编辑文章功能（公用抽屉）</li>
<li>删除文章功能</li>
</ol>
<h3 id="静态布局-1"><a href="#静态布局-1" class="headerlink" title="静态布局"></a>静态布局</h3><p><mark>常用的布局和按钮组件虽然官方文档有，但是不加以总是去翻，建议自己记住</mark></p>
<p>article&#x2F;components&#x2F;ArticleManage.vue</p>
<ol>
<li><p>一个表单区域一个表格区域，表单上方有搜索框，三个input在一行展示，去官方文档找属性<br>只需要在el-form 后面跟一个inline即可在一行现实</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">    &lt;!--表单区域 这里添加inline让他们能在同一行显示，默认值<span class="literal">true</span>--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">inline</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;文章分类：&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;新闻&quot;</span> <span class="attr">value</span>=<span class="string">&quot;111&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;体育&quot;</span> <span class="attr">value</span>=<span class="string">&quot;222&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;发布状态：&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;已发布&quot;</span> <span class="attr">value</span>=<span class="string">&quot;已发布&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;草稿&quot;</span> <span class="attr">value</span>=<span class="string">&quot;草稿&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>搜索<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmvue3gl1.png" alt="一行显示"></p>
</li>
<li><p>表格：还是先去接口看后台会返回什么样的数据，然后根据数据写表格<br>给表格做渲染记得跟:data</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-table :data=<span class="string">&quot;articleList&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
<p>先给一些假数据做渲染，从接口拿出后来给的返回的数据样式</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Delete</span>, <span class="title class_">Edit</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">// 假数据</span></span><br><span class="line"><span class="keyword">const</span> articleList = <span class="title function_">ref</span>([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">5961</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;新的文章啊&#x27;</span>,</span><br><span class="line">    <span class="attr">pub_date</span>: <span class="string">&#x27;2022-07-10 14:53:52.604&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: <span class="string">&#x27;已发布&#x27;</span>,</span><br><span class="line">    <span class="attr">cate_name</span>: <span class="string">&#x27;体育&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="number">5962</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;新的文章啊&#x27;</span>,</span><br><span class="line">    <span class="attr">pub_date</span>: <span class="string">&#x27;2022-07-10 14:54:30.904&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">cate_name</span>: <span class="string">&#x27;体育&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>表格中要链接一样的效果用<el-link>还可以加属性删除下划线修改颜色</li>
<li>学用作用域插槽row，可以获取当前行的数据v-for便利item<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-table :data=<span class="string">&quot;articleList&quot;</span> style=<span class="string">&quot;width: 100%&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;文章标题&quot;</span> <span class="attr">width</span>=<span class="string">&quot;400&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-link</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:underline</span>=<span class="string">&quot;false&quot;</span>&gt;</span>&#123;&#123; row.title &#125;&#125;<span class="tag">&lt;/<span class="name">el-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;分类&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cate_name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;发表时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;pub_date&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;state&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">:icon</span>=<span class="string">&quot;Edit&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">circle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">plain</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        @<span class="attr">click</span>=<span class="string">&quot;onEditArticle(row)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">:icon</span>=<span class="string">&quot;Delete&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">circle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">plain</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        @<span class="attr">click</span>=<span class="string">&quot;onDeleteArticle(row)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">empty</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-empty</span> <span class="attr">description</span>=<span class="string">&quot;没有数据&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onEditArticle</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(row)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onDeleteArticle</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(row)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="文章分类菜单"><a href="#文章分类菜单" class="headerlink" title="文章分类菜单"></a>文章分类菜单</h3><h4 id="文章分类菜单封装"><a href="#文章分类菜单封装" class="headerlink" title="文章分类菜单封装"></a>文章分类菜单封装</h4><p>分析：<br>在文章搜索这行，文章分类的选择内容要发请求获取数据进行渲染，发布状态是固定的<br>在后续添加文章部分，还有文章分类的下拉菜单，多个地方需要获取这个数据<br>所以把<mark>获取文章分类这个菜单进行封装</mark>:article文件夹&#x2F;components文件夹&#x2F;ChannelSelect.vue<br>操作：</p>
<ol>
<li>先把静态结构搬过来<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-select&gt;</span><br><span class="line">    &lt;el-option&gt;&lt;/el-option&gt;</span><br><span class="line">    &lt;el-option&gt;&lt;/el-option&gt;</span><br><span class="line">  &lt;/el-select&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
<li>导入api接口方法<br>方法返回的数组存到res里面，<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; artGetChannelsService &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/article.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> channelList = <span class="title function_">ref</span>([])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getChannelList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetChannelsService</span>()</span><br><span class="line">  channelList.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(channelList.<span class="property">value</span>)</span><br><span class="line"><span class="comment">//刷新页面看看有没有获取到这个数据</span></span><br><span class="line"><span class="comment">//获取到数据就可以基于数据进行动态渲染了</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">getChannelList</span>()</span><br></pre></td></tr></table></figure></li>
<li>基于数据让菜单动态渲染<br>注意用v-for一定要加:key<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-select&gt;</span><br><span class="line">    &lt;el-option</span><br><span class="line">      v-for=&quot;channel in channelList&quot;</span><br><span class="line">      :key=&quot;channel.id&quot;</span><br><span class="line">      :label=&quot;channel.cate_name&quot;</span><br><span class="line">      :value=&quot;channel.id&quot;</span><br><span class="line">    &gt;&lt;/el-option&gt;</span><br><span class="line">  &lt;/el-select&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
<li>数据传递（难点）<br>(1) 父组件中：<br>菜单里的数据一定是父亲传递过来的，由父组件来维护，通常希望是v-model来维护<br>在父组件提供一个变量来绑定：<br>const cateId&#x3D; ref(这里是分类文章添加时候的id号)<br>然后在调用组件的组件上绑定v-model&#x3D;”cateId”<blockquote>
<p>Vue2中，v-model是 :value 和 @input 的简写<br>Vue3中，v-model是modelValue 和 @update:modelValue 的简写</p>
</blockquote>
</li>
</ol>
<p>(2) 菜单组件中：<br>在组件中定义props和emit事件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">modeValue</span>:&#123;</span><br><span class="line">    <span class="attr">type</span>:[<span class="title class_">Number</span>,<span class="title class_">String</span>]<span class="comment">//看后端数据的类型</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:modeValue&#x27;</span>])</span><br></pre></td></tr></table></figure>
<p>父传子传递下来的的给el-select菜单组件，所以给el-select绑定传递过来的值，要拆开v-model，同时值更新了要触发事件从组件往上传递给父亲</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-select</span><br><span class="line">    :modelValue=<span class="string">&quot;modelValue&quot;</span></span><br><span class="line">    @<span class="attr">update</span>:modelValue=<span class="string">&quot;emit(&#x27;update:modelValue&#x27;, $event)&quot;</span></span><br><span class="line">    :style=<span class="string">&quot;&#123; width &#125;&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-option</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-for</span>=<span class="string">&quot;channel in channelList&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:key</span>=<span class="string">&quot;channel.id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:label</span>=<span class="string">&quot;channel.cate_name&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:value</span>=<span class="string">&quot;channel.id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line">  &lt;/el-select&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmvue3gl2.png" alt="新的检查按钮"></p>
<h4 id="获取文章分类完善和文章状态菜单"><a href="#获取文章分类完善和文章状态菜单" class="headerlink" title="获取文章分类完善和文章状态菜单"></a>获取文章分类完善和文章状态菜单</h4><p>父组件完善<br>获取文章列表后来传递的参数和cateId进一步优化：不再使用cateId，变成获取请求参数对象params，在父组件定义参数绑定</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> params = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">pagenum</span>: <span class="number">1</span>, <span class="comment">//当前页面</span></span><br><span class="line">  <span class="attr">pagesize</span>: <span class="number">5</span>,<span class="comment">//当前页面要的数据条数</span></span><br><span class="line">  <span class="attr">cate_id</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">//分钟分类ID</span></span><br><span class="line">  <span class="attr">state</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//文章状态（可以选已发布或草稿）</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>使用子组件时，把原来v-model绑定的cateId修改成对象.参数</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;channel-select v-model=<span class="string">&quot;params.cate_id&quot;</span>&gt;&lt;/channel-select&gt;</span><br></pre></td></tr></table></figure>
<p>同时发布状态的下拉菜单也和后端的请求绑定</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-select v-model=<span class="string">&quot;params.state&quot;</span>&gt;</span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;已发布&quot;</span> <span class="attr">value</span>=<span class="string">&quot;已发布&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line">   <span class="language-xml"><span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;草稿&quot;</span> <span class="attr">value</span>=<span class="string">&quot;草稿&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line"> &lt;/el-select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="文章列表渲染"><a href="#文章列表渲染" class="headerlink" title="文章列表渲染"></a>文章列表渲染</h3><ol>
<li>看接口文档，获取接口<br>api&#x2F;article.js<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 文章：获取文章列表</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artGetListService</span> = (<span class="params">params</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;/my/article/list&#x27;</span>, &#123;</span><br><span class="line">    params</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
然后再ArticleManage.vue文件导入接口<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; artGetListService &#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/article.js&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
看接口文档返回的数据，然后声明total，下面进行渲染<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> total = <span class="title function_">ref</span>(<span class="number">0</span>) <span class="comment">// 总条数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 基于params参数，获取文章列表</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getArticleList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetListService</span>(params.<span class="property">value</span>)</span><br><span class="line">  articleList.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  <span class="comment">//res.data是后台返回的结果，再.data是数据</span></span><br><span class="line">  total.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>刷新页面，发现页面已经能够渲染了，但是获取到的发表时间和我们平时的时间格式不一样，这里需要微调<br>封装一个工具函数，utils文件夹下新建format.js文件<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; dayjs &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">formatTime</span> = (<span class="params">time</span>) =&gt; <span class="title function_">dayjs</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY年MM月DD日&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
然后在.vue文件导入并调用<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; formatTime &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/format.js&#x27;</span></span><br><span class="line"><span class="comment">//在发布时间的地方调用</span></span><br><span class="line">&lt;el-table-column label=<span class="string">&quot;发表时间&quot;</span> prop=<span class="string">&quot;pub_date&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;&#123; row &#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;&#123; formatTime(row.pub_date) &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">      &lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="分页功能"><a href="#分页功能" class="headerlink" title="分页功能"></a>分页功能</h4><ol>
<li>官方文档-左侧导航栏Pagination分页-右侧导航栏附加功能-看源代码找到最完整的，把它放在表格区域el-table下面，各个参数的具体说明官方文档下面也有<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-pagination</span><br><span class="line">      v-<span class="attr">model</span>:current-page=<span class="string">&quot;currentPage4&quot;</span></span><br><span class="line">      v-<span class="attr">model</span>:page-size=<span class="string">&quot;pageSize4&quot;</span></span><br><span class="line">      :page-sizes=<span class="string">&quot;[100, 200, 300, 400]&quot;</span><span class="comment">//供用户选择的每页条数，注意要包含上面写的目前生效的每页条数</span></span><br><span class="line">      :size=<span class="string">&quot;size&quot;</span> <span class="comment">//分页大小</span></span><br><span class="line">      :disabled=<span class="string">&quot;disabled&quot;</span> <span class="comment">//是否要禁用</span></span><br><span class="line">      :background=<span class="string">&quot;background&quot;</span> <span class="comment">//要不要加背景颜色</span></span><br><span class="line">      layout=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span> <span class="comment">//控制工具栏有什么内容的，写什么就按什么顺序展示什么</span></span><br><span class="line">      :total=<span class="string">&quot;400&quot;</span></span><br><span class="line">      @size-change=<span class="string">&quot;handleSizeChange&quot;</span><span class="comment">//page-sizes每页条数变化的时候会触发这个按钮</span></span><br><span class="line">      @current-change=<span class="string">&quot;handleCurrentChange&quot;</span></span><br><span class="line">      <span class="comment">//current-page和page-size任意一个变化都会触发这个函数</span></span><br><span class="line">      <span class="comment">//想要做的对应的处理都可以写在上面这两个change函数里面</span></span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure>
修改数和文档代码，和原有的数据进行绑定<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-pagination</span><br><span class="line">  v-<span class="attr">model</span>:current-page=<span class="string">&quot;params.pagenum&quot;</span></span><br><span class="line">  v-<span class="attr">model</span>:page-size=<span class="string">&quot;params.pagesize&quot;</span></span><br><span class="line">  :page-sizes=<span class="string">&quot;[2, 3, 5, 10]&quot;</span> <span class="comment">//供用户选择的每页条数，注意要包含上面写的目前生效的每页条数</span></span><br><span class="line">  :background=<span class="string">&quot;true&quot;</span></span><br><span class="line">  layout=<span class="string">&quot;jumper, total, sizes, prev, pager, next&quot;</span></span><br><span class="line">  :total=<span class="string">&quot;total&quot;</span></span><br><span class="line">  @size-change=<span class="string">&quot;onSizeChange&quot;</span></span><br><span class="line">  @current-change=<span class="string">&quot;onCurrentChange&quot;</span></span><br><span class="line">  style=<span class="string">&quot;margin-top: 20px; justify-content: flex-end&quot;</span></span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure></li>
<li>写处理分页逻辑的函数<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 处理分页逻辑</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onSizeChange</span> = (<span class="params">size</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// console.log(&#x27;当前每页条数&#x27;, size)</span></span><br><span class="line">  <span class="comment">// 只要是每页条数变化了，那么原本正在访问的当前页意义不大了，数据大概率已经不在原来那一页了</span></span><br><span class="line">  <span class="comment">// 只要是页面条数变化了，那么重新渲染回到第一页</span></span><br><span class="line">  params.<span class="property">value</span>.<span class="property">pagenum</span> = <span class="number">1</span></span><br><span class="line">  params.<span class="property">value</span>.<span class="property">pagesize</span> = size</span><br><span class="line">  <span class="comment">// 基于最新的当前页 和 每页条数，渲染数据</span></span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onCurrentChange</span> = (<span class="params">page</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 更新当前页</span></span><br><span class="line">  params.<span class="property">value</span>.<span class="property">pagenum</span> = page</span><br><span class="line">  <span class="comment">// 基于最新的当前页，渲染数据</span></span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="给表格添加loading效果"><a href="#给表格添加loading效果" class="headerlink" title="给表格添加loading效果"></a>给表格添加loading效果</h4><ol>
<li>先在上面定义loading<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loading = <span class="title function_">ref</span>(<span class="literal">false</span>) <span class="comment">// loading状态</span></span><br></pre></td></tr></table></figure></li>
<li>当要发送请求获取数据时，刚发送时让loading&#x3D;true，发送完获取到请求后改为false，同时给el-table添加v-loading指令<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基于params参数，获取文章列表</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getArticleList</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">//发请求前开loading</span></span><br><span class="line">  loading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetListService</span>(params.<span class="property">value</span>)</span><br><span class="line">  articleList.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  total.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">total</span></span><br><span class="line">  <span class="comment">//发请求后关loading</span></span><br><span class="line">  loading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">···</span><br><span class="line">&lt;el-table :data=<span class="string">&quot;articleList&quot;</span> v-loading=<span class="string">&quot;loading&quot;</span>&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="搜索和重置实现"><a href="#搜索和重置实现" class="headerlink" title="搜索和重置实现"></a>搜索和重置实现</h4><ol>
<li>添加对应的点击事件函数<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-form-item&gt;</span><br><span class="line">  &lt;el-button @click=&quot;onSearch&quot; type=&quot;primary&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">  &lt;el-button @click=&quot;onReset&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 搜索逻辑:按照最新的条件，重新检索，从第一页开始展示</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onSearch</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  params.<span class="property">value</span>.<span class="property">pagenum</span> = <span class="number">1</span> <span class="comment">// 重置页面</span></span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置逻辑:将筛选条件清空，重新检索，从第一页开始展示</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onReset</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  params.<span class="property">value</span>.<span class="property">pagenum</span> = <span class="number">1</span> <span class="comment">// 重置页面</span></span><br><span class="line">  params.<span class="property">value</span>.<span class="property">cate_id</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  params.<span class="property">value</span>.<span class="property">state</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="添加和编辑文章（共用一个抽屉）"><a href="#添加和编辑文章（共用一个抽屉）" class="headerlink" title="添加和编辑文章（共用一个抽屉）"></a>添加和编辑文章（共用一个抽屉）</h3><h4 id="抽屉组件"><a href="#抽屉组件" class="headerlink" title="抽屉组件"></a>抽屉组件</h4><ol>
<li>抽屉和dialog对话框差不多，但是对话框很小，抽屉组件能够放更多的东西，整体的思路是一样的<br>官方文档-左侧导航栏Feedback反馈组件-Drawer抽屉-查看源代码&#x2F;el-drawer<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-drawer</span><br><span class="line">  v-model=&quot;drawer&quot;  绑定布尔值控制现实隐藏</span><br><span class="line">  title=&quot;I am the title&quot;</span><br><span class="line">  :direction=&quot;direction&quot; 控制方向</span><br><span class="line">  :before-close=&quot;handleClose&quot; 控制关闭前要不要询问</span><br><span class="line">&gt;</span><br><span class="line">  &lt;span&gt;Hi, there!&lt;/span&gt;</span><br><span class="line">&lt;/el-drawer&gt;</span><br></pre></td></tr></table></figure></li>
<li>在页面使用（后面要封装成组件）<br>组件放在分页区域下面<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//先准备数据</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> visibleDrawer = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="comment">//然后再分页区域下面写容器</span></span><br><span class="line">&lt;el-drawer</span><br><span class="line">  v-model=<span class="string">&quot;visibleDrawer&quot;</span></span><br><span class="line">  title=<span class="string">&quot;大标题&quot;</span></span><br><span class="line">  direction=<span class="string">&quot;rtl&quot;</span></span><br><span class="line">  size=<span class="string">&quot;50%&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hi there!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;/el-drawer&gt;</span><br><span class="line"><span class="comment">//点击修改布尔值显示抽屉</span></span><br><span class="line"><span class="comment">//默认隐藏点击添加或编辑显示</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onAddArticle&quot;</span>&gt;</span>发布文章<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> visibleDrawer = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onAddArticle</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="封装抽屉组件（添加功能）"><a href="#封装抽屉组件（添加功能）" class="headerlink" title="封装抽屉组件（添加功能）"></a>封装抽屉组件（添加功能）</h4><h5 id="封装抽屉组件"><a href="#封装抽屉组件" class="headerlink" title="封装抽屉组件"></a>封装抽屉组件</h5><p>article&#x2F;componse&#x2F;新建ArticleEdit.vue</p>
<ol>
<li>添加和编辑，可以共用一个抽屉，所以可以将抽屉封装成一个组件。组件对外暴露一个方法open, 基于open的参数，初始化表单数据，并判断区分是添加还是编辑<blockquote>
<p>open({ })&#x3D;&gt;  添加操作，添加表单初始化无数据<br>open({ id: xx,  …  })&#x3D;&gt;  编辑操作，编辑表单初始化需回显</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> visibleDrawer = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(row)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">defineExpose</span>(&#123;</span><br><span class="line">  open</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="comment">&lt;!-- 抽屉 --&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">el-drawer</span> <span class="attr">v-model</span>=<span class="string">&quot;visibleDrawer&quot;</span> <span class="attr">title</span>=<span class="string">&quot;大标题&quot;</span> <span class="attr">direction</span>=<span class="string">&quot;rtl&quot;</span> <span class="attr">size</span>=<span class="string">&quot;50%&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hi there!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-drawer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li>通过 ref 绑定<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> articleEditRef = <span class="title function_">ref</span>()</span><br><span class="line">&lt;!-- 弹窗 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">article-edit</span> <span class="attr">ref</span>=<span class="string">&quot;articleEditRef&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">article-edit</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>点击调用方法显示弹窗<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 编辑新增逻辑</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onAddArticle</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  articleEditRef.<span class="property">value</span>.<span class="title function_">open</span>(&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onEditArticle</span> = (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  articleEditRef.<span class="property">value</span>.<span class="title function_">open</span>(row)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="2">
<li>完善组件内容</li>
</ol>
<ol>
<li><p>准备数据</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formModel = <span class="title function_">ref</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cate_id</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cover_img</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">if</span> (row.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑回显&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;添加功能&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备 form 表单结构</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">ChannelSelect</span> <span class="keyword">from</span> <span class="string">&#x27;./ChannelSelect.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-drawer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">v-model</span>=<span class="string">&quot;visibleDrawer&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">:title</span>=<span class="string">&quot;formModel.id ? &#x27;编辑文章&#x27; : &#x27;添加文章&#x27;&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">direction</span>=<span class="string">&quot;rtl&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">size</span>=<span class="string">&quot;50%&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- 发表文章表单 --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;formModel&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;文章标题&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;formModel.title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入标题&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;文章分类&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cate_id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">channel-select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">v-model</span>=<span class="string">&quot;formModel.cate_id&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">channel-select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;文章封面&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cover_img&quot;</span>&gt;</span> 文件上传 <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;文章内容&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;editor&quot;</span>&gt;</span>富文本编辑器<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>草稿<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-drawer</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>一打开默认重置添加的 form 表单数据</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> defaultForm = &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cate_id</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cover_img</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">state</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> formModel = <span class="title function_">ref</span>(&#123; ...defaultForm &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">if</span> (row.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑回显&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;添加功能&#x27;</span>)</span><br><span class="line">    formModel.<span class="property">value</span> = &#123; ...defaultForm &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>扩展 下拉菜单 width props</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">modelValue</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: [<span class="title class_">Number</span>, <span class="title class_">String</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">width</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;el-select</span><br><span class="line"> ...</span><br><span class="line"> :style=<span class="string">&quot;&#123; width &#125;&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<h5 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h5><blockquote>
<p>文件上传通常有两种方式<br>1.点击文件上传的加号后，就一定把图片上传到后台，后台返回一个url地址，存储这个文件的url地址，点击发布的时候提交。<br>弊端：可能产生垃圾图片<br>2.用户不管怎么选择上传文件都是本地的预览，只有点击发布或者草稿的时候才会真正地提交上传到后台。<br>弊端：一次上传的东西多可能回导致卡顿（添加loading效果）<br>到底选择哪个看看接口文档。官方文档有其他的信息-左侧导航栏上传部分<br>在这个项目中选择第二种上传方式</p>
</blockquote>
<ol>
<li><p>关闭自动上传，准备结构</p>
<blockquote>
<p>此处需要关闭 element-plus 的自动上传，不需要配置 action 等参数,只需要做前端的本地预览图片即可，无需在提交前上传图标<br>语法：URL.createObjectURL(…) 创建本地预览的地址，来预览</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Plus</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span><br><span class="line"></span><br><span class="line">&lt;el-upload</span><br><span class="line">  <span class="keyword">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span><br><span class="line">  :auto-upload=<span class="string">&quot;false&quot;</span></span><br><span class="line">  :show-file-list=<span class="string">&quot;false&quot;</span></span><br><span class="line">  :on-change=<span class="string">&quot;onUploadFile&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;imgUrl&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imgUrl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-icon</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;avatar-uploader-icon&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Plus</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span></span><br><span class="line">&lt;/el-upload&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>准备数据 和 选择图片的处理逻辑</p>
</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imgUrl = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onUploadFile</span> = (<span class="params">uploadFile</span>) =&gt; &#123;</span><br><span class="line">  imgUrl.<span class="property">value</span> = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(uploadFile.<span class="property">raw</span>)</span><br><span class="line">  formModel.<span class="property">value</span>.<span class="property">cover_img</span> = uploadFile.<span class="property">raw</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>样式美化</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.avatar-uploader</span> &#123;</span><br><span class="line">  :<span class="built_in">deep</span>() &#123;</span><br><span class="line">    <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">178px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">178px</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.el-upload</span> &#123;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--el-border-color);</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">      <span class="attribute">cursor</span>: pointer;</span><br><span class="line">      <span class="attribute">position</span>: relative;</span><br><span class="line">      <span class="attribute">overflow</span>: hidden;</span><br><span class="line">      <span class="attribute">transition</span>: <span class="built_in">var</span>(--el-transition-duration-fast);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.el-upload</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">      <span class="attribute">border-color</span>: <span class="built_in">var</span>(--el-color-primary);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.el-icon</span><span class="selector-class">.avatar-uploader-icon</span> &#123;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#8c939d</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">178px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">178px</span>;</span><br><span class="line">      <span class="attribute">text-align</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="文章内容（富文本编辑器）"><a href="#文章内容（富文本编辑器）" class="headerlink" title="文章内容（富文本编辑器）"></a>文章内容（富文本编辑器）</h5><p>使用VueQuill富文本编辑器，官方文档查看<br><a href="https://vueup.github.io/vue-quill/">https://vueup.github.io/vue-quill/</a></p>
<ol>
<li>安装包，注册成局部组件</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">pnpm add @vueup/vue-quill@latest</span><br></pre></td></tr></table></figure>
<p>官方文档有在但文件中注册和全局注册，由于这里只是这个地方需要这个功能，所以用局部注册</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">QuillEditor</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@vueup/vue-quill&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@vueup/vue-quill/dist/vue-quill.snow.css&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>页面中使用绑定</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;editor&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">quill-editor</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">theme</span>=<span class="string">&quot;snow&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">v-model:content</span>=<span class="string">&quot;formModel.content&quot;</span>//<span class="attr">数据双向绑定</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">contentType</span>=<span class="string">&quot;html&quot;</span>  //<span class="attr">注意要设置数据格式</span>（<span class="attr">类型</span>）</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">quill-editor</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>样式美化</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">.<span class="property">editor</span> &#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="number">100</span>%;</span><br><span class="line">  :<span class="title function_">deep</span>(<span class="params">.ql-editor</span>) &#123;</span><br><span class="line">    min-<span class="attr">height</span>: 200px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h5><ol>
<li>封装添加接口</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artPublishService</span> = (<span class="params">data</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">post</span>(<span class="string">&#x27;/my/article/add&#x27;</span>, data)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>注册点击事件调用</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;el-form-item&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;onPublish(&#x27;已发布&#x27;)&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>发布<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;onPublish(&#x27;草稿&#x27;)&quot;</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>草稿<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line">&lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 发布文章</span></span><br><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;success&#x27;</span>])</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onPublish</span> = <span class="keyword">async</span> (<span class="params">state</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 将已发布还是草稿状态，存入 state</span></span><br><span class="line">  formModel.<span class="property">value</span>.<span class="property">state</span> = state</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 转换 formData 数据</span></span><br><span class="line">  <span class="keyword">const</span> fd = <span class="keyword">new</span> <span class="title class_">FormData</span>()</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> formModel.<span class="property">value</span>) &#123;</span><br><span class="line">    fd.<span class="title function_">append</span>(key, formModel.<span class="property">value</span>[key])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (formModel.<span class="property">value</span>.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑操作&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 添加请求</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">artPublishService</span>(fd)</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;添加成功&#x27;</span>)</span><br><span class="line">    visibleDrawer.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">    <span class="title function_">emit</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;add&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>父组件监听事件，重新渲染</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;article-edit ref=<span class="string">&quot;articleEditRef&quot;</span> @success=<span class="string">&quot;onSuccess&quot;</span>&gt;&lt;/article-edit&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加修改成功</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">onSuccess</span> = (<span class="params">type</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果是添加，需要跳转渲染最后一页，编辑直接渲染当前页</span></span><br><span class="line">    <span class="keyword">const</span> lastPage = <span class="title class_">Math</span>.<span class="title function_">ceil</span>((total.<span class="property">value</span> + <span class="number">1</span>) / params.<span class="property">value</span>.<span class="property">pagesize</span>)</span><br><span class="line">    params.<span class="property">value</span>.<span class="property">pagenum</span> = lastPage</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加完成后的内容重置</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> formRef = <span class="title function_">ref</span>()</span><br><span class="line"><span class="keyword">const</span> editorRef = <span class="title function_">ref</span>()</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">if</span> (row.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑回显&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    formModel.<span class="property">value</span> = &#123; ...defaultForm &#125;</span><br><span class="line">    imgUrl.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    editorRef.<span class="property">value</span>.<span class="title function_">setHTML</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编辑功能"><a href="#编辑功能" class="headerlink" title="编辑功能"></a>编辑功能</h4><h5 id="封装接口"><a href="#封装接口" class="headerlink" title="封装接口"></a>封装接口</h5><p>如果是编辑操作，一打开抽屉，就需要发送请求，获取数据进行回显</p>
<ol>
<li>封装接口，根据 id 获取详情数据<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artGetDetailService</span> = (<span class="params">id</span>) =&gt;</span><br><span class="line">  request.<span class="title function_">get</span>(<span class="string">&#x27;my/article/info&#x27;</span>, &#123; <span class="attr">params</span>: &#123; id &#125; &#125;)</span><br></pre></td></tr></table></figure></li>
<li>页面中调用渲染<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">open</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  visibleDrawer.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">if</span> (row.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;编辑回显&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">artGetDetailService</span>(row.<span class="property">id</span>)</span><br><span class="line">    formModel.<span class="property">value</span> = res.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">    imgUrl.<span class="property">value</span> = baseURL + formModel.<span class="property">value</span>.<span class="property">cover_img</span></span><br><span class="line">    <span class="comment">// 提交给后台，需要的是 file 格式的，将网络图片，转成 file 格式</span></span><br><span class="line">    <span class="comment">// 网络图片转成 file 对象, 需要转换一下</span></span><br><span class="line">    formModel.<span class="property">value</span>.<span class="property">cover_img</span> = <span class="keyword">await</span> <span class="title function_">imageUrlToFile</span>(imgUrl.<span class="property">value</span>, formModel.<span class="property">value</span>.<span class="property">cover_img</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;添加功能&#x27;</span>)</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>chatGPT prompt：封装一个函数，基于 axios， 网络图片地址，转 file 对象， 请注意：写中文注释</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将网络图片地址转换为File对象</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">imageUrlToFile</span>(<span class="params">url, fileName</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 第一步：使用axios获取网络图片数据</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(url, &#123; <span class="attr">responseType</span>: <span class="string">&#x27;arraybuffer&#x27;</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> imageData = response.<span class="property">data</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二步：将图片数据转换为Blob对象</span></span><br><span class="line">    <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([imageData], &#123; <span class="attr">type</span>: response.<span class="property">headers</span>[<span class="string">&#x27;content-type&#x27;</span>] &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第三步：创建一个新的File对象</span></span><br><span class="line">    <span class="keyword">const</span> file = <span class="keyword">new</span> <span class="title class_">File</span>([blob], fileName, &#123; <span class="attr">type</span>: blob.<span class="property">type</span> &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> file;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;将图片转换为File对象时发生错误:&#x27;</span>, error);</span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="编辑文章功能"><a href="#编辑文章功能" class="headerlink" title="编辑文章功能"></a>编辑文章功能</h5><ol>
<li>封装编辑接口<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artEditService</span> = (<span class="params">data</span>) =&gt; request.<span class="title function_">put</span>(<span class="string">&#x27;my/article/info&#x27;</span>, data)</span><br></pre></td></tr></table></figure></li>
<li>提交时调用<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onPublish</span> = <span class="keyword">async</span> (<span class="params">state</span>) =&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">if</span> (formModel.<span class="property">value</span>.<span class="property">id</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">artEditService</span>(fd)</span><br><span class="line">    <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;编辑成功&#x27;</span>)</span><br><span class="line">    visibleDrawer.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">    <span class="title function_">emit</span>(<span class="string">&#x27;success&#x27;</span>, <span class="string">&#x27;edit&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 添加请求</span></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="删除文章"><a href="#删除文章" class="headerlink" title="删除文章"></a>删除文章</h5><ol>
<li>封装删除接口</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">artDelService</span> = (<span class="params">id</span>) =&gt; request.<span class="title function_">delete</span>(<span class="string">&#x27;my/article/info&#x27;</span>, &#123; <span class="attr">params</span>: &#123; id &#125; &#125;)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>页面中添加确认框调用</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onDeleteArticle</span> = <span class="keyword">async</span> (<span class="params">row</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">ElMessageBox</span>.<span class="title function_">confirm</span>(<span class="string">&#x27;你确认删除该文章信息吗？&#x27;</span>, <span class="string">&#x27;温馨提示&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">    <span class="attr">confirmButtonText</span>: <span class="string">&#x27;确认&#x27;</span>,</span><br><span class="line">    <span class="attr">cancelButtonText</span>: <span class="string">&#x27;取消&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">artDelService</span>(row.<span class="property">id</span>)</span><br><span class="line">  <span class="title class_">ElMessage</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span>, <span class="attr">message</span>: <span class="string">&#x27;删除成功&#x27;</span> &#125;)</span><br><span class="line">  <span class="title function_">getArticleList</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="个人中心板块（借助AI大模型开发）"><a href="#个人中心板块（借助AI大模型开发）" class="headerlink" title="个人中心板块（借助AI大模型开发）"></a>个人中心板块（借助AI大模型开发）</h2><h2 id="报错及解决"><a href="#报错及解决" class="headerlink" title="报错及解决"></a>报错及解决</h2><h3 id="配置-配置代码检查工作流-暂存区eslint校验"><a href="#配置-配置代码检查工作流-暂存区eslint校验" class="headerlink" title="配置-配置代码检查工作流-暂存区eslint校验"></a>配置-配置代码检查工作流-暂存区eslint校验</h3><p>我开始完成这部分代码后发现添加内容到暂存区后无法提交到仓库，终端git add . 然后git commit -m ‘vue3项目学习’报错内容如下，在文件夹中使用小乌龟工具提交也是出现一样的报错内容，无法提交：</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title class_">TypeError</span>: <span class="title class_">Key</span> <span class="string">&quot;rules&quot;</span>: <span class="title class_">Key</span> <span class="string">&quot;prettier/prettier&quot;</span>: <span class="title class_">Could</span> not find plugin <span class="string">&quot;prettier&quot;</span>.</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/oldImg/xmvue3Pic5.png" alt="git报错"></p>
<hr>
解决：
没找到我的prettier，开始chat建议我在vscode里面安装prettier插件，但是课程视频里不让使用这个vscode的插件，而是用创建项目在package.json里面提供的prettier，我看了我的这个文件里面依赖也是有"prettier": "^3.3.3"的，继续问，AI说是我的eslint.config.js中没有导入这个依赖，在里面加入两行代码然后成功提交

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pluginPrettier <span class="keyword">from</span> <span class="string">&#x27;eslint-plugin-prettier&#x27;</span> <span class="comment">// 引入 prettier 插件</span></span><br><span class="line">    <span class="comment">// 添加自定义规则部分</span></span><br><span class="line">    <span class="attr">plugins</span>: &#123;</span><br><span class="line">      <span class="attr">prettier</span>: pluginPrettier, <span class="comment">// 添加 prettier 插件</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="我的gitee仓库不显示vue3大事件项目文件"><a href="#我的gitee仓库不显示vue3大事件项目文件" class="headerlink" title="我的gitee仓库不显示vue3大事件项目文件"></a>我的gitee仓库不显示vue3大事件项目文件</h3><p>仓库里没办法看到项目的代码，我开始以为是文件夹的问题，新建文件夹还是一样的不行<br>但是无法对里面的内容进行添加，提交，推送的操作，还无法解决<br>最后删掉.git文件试了好几遍成功</p>
<h4 id="git文件"><a href="#git文件" class="headerlink" title=".git文件"></a>.git文件</h4><p>开始这个项目里有.git文件，chat建议我删除<br>. 理解 .git 目录的作用<br>.git 目录：这是 Git 用来跟踪版本控制信息的目录。它包含了该仓库的所有版本历史、配置、分支信息等。<br>如果你在一个文件夹中删除 .git 目录，意味着你将失去该文件夹的所有 Git 版本控制信息，这个文件夹将不再被视为一个 Git 仓库。</p>
<h4 id="husky文件夹"><a href="#husky文件夹" class="headerlink" title=".husky文件夹"></a>.husky文件夹</h4><p>发现我的这个文件夹里面也有一个 .gitignore文件文件，里面是*<br>这个删不删没有影响</p>
<h3 id="登录访问拦截后运行项目页面空白"><a href="#登录访问拦截后运行项目页面空白" class="headerlink" title="登录访问拦截后运行项目页面空白"></a>登录访问拦截后运行项目页面空白</h3><p>原因是在router&#x2F;index.js中没有从仓库中导入用户仓库，导致无法获取登陆后存到仓库的用户token，拿不到数据<br>丢失代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@/stores&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="文件eslint-config-js配置失败"><a href="#文件eslint-config-js配置失败" class="headerlink" title="文件eslint.config.js配置失败"></a>文件eslint.config.js配置失败</h3><p>优化提示弹窗部分导入了组件库组件</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title class_">ElMessage</span>.<span class="title function_">success</span>(<span class="string">&#x27;注册成功&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p>修改后运行程序注册后能成功弹出，但是vscode上还是显示红色报错，这是因为前面我们按需自动导入了，但是eslink不知道，所以给eslink中配置全局变量规则可以不报错<br>给eslint.config.js文件最后添加<br>(视频成功我开始没成功，我的这个文件是eslint.config.js，视频是.eslintrc.cjs文件，前面做配置的时候就出现了问题我让AI帮我变成我的文件适用的代码，这里没有变)<br>后来关掉vscode重新打开项目发现不报错了，重启是个好方法！</p>
]]></content>
      <categories>
        <category>vue</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>项目</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式篇</title>
    <url>/2025/03/08/18-regex/</url>
    <content><![CDATA[<h2 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h2><p>B站正则表达式视频课<br>B站up胶囊大人的视频（这个讲得好）<br>练习网站<a href="https://regex101.com/">regex101</a><br>正则练习:(<a href="https://codekjiaonang.com/">https://codekjiaonang.com/</a>)<br>编程胶囊（图片里的练习例子来源于这里）<br>不太好理解的笔记<a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md">github</a><br><mark>这边笔记总结了多个视频课教程的知识点，元字符笔记有点冗杂，但是总体详细清晰，难理解部分的有理解文字+举例讲解</mark></p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>正则表达式（Regular Expression, 简称 regex 或 regexp）是一种用来匹配字符串的模式<br>它可以用于搜索、编辑或操作文本和数据<br>正则表达式就像一个小弟，永远要跟着一个大哥，所以正则表达式一定要跟着一个数组<br>正则表达式用来做对字符串的增删改查<br>绝大部分场景都能用正则表达式<br>比如下图，想要提取出字符串里的数字用正则表达式明显更简单快捷<br><img src="/postImgs/regex/reg1.jpg" alt="正则表达式找数字"></p>
<h2 id="创建正则表达式"><a href="#创建正则表达式" class="headerlink" title="创建正则表达式"></a>创建正则表达式</h2><p>用两个斜线包裹字面量<br><code>/字面量/</code><br>注意这种方法不能操作变量，大部分时候也不会放</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><h3 id="字符组用-中括号包裹"><a href="#字符组用-中括号包裹" class="headerlink" title="字符组用[中括号包裹]"></a>字符组用<code>[</code>中括号包裹<code>]</code></h3><p>字符组：匹配中括号里面出现的元素任意一次，如匹配java或Java：<code>[jJ]ava</code><br>**在字符组中可以用短横线<code>-</code>**来匹配0-9所有数字，所有小写字母a-z，所有大写字母A-Z，合起来匹配所有的数字和大小写字母<code>/[0-9a-zA-Z]/</code></p>
<h3 id="用转义符来匹配特殊字符："><a href="#用转义符来匹配特殊字符：" class="headerlink" title="用转义符来匹配特殊字符："></a>用转义符来匹配特殊字符：</h3><p>如想要匹配特殊符号<code>-</code>，那么要先对它使用<code>\</code>进行转义，即<code>\-</code>就代表了<code>-</code>符号本分</p>
<h3 id="快捷方式－－大写取反"><a href="#快捷方式－－大写取反" class="headerlink" title="快捷方式－－大写取反"></a>快捷方式－－大写取反</h3><p>\b 匹配单词边界，如<code>\bname\b</code>这样匹配到完整的name这个单词<br>\d	数字字符（等价于[0-9]）<br>\D	非数字字符	（等价于^[0-9]）<br>\w	单词字符（字母、数字、下划线）	<br>\W	非单词字符 （特殊字符如+－可以匹配）<br>\s	空白字符（空格、制表符TAB，换行符）	<br>\S	非空白字符	（非空白字符）<br><code>.</code> 任意字符，匹配非换行符<code>\n</code>的任意字符，<strong>它只能出现在方括号以外</strong>，<br>如：匹配任意字后面是vo的字符串<code>/.vo/</code><br><code>?</code> 可选字符，放在字符后面，匹配可以出现也可以不出现的<br>如：<code>/colou?r/</code>匹配color和colour</p>
<h3 id="其他字符"><a href="#其他字符" class="headerlink" title="其他字符"></a>其他字符</h3><p><code>?</code> 前面的字符出现1或0次（0或1次）<br><code>*</code>	匹配&gt;&#x3D;0个重复的在*号之前的字符(0或多次)<br><code>+</code>	匹配&gt;&#x3D;1个重复的+号前的字符 （1或多次）<br><code>&#123;n,m&#125;</code>	匹配n–m个个大括号之前的字符或字符集 (n &lt;&#x3D; 次 &lt;&#x3D; m) <strong>第二个参数m可省</strong></p>
<p><code>(xyz)</code>	字符集，匹配与 xyz 完全相等的字符串<br><code>.</code>	 匹配任意单个字符，<strong>除了换行符</strong><br><code>[ ]</code>	字符种类。匹配方括号内的任意<strong>一个</strong>字符<br><code>[^ ]</code>	否定的字符种类。匹配除了方括号里的任意字符<br><code>|</code>	或运算符，匹配符号前或后的字符<br><code>\</code>	转义字符,用于匹配一些保留的字符 [ ] ( ) { } . * + ? ^ $ \ |</p>
<p><code>^</code>	从行首开始匹配 ^a匹配行首的a<br><code>$</code>	从末端开始匹配 a$匹配行尾的a</p>
<p><code>.*</code> 匹配所有的字符<br><code>[a-z]</code>匹配所有小写字母<br><code>[A-Z]</code>匹配所有大写字母<br><code>[0-9]</code>匹配所有数字<br><code>[a-zA-Z0-9]</code>匹配所有英文字符和数字</p>
<p><strong><code>^</code>配合[]使用才代表非</strong><br><code>[^c]ar</code>匹配一个后面跟着ar的<strong>除了c的任意字符</strong><br><code>[^a-z]</code>匹配所有<strong>非</strong>小写字母<br><code>[^A-Z]</code>匹配所有匹配所有<strong>非</strong>大写字母<br><code>[^0-9]</code>匹配所有匹配所有<strong>非</strong>数字字符，匹配到的包括换行符<br><code>[^a-zA-Z0-9]</code>匹配所有匹配所有<strong>非</strong>英文字符和数字</p>
<h2 id="开始和结束"><a href="#开始和结束" class="headerlink" title="开始和结束"></a>开始和结束</h2><p><code>^</code>代表开头，<code>$</code>代表结尾<br>（<code>^</code>放在区间里面代表取反，放在区间外面代表开头）<br>（<code>$</code>放在结尾的单词后面）<br>如要匹配以ovo结尾的部分<code>/ovo$/</code></p>
<h2 id="多次匹配-大括号包裹"><a href="#多次匹配-大括号包裹" class="headerlink" title="多次匹配 {大括号包裹}"></a>多次匹配 <code>&#123;</code>大括号包裹<code>&#125;</code></h2><p><code>&#123;固定次数&#125;</code>比如要匹配九个数字<code>/\d&#123;9&#125;/</code><br><code>&#123;区间次数&#125;</code>，比如要匹配2或3个数字<code>/\d&#123;8,9&#125;/</code><br><code> &#123;区间次数&#125;?</code>，?表示非贪婪模式，找到了那么久不往后再找了，比如匹配到八个数字的那么就不匹配九个数字了<code>/\d&#123;8,9&#125;?/</code><br><code>/&#123;0,&#125;/</code>，匹配0到无数多的区间，<strong>等价于<code>+</code>加号</strong><br><code>&#123;1,&#125;/</code>，匹配1到无数多的区间，<strong>等价于<code>*</code>星号</strong></p>
<h2 id="分组-小括号包裹-（重点）"><a href="#分组-小括号包裹-（重点）" class="headerlink" title="分组(小括号包裹)（重点）"></a>分组(小括号包裹)（重点）</h2><p><strong>分组用来提取数据</strong><br>如图例子用分组提取学号<br><img src="/postImgs/regex/reg2.jpg" alt="分组例子-提取学号"></p>
<h3 id="分组中或者条件-竖线"><a href="#分组中或者条件-竖线" class="headerlink" title="分组中或者条件 | 竖线"></a>分组中或者条件 | 竖线</h3><h3 id="非捕获分组（-表达式）"><a href="#非捕获分组（-表达式）" class="headerlink" title="非捕获分组（?:表达式）"></a>非捕获分组（?:表达式）</h3><p>用于不需要捕获某个分组的内容，但是又想使用分组的特性<br>如例子从数据中提取电话号：<br><img src="/postImgs/regex/reg3.jpg" alt="非捕获分组例子-从数据中提取电话号"></p>
<h3 id="分组的回溯引用-分组数字"><a href="#分组的回溯引用-分组数字" class="headerlink" title="分组的回溯引用 \分组数字"></a>分组的回溯引用 \分组数字</h3><p>常用在标签中，提取指定标签中包裹的内容<br><code>/&lt;(\w+)&gt;(.*?)&lt;/\1&gt;/</code> 注意这里的&#x2F;是结束标签需要的&#x2F;，这里的回溯引用是<code>\1</code>，代表的是第一个分组中的内容<br>比如下图例子，匹配abba这种样式的单词<br><img src="/postImgs/regex/reg4.jpg" alt="分组回溯引用例子"></p>
<h2 id="捕获组编号规则"><a href="#捕获组编号规则" class="headerlink" title="捕获组编号规则"></a>捕获组编号规则</h2><p>$1	第一个捕获组的内容	(\d)→$1 → 原样保留数字<br>$&amp;	整个匹配的内容	a→$&amp; → 保持 a 不变<br><code>$</code>	插入美元符号本身	需转义为 $$</p>
<p>按左括号<code>(</code>的出现顺序编号：<br><code>(A)(B(C)) → $1=A, $2=B, $3=C</code></p>
<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><p>断言一共有四种，正向反向先行后行断言<br><strong>先行和后行断言的区别：</strong>先行断言从左往右看，后行断言从右往左看<br><strong>我觉得，先行就是要匹配小括号表达式前面的内容，后行就是要匹配小括号右边的内容</strong>(这样适合我记忆，文档里描述的我记起来晕)<br><strong>正向和反向断言的区别：</strong>正向断言要能匹配到括号里面的，反向断言要不能匹配到括号里面的<br><strong>正向要表达式里的，反向不要表达式里的</strong></p>
<h3 id="先行断言－正向先行断言"><a href="#先行断言－正向先行断言" class="headerlink" title="先行断言－正向先行断言"></a>先行断言－正向先行断言</h3><p><strong><code>(?=表达式)</code>，表示在某个位置向右看，所在位置的右侧必须能匹配表达式，先行断言可以用来判断字符串是否符合特定的规则</strong><br>比如：想要提取出<code>泽兰</code>这两个字同时要求<code>泽兰</code>两个字后面是<code>雾刃</code>，那么要写成<code>/泽兰(?=雾刃)/</code><br>再比如，下图，提取包含至少一个大小写字母的字符串:<br><img src="/postImgs/regex/reg5.jpg" alt="正向先行断言例子"><br>又比如下图，验证密码强度例子，但是这里的最后应该是{8,}<br><img src="/postImgs/regex/reg6.jpg" alt="正向先行断言例子"></p>
<h3 id="先行断言－反向先行断言"><a href="#先行断言－反向先行断言" class="headerlink" title="先行断言－反向先行断言"></a>先行断言－反向先行断言</h3><p><code>(?!表达式)</code>，表示在某个位置向右看，所在位置的右侧<strong>不能</strong>匹配某字符<br>比如：想要提取出<code>泽兰</code>这两个字同时要求<code>泽兰</code>两个字后面不能是<code>寻歌</code>，那么要写成<code>/泽兰(?!寻歌)/</code><br>再比如<br><img src="/postImgs/regex/reg7.jpg" alt="反向先行断言例子"></p>
<h3 id="后行断言－正向后行断言"><a href="#后行断言－正向后行断言" class="headerlink" title="后行断言－正向后行断言"></a>后行断言－正向后行断言</h3><p><code>(?&lt;=表达式)</code>，表示在某个位置向左看，所在位置的左侧必须能匹配表达式<br>例子看图片吧<br><img src="/postImgs/regex/reg8.jpg" alt="正向后行断言例子"></p>
<h3 id="后行断言－反向后行断言"><a href="#后行断言－反向后行断言" class="headerlink" title="后行断言－反向后行断言"></a>后行断言－反向后行断言</h3><p><code>(?&lt;=表达式)</code>，表示在某个位置向左看，所在位置的左侧必须<strong>不能</strong>匹配表达式<br>看图片例子理解<br><img src="/postImgs/regex/reg1.png" alt="反向后行断言例子"></p>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><h3 id="slice方法"><a href="#slice方法" class="headerlink" title="slice方法"></a>slice方法</h3><p>数组和字符串中都有slice方法<br>slice(m,n)  按照下标截取，包括m，不包括n<br>string.slice(0, 3) 索引从0开始不包括3</p>
<h2 id="全局搜索-g"><a href="#全局搜索-g" class="headerlink" title="全局搜索/g"></a>全局搜索<code>/g</code></h2><p>当使用 &#x2F;g 标志时，正则表达式会查找字符串中所有匹配的子串，而不仅仅是第一个找到的匹配项</p>
<h3 id="影响匹配方法的行为"><a href="#影响匹配方法的行为" class="headerlink" title="影响匹配方法的行为"></a>影响匹配方法的行为</h3><p>在不使用 &#x2F;g 标志的情况下，.match()、.exec() 等方法只会返回第一个匹配的结果（如果有的话）<br>使用 &#x2F;g 标志时，这些方法可以找到并返回所有匹配项（例如，.match() 返回一个包含所有匹配项的数组）<br>对于 .replace() 方法，没有 &#x2F;g 标志时，只会替换第一个匹配项；带有 &#x2F;g 标志，则会替换所有匹配项</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><ol>
<li>不带 &#x2F;g 的例子<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;Hello World!&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/[aeiou]/</span>; <span class="comment">// 查找元音字母</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str.<span class="title function_">match</span>(regex)); <span class="comment">// 输出 [&quot;e&quot;]</span></span><br></pre></td></tr></table></figure></li>
<li>带 &#x2F;g 的例子<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">带 /g 的例子</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="什么时候使用"><a href="#什么时候使用" class="headerlink" title="什么时候使用"></a>什么时候使用</h3><ol>
<li>需要找到所有匹配项：<br>如果你的应用场景要求找到字符串中的所有匹配项，而不是仅第一个，那么你应该使用 &#x2F;g 标志。比如统计文本中某个单词出现的次数，或者替换掉文本中所有匹配的子串。</li>
<li>循环匹配：<br>在某些情况下，你可能希望在一个循环中反复调用 .exec() 或者 .test() 来遍历所有匹配项。在这种情况下，使用 &#x2F;g 标志是必要的。</li>
<li>替换操作：<br>当你想要替换字符串中所有匹配的子串而不是仅仅替换第一个匹配项时，应该使用 &#x2F;g。例如，将文本中的所有空格替换为下划线：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> text = <span class="string">&quot;This is a test.&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(text.<span class="title function_">replace</span>(<span class="regexp">/ /g</span>, <span class="string">&quot;_&quot;</span>)); <span class="comment">// 输出 &quot;This_is_a_test.&quot;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h2><ol>
<li>格式化电话号码<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;13812345678&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;3&#125;)(\d&#123;4&#125;)(\d&#123;4&#125;)/</span>, <span class="string">&quot;$1-$2-$3&quot;</span>);</span><br><span class="line"><span class="comment">// 输出：138-1234-5678</span></span><br></pre></td></tr></table></figure></li>
<li>日期格式转换<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;20230815&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)/</span>, <span class="string">&quot;$1/$2/$3&quot;</span>);</span><br><span class="line"><span class="comment">// 输出：2023/08/15</span></span><br></pre></td></tr></table></figure></li>
<li>隐藏手机号中间四位<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;13812345678&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;3&#125;)\d&#123;4&#125;/</span>, <span class="string">&quot;$1****&quot;</span>);</span><br><span class="line"><span class="comment">// 输出：138****5678</span></span><br></pre></td></tr></table></figure></li>
<li>表单验证<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 电子邮箱</span></span><br><span class="line">/^[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9.</span>_%+-]+@[a-zA-<span class="variable constant_">Z0</span>-<span class="number">9.</span>-]+\.[a-zA-Z]&#123;<span class="number">2</span>,&#125;$/</span><br><span class="line"></span><br><span class="line"><span class="comment">// 手机号码（中国大陆）</span></span><br><span class="line"><span class="regexp">/^(?:(?:\+|00)86)?1[3-9]\d&#123;9&#125;$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 身份证号码（18位）</span></span><br><span class="line"><span class="regexp">/^[1-9]\d&#123;5&#125;(?:18|19|20)\d&#123;2&#125;(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d&#123;3&#125;[\dX]$/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密码强度（至少8位，含大小写字母和数字）</span></span><br><span class="line"><span class="regexp">/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[\w!@#$%^&amp;*]&#123;8,&#125;$/</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
 用正则表达式隐藏手机号中间四位<br><img src="/postImgs/other/jstm05.jpg" alt="用正则表达式隐藏手机号中间四位"></li>
</ol>
]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>练习篇--蓝桥杯</title>
    <url>/2025/01/12/16-%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%BB%83%E4%B9%A0/</url>
    <content><![CDATA[<h1 id="css操作"><a href="#css操作" class="headerlink" title="css操作"></a>css操作</h1><p>文字居中显示：<br>text-align:center;</p>
<p>布局纵向排列变成左右排列(盒子居左居右)：<br>display:flex;</p>
<h2 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h2><h3 id="神奇滤镜–DOM，display"><a href="#神奇滤镜–DOM，display" class="headerlink" title="神奇滤镜–DOM，display"></a>神奇滤镜–DOM，display</h3><p>勾选顶部复选框时，显示对应的滤镜面板；取消勾选时隐藏。多个面板叠加时，后选的面板显示在最上层<br><code>querySelector(&#39;[data-filter-name=&quot;X&quot;]&#39;)</code>：精确匹配特定属性值的元素<br>显示控制原理：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">filterTrigger.<span class="title function_">forEach</span>(<span class="function">(<span class="params">trigger</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// TODO：待补充代码</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(trigger);</span><br><span class="line">  trigger.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dataFilterName = trigger.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-filter-name&quot;</span>);</span><br><span class="line"></span><br><span class="line">    filters.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.<span class="title function_">getAttribute</span>(<span class="string">&quot;data-filter-name&quot;</span>) == dataFilterName) &#123;</span><br><span class="line">        item.<span class="property">hidden</span>=!item.<span class="property">hidden</span></span><br><span class="line">        <span class="title function_">updateZIndex</span>(item)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><h3 id="景深操作"><a href="#景深操作" class="headerlink" title="景深操作"></a>景深操作</h3><p>元素的filter样式属性用于指定一个或多个滤镜效果，从而改变元素的外观。<br>blur()：模糊元素。参数值表示模糊程度，单位为像素。<br>brightness()：调整元素的亮度。参数值表示亮度的百分比。<br>contrast()：调整元素的对比度。参数值表示对比度的百分比。<br>grayscale()：将元素转换为灰度图像。参数值表示灰度的百分比。<br>hue-rotate()：调整元素的色相。参数值表示旋转角度，单位为度数。<br>invert()：反转元素的颜色。参数值表示反转的百分比。<br>opacity()：调整元素的不透明度。参数值表示不透明度的百分比。<br>saturate()：调整元素的饱和度。参数值表示饱和度的百分比。<br>sepia()：将元素转换为褐色图像。参数值表示褐色的百分比。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">document<span class="selector-class">.querySelector</span>(&quot;<span class="selector-class">.img1</span>&quot;)<span class="selector-class">.style</span><span class="selector-class">.filter</span>=&quot;blur(<span class="number">0px</span>)&quot;; </span><br><span class="line">document<span class="selector-class">.querySelector</span>(&quot;<span class="selector-class">.img2</span>&quot;)<span class="selector-class">.style</span><span class="selector-class">.filter</span>=&quot;blur(<span class="number">0px</span>)&quot;;</span><br></pre></td></tr></table></figure>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="动一下的动画变得无限循环"><a href="#动一下的动画变得无限循环" class="headerlink" title="动一下的动画变得无限循环"></a>动一下的动画变得无限循环</h3><p>animation-iteration-count: infinite;<br>解决：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">animation</span>: a3 <span class="number">0.8s</span> <span class="built_in">steps</span>(<span class="number">8</span>);</span><br><span class="line">变为</span><br><span class="line"><span class="attribute">animation</span>: a3 <span class="number">0.8s</span> <span class="built_in">steps</span>(<span class="number">8</span>) infinite;</span><br></pre></td></tr></table></figure>
<h3 id="鼠标经过打开扇子"><a href="#鼠标经过打开扇子" class="headerlink" title="鼠标经过打开扇子"></a>鼠标经过打开扇子</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:first-child</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">60deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*上面这一行也可以是</span></span><br><span class="line"><span class="comment">#box:hover div:nth-child(1)&#123;</span></span><br><span class="line"><span class="comment">  transform: rotate(-60deg);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">50deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">40deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">30deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">20deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">6</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">10deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">7</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">10deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">8</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">20deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">9</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">11</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">50deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span><span class="selector-pseudo">:nth-child</span>(<span class="number">12</span>)&#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">60deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flex"><a href="#flex" class="headerlink" title="flex:"></a>flex:</h2><p>单个子项位置align-self<br>先后顺序order:3<br>主轴方向flex-direction<br>换不换行flex-wrap</p>
<h3 id="元素周期表–var-cal计算"><a href="#元素周期表–var-cal计算" class="headerlink" title="元素周期表–var,cal计算"></a>元素周期表–var,cal计算</h3><blockquote>
<p>已知：元素周期表（class&#x3D;table）中一共有 18 列（class&#x3D;list）元素，请使用 flex布局，使元素周期表中的 18 列元素横向排列。请使用 var、calc 函数设置第2、13～17列元素（class&#x3D;interval1）的 margin-top 为 1 个元素的高度，设置第3～12列元素（class&#x3D;interval3）的 margin-top 为 3 个元素的高度。<br>一个元素的高度已定义变量如下：</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--interval</span>: <span class="number">66px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>css 变量 以及 calc 计算 使用案例：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--main-color</span>: <span class="number">#3498db</span>;   <span class="comment">/* 定义--main-color变量 */</span></span><br><span class="line">    <span class="attr">--padding-size</span>: <span class="number">16px</span>;   <span class="comment">/* 定义--padding-size变量 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.button</span> &#123;</span><br><span class="line">    <span class="comment">/* </span></span><br><span class="line"><span class="comment">        使用定义的--main-color 变量 等同于 color:#3498db </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--main-color); </span><br><span class="line">     <span class="comment">/* </span></span><br><span class="line"><span class="comment">        使用calc计算出变量 --padding-size 的一半。计算结果为8px</span></span><br><span class="line"><span class="comment">    */</span> </span><br><span class="line">    <span class="attribute">padding</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--padding-size) / <span class="number">2</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>作答：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.table</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.table</span> <span class="selector-class">.interval1</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="built_in">var</span>(--interval);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.table</span> <span class="selector-class">.interval3</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="built_in">calc</span>(<span class="built_in">var</span>(--interval) * <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="名片修改–居中练习"><a href="#名片修改–居中练习" class="headerlink" title="名片修改–居中练习"></a>名片修改–居中练习</h3><p>名片整体页面居中；名片左部分的各子项居中<br><img src="/./postImgs/exercise/csslx2.png" alt="练习要求"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span>,<span class="selector-class">.user-card</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="蔬菜–控制每个子项位置"><a href="#蔬菜–控制每个子项位置" class="headerlink" title="蔬菜–控制每个子项位置"></a>蔬菜–控制每个子项位置</h3><p><img src="/./postImgs/exercise/csslx3.png" alt="练习要求"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#box1</span>,</span><br><span class="line"><span class="selector-id">#box2</span>,</span><br><span class="line"><span class="selector-id">#box3</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box1</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>:center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box2</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box2</span> <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: end;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#box3</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box3</span> <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box3</span> <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: end;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="grid"><a href="#grid" class="headerlink" title="grid"></a>grid</h2><h3 id="电影院排座位"><a href="#电影院排座位" class="headerlink" title="电影院排座位"></a>电影院排座位</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>电影院排座位<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/style.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 屏幕区域 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;screen&quot;</span>&gt;</span>阿凡达2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 座位区域 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat-area&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;seat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#242333</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">perspective</span>: <span class="number">1000px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">470px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.screen</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateX</span>(-<span class="number">45deg</span>);</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#242333</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">70px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.seat</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#444451</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">border-top-left-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-top-right-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* TODO：待补充代码 */</span></span><br><span class="line"><span class="selector-class">.seat-area</span> &#123;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">gap</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">grid-template-columns</span>: <span class="built_in">repeat</span>(<span class="number">2</span>, <span class="number">45px</span> <span class="number">65px</span> <span class="number">45px</span> <span class="number">45px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*或者下面的*/</span></span><br><span class="line"><span class="selector-class">.seat-area</span>&#123;</span><br><span class="line">  <span class="attribute">margin-top</span>:<span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">gap</span>:<span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seat-area</span> <span class="selector-class">.seat</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">8</span>n+<span class="number">2</span>)&#123;</span><br><span class="line">  <span class="attribute">margin-right</span>:<span class="number">20px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.seat-area</span> <span class="selector-class">.seat</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">8</span>n+<span class="number">6</span>)&#123;</span><br><span class="line">  <span class="attribute">margin-right</span>:<span class="number">20px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="页面"><a href="#页面" class="headerlink" title="页面"></a>页面</h2><h3 id="页面表单"><a href="#页面表单" class="headerlink" title="页面表单"></a>页面表单</h3><p>页面整体布局，要求如图<br><img src="/./postImgs/exercise/csslx1.png" alt="练习要求"></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content-container</span>&#123;</span><br><span class="line"><span class="attribute">margin-top</span>: <span class="number">70px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">450px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">45</span>);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">20%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">h2</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">40px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">button</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#041c32</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#2d4263</span>;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span>&#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h1 id="js操作"><a href="#js操作" class="headerlink" title="js操作"></a>js操作</h1><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="提取对象数组的Key返回一个数组并去重"><a href="#提取对象数组的Key返回一个数组并去重" class="headerlink" title="提取对象数组的Key返回一个数组并去重"></a>提取对象数组的Key返回一个数组并去重</h3><blockquote>
<p>请在 TODO 2 处补全代码，实现函数 extractUniquePoints 的封装，该函数接收一个二维数组 data 作为参数（即为目标 1 中获取到的 rawData 变量的值），并把二维数组 data 中的 points 属性值提取出来并去重，最终存储在一个一维数组中返回。最终返回的数据结构如下：<br><code>[&quot;DOM 操作&quot;,&quot;ElementPlus&quot;,&quot;Vue.js&quot;]</code><br>两种解答方法：</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractUniquePoints</span>(<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="comment">// TODO 2 请在下面补充代码</span></span><br><span class="line">    <span class="keyword">const</span> arr2=[]</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">const</span> key <span class="keyword">of</span> item.<span class="property">points</span>)&#123;</span><br><span class="line">            arr2.<span class="title function_">push</span>(key)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr2)]</span><br><span class="line">    <span class="comment">// TODO 2 END</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>第二种，用flat()，但是这个我不是很懂，这样的话怎么就只取key了呢，value不会也进去吗</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">extractUniquePoints</span>(<span class="params">data</span>) &#123;</span><br><span class="line"><span class="comment">// TODO 2 请在下面补充代码</span></span><br><span class="line"><span class="keyword">return</span> [...<span class="keyword">new</span> <span class="title class_">Set</span>(data.<span class="title function_">flat</span>(<span class="number">1</span>).<span class="title function_">map</span>(<span class="function"><span class="params">item</span>=&gt;</span>item.<span class="property">points</span>).<span class="title function_">flat</span>(<span class="number">1</span>))]</span><br><span class="line"> <span class="comment">// TODO 2 END</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><ul>
<li>数组升序<code>arr.sort((a, b) =&gt; a - b);</code></li>
<li>数组降序<code>arr.sort((a, b) =&gt; b - a);</code><blockquote>
<p>为什么要用比较函数？<br>若数组是 [10, 2]，默认排序会得到 [10, 2]（因为字符串 ‘10’ 的 Unicode 码点比 ‘2’ 小），但比较函数 a - b 会正确排序为 [2, 10]<br><code>arr.slice(start, end)</code>：截取从 start 到 end - 1 的元素（不包含 end）<br><code>result.push(arr.slice(i, i + sliceNum));</code>push() 方法：将子数组添加到 result 的末尾</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>在编程中，cb 是 回调函数（Callback Function） 的常见缩写。它是一个函数，作为参数传递给另一个函数，并在某个特定条件满足时被调用</p>
</blockquote>
<ul>
<li>将对象转化成数组<code>Object.entries(params)</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> params = &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(params) <span class="comment">// → [[&#x27;name&#x27;, &#x27;Alice&#x27;], [&#x27;age&#x27;, 25]]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="小狼人–重写filter回调函数"><a href="#小狼人–重写filter回调函数" class="headerlink" title="小狼人–重写filter回调函数"></a>小狼人–重写filter回调函数</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myarray</span> = <span class="keyword">function</span> (<span class="params">cb</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：待补充代码</span></span><br><span class="line">  <span class="keyword">const</span> newArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="variable language_">this</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">cb</span>(value)) newArr.<span class="title function_">push</span>(value)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newArr</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 myarray.js 文件中实现</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myarray</span> = <span class="keyword">function</span> (<span class="params">cb</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = []; <span class="comment">// 存储符合条件的元素</span></span><br><span class="line">  <span class="comment">// 遍历数组的每个元素</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> currentElement = <span class="variable language_">this</span>[i];</span><br><span class="line">    <span class="comment">// 调用回调函数，传入元素、索引、原数组</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">cb</span>(currentElement, i, <span class="variable language_">this</span>)) &#123;</span><br><span class="line">      result.<span class="title function_">push</span>(currentElement);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>this 的指向：在 Array.prototype.myarray 中，this 指向调用该方法的数组（如 cardList）。<br>回调函数参数：filter 的回调函数接受三个参数：(element, index, array)，需保持一致性</p>
<p>更好的解法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 返回条件为真的新数组</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">myarray</span> = <span class="keyword">function</span> (<span class="params">cb</span>) &#123;</span><br><span class="line">  <span class="comment">// TODO：待补充代码</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">cb</span>(item)) &#123;</span><br><span class="line">      result.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="解密数组–回溯函数"><a href="#解密数组–回溯函数" class="headerlink" title="解密数组–回溯函数"></a>解密数组–回溯函数</h3><p>从1到max中选择count个不同的数，并按升序排列</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getPossiblePasswords</span>(<span class="params">max, count</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> result = [];</span><br><span class="line">    <span class="keyword">if</span> (count === <span class="number">0</span> || max &lt; count) <span class="keyword">return</span> result; <span class="comment">// 处理无法生成组合的情况</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">backtrack</span>(<span class="params">start, path</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (path.<span class="property">length</span> === count) &#123;</span><br><span class="line">            result.<span class="title function_">push</span>([...path]); <span class="comment">// 将当前组合存入结果</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 从当前数字的下一个开始选择，避免重复</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt;= max; i++) &#123;</span><br><span class="line">            path.<span class="title function_">push</span>(i); <span class="comment">// 添加当前数字到路径</span></span><br><span class="line">            <span class="title function_">backtrack</span>(i + <span class="number">1</span>, path); <span class="comment">// 递归选择下一个更大的数字</span></span><br><span class="line">            path.<span class="title function_">pop</span>(); <span class="comment">// 回溯，移除最后一个数字以尝试其他可能性</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">backtrack</span>(<span class="number">1</span>, []); <span class="comment">// 从数字1开始递归</span></span><br><span class="line">    <span class="comment">//console.log(result);</span></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="分割数组"><a href="#分割数组" class="headerlink" title="分割数组"></a>分割数组</h3><p>一个数组，将它<strong>分割成指定长度的若干份；升序排序</strong></p>
<blockquote>
<p>具体要求：<br>将待分割的（一维）数组升序排序。<br>将排序后的数组从下标为 0 的元素开始，按照从 id&#x3D;sliceNum 的输入框中获取到的数值去分割，并将分割好的数据存入一个新数组中。如：输入框中值为 n，将原数组按每 n 个一组分割，不足 n 个的数据为一组。<br>将得到的新数组返回（即 return 一个二维数组）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">splitArray</span> = (<span class="params">oldArr, num</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// TODO：请补充代码实现功能</span></span><br><span class="line">&#125;;</span><br><span class="line">modul</span><br></pre></td></tr></table></figure>
<h4 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">splitArray</span> = (<span class="params">oldArr, num</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 步骤1：排序数组</span></span><br><span class="line">  oldArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldArr.<span class="property">length</span>; i += num) &#123;</span><br><span class="line">    <span class="comment">// 步骤2：每次截取 num 个元素（不足则取剩余所有）</span></span><br><span class="line">    result.<span class="title function_">push</span>(oldArr.<span class="title function_">slice</span>(i, i + num));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="垃圾分类–对象数组分类"><a href="#垃圾分类–对象数组分类" class="headerlink" title="垃圾分类–对象数组分类"></a>垃圾分类–对象数组分类</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> waste = <span class="title function_">ref</span>([&#123; <span class="attr">type</span>: <span class="string">&quot;厨余垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;剩菜剩饭&quot;</span>, <span class="attr">dis</span>: [<span class="number">10</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;厨余垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;骨头&quot;</span>, <span class="attr">dis</span>: [<span class="number">185</span>, <span class="number">28</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;厨余垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;菜根菜叶&quot;</span>, <span class="attr">dis</span>: [<span class="number">550</span>, <span class="number">169</span>, <span class="number">100</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;可回收垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;废纸&quot;</span>, <span class="attr">dis</span>: [<span class="number">20</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;可回收垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;塑料&quot;</span>, <span class="attr">dis</span>: [<span class="number">8</span>, <span class="number">170</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;可回收垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;玻璃&quot;</span>, <span class="attr">dis</span>: [<span class="number">155</span>, <span class="number">140</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;可回收垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;金属&quot;</span>, <span class="attr">dis</span>: [<span class="number">400</span>, <span class="number">150</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;可回收垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;布料&quot;</span>, <span class="attr">dis</span>: [<span class="number">105</span>, <span class="number">60</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;其他垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;砖瓦陶瓷&quot;</span>, <span class="attr">dis</span>: [<span class="number">520</span>, <span class="number">120</span>, <span class="number">100</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;其他垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;渣土&quot;</span>, <span class="attr">dis</span>: [<span class="number">600</span>, <span class="number">30</span>, <span class="number">50</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;其他垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;卫生间废纸&quot;</span>, <span class="attr">dis</span>: [<span class="number">185</span>, <span class="number">100</span>, <span class="number">125</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;有害垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;废电池&quot;</span>, <span class="attr">dis</span>: [<span class="number">350</span>, <span class="number">100</span>, <span class="number">75</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;有害垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;废日光灯管&quot;</span>, <span class="attr">dis</span>: [<span class="number">500</span>, <span class="number">60</span>, <span class="number">125</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;有害垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;废水银温度计&quot;</span>, <span class="attr">dis</span>: [<span class="number">305</span>, <span class="number">35</span>, <span class="number">150</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">&#123; <span class="attr">type</span>: <span class="string">&quot;有害垃圾&quot;</span>, <span class="attr">txt</span>: <span class="string">&quot;过期药品&quot;</span>, <span class="attr">dis</span>: [<span class="number">255</span>, <span class="number">167</span>, <span class="number">100</span>, <span class="number">33</span>] &#125;,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> food_waste = <span class="title function_">ref</span>([]); <span class="comment">//厨余垃圾</span></span><br><span class="line"><span class="keyword">let</span> recyclable_waste = <span class="title function_">ref</span>([]); <span class="comment">//可回收垃圾</span></span><br><span class="line"><span class="keyword">let</span> other_waste = <span class="title function_">ref</span>([]); <span class="comment">//其他垃圾</span></span><br><span class="line"><span class="keyword">let</span> harmful_waste = <span class="title function_">ref</span>([]); <span class="comment">//有害垃圾</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">food_waste</span> = food_waste; <span class="comment">//厨余垃圾</span></span><br></pre></td></tr></table></figure>
<p>waste.value 是一个数组，其中每个元素是一个对象，包含以下属性：type,txt,dis。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">waste.<span class="property">value</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 在这里处理每个垃圾对象 res</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>forEach 是 JavaScript 中用于遍历数组的方法。<br>res 是当前遍历到的数组元素（即一个垃圾对象）。<br>forEach 不会返回新数组，它只是对数组中的每个元素执行回调函数。</p>
<p><code>let food_waste = ref([]);</code><br>ref([]) 是 Vue 3 中定义响应式数据的方式，表示一个初始值为空数组的响应式变量。<br>food_waste.value 是实际存储数据的地方。由于 ref 返回的是一个对象，必须通过 .value 访问或修改数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">garbagesorting</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">         <span class="comment">// TODO：待补充代码</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(waste.<span class="property">value</span>);</span><br><span class="line">     waste.<span class="property">value</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">           <span class="keyword">if</span> (res.<span class="property">type</span>==<span class="string">&quot;厨余垃圾&quot;</span>) &#123;</span><br><span class="line">             food_waste.<span class="property">value</span>.<span class="title function_">push</span>(res.<span class="property">txt</span>)</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (res.<span class="property">type</span>==<span class="string">&quot;可回收垃圾&quot;</span>) &#123;</span><br><span class="line">             recyclable_waste.<span class="property">value</span>.<span class="title function_">push</span>(res.<span class="property">txt</span>)</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (res.<span class="property">type</span>==<span class="string">&quot;其他垃圾&quot;</span>) &#123;</span><br><span class="line">             other_waste.<span class="property">value</span>.<span class="title function_">push</span>(res.<span class="property">txt</span>)</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">if</span> (res.<span class="property">type</span>==<span class="string">&quot;有害垃圾&quot;</span>) &#123;</span><br><span class="line">             harmful_waste.<span class="property">value</span>.<span class="title function_">push</span>(res.<span class="property">txt</span>)</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="帛书碎片–数组去重"><a href="#帛书碎片–数组去重" class="headerlink" title="帛书碎片–数组去重"></a>帛书碎片–数组去重</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">collectPuzzle</span>(<span class="params">...puzzles</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> newPuz = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> k <span class="keyword">of</span> puzzles) &#123;</span><br><span class="line">    k.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!newPuz.<span class="title function_">includes</span>(item)) newPuz.<span class="title function_">push</span>(item);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">return</span> newPuz;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我的作答</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">collectPuzzle</span>(<span class="params">...puzzles</span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span>在这里写入具体的实现逻辑</span></span><br><span class="line">  <span class="comment">// 对所有的拼图进行收集，获取不同拼图类型的结果，并返回</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(...puzzles)</span><br><span class="line"><span class="keyword">const</span> res=[]</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">const</span> k <span class="keyword">of</span> puzzles)&#123;</span><br><span class="line">  <span class="comment">//console.log(k)</span></span><br><span class="line">  k.<span class="title function_">forEach</span>(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(!res.<span class="title function_">includes</span>(element))&#123;</span><br><span class="line">      res.<span class="title function_">push</span>(element)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//console.log(res)</span></span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="偏门作答（学习新知识）"><a href="#偏门作答（学习新知识）" class="headerlink" title="偏门作答（学习新知识）"></a>偏门作答（学习新知识）</h4><p>flat给数组降维，默认是flat(1)就是降维一次，本来传的是个二维数组变成一维数组了，然后Set可以自动去重再生成一个去重后的新数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> [...<span class="keyword">new</span> <span class="title class_">Set</span>(puzzles.<span class="title function_">flat</span>())]</span><br></pre></td></tr></table></figure>
<h2 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h2><h3 id="分享链接–对象转数组-url拼接"><a href="#分享链接–对象转数组-url拼接" class="headerlink" title="分享链接–对象转数组+url拼接"></a>分享链接–对象转数组+url拼接</h3><p>思路是把对象转化成指定要求的数组拼接起来，两种方法：</p>
<ol>
<li><p>第一种，使用<code>Object.keys(对象)</code><br>返回对象的key组成的数组arr1<br>再用arr1.map()遍历key，返回要的格式</p>
</li>
<li><p>第二种，使用<code>Object.entries(对象)</code><br>返回对象的key和value组成的数组arr2<br>再用arr2.map()遍历key和value，返回要的格式<br>拼接字符串也是两种方法：</p>
</li>
<li><p>模板字符串<br><code>`$&#123;key&#125;=$&#123;params[key]&#125;`</code></p>
</li>
<li><p>直接拼<br><code>key+&quot;=&quot;+params[key]</code></p>
</li>
</ol>
<p>第一种方法代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">appendParamsToURL</span>(<span class="params">url, params</span>) &#123;</span><br><span class="line"> <span class="comment">//console.log(&quot;params&quot;, params)</span></span><br><span class="line"> <span class="comment">//console.log(&quot;Object.keys(params)&quot;, Object.keys(params))</span></span><br><span class="line"><span class="keyword">const</span> nparams = <span class="title class_">Object</span>.<span class="title function_">keys</span>(params).<span class="title function_">map</span>(<span class="function">(<span class="params">p</span>)=&gt;</span><span class="string">`<span class="subst">$&#123;p&#125;</span>=<span class="subst">$&#123;params[p]&#125;</span>`</span>).<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>)</span><br><span class="line"> <span class="comment">//也可以var arr = Object.keys(params).map((p)=&gt;p+&quot;=&quot;+params[p]).join(&quot;&amp;&quot;)</span></span><br><span class="line"> <span class="comment">//console.log(&quot;map&quot;, nparams)</span></span><br><span class="line"> <span class="keyword">if</span>(url.<span class="title function_">includes</span>(<span class="string">&quot;?&quot;</span>))&#123;</span><br><span class="line"> <span class="keyword">return</span>  <span class="string">`<span class="subst">$&#123;url&#125;</span>&amp;<span class="subst">$&#123;nparams&#125;</span>`</span>&#125;</span><br><span class="line"> <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="string">`<span class="subst">$&#123;url&#125;</span>?<span class="subst">$&#123;nparams&#125;</span>`</span></span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//或者  if (url.includes(&quot;?&quot;)) return url + &quot;&amp;&quot; + params;</span></span><br><span class="line"> <span class="comment">// return url + &quot;?&quot; + params;</span></span><br><span class="line"><span class="comment">//再或者</span></span><br><span class="line">  <span class="comment">//return url.includes(&#x27;?&#x27;) </span></span><br><span class="line">   <span class="comment">// ? `$&#123;url&#125;&amp;$&#123;queryString&#125;` </span></span><br><span class="line">  <span class="comment">//  : `$&#123;url&#125;?$&#123;queryString&#125;`;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种<code>Object.entries()</code>方法代码</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">appendParamsToURL</span>(<span class="params">url, params</span>) &#123;</span><br><span class="line"> <span class="keyword">var</span> nparams = <span class="title class_">Object</span>.<span class="title function_">entries</span>(params)</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(nparams)</span><br><span class="line"> <span class="keyword">var</span> arr =nparams.<span class="title function_">map</span>(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>key+<span class="string">&quot;=&quot;</span>+value).<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line"><span class="keyword">if</span>(url.<span class="title function_">includes</span>(<span class="string">&quot;?&quot;</span>))&#123;</span><br><span class="line">  string = url+<span class="string">&quot;&amp;&quot;</span>+arr</span><br><span class="line">  <span class="keyword">return</span> string</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">  string = url+<span class="string">&quot;?&quot;</span>+arr</span><br><span class="line">  <span class="keyword">return</span> string</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//下面这样写更好</span></span><br><span class="line"><span class="comment">//string = url.includes(&quot;?&quot;) ? url+&quot;&amp;&quot;+arr :url+&quot;?&quot;+arr</span></span><br><span class="line"><span class="comment">// return string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="将对象转为查询字符串"><a href="#将对象转为查询字符串" class="headerlink" title="将对象转为查询字符串"></a>将对象转为查询字符串</h4><p><code>params = Object.keys(params).map((p) =&gt; `$&#123;p&#125;=$&#123;params[p]&#125;`).join(&quot;&amp;&quot;);</code></p>
<blockquote>
<p>功能：将 params 对象转换为 URL 查询字符串（如 name&#x3D;Bob&amp;age&#x3D;25）。<br>关键步骤分解：<br>Object.keys(params)：<br>获取 params 对象的所有键（属性名），形成一个数组。<br>例如：{ name: ‘Bob’, age: 25 } → [‘name’, ‘age’]。<br>map((p) &#x3D;&gt; …)：<br>遍历键数组中的每个键 p（如 ‘name’）。<br>将键和对应的值拼接为 key&#x3D;value 的字符串。<br>例如：p &#x3D; ‘name’ → params[p] 是 ‘Bob’ → 结果为 “name&#x3D;Bob”。<br>.join(‘&amp;’)：<br>将所有 key&#x3D;value 字符串用 &amp; 连接，形成最终的查询字符串。<br>例如：[“name&#x3D;Bob”, “age&#x3D;25”] → “name&#x3D;Bob&amp;age&#x3D;25”</p>
</blockquote>
<h3 id="水印生成–innerHtml拼接元素"><a href="#水印生成–innerHtml拼接元素" class="headerlink" title="水印生成–innerHtml拼接元素"></a>水印生成–innerHtml拼接元素</h3><p>两种解答方式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Aspan</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line">    <span class="title class_">Aspan</span>.<span class="property">innerHTML</span> = text;</span><br><span class="line">    <span class="title class_">Aspan</span>.<span class="property">style</span>.<span class="property">color</span> = color;</span><br><span class="line">    <span class="title class_">Aspan</span>.<span class="property">style</span>.<span class="property">opacity</span> = opacity;</span><br><span class="line">    <span class="title class_">Aspan</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`rotate(<span class="subst">$&#123;deg&#125;</span>deg)`</span>;</span><br><span class="line">    container.<span class="title function_">appendChild</span>(<span class="title class_">Aspan</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line">    container.<span class="property">innerHTML</span>+= <span class="string">`&lt;span style=&quot;color:<span class="subst">$&#123;color&#125;</span>;transform:rotate(<span class="subst">$&#123;deg&#125;</span>deg);opacity:<span class="subst">$&#123;opacity&#125;</span>&quot;&gt;<span class="subst">$&#123;text&#125;</span>&lt;/span&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>方法一：<br>创建元素：通过 document.createElement(‘span’) 创建一个新的 <code>&lt;span&gt;</code> 元素。<br>设置属性：使用 .innerHTML 来设置 <code>&lt;span&gt;</code> 的文本内容，.style 属性来逐个设置样式（颜色、透明度、旋转角度）。<br>追加到DOM：使用 .appendChild() 方法将新创建的 <code>&lt;span&gt; </code>元素添加到指定的容器（container）中<br>方法二：<br>字符串拼接：在循环内部，构建一个包含所需<code>&lt;span&gt;</code>元素及其样式的字符串。<br>追加HTML：使用 +&#x3D; 操作符将这个字符串追加到 container.innerHTML 中，这意味着每次迭代都会修改容器的HTML内容</p>
<h3 id="欢迎语拼接"><a href="#欢迎语拼接" class="headerlink" title="欢迎语拼接"></a>欢迎语拼接</h3><p><strong>注意第二种获取内容.value</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    subject = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;subject&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    event1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event1&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    event2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event2&quot;</span>).<span class="property">value</span>;</span><br><span class="line">    <span class="keyword">if</span> (subject.<span class="property">length</span>==<span class="number">0</span> || event1.<span class="property">length</span>==<span class="number">0</span> || event2.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="string">&quot;欢迎用户&quot;</span>+subject+<span class="string">&quot;在&quot;</span>+event2+<span class="string">&quot;学习&quot;</span>+event1+<span class="string">&quot;课程！&quot;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">value</span> = result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">generate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    subject = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;subject&quot;</span>);</span><br><span class="line">    event1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event1&quot;</span>);</span><br><span class="line">    event2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;event2&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (subject.<span class="property">length</span>==<span class="number">0</span> || event1.<span class="property">length</span>==<span class="number">0</span> || event2.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    result = <span class="string">`欢迎用户<span class="subst">$&#123;subject.value&#125;</span>在<span class="subst">$&#123;event2.value&#125;</span>学习<span class="subst">$&#123;event1.value&#125;</span>课程！`</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">value</span> = result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><h3 id="添加千分位"><a href="#添加千分位" class="headerlink" title="添加千分位"></a>添加千分位</h3><p>原代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 控制浏览器缓存 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-Control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-store&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>你能看出有多少位吗？<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/style05.css&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;edit-cash&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>消费总额<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shuru&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;yen;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">p</span>&gt;</span>可询问工作人员应缴费用总额<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;支付&quot;</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;联系电话&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;infor-sub&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer-content&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-edit clearfix&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num3&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num5&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num6&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num7&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num8&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num9&quot;</span>&gt;</span>9<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num0&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;remove&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        </span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;.infor-sub&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;.layer&#x27;</span>).<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;.form&#x27;</span>).<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">					e.<span class="title function_">preventDefault</span>();		<span class="comment">//阻止表单提交</span></span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;.shuru&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;.layer-content&#x27;</span>).<span class="title function_">animate</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">bottom</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">					&#125;, <span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">					e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;.wrap&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					$(<span class="string">&#x27;.layer-content&#x27;</span>).<span class="title function_">animate</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">bottom</span>: <span class="string">&#x27;-200px&#x27;</span></span></span><br><span class="line"><span class="language-javascript">					&#125;, <span class="number">200</span>)</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;.form-edit .num&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> oDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;input-box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					oDiv.<span class="property">innerHTML</span> += <span class="variable language_">this</span>.<span class="property">innerHTML</span>;</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">				$(<span class="string">&#x27;#remove&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> oDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;input-box&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> oDivHtml = oDiv.<span class="property">innerHTML</span>;</span></span><br><span class="line"><span class="language-javascript">					oDiv.<span class="property">innerHTML</span> = oDivHtml.<span class="title function_">substring</span>(<span class="number">0</span>,oDivHtml.<span class="property">length</span>-<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;)</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>作答</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 控制浏览器缓存 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Cache-Control&quot;</span> <span class="attr">content</span>=<span class="string">&quot;no-store&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>你能看出有多少位吗？<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">href</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/style05.css&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;edit-cash&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>消费总额<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;shuru&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;yen;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;input-box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>可询问工作人员应缴费用总额<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;支付&quot;</span> <span class="attr">class</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;姓名&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;联系电话&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">class</span>=<span class="string">&quot;infor-sub&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer-content&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-edit clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num1&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num2&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num3&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num4&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num5&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num6&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num7&quot;</span>&gt;</span>7<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num8&quot;</span>&gt;</span>8<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num9&quot;</span>&gt;</span>9<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num num0&quot;</span>&gt;</span>0<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;remove&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.infor-sub&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;.layer&quot;</span>).<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;.form&quot;</span>).<span class="title function_">hide</span>();</span></span><br><span class="line"><span class="language-javascript">          e.<span class="title function_">preventDefault</span>(); <span class="comment">//阻止表单提交</span></span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.shuru&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;.layer-content&quot;</span>).<span class="title function_">animate</span>(</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">bottom</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">200</span></span></span><br><span class="line"><span class="language-javascript">          );</span></span><br><span class="line"><span class="language-javascript">          e.<span class="title function_">stopPropagation</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.wrap&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;.layer-content&quot;</span>).<span class="title function_">animate</span>(</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">bottom</span>: <span class="string">&quot;-200px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="number">200</span></span></span><br><span class="line"><span class="language-javascript">          );</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//修改部分</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> num = <span class="string">&quot;&quot;</span>; <span class="comment">// 存储原始数字（不带逗号）</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 数字输入处理</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;.form-edit .num&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          num += <span class="variable language_">this</span>.<span class="property">innerHTML</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">updateDisplay</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 删除处理</span></span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#remove&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (num.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            num = num.<span class="title function_">slice</span>(<span class="number">0</span>, -<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">updateDisplay</span>();</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 统一的显示更新函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">updateDisplay</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">const</span> formatted = <span class="title function_">formatNumber</span>(num);</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;#input-box&quot;</span>).<span class="title function_">text</span>(formatted);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 优化的千分位格式化函数</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">formatNumber</span>(<span class="params">str</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> str</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">replace</span>(<span class="regexp">/\D/g</span>, <span class="string">&quot;&quot;</span>) <span class="comment">// 去除非数字</span></span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">replace</span>(<span class="regexp">/(\d)(?=(\d&#123;3&#125;)+(?!\d))/g</span>, <span class="string">&quot;$1,&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="讲解"><a href="#讲解" class="headerlink" title="讲解"></a>讲解</h4><p><code>num = num.slice(0, -1);</code>始终删除最后一个数字字符<br><code>if (num.length &gt; 0) &#123; ... &#125; </code> 防止空字符串操作<br><code>return str.replace(/(\d)(?=(\d&#123;3&#125;)+(?!\d))/g, &#39;$1,&#39;);</code>反向遍历的正则表达式<br>(\d)：匹配单个数字并捕获<br>(?&#x3D;(\d{3})+(?!\d))：后面跟着3的倍数位数的位置<br>$1,：在匹配位置插入逗号<br><img src="/./postImgs/blue/js4.png" alt="添加千分位"></p>
<h3 id="验证密码强度"><a href="#验证密码强度" class="headerlink" title="验证密码强度"></a>验证密码强度</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge,chrome=1&quot;</span>&gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>验证密码强度<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.bg</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: beige;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;bg&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container col-sm-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-4 col-sm-offset-4&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;off&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">legend</span> <span class="attr">style</span>=<span class="string">&quot;color: #0e0e0e&quot;</span>&gt;</span>注 册<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;passwordField&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;passwordField&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passwordField&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">required</span>=<span class="string">&#x27;required&#x27;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;btn btn-primary btn-validate&quot;</span>&gt;</span>验证<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>强度等级：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;result&quot;</span>&gt;</span>未验证<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container col-sm-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-sm-12 col-sm-offset-4&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>你填写的密码的强度等级按如下划分：<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>低：<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span>密码必须大于 8 个字符<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>中（在满足低强度要求的前提下，需要满足以下需求）：<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span>至少需要一个小写字母<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span>至少需要一个数字<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>高（在满足中强度要求的前提下，需要满足以下需求）：<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span>至少需要一个大写字母<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">li</span>&gt;</span>至少需要一个（除数字和字母外的）特殊字符<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://labfile.oss.aliyuncs.com/courses/9203/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">     <span class="comment">// 请在这里补充代码，实现密码强度的验证</span></span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>作答：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">let</span> str = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;input&#x27;</span>).<span class="property">value</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(str)</span><br><span class="line">       <span class="comment">// 低级强度验证</span></span><br><span class="line">       <span class="keyword">if</span>(str.<span class="property">length</span>&gt;<span class="number">8</span>)&#123;</span><br><span class="line">           <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.result&#x27;</span>).<span class="property">innerHTML</span>=<span class="string">&#x27;低&#x27;</span></span><br><span class="line">           <span class="comment">// 中级强度验证</span></span><br><span class="line">           <span class="keyword">const</span> regaz = <span class="regexp">/[a-z]/g</span> <span class="comment">//查找小写字母，执行全局匹配</span></span><br><span class="line">           <span class="keyword">const</span> regnum = <span class="regexp">/[0-9]/g</span> <span class="comment">//查找数字，行全局匹配</span></span><br><span class="line">           <span class="keyword">if</span>(str.<span class="title function_">match</span>(regaz)&amp;&amp;str.<span class="title function_">match</span>(regnum))&#123;</span><br><span class="line">               <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.result&#x27;</span>).<span class="property">innerHTML</span>=<span class="string">&#x27;中&#x27;</span></span><br><span class="line">               <span class="comment">// 高级强度验证</span></span><br><span class="line">               <span class="keyword">const</span> regdaz = <span class="regexp">/[A-Z]/g</span> <span class="comment">//查找大写字母，执行全局匹配</span></span><br><span class="line">               <span class="keyword">const</span> regzf = <span class="regexp">/[^0-9a-zA-Z]/g</span> <span class="comment">//查找除数字和字母的字符，执行全局匹配</span></span><br><span class="line">               <span class="keyword">if</span>(str.<span class="title function_">match</span>(regdaz)&amp;&amp;str.<span class="title function_">match</span>(regzf))&#123;</span><br><span class="line">                   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">                   <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.result&#x27;</span>).<span class="property">innerHTML</span>=<span class="string">&#x27;高&#x27;</span></span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.result&#x27;</span>).<span class="property">innerHTML</span>=<span class="string">&#x27;无效&#x27;</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>是否使用 &#x2F;g 标志其实并不影响结果，因为你在使用 .match() 方法时，只关心是否存在匹配项（即结果是否为 null），而不是具体的匹配内容或数量。因此，在这种情况下，可以省略 &#x2F;g 标志以简化</p>
<h3 id="多表单校验"><a href="#多表单校验" class="headerlink" title="多表单校验"></a>多表单校验</h3><p>要求：</p>
<blockquote>
<p>完善 index.html TODO 部分，实现多表单校验功能。<br>两个表单校验规则（rules）如下：<br>姓名：必填。规则：只能输入汉字。提示：请输入姓名，只能输入汉字。<br>性别：必填。提示：请选择性别。<br>年龄：必填。提示：请输入年龄。<br>是否参加过编程比赛：必填。提示：请选择是否参加过编程比赛。<br>是否有过创业经历：必填。提示：请选择是否有过创业经历。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> rules = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">                <span class="attr">name</span>: &#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">validator</span>: <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (value === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">                            <span class="title function_">callback</span>(<span class="string">&#x27;请输入姓名&#x27;</span>)</span><br><span class="line">                        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/[^\u4e00-\u9fa5]/g</span>.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">                            <span class="title function_">callback</span>(<span class="string">&#x27;只能输入汉字&#x27;</span>)</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="title function_">callback</span>()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">sex</span>: &#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;请选择性别&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">age</span>: &#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;请输入年龄&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">isCompetition</span>: &#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;请选择是否参加过编程比赛&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">isEntrepreneurship</span>: &#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;请选择是否有过创业经历&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="封装函数"><a href="#封装函数" class="headerlink" title="封装函数"></a>封装函数</h2><h3 id="找回链接之旅–可重置的单次执行函数-难懂"><a href="#找回链接之旅–可重置的单次执行函数-难懂" class="headerlink" title="找回链接之旅–可重置的单次执行函数(难懂)"></a>找回链接之旅–可重置的单次执行函数(难懂)</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">resetableOnce</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">runOnce</span>(<span class="params">...arr</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(...arr); <span class="comment">// 打印传入的参数</span></span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            result = <span class="title function_">fn</span>(...arr); <span class="comment">// 第一次执行时调用 fn，并保存结果</span></span><br><span class="line">            flag = <span class="literal">false</span>; <span class="comment">// 标记已执行过</span></span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> result; <span class="comment">// 后续调用直接返回之前的结果</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">        result = <span class="literal">undefined</span>; <span class="comment">// 重置结果</span></span><br><span class="line">        flag = <span class="literal">true</span>; <span class="comment">// 重置标志</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; runOnce, reset &#125;; <span class="comment">// 返回包含两个方法的对象</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="360动画展示–管道模式–异步函数封装"><a href="#360动画展示–管道模式–异步函数封装" class="headerlink" title="360动画展示–管道模式–异步函数封装"></a>360动画展示–管道模式–异步函数封装</h3><p>等待每一个动画执行完毕之后，再执行下一个动画，并把前一个动画的返回值initialValue返回，以保持动画的衔接。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">pipeline</span> = <span class="keyword">async</span> (<span class="params">initialValue, sequence</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> fn <span class="keyword">of</span> sequence) &#123;</span><br><span class="line">        <span class="comment">// 将 fn 的执行结果包装为 Promise，并等待其完成</span></span><br><span class="line">        initialValue = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="title function_">fn</span>(initialValue));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> initialValue;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>initialValue 就是原材料。<br>sequence 是一个函数数组，每个函数代表一个加工步骤。<br>pipeline 函数的作用就是按顺序执行这些步骤，每一步的输出作为下一步的输入。</p>
</blockquote>
<h4 id="知识点-1"><a href="#知识点-1" class="headerlink" title="知识点"></a>知识点</h4><p>Promise是处理异步操作的对象，有三种状态：pending（进行中）、fulfilled（已完成）、rejecte（已失败）<br>异步操作（如网络请求、定时器）通常通过回调函数来处理结果。但回调函数会导致回调地狱（Callback Hell），代码结构混乱，难以维护</p>
<blockquote>
<p>async：<br>修饰函数，表示该函数返回一个 Promise。<br>函数内部可以使用 await 关键字。<br>await：<br>只能在 async 函数内部使用。<br>暂停函数执行，等待 Promise 完成（fulfilled），并获取其结果。<br>如果 Promise 被 reject，会抛出错误，可以用 try&#x2F;catch 捕获</p>
</blockquote>
<h3 id="布局切换–添加移除类名"><a href="#布局切换–添加移除类名" class="headerlink" title="布局切换–添加移除类名"></a>布局切换–添加移除类名</h3><p>实现被点击的模式元素（class&#x3D;layout-option）处于激活状态，即添加一个类名（active），其他（class&#x3D;layout-option）移除激活状态，即移除类名（active）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> layoutOptions = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.layout-option&#x27;</span>); <span class="comment">// 三个模式元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示模式</span></span><br><span class="line">switching.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    mode.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;flex&#x27;</span>; <span class="comment">// 设置显示为flex布局</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历选项</span></span><br><span class="line">layoutOptions.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">option</span>) &#123;</span><br><span class="line">    <span class="comment">// 经典模式，浏览模式，工具模式点击事件</span></span><br><span class="line">    option.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// TODO：待补充代码</span></span><br><span class="line">        layoutOptions.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="选项卡功能"><a href="#选项卡功能" class="headerlink" title="选项卡功能"></a>选项卡功能</h3><p>它通过点击不同的div元素来切换显示对应的内容区域<br>原Html代码</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>选项卡切换<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/index.css&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tabs&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span>选项一<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> &gt;</span>选项二<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> &gt;</span>选项三<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> &gt;</span>选项四<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            爱情要完结的时候自会完结，到时候，你不想画上句号也不行。爱情，原来是含笑饮毒酒。</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./imgs/1.jpeg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            在这个光怪陆离的人间，没有谁可以将日子过的行云流水。但我始终相信，走过平湖山雨，岁月山河，那些历尽劫数，尝遍百味的人，会更加生动而干净。</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./imgs/2.jpeg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;three&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            对于三十岁以后的人来说，十年八年不过是指缝间的事，而对于年轻人而言，三年五年就可以是一生一世。</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./imgs/3.jpeg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;four&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            我要你知道，在这个世界上总有一个人是等着你的，不管在什么时候，不管在什么地方，反正你知道，总有这么个人。</span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./imgs/4.jpeg&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/index.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>要补充的代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 获取所有带有&#x27;.tabs&gt;div&#x27;选择器的div元素，这些是选项卡按钮</span></span><br><span class="line">  <span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.tabs&gt;div&#x27;</span>);</span><br><span class="line">  <span class="comment">// 获取所有在&#x27;#content&gt;div&#x27;下的div元素，这些是每个选项卡对应的内容</span></span><br><span class="line">  <span class="keyword">var</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#content&gt;div&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历所有的选项卡按钮</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; divs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 给每个选项卡按钮添加点击事件监听器</span></span><br><span class="line">    divs[i].<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 先移除所有选项卡按钮和内容的&#x27;active&#x27;类</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> a = <span class="number">0</span>; a &lt; divs.<span class="property">length</span>; a++) &#123;</span><br><span class="line">        divs[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">        imgs[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 给当前点击的选项卡按钮和对应的内容添加&#x27;active&#x27;类</span></span><br><span class="line">      divs[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">      imgs[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure>

<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><blockquote>
<p>在这段代码中，classList.remove(‘active’)用来确保每次点击时先清除之前设置的激活状态，然后再用classList.add(‘active’)来设置新的激活状态。<br>当你调用classList.remove()并传递一个参数如’active’时，你实际上是在告诉JavaScript：“请从这个元素的class属性中移除名为active的类。”<br>工作原理：<strong>此方法接受一个或多个类名（不带.前缀）作为参数</strong>，并尝试从元素的class列表中删除这些类。如果该类存在于元素上，则它将被移除；如果不存在，则什么也不会发生。<br><strong>classList方法期望的是纯粹的类名字符串，而不包含任何CSS选择器符号（如.代表类选择器）</strong></p>
</blockquote>
<h4 id="选择器-实时与静态更新："><a href="#选择器-实时与静态更新：" class="headerlink" title="选择器 实时与静态更新："></a>选择器 实时与静态更新：</h4><p>document.querySelectorAll(‘.tabs&gt;div’) 和 document.querySelectorAll(‘#content&gt;div’)：<br>这两个调用使用的是CSS选择器语法来选择元素。querySelectorAll方法返回一个静态的NodeList，包含所有匹配给定选择器的元素。<br>.tabs&gt;div表示选择所有直接位于具有.tabs类的元素下的div元素；#content&gt;div同理，但它是基于ID选择器#content。</p>
<p><strong>使用getElementsByClassName(‘.tabs’)是不正确的</strong>，因为getElementsByClassName接受一个参数，即一个或多个类名（不带.），并且它会返回一个实时更新的HTMLCollection。因此，正确的方式应该是document.getElementsByClassName(‘tabs’)，<strong>但这只会返回拥有tabs类的所有元素，而不能用于直接选择.tabs下的子div元素</strong>。<br><img src="/./postImgs/blue/js2.png" alt="选择器方法对比表"><br>实时与静态集合：<br>HTMLCollection（动态）会随DOM变化自动更新<br>NodeList（静态）是选择时的快照<br>getElementsByClassName和getElementsByTagName返回的是实时的HTMLCollection，这意味着如果文档中的元素发生了变化，这个集合也会随之更新。相反，querySelectorAll返回的是静态的NodeList，即使文档发生变化，这个列表也不会改变。<br>性能考量：对于简单的选择操作，getElementsByClassName和getElementsByTagName可能会比querySelectorAll更快，尤其是在处理大量元素时。然而，querySelectorAll提供了更大的灵活性，特别是在处理复杂的选择器时。<br>综上所述，如果你想根据类名和父子关系精确选择元素，querySelectorAll是最适合的选择之一。</p>
<h4 id="优化方向"><a href="#优化方向" class="headerlink" title="优化方向"></a>优化方向</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 事件委托优化示例（减少事件绑定次数）</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tabs&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(e.<span class="property">target</span>.<span class="property">tagName</span> === <span class="string">&#x27;DIV&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 处理逻辑...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 最佳元素获取方式</span></span><br><span class="line">  <span class="keyword">const</span> tabsContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.tabs&#x27;</span>); <span class="comment">// 使用CSS选择器获取容器</span></span><br><span class="line">  <span class="keyword">const</span> content = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;content&#x27;</span>);    <span class="comment">// ID获取是最快的方式</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 事件委托绑定</span></span><br><span class="line">  tabsContainer.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">// 事件目标过滤</span></span><br><span class="line">    <span class="keyword">const</span> clickedTab = e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&#x27;.tabs &gt; div&#x27;</span>);</span><br><span class="line">    <span class="comment">//e.target：实际点击的原始元素</span></span><br><span class="line">    <span class="keyword">if</span> (!clickedTab) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取索引（优化版）</span></span><br><span class="line">    <span class="keyword">const</span> index = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">indexOf</span>.<span class="title function_">call</span>(</span><br><span class="line">      tabsContainer.<span class="property">children</span>, </span><br><span class="line">      clickedTab</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 类名操作（现代写法）</span></span><br><span class="line">    <span class="keyword">const</span> prevActiveTab = tabsContainer.<span class="title function_">querySelector</span>(<span class="string">&#x27;.active&#x27;</span>);</span><br><span class="line">    <span class="keyword">const</span> prevActiveContent = content.<span class="title function_">querySelector</span>(<span class="string">&#x27;.active&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 执行切换</span></span><br><span class="line">    <span class="keyword">if</span> (prevActiveTab) prevActiveTab.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (prevActiveContent) prevActiveContent.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    clickedTab.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    content.<span class="property">children</span>[index].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="新年贺卡（逻辑-随机数）"><a href="#新年贺卡（逻辑-随机数）" class="headerlink" title="新年贺卡（逻辑+随机数）"></a>新年贺卡（逻辑+随机数）</h3><p><img src="/./postImgs/blue/js3.png" alt="选择器方法对比表"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;index.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-name&quot;</span>&gt;</span>新年贺卡<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span> <span class="attr">id</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;greeting-display&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>书写贺卡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> greetingDisplay = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;greeting-display&quot;</span>)</span><br><span class="line">	<span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>)</span><br><span class="line">	<span class="comment">// 点击开始书写按钮</span></span><br><span class="line">	btn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		<span class="title function_">show</span>(greetingDisplay)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> greetings = [</span><br><span class="line">	<span class="string">&quot;新年快乐!&quot;</span>,</span><br><span class="line">	<span class="string">&quot;接受我新春的祝愿,祝你平安幸福&quot;</span>,</span><br><span class="line">	<span class="string">&quot;祝你新年快乐,洋洋得意!&quot;</span>,</span><br><span class="line">	<span class="string">&quot;新的一年,新的开始;心的祝福,新的起点!&quot;</span>,</span><br><span class="line">	<span class="string">&quot;新年好!祝新年心情好,身体好,一切顺心!&quot;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 随机数函数 从 greetings 随机取一个值并返回</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">writeGreeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// TODO 带补充代码  </span></span><br><span class="line">	<span class="comment">// 步骤1：生成随机索引（0到数组长度-1）</span></span><br><span class="line">	<span class="keyword">const</span> randomIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * greetings.<span class="property">length</span>);</span><br><span class="line">	<span class="comment">// 步骤2：返回对应的祝福语</span></span><br><span class="line">	<span class="keyword">return</span> greetings[randomIndex];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @param &#123;*&#125; greetingDisplay  要显示内容的dom元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//  show 将 writeGreeting 函数中返回的内容显示在 greetingDisplay 元素中</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">show</span>(<span class="params">greetingDisplay</span>) &#123;</span><br><span class="line">	<span class="comment">// TODO 待补充代码</span></span><br><span class="line">	<span class="comment">// 步骤1：获取随机祝福语</span></span><br><span class="line">	<span class="keyword">const</span> greeting = <span class="title function_">writeGreeting</span>();</span><br><span class="line">	<span class="comment">// 步骤2：更新DOM显示内容</span></span><br><span class="line">	greetingDisplay.<span class="property">textContent</span> = greeting;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123; show, writeGreeting &#125;</span><br></pre></td></tr></table></figure>

<h3 id="随机数生成器（指定范围和个数的不重复的随机数数组）"><a href="#随机数生成器（指定范围和个数的不重复的随机数数组）" class="headerlink" title="随机数生成器（指定范围和个数的不重复的随机数数组）"></a>随机数生成器（指定范围和个数的不重复的随机数数组）</h3><p>生成指定范围和个数的不重复的随机数数组</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> testArr = <span class="title function_">getRandomNum</span>(<span class="number">1</span>,<span class="number">30</span>,<span class="number">3</span>);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;1-30 以内的 3 个随机数：&quot;</span>+testArr+<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">			testArr = <span class="title function_">getRandomNum</span>(<span class="number">1</span>,<span class="number">100</span>,<span class="number">10</span>);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;1-100 以内的 10 个随机数：&quot;</span>+testArr+<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>作答部分：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getRandomNum = <span class="keyword">function</span>(<span class="params">min, max, countNum</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> arr = []; <span class="comment">// 初始化一个空数组来存储结果</span></span><br><span class="line">    <span class="comment">//在以下区域作答</span></span><br><span class="line">    <span class="keyword">while</span>(arr.<span class="property">length</span> &lt; countNum) &#123; <span class="comment">// 当数组长度小于需要的随机数数量时循环</span></span><br><span class="line">        <span class="keyword">var</span> num = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min + <span class="number">1</span>) + min); <span class="comment">// 生成[min, max]范围内的随机整数</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (arr.<span class="title function_">indexOf</span>(num) === -<span class="number">1</span>) &#123; <span class="comment">// 如果新生成的随机数不在数组中</span></span><br><span class="line">            arr.<span class="title function_">push</span>(num); <span class="comment">// 将其添加到数组中</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> arr; <span class="comment">// 返回包含所有随机数的数组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = getRandomNum; <span class="comment">// 导出函数以便其他模块可以使用</span></span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#### 知识点</span></span><br><span class="line"><span class="string">生成`</span><span class="string">`[min,max]`</span><span class="string">`区间的随机整数公式</span></span><br><span class="line"><span class="string">`</span><span class="string">`Math.floor(Math.random() * (max - min + 1)) + min`</span><span class="string">`</span></span><br><span class="line"><span class="string">textContent：安全设置纯文本内容</span></span><br><span class="line"><span class="string">innerHTML：可以插入HTML标签（本题不需要）</span></span><br><span class="line"><span class="string">#### 相关：洗牌算法</span></span><br><span class="line"><span class="string">这种方法提供了一种有效且公平的方式来从一系列数字中随机抽取若干个不重复的数字。</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> js</span><br><span class="line"><span class="keyword">const</span> getRandomNum = <span class="keyword">function</span>(<span class="params">min, max, countNum</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> pool = []; <span class="comment">// 存放所有可能数值的池子</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 生成数值范围池（包含min到max所有整数）</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = min; i &lt;= max; i++) &#123;</span><br><span class="line">        pool.<span class="title function_">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Fisher-Yates洗牌算法（打乱数组）</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = pool.<span class="property">length</span> - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">const</span> j = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * (i + <span class="number">1</span>)); <span class="comment">// 随机索引j，范围是[0, i]</span></span><br><span class="line">        [pool[i], pool[j]] = [pool[j], pool[i]]; <span class="comment">// 交换pool[i]和pool[j]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 截取前countNum个元素</span></span><br><span class="line">    <span class="keyword">return</span> pool.<span class="title function_">slice</span>(<span class="number">0</span>, countNum);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>生成数值范围池：<br>使用一个循环从min到max遍历，并将每个值添加到pool数组中。<br>这一步的结果是一个包含了所有可能数值的数组，例如如果min是1，max是5，则pool会是[1, 2, 3, 4, 5]。<br>Fisher-Yates洗牌算法：<br>这是一种高效的算法，用于生成一个均匀随机排列的数组。对于每一个数组中的元素，选择一个随机位置与之交换，从而达到打乱数组的目的。<br>Math.floor(Math.random() * (i + 1))生成一个介于0和当前索引i之间的随机整数j。<br>[pool[i], pool[j]] &#x3D; [pool[j], pool[i]]这行代码使用了ES6的解构赋值特性，交换数组中两个元素的位置。<br>截取前countNum个元素：<br>使用Array.prototype.slice()方法复制数组的一部分。这里是从数组的开始处（索引为0）开始，复制countNum个元素。<br>这样就得到了一个由原数组中随机选出的、不重复的countNum个元素组成的数组。</p>
</blockquote>
<h4 id="相关：随机颜色生成"><a href="#相关：随机颜色生成" class="headerlink" title="相关：随机颜色生成"></a>相关：随机颜色生成</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">randomColor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;#&#x27;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">0xffffff</span>).<span class="title function_">toString</span>(<span class="number">16</span>).<span class="title function_">padStart</span>(<span class="number">6</span>,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="卡片化标签页-排他算法"><a href="#卡片化标签页-排他算法" class="headerlink" title="卡片化标签页(排他算法)"></a>卡片化标签页(排他算法)</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 实现选项卡功能</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// TODO 待补充代码</span></span><br><span class="line">  <span class="keyword">var</span> divs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.tabs&gt;div&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> imgs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;#content&gt;div&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i&lt;divs.<span class="property">length</span>;i++)</span><br><span class="line">  &#123;</span><br><span class="line">    divs[i].<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">let</span> a = <span class="number">0</span>;a&lt;divs.<span class="property">length</span>;a++)</span><br><span class="line">     &#123;</span><br><span class="line">           divs[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">           imgs[a].<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">     &#125; </span><br><span class="line">            divs[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">            imgs[i].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">init</span>();</span><br></pre></td></tr></table></figure>
<h3 id="加减乘除计算-（switch-case语句）"><a href="#加减乘除计算-（switch-case语句）" class="headerlink" title="加减乘除计算 （switch case语句）"></a>加减乘除计算 （switch case语句）</h3><p><img src="/./postImgs/blue/js1.png" alt="加减乘除计算"><br>提供代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>简易计算器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>计算器<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;num1&quot;</span> <span class="attr">size</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;type&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>*<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>&gt;</span>/<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">id</span>=<span class="string">&quot;num2&quot;</span> <span class="attr">size</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;计算&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btnsubmit&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;val&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;cal.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btnsubmit&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> num1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;num1&quot;</span>).<span class="property">value</span>; <span class="comment">//操作数1</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> num2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;num2&quot;</span>).<span class="property">value</span>; <span class="comment">//操作数2</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> type = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;type&quot;</span>).<span class="property">value</span>; <span class="comment">//符号</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (type == <span class="number">3</span> &amp;&amp; num2 == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;被除数不能为0&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> result = <span class="title function_">cal</span>(<span class="built_in">parseInt</span>(num1), <span class="built_in">parseInt</span>(num2), <span class="built_in">parseInt</span>(type));</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;val&quot;</span>).<span class="property">innerText</span> = result;</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>补充代码如下：<br><strong>break; 这里的break是不必要的，因为return已经结束了函数的执行</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">cal</span>(<span class="params">num1, num2, type</span>) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 在此处补充代码</span></span><br><span class="line">        <span class="keyword">switch</span>(type)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span> :</span><br><span class="line">                <span class="keyword">return</span> num1 + num2</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span> :</span><br><span class="line">                <span class="keyword">return</span> num1 - num2</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span> :</span><br><span class="line">                <span class="keyword">return</span> num1 * num2</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span> :</span><br><span class="line">                <span class="keyword">return</span> num1 / num2</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = cal; <span class="comment">//请勿删除</span></span><br></pre></td></tr></table></figure>
<h2 id="计算器"><a href="#计算器" class="headerlink" title="计算器"></a>计算器</h2><h3 id="灯泡变色–定时器"><a href="#灯泡变色–定时器" class="headerlink" title="灯泡变色–定时器"></a>灯泡变色–定时器</h3><blockquote>
<p>页面加载完成 3 秒后灯的颜色变成红色。<br>在灯的颜色变成红色的 3 秒后，灯的颜色变成绿色（即 6 秒后灯光变成绿色）。<br>随后颜色不再变化。<br>请通过修改 display 属性来显示不同颜色的灯的图片</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">red</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 隐藏默认和绿色灯，显示红色灯</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;defaultlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;greenlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;redlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">green</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 隐藏默认和红色灯，显示绿色灯</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;defaultlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;redlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;greenlight&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline-block&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">trafficlights</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 3秒后执行 red()，6秒后执行 green()</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(red, <span class="number">3000</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(green, <span class="number">6000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 页面加载完成后立即调用 trafficlights()</span></span><br><span class="line">  <span class="title function_">trafficlights</span>();</span><br></pre></td></tr></table></figure>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="fectch"><a href="#fectch" class="headerlink" title="fectch"></a>fectch</h2><h3 id="购物狂欢节"><a href="#购物狂欢节" class="headerlink" title="购物狂欢节"></a>购物狂欢节</h3><blockquote>
<p>要求：在 js&#x2F;stores&#x2F;useProducts.js 中补充 fetchProducts 函数， category 参数代表商品的分类。可能传来值为 books 、 clothing 、 electronics ，三个值对应的请求文件分别为 api&#x2F;products&#x2F; 中 books.json 、 clothing.json 、 electronics.json 的数据，将请求到的数据赋值到 this.products 中（每次请求都要重新赋值，请求数据不累加），函数不需要返回值</p>
</blockquote>
<p>使用 fetch(url) 发送请求。<br>使用 .json() 将响应体（res）解析为 JSON 数据。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchProducts</span>(<span class="params">category</span>) &#123;</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">`api/products/<span class="subst">$&#123;category&#125;</span>.json`</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;<span class="keyword">return</span> res.<span class="title function_">json</span>()&#125; )</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span> &#123;<span class="variable language_">this</span>.<span class="property">products</span>=data&#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span>=&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(err)&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchProducts</span>(<span class="params">category</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="title function_">await</span>( <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`api/products/<span class="subst">$&#123;category&#125;</span>.json`</span>)).<span class="title function_">json</span>();</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">products</span>=data</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchProducts</span>(<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 根据分类获取商品数据</span></span><br><span class="line">   products.<span class="property">value</span> = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`./api/products/<span class="subst">$&#123;category&#125;</span>.json`</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>())</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="添加商品到购物车"><a href="#添加商品到购物车" class="headerlink" title="添加商品到购物车"></a>添加商品到购物车</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addProduct</span>(<span class="params">product</span>) &#123;</span><br><span class="line">  <span class="comment">// <span class="doctag">TODO:</span> 添加商品到购物车，如果商品已存在，则数量+1</span></span><br><span class="line">  <span class="keyword">if</span> (products.<span class="property">value</span>.<span class="title function_">includes</span>(product)) &#123;</span><br><span class="line">    product.<span class="property">quantity</span>++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    product.<span class="property">quantity</span> = <span class="number">1</span>;</span><br><span class="line">    products.<span class="property">value</span>.<span class="title function_">push</span>(product);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="计算总价"><a href="#计算总价" class="headerlink" title="计算总价"></a>计算总价</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> totalPrice = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> 计算总价</span></span><br><span class="line">    <span class="keyword">var</span> sum=products.<span class="property">value</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> acc + (cur.<span class="property">price</span> * cur.<span class="property">quantity</span>), <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> sum</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><h3 id="知识点统计图–axios"><a href="#知识点统计图–axios" class="headerlink" title="知识点统计图–axios"></a>知识点统计图–axios</h3><blockquote>
<p>请在 TODO 1 处使用 axios 完成题库数据请求，请求地址储存在 mockUrl 变量中，将请求到的数据以 js 数组对象的形式储存在 rawData 变量中。并将 rawData 变量值传递给函数 extractUniquePoints，最终将函数 extractUniquePoints 的执行结果赋值给变量 knowledgePoints。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">onMounted</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    chart = echarts.<span class="title function_">init</span>(chartContainer.<span class="property">value</span>);</span><br><span class="line">    <span class="comment">// TODO 1 请在下面补充代码</span></span><br><span class="line">    axios.<span class="title function_">get</span>(mockUrl).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>rawData.<span class="property">value</span> = res.<span class="property">data</span>)</span><br><span class="line">    knowledgePoints= <span class="title function_">extractUniquePoints</span>(rawData.<span class="property">value</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// TODO 1 END</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="学生探览–axios获取数据并保存给items"><a href="#学生探览–axios获取数据并保存给items" class="headerlink" title="学生探览–axios获取数据并保存给items"></a>学生探览–axios获取数据并保存给items</h3><p>在 TODO1 处使用 AXIOS 请求班级数据，并储存到变量items中<br>数据地址已经储存在变量 mockUrl 中，请直接使用此变量作为请求地址</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">    axios.<span class="title function_">get</span>(mockUrl).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//console.log(res)</span></span><br><span class="line">        <span class="comment">//console.log(res.data)</span></span><br><span class="line">        items.<span class="property">value</span>=res.<span class="property">data</span></span><br><span class="line">        <span class="comment">//console.log(items.value)</span></span><br><span class="line">    &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="学生探览–计算属性，数组"><a href="#学生探览–计算属性，数组" class="headerlink" title="学生探览–计算属性，数组"></a>学生探览–计算属性，数组</h2><p>TODO2 处补全代码，当对班级学生信息进行查询时会触发。根据班级数据（即目标 1 获取赋值的 items 变量）分别计算班级在“技术能力得分”、“硬实力得分”、“软技能得分”三个方面的平均成绩，并将这三个方面的平均成绩以数组的方式赋值到计算属性 classAverageScores 中。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> classAverageScores = <span class="title function_">computed</span>(<span class="function">()=&gt;</span></span><br><span class="line">    items.<span class="property">value</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc,cur,_</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> cur.<span class="property">scores</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item,index</span>)=&gt;</span></span><br><span class="line">        acc[index]+item)</span><br><span class="line">    &#125;,[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]).<span class="title function_">map</span>(<span class="function"><span class="params">score</span>=&gt;</span><span class="title class_">Math</span>.<span class="title function_">round</span>(score/items.<span class="property">value</span>.<span class="property">length</span>))</span><br><span class="line">)     </span><br></pre></td></tr></table></figure>

<h2 id="Echarts"><a href="#Echarts" class="headerlink" title="Echarts"></a>Echarts</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">  <span class="attr">radar</span>: &#123;</span><br><span class="line">      <span class="comment">// TODO3 START 请在下面补充代码</span></span><br><span class="line">     <span class="attr">shape</span>:<span class="string">&#x27;circle&#x27;</span>,</span><br><span class="line">      <span class="attr">startAngle</span>:<span class="number">0</span>,</span><br><span class="line">      <span class="attr">indicator</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;技术能力得分&quot;</span>, <span class="attr">max</span>: <span class="number">100</span>, <span class="attr">min</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;硬实力得分&quot;</span>, <span class="attr">max</span>: <span class="number">100</span>, <span class="attr">min</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;软技能得分&quot;</span>, <span class="attr">max</span>: <span class="number">100</span>, <span class="attr">min</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line"><span class="comment">// TODO3 END</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h2 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h2><h3 id="每日签到"><a href="#每日签到" class="headerlink" title="每日签到"></a>每日签到</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">signInBtn.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> days=<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;#days p&quot;</span>)</span><br><span class="line">    <span class="keyword">let</span> day=<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>()</span><br><span class="line">    days[day-<span class="number">1</span>].<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#sign_in_btn&quot;</span>).<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;no-active&quot;</span>)</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#sign_in_btn&quot;</span>).<span class="property">innerText</span>=<span class="string">&quot;明天也要记得来哦&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><h3 id="你还在等我吗"><a href="#你还在等我吗" class="headerlink" title="你还在等我吗"></a>你还在等我吗</h3><blockquote>
<p>补充函数 setItem，当点击页面上「点击存入」按钮时，会调用此函数，并将存入键、存入值、存入有效毫秒时长这三个数据传入参数 key 、value 、expired 。补全代码，使函数根据key 和value 存入 localStorage 。<br>补充函数 getItem，当点击页面上「点击取出」按钮时，会调用此函数，并将要取值的键传入参数 key。补全代码，使函数根据 key 值从 localStorage 中取出数据并返回，如果数据超过有效毫秒时长，则清除数据。</p>
</blockquote>
<blockquote>
<p>补充函数 removeItem，当点击页面上「点击进行清理」按钮时，会调用此函数，并将要清理的键传入参数 key。补全代码，使函数根据 key 值从 localStorage 中清除数据。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Storage</span> &#123;</span><br><span class="line">  <span class="title function_">setItem</span>(<span class="params">key, value, expired</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">removeItem</span>(key), expired)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getItem</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">removeItem</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>getAttribute 的作用：获取 HTML 元素的指定属性值<br><code>const name1=trigger.getAttribute(&quot;data-filter-name&quot;)</code><br>媒体查询</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">760</span>ox)&#123;</span><br><span class="line">屏幕宽度＜<span class="number">760</span>时生效</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
旋转角度`transform: rotate(60deg)`
新增元素添加样式再插入
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">const xz = createElement(&#x27;<span class="selector-tag">span</span>&#x27;)</span><br><span class="line">xz<span class="selector-class">.style</span><span class="selector-class">.xxx</span> =xxx</span><br><span class="line">oldelement<span class="selector-class">.append</span>(xz)  //（弹幕那道题）</span><br></pre></td></tr></table></figure>
对象变数组拼接

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = <span class="title class_">Object</span>.<span class="title function_">keys</span>(要处理的对象).<span class="title function_">map</span>(<span class="function"><span class="params">item</span>=&gt;</span>item+<span class="string">&quot;=&quot;</span>要处理的对象[item]).<span class="title function_">join</span>(<span class="string">&quot;$&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> arr2 = <span class="title class_">Object</span>.<span class="title function_">entires</span>(要处理的对象).<span class="title function_">map</span>(<span class="function">(<span class="params">[key,value]</span>)=&gt;</span>key+<span class="string">&quot;=&quot;</span>+value).<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>有没有包含＋三目运算符<br>arr.includes(“包含的东西”) ? 包含了执行 : 没包含执行<br>ref声明的对象数组操作，别丢value！！<br>原题 </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> waste = <span class="title function_">ref</span>([&#123;<span class="attr">k1</span>:v1,<span class="attr">k2</span>:v2,<span class="attr">k3</span>:v3&#125;,&#123;&#125;,&#123;&#125;])</span><br><span class="line">waste.<span class="property">value</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;<span class="keyword">if</span>(item.<span class="property">k1</span>===<span class="string">&#x27;厨余垃圾&#x27;</span>)&#123;</span><br><span class="line">food_waste.<span class="property">value</span>.<span class="title function_">push</span>(item.<span class="property">k2</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>面试题</category>
      </categories>
      <tags>
        <tag>面试题</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue--组件和VueCli(新)</title>
    <url>/2025/03/13/19-%E7%BB%84%E4%BB%B6+VueCli(2025new)/</url>
    <content><![CDATA[<h1 id="学习资料"><a href="#学习资料" class="headerlink" title="学习资料"></a>学习资料</h1><p>本篇博客是第二次学习vue笔记，学习课程为B站尚硅谷禹老师的vue2+vue3课程<br><mark>笔记中文字和代码都是自己理解后的详细总结，可能有表述啰嗦的地方，但是难点容易理解回忆，图片来自视频课截图</mark></p>
<h1 id="组件化编程"><a href="#组件化编程" class="headerlink" title="组件化编程"></a>组件化编程</h1><h2 id="什么是组件"><a href="#什么是组件" class="headerlink" title="什么是组件"></a>什么是组件</h2><p>组件是实现应用中局部功能代码和资源的集合<br>组件可以嵌套<br><img src="/postImgs/vue2/vue23.jpg" alt="组件"></p>
<h3 id="组件有什么好处"><a href="#组件有什么好处" class="headerlink" title="组件有什么好处"></a>组件有什么好处</h3><p><strong>复用编码，简化项目编码，提高运行效率</strong><br>传统方法编写应用与使用组件编写应用<br><img src="/postImgs/vue2/vue24.png" alt="组件"></p>
<h3 id="区别模块化"><a href="#区别模块化" class="headerlink" title="区别模块化"></a>区别模块化</h3><p>比如说一个组件里需要实现很多个功能，需要些很多js代码，那么这个js文件很多很复杂，此时把要写的Js代码拆分成多个js文件，每个文件实现一些模块的功能，这个叫做模块化</p>
<h2 id="组件的两种编写形式"><a href="#组件的两种编写形式" class="headerlink" title="组件的两种编写形式"></a>组件的两种编写形式</h2><h3 id="非单文件组件"><a href="#非单文件组件" class="headerlink" title="非单文件组件"></a>非单文件组件</h3><p>一个文件中包含有多个组件（几乎不用）</p>
<h3 id="单文件组件（常用-）"><a href="#单文件组件（常用-）" class="headerlink" title="单文件组件（常用 ）"></a>单文件组件（常用 ）</h3><p>一个文件中只包含有一个组件<strong>（条理清晰，代码好维护）</strong></p>
<h2 id="非单文件组件组件使用步骤"><a href="#非单文件组件组件使用步骤" class="headerlink" title="非单文件组件组件使用步骤"></a>非单文件组件组件使用步骤</h2><p>创建组件－&gt;注册组件-&gt;使用组件</p>
<h3 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h3><p>注意templat格式规范，里面必须要有一个大盒子包起来</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> 组件名 ＝ <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line"><span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;h3&gt;万分之四的春天－来自&#123;&#123;hometown&#125;&#125;&lt;/h3&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>  ,</span><br><span class="line"><span class="comment">//配置项</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>创建vm的配置项和创建组件的配置项<strong>几乎</strong>一样</p>
<ol>
<li>组件定义时不写**el **<br>组件不用规定为谁服务，因为最终所有的组件都要被一个vm管理，由vm决定为谁服务</li>
<li>data要写成普通函数的形式<br>避免组件被复用时，数据存在引用关系<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">属性<span class="number">1</span>:value1;</span><br><span class="line">属性<span class="number">2</span>:value2</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>使用template可以配置组件结构<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">template</span>:<span class="string">`</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="注册组件（局部注册和全局注册）"><a href="#注册组件（局部注册和全局注册）" class="headerlink" title="注册组件（局部注册和全局注册）"></a>注册组件（局部注册和全局注册）</h3><h4 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h4><p><code>Vue.component(&#39;组件名&#39;,组件值)</code><br>所有的vm都能够使用组件</p>
<h4 id="局部注册（用的多）"><a href="#局部注册（用的多）" class="headerlink" title="局部注册（用的多）"></a>局部注册（用的多）</h4><p>在vm里面的<code>components:&#123;&#125;</code>中注册组件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#root&#x27;</span></span><br><span class="line"><span class="attr">data</span>:&#123;&#125;</span><br><span class="line"><span class="attr">computed</span>:&#123;&#125;</span><br><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line">组件名:组件值 （组件值是创建组件时的组件名，这里的组件名才是真正的组件名；如果组件名等于组件值，可以只写一个）</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="使用组件"><a href="#使用组件" class="headerlink" title="使用组件"></a>使用组件</h3><p>把组件名作为标签直接使用<br>下图的注册是局部注册<br><img src="/postImgs/vue2/vue25.jpg" alt="组件"></p>
<h2 id="组件注意点"><a href="#组件注意点" class="headerlink" title="组件注意点"></a>组件注意点</h2><h3 id="组件命名规范"><a href="#组件命名规范" class="headerlink" title="组件命名规范"></a>组件命名规范</h3><ol>
<li>一个单词：<br>首字母大写（用的多）<br>首字母小写</li>
<li>多个单词：<br>(1)全部小写加-，如<code>&lt;my-cat&gt;&lt;/my-cat&gt;</code><br><code> components:&#123; &#39;my-cat &#39; : cat &#125;</code><br>(2) 大驼峰命名法（在脚手架环境中）<br><strong>直接引用vue.js不可以用这种写法</strong></li>
<li>不要用和标签之类同名的组件名</li>
<li>组件创建时，可以用name配置项指定组件在<strong>开发者工具</strong>中呈现的名字<br>一般用于第三方组件库和大型项目</li>
</ol>
<h3 id="组件标签"><a href="#组件标签" class="headerlink" title="组件标签"></a>组件标签</h3><ol>
<li>&lt;组件名&gt;&lt;&#x2F;组件名&gt;</li>
<li>&lt;组件名&#x2F;&gt; 必须在使用脚手架的环境中用</li>
</ol>
<h3 id="一个简写方式"><a href="#一个简写方式" class="headerlink" title="一个简写方式"></a>一个简写方式</h3><p><code>const school = Vue.extend(options)</code><br>可以简写为<code>const school = options</code></p>
<h3 id="组件嵌套（非单文件组件）"><a href="#组件嵌套（非单文件组件）" class="headerlink" title="组件嵌套（非单文件组件）"></a>组件嵌套（非单文件组件）</h3><p>把子组件注册到父组件里面，注意子组件的定义要放在前面，不然会找不到</p>
<h2 id="单文件组件（重点）"><a href="#单文件组件（重点）" class="headerlink" title="单文件组件（重点）"></a>单文件组件（重点）</h2><h3 id="给单个-vue文件起名原则"><a href="#给单个-vue文件起名原则" class="headerlink" title="给单个.vue文件起名原则"></a>给单个.vue文件起名原则</h3><p>建议用Hometown.vue或者MyCat.vue这样的命名格式，有助于和开发者工具呼应</p>
<h3 id="单文件结构标签"><a href="#单文件结构标签" class="headerlink" title="单文件结构标签"></a>单文件结构标签</h3><p>为了迎合html,css,js，有课这三个结构和标签</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">&lt;--html部分组件的结构--&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//js部分（组件交互相关的代码，数据，方法等）</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">/*css部分组件的样式*/</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="组件暴露和引用"><a href="#组件暴露和引用" class="headerlink" title="组件暴露和引用"></a>组件暴露和引用</h3><p><strong>在script中的内容要用export暴露出去，这样才能够让别的文件引用</strong><br>建议在最后写<code>export default 组件名</code>来暴露<br>图片2的Vue.extende()可以省略<br><img src="/postImgs/vue2/vue25.png" alt="单文件结构标签"><br><img src="/postImgs/vue2/vue26.jpg" alt="单文件结构标签"><br><strong>图片2里面要加name:’文件名’，这样最好</strong><br>在App.vue中要引入和注册组件，那么在<code>&lt;script&gt;</code>中添加</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">import Hometown from &#x27;./Hometowen&#x27;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/vue2/vue28.jpg" alt="在App.vue中要引入组件"></p>
<h3 id="vm（main-js入口文件）和index-html"><a href="#vm（main-js入口文件）和index-html" class="headerlink" title="vm（main.js入口文件）和index.html"></a>vm（main.js入口文件）和index.html</h3><p><img src="/postImgs/vue2/vue29.jpg" alt="在App.vue中要引入组件"><br>index.html，作为容器，注意顺序<br><img src="/postImgs/vue2/vue30.jpg" alt="在App.vue中要引入组件"><br>（以上内容要放在脚手架里跑）</p>
<h1 id="Vue脚手架–Vue-CLI"><a href="#Vue脚手架–Vue-CLI" class="headerlink" title="Vue脚手架–Vue CLI"></a>Vue脚手架–Vue CLI</h1><h2 id="认识脚手架"><a href="#认识脚手架" class="headerlink" title="认识脚手架"></a>认识脚手架</h2><p>Vue CLI：CLI(命令行接口工具)<br>一个工具让.vue文件运行起来，是Vue官方提供的标准化开发工具。<br>脚手架一般用最新版本，脚手架可以向下兼容低版本的Vue，不要让Vue向下兼容脚手架</p>
<h2 id="用脚手架安装和创建项目"><a href="#用脚手架安装和创建项目" class="headerlink" title="用脚手架安装和创建项目"></a>用脚手架安装和创建项目</h2><ol>
<li>第一次执行要全局安装脚手架<br><code>npm install -g @vue/cli</code><br>2.创建项目<br>切换到要创建项目的目录，然后用命令创建项目<br><code>vue create 项目名</code><br>项目名要回避关键字<br>一般很快就好了，会出现Successful</li>
<li>启动项目<br><code>npm run serve</code><br>启动成功后会出现两个地址，第一个是自己本地用，第二个如果别人想用可以用这个访问<br>ctrl+c暂停服务再加ctrl＋c</li>
</ol>
<h2 id="分析脚手架结构"><a href="#分析脚手架结构" class="headerlink" title="分析脚手架结构"></a>分析脚手架结构</h2><h3 id="项目文件（脚手架结构）"><a href="#项目文件（脚手架结构）" class="headerlink" title="项目文件（脚手架结构）"></a>项目文件（脚手架结构）</h3><ol>
<li>.gitignore<br>git的忽略文件，不想接受git管理的放进去</li>
<li>babel.config.js<br>ES6转&#x3D;&gt;ES5的配置文件，用默认配置的就可以，想再加从官网看</li>
<li>package.json<br>一些配置文件，里面的”script”是指令的简写<br>“bulid”用于在vue写完之后要转化成.html,js,jcss文件给后端的时候用，是最后的一次编译</li>
<li>package-lock.json<br>包管理版本控制文件</li>
<li>README<br>markdown笔记</li>
<li>src-main.js<br>这个是最重要的文件，在运行<code>npm run serve</code>之后马上运行这个文件，是整个项目的入口文件<br>引入App.vue；关闭vue的生产提示</li>
</ol>
<p><code>Vue.config.productionTip = false</code><br>创建Vue实例对象vm<br>将App组件放入容器中&#96;&#96;&#96;render:h&#x3D;&gt;h(App)&#96;<br>7. App.vue<br>里面自动生成的很多不用，可以自己弄个干净的App.vue用于以后这个文件的替换<br>8. assets文件夹<br>放静态资源<br>9.  cpmponents<br>除App.vue之外的所有组件全部放里面<br>10. public文件夹<br>里面有index.html，和图标，有一些默认配置</p>
<h3 id="render函数"><a href="#render函数" class="headerlink" title="render函数"></a>render函数</h3><p>只会在这里出现一次，后面不会在需要<br>vue帮你调用的一个函数<br><img src="/postImgs/vue2/cli01.jpg" alt="render函数"></p>
<h3 id="修改脚手架的默认配置"><a href="#修改脚手架的默认配置" class="headerlink" title="修改脚手架的默认配置"></a>修改脚手架的默认配置</h3><ol>
<li>怎么改<br>public,src,main.js不可以改<br>在官网－上面导航栏－配置参考，里面出现的都可以改</li>
<li>vue.config.js文件<br>这个文件可以对脚手架进行个性化定制，看官方文档有修改说明（导航栏－配置参考－vue.config.js）<br>vue.config.js最终vue会把它的配置给webpack进行合并，如果你有那么就会把它里面的配置替换掉</li>
<li>导出查看脚手架配置文件指令<br>一个终端指令，可以把脚手架的所有配置输出成一个.js文件（只能用来看，但不能直接在这个生成的文件里改配置）<code>vue inspect &gt; output.js</code></li>
</ol>
<h1 id="脚手架重要属性"><a href="#脚手架重要属性" class="headerlink" title="脚手架重要属性"></a>脚手架重要属性</h1><h2 id="ref属性"><a href="#ref属性" class="headerlink" title="ref属性"></a>ref属性</h2><p>在组件里面的this指向的是vc（组件实例对象）</p>
<h3 id="给html标签添加ref代替id"><a href="#给html标签添加ref代替id" class="headerlink" title="给html标签添加ref代替id"></a>给html标签添加ref代替id</h3><p>在vue中，用ref替代id，给哪个组件加ref，那么在vc中就会收集哪个元素，这样获取的时候直接用<code>this.$refs.名</code>即可获取真实的对应DOM元素<br>看下面例子对比</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">原本id=&quot;name&quot;</span><br><span class="line">获取需要document.getElementById(&#x27;name&#x27;)</span><br><span class="line">更改为</span><br><span class="line">ref=&quot;name&quot;</span><br><span class="line">获取用this.$refs.name即可</span><br></pre></td></tr></table></figure>
<h3 id="给组件加ref"><a href="#给组件加ref" class="headerlink" title="给组件加ref"></a>给组件加ref</h3><p>比如有子组件School，在template中使用这个组件，给它添加了ref<br><code>&lt;/School ref=&quot;sch &quot;&gt;</code><br>this.refs.sch<br>这样获取到的是School组件的实例对象，而不是真实的DOM结构（如果这里用id和document.getElementById，那么获取到的是真实的DOM元素）</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ol>
<li>被用来给元素或子组件注册引用信息(id的替代者)</li>
<li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象vc</li>
<li>使用方式:<br>打标识:<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;或&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code>获取<code>:this.$refs.xxx</code></li>
</ol>
<h2 id="props配置"><a href="#props配置" class="headerlink" title="props配置"></a>props配置</h2><p>如果一个子组件要使用多次，每个子组件要不同的数据，那么该怎么办呢<br>这里的逻辑类似微信转账，不仅要传递数据，还要对方确认接受数据，接受到的数据在组件实例VC上存着</p>
<h3 id="规定传递数据类型"><a href="#规定传递数据类型" class="headerlink" title="规定传递数据类型"></a>规定传递数据类型</h3><ol>
<li>简单声明接受（用的最多）<br><code>props:[&#39;name&#39;,&#39;age&#39;,&#39;sex&#39;]</code><br><img src="/postImgs/vue2/cli02.png" alt="简单声明接受"></li>
<li>简单声明接受如何传递数字<br>在使用组件传递数据的时候，都要用key&#x3D;”vvalue”d的形式，但是这时的value会默认是字符串形参，如果想要传数字，那么不能写<code>age=&quot;18&quot;</code>要写成<code>:age=&quot;18&quot;</code>这里用到了v-bind动态绑定</li>
<li>接受的同时对数据类型进行限制<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="title class_">String</span>,</span><br><span class="line"><span class="attr">age</span>:<span class="title class_">Number</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="title class_">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>详细的接受规范（用得少）<br>三个配置项type,required,default，后两个一般不同时出现在一个属性中<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line"><span class="attr">name</span>:&#123;</span><br><span class="line"><span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line"><span class="attr">required</span>: <span class="literal">true</span> <span class="comment">//是必须有的</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">age</span>:&#123;</span><br><span class="line"><span class="attr">type</span>:<span class="title class_">Number</span>,</span><br><span class="line"><span class="attr">default</span>:<span class="number">18</span> <span class="comment">//默认值</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">sex</span>:&#123;</span><br><span class="line"><span class="attr">type</span>:<span class="title class_">String</span>,</span><br><span class="line"><span class="attr">required</span>: <span class="literal">true</span> <span class="comment">//是必须有的</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>props收到的数据不允许更改<br>props是只读的，<strong>传入的数据值不能改</strong>（别人给你的转账你不能该金额），Vue底层会监视你对props的修改，发现会警告</li>
<li>要修改props传入的数据怎么做<br><strong>复制一份props的内容到data中，然后去修改data中复制来的数据</strong><br>如果data里有属性值，传入的数据也有属性值，那么props接受的数据是优先被接收放到vc上的，然后再去data里面配置数据，那么在data里面定义新的属性名，把对传入的数据操作后的结果作为属性值，把这个值放到组件上进行展示即可<br><img src="/postImgs/vue2/cli03.jpg" alt="要修改props传入的数据怎么做"></li>
<li>key,ref这种关键内容不能作为数据名进行传递</li>
</ol>
<h2 id="mixin混入配置项（-js）"><a href="#mixin混入配置项（-js）" class="headerlink" title="mixin混入配置项（.js）"></a>mixin混入配置项（.js）</h2><p>本质：复用配置，多组件共享一个配置<br>单独用一个.js文件定义，不要混合在其他地方</p>
<h3 id="混合与组件数据冲突"><a href="#混合与组件数据冲突" class="headerlink" title="混合与组件数据冲突"></a>混合与组件数据冲突</h3><p>（如data数据，mathods方法）如果本身有混合也有，那么用本身的；如果本身没有混合有，那么用混合的</p>
<h3 id="混合与组件都有生命周期"><a href="#混合与组件都有生命周期" class="headerlink" title="混合与组件都有生命周期"></a>混合与组件都有生命周期</h3><p>如果混合和组件都有生命周期钩子，那么都要，但是混合的生命周期钩子使用顺序在前</p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><ol>
<li>定义混合<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="title function_">data</span>(<span class="params"></span>)&#123;.....&#125;,</span><br><span class="line"><span class="attr">methods</span>:&#123;.....&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>使用混入<br>2.1. 全局混入:<code>Vue.minxin(混合名,混合名2)</code><br>2.2. 局部混入:mixins:[‘混合名’,’混合名2’]</li>
</ol>
<h2 id="插件（本质是对象）"><a href="#插件（本质是对象）" class="headerlink" title="插件（本质是对象）"></a>插件（本质是对象）</h2><p>用于增强vue，本质是包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。<br><strong>要先定义并开启插件，然后再使用vue，所以要放在创建vm上面应用插件（调用插件）</strong></p>
<h3 id="什么作用"><a href="#什么作用" class="headerlink" title="什么作用"></a>什么作用</h3><p>添加比如：全局过滤器、全局自定义指令、全局混入、给vue原型上添加方法</p>
<h3 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h3><p>建议放在src文件里建（plugins.js），不要混合在别处写<br>插件不是唯一的，可以应用多个插件<br><img src="/postImgs/vue2/cli04.jpg" alt="插件使用方法"><br><img src="/postImgs/vue2/cli05.jpg" alt="插件使用方法"></p>
<h4 id="视频小结"><a href="#视频小结" class="headerlink" title="视频小结"></a>视频小结</h4><p><img src="/postImgs/vue2/cli06.jpg" alt="插件使用方法视频小结"></p>
<h2 id="scoped属性-（解决样式冲突）"><a href="#scoped属性-（解决样式冲突）" class="headerlink" title="scoped属性 （解决样式冲突）"></a>scoped属性 （解决样式冲突）</h2><p>脚手架中编辑样式的小技巧<br>问题：在组件中写的样式最终都会被汇总到一起，会有类名冲突的可能，在App.vue中后引入的组件的样式会覆盖掉前面引入的同类名的样式<br>解决办法：<br>给组件的script标签添加scoped属性，变成<code>&lt;script scoped&gt;</code>即可<br><strong>注意App.vue组件中不适用，因为App.vue中写样式就代表几乎所有的都要用</strong></p>
<h3 id="如何在vue中使用less"><a href="#如何在vue中使用less" class="headerlink" title="如何在vue中使用less"></a>如何在vue中使用less</h3><p>在style标签上加<code>lang=&quot;less&quot;</code>，不写默认是css<br>要先断开vue服务，安装less-loader，如果安装失败，可能是兼容性问题，给less-loader降一个版本安装<br>先查看所有的less版本<code>view less-loader versions</code>然后安装，如<code>npm i less-loader@7</code>安装7开头的里面最新的版本</p>
<h1 id="浏览器本地存储（js内容，非vue）"><a href="#浏览器本地存储（js内容，非vue）" class="headerlink" title="浏览器本地存储（js内容，非vue）"></a>浏览器本地存储（js内容，非vue）</h1><h2 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h2><p>浏览器关闭数据依然存在，只有手动清除才会清除<br>F12–Application-Storage–Local Storage<br>浏览器本地存储，里面可以看到浏览器保存的本地数据缓存<br>右边的圆叉是清楚缓存的意思</p>
<h3 id="保存数据"><a href="#保存数据" class="headerlink" title="保存数据"></a>保存数据</h3><p>要在这里存储数据，里面的key和value都要是字符串形式<br><code>localStorage.setItem(&#39;key&#39;,&#39;value&#39;)</code><br>如果要存一个对象，如<br><code>let p =&#123;name:雾刃,age:23&#125;</code><br><code>localStorage.setItem(&#39;person&#39;,JSON.stringify(p))</code><br>这样存进去的是对象字符串</p>
<h3 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h3><p>读取基本的key:value：<br> <code>localStorage.getItem(&#39;key&#39;)</code><br>如果要读取的是对象字符串：<br><code>const result = localStorage.getItem(&#39;对象key&#39;)</code><br><code>console.log(JSON.parse(result))</code></p>
<h3 id="删除单个数据"><a href="#删除单个数据" class="headerlink" title="删除单个数据"></a>删除单个数据</h3><p><code>localStorage.removeItem(&#39;key&#39;)</code></p>
<h3 id="清空缓存"><a href="#清空缓存" class="headerlink" title="清空缓存"></a>清空缓存</h3><p>&#96;&#96;&#96;&#96;localStorage.clear()&#96;&#96;</p>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>如果读取的数据不存在，返回null<br>##sessionStorgae<br>浏览器关闭，数据就会清除<br>session：会话<br>F12–Application-Storage–Session Storage<br>语法和loaclStorage一样，把上面的loacl替换成session即可 </p>
<h1 id="组件的自定义事件（重点）"><a href="#组件的自定义事件（重点）" class="headerlink" title="组件的自定义事件（重点）"></a>组件的自定义事件（重点）</h1><p> 内置的js事件是给html用的，如keyup；<strong>这里的自定义事件是给组件用的</strong><br>组件的自定义事件是一种组件间的通行方式，<strong>适用于子组件－－&gt;父组件</strong><br><strong>在父组件里面给子组件绑定自定义事件，由子组件触发，事件的回调是在父组件上的方法里的，这样才能收到数据</strong><br>不适用于兄弟之间传递数据！</p>
<h2 id="组件的自定义事件－－三种方法实现子给父传递数据：props、组件的自定义事件、ref实现"><a href="#组件的自定义事件－－三种方法实现子给父传递数据：props、组件的自定义事件、ref实现" class="headerlink" title="组件的自定义事件－－三种方法实现子给父传递数据：props、组件的自定义事件、ref实现"></a>组件的自定义事件－－三种方法实现子给父传递数据：props、组件的自定义事件、ref实现</h2><h3 id="props方法实现"><a href="#props方法实现" class="headerlink" title="props方法实现"></a>props方法实现</h3><p>先回顾props方法实现子组件给父组件传递参数：<br>props补充（两个图，子组件给父组件传递数据，要通过父组件给子组件提供的方法）</p>
<h3 id="自定义事件－－-或v-on实现"><a href="#自定义事件－－-或v-on实现" class="headerlink" title="自定义事件－－@或v-on实现"></a>自定义事件－－@或v-on实现</h3><p>父组件给子组件的组件标签上绑定函数goodmorning，如<code>&lt;Student v-on:goodmorning=&quot;letItGo&quot;/&gt;</code><br>因为v-on在组件标签上，所以是给Student这个组件的实例对象vc上绑定goodmorning这个事件，然后在父组件的methods上添加demo(){函数}<br>这个goodmorning事件怎么触发呢？给谁绑定就谁来触发，所以找Student实例对象，在这里面借助<code>$emit</code>来触发goodmorning事件<br>具体到底该怎么做？<br>在子组件上给按钮绑定点击事件letItGo，在methods中实现letItGo，在letItGo中通过<code>this.$emit(&#39;goodmorning&#39;)</code>来触发父亲绑在组件实例身上的这个goodmorning事件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Student.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>＝&quot;<span class="attr">letItGo</span>&quot; &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">letItGo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;goodmorning&#x27;</span>,要传递的数据名)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在父组件中methods里用letItGo方法接收参数</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">App.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">Student</span> <span class="attr">v-on:goodmorning</span>=<span class="string">&quot;leiItGo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">letItGo</span>(<span class="params">key</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用自定义组件的方法拿到了子组件传过来的：&#x27;</span>key)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义事件－－ref实现（灵活性强）"><a href="#自定义事件－－ref实现（灵活性强）" class="headerlink" title="自定义事件－－ref实现（灵活性强）"></a>自定义事件－－ref实现（灵活性强）</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Studen.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>＝&quot;<span class="attr">sendStudent</span>&quot; &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>:&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">sendStudent</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;letMeSee&#x27;</span>,要传递的数据名)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">App.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">Student</span> <span class="attr">ref</span>=<span class="string">&quot;getStudent &quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">letMeSee</span>(<span class="params">key</span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用ref的方法拿到了子组件传过来的：&#x27;</span>key)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//App只要挂在完毕就调用</span></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">getStudent</span>.$on(<span class="string">&#x27;sendStudent&#x27;</span>,<span class="variable language_">this</span>.<span class="property">letMeSee</span>)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="三者小差距"><a href="#三者小差距" class="headerlink" title="三者小差距"></a>三者小差距</h3><p>如果有子要传递给父亲多个参数，建议父亲用自定义参数接受<code>...params</code><br>如方法名(name,…params){<br>console.log(‘收到了子组件传递的数据：’name,params)<br>}<br>其中name接受的是子组件传递的第一个参数，params数组接收的是子组件传递的其他参数<br>自定义组件更简单一点<br>，ref灵活性强，靠钩子函数，还可以有延迟的功能</p>
<h3 id="接刚才子传父，要只能传递一次该怎么做（一次性事件）"><a href="#接刚才子传父，要只能传递一次该怎么做（一次性事件）" class="headerlink" title="接刚才子传父，要只能传递一次该怎么做（一次性事件）"></a>接刚才子传父，要只能传递一次该怎么做（一次性事件）</h3><p>自定义事件<br>@或v-on写法：在前面的@事件名后加<code>.once</code><br>ref写法:把前面的<code>$on</code>改成<code>$once</code>  </p>
<h3 id="上面三种子传父数据的视频例子代码"><a href="#上面三种子传父数据的视频例子代码" class="headerlink" title="上面三种子传父数据的视频例子代码"></a>上面三种子传父数据的视频例子代码</h3><p>讲解前面的文字理解已经很清晰了，上面的理解了下面的就能看懂<br>（找资料，自定义事件）</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">App.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;，学生姓名是:&#123;&#123;studentName&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 通过父组件给子组件传递函数类型的props实现：子给父传递数据 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">School</span> <span class="attr">:getSchoolName</span>=<span class="string">&quot;getSchoolName&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第一种写法，使用@或v-on） --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &lt;Student @atguigu=&quot;getStudentName&quot; @demo=&quot;m1&quot;/&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- 通过父组件给子组件绑定一个自定义事件实现：子给父传递数据（第二种写法，使用ref） --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">Student</span> <span class="attr">ref</span>=<span class="string">&quot;student&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;show&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">import</span> <span class="title class_">Student</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Student&#x27;</span></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">import</span> <span class="title class_">School</span> <span class="keyword">from</span> <span class="string">&#x27;./components/School&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">name</span>:<span class="string">&#x27;App&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">components</span>:&#123;<span class="title class_">School</span>,<span class="title class_">Student</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">msg</span>:<span class="string">&#x27;你好啊！&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">studentName</span>:<span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">getSchoolName</span>(<span class="params">name</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App收到了学校名：&#x27;</span>,name)</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">getStudentName</span>(<span class="params">name,...params</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App收到了学生名：&#x27;</span>,name,params)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">studentName</span> = name</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">m1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;demo事件被触发了！&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">show</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="number">123</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">student</span>.$on(<span class="string">&#x27;atguigu&#x27;</span>,<span class="variable language_">this</span>.<span class="property">getStudentName</span>) <span class="comment">//绑定自定义事件</span></span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// this.$refs.student.$once(&#x27;atguigu&#x27;,this.getStudentName) //绑定自定义事件（一次性）</span></span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="selector-class">.app</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">background-color</span>: gray;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Student.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;student&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生姓名：&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生性别：&#123;&#123;sex&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前求和为：&#123;&#123;number&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>点我number++<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendStudentlName&quot;</span>&gt;</span>把学生名给App<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;unbind&quot;</span>&gt;</span>解绑atguigu事件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;death&quot;</span>&gt;</span>销毁当前Student组件的实例(vc)<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">name</span>:<span class="string">&#x27;Student&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">sex</span>:<span class="string">&#x27;男&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">number</span>:<span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;add回调被调用了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">number</span>++</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">sendStudentlName</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">//触发Student组件实例身上的atguigu事件</span></span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.$emit(<span class="string">&#x27;atguigu&#x27;</span>,<span class="variable language_">this</span>.<span class="property">name</span>,<span class="number">666</span>,<span class="number">888</span>,<span class="number">900</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// this.$emit(&#x27;demo&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// this.$emit(&#x27;click&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">unbind</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.$off(<span class="string">&#x27;atguigu&#x27;</span>) <span class="comment">//解绑一个自定义事件</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// this.$off([&#x27;atguigu&#x27;,&#x27;demo&#x27;]) //解绑多个自定义事件</span></span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// this.$off() //解绑所有的自定义事件</span></span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">death</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.$destroy() <span class="comment">//销毁了当前Student组件的实例，销毁后所有Student实例的自定义事件全都不奏效。</span></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="selector-class">.student</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">margin-top</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="给组件实例解绑自定义事件"><a href="#给组件实例解绑自定义事件" class="headerlink" title="给组件实例解绑自定义事件"></a>给组件实例解绑自定义事件</h2><p>给谁绑定的自定义事件找谁触发，解绑也一样，在组件实例vc上调用函数解绑</p>
<ol>
<li>解绑一个自定义事件：在被绑定的子组件上调用函数<code>this.  $off(</code>事件名&#96;)~解绑</li>
<li>解绑多个自定义事件：<code>this.$off([&#39;事件名1&#39;,&#39;事件名2&#39;])</code></li>
<li>暴力解绑所有自定义事件：<code>this.off()</code></li>
</ol>
<h3 id="销毁当前组件实例"><a href="#销毁当前组件实例" class="headerlink" title="销毁当前组件实例"></a>销毁当前组件实例</h3><ol start="4">
<li>销毁当前组件实例：<code>this.$destroy()</code><br>销毁后所有这个组件实例的自定义事件全部不奏效了<br>注意原生的事件不会被销毁</li>
</ol>
<h2 id="注意点和小结"><a href="#注意点和小结" class="headerlink" title="注意点和小结"></a>注意点和小结</h2><h3 id="在父组件上展示子组件传递过来的数据"><a href="#在父组件上展示子组件传递过来的数据" class="headerlink" title="在父组件上展示子组件传递过来的数据"></a>在父组件上展示子组件传递过来的数据</h3><p>想用插值表达式直接展示获取的数据，在data里面定义数据数据名，<strong>在父组件methons里</strong>给子组件提供的方法里面添加代码，数据名＝传递的数据<br>下面的有点长但仔细读还是好懂的：<br><strong>注意位置</strong>：尤其在用ref时，不要为了省代码在钩子函数里面进行赋值，因为钩子函数里面的this指向的可能是绑定事件对应的子组件，在使用箭头函数的情况下由于箭头函数没有自己的this，所以往外找找到父亲的此时回调函数里的this可以获取到子组件传递回父组件的数据然后赋值。为了避免出错，还是在methods里用this获取父组件收到的数据复制给数据然后再展示<br>（这也是vue2只允许有一个父亲App.vue的原因之一）</p>
<h3 id="小结（视频课小结截图）"><a href="#小结（视频课小结截图）" class="headerlink" title="小结（视频课小结截图）"></a>小结（视频课小结截图）</h3><p><img src="/postImgs/vue2/vue31.jpg" alt="组件的自定义事件小结截图"></p>
<h1 id="全局事件总线-bus"><a href="#全局事件总线-bus" class="headerlink" title="全局事件总线 $bus"></a>全局事件总线 <code>$bus</code></h1><p>可以实现任意组件间的通信</p>
<h2 id="理解全局事件总线"><a href="#理解全局事件总线" class="headerlink" title="理解全局事件总线"></a>理解全局事件总线</h2><p><strong>bus：总线。全局事件总线相当于一个能和各个组件建立联系的一个中间站，可以和各个组件之间连线，来实现任意组件间的通信</strong><br><strong>最规范的写法理解：要想各个组件都能用到，那么就要绑定在vm上，在vm的生命周期beforeCreate时期通过钩子函数创建总线，这样后续的vm和vc都可用this.$bus来连接到总线</strong><br>有弹幕这样说：原型上有个属性<code>$bus</code>，它的属性值为vm，这样每个vc都有<code>$bus</code>，通过<code>this.$bus</code>访问到这个vm<br><mark>先发起，再提供数据。<br>组件A想要接受数据，那么A要自己（在A中,methods里）给$bus绑定自定义事件，让事件的回调留在A组件上，这样A才能收到传过来的数据。<br>提供数据的组件B通过<code>this.$bus.$emit(&#39;A绑定的自定义事件名&#39;,要传递的数据)</code>来把数据传递给A<br>在A收到数据后，A组件要在beforeDestroy钩子上通过<code>this.$bus.$off(&#39;自定义事件名&#39;)</code>解绑当前组件所用到的事件<br></mark><br>总线在使用后需要销毁（用完要断开连接）<br><img src="/postImgs/vue2/cli10.jpg" alt="全局事件总裁"></p>
<h3 id="安装全局事件总线"><a href="#安装全局事件总线" class="headerlink" title="安装全局事件总线"></a>安装全局事件总线</h3><p><code>Vue.prototypr.$bus=this</code><br><mark>$bus及时当前应用的vm</mark></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">main.<span class="property">js</span>文件</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">……</span><br><span class="line"><span class="title function_">beforeCreate</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">prototypr</span>.<span class="property">$bus</span>=<span class="variable language_">this</span></span><br><span class="line">&#125;</span><br><span class="line">……</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="使用事件总线"><a href="#使用事件总线" class="headerlink" title="使用事件总线"></a>使用事件总线</h2><h3 id="接收数据："><a href="#接收数据：" class="headerlink" title="接收数据："></a>接收数据：</h3><p>A想要接收数据，要自己（在组件A上）给总线<code>$bus</code>绑定自定义事件，这样事件的回调还留在A组件自身接收收到的数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A.<span class="property">vue</span></span><br><span class="line"><span class="title function_">metods</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//回调函数，用来接收数据</span></span><br><span class="line">回调函数名(data)&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;自定义事件名&#x27;</span>,<span class="variable language_">this</span>.回调函数名)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="提供数据"><a href="#提供数据" class="headerlink" title="提供数据"></a>提供数据</h3><p>B想要给A提供数据，要调用A绑在总线$bus身上的自定义事件<br>通过<code>this.$bus.$emit(&#39;A绑定的自定义事件名&#39;,要传递的数据)</code>来把数据传递给A</p>
<h2 id="销毁事件"><a href="#销毁事件" class="headerlink" title="销毁事件"></a>销毁事件</h2><p>在A收到数据后，A组件要在beforeDestroy钩子上通过<code>this.$bus.$off(&#39;自定义事件名&#39;)</code>解绑当前组件所用到的事件<br><strong>一定要写自定义事件名，不然vc就被销毁了</strong></p>
<h1 id="消息订阅与发布"><a href="#消息订阅与发布" class="headerlink" title="消息订阅与发布"></a>消息订阅与发布</h1><p>实现各个组件之间的通信</p>
<h2 id="理解"><a href="#理解" class="headerlink" title="理解"></a>理解</h2><p>类似报纸的订阅与发布，需要数据的人订阅消息，提供订阅名和接收消息的回调函数，发布消息的人根据订阅名把数据传给订阅者的回调函数 </p>
<h2 id="实现订阅与发布"><a href="#实现订阅与发布" class="headerlink" title="实现订阅与发布"></a>实现订阅与发布</h2><p>一种组件间通信的方式，适用于任意组件间通信<br>使用第三方库完成pubsub-js（在任意框架都可以用）<br>安装<code>pubsub:npm i pubsub-js</code><br>引入:<code>import pubsub from &#39;pubsub-js&#39;</code><br>接收数据:A组件想接收数据，则在A组件中订阅消息，订阅的回调留在A组件自身<br><img src="/postImgs/vue2/cli11.jpg" alt="组件的自定义事件小结截图"></p>
<p>提供数据: pubsub.publish(‘xxx’,数据)<br>.最好在beforeDestroy钩子中，用 <code>Pubsub.unsubscribe(pid)</code>去<code>&lt;span style=&quot;color:red&quot;&gt;取消订阅。&lt;/span&gt;</code></p>
<h1 id="vue封装的过度与动画"><a href="#vue封装的过度与动画" class="headerlink" title="vue封装的过度与动画"></a>vue封装的过度与动画</h1><h2 id="动画transition"><a href="#动画transition" class="headerlink" title="动画transition"></a>动画transition</h2><p>想让谁有动画效果，就把谁用<code>transition</code>标签包裹，在css中用特定的样式类名写，如果没有给transition标签定义name，那么默认：<code>.v-enter-active（来）</code> 和v-leave-active（去）<code> </code>@keyframes 动画名&#96;&#96;<br>如果transition有name属性，那么属性名的.v要变成.name<br>给transition标签增加appear属性让一上来就有来的效果<br><img src="/postImgs/vue2/cli12.png" alt="动画transition"></p>
<h2 id="过度"><a href="#过度" class="headerlink" title="过度"></a>过度</h2><p><img src="/postImgs/vue2/cli13.png" alt="过度"></p>
<h2 id="集成第三方库-animate-css"><a href="#集成第三方库-animate-css" class="headerlink" title="集成第三方库 animate.css"></a>集成第三方库 animate.css</h2><p>animate.style<br>1.先准备好样式:<br>元素进入的样式:v-enter:进入的起点；v-enter-active:进入过程中；v-enter-to:进入的终点<br>元素离开的样式:v-leave:离开的起点；v-leave-active:离开过程中；v-leave-to:离开的终点；<br>2.使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置name属性:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;transition name=<span class="string">&quot;hello&quot;</span>&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>你好啊!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>若有多个元素需要过度，则需要使用:<code>&lt;transition-group&gt;</code>且每个元素都要指定 key 值</li>
</ol>
<h1 id="Vue脚手架配置代理"><a href="#Vue脚手架配置代理" class="headerlink" title="Vue脚手架配置代理"></a>Vue脚手架配置代理</h1><p>写在vue.config.js文件中</p>
<h2 id="官方文档代码"><a href="#官方文档代码" class="headerlink" title="官方文档代码"></a>官方文档代码</h2><p>vuecli官方文档有代码，直接CV使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">devServer</span>:&#123;</span><br><span class="line"><span class="attr">proxy</span>:&#123;</span><br><span class="line"><span class="string">&#x27;/atguigu&#x27;</span>:&#123;</span><br><span class="line">	<span class="attr">target</span>:<span class="attr">http</span>:<span class="comment">//localhost:&#x27;5000&#x27;，</span></span><br><span class="line">	<span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/atguigu&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line">	<span class="comment">//ws:true，//用于支持websocket</span></span><br><span class="line">	<span class="comment">// change0rigin:true //用于控制请求头中的host值</span></span><br><span class="line">&#125;，</span><br><span class="line"><span class="string">&#x27;/demo&#x27;</span>:</span><br><span class="line"><span class="attr">target</span>:<span class="attr">http</span>:<span class="comment">//localhost:&#x27;5001&#x27;,</span></span><br><span class="line"><span class="attr">pathRewrite</span>:&#123;<span class="string">&#x27;^/demo&#x27;</span>:<span class="string">&#x27;&#x27;</span>&#125;,</span><br><span class="line"><span class="comment">// ws:true，//用于支持websocket</span></span><br><span class="line"><span class="comment">//changeOrigin:true //用于控制请求头中的host值</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/vue2/cli13.jpg" alt="Vue脚手架配置代理"></p>
<h2 id="解读："><a href="#解读：" class="headerlink" title="解读："></a>解读：</h2><ol>
<li><code>/api</code>：请求前缀（在端口号后面第一个&#x2F;&#x2F;中间的地址）；如果是&#x2F;api（可以自定义）那么会走代理指定地址<code>target</code>的5050，没有就不走。</li>
<li>代理服务器配置：<code>pathRewrite｛&#39;^/api&#39;:&#39;&#39;｝</code>这个不能丢，丢了就找不到5050里面的资源了，让5050的地址资源没有前面的API前缀，顺利找到请求的资源</li>
<li><code>wa:true</code>用于支持websocket</li>
<li><code>changeOrigin:ture；</code>&#x2F;&#x2F;用于控制请求头中的host值</li>
</ol>
<p><img src="/postImgs/vue2/cli14.jpg" alt="Vue脚手架配置代理"></p>
<h1 id="slot插槽"><a href="#slot插槽" class="headerlink" title="slot插槽"></a>slot插槽</h1><h2 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h2><p><strong>一个组件内一共只写一个</strong><br>理解：页面A当中要使用组件B，想要在组件B里面放一个图片，这时A使用B的完整标签并把想要放的图片放进去<code>&lt;组件B名&gt;&lt;img&gt;&lt;/组件B名&gt;</code>，但是这个图片具体放在哪里需要会到组件B上用插槽标签来表示<code>&lt;slot&gt;&lt;/slot&gt;</code>，插槽里面的汉字在A页面没有传递具体的结构时会展示，有具体结构时会被替代<br><img src="/postImgs/vue2/cli14.png" alt="Vue脚手架配置代理"><br>slot里拿到的是app.vue里想传递的解析完之后的，如果css写在app.vue中，那么是标签解析完后带着样式一起放进slot里面的，如果把css写在组件B中，样式也可以展示<br><img src="/postImgs/vue2/cli15.png" alt="Vue脚手架配置代理"></p>
<h2 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h2><p>具有名字的插槽，组件结构中需要多个slot时候<br><strong>使用slot属性，能指名道姓地把A中的元素放到B中的插槽里</strong><br>在页面A要传递的结构上添加slot属性，在组件B的slot上添加name，和a上slot属性的属性值对应</p>
<h2 id="别忘了用tmplate"><a href="#别忘了用tmplate" class="headerlink" title="别忘了用tmplate"></a>别忘了用tmplate</h2><p>如果想要放多个标签组成的div到插槽中，不建议用div包裹，使用<code>&lt;templat slot=&quot;插槽名&quot;&gt;</code>或<code>&lt;template v-slot=插槽名&gt;</code>包裹，这样结构更好<br><mark>注意v-slot只能用在template上面，不能用在div上</mark><br><img src="/postImgs/vue2/cli17.jpg" alt="tmplate"></p>
<h2 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h2><p>作用域插槽也可以有名字，但没必要<br>想让使用者A告诉B想使用怎样的结构展示数据，数据在B里面<br>数据不再放在页面A上面，而是放到了组件B里面，但是根据数据生成的结构是不同的<br>使用者A要用template标签+scope属性<br><img src="/postImgs/vue2/cli17.png" alt="作用域插槽"></p>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><h2 id="Todo-list案例－－组件化编码流程（未完成）"><a href="#Todo-list案例－－组件化编码流程（未完成）" class="headerlink" title="Todo-list案例－－组件化编码流程（未完成）"></a>Todo-list案例－－组件化编码流程（未完成）</h2><p>实现对list清单的添加，选择，全选，删除功能。类似黑马的（小黑记事本）小例子<br><img src="/postImgs/vue2/cli08.jpg" alt="Todo-list案例"></p>
<h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><h4 id="分析能够拆分成几个组件"><a href="#分析能够拆分成几个组件" class="headerlink" title="分析能够拆分成几个组件"></a>分析能够拆分成几个组件</h4><p>组件定义：实现局部界面功能的代码与资源的集合对组件的拆分要落实到功能点上<br>如果觉得对拆分的组件起名很困难，那么可能组件拆分不合理<br>(1)最大的盒子＝＝＝App组件<br>(2)text输入框&#x3D;＝＝添加组件（Add或Header）（这里有个坑哦，Header命名不合法哦）<br>(3)展示清单列表＝＝＝内容组件（Todos或List）<br>(4)底下全选部分＝＝＝全选组件（Fooer）<br>(5) 想更到位，List里的todo应该拆分成小组件＝＝＝（Todo或Item）<br><img src="/postImgs/vue2/cli09.jpg" alt="Todo-list案例"></p>
<h4 id="实现静态组件"><a href="#实现静态组件" class="headerlink" title="实现静态组件"></a>实现静态组件</h4><p><strong>建各个组件文件，给各个组件添加名字，在App.vue中引入和注册</strong><br>注意不要在App.vue中引入Item组件，因为Item是List的子组件，在List组件里引入注册就好了<br>只考虑样式，使用组件实现静态页面的效果，不包含动态数据，不考虑交互效果<br><strong>记得要调整缩进，快捷键shift+tab</strong><br>大家都在用的样式放在App.vue里面，其他的样式各自给各自，记得后面的要加在<code>scoped</code></p>
<h4 id="展示动态数据"><a href="#展示动态数据" class="headerlink" title="展示动态数据"></a>展示动态数据</h4><p>把数据存到对应的容器里<br>谁展示数据，就把数据给谁－－List展示数据<br>每一个todo包含：<br>判断完成没有:done或completed<br>id一般用字符串<br>页面展示通过组件＋v-for<br>同时父组件要给子组件传递数据<br>子组件根据传过来的数据判断多选框是否勾选<br>看资料总结吧，这部分视频没仔细看<br>数据由父组件管理，子组件操作父组件的数据通过调用父组件下发的方法<br>上部分是不完善版本的TODOLIST<br><strong>注意数据名，数据类型，哪个数据保存在哪个组件里</strong></p>
<ol>
<li>数据存储：<br>在js中存一堆数据一般有两种选择：数组[]或对象{}<br>在此处每一个要做的事建议用数组包对象的形式存储[{属性如：id  name  标识做否},{},{}]</li>
<li>数据保存在那个组件：<br>简单粗暴：谁用数据就放在谁里面<br>在脚手架中修改代码保存后，会自动重新编译（ctrl+s）后重新编译<br>在vscode中开启终端<br>建议安装插件 Vetur –Pine Wu<br>脚手架里面组件可以用自闭合标签<br>找不到模块可能是路径写错了<br>如果在App中引入爆红，可能是引入的组件名不合法<br>vue鼓励语义化的多单词的大驼峰的组件名<br>注意代码规范性，语义化要高，注解要多写</li>
</ol>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="vue项目中常用的两个ajax库"><a href="#vue项目中常用的两个ajax库" class="headerlink" title="vue项目中常用的两个ajax库"></a>vue项目中常用的两个ajax库</h2><p>vue插件库 vue-resourece<br>类似axios库，但是这个库年久失修了，了解，最重要的还是axios<br>先安装，然后在main.js中引入插件使用插件</p>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>web存储</tag>
        <tag>组件</tag>
        <tag>vue脚手架</tag>
        <tag>VueCli</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue--Vuex+路由(2025)</title>
    <url>/2025/03/13/20-vuex(2025new)/</url>
    <content><![CDATA[<h1 id="学习来源"><a href="#学习来源" class="headerlink" title="学习来源"></a>学习来源</h1><p>这篇笔记是根据尚硅谷vue2+3课程记的笔记，工作原理部分很详细；<strong>2024版的vuex记得也很清楚，复习的时候建议把2024版本也仔细看看，会很有收获的</strong></p>
<h1 id="认识vuex"><a href="#认识vuex" class="headerlink" title="认识vuex"></a>认识vuex</h1><p>vuex是一个vue状态管理工具，是一个插件，帮我们管理 vue 通用的数据(多组件共享的数据)（读&#x2F;写）<br>也是一个组件间通信的方式，适用于任意组件间通信<br>（tree shaking：掉落的枯枝败叶 ）</p>
<h2 id="什么时候使用Vuex"><a href="#什么时候使用Vuex" class="headerlink" title="什么时候使用Vuex"></a>什么时候使用Vuex</h2><p>多组件依赖同一个状态（数据）<br>来自不同组件的行为需要改变同一个状态（数据）<br><mark>简而言之，一个数据要被多个组件使用修改，那就放到vuex里共享它</mark></p>
<h1 id="vuex工作原理"><a href="#vuex工作原理" class="headerlink" title="vuex工作原理"></a>vuex工作原理</h1><p><img src="/postImgs/vue2/vuex.jpg" alt="vuex工作原理"><br><strong>（感觉记的挺清楚的，忘记的时候仔细读一读）</strong><br>vuex有三个重要的组成部分：Actions（动作，行为）；Mutations（加工，维护）；State（状态，数据）<br>动作、加工、状态这三个对象需要一个store进行管理，所以调用方法需要<code>store. </code>； 同时这三个部分也是vex的组成部分<br>把数据交给vuex管理就是交给state进行保管，<strong>state本质是<code>object对象&#123;有很多key:vakue,sum:n&#125;</code></strong><br>vue components（组件），在组件里面调用API：dispatch(‘动作类型’,值)，接着来到actions，里面有动作类型对应的函数，引起这个函数的调用，收到传递过来的值，函数调用commit（提交）到Mutations（它也是Object对象，里面会有动作类型对应的函数）再调用这个函数，然后Mutate到State修改保存的状态，重新解析组件继续render（渲染）到组件更新数据<br>如果动作需要发送ajax请求，会在actions进行<br>如果dispath的时候知道函数，值和对应的行为，<strong>不需要调用服务器时候，没有需要判断的业务逻辑时候</strong>，那么可以在组件里直接调用commit把东西交给Mutations<br><img src="/postImgs/vue2/vuex02.jpg" alt="vuex工作原理"><br>也可以类比客人(组件)；服务员(Actions)；后厨(Mytations)；菜(State)。有些时候服务员可以省略</p>
<h2 id="使用过程"><a href="#使用过程" class="headerlink" title="使用过程"></a>使用过程</h2><p>安装&#x3D;&gt;使用vuex＝&gt;这样创建vm就会有仓库store配置项＝&gt;用vc可以调用仓库<br>注意vue2中要用vuex3，vue3要用vuex4<br>在src文件夹创建文件夹vuex，创建index.js文件，这个文件用于创建Vuex中最为核心的store<br>在里面准备它管理的三个对象</p>
<h2 id="代码引入过程"><a href="#代码引入过程" class="headerlink" title="代码引入过程"></a>代码引入过程</h2><p><img src="/postImgs/vue2/vuex03.jpg" alt="vuex工作原理"></p>
<h1 id="深度理解vuex"><a href="#深度理解vuex" class="headerlink" title="深度理解vuex"></a>深度理解vuex</h1><h2 id="求和案例-vue–vuex对比"><a href="#求和案例-vue–vuex对比" class="headerlink" title="求和案例 vue–vuex对比"></a>求和案例 vue–vuex对比</h2><h3 id="用Vue实现求和小例子"><a href="#用Vue实现求和小例子" class="headerlink" title="用Vue实现求和小例子"></a>用Vue实现求和小例子</h3><p>**一个强制转换符<code>.number</code>**收集到的强制往number类型转换，避免加法之后结果变成字符串的情况</p>
<h2 id="用vuex实现求和小例子（重要仔细读）"><a href="#用vuex实现求和小例子（重要仔细读）" class="headerlink" title="用vuex实现求和小例子（重要仔细读）"></a>用vuex实现求和小例子（重要仔细读）</h2><p>把data里面的共享的数据<code>sum=0</code>写在index.js的store里；把methods里的每个方法写在indxe.js的actions里，actions的函数收到两个参数，第一个官方文档叫<code>context</code>上下文对象，我们要用的是context.commit(‘函数名’,value)，第二个参数value（在开发中mutations里的函数名要大写，所以context.commit的第一个参数函数名也是要大写的 ）<br>页面模板字符串里面能看到vc身上的所有东西<br>业务逻辑要求判断都写在actions里（要求都告诉服务员）<br>count.vue中，有两个<strong>简单的加减需求不需要actions进行加工，所以可以直接给mutations（如果没有网络请求判断可以直接交给mutations）</strong><br><strong>commit是和mutations对话</strong><br><strong>dispatch是和actions对话</strong><br>看下图count.vue代码<br><img src="/postImgs/vue2/vuex04.jpg" alt="vuex实现求和小案例"><br>对应index.js代码（视频案例）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vuex中最为核心的store</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//应用Vuex插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//准备actions——用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">	<span class="comment">/* jia(context,value)&#123;</span></span><br><span class="line"><span class="comment">		console.log(&#x27;actions中的jia被调用了&#x27;)</span></span><br><span class="line"><span class="comment">		context.commit(&#x27;JIA&#x27;,value)</span></span><br><span class="line"><span class="comment">	&#125;,</span></span><br><span class="line"><span class="comment">	jian(context,value)&#123;</span></span><br><span class="line"><span class="comment">		console.log(&#x27;actions中的jian被调用了&#x27;)</span></span><br><span class="line"><span class="comment">		context.commit(&#x27;JIAN&#x27;,value)</span></span><br><span class="line"><span class="comment">	&#125;, */</span></span><br><span class="line">	<span class="title function_">jiaOdd</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;actions中的jiaOdd被调用了&#x27;</span>)</span><br><span class="line">		<span class="keyword">if</span>(context.<span class="property">state</span>.<span class="property">sum</span> % <span class="number">2</span>)&#123;</span><br><span class="line">			context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">jiaWait</span>(<span class="params">context,value</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;actions中的jiaWait被调用了&#x27;</span>)</span><br><span class="line">		<span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">			context.<span class="title function_">commit</span>(<span class="string">&#x27;JIA&#x27;</span>,value)</span><br><span class="line">		&#125;,<span class="number">500</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//准备mutations——用于操作数据（state）</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">	<span class="title function_">JIA</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mutations中的JIA被调用了&#x27;</span>)</span><br><span class="line">		state.<span class="property">sum</span> += value</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="title function_">JIAN</span>(<span class="params">state,value</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mutations中的JIAN被调用了&#x27;</span>)</span><br><span class="line">		state.<span class="property">sum</span> -= value</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//准备state——用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">	<span class="attr">sum</span>:<span class="number">0</span> <span class="comment">//当前的和</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">	actions,</span><br><span class="line">	mutations,</span><br><span class="line">	state,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="vuex调试工具"><a href="#vuex调试工具" class="headerlink" title="vuex调试工具"></a>vuex调试工具</h2><p>在F12开发者工具中，vue部分可以看vuex，绿色的钟表选成vuex，红色的是选择区，蓝色的的展示区，有vuex动作进行这里会展示。<br><img src="/postImgs/vue2/vuex05.jpg" alt="vuex调试工具"><br><img src="/postImgs/vue2/vuex06.jpg" alt="vuex调试工具"></p>
<ul>
<li>在红色选择区的每个动作上有小按钮：<br>时钟小按钮标识会到这个动作发生时的时候<br>禁止小按钮标识清空，这次动作不要了，会到它的上一次<br>下载按钮标识合并，前面的动作会合并在一起<br>绿色条在哪儿页面的数据就展示在哪里。</li>
<li>搜索框最右边的三个按钮：<br>红色的按钮标识：记录，如果点它（变成灰色），那么后续的各种动作都不会再记录了（一般不会点它）<br>中间的禁止按钮：清空页面动作<br>左边的下载按钮：把页面的所以动作都合并到Base State中</li>
<li>蓝色展示区右上角的按钮：<br>倒数第二个导出按钮，最后一个导入按钮</li>
</ul>
<h2 id="理解context-dispatch"><a href="#理解context-dispatch" class="headerlink" title="理解context.dispatch()"></a>理解context.dispatch()</h2><p>context.dispatch()用来解决actions里一个逻辑过于复杂的情况，如下图，最先响应的是jiaOdd()，但是它里面逻辑太多了所以依靠demo1解决，demo1也太多了依靠demo2解决，demo2解决完了最后的东西commit给厨子mutation<br><img src="/postImgs/vue2/vuex07.jpg" alt="理解context.dispatch()"></p>
<h2 id="为什么要把逻辑放到actions中"><a href="#为什么要把逻辑放到actions中" class="headerlink" title="为什么要把逻辑放到actions中"></a>为什么要把逻辑放到actions中</h2><p>为什么要把处理逻辑的东西放到index.js的actios中而不在methods里判断？因为逻辑可能会非常复杂，调用接口判断等，适合放在index.js中统一处理</p>
<h1 id="一些配置项"><a href="#一些配置项" class="headerlink" title="一些配置项"></a>一些配置项</h1><h2 id="getters配置项"><a href="#getters配置项" class="headerlink" title="getters配置项"></a>getters配置项</h2><p>用于对state中的数据进行加工,当state中的数据需要加工再使用时<br>里面的函数类似计算属性，收到参数state，使用return返回值<br>（类似computed和data）</p>
<h2 id="mapStates和-mapGetters（简化代码）"><a href="#mapStates和-mapGetters（简化代码）" class="headerlink" title="_mapStates和_mapGetters（简化代码）"></a>_mapStates和_mapGetters（简化代码）</h2><p>把计算属性叫什么名字和state里面这个东西叫什么交给<code>mapState</code>，<strong>帮忙生成下图这样带有state的代码</strong><br><img src="/postImgs/vue2/vuex08.jpg" alt="_mapStates简化代码"><br>简化代码如下图<br><img src="/postImgs/vue2/vuex09.jpg" alt="_mapStates简化代码"><br>这一行代码还可以简写成<strong>数组写法</strong>计算属性名和读取的名必须一样，就算是一个也要写成数组写法；上图的是对象写法<br><code>...mapState([&#39;sum&#39;,&#39;school&#39;,&#39;subject&#39;])</code></p>
<h2 id="mapActions和mapMatutions"><a href="#mapActions和mapMatutions" class="headerlink" title="mapActions和mapMatutions"></a>mapActions和mapMatutions</h2><h2 id="四个map方法图片小结"><a href="#四个map方法图片小结" class="headerlink" title="四个map方法图片小结"></a>四个map方法图片小结</h2><p><img src="/postImgs/vue2/vuex10.jpg" alt="四个map方法图片小结"></p>
<h2 id="vuex的模块化-命名空间编码"><a href="#vuex的模块化-命名空间编码" class="headerlink" title="vuex的模块化+命名空间编码"></a>vuex的模块化+命名空间编码</h2><p>（这部分没听明白，看总结，要用的时候重看视频讲解115-116）<br>一个部分建立一个Options，里面放这个部分用到的actions，mutations，state，getters，在下面创建并暴露store<br><img src="/postImgs/vue2/vuex11.png" alt="vuex的模块化+命名空间编码"><br>上述不完善还不能用，要写命名空间<code>namespace:true;</code>才能用<code>...mapState</code><br><img src="/postImgs/vue2/vuex12.png" alt="vuex的模块化+命名空间编码"></p>
<p>在组件中要使用方法的时候，必须说明是index.js哪个部分里面的方法</p>
<h1 id="路由-routr"><a href="#路由-routr" class="headerlink" title="路由 routr"></a>路由 routr</h1><p><mark>路由是一组对应关系，一组key+value＝route ，多个路由route需要经过路由器router的管理</mark></p>
<p>vue-router是一个插件库，专门用来实现SPA应用<br>路由为了实现单页面应用（SPA）：整个应用只有一个完整的页面，在页面中，展示区根据导航区的选择而变化，导航区不变，页面不刷新，路径变化<br><img src="/postImgs/vue/router01.jpg" alt="_mapStates简化代码"><br><strong>数据需要通过ajax请求获取</strong> </p>
<h2 id="前端路由和后端路由"><a href="#前端路由和后端路由" class="headerlink" title="前端路由和后端路由"></a>前端路由和后端路由</h2><p>key为路径，value可能是function或component</p>
<h3 id="后端路由（value-function）"><a href="#后端路由（value-function）" class="headerlink" title="后端路由（value&#x3D;function）"></a>后端路由（value&#x3D;function）</h3><p>用于处理客户端提交的请求，服务器收到一个请求时，根据请求路径找到匹配的函数来处理请求，返回响应数据</p>
<h3 id="前端路由（value-component）"><a href="#前端路由（value-component）" class="headerlink" title="前端路由（value&#x3D;component）"></a>前端路由（value&#x3D;component）</h3><p>用于展示页面内容，当浏览器的路径变化时，对应的组件会进行展示</p>
<h1 id="使用路由"><a href="#使用路由" class="headerlink" title="使用路由"></a>使用路由</h1><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><ol>
<li>安装路由<br>npm安装vue-router 注意vue2和vue3对应不同的vue-router版本<br><code>npm i vue-router</code></li>
<li>main.js中引用和应用VueRouter插件<br>在main.js引用<code>import VueRouter form &#39;vue-router&#39;</code>并引用<code>Vue.use(VueRouter)</code></li>
<li>创建路由器文件夹router<br>在文件夹创建index.js文件，这个文件专门用于创建整个应用的路由器<br>在这里引入VueRouter和单个路由组件，路由自建开发中习惯放入<code>pages或views</code>文件夹<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 该文件专门用于创建整个应用的路由器</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并暴露一个路由器</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">	<span class="attr">routes</span>:[</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">About</span></span><br><span class="line">		&#125;,</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="attr">path</span>:<span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">			<span class="attr">component</span>:<span class="title class_">Home</span></span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>在main.js中引用路由器router<br><code>import route from &#39;./route&#39;</code><br>完整的main.js<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//引入App</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="comment">//引入VueRouter</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="comment">//引入路由器</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭Vue的生产提示</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment">//应用插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">	<span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">	<span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">	<span class="attr">router</span>:router</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>做完上述步骤保存，页面会出现&#x2F;#&#x2F;并且不报错说明成功</li>
<li>借助router-link + to实现路由切换<br>router-link最终会借助vue-router的库转化成a标签（所以如果之前给a标签写了css，这个css也能作用在router-link上）<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list-group&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 原始html中我们使用a标签实现页面的跳转 --&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- &lt;a class=&quot;list-group-item active&quot; href=&quot;./about.html&quot;&gt;About&lt;/a&gt; --&gt;</span></span><br><span class="line">     <span class="comment">&lt;!-- &lt;a class=&quot;list-group-item&quot; href=&quot;./home.html&quot;&gt;Home&lt;/a&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Vue中借助router-link标签实现路由的切换 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>router-view展示路由<br><code>&lt;router-view&gt;&lt;/router-view&gt;</code>来指定展示位置</li>
</ol>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ol>
<li>开发者路由组件放在pages或views文件夹下，一般普邮放在components文件夹下</li>
<li>不用的组件（切换没用到的）默认被销毁，需要的时候再去挂载</li>
<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息</li>
<li>整个应用只有一个router，可以通过组件<code>的$router</code> 属性获得</li>
</ol>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vuex</tag>
        <tag>vuex工作原理</tag>
      </tags>
  </entry>
  <entry>
    <title>Git笔记</title>
    <url>/2024/06/01/21-Git%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<h2 id="认识Git"><a href="#认识Git" class="headerlink" title="认识Git"></a>认识Git</h2><p>git是分布式版本控制系统<br>Git好像一个档案馆，能够记录你在哪个时候做了哪些内容<br>分布式：在各自的档案馆做各自的内容，可以用自己的和别人的合并</p>
<h3 id="git操作流程"><a href="#git操作流程" class="headerlink" title="git操作流程"></a>git操作流程</h3><p>git的通用操作流程如下图<br> <img src="/./postImgs/other/git01.png" alt="git操作流程"></p>
<ol>
<li>版本库.git文件<br>当使用git管理文件时，成功<code>git init</code>后文件夹中会出现一个.git文件，这个称为版本库，里面有git相关配置</li>
<li>工作区<br>本地电脑存放项目文件的位置</li>
<li>暂存区（Index&#x2F;Stage）<br>暂时存放文件的地方，通常使用add命令将工作区的文件添加到暂存区里</li>
<li>本地仓库<br>使用commit命令可以将暂存区中的文件添加到本地仓库中</li>
<li>远程仓库<br>比如gitee或github里创建的托管我们项目的仓库就是远程仓库<br>我觉得这个图非常棒：<br> <img src="/./postImgs/other/git02.png" alt="git操作流程"></li>
</ol>
<h2 id="安装配置"><a href="#安装配置" class="headerlink" title="安装配置"></a>安装配置</h2><p><a href="https://git-scm.com/download/">https://git-scm.com/download/</a> </p>
<h3 id="一些配置"><a href="#一些配置" class="headerlink" title="一些配置"></a>一些配置</h3><ul>
<li>设置用户信息<strong>必须</strong><br>windows桌面右键点击Git Bush 打开<br>首次使用添加身份说明，输入下面两行配置名字和邮箱：<br><code>git config --global user.name &quot;melon&quot;</code><br><code>$ git config --global user.email &quot;1305116856@qq.com&quot;</code></li>
<li>解决乱码问题<br><code>$ git config --global core.quotepath false</code><br>export LANG&#x3D;”zh_CN.UTF-8”<br>export LC_ALL&#x3D;”zh_CN.UTF-8”</li>
<li>配置git命令输出为彩色的<br><code>git config --global color.ui auto;</code></li>
</ul>
<h2 id="使用命令"><a href="#使用命令" class="headerlink" title="使用命令"></a>使用命令</h2><h3 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h3><p>要使用Git对我们的代码进行版本控制，首先需要获得本地仓库</p>
<ul>
<li>本地仓库</li>
</ul>
<ol>
<li>在电脑的任意位置创建一个空目录(例如test)作为我的本地Git仓库</li>
<li>进入这个目录中，点击右键打开Git bash窗口</li>
<li>执行命令<code>git init</code></li>
<li>如果创建成功后可在文件夹下看到隐藏的.git目录。</li>
</ol>
<ul>
<li>克隆仓库<br>在gitee或者github上新建仓库然后使用命令拉取到自己的电脑上</li>
</ul>
<p>在创建好后这个仓库的所有文件都是未跟踪的</p>
<h3 id="状态与提交版本"><a href="#状态与提交版本" class="headerlink" title="状态与提交版本"></a>状态与提交版本</h3><ol>
<li>跟踪<br>跟踪文件<code>$ git add &lt;name&gt;</code><br>跟踪当前目录 <code>$ git add .</code></li>
<li>取消跟踪<br>rm删除<code>$ git rm &lt;name&gt;</code><br>保留但不跟踪<code>$ git rm-cache &lt;name&gt;</code></li>
<li>文件状态修改<br>修改后缓存 &#x2F; 取消缓存<br>将修改文件缓存<code>git add &lt;file-name&gt;</code><br>取消缓存<code>git reset HEAD &lt;name&gt;</code><br>提交缓存的修改<code>git commit</code></li>
<li>git commit 具体操作：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">git commit 进入提交界面, </span><br><span class="line">    按<span class="string">&quot; i &quot;</span>键进入输入模式后输入本次提交详情,</span><br><span class="line">    然后esc退出编辑模式, 按<span class="string">&quot; : &quot;</span>进入命令栏, 输入<span class="string">&quot;wq&quot;</span>保存并退出.</span><br></pre></td></tr></table></figure>
或<code>git commit -m &#39; 你对提交内容的描述 &#39;</code><strong>（简单用的多）</strong></li>
<li>取消提交<br>  使用该命令取消本次提交, 但是首次提交不可撤回.<code>git reset head~ --soft</code></li>
<li>查看文件状态<code>git status</code><br>红色代表 已修改, 未暂存<br>绿色代表 已暂存<br>提交后, 则不显示</li>
<li>更详细地查询修改<code>git diff</code></li>
<li>查看提交历史信息<code>git log</code></li>
<li>查看所有分支的提交<code>git log --all</code></li>
<li>图形化查看所有分支的提交<br>  查看所有分支的提交结合graph食用更佳:<br><code>git log --all --graph</code></li>
</ol>
<h3 id="基础操作指令（以前笔记）"><a href="#基础操作指令（以前笔记）" class="headerlink" title="基础操作指令（以前笔记）"></a>基础操作指令（以前笔记）</h3><p>基础命令和linux一样<br>Git工作目录下对于文件的修改(增加、删除、更新)会存在几个状态，这些修改的状态会随着我们执行Git的命令而发生变化</p>
<ol>
<li><p>先创建一个文件：可以输入指令<br>  mujiu@Melon MINGW64 &#x2F;d&#x2F;melon (master)<br>  $  touch file01.txt<br>  也可以鼠标右键直接创建</p>
</li>
<li><p>从工作区放到暂存区（add指令）<br>  输入指令 git add +文件名 或 git add .（注意空格！）</p>
</li>
<li><p>查看状态：输入指令git status</p>
</li>
<li><p>放到仓库(注意空格！)<br>  git commit -m “add file01”其中“add file01”是注释，方便以后查看，写什么自己定</p>
</li>
<li><p>查看提交到哪里，指令git log</p>
</li>
<li><p>对现有的文件进行修改 指令vi file01 （vi+文件名或者右键编辑文件也可以）<br>  进入编辑区域 输入 update count&#x3D;1 表示第一次更新<br>  输入不了的按下“i”<br>  保存：ESC+:wq<br>  退出编辑区域：ESC+连着按两次大写字母Z<br>  编辑完再git add . 提交到暂存区，再继续git commit -m “add file01”提交到仓库<br>  然后git log 查看记录，现在显示有两次修改记录</p>
</li>
</ol>
<h3 id="git-log参数"><a href="#git-log参数" class="headerlink" title="git log参数"></a>git log参数</h3><blockquote>
<p>命令形式: <code>git log [option]</code><br>–all显示所有分支<br>–pretty&#x3D;oneline将提交信息显示为一行<br>–abbrev-commit使得输出的commitld更简短<br>–graph 以图的形式显示</p>
</blockquote>
<p>（建议在家目录的.gitconfig中设置别名）</p>
<h3 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h3><p>作用：版本切换<br>命令格式： <code>git reset –hard commitID</code><br>commitID 可以使用git-log或者git log指令查看</p>
<ul>
<li>如何查看已经删除的记录：<br>git reflog 这个指令可以看到已经删除的提交记录</li>
</ul>
<p>前面黄色的编号选中就是默认复制了，要贴贴按住滚轮即可，不要ctrl+c&#x2F;v</p>
<ul>
<li><p>如果想再还原回去，git resert –hard 再贴前面的版本号1b37cbd即可</p>
</li>
<li><p>如果clear了没有前面的编号记录了，那么输入git reflog ，会把前面所有的操作显示出来，从这里面分析拿编号</p>
</li>
<li></li>
</ul>
<h3 id="添加文件至忽略列表"><a href="#添加文件至忽略列表" class="headerlink" title="添加文件至忽略列表"></a>添加文件至忽略列表</h3><p>如果已经有多个文件，但有的文件想提交有的文件不想被提交，那么需要创建忽略列表</p>
<ul>
<li><p>创建忽略列表：touch .gitignore 然后vi .gitignore 进入编辑页</p>
<blockquote>
<p>如果输入 *.a那么以a结尾的文件都会添加进来<br>vi .gitignore后，按insert键编辑，编辑好后，按Esc退出编辑，再按Shift和冒号<code>:</code>保存并退出编辑<br>mv移动文件  在同一个文件夹里移动就可以用来改名</p>
</blockquote>
</li>
</ul>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><h3 id="分支-master"><a href="#分支-master" class="headerlink" title="分支 master"></a>分支 master</h3><p>几乎所有的版本控制系统都以某种形式支持分支。<br>使用分支意味着你可以把你的工作从开发主线上分离开来进行重大的Bug修改、开发新的功能，以免影响开发主线<br>为了让每个人的开发互不影响，HEAD-&gt;当前分支</p>
<ul>
<li>git buanch （查看本地分支）</li>
<li>git buancu 加分支名 (创建分支)</li>
<li>git checkout 加分支名（切换分支）</li>
<li>git checkout -b 加分支名(创建并切换到一个不存在的分支)</li>
<li>git merge 加分支名称 （合并分支）<br>首先切换到那个分支，再写代码合并</li>
<li>git branch -D -b1 （强制删除非当前分支）</li>
</ul>
<h2 id="分支合并"><a href="#分支合并" class="headerlink" title="分支合并"></a>分支合并</h2><ol>
<li>无冲突合并<br>  <code>git merge 要合并的分支</code></li>
<li>分支冲突合并<br><code>gerge confit` 将 分支2 合并到 master分支 时, 与 分支1 冲突了. 原因是 分支1 和 分支2 修改了同一处内容 git status 查看哪里有冲突 vi 到冲突文件中, 选择一个分支的内容保留下来, 保存退出 </code>git add 文件名<code> </code>git commit -m ‘提交描述’<code> </code>git log –all –graph&#96;&#96; 查看合并状态</li>
</ol>
<h2 id="推拉与远程跟踪分支"><a href="#推拉与远程跟踪分支" class="headerlink" title="推拉与远程跟踪分支"></a>推拉与远程跟踪分支</h2><ol>
<li>推送<br><code>git push 仓库名 分支名</code><br>第一次使用 -u 指定推送目标后, 此后可直接使用git push：<br><code>git push -u仓库名 分支名</code></li>
<li>拉取（这里我看博客好多不同公司要求不一样，还有可能出面试题<br><code>git fetch</code></li>
<li>远程分支本地化<br>  <code>git checkout</code> 远程分支<br>  <code>git checkout -b</code> 本地分支名 远程分支<br>  <code>git checkout --track</code> &#96;&#96;远程分支</li>
</ol>
<h2 id="贮藏功能"><a href="#贮藏功能" class="headerlink" title="贮藏功能"></a>贮藏功能</h2><ol>
<li>储藏分支<br>代码写到一半别的分支的活要做, 要切换到其他分支，但是这是不允许的会导致工作区变脏<br>此时可以把当前分支修改的东西储藏起来再切换：<code>git stash</code></li>
<li>恢复藏匿分支<br><code>git stash apply</code></li>
<li>多次存储<br>回看存储记录<code>git stash list</code><br>恢复指定（某次）记录<code>git stash apply stash@&#123;记录号&#125;</code><br>恢复并删除记录<code>git stash pop</code><br>恢复并删除最近一次记录<code>git stash pop</code><br>删除指定记录<code>git stash drop @stash&#123;记录号&#125;</code></li>
</ol>
<h2 id="gitignore文件"><a href="#gitignore文件" class="headerlink" title=".gitignore文件"></a><code>.gitignore</code>文件</h2><p>.gitignore 是一个文本文件，用于告诉 Git 忽略指定的文件或目录，避免这些文件被提交到版本控制中。它主要用于：</p>
<ul>
<li>忽略编译生成的文件（如 .class、.exe、.dll 等）。</li>
<li>忽略临时文件（如日志文件 .log、缓存文件 .tmp 等）。</li>
<li>忽略敏感文件（如配置文件中的密码、环境变量文件等）。</li>
<li>忽略操作系统或编辑器生成的文件（如 Thumbs.db、.DS_Store 等）</li>
</ul>
<h2 id="gitignore语法详解"><a href="#gitignore语法详解" class="headerlink" title=".gitignore语法详解"></a><code>.gitignore</code>语法详解</h2><ol>
<li>以<code>#</code>开头的行是注释，不会被 Git 解析</li>
<li>忽略文件或目录:</li>
</ol>
<ul>
<li>忽略所有扩展名的文件：<code>*.log</code>,<code>*.tmp</code></li>
<li>忽略特定文件：<code>temp.txt</code>，<code>config.local.json</code></li>
<li>忽略目录：<br><code>build/</code>  # 忽略 build 目录及其所有内容<br><code>node_modules/</code>  # 忽略 node_modules 目录</li>
</ul>
<ol start="3">
<li>通配符</li>
</ol>
<ul>
<li><code>*</code>：匹配任意字符（但不跨目录）<br><code>*.log</code>  # 忽略所有 .log 文件<br><code>docs/*.md </code> # 忽略 docs 目录下的所有 .md 文件</li>
<li>?（问号）：匹配单个字符</li>
<li>[abc]：匹配方括号内的任意一个字符</li>
<li>（感叹号）：反向规则（即排除忽略）</li>
</ul>
<ol start="4">
<li>路径匹配<ul>
<li>以<code>/</code>开头：匹配根目录下的文件或目录</li>
<li>以 <code>/ </code>结尾：仅匹配目录（不包含文件）</li>
<li><code>**</code>：匹配多级目录</li>
</ul>
</li>
</ol>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>(1) 已跟踪文件的忽略问题<br>如果某个文件已经被 Git 跟踪（已提交到仓库），修改 .gitignore 是不会让它停止跟踪的。需要先删除缓存</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">rm</span> -r --cached .  <span class="comment"># 删除所有已跟踪文件的缓存</span></span><br><span class="line">git add .            <span class="comment"># 重新添加文件（未被 .gitignore 忽略的文件）</span></span><br><span class="line">git commit -m <span class="string">&quot;更新忽略规则&quot;</span></span><br></pre></td></tr></table></figure>



<h1 id="学习参考"><a href="#学习参考" class="headerlink" title="学习参考"></a>学习参考</h1><ol>
<li>这个视频讲的特别好！&#x3D;&gt;【B站30分钟弄懂所有工作Git必备操作 &#x2F; Git 入门教程】 [<a href="https://www.bilibili.com/video/BV1pX4y1S7Dq/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750%5D">https://www.bilibili.com/video/BV1pX4y1S7Dq/?share_source=copy_web&amp;vd_source=7f88ea4ee6a402338b0a4e09fbb81750]</a></li>
<li>(稀土掘金TianTianUp的文章)[<a href="https://juejin.cn/post/6869519303864123399]">https://juejin.cn/post/6869519303864123399]</a></li>
<li>deepseek和通义的详细讲解</li>
</ol>
<hr>
<h2 id="评论区提到的问题"><a href="#评论区提到的问题" class="headerlink" title="评论区提到的问题"></a>评论区提到的问题</h2><h3 id="面试被问到了git-rebase，一直用git-merge的完全答不上来"><a href="#面试被问到了git-rebase，一直用git-merge的完全答不上来" class="headerlink" title="面试被问到了git rebase，一直用git merge的完全答不上来"></a>面试被问到了git rebase，一直用git merge的完全答不上来</h3><p>有位叫ElpieKay的热心高手的解释好清楚，我把他的回答cv了过来：</p>
<blockquote>
<p>git rebase就像在处理两根分叉的枝丫，先找到两根枝丫的分叉点，把一根枝丫从这个分叉点以后的部分复制一份，按照原本的顺序嫁接到另一根枝丫顶端。<br>通过onto参数可以指定嫁接点（默认是枝丫顶端）。此外，通过参数，可以指定要复制哪一段枝丫（默认是分叉点后面那段开始到待复制枝丫的顶端）。<br>最后，通过交互式操作（-i参数），可以对复制后的枝丫上的每一段（一段代表一个commit）进行更加精细化的操作，包括丢弃（drop）、调整顺序（调整todo list里的顺序）、几个合并成一个（squash）、编辑（edit）等等。还可以通过exec参数传一个固定操作（命令、脚本等）进去，每处理完一个todo项就执行下这个操作。假如复制的这段分叉里包含了merge commit，又想保留它（默认是会被抹平的），可以用参数–rebase-merges。<br>特殊的情况是两个枝丫实际没有分叉，那rebase的时候表现会和merge有点像，already up-to-date或者发生快进式合并。</p>
</blockquote>
]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>今日成就</title>
    <url>/2025/02/26/23-myself/</url>
    <content><![CDATA[<h3 id="二月"><a href="#二月" class="headerlink" title="二月"></a>二月</h3><p>2025.2.26：</p>
<p>在图书馆4h复习自己写的文章+看招聘网站<br>看食贫道南美–阿根廷篇《独自等待》<br>那边国家的生活太糟糕了。生在中国真是太幸福了，感谢爸妈，我好幸运</p>
<p>2025.2.27：<br>中午吃炸鸡+韩式炸酱面，老板娘还记得我，我说今天是我的生日，他们祝我生日快乐<br>写canvas博客<br>晚上去烤匠过生日，主动要了一张照片，询问体验勇敢表达有些糊和咸得到两杯杨枝甘露补偿<br>晚上发朋友圈发了很还原的自拍，很多朋友点赞祝我生日快乐，还有夸我的，非常开心~</p>
<p>2025.2.28：<br>收到了很惊喜的生日礼物<br>今天下课走出教学楼，阳光打在树上特别好看<br>晚上和姥姥妈妈打了半小时视频，开心</p>
<h3 id="三月"><a href="#三月" class="headerlink" title="三月"></a>三月</h3><p>2025.3.1<br>图书馆不碰手机学习4h<br>看食贫道–美国篇《你好美国》</p>
<p>2025.3.2，3.3<br>学习TypeScript</p>
<p>2025.3.4<br>vscode一直无法打开谷歌浏览器，两个小时各种办法终于，依赖扩展算是成功了</p>
<p>2025.3.7<br>去吃了很好吃的炸鸡店的烤肉自助，老板娘还认得我</p>
<p>2025.3.8<br>送了姥姥和妈妈口红<br>仔细学习正则表达式，还是好难写<br>买了拍立得，富士12mini+相纸，我的第一个拍立得</p>
<p>2025.3.9<br>中午和小红书认识的女生一起去漫花庄园拍照<br>第一次和网上认识的人见面<br>第一次体验被摄影师拿摄像机拍照片</p>
<p>2025.3.10-2025.3.13<br>每天非上课时间在图书馆学4h</p>
<p>2025.3.14<br>特别认真上了一节机器学习的课，没有走神没看手机，还是没听明白没记住什么东西，这条路和自己无缘了<br>今天在图书馆6h,学了5.5h，没怎么看手机，效率很高，今天看禹神讲vue从组件到脚手架的scoped熟悉<br>晚上出来下雨了，我捎一个没带伞的女生一起回了宿舍<br>点了炸鸡外卖，留言备注下雨天姐姐路上小心，她看到好像很开心<br>晚上回来和家里打电话<br>晚上和一个女生一起玩游戏，互相夸夸玩的很快乐</p>
<p>2025.3.15<br>图书馆学习4h，复习vue2+正则表达式详细学习<br>晚上和朋友出去吃饭，溜达走回学校，一直在聊天，好久没有这个样子了</p>
<p>2025.3.17<br>今天参加了学校的双选会，只有两家在招前端岗，有一个招后端的哥哥和我说如果想要走web开发建议我转学后端，他说因为前端干的后端也能干，但是后端干的前端干不了<br>今晚回来看了好多招聘的求职的经验贴（但是大部分都是卖课的）<br>看了测试岗，前端后端岗，还看了国考省考经验贴，好焦虑，有点怀疑自己的选择，不知道该怎么走</p>
<p>2025.3.18<br>今天也是焦虑的一天，游走在多个招聘网站找web前端实习生的招聘信息，好多投简历的截止时间的三月底四月初，蓝桥杯的考试在4.12，我到现在还没复习vue3还没开始刷题，时间好紧张阿<br>今天晚上睡前想到了一些糟糕的回忆，很沮丧，真的好怕自己一无所成</p>
<p>2025.3.19<br>经过两天的思考和以前的尝试，还是觉得把前端学好是我的最佳选择<br>今天骑自行车上坡的路上自行车链条松了一下子骑不了了，还好周围没车，我没有受伤，推车出去修，从小区穿过去的路上看到了很好看的树<br>今天在图书馆重新学习vuex+路由前半部分<br>看到一个成都在招前端实习生的信息，和hugo相关，问了deepseek我应该掌握什么，打算速度学一学这方面的知识投简历试一试。但是我的前端八股文几乎毫无准备，要干的事情又多一个，list满满当当啊</p>
<p>2025.3.20-2025.3.21<br>给hexo成功添加了评论功能，用的Twikoo，有点小曲折但是成功后的成就感很快乐（让我回忆起去年学后端和数据库时，上传图片的功能研究了三四天才成功，功能实现后的感觉真的超满足）<br>好喜欢美化博客啊，但是要先学知识写项目找实习才对</p>
<p>2025.3.22-2025.3.26<br>这些天依旧白天上课+图书馆，平均每天有效学习5h<br>hugo，hexo的认识深了很多。以前的hexo只是会用，现在思路清晰<br>学习浏览器相关知识，这部分以前一直被我忽略，狠狠恶补了两天，感觉好充实</p>
<p>2025.3.27<br>今天上午十点把简历+打招呼发了出去，第一次投递简历，好紧张。但是…等了一天没有被查看，意料之中还是有点失落，对这家的任务真的好感兴趣。<br>今天下午睡了一大觉，晚上果然失眠了，但是很开心</p>
<p>2025.3.28<br>今天复习了一点node.js。我想独立完成一个项目，想自己做数据库和API，在查资料看用node.js+koa好，还是用springboot好。<br>晚上重跑大二的后端项目，开始怎么跑都是404，后来不用Tomcat用Idea自带的服务器跑成功了，我的springboot还是通的，开心。<br>但是，这些后端代码几乎忘得一干二净了。我以为之前只实现了增删改查多图上传缩略图，原来我还加了屏蔽不文明字。<br>好纠结API这部分该选什么方式完成，为什么之前写了好久好久的后端都不记得了，这样以后能找到工作吗T.T</p>
<h3 id="四月"><a href="#四月" class="headerlink" title="四月"></a>四月</h3><p>2025.4.6<br>这段时间断断续续写项目和练习，进度变慢了，每天3h左右<br>在学校加了一个德国留学女生的微信，这是我第一次主动要微信，她同意了，好开心ovo</p>
<p>2025.4.7-2025.4.12<br>这几天一直写蓝桥杯的题，最终准备的不太好，但这段时间收获了很多我之前没思考过的知识，优秀的人好多，学习之路还很长啊</p>
<p>4.28-5.2<br>这几天去桂林和柳州玩啦，说走就走，一个人的旅行，路上遇到了很多很棒的陌生人，有被这些不期而遇的温暖好好地治愈到<br>5.2回学校，查看蓝桥杯成绩，我居然是四川省web组的二等奖，惊呆了，我以为我没有名次的，真的很惊喜，要更努力地学习呀小聂同学</p>
<h3 id="五月"><a href="#五月" class="headerlink" title="五月"></a>五月</h3><p>5.3-5.5<br>复习+学习axios，完善学习ts</p>
<p>5.6-5.8<br>原来前端面试不止是问八股，还有很多算法题，感觉更有挑战性了<br>写小练习，回顾项目搭建，不看教程笔记只看官方文件实现vite项目搭建，自己配置pinia和router，element-plus,路由前置守卫<br>很多基础还是要实操才行阿，要多多动手</p>
<p>5.9<br>搜索各种高频面试题，好难，要学的还有好多</p>
<p>5.10<br>独立写登录页面和相关功能，不看视频，从0开始一步步完善非常有成就感，有些慢做了7h<br>service部分有问题，传给后端接口的数据不对，明天继续研究</p>
<p>5.10-5.25<br>写项目，写实验报告，每天都有新的收获</p>
<p>5.27<br>今天仔细学习检查后端传入的接口文档，通过Apifox，仔仔细细对照脑图、原型图、思考业务逻辑检查了二十四个接口，写了检查文档，眼睛花花的，但是好爽<br>前端组长阮喵喵和我腾讯会议四十分钟，听我的接口评审结果，肯定了我存疑的地方，帮我查漏补缺，又学习到了新知识(比如pageOTD，分页请求接口要在命名上特别标注，保持和脑图一致)，再次为遇到这位组长感到幸运<br>晚上和后端组拉腾讯会议，说明问题，紧张又激动，后端组组长也很友善，大家都很配合，还把我的讲解录制发他们后端群，喜欢被认可的感觉</p>
<p>5.28-6.2<br>这段时间还是学校上课学习+和组长学习前后端协作+跟着组长的步骤修改自己负责部分的代码（感觉自己就是CV工程师，项目的代码好复杂看不懂）</p>
<p>5.28<br>端午前3天的晚上，特别特别特别想回家，看了好久的车票机票，时间合适的太贵，便宜的赶不上，犹犹豫豫说服自己在学校好好准备面试吧</p>
<p>5.29<br>端午前两天的中午两点，下课后在图书馆准备面试题，回家的欲望还是很强烈，看到有下午五点成都东到西安，西安转北京的高铁+火车，我好心动。<br>和家里说我想回家了，妈妈和姥姥在群里很快回复我说，想回家就回来吧。<br>下单车票，出图书馆回宿舍，正好下着小雨，我背了个书包带着电脑，轻装上阵去火车站坐高铁。<br>路上和做我旁边的姐姐聊天，和她一起西安北站地铁转西安站<br>我好馋肉夹馍，点了外卖送到西安站，在火车上吃+和冰汽水。<br>就是这个外卖+冰汽水，让我在凌晨三点胃疼了一个小时，太难受了，在火车的厕所里干呕了半天，好无助。<br>好笑的是，由于前一天在搞接口，我胃疼疼醒的时候居然想的是好难受是接口出问题了吗，后来才清醒过来<br>实在太困了，疼得也没力气，接热水喝了些，回卧铺睡觉，很快就睡着了，还好后面没有再胃疼<br>能不能争气一点啊我亲爱的胃亲爱的肚子</p>
<p>5.30<br>下午两点半到家啦啦啦啦，一进门姥姥迎接我，桌子上放着妈妈给我准备的花束，是我最喜欢的橘黄色花花！<br>在家感觉心里很踏实，但同时为我的实习和以后就业很焦虑，想变得优秀，想让家里人放心<br>这天晚上失眠了，外面下着雨，我躺在床上，心里踏实又不安，和家人见面的次数似乎越来越少，心里酸酸的，很不是滋味</p>
<p>5.31-6.1<br>这两天在家，没有学习，和猫猫玩，床上躺着，吃吃喝喝聊聊天<br>但是这两天我特别特别焦虑，我也不明白回家为什么这样，又安心又焦虑<br>服了我自己，一怒之下换了微信签名“提前焦虑等于贷款吃屎”</p>
<p>6.2<br>要走了，不想起床不想走，在床上赖到十点，十点五十出发，路上吃了姥姥买的两个驴肉火烧。<br>姥姥早上买了一袋红枣粽子给我。<br>和家里人告别后，心里酸酸的，想哭终于不用忍了。<br>高铁到北京，地铁到机场，这次时间很赶，办登记牌的姐姐提醒我去走紧急通道<br>飞机上也说不出什么滋味，一路上似乎想了很多，又似乎什么都没想。<br>六点到成都，八点到宿舍，粽子还是香香的，自己吃了一个剩下的都分了。<br>每次从家到学校，都觉得好累好累好累，</p>
<p>6.3-6.6<br>上课，下课后在图书馆学到晚上九点半回宿舍，一点游戏都不想玩，只想赶紧把学校任务搞完，多多准备实习面试。<br>效率很高，几乎没玩手机，但总觉得还差好多还应该做很多<br>准备面试题的时候真的收获了很多知识，很爽。</p>
<p>6.7<br>今天上了一天课，学习本地大模型部署，做出来好有成就感哈哈哈</p>
<p>6.8<br>改简历，复盘项目，之前做的时候记了很多细节，现在遗忘了很多，果然知识还是要勤复习<br>这周好多实训课+答辩+小组作业，时间紧迫，明天一定要投三份简历！！</p>
<p>6.9-6.11<br>前两天周一周二，在boss上打了40个招呼，有五个然看我，两个要简历，简历发出去猪佳科技看了我，加了微信约定6.12上午十点半面试</p>
<p>好忙…11号为面试做准备，好紧张找韩2老师请教了找实习，12下午实训课的环境我还没搞好，13上午的答辩和说明书我也还没写</p>
<p>为什么我还不会分身，想学魔法，好累。希望明天面试情况可以，希望准备的到时候都能想起来，加油！</p>
<p>6.12-6.18<br>一转眼过去七天了，累累的，期末学校的事情好多<br>6.19-6.26<br>一转眼又过去8天了，最后一个实训答辩也结束了！！<br>这些天发生了好多事情，很累，但是好奇妙！！<br>太多啦详细写日记里了以后想看这段时间去翻</p>
<p>不写心里活动和过程的简洁版——6.12-6.26三周：<br>第一周：打招呼+投了一周简历，收到了八个面试邀约，周四上午猪佳科技现场面试，周五虚拟现实答辩，周五下午收到慧择的面试邀约<br>第二周：周一上午慧择视频一面，周三下午考试+安恒信息AI面试，周四上午慧择二面，上午同时收到友邦的面试邀约和字节的面试邀约，中午收到慧择的实习offer，下午晚上大数据答辩，周五上午和字节HR发信息取消面试，晚上工程伦理考试<br>第三周：周一下午友邦视频面试，周二下午机器学习考试，下午收到友邦HR面试通过的消息，还有电话发给了我offer！！！周三上午考试，下午和慧择表达歉意+说明情况，收到友邦的邮件offer！！周四机器学习答辩<br>忙碌了三周的聂师傅终于解放啦</p>
]]></content>
      <categories>
        <category>myself</category>
      </categories>
  </entry>
  <entry>
    <title>TypeScript学习</title>
    <url>/2025/03/02/17-typescript/</url>
    <content><![CDATA[<h1 id="写在前面："><a href="#写在前面：" class="headerlink" title="写在前面："></a>写在前面：</h1><p>本博客主要参考codewhy老师的课程，和下面视频+对应笔记文档，以及自己的总结和补充<br><a href="https://www.bilibili.com/video/BV1YS411w7Bf/?spm_id_from=333.1007.top_right_bar_window_history.content.click&vd_source=eec8d29cc9562259bc3afddcb56823bd">🪩 禹神：三小时快速上手TypeScript，TS速通教程_哔哩哔哩_bilibili</a></p>
<h1 id="认识TypeScript"><a href="#认识TypeScript" class="headerlink" title="认识TypeScript"></a>认识TypeScript</h1><h2 id="TypeScript简介"><a href="#TypeScript简介" class="headerlink" title="TypeScript简介"></a>TypeScript简介</h2><p>TypeScript 由微软开发,是基于 JavaScript 的⼀个扩展语⾔。<br>TypeScript 包含了 JavaScript 的所有内容,TypeScript 是 JavaScript 的超集。<br>TypeScript 增加了:静态类型检查、接⼝、 泛型等很多现代开发特性,更适合⼤型项⽬ 的开发。<br>TypeScript 需要编译为 JavaScript ,然后交给浏览器或其他 JavaScript 运⾏环 境执⾏</p>
<h2 id="为什么用TypeScript"><a href="#为什么用TypeScript" class="headerlink" title="为什么用TypeScript"></a>为什么用TypeScript</h2><p>typescript可以在开发阶段进行类型校验</p>
<ol>
<li>js现状<br>JavaScript的定位是浏览器脚本语⾔,⽤于在⽹⻚中嵌⼊简单的逻辑,且代码量少。但js越来越流⾏,已经可以全栈编程，写大型项目会出现很多困扰</li>
<li>js困扰<br>以下问题放在.js文件夹不会飘红报错，只有运行后才会控制台2报错，但是放到.ts文件夹会飘红报错（不用执行，静态类型检查）</li>
</ol>
<ul>
<li><p>不清楚的数据类型</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> welcome = <span class="string">&#x27;hello&#x27;</span> </span><br><span class="line"><span class="title function_">welcome</span>() <span class="comment">// 此⾏报错:TypeError: welcome is not a function</span></span><br></pre></td></tr></table></figure></li>
<li><p>有漏洞的逻辑</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? <span class="string">&#x27;奇数&#x27;</span> : <span class="string">&#x27;偶数&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (str !== <span class="string">&#x27;奇数&#x27;</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;hello&#x27;</span>) </span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(str === <span class="string">&#x27;偶数&#x27;</span>)&#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&#x27;world&#x27;</span>) &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问不存在的属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">width</span>: <span class="number">10</span>, <span class="attr">height</span>: <span class="number">15</span> &#125;; </span><br><span class="line"><span class="keyword">const</span> area = obj.<span class="property">width</span> * obj.<span class="property">heigth</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>低级的拼写错误</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;hello,world&#x27;</span> message.<span class="title function_">toUperCase</span>() <span class="comment">//遗漏了一个&quot;p&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3">
<li>ts是静态类型检查<br>不用运行，不对的写完就知道不对了<br>开始麻烦，但是后面省心<blockquote>
<p>同样的功能,TypeScript 的代码量要⼤于 JavaScript,但由于 TypeScript 的代码结构更加 清晰,在后期代码的维护中 TypeScript 却胜于 JavaScript</p>
</blockquote>
</li>
</ol>
<h2 id="编译-TypeScript（两种方式）"><a href="#编译-TypeScript（两种方式）" class="headerlink" title="编译 TypeScript（两种方式）"></a>编译 TypeScript（两种方式）</h2><p>浏览器不能直接运行tx，需要编译为ts再交给编译器执行<br>如果使用脚手架，那么它会基于脚手架webpack，vite自动编译ts，不用下面的操作</p>
<h3 id="命令⾏编译-几乎不用，了解"><a href="#命令⾏编译-几乎不用，了解" class="headerlink" title="命令⾏编译(几乎不用，了解)"></a>命令⾏编译(几乎不用，了解)</h3><p>要把 .ts ⽂件编译为 .js ⽂件,需要配置 TypeScript 的编译环境,步骤如下:</p>
<ol>
<li>创建⼀个 demo.ts ⽂件,例如: <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;虞寻歌&#x27;</span>,</span><br><span class="line">	<span class="attr">home</span>: <span class="string">&#x27;载酒&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;person.name&#125;</span>，来自<span class="subst">$&#123;person.home&#125;</span>`</span>)</span><br></pre></td></tr></table></figure></li>
<li>全局安装 <code>TypeScript  npm i typescript -g</code><br>  创建完成后，全局有一个tsc指令用于编译，再根据这个命令把ts文件变成js文件</li>
</ol>
<ul>
<li>第三步:使⽤命令编译 .ts ⽂件<code>tsc demo.ts</code></li>
<li>“注意：现在安装最新的 TSC 编译器并不会新增全局命令，需要写成 npx tsc index 才可以！”</li>
</ul>
<ol start="3">
<li>结果展示<br><img src="/./postImgs/jsImgs/ts1.png" alt="命令行编译"><br>成功后会多出一个对应名字的.js文件，同时原来.ts中的汉字会被编码在任何js环境都能识别的样式，防止乱码<br>每次更新.ts后都要重新编译生成.js</li>
</ol>
<h3 id="⾃动化编译-重要"><a href="#⾃动化编译-重要" class="headerlink" title="⾃动化编译(重要)"></a>⾃动化编译(重要)</h3><p>成功后，.ts文件修改保存后，对应的.js文件自动更新修改，同时不会把错误内容同步到.js文件中</p>
<ol>
<li>创建 TypeScript 编译控制⽂件：<code>tsc --init</code><br><img src="/./postImgs/jsImgs/ts2.png" alt="⾃动化编译"><br>在新生成的tsconfig.json文件中的<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2016&quot;</span><span class="punctuation">,</span> </span><br><span class="line"><span class="comment">//表示使用ES7;es2015表示ES6，改成ES2015或者ES6</span></span><br></pre></td></tr></table></figure></li>
<li>监视⽬录中的 .ts ⽂件变化  <code>tsc --watch 或 tsc -w</code><br>如果要监视一个文件，那么在后面加文件名，如’ tsc –watch demo.ts’，如果想要监视当前文件夹的所有ts文件，那什么都不加<br><img src="/./postImgs/jsImgs/ts3.png" alt="tsc --watch"><br>此时生成.js文件<br>同时因为刚才配置了使用ES6，声明person不再转换成var而是使用了const，<br>  上面<code>&quot;use strict&quot;;</code>表示使用严格模式</li>
<li>配置：当编译出错时不⽣成 .js ⽂件，修改正确后再生成<br>(不推荐但是有的做法：)<code>tsc --noEmitOnError --watch</code><br><strong>要这样做</strong>：修改tsconfig.json 中的配置，把<code>&quot;esModuleInterop&quot;: true,</code>这行的注释解开，如图<br><img src="/./postImgs/jsImgs/ts4.png" alt="修改tsconfig.json 中的配置"><br><img src="/./postImgs/jsImgs/ts5.png" alt="成功，当编译出错时不⽣成 .js ⽂件 "></li>
</ol>
<h1 id="TypeScript类型"><a href="#TypeScript类型" class="headerlink" title="TypeScript类型"></a>TypeScript类型</h1><h2 id="类型声明"><a href="#类型声明" class="headerlink" title="类型声明"></a>类型声明</h2><ol>
<li><p>使⽤<code>:</code> 来对<strong>变量或函数形参</strong>,进⾏类型声明限制<br>函数参数多传或者少传都是不可以的<br><strong>vscode右键-格式化文档，自动帮你在:后面留出空格</strong><br>注意区分大小写，string不能写成String！！</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span>  <span class="comment">// 变量a以后只能存储	字符串类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="built_in">number</span>  <span class="comment">// 变量b只能存储数值</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>: <span class="built_in">boolean</span> <span class="comment">// 变量c只能存储布尔值</span></span><br><span class="line">​</span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">a = <span class="number">100</span>  <span class="comment">// 警告: 不能将类型“number”分配给类型“string”</span></span><br><span class="line">​</span><br><span class="line">b = <span class="number">666</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// 警告: 不能将类型&quot;string&quot;分配给类型&quot;number&quot;</span></span><br><span class="line">​</span><br><span class="line">c = <span class="literal">true</span></span><br><span class="line">c = <span class="number">666</span>  <span class="comment">// 警告: 不能将类型“number”分配给类型“boolean”</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">// 函数：对形参和返回值进行限制，参数x必须是数字，参数y也必须是数字，函数返回值也必须是数字</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>, <span class="number">200</span>)</span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>, <span class="string">&#x27;200&#x27;</span>) <span class="comment">// 警告: 类型“string&quot;的参数不能赋给类型&quot;number&quot;的参数</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>) <span class="comment">// 警告: 应有 2个参数, 但获得 3个</span></span><br><span class="line"><span class="title function_">demo</span>(<span class="number">100</span>) <span class="comment">// 警告: 应有 2个参数，但获得 1个</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>:</code>后也可以写字⾯量类型,不过实际开发中几乎不用</p>
</li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="string">&#x27;你好&#x27;</span> <span class="comment">//a的值只能为字符串&quot;你好&quot;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>: <span class="number">100</span> <span class="comment">//b的值只能为数字100</span></span><br><span class="line">a = <span class="string">&#x27;欢迎&#x27;</span><span class="comment">//警告:不能将类型&quot;&quot;欢迎&quot;&quot;分配给类型&quot;&quot;你好&quot;&quot;</span></span><br><span class="line">b = <span class="number">200</span> <span class="comment">//警告:不能将类型&quot;200&quot;分配给类型&quot;100&quot;</span></span><br></pre></td></tr></table></figure>
<p>常用写法</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">name</span>: <span class="built_in">string</span> =<span class="string">&quot;虞寻歌&quot;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>类型推断(可以但不要做)<br>如<code>let b: 100</code><br>不声明类型也不会报错（可以理解为这是ts善良的部分但不要利用这个善良）</li>
</ol>
<h2 id="类型总览"><a href="#类型总览" class="headerlink" title="类型总览"></a>类型总览</h2><h3 id="JavaScript-中的数据类型"><a href="#JavaScript-中的数据类型" class="headerlink" title="JavaScript 中的数据类型"></a>JavaScript 中的数据类型</h3><p>① string ② number ③ boolean ④ null ⑤ undefined ⑥ bigint ⑦ symbol ⑧ object<br>备注:其中 object 包含: Array 、 Function 、 Date 、 Error 等……</p>
<h3 id="TypeScript-中的数据类型"><a href="#TypeScript-中的数据类型" class="headerlink" title="TypeScript 中的数据类型"></a>TypeScript 中的数据类型</h3><ol>
<li>上述所有 JavaScript 类型<br>再ts中的undefined和null它们既是实际的值，也是自己的类型<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="literal">null</span> = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">u</span>: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure></li>
<li>六个新类型： ① any ② unknown ③ never ④ void ⑤ tuple ⑥ enum</li>
<li>两个用于自定义类型的方式： ① type ② interface</li>
</ol>
<blockquote>
<p>注意点<br>前面提到的，不能把string写成String(类似java中int和 integer)<br>在 JavaScript 中的这些内置构造函数: Number、String、Boolean,⽤于创建对应的包装对象, 在⽇常开发时&#x3D;&#x3D;很少使⽤&#x3D;&#x3D;,在 TypeScript 中也是同理,所以 在 TypeScript 中进⾏类型声明时,通常都是⽤⼩写的 number 、 string 、 boolean</p>
</blockquote>
<p>例如下⾯代码:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: string <span class="comment">//TS官方推荐的写法</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str1 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">//报</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="title class_">String</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2 = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str1)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> str2)</span><br></pre></td></tr></table></figure>
<h3 id="TS中数组类型写法"><a href="#TS中数组类型写法" class="headerlink" title="TS中数组类型写法"></a>TS中数组类型写法</h3><p>在开发中，数组一般存放相同的类型，不要存放不同的类型</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">names</span>: <span class="built_in">string</span>[] = [<span class="string">&quot;虞寻歌&quot;</span>,<span class="string">&quot;图蓝&quot;</span>,<span class="string">&quot;B8017913&quot;</span>]</span><br><span class="line">names.<span class="title function_">push</span>(<span class="string">&quot;欺花&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="TS中的Object类型"><a href="#TS中的Object类型" class="headerlink" title="TS中的Object类型"></a>TS中的Object类型</h3><p>Object类型中的属性不要再指定类型了，让编译器自己推导类型即可</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> info = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;虞寻歌&quot;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">	<span class="attr">hometown</span>:<span class="string">&quot;载酒&quot;</span>,</span><br><span class="line">	<span class="attr">color</span>:<span class="string">&quot;橙红色&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">---</span><br><span class="line"><span class="keyword">let</span> info :<span class="built_in">object</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&quot;虞寻歌&quot;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">	<span class="attr">hometown</span>:<span class="string">&quot;载酒&quot;</span>,</span><br><span class="line">	<span class="attr">color</span>:<span class="string">&quot;橙红色&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="原始类型VS包装对象-理解"><a href="#原始类型VS包装对象-理解" class="headerlink" title="原始类型VS包装对象-理解"></a>原始类型VS包装对象-理解</h4><ol>
<li>原始类型 VS 包装对象</li>
</ol>
<ul>
<li>原始类型:如 number 、 string 、 boolean ,在 JavaScript 中是简单数据 类型,它们在内存中占⽤空间少,处理速度快。 </li>
<li>包装对象:如 Number 对象、 String 对象、 Boolean 对象,是复杂类型,在 内存中占⽤更多空间,在⽇常开发时很少由开发⼈员⾃⼰创建包装对象。</li>
</ul>
<ol start="2">
<li>⾃动装箱:<br>JavaScript 在必要时会⾃动将原始类型包装成对象,以便调⽤⽅法或访问属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 原始类型字符串</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="comment">// 当访问str.length时,JavaScript引擎做了以下⼯作:</span></span><br><span class="line"><span class="comment">// 1. ⾃动装箱:创建⼀个临时的String对象包装原始字符串</span></span><br><span class="line"><span class="keyword">let</span> size = (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="keyword">let</span> tempStringObject = <span class="keyword">new</span> <span class="title class_">String</span>(str);</span><br><span class="line">	<span class="comment">// 2. 访问String对象的length属性</span></span><br><span class="line">	<span class="keyword">let</span> lengthValue = tempStringObject.<span class="property">length</span>;</span><br><span class="line">	<span class="comment">// 3. 销毁临时对象,返回⻓度值</span></span><br><span class="line">	<span class="comment">// (JavaScript引擎⾃动处理对象销毁,开发者⽆感知)</span></span><br><span class="line">	<span class="keyword">return</span> lengthValue;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(size); <span class="comment">// 输出: 5</span></span><br></pre></td></tr></table></figure>

<h2 id="常⽤类型声明与语法（重要）"><a href="#常⽤类型声明与语法（重要）" class="headerlink" title="常⽤类型声明与语法（重要）"></a>常⽤类型声明与语法（重要）</h2><h3 id="声明对象类型"><a href="#声明对象类型" class="headerlink" title="声明对象类型"></a>声明对象类型</h3><ol>
<li><p>⼀般对象<br>在熟悉后面加<code>?</code>代表这个属性可以有也可以没有，如果没加的话必须有，否则报错<br>属性之间可以用<code>,</code>和<code>;</code>或者<code>换行</code>分隔开</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 限制person1对象必须有name属性,age为可选属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person1</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>, age?: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="comment">//  ,也能⽤分号做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person2</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; age?: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="comment">// 含义同上,也能⽤换⾏做分隔</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person3</span>: &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	age?: <span class="built_in">number</span>  <span class="comment">// 加？代表可以为空</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如下赋值均可以</span></span><br><span class="line">person1 = &#123;<span class="attr">name</span>:<span class="string">&#x27;李四&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125;</span><br><span class="line">person2 = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如下赋值不合法,因为person3的类型限制中,没有gender属性的说明</span></span><br><span class="line">person3 = &#123;<span class="attr">name</span>:<span class="string">&#x27;王五&#x27;</span>,<span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>索引签名: <code>[key: string]: any</code></strong><br>允许定义对象可以具有任意数量的属性,这些属性的键和类型是可变的, 常⽤于:描述类型不确定的属性,(具有动态属性的对象)。</p>
</li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 限制person对象必须有name属性,可选age属性但值必须是数字,同时可以有任意数量、任意类型的其他属性</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	age?: <span class="built_in">number</span></span><br><span class="line">	[<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">any</span> <span class="comment">// 索引签名,完全可以不⽤key这个单词,换成其他的也可以(另一种常用写法：index)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 赋值合法</span></span><br><span class="line"></span><br><span class="line">person = &#123; </span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>, </span><br><span class="line">	<span class="attr">age</span>:<span class="number">18</span>, </span><br><span class="line">	<span class="attr">gender</span>:<span class="string">&#x27;男&#x27;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="声明函数类型"><a href="#声明函数类型" class="headerlink" title="声明函数类型"></a>声明函数类型</h3><p>指定参数类型，返回值类型可以指定，也可以推导Typescript对于传入的函数类型的参数个数不进行检测<br>（函数类型知识还有好多，远不止下面这一点，我没做笔记）</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"><span class="attr">num1</span>:<span class="built_in">number</span>, <span class="attr">num2</span>:<span class="built_in">number</span></span>): <span class="built_in">number</span> &#123; <span class="keyword">return</span> num1 + num2 &#125;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">parseLyric</span>(<span class="params"><span class="attr">lyric</span>: <span class="built_in">string</span></span>)&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="attr">lyrics</span>: <span class="title class_">LyricLine</span>[] = []</span><br><span class="line">	lyrics.<span class="title function_">push</span>(&#123; <span class="attr">time</span>: <span class="number">0</span>, <span class="attr">text</span>: lyric &#125;)</span><br><span class="line">	<span class="keyword">return</span> lyrics</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">count</span>: <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line">count = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123; <span class="keyword">return</span> x + y &#125;</span><br></pre></td></tr></table></figure>

<p>注意:</p>
<ul>
<li>TypeScript 中的 &#x3D;&gt; 在函数类型声明时表示&#x3D;&#x3D;函数类型,&#x3D;&#x3D;描述其&#x3D;&#x3D;参数类型&#x3D;&#x3D;和返回类型。 </li>
<li>JavaScript 中的 &#x3D;&gt; 是⼀种定义函数的语法,是具体的函数实现。 </li>
<li>函数类型声明还可以使⽤:接⼝、⾃定义类型等⽅式,下⽂中会详细讲解。</li>
</ul>
<h4 id="函数类型表达式"><a href="#函数类型表达式" class="headerlink" title="函数类型表达式"></a>函数类型表达式</h4><p>格式：<code>(参数列表) =&gt; 返回值类型</code></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">typr <span class="title class_">Func1</span> = <span class="function">(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">calc</span>(<span class="params"><span class="attr">fc</span>: <span class="title class_">Func1</span></span>)&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="title function_">fc</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params"><span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span></span>) &#123; <span class="keyword">return</span> x + y &#125;</span><br><span class="line"><span class="title function_">calc</span>(sum)</span><br></pre></td></tr></table></figure>
<h4 id="调用签名"><a href="#调用签名" class="headerlink" title="调用签名"></a>调用签名</h4><p>如果想描述一个带有属性的函数，可以在一个对象类型中写一个调用签名<br>注意这个语法跟函数类型表达式稍有不同，在参数列表和返回的类型之间用的是:而不是&#x3D;&gt;</p>
<blockquote>
<p>开发中如何选择:<br>1.如果只是描述函数类型本身(函数可以被调用)，使用函数类型表达式<br>2.如果在描述函数作为对象可以被调用,同时也有其他属性时，使用函数调用签名</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//函数类型表达式</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">BarType</span> =<span class="function">(<span class="params"><span class="attr">num1</span>:<span class="built_in">number</span></span>)=&gt;</span><span class="built_in">number</span></span><br><span class="line"><span class="comment">//函数的调用签名(从对象的角度来看待这个函数，也可以有其他属性)</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IBar</span>&#123;</span><br><span class="line"><span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"><span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line"><span class="comment">//函数可以调用:函数调用签名</span></span><br><span class="line">(<span class="attr">num1</span>:<span class="built_in">number</span>):<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">bar</span>:<span class="title class_">IBar</span> =(<span class="attr">num1</span>:<span class="built_in">number</span>):<span class="function"><span class="params">number</span>=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line">bar.<span class="property">name</span> = <span class="string">&quot;abc&quot;</span></span><br><span class="line">bar.<span class="property">age</span> = <span class="number">18</span></span><br><span class="line"><span class="title function_">bar</span>(<span class="number">123</span>)</span><br></pre></td></tr></table></figure>
<h3 id="声明数组类型"><a href="#声明数组类型" class="headerlink" title="声明数组类型"></a>声明数组类型</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: <span class="built_in">string</span>[]</span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; <span class="comment">//属于泛型</span></span><br><span class="line">	</span><br><span class="line">arr1 = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">arr2 = [<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h3><p>元组Tuple是⼀种&#x3D;&#x3D;特殊的数组类型&#x3D;&#x3D;,可以存储固定数量的元素,并且每个元素的类型是&#x3D;&#x3D;已知&#x3D;&#x3D;的且可以&#x3D;&#x3D;不同&#x3D;&#x3D;。元组⽤于精确描述⼀组值的类型， ? 表示可选元素。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 第⼀个元素必须是 string 类型,第⼆个元素必须是 number 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr1</span>: [<span class="built_in">string</span>,<span class="built_in">number</span>]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型,第⼆个元素是可选的,如果存在,必须是 boolean 类型。</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr2</span>: [<span class="built_in">number</span>,<span class="built_in">boolean</span>?]</span><br><span class="line"><span class="comment">// 第⼀个元素必须是 number 类型,后⾯的元素可以是任意数量的 string 类型</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">arr3</span>: [<span class="built_in">number</span>,...<span class="built_in">string</span>[]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以赋值</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>]</span><br><span class="line">arr2 = [<span class="number">100</span>,<span class="literal">false</span>]</span><br><span class="line">arr2 = [<span class="number">200</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>,<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;world&#x27;</span>]</span><br><span class="line">arr3 = [<span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不可以赋值,arr1声明时是两个元素,赋值的是三个</span></span><br><span class="line">arr1 = [<span class="string">&#x27;hello&#x27;</span>,<span class="number">123</span>,<span class="literal">false</span>]</span><br></pre></td></tr></table></figure>
<h2 id="其他类型与语法"><a href="#其他类型与语法" class="headerlink" title="其他类型与语法"></a>其他类型与语法</h2><h3 id="any"><a href="#any" class="headerlink" title="any"></a>any</h3><p>无法确定一个变量的类型，并且可能它会发生一些变化，这个时候可以使用any类型<br>（实在写不下去再用any，不然用ts干啥呢）</p>
<ol>
<li>any含义<br>any的含义是任意类型，⼀旦将变量类型限制为 any ,那就意味着放弃了对该变量的类型检查</li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 明确的表示a的类型是 any —— 【显式的any</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">any</span> <span class="comment">// 以下对a的赋值,均⽆警告</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 没有明确的表示b的类型是any,但TS主动推断出来b是any —— 隐式的any</span></span><br><span class="line"><span class="keyword">let</span> b</span><br><span class="line"><span class="comment">//以下对b的赋值,均⽆警告</span></span><br><span class="line">b = <span class="number">100</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">b = <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>any会传染！！<br><strong>注意点: any 类型的变量,可以赋值给任意类型的变量（容易自己一把火给别人也烧了）</strong></li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 注意点:any类型的变量,可以赋值给任意类型的变量 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">c</span>:<span class="built_in">any</span></span><br><span class="line">c = <span class="number">9</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = c <span class="comment">// ⽆警告！！！！！</span></span><br></pre></td></tr></table></figure>

<h3 id="unknown"><a href="#unknown" class="headerlink" title="unknown"></a>unknown</h3><p>unknown 的含义是: 未知类型<br>适⽤于起初不确定数据的具体类型,要后期才能确定</p>
<ol>
<li><p>unknown 可以理解为⼀个类型安全的any</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line"><span class="comment">//以下对a的赋值,均符合规范</span></span><br><span class="line">a = <span class="number">100</span></span><br><span class="line">a = <span class="literal">false</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span></span><br><span class="line"><span class="comment">// 设置x的数据类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">string</span></span><br><span class="line">x = a <span class="comment">//警告:不能将类型&quot;unknown&quot;分配给类型&quot;string&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>unknown的代码安全性<br>unknown会强制开发者在使⽤之前进⾏类型检查,从⽽提供更强的类型安全性<br><strong>看以下代码处理方式</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置a的类型为unknown</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">unknown</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第⼀种⽅式:加类型判断</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line"> x = a</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(x)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//第⼆种⽅式:加断⾔</span></span><br><span class="line">x = a <span class="keyword">as</span> <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三种⽅式:加断⾔</span></span><br><span class="line">x = &lt;<span class="built_in">string</span>&gt;a</span><br></pre></td></tr></table></figure>
</li>
<li><p>any和unknown属性读取<br>读取any类型数据的任何属性都不会报错,⽽ unknown 正好与之相反</p>
</li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">str1</span>: <span class="built_in">string</span></span><br><span class="line">str1 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str1.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str2</span>: <span class="built_in">any</span></span><br><span class="line">str2 = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">str2.<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">str3</span>: <span class="built_in">unknown</span></span><br><span class="line">str3 = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">str3.<span class="title function_">toUpperCase</span>() <span class="comment">//警告:&quot;str3&quot;的类型为&quot;未知&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤断⾔强制指定str3的类型为string</span></span><br><span class="line">(str3 <span class="keyword">as</span> <span class="built_in">string</span>).<span class="title function_">toUpperCase</span>() <span class="comment">//⽆警告</span></span><br></pre></td></tr></table></figure>

<h3 id="never"><a href="#never" class="headerlink" title="never"></a>never</h3><p>never 的含义是:任何值都不是,即: 不能有值,例如 undefined 、 null 、 ‘’ 、 0 都不⾏!<br>项目中很少遇到never(出现也是1或3)</p>
<ol>
<li><p>never可⽤于限制函数的返回值<br>返回“从不”的函数不能具有可访问的终结点</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 限制throwError函数不需要有任何返回值,任何值都不⾏,像undeifned、null都不⾏</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">throwError</span>(<span class="params"><span class="attr">str</span>: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;程序异常退出:&#x27;</span> + str)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>⼏乎不⽤ never 去直接限制变量,因为没有意义,<br>例如:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 指定a的类型为never, 那就意味着a以后不能存任何的数据了 */</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">never</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">// 以下对a的所有赋值都会有警告</span></span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">a = <span class="literal">true</span></span><br><span class="line">a = <span class="literal">undefined</span></span><br><span class="line">a = <span class="literal">null</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>never 一般是TypeScript主动推断出来的</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 指定a的类型为string</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="built_in">string</span> <span class="comment">// 给a设置⼀个值</span></span><br><span class="line">a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a.<span class="title function_">toUpperCase</span>())</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(a) <span class="comment">// TypeScript会推断出此处的a是never,因为没有任何⼀个值符合此处的逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="void"><a href="#void" class="headerlink" title="void"></a>void</h3><p>void 的含义是空,即函数不返回任何值，可以省略</p>
<ol>
<li>void通常⽤于函数返回值声明<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>:<span class="built_in">string</span></span>):<span class="built_in">void</span>&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">logMessage</span>(<span class="string">&#x27;你好&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
<p>注意:编码者没有编写 return 指定函数返回值,所以 logMessage 函数是没有&#x3D;&#x3D;显式返回值&#x3D;&#x3D;的,但会有⼀个&#x3D;&#x3D;隐式返回值,是 undefined&#x3D;&#x3D;  ,虽然函数返回类型为 void ,但也是可以接受 undefined 的,简单记: <strong>undefined是void可以接受的⼀种”空”</strong> </p>
<ol start="2">
<li>void符合规范的写法</li>
</ol>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 无警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 无警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 无警告</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>深入理解</strong>：<br><strong>实际开发中真的不希望别人去关注函数的返回值，我的函数也不会返回东西，那么就用void</strong></li>
</ol>
<h4 id="undefined和void"><a href="#undefined和void" class="headerlink" title="undefined和void"></a>undefined和void</h4><p>那限制函数返回值时,是不是 undefined 和 void 就没区别呢?—— 有区别。因为还有 这句话 :【返回值类型为 <strong>void</strong> 的函数,调⽤者不应依赖其返回值进⾏任何操作!】对⽐下 ⾯两段代码:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">logMessage</span>(<span class="string">&#x27;你好&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (result) &#123; <span class="comment">// 此行报错：无法测试 &quot;void&quot; 类型的表达式的真实性</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;logMessage有返回值&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMessage</span>(<span class="params"><span class="attr">msg</span>: <span class="built_in">string</span></span>): <span class="literal">undefined</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">result = <span class="title function_">logMessage</span>(<span class="string">&#x27;你好&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (result) &#123; <span class="comment">// 此行无警告</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;logMessage有返回值&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>理解 void 与 undefined</li>
</ol>
<ul>
<li>void 是⼀个⼴泛的概念,⽤来表达”空”,⽽ undefined 则是这种”空”的具体 实现。 </li>
<li>因此可以说 undefined 是 void 能接受的⼀种”空”的状态。 </li>
<li>也可以理解为: void 包含 undefined ,但 void 所表达的语义超越了 undefi ned , void 是⼀种意图上的约定,⽽不仅仅是特定值的限制。</li>
</ul>
<ol start="2">
<li>总结<br>如果⼀个函数返回类型为 void ,那么:</li>
</ol>
<ul>
<li>从语法上讲:函数是可以返回 undefined 的,⾄于显式返回,还是隐式返回,这⽆ 所谓!</li>
<li>从语义上讲:函数调⽤者不应关⼼函数返回的值,也不应依赖返回值进⾏任何操作! 即使我们知道它返回了 undefined</li>
</ul>
<h4 id="⼀个特殊情况void"><a href="#⼀个特殊情况void" class="headerlink" title="⼀个特殊情况void"></a>⼀个特殊情况void</h4><p>观察如下两段代码:</p>
<p>代码段1(正常)<br>在函数定义时,限制函数返回值为 void ,那么函数的返回值就必须是空。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>):<span class="built_in">void</span>&#123;</span><br><span class="line">	<span class="comment">// 返回undefined合法</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">	<span class="comment">// 以下返回均不合法</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">100</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">	<span class="keyword">return</span> []</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">demo</span>()</span><br></pre></td></tr></table></figure>

<p>代码段2(特殊)</p>
<p>使⽤ 限制函数返回值为 void 时, <strong>TypeScript</strong> 并不会严格要求函数返回空。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="built_in">void</span>  <span class="comment">// LogFunc的类型是一个函数，该函数不接受任何参数，并且其返回值是void类型的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f1</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	 <span class="keyword">return</span> <span class="number">100</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">f2</span>: <span class="title class_">LogFunc</span> = <span class="function">() =&gt;</span> <span class="number">200</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">f3</span>: <span class="title class_">LogFunc</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">300</span>; <span class="comment">// 允许返回⾮空值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>另一种写法：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">PrintData</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">PrintData</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">100</span>; <span class="comment">// 允许返回非空值</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">PrintData</span> = <span class="function">() =&gt;</span> <span class="number">200</span>; <span class="comment">// 允许返回非空值</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">PrintData</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">300</span>; <span class="comment">// 允许返回非空值</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>为什么会这样?<br>是为了确保如下代码成⽴,我们知道 Array.prototype.push 的返回值是⼀个数字, ⽽ Array.prototype.forEach ⽅法期望其回调的返回类型是 void 。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> src = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> dst = [<span class="number">0</span>];</span><br><span class="line">src.<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> dst.<span class="title function_">push</span>(el));  <span class="comment">//箭头函数的简写形式。此时,dst.push(el)会被作为返回值</span></span><br></pre></td></tr></table></figure>

<p>官⽅⽂档的说明:<a href="https://www.typescriptlang.org/docs/handbook/2/functions.html#assignability-of-functions">Assignability of Functions</a></p>
<h3 id="object（少用到）"><a href="#object（少用到）" class="headerlink" title="object（少用到）"></a>object（少用到）</h3><p>object与Objec,实际开发中⽤的较少,因为范围太⼤了</p>
<h4 id="object"><a href="#object" class="headerlink" title="object"></a>object</h4><p>object的含义是所有⾮原始类型,可存储:对象、函数、数组等,由于限制 的范围⽐较宽泛,在实际开发中使⽤的相对较少。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">object</span> <span class="comment">//a的值可以是任何【⾮原始类型】,包括:对象、函数、数组等</span></span><br><span class="line"><span class="comment">// 以下代码,是将【⾮原始类型】赋给a,所以均符合要求</span></span><br><span class="line">a = &#123;&#125;</span><br><span class="line">a = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">a = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">a = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">a = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码,是将【原始类型】赋给a,有警告</span></span><br><span class="line">a = <span class="number">1</span> <span class="comment">// 警告:不能将类型&quot;number&quot;分配给类型&quot;object&quot;</span></span><br><span class="line">a = <span class="literal">true</span> <span class="comment">// 警告:不能将类型&quot;boolean&quot;分配给类型&quot;object&quot;</span></span><br><span class="line">a = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// 警告:不能将类型&quot;string&quot;分配给类型&quot;object&quot;</span></span><br><span class="line">a = <span class="literal">null</span> <span class="comment">// 警告:不能将类型&quot;null&quot;分配给类型&quot;object&quot;</span></span><br><span class="line">a = <span class="literal">undefined</span> <span class="comment">// 警告:不能将类型&quot;undefined&quot;分配给类型&quot;object&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h4><ul>
<li>官⽅描述:所有可以调⽤Object⽅法的类型。 </li>
<li>简单记忆:除了 undefined 和 null 的任何值。 </li>
<li>由于限制的范围实在太⼤了!所以实际开发中使⽤频率极低。 <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:<span class="title class_">Object</span> </span><br><span class="line"><span class="comment">//b的值必须是Object的实例对象(除去undefined和null的任何值)</span></span><br><span class="line"><span class="comment">// b能存储的类型是可以调用到Object方法的类型</span></span><br><span class="line"><span class="comment">// 以下代码,均⽆警告,因为给a赋的值,都是Object的实例对象</span></span><br><span class="line">b = &#123;&#125;</span><br><span class="line">b = &#123;<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line">b = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line">b = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&#x27;123&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;&#125;</span><br><span class="line">b = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line">b = <span class="number">1</span> <span class="comment">// 1不是Object的实例对象,但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="literal">true</span> <span class="comment">// truue不是Object的实例对象,但其包装对象是Object的实例</span></span><br><span class="line">b = <span class="string">&#x27;你好&#x27;</span> <span class="comment">// &quot;你好&quot;不是Object的实例对象,但其包装对象是Object的实例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均有警告</span></span><br><span class="line">b = <span class="literal">null</span> <span class="comment">// 警告:不能将类型&quot;null&quot;分配给类型&quot;Object&quot;</span></span><br><span class="line">b = <span class="literal">undefined</span> <span class="comment">// 警告:不能将类型&quot;undefined&quot;分配给类型&quot;Object&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="enum"><a href="#enum" class="headerlink" title="enum"></a>enum</h3><p>枚举enum可以定义<strong>一组命名常量</strong>,它能增强代码的可读性,也让代码更好维护</p>
<p>实际开发中很可能不小心写错单词，为了避免出错，把一组一组的相关的值放在枚举中（比如上下左右，东南西北）</p>
<h4 id="数字枚举"><a href="#数字枚举" class="headerlink" title="数字枚举"></a>数字枚举</h4><p>数字枚举是最常⻅的枚举类型,其成员的值会⾃动递增,且数字枚举还具备<strong>反向映射的特点</strong>,在下⾯代码的打印中,发现<strong>可以通过值来获取对应的枚举成员名称</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个描述【上下左右】方向的枚举Direction</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123; <span class="comment">//注意，没有等号哦</span></span><br><span class="line">    <span class="title class_">Up</span>,</span><br><span class="line">    <span class="title class_">Down</span>,</span><br><span class="line">    <span class="title class_">Left</span>,</span><br><span class="line">    <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>); <span class="comment">// 打印Direction会看到如下内容</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    0: &#x27;Up&#x27;,</span></span><br><span class="line"><span class="comment">    1: &#x27;Down&#x27;,</span></span><br><span class="line"><span class="comment">    2: &#x27;Left&#x27;,</span></span><br><span class="line"><span class="comment">    3: &#x27;Right&#x27;,</span></span><br><span class="line"><span class="comment">    Up: 0,</span></span><br><span class="line"><span class="comment">    Down: 1,</span></span><br><span class="line"><span class="comment">    Left: 2,</span></span><br><span class="line"><span class="comment">    Right: 3</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">​</span><br><span class="line"><span class="comment">// 反向映射</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>); <span class="comment">//0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>[<span class="number">0</span>]); <span class="comment">//Up</span></span><br></pre></td></tr></table></figure>

<p>也可以指定枚举成员的初始值,其后的成员值会⾃动递增。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">	 <span class="title class_">Up</span> = <span class="number">6</span>,</span><br><span class="line">	 <span class="title class_">Down</span>,</span><br><span class="line">	 <span class="title class_">Left</span>,    </span><br><span class="line">	 <span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>); <span class="comment">// 输出: 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>); <span class="comment">// 输出: 7</span></span><br></pre></td></tr></table></figure>

<p>使⽤数字枚举完成walk 函数中的逻辑,此时我们发现: 代码更加直观易读,⽽且类型安全,同时也更易于维护<br><code>function walk(n: **Direction**)</code></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">	<span class="title class_">Up</span>,</span><br><span class="line">	<span class="title class_">Down</span>,</span><br><span class="line">	<span class="title class_">Left</span>,</span><br><span class="line">	<span class="title class_">Right</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">walk</span>(<span class="params"><span class="attr">n</span>: <span class="title class_">Direction</span></span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Up</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【上】⾛&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Down</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【下】⾛&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Left</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【左】⾛&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (n === <span class="title class_">Direction</span>.<span class="property">Right</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;向【右】⾛&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;未知⽅向&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Up</span>)</span><br><span class="line"><span class="title function_">walk</span>(<span class="title class_">Direction</span>.<span class="property">Down</span>)</span><br></pre></td></tr></table></figure>

<h4 id="字符串枚举"><a href="#字符串枚举" class="headerlink" title="字符串枚举"></a>字符串枚举</h4><p>枚举成员的值是字符串没有反向映射</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">	<span class="title class_">Up</span> = <span class="string">&quot;up&quot;</span>,</span><br><span class="line">	<span class="title class_">Down</span> = <span class="string">&quot;down&quot;</span>,</span><br><span class="line">	<span class="title class_">Left</span> = <span class="string">&quot;left&quot;</span>,</span><br><span class="line">	<span class="title class_">Right</span> = <span class="string">&quot;right&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">dir</span>: <span class="title class_">Direction</span> = <span class="title class_">Direction</span>.<span class="property">Up</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(dir); <span class="comment">// 输出: &quot;up&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="常量枚举"><a href="#常量枚举" class="headerlink" title="常量枚举"></a>常量枚举</h4><p><strong>官⽅描述:常量枚举是⼀种特殊枚举类型,它使⽤ const 关键字定义,在编译时会被内联,避免⽣成⼀些额外的代码</strong></p>
<blockquote>
<p>何为编译时内联?<br>所谓”内联”其实就是 TypeScript 在编译时,会将枚举成员引⽤替换为它们的实际值, ⽽不是⽣成额外的枚举对象。这可以减少⽣成的 JavaScript 代码量,并提⾼运⾏时性能。</p>
</blockquote>
<p>使⽤普通枚举的 TypeScript 代码如下:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Directions</span> &#123;</span><br><span class="line">	<span class="title class_">Up</span>,</span><br><span class="line">	<span class="title class_">Down</span>,</span><br><span class="line">	<span class="title class_">Left</span>,</span><br><span class="line">	<span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure>

<p>编译后⽣成的 JavaScript 代码量较⼤ :</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Directions</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"><span class="title class_">Directions</span></span>) &#123;</span><br><span class="line">	 <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Up&quot;</span>] = <span class="number">0</span>] = <span class="string">&quot;Up&quot;</span>; <span class="comment">// 首先将 `Directions[&quot;Up&quot;]` 设置为 `0`，然后将 `Directions[0]` 设置为 `&quot;Up&quot;`。这使得 `Directions.Up` 的值为 `0`，并且可以通过 `Directions[0]` 获取到 `&quot;Up&quot;`。</span></span><br><span class="line">	 <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Down&quot;</span>] = <span class="number">1</span>] = <span class="string">&quot;Down&quot;</span>;</span><br><span class="line">	 <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Left&quot;</span>] = <span class="number">2</span>] = <span class="string">&quot;Left&quot;</span>;</span><br><span class="line">	 <span class="title class_">Directions</span>[<span class="title class_">Directions</span>[<span class="string">&quot;Right&quot;</span>] = <span class="number">3</span>] = <span class="string">&quot;Right&quot;</span>;</span><br><span class="line">&#125;)(<span class="title class_">Directions</span> || (<span class="title class_">Directions</span> = &#123;&#125;));</span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure>

<p><strong>使⽤常量枚举的 TypeScript 代码如下:</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">enum</span>|<span class="title class_">Directions</span> &#123;</span><br><span class="line">	<span class="title class_">Up</span>,</span><br><span class="line">	<span class="title class_">Down</span>,</span><br><span class="line">	<span class="title class_">Left</span>,</span><br><span class="line">	<span class="title class_">Right</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x = <span class="title class_">Directions</span>.<span class="property">Up</span>;</span><br></pre></td></tr></table></figure>

<p>编译后⽣成的 JavaScript 代码量较⼩:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">0</span> <span class="comment">/* Directions.Up */</span>;</span><br></pre></td></tr></table></figure>


<h3 id="type（重要）"><a href="#type（重要）" class="headerlink" title="type（重要）"></a>type（重要）</h3><p>type 可以为任意类型创建别名,让代码更简洁、可读性更强,同时能更⽅便地进⾏类型复⽤和扩展</p>
<h4 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h4><p>type关键字定义类型别名，跟类型名称,例如下⾯代码中num是number类型别名。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> num = <span class="built_in">number</span>;</span><br><span class="line"><span class="title class_">Let</span> <span class="attr">price</span>: num</span><br><span class="line">price = <span class="number">100</span></span><br></pre></td></tr></table></figure>
<p>再比如给对象类型起一个别名</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printPerson</span>(<span class="params"><span class="attr">person</span>: <span class="title class_">Person</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">printPerson</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;西西&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>再比如</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="variable constant_">ID</span>=<span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printID</span>(<span class="params"><span class="attr">id</span>: ID</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="联合类型-或"><a href="#联合类型-或" class="headerlink" title="联合类型(或)"></a>联合类型(或)</h4><p>TypeScript的类型系统允许我们使用多种运算符，从现有类型中构建新类型<br>由两个或多个其他类型组成的类型<br><strong>联合了偶像使用时候要小心，要进行类型缩小，比如用if进行类型判断，推断出具体类型再进行操作</strong></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Status</span> = <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Gender</span> = <span class="string">&#x27;男&#x27;</span> | <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printStatus</span>(<span class="params"><span class="attr">status</span>: <span class="title class_">Status</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(status);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">logGender</span>(<span class="params"><span class="attr">str</span>: <span class="title class_">Gender</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printStatus</span>(<span class="number">404</span>);</span><br><span class="line"><span class="title function_">printStatus</span>(<span class="string">&#x27;200&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"><span class="title function_">logGender</span>(<span class="string">&#x27;女&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="交叉类型（并）"><a href="#交叉类型（并）" class="headerlink" title="交叉类型（并）"></a>交叉类型（并）</h4><p>交叉类型允许将多个类型合并为⼀个类型<br>合并后的类型将<strong>拥有</strong>所有被合并类型的成员，交叉类型通常⽤于对象类型</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//⾯积</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Area</span> = &#123;</span><br><span class="line">	<span class="attr">height</span>: <span class="built_in">number</span>; <span class="comment">//⾼</span></span><br><span class="line">	<span class="attr">width</span>: <span class="built_in">number</span>; <span class="comment">//宽</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//地址</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Address</span> = &#123;</span><br><span class="line">	<span class="attr">num</span>: <span class="built_in">number</span>; <span class="comment">//楼号</span></span><br><span class="line">	<span class="attr">cell</span>: <span class="built_in">number</span>; <span class="comment">//单元号</span></span><br><span class="line">	<span class="attr">room</span>: <span class="built_in">string</span>; <span class="comment">//房间号</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义类型House,且House是Area和Address组成的交叉类型</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">House</span> = <span class="title class_">Area</span> &amp; <span class="title class_">Address</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="attr">house</span>: <span class="title class_">House</span> = &#123;</span><br><span class="line">	<span class="attr">height</span>: <span class="number">180</span>,</span><br><span class="line">	<span class="attr">width</span>: <span class="number">75</span>,</span><br><span class="line">	<span class="attr">num</span>: <span class="number">6</span>,</span><br><span class="line">	<span class="attr">cell</span>: <span class="number">3</span>,</span><br><span class="line">	<span class="attr">room</span>: <span class="string">&#x27;702&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="TS中对象类型的声明-type和interface"><a href="#TS中对象类型的声明-type和interface" class="headerlink" title="TS中对象类型的声明(type和interface)"></a>TS中对象类型的声明(type和interface)</h3><ol>
<li>用type声明对象<br>比如给对象类型起一个别名<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person1</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printPerson</span>(<span class="params"><span class="attr">person</span>: <span class="title class_">Person1</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">printPerson</span>(&#123;<span class="attr">name</span>: <span class="string">&#x27;西西&#x27;</span>, <span class="attr">age</span>: <span class="number">23</span>&#125;)</span><br></pre></td></tr></table></figure></li>
<li>用interface声明对象<br>注意语法，和type不一样<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person2</span> &#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li>interface和type的区别<br><strong>总之，如果声明对象建议用interface，非对象类型的定义建议用type</strong><br>大部分情况二者可以随便用，但是：</li>
</ol>
<ul>
<li><strong>type类型使用范围更广</strong>，接口类型只能用来声明对象</li>
<li>声明对象时，type中的在interface中都适用<strong>interface可以多次声明同一个接口名称</strong></li>
<li>interface可以被类实现</li>
<li>interface支持继承<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> animal &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> dog <span class="keyword">extends</span> animal &#123;</span><br><span class="line">	<span class="title function_">bark</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="其他语法细节"><a href="#其他语法细节" class="headerlink" title="其他语法细节"></a>其他语法细节</h1><h2 id="类型断言as"><a href="#类型断言as" class="headerlink" title="类型断言as"></a>类型断言as</h2><p>有时候TypeScript无法获取具体的类型信息，这个我们需要使用类型断言<br>比如通过 document.getElementByld，TypeScript只知道该函数会返回 HTMLElement，但并不知道它具体的类型</p>
<p>理解：比如一个类，你知道它是什么类型的，那么这时候使用类型断言<code>as</code>告诉编译器这个类的类型，比类型缩小更好用<br>比如下面的例子，确定这个类是图片元素加<code>as HTMLImageElement</code>，这样可以直接.src和.alt，否则会报错<br><mark>这也是类型断言最常用的用法</mark></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imgEl = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.img&#x27;</span>) <span class="keyword">as</span> <span class="title class_">HTMLImageElement</span>;</span><br><span class="line">imgEl.<span class="property">src</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br><span class="line">imgEl.<span class="property">alt</span> = <span class="string">&#x27;xxx&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="类型断言规则"><a href="#类型断言规则" class="headerlink" title="类型断言规则"></a>类型断言规则</h3><ol>
<li>断言规则<br>TypeScript只允许类型断言转换为<strong>更具体</strong>或者**不太具体(any或unknown)**的类型版本，此规则可防止不可能的强制转换<br>简而言之，可以断言成具体类型，或any和unknown,其他的不能转来转去</li>
</ol>
<h2 id="非空类型断言"><a href="#非空类型断言" class="headerlink" title="非空类型断言!"></a>非空类型断言!</h2><p>非空断言使用<code>!</code>，表示可以确定某个标识符是有值的，跳过ts在编译阶段对它的检测,<strong>使用时一定要慎重，确定它一定有值再用</strong><br>理解：<br>比如说，你的对象中有一个属性是<strong>可能</strong>存在的，你想对这个不确定是否存在的属性进行操作，那么编译器会报错<br>如果只是想访问不确定是否存在的属性，可以用可选链<code>?.</code><br>如果要进行赋值等操作，可以使用非空类型断言，强制告诉编译器这个属性一定存在<br>（也可以用类型缩小）<br>看下面代码就懂了</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//定义接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span>&#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">	<span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">	friend?:&#123;</span><br><span class="line">		<span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">info</span>:<span class="title class_">IPerson</span>=&#123;name : <span class="string">&quot;西西&quot;</span></span><br><span class="line"><span class="attr">age</span>:<span class="number">18</span>&#125;</span><br><span class="line"><span class="comment">//访问属性:-可选链:?.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(info.<span class="property">friend</span>?.<span class="property">name</span>)</span><br><span class="line"><span class="comment">//属性赋值，两种方法：</span></span><br><span class="line"><span class="comment">//1.类型缩小</span></span><br><span class="line"><span class="keyword">if</span>(info.<span class="property">friend</span>)&#123;</span><br><span class="line">	info.<span class="property">friend</span>.<span class="property">name</span>=<span class="string">&quot;西西同学&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.非空类型断言</span></span><br><span class="line">info.<span class="property">friend</span>!.<span class="property">name</span>=<span class="string">&quot;西西同学&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="字面量类型使用规则"><a href="#字面量类型使用规则" class="headerlink" title="字面量类型使用规则"></a>字面量类型使用规则</h2><p>字面量类型是指一个具体的值，比如字符串、数字、布尔值、null、undefined等<br>字面量类型可以作为类型别名使用<br><mark>也可以在封装请求方法中使用(仔细看下面代码，注意细节)</mark></p>
<p>强制变成字面量类型<code>as const</code>（字面量推理）</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Gender</span> = <span class="string">&#x27;男&#x27;</span> | <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> = <span class="string">&#x27;up&#x27;</span> | <span class="string">&#x27;down&#x27;</span> | <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//封装请求方法</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">MethodType</span> = <span class="string">&#x27;GET&#x27;</span> | <span class="string">&#x27;POST&#x27;</span> | <span class="string">&#x27;PUT&#x27;</span> | <span class="string">&#x27;DELETE&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">request</span>(<span class="params"><span class="attr">url</span>: <span class="built_in">string</span>, <span class="attr">method</span>: <span class="title class_">MethodType</span>, data?: <span class="built_in">any</span></span>) &#123;&#125;</span><br><span class="line"><span class="title function_">request</span>(<span class="string">&#x27;/api/user&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;西西&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ts细节</span></span><br><span class="line"><span class="keyword">const</span> info=&#123;</span><br><span class="line">	<span class="attr">url</span>:<span class="string">&quot;xxx&quot;</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&quot;POST&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面这行代码这样写会报错的</span></span><br><span class="line"><span class="comment">//因为info.method编译器只知道是string类型，并不知道是不是MethodType类型</span></span><br><span class="line"><span class="title function_">request</span>(info.<span class="property">url</span>, info.<span class="property">method</span>, info.<span class="property">data</span>);<span class="comment">//不对的写法</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//正确做法：</span></span><br><span class="line"><span class="comment">//解决方法一，类型断言：</span></span><br><span class="line"><span class="title function_">request</span>(info.<span class="property">url</span>, info.<span class="property">method</span> <span class="keyword">as</span><span class="string">&quot;POST&quot;</span>, info.<span class="property">data</span>);</span><br><span class="line"><span class="comment">//解决方法二，使用字面量类型,在定义info时指定 字面量类型</span></span><br><span class="line"><span class="keyword">const</span> info2=&#123;<span class="attr">url</span>:<span class="built_in">string</span>,<span class="attr">method</span>:<span class="title class_">MethodType</span>&#125;=&#123;</span><br><span class="line">	<span class="attr">url</span>:<span class="string">&quot;xxx&quot;</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&quot;POST&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">request</span>(info2.<span class="property">url</span>, info2.<span class="property">method</span>, info2.<span class="property">data</span>);</span><br><span class="line"><span class="comment">//解决方法三，强制变成字面量</span></span><br><span class="line"><span class="comment">//这样做的结果的url变成xxx，method变成POST</span></span><br><span class="line"><span class="keyword">const</span> info3=&#123;</span><br><span class="line">	<span class="attr">url</span>:<span class="string">&quot;xxx&quot;</span></span><br><span class="line">	<span class="attr">method</span>:<span class="string">&quot;POST&quot;</span></span><br><span class="line">&#125;<span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="title function_">request</span>(info3.<span class="property">url</span>, info3.<span class="property">method</span>, info2.<span class="property">data</span>);</span><br></pre></td></tr></table></figure>
<h2 id="类型缩小（类型保护）"><a href="#类型缩小（类型保护）" class="headerlink" title="类型缩小（类型保护）"></a>类型缩小（类型保护）</h2><p>这个很重要，前面已经提过很多次了<br>简而言之，就是在给定的执行路径中(比如if语句)，缩小比声明时更小的类型<br>常见的类型保护有如下几种:<br>typeof;平等缩小(比如&#x3D;&#x3D;&#x3D;、!&#x3D;&#x3D;)instanceof;in</p>
<ol>
<li>typeof(使用做多)<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printID</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">string</span> | <span class="built_in">number</span></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="keyword">typeof</span> id === <span class="string">&#x27;string&#x27;</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(id.<span class="property">length</span>);</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(id);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>平等缩小（一般判断字面量类型）<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//方向的类型判断</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Direction</span> =<span class="string">&quot;left&quot;</span>|<span class="string">&quot;right&quot;</span>|<span class="string">&quot;up&quot;</span>| <span class="string">&quot;down&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">switchDirection</span>(<span class="params"><span class="attr">direction</span>:<span class="title class_">Direction</span></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(direction === <span class="string">&quot;left&quot;</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;左边哦&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>instanceof	<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//传入一个日期，打印日期</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printDate</span>(<span class="params"><span class="attr">date</span>:<span class="built_in">string</span> | <span class="title class_">Date</span></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(date <span class="keyword">instanceof</span> <span class="title class_">Date</span>)&#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(date.<span class="title function_">getTime</span>())</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="variable language_">console</span>.<span class="title function_">log</span>(date)</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>in操作符<br>主要判断某一个对象里是有某个属性<br>如果指定的属性在指定的对象或其原型链中，则in 运算符返回true;<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Fish</span> =&#123;<span class="attr">swim</span>:<span class="function">() =&gt;</span> <span class="built_in">void</span>&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Dog</span> =&#123;<span class="attr">run</span>:<span class="function">() =&gt;</span><span class="built_in">void</span>&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params"><span class="attr">animal</span>: <span class="title class_">Fish</span> <span class="title class_">Dog</span></span>)&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="string">&#x27;swim&#x27;</span><span class="keyword">in</span> animal)&#123;</span><br><span class="line">		animal.<span class="title function_">swim</span>()</span><br><span class="line">	&#125;<span class="keyword">else</span> &#123;animal.<span class="title function_">run</span>()&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="复习类相关知识"><a href="#复习类相关知识" class="headerlink" title="复习类相关知识"></a>复习类相关知识</h1><h2 id="类-class"><a href="#类-class" class="headerlink" title="类 class"></a>类 class</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="comment">// 属性声明</span></span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 构造器</span></span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 方法</span></span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person实例</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;周杰伦&#x27;</span>, <span class="number">38</span>);</span><br></pre></td></tr></table></figure>

<p>Student 继承 Person</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">	<span class="attr">grade</span>: <span class="built_in">string</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 构造器</span></span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span>, <span class="attr">grade</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">super</span>(name, age);</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">grade</span> = grade;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 备注本例中若Student类不需要额外的属性，Student的构造器可以省略</span></span><br><span class="line">	<span class="comment">// 重写从父类继承的方法</span></span><br><span class="line">	<span class="keyword">override</span> <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是学生，我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁，在读<span class="subst">$&#123;<span class="variable language_">this</span>.grade&#125;</span>年级`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 子类自己的方法</span></span><br><span class="line">	<span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在努力学习中......`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="属性修饰符"><a href="#属性修饰符" class="headerlink" title="属性修饰符"></a>属性修饰符</h2><table>
<thead>
<tr>
<th>修饰符</th>
<th>含义</th>
<th>具体规则</th>
</tr>
</thead>
<tbody><tr>
<td>public</td>
<td>公开的</td>
<td>可以被:类内部、子类、类外部访问。</td>
</tr>
<tr>
<td>protected</td>
<td>受保护的</td>
<td>可以被: 类内部、子类访问。</td>
</tr>
<tr>
<td>private</td>
<td>私有的</td>
<td>可以被: 类内部访问。</td>
</tr>
<tr>
<td>readonly</td>
<td>只读属性</td>
<td>属性无法修改。</td>
</tr>
</tbody></table>
<h3 id="public-修饰符"><a href="#public-修饰符" class="headerlink" title="public 修饰符"></a>public 修饰符</h3><p>Person 类</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="comment">// name写了public修饰符，age没写修饰符，最终都是public修饰符</span></span><br><span class="line">	<span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 类的内部可以访问public修饰的name和age</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="comment">// 类的外部可以访问public修饰的属性</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>

<p>Student 继承 Person</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">super</span>(name, age);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 【子类中】可以访问父类中public修饰的：name属性、age属性</span></span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁的<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在努力学习`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>属性的简写形式<br>完整写法</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">​</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">​<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">简写形式</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>ts</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="protected-修饰符"><a href="#protected-修饰符" class="headerlink" title="protected 修饰符"></a>protected 修饰符</h3><p>Person类</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">// name和age是受保护属性，不能在类外部访问，但可以在类与子类中访问</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">protected</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">protected</span> <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getDetails是受保护方法，不能在类外部访问，但可以在类与子类中访问</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">getDetails</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的name和age属性</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>, 年龄是: <span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// introduce是公开方法，类、子类、类外部都能使用</span></span><br><span class="line">    <span class="title function_">introduce</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 类中能访问受保护的getDetails方法</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="title function_">getDetails</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;杨超越&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"><span class="comment">// 可以在类外部访问introduce</span></span><br><span class="line">p1.<span class="title function_">introduce</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.getDetails();</span></span><br><span class="line"><span class="comment">// p1.name;</span></span><br><span class="line"><span class="comment">// p1.age;</span></span><br></pre></td></tr></table></figure>

<p>Student 继承 Person</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">study</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 子类中可以访问introduce</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">introduce</span>();</span><br><span class="line">        <span class="comment">// 子类中可以访问name</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在努力学习`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&#x27;tom&#x27;</span>, <span class="number">17</span>);</span><br><span class="line">s1.<span class="title function_">introduce</span>();</span><br></pre></td></tr></table></figure>

<h4 id="private-修饰符"><a href="#private-修饰符" class="headerlink" title="private 修饰符"></a>private 修饰符</h4><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">	<span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">	<span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">	<span class="comment">// IDCard属性为私有的(private)属性，只能在类内部使用</span></span></span><br><span class="line"><span class="params">	<span class="keyword">private</span> <span class="title class_">IDCard</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">	</span>) &#123;&#125;</span><br><span class="line">	​</span><br><span class="line">	<span class="keyword">private</span> <span class="title function_">getPrivateInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 类内部可以访问私有的(private)属性-IDCard</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">`身份证号码为: <span class="subst">$&#123;<span class="variable language_">this</span>.IDCard&#125;</span>`</span></span><br><span class="line">	&#125;</span><br><span class="line">	​</span><br><span class="line">	<span class="title function_">getInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 类内部可以访问受保护的(protected)属性name和age</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">`我叫: <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，今年刚满<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁`</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	​</span><br><span class="line">	<span class="title function_">getFullInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// 类内部可以访问公开的getInfo方法，也可以访问私有的getPrivateInfo方法</span></span><br><span class="line">	<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">getInfo</span>() + <span class="string">&#x27;,&#x27;</span> + <span class="variable language_">this</span>.<span class="title function_">getPrivateInfo</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;110114198702034432&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getFullInfo</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="title function_">getInfo</span>());</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 以下代码均报错</span></span><br><span class="line"><span class="comment">// p1.name</span></span><br><span class="line"><span class="comment">// p1.age</span></span><br><span class="line"><span class="comment">// p1.IDCard</span></span><br><span class="line"><span class="comment">// p1.getPrivateInfo()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="readonly-修饰符"><a href="#readonly-修饰符" class="headerlink" title="readonly 修饰符"></a>readonly 修饰符</h4><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">	 <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">		 <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">vin</span>: <span class="built_in">string</span>, <span class="comment">//⻋辆识别码,为只读属性</span></span></span><br><span class="line"><span class="params">		 <span class="keyword">public</span> <span class="keyword">readonly</span> <span class="attr">year</span>: <span class="built_in">number</span>,<span class="comment">//出⼚年份,为只读属性</span></span></span><br><span class="line"><span class="params">		 <span class="keyword">public</span> <span class="attr">color</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">		 <span class="keyword">public</span> <span class="attr">sound</span>: <span class="built_in">string</span></span></span><br><span class="line"><span class="params"> </span>) &#123; &#125;</span><br><span class="line"> <span class="comment">// 打印⻋辆信息</span></span><br><span class="line"> <span class="title function_">displayInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">	 <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`</span></span><br><span class="line"><span class="string">	 识别码:<span class="subst">$&#123;<span class="variable language_">this</span>.vin&#125;</span>,</span></span><br><span class="line"><span class="string">	 出⼚年份:<span class="subst">$&#123;<span class="variable language_">this</span>.year&#125;</span>,</span></span><br><span class="line"><span class="string">	 颜⾊:<span class="subst">$&#123;<span class="variable language_">this</span>.color&#125;</span>,</span></span><br><span class="line"><span class="string">	 ⾳响:<span class="subst">$&#123;<span class="variable language_">this</span>.sound&#125;</span></span></span><br><span class="line"><span class="string"> `</span>);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> car = <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&#x27;1HGCM82633A123456&#x27;</span>, <span class="number">2018</span>, <span class="string">&#x27;⿊⾊&#x27;</span>, <span class="string">&#x27;Bose⾳响&#x27;</span>);</span><br><span class="line">car.<span class="title function_">displayInfo</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下代码均错误:不能修改 readonly 属性</span></span><br><span class="line"><span class="comment">// car.vin = &#x27;897WYE87HA8SGDD8SDGHF&#x27;; </span></span><br><span class="line"><span class="comment">// car.year = 2020;</span></span><br></pre></td></tr></table></figure>

<h2 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h2><ul>
<li>概述:抽象类是⼀种⽆法被实例化的类,专⻔⽤来定义类的结构和⾏为,类中可以写抽象 ⽅法,也可以写具体实现。抽象类主要⽤来为其派⽣类提供⼀个基础结构,要求其派⽣类  必须实现其中的抽象⽅法。</li>
<li>简记:抽象类&#x3D;&#x3D;不能实例化&#x3D;&#x3D;,其意义是&#x3D;&#x3D;可以被继承&#x3D;&#x3D;,抽象类⾥可以有&#x3D;&#x3D;普通⽅法&#x3D;&#x3D;、也可以有&#x3D;&#x3D;抽象⽅法&#x3D;&#x3D;。</li>
</ul>
<h3 id="通过以下场景-理解抽象类"><a href="#通过以下场景-理解抽象类" class="headerlink" title="通过以下场景,理解抽象类:"></a>通过以下场景,理解抽象类:</h3><p>我们定义⼀个抽象类 Package ,表示所有包裹的基本结构,任何包裹都有重量属性 weigh t ,包裹都需要计算运费。但不同类型的包裹(如:标准速度、特快专递)都有不同的运费计算 ⽅式,因此⽤于计算运费的 calculate ⽅法是⼀个抽象⽅法,必须由具体的⼦类来实现。</p>
<p>Package 类 TypeScript</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Package</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">weight</span>: <span class="built_in">number</span></span>)&#123;&#125; </span><br><span class="line">	<span class="comment">// 抽象⽅法:⽤来计算运费,不同类型包裹有不同的计算⽅式</span></span><br><span class="line">	<span class="keyword">abstract</span> <span class="title function_">calculate</span>(): <span class="built_in">number</span> <span class="comment">// 通⽤⽅法:打印包裹详情</span></span><br><span class="line">	<span class="title function_">printPackage</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`包裹重量为: <span class="subst">$&#123;<span class="variable language_">this</span>.weight&#125;</span>kg,运费为: <span class="subst">$&#123;<span class="variable language_">this</span>.calculate()&#125;</span>元`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>StandardPackage 类继承了 Package ,实现了 calculate ⽅法:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 标准包裹</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StandardPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"> <span class="attr">weight</span>: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">	<span class="keyword">public</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span> <span class="comment">// 每公⽄的固定费率 </span></span></span><br><span class="line"><span class="params">	</span>) &#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 实现抽象⽅法:计算运费</span></span><br><span class="line">	<span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span>;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建标准包裹实例</span></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> <span class="title class_">StandardPackage</span>(<span class="number">10</span>,<span class="number">5</span>)</span><br><span class="line">s1.<span class="title function_">printPackage</span>()</span><br></pre></td></tr></table></figure>

<p>ExpressPackage 类继承了 Package ,实现了 calculate ⽅法:</p>
<p>ExpressPackage 类(特快包裹) </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ExpressPackage</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Package</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">		<span class="keyword">private</span> <span class="attr">weight</span>: <span class="built_in">number</span>, <span class="comment">// 每公⽄的固定费率(快速包裹更⾼)</span></span></span><br><span class="line"><span class="params">		<span class="keyword">private</span> <span class="attr">unitPrice</span>: <span class="built_in">number</span>,  <span class="keyword">private</span> <span class="attr">additional</span>: <span class="built_in">number</span> <span class="comment">// 超出10kg以后的附加费</span></span></span><br><span class="line"><span class="params">	</span>)&#123; <span class="variable language_">super</span>(weight) &#125;</span><br><span class="line">	</span><br><span class="line">	 <span class="comment">// 实现抽象⽅法:计算运费</span></span><br><span class="line">	 <span class="title function_">calculate</span>(): <span class="built_in">number</span> &#123;</span><br><span class="line">		 <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">weight</span> &gt; <span class="number">10</span>)&#123;</span><br><span class="line">		 <span class="comment">// 超出10kg的部分,每公⽄多收additional对应的价格</span></span><br><span class="line">		 <span class="keyword">return</span> <span class="number">10</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span> + (<span class="variable language_">this</span>.<span class="property">weight</span> - <span class="number">10</span>) * <span class="variable language_">this</span>.<span class="property">additional</span></span><br><span class="line">		 &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">		 <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">weight</span> * <span class="variable language_">this</span>.<span class="property">unitPrice</span>;</span><br><span class="line">		 &#125;</span><br><span class="line">	 &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 创建特快包裹实例</span></span><br><span class="line"><span class="keyword">const</span> e1 = <span class="keyword">new</span> <span class="title class_">ExpressPackage</span>(<span class="number">13</span>,<span class="number">8</span>,<span class="number">2</span>)</span><br><span class="line">e1.<span class="title function_">printPackage</span>()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>[!NOTE] 总结:何时使⽤抽象类?<br>1.定义通用接口 :为⼀组相关的类定义通⽤的⾏为(⽅法或属性)时。<br>2.提供基础实现：在抽象类中提供某些⽅法或为其提供基础实现,这样派⽣类就可以继承这 些实现。<br>3.确保关键实现：强制派⽣类实现⼀些关键⾏为。<br>4.共享代码和逻辑:当多个类需要共享部分代码时,抽象类可以避免代码重复。</p>
</blockquote>
<h2 id="interface-接⼝"><a href="#interface-接⼝" class="headerlink" title="interface(接⼝)"></a>interface(接⼝)</h2><p>interface 是⼀种<code>定义结构</code>的⽅式,主要作⽤是为:类、对象、函数等规定<code>⼀种契约</code>,这样 可以确保代码的⼀致性和类型安全,但要注意 interface <code>只能</code>定义<code>格式</code>,<code>不能</code>包含<code>任何实现</code> !</p>
<h3 id="定义类结构"><a href="#定义类结构" class="headerlink" title="定义类结构"></a>定义类结构</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PersonInterface接口，用与限制Person类的格式</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个类Person，实现 PersonInterface 接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">        <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span></span></span><br><span class="line"><span class="params">    </span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 实现接口中的 speak 方法</span></span><br><span class="line">    <span class="title function_">speak</span>(<span class="attr">n</span>: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// 打印出包含名字和年龄的问候语句</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`你好，我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的年龄是<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个 Person 类的实例 p1，传入名字 &#x27;tom&#x27; 和年龄 18</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;tom&#x27;</span>, <span class="number">18</span>);</span><br><span class="line">p1.<span class="title function_">speak</span>(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h3 id="定义对象结构"><a href="#定义对象结构" class="headerlink" title="定义对象结构"></a>定义对象结构</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">UserInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="keyword">readonly</span> <span class="attr">gender</span>: <span class="built_in">string</span>; <span class="comment">// 只读属性</span></span><br><span class="line">    age?: <span class="built_in">number</span>; <span class="comment">// 可选属性</span></span><br><span class="line">    <span class="attr">run</span>: <span class="function">(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">UserInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="title function_">run</span>(<span class="params">n</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`奔跑了<span class="subst">$&#123;n&#125;</span>米`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="定义函数结构"><a href="#定义函数结构" class="headerlink" title="定义函数结构"></a>定义函数结构</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义函数结构</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CountInterface</span> &#123;</span><br><span class="line">    (<span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span>): <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">count</span>: <span class="title class_">CountInterface</span> = <span class="function">(<span class="params">x, y</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口之间的继承"><a href="#接口之间的继承" class="headerlink" title="接口之间的继承"></a>接口之间的继承</h3><p>一个 interface 继承另一个 interface，从而实现代码的复用</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 姓名</span></span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">    <span class="attr">grade</span>: <span class="built_in">string</span>; <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">stu</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">    <span class="attr">grade</span>: <span class="string">&#x27;高三&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="接口自动合井（可重复定义）"><a href="#接口自动合井（可重复定义）" class="headerlink" title="接口自动合井（可重复定义）"></a>接口自动合井（可重复定义）</h3><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// PersonInterface接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="comment">// 属性声明</span></span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 给PersonInterface接口添加新属性</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="comment">// 方法声明</span></span><br><span class="line">	<span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// Person类实现PersonInterface</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">	​</span><br><span class="line">	<span class="comment">// 构造器</span></span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">age</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">	<span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">	&#125;</span><br><span class="line">	​</span><br><span class="line">	<span class="comment">// 方法</span></span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好!我是老师:&#x27;</span>, <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="总结-何时使⽤接⼝"><a href="#总结-何时使⽤接⼝" class="headerlink" title="总结:何时使⽤接⼝?"></a>总结:何时使⽤接⼝?</h3><ol>
<li>定义对象的格式: 描述数据模型、API 响应格式、配置对象……..等等,是开发中⽤的最多 的场景。</li>
<li>类的契约:规定⼀个类需要实现哪些属性和⽅法。</li>
<li>扩展已有接⼝:⼀般⽤于扩展第三⽅库的类型, 这种特性在⼤型项⽬中可能会⽤到。</li>
</ol>
<h1 id="⼀些相似概念的区别"><a href="#⼀些相似概念的区别" class="headerlink" title="⼀些相似概念的区别"></a>⼀些相似概念的区别</h1><h2 id="interface-与-type-的区别"><a href="#interface-与-type-的区别" class="headerlink" title="interface 与 type 的区别"></a>interface 与 type 的区别</h2><p>（这部分在上文type–TS中对象类型的声明里也有）<br>相同点: interface 和 type 都可以⽤于定义对象结构,在定义对象结构时两者可以 互换。 </p>
<p>不同点:<br>interface :更专注于定义对象和类的结构,⽀持继承、合并。<br>type :可以定义类型别名、联合类型、交叉类型,但不⽀持继承和⾃动合并。</p>
<p>interface 和 type 都可以定义对象结构 TypeScript</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使⽤ interface 定义 Person 对象</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使⽤ type 定义 Person 对象</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">	<span class="title function_">speak</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 使⽤PersonInterface</span></span><br><span class="line"><span class="comment">/* let person: PersonInterface = &#123;</span></span><br><span class="line"><span class="comment"> name:&#x27;张三&#x27;,</span></span><br><span class="line"><span class="comment"> age:18,</span></span><br><span class="line"><span class="comment"> speak()&#123;</span></span><br><span class="line"><span class="comment"> console.log(`我叫:$&#123;this.name&#125;,年龄:$&#123;this.age&#125;`)</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br><span class="line"><span class="comment">// 使⽤PersonType</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">person</span>: <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫:<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>,年龄:<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>`</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> interface 可以继承、合并</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 姓名</span></span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 年龄</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StudentInterface</span> <span class="keyword">extends</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">	<span class="attr">grade</span>: <span class="built_in">string</span>; <span class="comment">// 年级</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentInterface</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">	<span class="attr">grade</span>: <span class="string">&#x27;高二&#x27;</span>,</span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>type 的交叉类型</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使⽤ type 定义 Person 类型,并通过交叉类型实现属性的合并</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">PersonType</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// 姓名</span></span><br><span class="line">	<span class="attr">age</span>: <span class="built_in">number</span>; <span class="comment">// 年龄</span></span><br><span class="line">	&#125; &amp; &#123;</span><br><span class="line">	<span class="attr">speak</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使⽤ type 定义 Student 类型,并通过交叉类型继承 PersonType</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">StudentType</span> = <span class="title class_">PersonType</span> &amp; &#123;</span><br><span class="line">	<span class="attr">grade</span>: <span class="built_in">string</span>; <span class="comment">// 年级</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">student</span>: <span class="title class_">StudentType</span> = &#123;</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">	<span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">	<span class="attr">grade</span>: <span class="string">&#x27;⾼⼆&#x27;</span>,</span><br><span class="line">	<span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>, <span class="variable language_">this</span>.<span class="property">age</span>, <span class="variable language_">this</span>.<span class="property">grade</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="interface-与-抽象类的区别"><a href="#interface-与-抽象类的区别" class="headerlink" title="interface 与 抽象类的区别"></a>interface 与 抽象类的区别</h2><p>相同点:都能定义⼀个类的格式(定义类应遵循的契约)<br>不相同: </p>
<ul>
<li>接⼝:只能描述结构,不能有任何实现代码,⼀个类可以实现多个接⼝。</li>
<li>抽象类:既可以包含抽象⽅法,也可以包含具体⽅法, ⼀个类只能继承⼀个抽象类。</li>
</ul>
<p>⼀个类可以实现多个接⼝ TypeScript</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// FlyInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">FlyInterface</span> &#123;</span><br><span class="line">	<span class="title function_">fly</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义 SwimInterface 接⼝</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">	<span class="title function_">swim</span>(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Duck 类实现了 FlyInterface 和 SwimInterface 两个接⼝</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Duck</span> <span class="keyword">implements</span> <span class="title class_">FlyInterface</span>, <span class="title class_">SwimInterface</span> &#123;</span><br><span class="line">	<span class="title function_">fly</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以⻜&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="title function_">swim</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;鸭⼦可以游泳&#x27;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建⼀个 Duck 实例</span></span><br><span class="line"><span class="keyword">const</span> duck = <span class="keyword">new</span> <span class="title class_">Duck</span>();</span><br><span class="line">duck.<span class="title function_">fly</span>(); <span class="comment">// 输出: 鸭⼦可以⻜</span></span><br><span class="line">duck.<span class="title function_">swim</span>(); <span class="comment">// 输出: 鸭⼦可以游泳</span></span><br></pre></td></tr></table></figure>


<h1 id="泛型和类型声明文件"><a href="#泛型和类型声明文件" class="headerlink" title="泛型和类型声明文件"></a>泛型和类型声明文件</h1><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><p>泛型允许我们在定义函数、类或接⼝时,使⽤类型参数来表示未指定的类型,这些参数在具体使⽤时,才被指定具体的类型,泛型能让同⼀段代码适⽤于多种类型,同时仍然保持类型的安全性。</p>
<p>举例:如下代码中 <code>&lt;T&gt;</code> 就是泛型,(不⼀定⾮叫 T ),设置泛型后即可在函数中使⽤ T 来表 示该类型:</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 泛型函数</span></span><br><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">function</span> logData&lt;T&gt;(<span class="attr">data</span>: T): T &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>&gt;(<span class="number">100</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型可以有多个</span></span><br><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">function</span> logData&lt;T, U&gt;(<span class="attr">data1</span>: T, <span class="attr">data2</span>: U): T | U &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data1, data2)</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Date</span>.<span class="title function_">now</span>() % <span class="number">2</span> ? data1 : data2</span><br><span class="line">&#125;</span><br><span class="line">logData&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt;(<span class="number">100</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">logData&lt;<span class="built_in">string</span>, <span class="built_in">boolean</span>&gt;(<span class="string">&#x27;ok&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型接口</span></span><br><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">PersonInterface</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">    <span class="attr">extraInfo</span>: T</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p1</span>: <span class="title class_">PersonInterface</span>&lt;<span class="built_in">string</span>&gt;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">p2</span>: <span class="title class_">PersonInterface</span>&lt;<span class="built_in">number</span>&gt;</span><br><span class="line">p1 = &#123; <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">extraInfo</span>: <span class="string">&#x27;一个好人&#x27;</span> &#125;</span><br><span class="line">p2 = &#123; <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">extraInfo</span>: <span class="number">250</span> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 泛型约束</span></span><br><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LengthInterface</span> &#123;</span><br><span class="line">    <span class="attr">length</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 约束规则是：传入的类型T必须具有 length 属性</span></span><br><span class="line"><span class="keyword">function</span> logPerson&lt;T <span class="keyword">extends</span> <span class="title class_">LengthInterface</span>&gt;(<span class="attr">data</span>: T): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">length</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">logPerson&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 报错：因为number不具备length属性</span></span><br><span class="line"><span class="comment">// logPerson&lt;number&gt;(100)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 泛型类</span></span><br><span class="line"><span class="title class_">TypeScript</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"><span class="keyword">public</span> <span class="attr">name</span>: <span class="built_in">string</span>, <span class="keyword">public</span> <span class="attr">age</span>: <span class="built_in">number</span>, <span class="keyword">public</span> <span class="attr">extraInfo</span>: T</span>) &#123;&#125;</span><br><span class="line">    <span class="title function_">speak</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我叫<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>今年<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁了`</span>)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">extraInfo</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试代码1</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="built_in">number</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, <span class="number">250</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试代码2</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">JobInfo</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">company</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>&lt;<span class="title class_">JobInfo</span>&gt;(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>, &#123; <span class="attr">title</span>: <span class="string">&#x27;研发总监&#x27;</span>, <span class="attr">company</span>: <span class="string">&#x27;发发发科技公司&#x27;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="类型声明文件"><a href="#类型声明文件" class="headerlink" title="类型声明文件"></a>类型声明文件</h2><p>类型声明⽂件是 TypeScript 中的⼀种特殊⽂件，通常以 .d.ts 作为扩展名。它的主要作⽤是为现有的<br>JavaScript 代码提供类型信息，使得 TypeScript 能够在使用这些 JavaScript 库或模块时进行类型检查和提示。</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// demo.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">	<span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// demo.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">function</span> <span class="title function_">mul</span>(<span class="params"><span class="attr">a</span>: <span class="built_in">number</span>, <span class="attr">b</span>: <span class="built_in">number</span></span>): <span class="built_in">number</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; add, mul &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index.ts</span></span><br><span class="line"><span class="comment">// example.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; add, mul &#125; <span class="keyword">from</span> <span class="string">&quot;./demo.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">add</span>(<span class="number">2</span>, <span class="number">3</span>); <span class="comment">// x 类型为 number</span></span><br><span class="line"><span class="keyword">const</span> y = <span class="title function_">mul</span>(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// y 类型为 number</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x, y);</span><br></pre></td></tr></table></figure>

<h1 id="typescript高频基础面试题"><a href="#typescript高频基础面试题" class="headerlink" title="typescript高频基础面试题"></a>typescript高频基础面试题</h1><h3 id="TypeScript-和-JavaScript-的区别是什么"><a href="#TypeScript-和-JavaScript-的区别是什么" class="headerlink" title="TypeScript 和 JavaScript 的区别是什么"></a>TypeScript 和 JavaScript 的区别是什么</h3><p>TypeScript 是 JavaScript 的超集，添加了静态类型检查（能够在编译时检查类型错误）<br>类型注解：TS 支持 : string、: number 等类型注解，JS 无此功能<br>接口（Interface）：TS 可定义对象结构（如 interface Person { name: string; age: number }）。<br>工具支持：TS 提供更好的 IDE 支持（如自动补全、错误提示）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// JS：无类型检查</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">greet</span>(<span class="number">123</span>); <span class="comment">// 运行时错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TS：静态类型检查</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">name: string</span>): <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">greet</span>(<span class="number">123</span>); <span class="comment">// 编译时报错</span></span><br></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 显式类型注解</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">age</span>: number = <span class="number">25</span>;</span><br><span class="line">age = <span class="string">&quot;25&quot;</span>; <span class="comment">// 报错：不能将字符串赋值给 number 类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 类型推断</span></span><br><span class="line"><span class="keyword">let</span> username = <span class="string">&quot;Alice&quot;</span>; <span class="comment">// 推断为 string 类型</span></span><br><span class="line">username = <span class="number">123</span>; <span class="comment">// 报错：不能将数字赋值给 string 类型</span></span><br></pre></td></tr></table></figure>
<h3 id="什么是联合类型（Union-Types）？如何使用"><a href="#什么是联合类型（Union-Types）？如何使用" class="headerlink" title="什么是联合类型（Union Types）？如何使用"></a>什么是联合类型（Union Types）？如何使用</h3><p>合类型：用 | 表示参数或变量可以是多种类型中的一种。<br>应用场景：处理可能为多种类型的值（如输入框内容可能是数字或字符串）</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printId</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span> | <span class="built_in">string</span></span>): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`ID: <span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">printId</span>(<span class="number">101</span>); <span class="comment">// OK</span></span><br><span class="line"><span class="title function_">printId</span>(<span class="string">&quot;101&quot;</span>); <span class="comment">// OK</span></span><br><span class="line"><span class="title function_">printId</span>(<span class="literal">true</span>); <span class="comment">// 报错：类型 &quot;boolean&quot; 不在 &quot;number | string&quot; 中</span></span><br></pre></td></tr></table></figure>
<h3 id="可空类型怎么处理"><a href="#可空类型怎么处理" class="headerlink" title="可空类型怎么处理"></a>可空类型怎么处理</h3><ul>
<li>可空类型就是用 <code>| null | undefined</code> 表示变量可能为空.<br>比如 <code>let name: string | null</code></li>
<li>处理的时候有两种方式：</li>
<li><ul>
<li>用可选链 ?.：比如 user?.name，如果 user 是 null 或 undefined，就不会报错直接返回 undefined。</li>
</ul>
</li>
<li><ul>
<li>用空值合并 ??：比如 text ?? “默认值”，如果 text 是 null&#x2F;undefined，就用右边的默认值。</li>
</ul>
</li>
<li>实际场景：在处理 API 数据时，接口返回的字段可能为空，用 ?? 给默认值能避免页面渲染报错。</li>
</ul>
<h3 id="any-和-unknown-有什么区别"><a href="#any-和-unknown-有什么区别" class="headerlink" title="any 和 unknown 有什么区别"></a>any 和 unknown 有什么区别</h3><p>这两个都是“不确定类型”，但 any 更危险，因为它绕过了类型检查</p>
]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>typescript</tag>
      </tags>
  </entry>
  <entry>
    <title>项目篇-项目梳理（Vue3+TS实现后台管理系统）</title>
    <url>/2025/06/04/23-myselfUp/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>项目主要功能虽然都做完了，但是发现不会把它写在简历上，换句话说，我不知道如何介绍项目的功能与实现，这篇文章是我对项目的的梳理<br>完整的项目笔记见<a href="https://nie7-melon.github.io/2025/04/15/23-nievuets/">vue3+t后台管理系统项目笔记</a></p>
<h2 id="项目STAR法则："><a href="#项目STAR法则：" class="headerlink" title="项目STAR法则："></a>项目STAR法则：</h2><p><strong>最好的技术表达，不是复述工具名称，而是说清：你为何这样选择，以及它解决了什么问题</strong><br>(感谢大模型老师对我学习STAR法则的帮助)</p>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><p><strong>核心框架和工具：</strong><br>Vue 3<br>TypeScript<br>pnpm 包管理器<br>Vite 构建工具<br>Pinia 状态管理<br>Vue Router 路由管理<br><strong>UI 框架：</strong><br>Element Plus<br><strong>其他重要依赖：</strong><br>axios HTTP请求<br>echarts 图表库<br>countup.js 数字动画<br>dayjs 日期处理</p>
<h1 id="登录模块"><a href="#登录模块" class="headerlink" title="登录模块"></a>登录模块</h1><h2 id="核心实现"><a href="#核心实现" class="headerlink" title="核心实现"></a>核心实现</h2><ol>
<li><p><strong>Element Plus组件化登录架构</strong>  </p>
<ul>
<li>采用组件化思想拆解登录页为<code>登录面板容器</code>+<code>账号登录</code>+<code>手机登录</code>三大模块</li>
<li>采用<code>el-tabs</code>实现账号&#x2F;手机登录模式切换，通过<code>v-model=&quot;activeName&quot;</code>动态控制激活面板</li>
<li><code>el-link</code> <code>el-checkbox</code> <code>el-button</code> <code>el-message</code> <code>el-icon</code> + 按需引入配置</li>
</ul>
</li>
<li><p><strong>账号密码表单校验</strong>  </p>
<ul>
<li>基于<code>el-form</code>+<code>el-input</code>组件构建表单体系，配置可扩展的<code>rules</code>验证规则集</li>
</ul>
</li>
<li><p><strong>组件通信机制</strong>  </p>
<ul>
<li>通过<code>defineExpose</code>暴露子组件方法，实现父组件触发登录验证，解决父子组件通信问题</li>
</ul>
</li>
<li><p><strong>类型抽取与token常量安全</strong>  </p>
<ul>
<li>抽离<code>IAccount</code>核心对象类型，便于复用，约束账号密码结构</li>
<li>用常量管理关键字段（如<code>LOGIN_TOKEN</code>），降低维护成本</li>
</ul>
</li>
<li><p><strong>Token保存与Cache封装</strong></p>
<ul>
<li>设计<code>localStorage + Pinia</code>双缓存持久化Token </li>
<li>封装通用缓存工具类<code>cache.ts</code>，实现<code>JSON.stringify()``	JSON.parse()</code>自动处理对象数据，提升代码复用性与健壮性</li>
</ul>
</li>
</ol>
<h1 id="权限管理模块"><a href="#权限管理模块" class="headerlink" title="权限管理模块"></a>权限管理模块</h1><h2 id="核心实现："><a href="#核心实现：" class="headerlink" title="核心实现："></a>核心实现：</h2><ol>
<li><strong>通过 Axios 请求拦截器自动携带 token</strong><ul>
<li>避免手动添加 token 的冗余操作，提升开发效率</li>
</ul>
</li>
<li><strong>导航守卫设计</strong><ul>
<li>校验<code>/main</code>开头的路径，未登录用户强制跳转至登录页，防止越权访问\</li>
</ul>
</li>
<li><strong>用户-角色-菜单映射机制</strong><ul>
<li>登录成功后，先根据用户ID获取用户信息，再通过角色ID请求菜单数据</li>
<li>对用户的userInfo和userMenu数据进行本地缓存和store缓存</li>
</ul>
</li>
<li><strong>动态路由(基于菜单管理)</strong><ul>
<li>通过<code>mapMenusToRoutes</code>工具将菜单路径转换为路由对象</li>
<li>使用<code>addRoute</code>动态将子路由添加到main路由下，实现不同角色加载不同菜单与路由</li>
</ul>
</li>
</ol>
<h3 id="STAR法则描述："><a href="#STAR法则描述：" class="headerlink" title="STAR法则描述："></a>STAR法则描述：</h3><p><strong>S（Situation）- 项目背景</strong><br>系统需要实现基于角色的权限控制，用户登录后需根据角色动态加载菜单与路由，并保障敏感页面的访问权限<br><strong>T（Task） - 任务目标</strong><br>认证与权限校验：登录成功后自动携带token，拦截无权限访问；<br>动态路由生成：根据用户角色加载对应的菜单与路由；<br>数据持久化：缓存用户信息与菜单数据，避免重复请求<br><strong>A（Action） - 技术实现</strong></p>
<ul>
<li><strong>Token 拦截与权限校验</strong></li>
<li><ul>
<li>登录成功后通过 Axios 拦截器自动携带 token，确保后续请求权限校验；</li>
</ul>
</li>
<li><ul>
<li>在 router.beforeEach 中校验 &#x2F;main 开头的路径，未登录用户重定向至登录页。</li>
</ul>
</li>
<li><strong>RBAC 权限控制</strong></li>
<li><ul>
<li>用户信息获取：根据用户 ID 请求用户详情（含角色 ID）；</li>
</ul>
</li>
<li><ul>
<li>菜单权限加载：通过角色 ID 获取菜单数据（userMenus），结合 mapMenusToRoutes 将菜单路径映射为路由对象；</li>
</ul>
</li>
<li><ul>
<li>动态路由添加：使用 Vue Router 的 addRoute 方法将路由动态添加到 main 路由下。</li>
</ul>
</li>
<li><ul>
<li>数据缓存与状态管理<br>用户信息和菜单数据通过 Pinia 存储到 loginStore，并通过 localStorage 持久化，确保页面刷新后状态不丢失。<br><strong>R（Result） - 成果与价值</strong></li>
</ul>
</li>
<li>实现按角色动态加载菜单与路由，不同用户访问权限隔离；</li>
<li>权限实时性：切换角色时自动刷新路由，保障权限一致性；</li>
<li>开发效率提升：新增菜单只需维护文件结构，无需手动修改路由配置</li>
</ul>
<h1 id="动态路由权限系统"><a href="#动态路由权限系统" class="headerlink" title="动态路由权限系统"></a>动态路由权限系统</h1><p><strong>技术栈</strong>：Vue Router + Vite Glob API + 递归算法  </p>
<h2 id="核心实现-1"><a href="#核心实现-1" class="headerlink" title="核心实现"></a>核心实现</h2><ol>
<li><strong>自动化路由收集</strong>  <ul>
<li>使用 Vite 的 <code>import.meta.glob</code> 动态加载路由模块：  <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">     <span class="keyword">const</span> files = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="title function_">glob</span>(<span class="string">&#x27;../router/main/**/*.ts&#x27;</span>, &#123; <span class="attr">eager</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> files) &#123;</span><br><span class="line">       localRoutes.<span class="title function_">push</span>(files[key].<span class="property">default</span>)</span><br><span class="line">     &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">   - 实现路由模块 **零手工注册**，新增路由文件自动识别  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **智能路由映射**  </span></span><br><span class="line"><span class="string">   - 递归匹配用户菜单与本地路由路径：  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> ts</span><br><span class="line">     <span class="keyword">const</span> route = localRoutes.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">path</span> === submenu.<span class="property">url</span>)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   - 双层级路由注入策略：  </span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>ts</span><br><span class="line">     <span class="comment">// 一级菜单重定向</span></span><br><span class="line">     routes.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: menu.<span class="property">url</span>, <span class="attr">redirect</span>: route.<span class="property">path</span> &#125;)</span><br><span class="line">     <span class="comment">// 二级菜单路由</span></span><br><span class="line">     routes.<span class="title function_">push</span>(route)</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. **路由辅助工具集**  </span></span><br><span class="line"><span class="string">   - **路径映射菜单**：`</span><span class="title function_">mapPathToMenu</span>()<span class="string">` 实现路由高亮联动  </span></span><br><span class="line"><span class="string">   - **智能面包屑**：`</span><span class="title function_">mapPathToBreadcrumbs</span>()<span class="string">` 自动生成导航路径  </span></span><br><span class="line"><span class="string">   - **权限ID提取**：`</span><span class="title function_">mapMenuListToIds</span>()<span class="string">` 递归获取叶子节点ID  </span></span><br><span class="line"><span class="string">   - **按钮权限控制**：`</span><span class="title function_">mapMenusToPermissions</span>()<span class="string">` 筛选 type=3 权限标识  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. **首屏优化机制**  </span></span><br><span class="line"><span class="string">   - 记录 `</span>firstMenu<span class="string">` 实现首页自动重定向  </span></span><br><span class="line"><span class="string">   - 避免用户登录后卡在空白主页  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 动态路由：</span></span><br><span class="line"><span class="string">**基于角色的动态路由**：缺点添加角色要重新生成新的角色对应菜单数组，前端不好生成。</span></span><br><span class="line"><span class="string">**采用基于菜单的动态路由**：根据菜单动态添加（动态渲染菜单，再根据菜单动态添加路由）</span></span><br><span class="line"><span class="string">在router/main文件夹下按照路径创建每个子文件夹，和页面的组织路径一致，每个里面只放单独的对象并导出。路由和页面路径组织一致</span></span><br><span class="line"><span class="string">ts中路由对象数据类型RouterRecordRaw[]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">具体菜单转路由的实现封装在了工具类utils/map-menus.ts的`</span>mapMenusToRoutes<span class="string">`方法中</span></span><br><span class="line"><span class="string">&gt; 1. 获取菜单</span></span><br><span class="line"><span class="string">&gt; 2. 动态获取所有路由对象（目前路由对象都在独立的文件中），从文件中将所有的路由对象先读取到数组中</span></span><br><span class="line"><span class="string">&gt; 3. 根据菜单去匹配正确的路由`</span>router.<span class="title function_">add</span>(<span class="string">&#x27;main&#x27;</span>,xxx)<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 首页模块</span></span><br><span class="line"><span class="string">技术栈</span></span><br><span class="line"><span class="string">## 核心实现：</span></span><br><span class="line"><span class="string">1. **组件化首页布局设计**</span></span><br><span class="line"><span class="string">   - 整体布局ElContainer； 侧边栏菜单Menu组件；头部Header组件</span></span><br><span class="line"><span class="string">2. **组件化菜单交互机制**</span></span><br><span class="line"><span class="string">   - 通过Header子组件的图标的切换，实现动态控制菜单组件的折叠与展开</span></span><br><span class="line"><span class="string">   - 父子组件通信：Header组件通过`</span>defineEmits<span class="string">`触发折叠事件，父组件监听事件并更新折叠状态`</span>isFold<span class="string">`</span></span><br><span class="line"><span class="string">   - 父组件根据`</span>isFold<span class="string">`状态控制菜单组件的宽度</span></span><br><span class="line"><span class="string">   - 父子组件通信：父组件通过`</span>props<span class="string">`将`</span>isFold<span class="string">`传递给Menu子组件，控制`</span>el-menu<span class="string">`的`</span>collapse<span class="string">`属性实现折叠与展开</span></span><br><span class="line"><span class="string">3. **菜单与路由动态绑定**</span></span><br><span class="line"><span class="string">   - 实现菜单点击与页面跳转的无缝衔接,通过router.push(submenu.url)跳转</span></span><br><span class="line"><span class="string">### STAR法则描述：</span></span><br><span class="line"><span class="string">**S（Situation） - 项目背景**</span></span><br><span class="line"><span class="string">需要构建可交互的首页界面，包含侧边栏菜单、头部导航及动态折叠功能，提升用户体验。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**T（Task） - 任务目标**</span></span><br><span class="line"><span class="string">首页布局搭建：使用 ElContainer 构建容器布局；</span></span><br><span class="line"><span class="string">菜单动态渲染：根据 userMenus 动态生成侧边栏菜单；</span></span><br><span class="line"><span class="string">菜单折叠交互：通过组件通信实现菜单的折叠/展开控制。</span></span><br><span class="line"><span class="string">**A（Action） - 技术实现**</span></span><br><span class="line"><span class="string">- 首页布局设计</span></span><br><span class="line"><span class="string">  使用ElContainer 分为三部分：Header（顶部导航）；Aside（侧边栏菜单）；Main（内容区域）</span></span><br><span class="line"><span class="string">- 动态菜单渲染</span></span><br><span class="line"><span class="string">  菜单数据驱动：通过 v-for 遍历 userMenus 动态生成菜单项；</span></span><br><span class="line"><span class="string">  菜单嵌套结构：使用 el-menu 和 el-sub-menu 实现多级菜单。</span></span><br><span class="line"><span class="string">- 菜单折叠交互</span></span><br><span class="line"><span class="string">  Header 组件：声明 isFold 状态，通过 emit(&#x27;fold-change&#x27;) 通知父组件折叠状态；</span></span><br><span class="line"><span class="string">  父组件（main.vue）：监听 fold-change 事件，动态调整 aside 宽度（60px 折叠 / 210px 展开）；</span></span><br><span class="line"><span class="string">  Menu 组件：接收 isFold 属性，通过 `</span>:collapse=<span class="string">&quot;isFold&quot;</span><span class="string">` 控制菜单折叠状态；</span></span><br><span class="line"><span class="string">  图标切换优化：使用动态组件 `</span>&lt;component :is=<span class="string">&quot;isFold ? &#x27;Expand&#x27; : &#x27;Fold&#x27;&quot;</span> /&gt;<span class="string">` 根据 isFold 显示不同图标，减少冗余代码。</span></span><br><span class="line"><span class="string">**R（Result） - 成果与价值**</span></span><br><span class="line"><span class="string">- 布局灵活性：通过 ElContainer 快速搭建响应式首页结构；</span></span><br><span class="line"><span class="string">- 交互流畅性：菜单折叠/展开操作流畅，提升用户体验；</span></span><br><span class="line"><span class="string">- 组件解耦：通过 props 和 emit 实现组件间通信，代码结构清晰。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 项目架构优化：组件复用与网络请求封装</span></span><br><span class="line"><span class="string">## 核心实现：</span></span><br><span class="line"><span class="string">1. **网络请求三层复用架构**</span></span><br><span class="line"><span class="string">- 三层架构：页面 → Store → Service</span></span><br><span class="line"><span class="string">- 页面层：通过pageName参数传递业务标识（如users/departments），触发增删查改操作</span></span><br><span class="line"><span class="string">- Store 层：统一管理请求逻辑，携带pageName调用 Service</span></span><br><span class="line"><span class="string">- Service 层：基于pageName动态拼接 URL，实现接口通用化</span></span><br><span class="line"><span class="string">通过 config.ts 传递 pageName，实现不同业务模块的请求复用</span></span><br><span class="line"><span class="string">2. **高阶组件复用方案**</span></span><br><span class="line"><span class="string">- 消除重复代码：将搜索表单、表格内容、操作按钮等通用组件抽离为可配置组件</span></span><br><span class="line"><span class="string">- Search 组件：动态生成搜索表单（支持 Input / 日期选择等组件）</span></span><br><span class="line"><span class="string">- Content 组件：动态渲染表格列（支持自定义插槽、操作列）</span></span><br><span class="line"><span class="string">- Modal 组件：通过配置文件定义表单字段及联动逻辑</span></span><br><span class="line"><span class="string">- 动态配置驱动：通过search.config.ts和content.config.ts定义不同模块页面的展示规则</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### STAR法则描述：</span></span><br><span class="line"><span class="string">**Situation（情境）**</span></span><br><span class="line"><span class="string">在项目初期，存在以下痛点：</span></span><br><span class="line"><span class="string">- **重复开发问题**：用户/部门/角色等模块功能相似，但代码高度重复（搜索表单、表格、操作逻辑等均需手动复制粘贴）。</span></span><br><span class="line"><span class="string">- **接口不规范**：不同业务模块的接口 URL 差异大，导致请求逻辑分散且难以维护。</span></span><br><span class="line"><span class="string">- **开发效率低**：每次新增模块需重新编写通用功能（如分页查询、表单校验），耗时且易出错。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Task（任务）**</span></span><br><span class="line"><span class="string">目标是通过架构优化实现以下改进：</span></span><br><span class="line"><span class="string">1. **统一网络请求逻辑**：封装通用请求层，支持多业务模块复用。</span></span><br><span class="line"><span class="string">2. **组件化开发**：将通用功能（搜索、表格、表单）抽象为可配置组件。</span></span><br><span class="line"><span class="string">3. **动态配置驱动**：通过配置文件控制不同模块的展示规则，减少硬编码。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**Action（行动）**</span></span><br><span class="line"><span class="string">1. **网络请求三层架构设计**</span></span><br><span class="line"><span class="string">- **页面层**：通过 `</span>pageName<span class="string">` 参数标识业务模块（如 `</span>users<span class="string">`、`</span>departments<span class="string">`），触发增删改查操作。</span></span><br><span class="line"><span class="string">- **Store 层**：封装请求逻辑，接收 `</span>pageName<span class="string">` 并调用 Service 层接口，统一处理响应数据。</span></span><br><span class="line"><span class="string">- **Service 层**：动态拼接 URL（如 `</span>/$&#123;pageName&#125;/list<span class="string">`），实现接口通用化。</span></span><br><span class="line"><span class="string">- **动态配置**：通过 `</span>config.<span class="property">ts</span><span class="string">` 传递 `</span>pageName<span class="string">`，实现不同业务模块的请求复用。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>ts</span><br><span class="line"><span class="comment">// 示例：动态拼接 URL</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">postPageListData</span>(<span class="params"><span class="attr">pageName</span>: <span class="built_in">string</span>, <span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(<span class="string">`/<span class="subst">$&#123;pageName&#125;</span>/list`</span>, queryInfo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><strong>高阶组件复用方案</strong></li>
</ol>
<ul>
<li><p><strong>Search 组件</strong>：  </p>
<ul>
<li>动态生成搜索表单（支持 <code>Input</code>、<code>DatePicker</code> 等组件），通过 <code>search.config.ts</code> 定义字段。</li>
<li>支持默认值、占位符、类型判断等配置项。</li>
</ul>
</li>
<li><p><strong>Content 组件</strong>：  </p>
<ul>
<li>动态渲染表格列（支持自定义插槽、操作列、时间格式化等）。</li>
<li>通过 <code>content.config.ts</code> 定义列名、数据类型、操作按钮逻辑。</li>
</ul>
</li>
<li><p><strong>Modal 组件</strong>：  </p>
<ul>
<li>通过配置文件定义表单字段及联动逻辑（如下拉选项动态获取部门列表）。</li>
</ul>
</li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 示例：动态配置搜索表单</span></span><br><span class="line"><span class="keyword">const</span> searchConfig = &#123;</span><br><span class="line">  <span class="attr">formItems</span>: [</span><br><span class="line">    &#123; <span class="attr">prop</span>: <span class="string">&#x27;name&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;input&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;部门名称&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">prop</span>: <span class="string">&#x27;createAt&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;date-picker&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;创建时间&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>动态配置驱动开发</strong></li>
</ol>
<ul>
<li>所有动态内容（表单字段、表格列、按钮文本）通过配置文件定义，无需修改组件代码。</li>
<li>通过 <code>ref</code> 和 <code>props</code> 实现组件间通信，统一处理查询、重置、新增、编辑等操作。</li>
</ul>
<ol start="4">
<li><strong>Hook 抽离与逻辑复用</strong></li>
</ol>
<ul>
<li>将兄弟组件通信逻辑（如 <code>handleQueryClick</code>、<code>handleEditClick</code>）抽离为 <code>usePageContent</code> Hook，提升代码复用性。</li>
</ul>
<p><strong>Result</strong></p>
<h3 id="1-开发效率显著提升"><a href="#1-开发效率显著提升" class="headerlink" title="1. 开发效率显著提升"></a>1. <strong>开发效率显著提升</strong></h3><ul>
<li>新增模块仅需编写 <code>xxx.vue</code> + 3 个配置文件（<code>search.config.ts</code>、<code>content.config.ts</code>、<code>modal.config.ts</code>）。</li>
<li>**开发时间减少 50%+**：通过复用组件和动态配置，避免重复开发通用功能。</li>
</ul>
<h3 id="2-维护成本大幅降低"><a href="#2-维护成本大幅降低" class="headerlink" title="2. 维护成本大幅降低"></a>2. <strong>维护成本大幅降低</strong></h3><ul>
<li>**网络请求复用率 &gt; 90%**：统一的三层架构适配所有业务模块。</li>
<li><strong>代码结构清晰</strong>：通过配置文件驱动 UI，业务逻辑与展示解耦，修改只需调整配置。</li>
</ul>
<h3 id="3-可扩展性增强"><a href="#3-可扩展性增强" class="headerlink" title="3. 可扩展性增强"></a>3. <strong>可扩展性增强</strong></h3><ul>
<li><strong>新增模块无需修改核心组件</strong>：仅需调整配置文件即可适配新需求。</li>
<li><strong>支持动态联动</strong>：如 Modal 中的下拉选项可动态获取部门数据，实现跨模块交互。</li>
</ul>
<h3 id="4-技术价值"><a href="#4-技术价值" class="headerlink" title="4. 技术价值"></a>4. <strong>技术价值</strong></h3><ul>
<li><strong>配置优先原则</strong>：所有动态内容通过配置文件驱动，符合现代前端工程化趋势。</li>
<li><strong>组件解耦设计</strong>：业务逻辑与 UI 展示分离，组件职责单一，易于测试与维护。</li>
</ul>
<h1 id="数据可视化模块"><a href="#数据可视化模块" class="headerlink" title="数据可视化模块"></a>数据可视化模块</h1><h2 id="核心实现：-1"><a href="#核心实现：-1" class="headerlink" title="核心实现："></a>核心实现：</h2><ol>
<li><strong>动态数据展示</strong><ul>
<li>轻量级库 CountUp.js 实现数字滚动效果（如商品销量从起始值平滑过渡至目标值）</li>
<li>支持自定义前缀（如人民币符号¥），通过配置项动态切换展示格式</li>
<li>使用 Element Plus Tooltip 组件，鼠标悬停时展示数据说明</li>
</ul>
</li>
<li><strong>ECharts图表三层封装</strong><ul>
<li>第一层封装：基础组件封装，统一图表初始化与更新逻辑</li>
<li>第二层封装：不同类型的echarts图标封装不同的子组件（如pie-echart，rose-echart）</li>
<li>第三层封装：抽离数据，把数据部分单独封装，传入第二层封装的options里（数据从service里面拿到，然后放到store里，再传到页面，页面再传递给它调用的组件里）</li>
</ul>
</li>
</ol>
<h3 id="STAR法则描述：-1"><a href="#STAR法则描述：-1" class="headerlink" title="STAR法则描述："></a>STAR法则描述：</h3><p><strong>Situation</strong></p>
<ul>
<li>数据展示需求：<br>需要构建一个 数据可视化仪表盘，展示商品销量、销售额等核心指标，并通过动态动画和图表增强数据表现力。</li>
<li>技术挑战：<br>静态数据问题：初期页面为静态展示，缺乏动态增长效果，用户体验单一。<br>图表开发重复：ECharts 图表需针对不同数据类型重复编写配置代码。<br>状态管理分散：数据从接口获取后未集中管理，导致页面逻辑复杂。<br><strong>Task项目目标</strong></li>
<li>实现动态数据可视化：<br>使用 CountUp.js 实现数字递增动画，增强用户感知。<br>通过 ECharts 展示饼图、柱状图等多类型图表。</li>
<li>组件化与复用：<br>封装通用图表组件，支持动态数据绑定。<br>通过 props 传递配置，实现组件灵活复用。</li>
<li>状态集中管理：<br>使用 Pinia Store 管理数据，分离数据获取与展示逻辑<br><strong>Action</strong></li>
</ul>
<ol>
<li>动态数字增长动画实现:<br>选择 CountUp.js（轻量级、无依赖）实现数字增长动画。</li>
<li>ECharts 图表封装<ul>
<li>三层封装架构：</li>
<li>基础组件（BaseECharts）：封装 echarts.init() 和通用配置，支持响应式更新。</li>
<li>图表类型组件（PieECharts, BarECharts）：针对不同图表类型扩展配置，示例（饼图组件）</li>
<li>数据驱动组件：通过 computed 计算图表配置项，并使用 watchEffect 监听数据变化：</li>
</ul>
</li>
<li>状态管理与组件通信<br>数据从service里面拿到，然后放到store里，再传到页面，页面再传递给它调用的组件里<br><strong>Result</strong></li>
</ol>
<ul>
<li>用户体验提升：<br>动态增长动画：数字递增效果增强数据表现力，提升用户感知。<br>交互优化：Tooltip 提示和响应式图表提升操作友好度。</li>
<li>开发效率与可维护性：<br>组件复用率 &gt; 90%：通过配置文件驱动图表和卡片组件，避免重复开发。<br>代码结构清晰：数据获取、状态管理、UI 展示解耦，维护成本降低。</li>
<li>技术价值：<br>轻量级动画库：CountUp.js 无依赖、性能优，适合快速实现数值动画。<br>ECharts 高度封装：支持多类型图表动态配置，适配不同业务场景。</li>
</ul>
<h1 id="大模型模拟的项目面试题"><a href="#大模型模拟的项目面试题" class="headerlink" title="大模型模拟的项目面试题"></a>大模型模拟的项目面试题</h1><ol>
<li><a href="https://www.doubao.com/thread/wbfa26b13c725686d">https://www.doubao.com/thread/wbfa26b13c725686d</a></li>
<li><a href="https://lxblog.com/qianwen/share?shareId=44568676-1c0c-4273-88b3-2a7a1ead78de">https://lxblog.com/qianwen/share?shareId=44568676-1c0c-4273-88b3-2a7a1ead78de</a></li>
</ol>
<h1 id="其他：网络请求是如何处理的"><a href="#其他：网络请求是如何处理的" class="headerlink" title="其他：网络请求是如何处理的"></a>其他：网络请求是如何处理的</h1><p>项目采用老师封装好的Axios实例（诚实说明），包含请求拦截器自动添加Token，响应拦截器统一处理错误码<br>项目中网络请求层采用教学提供的封装方案，我的任务重点是：<br><strong>业务逻辑对接</strong>：<br>   <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在Pinia store中调用封装好的post方法</span></span><br><span class="line"><span class="title function_">loginAccountAction</span>(<span class="params"><span class="attr">account</span>: <span class="title class_">IAccount</span></span>) &#123;</span><br><span class="line">  <span class="title function_">post</span>(<span class="string">&#x27;/login&#x27;</span>, account).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    localCache.<span class="title function_">setCache</span>(<span class="variable constant_">LOGIN_TOKEN</span>, res.<span class="property">token</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="零碎梳理版（按项目实现顺序梳理）"><a href="#零碎梳理版（按项目实现顺序梳理）" class="headerlink" title="零碎梳理版（按项目实现顺序梳理）"></a>零碎梳理版（按项目实现顺序梳理）</h1><h2 id="登录模块-1"><a href="#登录模块-1" class="headerlink" title="登录模块"></a>登录模块</h2><h3 id="Element-Plus集成："><a href="#Element-Plus集成：" class="headerlink" title="Element-Plus集成："></a>Element-Plus集成：</h3><p>按需引入，要进行vite插件配置<br>ElMessage引入；图标引入<br>后续tab布局、按钮、span、复选选项、账号密码验证、小图标都是通过element-plus组件库组件实现的</p>
<h3 id="登录页面Panel"><a href="#登录页面Panel" class="headerlink" title="登录页面Panel"></a>登录页面Panel</h3><h4 id="整体界面搭建"><a href="#整体界面搭建" class="headerlink" title="整体界面搭建"></a>整体界面搭建</h4><p>标题，tabs，记住密码复选框、忘记密码链接，立即登录按钮<br>背景搭建：100vw&#x2F;vh</p>
<h4 id="登录tabs："><a href="#登录tabs：" class="headerlink" title="登录tabs："></a>登录tabs：</h4><p>label插槽的使用<br>tab属性栏如何判断在哪个pane标签页：<br><code>&lt;el-tabs 绑定v-model＝&quot;activeNave&quot;&gt;</code><br>&#96;const activeName&#x3D;ref(‘account’) &#x2F;&#x2F;默认选中account<br>两个el-tabs-pane 添加name属性<br>用activeName判断是账号登录还是手机登录</p>
<h4 id="账号登录form"><a href="#账号登录form" class="headerlink" title="账号登录form"></a>账号登录form</h4><p>账号密码输入框：<br>表单组件el-form&#x2F;el-form-item&#x2F;el-form-input来搭建</p>
<h4 id="form的校验规则"><a href="#form的校验规则" class="headerlink" title="form的校验规则"></a>form的校验规则</h4><p>表单校验规则配置在el-form上在el-form的 :rules&#x3D;”rules”属性上，校验规则rules模仿官方文档</p>
<blockquote>
<p>ref为了拿到el-from<br>el-form  label-with&#x3D;”表单宽度px”</p>
</blockquote>
<h4 id="点击立即登录"><a href="#点击立即登录" class="headerlink" title="点击立即登录"></a>点击立即登录</h4><p>父亲组件发生点击，执行子组件的函数<br>defineExpose()导出函数<br>重点代码：<br><code>const accountRef=ref&lt;instanceType&lt;type PaneAccount&gt;&gt;</code></p>
<h3 id="登录的操作"><a href="#登录的操作" class="headerlink" title="登录的操作"></a>登录的操作</h3><h4 id="form通过校验"><a href="#form通过校验" class="headerlink" title="form通过校验"></a>form通过校验</h4><ol>
<li>通过formRef.validate(回调)<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">loginAction</span>(<span class="params"></span>)&#123;</span><br><span class="line">    formRef.<span class="property">value</span>?.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(valid)&#123;<span class="comment">//获取用户输入的帐号和密码</span></span><br><span class="line"><span class="keyword">const</span> name = account.<span class="property">name</span></span><br><span class="line"><span class="keyword">const</span> password = account.<span class="property">password</span></span><br><span class="line"><span class="comment">//2.向服务器发送网络请求(携带账号和密码)</span></span><br><span class="line">loginstore.<span class="title function_">loginAccountAction</span>(&#123; name,password &#125;)&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="title class_">ElMessage</span>.<span class="title function_">error</span>(<span class="string">&#x27;oops，请您输入正确的格式后再操作&#x27;</span>)&#125;&#125;)&#125;</span><br></pre></td></tr></table></figure></li>
<li>登录接口调用post请求;</li>
<li>data:{name,password}</li>
</ol>
<h3 id="将登录的操作放到store中"><a href="#将登录的操作放到store中" class="headerlink" title="将登录的操作放到store中"></a>将登录的操作放到store中</h3><h3 id="IAccount类型的定义-类型复用封装"><a href="#IAccount类型的定义-类型复用封装" class="headerlink" title="IAccount类型的定义(类型复用封装):"></a>IAccount类型的定义(类型复用封装):</h3><p>类型复用抽取:<br>一个对象类型在很多地方复用时，抽到type里 </p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">IAccount</span>&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="built_in">string</span>;</span><br><span class="line"><span class="attr">password</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用导入<br><code>const type &#123;IAccout&#125; from &#39;@/types&#39;</code><br><code>function  balabalafn(account:IAccount)&#123;&#125;</code><br><strong>细节—教训：token这种字符串常量，抽取成常量，避免拼写错误</strong><code>const LOGIN_TOKEN＝&#39;login/token&#39;</code></p>
<h3 id="token缓存和cache封装"><a href="#token缓存和cache封装" class="headerlink" title="token缓存和cache封装"></a>token缓存和cache封装</h3><h4 id="永久保存用户token"><a href="#永久保存用户token" class="headerlink" title="永久保存用户token"></a>永久保存用户token</h4><p>可以localStorage－会话关闭依然保留，除非手动删<br>sessionStorage－会话关闭会消失<br>store&#x2F;state中toke:localStorage.getItem(‘token’)??’’<br>保存token图片（）封装前</p>
<h4 id="封装本地缓存工具："><a href="#封装本地缓存工具：" class="headerlink" title="封装本地缓存工具："></a>封装本地缓存工具：</h4><p>utils&#x2F;cache.ts，封装了localStorage和sessionStorage的方法<br>原因，如果要保存对象的话不可以直接<br><code>localStorage.setItem(&#39;userInfo&#39;,&#123;name:&#39;Nie&#39;,password:&#39;123456&#39;&#125;)//&#123;object:object&#125;</code><br>需要<code>localStorage.setItem(&#39;userInfo&#39;,JSON.stringify(&#123;&#125;))</code><br>获取数据同理<br><strong>这就是“自动序列化&#x2F;反序列化”：工具内部自动处理对象与字符串的转换</strong><br>进行封装方便处理对象数据</p>
<h2 id="登录模块完善"><a href="#登录模块完善" class="headerlink" title="登录模块完善"></a>登录模块完善</h2><h3 id="在拦截器添加携带token"><a href="#在拦截器添加携带token" class="headerlink" title="在拦截器添加携带token"></a>在拦截器添加携带token</h3><h3 id="导航守卫（对main开头的页面进行token判断）"><a href="#导航守卫（对main开头的页面进行token判断）" class="headerlink" title="导航守卫（对main开头的页面进行token判断）"></a>导航守卫（对main开头的页面进行token判断）</h3><h3 id="完善–记住秘密功能"><a href="#完善–记住秘密功能" class="headerlink" title="完善–记住秘密功能"></a>完善–记住秘密功能</h3><h3 id="main权限管理–RBAC基于角色访问控制（权限管理）"><a href="#main权限管理–RBAC基于角色访问控制（权限管理）" class="headerlink" title="main权限管理–RBAC基于角色访问控制（权限管理）"></a>main权限管理–RBAC基于角色访问控制（权限管理）</h3><h3 id="请求用户信息–根据用户获取用户信息；"><a href="#请求用户信息–根据用户获取用户信息；" class="headerlink" title="请求用户信息–根据用户获取用户信息；"></a>请求用户信息–根据用户获取用户信息；</h3><h3 id="请求菜单信息–根据用户信息中的角色id，获取菜单信息"><a href="#请求菜单信息–根据用户信息中的角色id，获取菜单信息" class="headerlink" title="请求菜单信息–根据用户信息中的角色id，获取菜单信息"></a>请求菜单信息–根据用户信息中的角色id，获取菜单信息</h3><h3 id="对用户信息和用户菜单进行本地缓存"><a href="#对用户信息和用户菜单进行本地缓存" class="headerlink" title="对用户信息和用户菜单进行本地缓存"></a>对用户信息和用户菜单进行本地缓存</h3><h2 id="首页界面搭建"><a href="#首页界面搭建" class="headerlink" title="首页界面搭建"></a>首页界面搭建</h2><h3 id="整体布局ElContainer"><a href="#整体布局ElContainer" class="headerlink" title="整体布局ElContainer"></a>整体布局ElContainer</h3><h3 id="侧边栏菜单Menu组件"><a href="#侧边栏菜单Menu组件" class="headerlink" title="侧边栏菜单Menu组件"></a>侧边栏菜单Menu组件</h3><ol>
<li>分组ElMenu组件的作用</li>
<li>手动搭建整个菜单结构</li>
<li>根据userMenu动态遍历渲染</li>
</ol>
<h3 id="头部Header组件"><a href="#头部Header组件" class="headerlink" title="头部Header组件"></a>头部Header组件</h3><h4 id="menu-icon图标（折叠菜单功能）"><a href="#menu-icon图标（折叠菜单功能）" class="headerlink" title="menu-icon图标（折叠菜单功能）"></a>menu-icon图标（折叠菜单功能）</h4><ol>
<li>动态组件切换图标展示</li>
<li>父组件－－切换aside宽度</li>
<li>兄弟组件－－菜单的折叠与展开</li>
</ol>
<h4 id="折叠菜单详细梳理（组件通信）"><a href="#折叠菜单详细梳理（组件通信）" class="headerlink" title="折叠菜单详细梳理（组件通信）"></a>折叠菜单详细梳理（组件通信）</h4><p>header组件图标控制兄弟组件（菜单栏）的展开与折叠；控制父组件对menu组件宽度的调整<br>涉及的部分：</p>
<ol>
<li>header组件－－声明isFold变量记录展开&#x2F;折叠的状态</li>
<li>header组件－－用动态组件实现不同状态的图标切换（这样不需要v-if，优化代码）<br><code>&lt;component :is=&quot;isFold ? &#39;Expand&#39; : &#39;Fold&#39;&quot; /&gt;</code></li>
<li>el-menu组件－－有控制菜单展示与折叠的属性<code>:collapse=&quot;true/false&quot;</code>，</li>
<li>父组件－－菜单的宽度是自己设置的，要根据header子组件的状态，动态设置菜单宽度<br>通信梳理：父组件main.vue中有header组件和menu组件，header组件中有动态图标，menu组件的菜单根据header图标的状态进行折叠&#x2F;展开，同时父组件对menu组件动态进行菜单宽度设置<br>子组件内部发生改变，要改变父组件设置的宽度的值<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isFold = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;flodchange&#x27;</span>])</span><br><span class="line">unction <span class="title class_">HandleMuneIconClick</span>()&#123;</span><br><span class="line">isFold.<span class="property">value</span> = !isFole.<span class="property">value</span></span><br><span class="line"><span class="title function_">emit</span>(<span class="string">&#x27;foldchange&#x27;</span>,isFold,value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
父组件监听；根据子组件值动态调整宽度<br><code>&lt;el-aside :width = &quot;isFold ? &#39;60px&#39; : &#39;210px&#39; &quot;&gt;</code><br><code>&lt;main-header @fold-change=&quot;handleFoldChaneg&quot;/&gt;</code><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> idFold = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleFoldChange</span>(<span class="params"><span class="attr">flag</span>:<span class="built_in">boolean</span></span>)&#123;</span><br><span class="line">isFold.<span class="property">value</span>=flag</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
父组件把isFole作为属性传递给menu子组件<br><code>&lt;main-menu :is-fold=&quot;isFold&quot;/&gt;</code><br>menu子组件接受父组件的属性<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line"> <span class="attr">isFold</span>:&#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="title class_">Boolean</span>,</span><br><span class="line">  <span class="attr">default</span>:<span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<code>:collapse=&quot;isFold&quot;</code></li>
</ol>
<h3 id="路由注册与页面跳转（非动态路由）"><a href="#路由注册与页面跳转（非动态路由）" class="headerlink" title="路由注册与页面跳转（非动态路由）"></a>路由注册与页面跳转（非动态路由）</h3><p>注册所有的路由<br>根据角色动态渲染菜单</p>
]]></content>
      <categories>
        <category>面试题</category>
        <category>vue</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>面试题</tag>
        <tag>vue</tag>
        <tag>项目</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库--mysql学习</title>
    <url>/2024/06/12/22-mysql/</url>
    <content><![CDATA[<h2 id="新建表"><a href="#新建表" class="headerlink" title="新建表"></a>新建表</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名（</span><br><span class="line">列名 数据类型，…</span><br><span class="line">）</span><br></pre></td></tr></table></figure>
<h3 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h3><ol>
<li><p>给指定字段添加数据<br>insert into 表名 (列1名，列2名) values(值1，值1);</p>
</li>
<li><p>给全部字段添加数据<br>insert into 表名values (值1,值2,….) ;</p>
</li>
<li><p>批量添加数据<br>insert into表名(列1名，列2名,…)values(值1,值2,…)，(值1，值2,…)，(值1，值2…);</p>
</li>
</ol>
<p>insert into 表名 values (值1,值2,…),(值1,值2,…),(值1，值2,..);</p>
<blockquote>
<p>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。<br>字符串和日期型数据应该包含在引号中。‘2002-03-03’<br>插入的数据大小，应该在字段的规定范围内。</p>
</blockquote>
<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p><code>update 表名 set 列名1=值1，列名2=值1,….[where 条件]</code></p>
<ul>
<li><p>eg 修改id为10010的性别和是否为党员<br>update S set ssex&#x3D;‘男 ‘ ，ifdangyuan&#x3D;1,….[where sno &#x3D; 10010]</p>
</li>
<li><p>eg 修改所有学生的入学日期为2022-9-1 不带where条件将更新整个表<br>update S set ruxueriqi &#x3D; ‘2022-09-01’ </p>
</li>
<li><p>eg 删除某一列的值：</p>
<p>delate 表名 set 列名1&#x3D;null [where 条件]</p>
</li>
</ul>
<h3 id="向已有表增加新列"><a href="#向已有表增加新列" class="headerlink" title="向已有表增加新列"></a>向已有表增加新列</h3><ul>
<li><p>新增一列<br>Alter table 表名  add  字段名及参数<br>eg:   alter table 课程表 add 所属专业 nchar(5)</p>
</li>
<li><p>新增多列<br>alter table 课程表 add 开课学院 nchar(10),任课教师 nchar(6)</p>
</li>
</ul>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p><code>delete from 表名 [where 条件]</code></p>
<blockquote>
<p>delete语句的条件可以也可以没有，没有条件回删除整张表的所有数据（清空表）</p>
<p>delete语句不能删除某一个字段（列）的值<br>删除某一个字段（列）的值可以用update</p>
</blockquote>
<ul>
<li>eg 删除表中性别为女的员工们<br>delate from 表名  where  sex&#x3D;‘女’;</li>
<li>删除表中所有行<br>delete from 表名;</li>
</ul>
<h3 id="删除表中已有列"><a href="#删除表中已有列" class="headerlink" title="删除表中已有列"></a>删除表中已有列</h3><p><code>alter table 表名 drop  column 列名</code><br> eg:  alter table 课程表 drop column 开课学院,任课教师</p>
<h3 id="改变表已有列的信息"><a href="#改变表已有列的信息" class="headerlink" title="改变表已有列的信息"></a>改变表已有列的信息</h3><h4 id="如把身高列的宽度增加一位"><a href="#如把身高列的宽度增加一位" class="headerlink" title="如把身高列的宽度增加一位"></a>如把身高列的宽度增加一位</h4><blockquote>
<p>原来列  hight numeric(5,2),</p>
<p>alter table S<br>alter column hight numeric(6,2);<br>意思是要修改表 <code>S</code> 中的列 <code>hight</code> 的数据类型和长度</p>
</blockquote>
<h3 id="把表1更名为表2"><a href="#把表1更名为表2" class="headerlink" title="把表1更名为表2"></a>把表1更名为表2</h3><blockquote>
<p>select  *  into 课程表2  from 课程表1<br>drop table  课程表1<br>把原1表全部表头和内容复制2表，再把1表删除掉</p>
</blockquote>
<h3 id="对已有列更名"><a href="#对已有列更名" class="headerlink" title="对已有列更名"></a>对已有列更名</h3><blockquote>
<p>假设原表课程表2已有大量数据，不可能重新建表，现要把”所属专业”改为“从属专业<br>alter table 课程表 add 从属专业 char(20)  update 课程表 set 从属专业&#x3D;所属专业<br>注：更新，把所尾专业的内容数据复制到从属专业列 alter table 课程表 drop column 所属专业 select * from 课程表 不要在意列的左右顺序，也不要在意行数据的上下位置顺</p>
<p>eg   把学生表的生日列修改为“出生日期”列:<br>alter table 学生表 add 出生日期 smalldatetime<br>update 学生表 set 出生日期&#x3D;生日<br>alter table 学生表 drop column 生日</p>
<p>注意，去过原有列有了约束之类的设置那么无法删除</p>
</blockquote>
<h3 id="把一个大表拆分成多个小表"><a href="#把一个大表拆分成多个小表" class="headerlink" title="把一个大表拆分成多个小表"></a>把一个大表拆分成多个小表</h3><p>把查询结果保存到一个新表中.(可拆分表,行向上拆分和合并)</p>
<blockquote>
<p>select exps1 into tablename from …… 把查询结果不以视图显示，而是默默地存放到一个新表中去（物理表）</p>
<p>select * into T1 from 学生表 where 性别&#x3D;’男’<br>select * from T1<br>select * into T2 from 学生表 where 性别&#x3D;’女’</p>
</blockquote>
<h3 id="把多个结构相同的表合并成一个大表"><a href="#把多个结构相同的表合并成一个大表" class="headerlink" title="把多个结构相同的表合并成一个大表"></a>把多个结构相同的表合并成一个大表</h3><h2 id="主要数据类"><a href="#主要数据类" class="headerlink" title="主要数据类"></a>主要数据类</h2><h3 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h3><ul>
<li>int 4字节   bignit 8字节   smallint 2字节  tinyint  1字节且是无符号数</li>
<li><strong>numeric(p,q) 小数</strong>，指定最多为p位，其中有q位小数</li>
<li>数据库中少用近似型float和double，多用准确型</li>
</ul>
<h3 id="字符串型"><a href="#字符串型" class="headerlink" title="字符串型"></a><mark>字符串型</mark></h3><ul>
<li>char(n) 没有中文汉字使用</li>
<li>varchar(n)没有中文汉字用，可变长度</li>
<li>nchar(n)有中文汉字用，长度固定且不太长</li>
<li>nvarchar(n)有中文汉字用，可变长度</li>
<li>text长篇内容</li>
</ul>
<blockquote>
<p><code>TEXT</code> 类型通常用于存储较长的文本信息，例如备注、描述、文章内容等。与其他字符串类型（如 <code>VARCHAR</code>）不同的是，<code>TEXT</code> 类型可以存储更大的文本值，并且不需要指定最大长度。这使得它非常适合存储可变长度的文本数据，无论文本内容有多长</p>
</blockquote>
<h3 id="日期时间型"><a href="#日期时间型" class="headerlink" title="日期时间型"></a>日期时间型</h3><ul>
<li><p>Datetime  占8字节空间来存放一个标准的日期时间，最早支持1753年。</p>
</li>
<li><p>Smalldatetime   占四字节，只支持 1900-1-1 -2079年</p>
<p><strong>Datetime支持到毫秒，Smalldatetime支持到分钟</strong></p>
<blockquote>
<p>一个日期是相对于1900-1-1的间隔天数，一个日期对应的是一个整数。所以日期其实是一个整数，使用公式显现成一个日期格式 日期1-日期2&#x3D;整数n 时间是一个相对于当天从00:00:00开始的秒数 时间间隔计算：t2-t1得间隔秒数</p>
<p>特别注意： 字符串常量，日期时间常量在sqlserver用单引号</p>
</blockquote>
</li>
</ul>
<h3 id="存放二进制的文件内容型"><a href="#存放二进制的文件内容型" class="headerlink" title="存放二进制的文件内容型"></a>存放二进制的文件内容型</h3><ul>
<li>binary(n)  用于存储固定长度的二进制数据</li>
<li>image    用于存储可变长度的二进制数据，通常用于存储图像、声音、视频等多媒体数据</li>
<li><strong>varbinary(max) QL Server 中更现代的用于存储可变长度二进制数据的数据类型，可以存储最大长度的二进制数据(推荐)</strong></li>
</ul>
<h2 id="数据完整性控制"><a href="#数据完整性控制" class="headerlink" title="数据完整性控制"></a>数据完整性控制</h2><p>完整性：数据是否完好无缺，是否符合要求</p>
<p>约束作用在表中的字段上，可在创建表和修改表的时候添加约束</p>
<h3 id="primary-key-主码约束"><a href="#primary-key-主码约束" class="headerlink" title="primary key 主码约束"></a>primary key 主码约束</h3><p>  建立表时,在列名后跟primary key </p>
<p>主码值不能为空，不能重复，用于唯一标记同一个表的不同数据一个表只能最多有一个主码，也可无主码。<br>此时这个属性叫主属性，其他列叫非主属性。</p>
<h3 id="unique-唯一约束"><a href="#unique-唯一约束" class="headerlink" title="unique 唯一约束"></a>unique 唯一约束</h3><p>建表时在最后加unique </p>
<p>限制一个表中某列值<mark>不能重复（比如微信号）但可以为空</mark>，对于候选码，一个表多个列可以分别使用unique约束</p>
<h3 id="foreign-key-外键约束"><a href="#foreign-key-外键约束" class="headerlink" title="foreign key 外键约束"></a>foreign key 外键约束</h3><p>让多张表的数据之间建立连接，保证数据的一致性和完整性</p>
<p><img src="C:/Users/mujiu/Pictures/外键.png"></p>
<blockquote>
<p>立足于成绩表时，把成绩表的学号参考学生表的学号，把成绩表中的课程号参考课程表的课程号. 完成约束后，不存在于学生表的人，不存在于课程表的课程，就不能在成绩表中出现. </p>
<p>create table 学生表(学号 char(7) not null primary key,姓名 char(10) not null ,性别 char(2) ,年龄 tinyint,所在系 char(20))<br>create table 课程表(课程号 char(6) not null primary key,课程名 char(20) not null,学分 tinyint,学期 tinyint)<br>create table 成绩表( 学号 char(7) not null,课程号 char(6) not null,成绩 tinyint,<br>primary key(学号,课程号),<br>foreign key(学号) references 学生表(学号),<br>foreign key(课程号) references 课程表(课程号) ) </p>
<p>说明：一般表主属性是一列，有时有多列组成PK（PK可是属性，也可以是属性组）. PK是属性组时，要独立于列来实现主码约束。 , primary key(学号,课程号)： 完成后，在成绩表不允许同一个学生选两次同一门课</p>
</blockquote>
<h3 id="on-delete-cascade-外键约束"><a href="#on-delete-cascade-外键约束" class="headerlink" title="on delete cascade 外键约束"></a>on delete cascade 外键约束</h3><p>on delete cascade 是一种外键约束动作，用于在删除主表中的记录时同时删除与其相关联的从表中的记录</p>
<blockquote>
<p>在表间参照完整性中，如果想实现级联删除，即如：删除学生表中的某个同学时，则成绩表中该外键对应的成绩记录会自动删除。可以这样实现：<br>create table 成绩表(学号 char(7) ,课程号 char(3), 成绩 tinyint,<br>foreign key(学号) references 学生表(学号) on delete cascade  )</p>
</blockquote>
<h3 id="not-null-非空约束"><a href="#not-null-非空约束" class="headerlink" title="not null 非空约束"></a>not null 非空约束</h3><p>表示本列的内容值不能为空    建表时,在列名后跟not null</p>
<h3 id="default-默认值约束"><a href="#default-默认值约束" class="headerlink" title="default 默认值约束"></a>default 默认值约束</h3><p>生成新数据元素行时的默认值 (比如把性别默认为女)</p>
<blockquote>
<p>建表时<br>gender CHAR(1) DEFAULT ‘男’,   – 默认值为 ‘男’<br>age  int default 18                       – 默认值为 18</p>
</blockquote>
<h3 id="check-检查约束"><a href="#check-检查约束" class="headerlink" title="check 检查约束"></a>check 检查约束</h3><h4 id="元组级约束（行）"><a href="#元组级约束（行）" class="headerlink" title="元组级约束（行）"></a>元组级约束（行）</h4><p><mark>条件中同时涉及到了多列就叫元组约束单一一列叫列级约束</mark></p>
<p>如  check(性别 &#x3D;’男’ and 身高 &gt;&#x3D;170 or 性别&#x3D;’女’ and 身高&gt;&#x3D;160)</p>
<blockquote>
<p>约束检查发生完成该元组数据编辑时。在编辑该列时，完成时，离开该列数据单元时，发生的条件检测。鼠标离开编辑行状态，或insert命令操作时发生</p>
</blockquote>
<h4 id="条件约束（列）"><a href="#条件约束（列）" class="headerlink" title="条件约束（列）"></a>条件约束（列）</h4><p>在创建表时候，直接在后面写check(约束条件)</p>
<h3 id="数据排序（多列数据）"><a href="#数据排序（多列数据）" class="headerlink" title="数据排序（多列数据）"></a>数据排序（多列数据）</h3><p>select 列1,列2… form 表  <mark>order by 列 排序方式</mark></p>
<blockquote>
<p>列：可以是列名，也可以是列序号，如3表示按第三列排序<br>排序方式：<br>asc升序（从小到大）是默认的<br>dese降序（从大到小）</p>
</blockquote>
<h4 id="同时排序多列数据"><a href="#同时排序多列数据" class="headerlink" title="同时排序多列数据"></a>同时排序多列数据</h4><p>order by 最先排的列 排序方式 ,其次排的列 排序方式, …….</p>
<blockquote>
<p>例子：把学生表所有人按性别分类，同类性别内按身高降序，如果性别和身高再相同，则进一步按年龄升序(年龄以生日为准)</p>
<p>select  *  学号,姓名,性别,身高 ,生日</p>
<p> from 学生表 order by 性别 ,身高 desc,生日*desc</p>
</blockquote>
<h3 id="数据排序大小原理"><a href="#数据排序大小原理" class="headerlink" title="数据排序大小原理"></a>数据排序大小原理</h3><ul>
<li><p>数值按大小比较，英文按ASCLL比较大小</p>
</li>
<li><p>汉字始终比英文大，小写字母比大写字母大，这个顺序叫英文字典</p>
</li>
<li><p>字符串：abe&gt;abcd   因为e&gt;c 中国&gt;人们 因为 Z&gt;R</p>
</li>
<li><p>日期：今天&gt;昨天，日期实际上对应的是一个整数。出生日期和年龄是反的</p>
</li>
<li><p>逻辑值true&gt;false</p>
</li>
</ul>
<h3 id="例-对已存在表建立约束"><a href="#例-对已存在表建立约束" class="headerlink" title="例 对已存在表建立约束"></a>例 对已存在表建立约束</h3><p><mark>constraint （约束），对表添加检查约束用（可也以省略）</mark></p>
<h4 id="对一个已经存在的表建立主码约束"><a href="#对一个已经存在的表建立主码约束" class="headerlink" title="对一个已经存在的表建立主码约束"></a>对一个已经存在的表建立主码约束</h4><blockquote>
<p>前提是表内容是空的才行,且该列事先定义为not null 不允许为空值数据，才能在以后增加逐渐约束<br>alter table 学生表 add constraint <strong>stuidpk</strong> primary key(sutid)  </p>
<p>意思是给学生表的stuid这一列add constraint 加 primary key 主码约束 它的名称为sutidpk</p>
</blockquote>
<h4 id="对一个已经存在的表建立唯一约束"><a href="#对一个已经存在的表建立唯一约束" class="headerlink" title="对一个已经存在的表建立唯一约束"></a>对一个已经存在的表建立唯一约束</h4><p>alter table 表名 add constraint 约束名 unique (列名)</p>
<p>eg 对课程表中的课程名称进行唯一限制<br>alter table C add constraint canmeU unique (cname)</p>
<h4 id="对已有表添加默认值约束"><a href="#对已有表添加默认值约束" class="headerlink" title="对已有表添加默认值约束"></a>对已有表添加默认值约束</h4><p>column（列），修改列的属性包括默认值用修改列的方法</p>
<p>alter table Stu alter column gender set  default  ‘男’</p>
<blockquote>
<p>alter table Stu 表示要修改的表是Stu </p>
<p>alter column gender 表示要修改的列是gender </p>
</blockquote>
<h4 id="对已有表添加check约束"><a href="#对已有表添加check约束" class="headerlink" title="对已有表添加check约束"></a>对已有表添加check约束</h4><p><mark><strong>alter table 表 add constraint</strong> </mark></p>
<p>alter table 表名  add constraint  列名 check (列名  条件)</p>
<p>alter table 表名 add check (列名 条件)</p>
<ul>
<li><p>下面两种都对</p>
<p>alter table S8 add hight2 numeric(3,2)</p>
<p>alter table S8 add hight numeric(3,2)<br>alter table S8 add constraint hight2 check (hight2 between 1.00 and 2.00 )<br>alter table S8 add check(hight between 1.00 and 2.00)</p>
</li>
<li><p>alter table S add constraint stel check(stel like’….’)</p>
</li>
<li><p>alter table Stu add constraint Age check (age &gt;&#x3D;18 and age &lt;&#x3D;100)</p>
</li>
</ul>
<h3 id="注意事项和问题"><a href="#注意事项和问题" class="headerlink" title="注意事项和问题"></a>注意事项和问题</h3><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><blockquote>
<ul>
<li><p>所有的属性值都必须去取原子值：每一个属性不能够再分开（比如生日年月日不能再分开，除非建就建两列）</p>
</li>
<li><p>表的行和列的上下左右顺序都是无意义的（属性的顺序无关性）</p>
</li>
</ul>
</blockquote>
<h4 id="完整性实际例子"><a href="#完整性实际例子" class="headerlink" title="完整性实际例子"></a>完整性实际例子</h4><blockquote>
<p>比方：网上订购的8斤水果，而我们收到了5.5斤，发和收方的数据不一致，被破坏了完整性。在数据库，一表的数据在数据对应依赖于另一个表，如果缺失和破坏了这个依赖，就发生完整性错误。如：在图书销售表中出现事先不存在的书店编号. 在成绩表中出现根本不存在于学生表的人</p>
</blockquote>
<h4 id="约束ID问题"><a href="#约束ID问题" class="headerlink" title="约束ID问题"></a>约束ID问题</h4><blockquote>
<p>为什么对已有表加主码约束要给这个约束一个ID如PK_MyTable_ID，而建表时候添加约束只需要在最后添加primary key 就可以，不需要给这个约束一个ID？</p>
<p>GPT回答：</p>
<p>在 SQL 中，给约束一个名字（比如 <code>PK_MyTable_ID</code>）并不是必需的，但是是一种良好的实践，特别是在以下情况下：</p>
<ol>
<li><strong>清晰性和可读性</strong>：给约束一个有意义的名字可以提高代码的可读性。当数据库结构变得复杂时，清晰的约束名可以帮助其他开发人员更好地理解数据库模式和约束。</li>
<li><strong>易于识别</strong>：如果数据库中存在多个约束，给每个约束一个唯一的名字可以方便识别和引用这些约束。例如，在查询或日志中提到约束时，使用具有描述性名称的约束可以更清楚地表达意图。</li>
<li><strong>易于管理</strong>：具有有意义的约束名可以帮助您更轻松地管理数据库结构。例如，您可能需要在将来删除或修改约束，有一个明确的约束名称可以使这些操作更简单。</li>
</ol>
<p>虽然给约束一个名字并不是必需的，但是在实际开发中，这是一个良好的编程习惯，可以提高代码的可读性、维护性和可管理性。</p>
</blockquote>
<h2 id="关系代数理论"><a href="#关系代数理论" class="headerlink" title="关系代数理论"></a>关系代数理论</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul>
<li>对关系进行集合代数的运算</li>
<li>三要素：运算符，运算对象，运算结果</li>
<li>关系操作是集合操作方式：一次一集合</li>
<li>关系操作如查询，结果是元组集，把这些结果以view视窗（外模式）方式呈现给用户</li>
</ul>
<h3 id="集合运算-并差交关系乘"><a href="#集合运算-并差交关系乘" class="headerlink" title="集合运算 并差交关系乘"></a>集合运算 并差交关系乘</h3><h4 id="union并"><a href="#union并" class="headerlink" title="union并"></a>union并</h4><ul>
<li>将两个查询的结果集合合并乘一个结果集，合并时会去除重复的行</li>
<li>注意：连亘查询的结果集的列数和数据类型必须一致</li>
<li>例：从学生表1中找到姓杨的人，从学生表2中找到姓李的人，合成一个视图</li>
<li>(select 学号,姓名,年龄,家庭住址   from 学生表2 where LEFT(姓名,1)&#x3D;’李’)  union (select 学号,姓名,年龄,家庭住址   from 学生表1  where LEFT(姓名,1)&#x3D;’杨’)</li>
</ul>
<h4 id="except-差"><a href="#except-差" class="headerlink" title="except 差"></a>except 差</h4><p>从第一个查询结果中排除掉与第二个查询扯过相同的行，返回剩余的结果集</p>
<p>例：从学生表1中查出数据减去在学生表2中存放的数据</p>
<p> （select 学号,姓名,性别 from 学生表1 ）except  （select 学号,姓名,性别 from 学生表2）</p>
<h4 id="intersect-交"><a href="#intersect-交" class="headerlink" title="intersect 交"></a>intersect 交</h4><p>找出两个查询结果集中共同存在的行，并返回这些共同行组成的结果集</p>
<p>例：把学生表中年龄19以上人与学生表2中的李姓人求交集</p>
<p>(select 学号,姓名,性别,年龄 from 学生表 where 年龄&gt;&#x3D;19)   intersect  (select 学号,姓名,性别,年龄 from 学生表2 where LEFT(姓名,1)&#x3D;’李’ )</p>
<h4 id="关系乘（广义的笛卡尔积）"><a href="#关系乘（广义的笛卡尔积）" class="headerlink" title="关系乘（广义的笛卡尔积）"></a>关系乘（广义的笛卡尔积）</h4><p>例如学生表中的所有学生把课程表中所有课程都选修了一次，叫学生集合与课程集合的笛卡尔积。现实中的学生选课是笛卡尔积的子集。</p>
<p>比如学生表有n个学生，课程表有m门课，那么这两个表的笛卡尔积就是每个学生选每一门课</p>
<h3 id="空值"><a href="#空值" class="headerlink" title="空值"></a>空值</h3><p><mark>Null 什么都没有 “ “空格 有效值是空  “”空串双引号里没有空格</mark></p>
<blockquote>
<p>select * from 学生表 where 家庭住址 is null 对<br>select * from 学生表 where 家庭住址 &#x3D;null 错<br> select * from 学生表 where 家庭住址&#x3D;’’  错</p>
<p>判断一个值是否为空，必须使用 is null判断 ,因为null不是一般意义的简单类型的数据，是当对象概念的，不能使用关系运算比较的</p>
</blockquote>
<p> count不计空值 null不算进去 <mark>空格可以算进去</mark> 所以保险起见最常用 select count(*) from 学生表 有一行算一行</p>
<h3 id="专门的关系运算：数据库的表操作"><a href="#专门的关系运算：数据库的表操作" class="headerlink" title="专门的关系运算：数据库的表操作"></a>专门的关系运算：数据库的表操作</h3><h4 id="选择-where"><a href="#选择-where" class="headerlink" title="选择  where"></a>选择  where</h4><ul>
<li>通过对关系中的<strong>元组（行）进行筛选</strong>，从中选取满足特定条件的行数据</li>
<li>SELECT * FROM 表名 WHERE 条件，其中 条件 就是选择条件</li>
<li>选择操作使得我们可以根据特定条件从数据库表中检索出所需的数据，从而实现数据的筛选和过滤</li>
</ul>
<h4 id="投影-select"><a href="#投影-select" class="headerlink" title="投影 select"></a>投影 select</h4><ul>
<li>对<strong>关系的属性（列）进行操作</strong>，它选择部分列并返回一个新的关系，包含了原始关系中选定的列</li>
<li>SELECT 列1, 列2 FROM 表名，其中 列1、列2 是需要投影的列名</li>
<li>投影操作常用于从数据库表中选择出特定的列，而不是选择整行数据，从而实现对数据的精细控制</li>
</ul>
<h4 id="连接-join-或-where"><a href="#连接-join-或-where" class="headerlink" title="连接  join 或 where"></a>连接  join 或 where</h4><ul>
<li>同时操作<strong>两个或多个有联系的表</strong>，将它们的行按照某种关联条件进行匹配，然后返回满足连接条件的所有可能组合</li>
<li>SELECT * FROM 表1 JOIN 表2 ON 表1.列 &#x3D; 表2.列</li>
</ul>
<h3 id="比较运算-！"><a href="#比较运算-！" class="headerlink" title="比较运算 &#x3D;   ！  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;  like between"></a>比较运算 &#x3D;   ！  &gt;  &gt;&#x3D;  &lt;  &lt;&#x3D;  like between</h3><h4 id="between是重点"><a href="#between是重点" class="headerlink" title="between是重点"></a>between是重点</h4><blockquote>
<p>between a  and b   a&lt;b   要筛选出位于 a 和 b 之间的值，包括 a 和 b 本身</p>
<p>between a  and b   b&lt;a  即筛选出位于 b 和 a 之间的值,结果和a&lt;b的情况相反</p>
<p>a, b: 这两个值是范围的边界。它们可以是任何数据类型，包括枚举型。例如，它们可以是数字、日期、字符串或枚举值。 枚举型: 如果 a 和 b 是枚举型的值，它们表示了一个范围内的枚举值</p>
</blockquote>
<h3 id="逻辑运算：与，或，非（数据库中）"><a href="#逻辑运算：与，或，非（数据库中）" class="headerlink" title="逻辑运算：与，或，非（数据库中）"></a>逻辑运算：与，或，非（数据库中）</h3><blockquote>
<p>与 a &amp;&amp; b           a and b  (a,b同时成立，结果才成立)<br>或 a|| b              a  or b (a,b中至少一个成立，结果就成立)<br>非 ! a                   not  a  (求反)</p>
</blockquote>
<h3 id="字符串匹配-like"><a href="#字符串匹配-like" class="headerlink" title="字符串匹配 like"></a>字符串匹配 like</h3><blockquote>
<p>%代表任意多个字符（包括0-n个） _ 必须只能代表一个任意字符 如：张<br>_  可代表张三，张六（两个字）<br>张%  可代表：张     张三    张三四(以要以张字开头即可)<br>[  ] 在其中只能选一个字符去匹配<br>[^字符]不在其中选一个字符</p>
</blockquote>
<h3 id="集合包含判断-in"><a href="#集合包含判断-in" class="headerlink" title="集合包含判断 in"></a>集合包含判断 in</h3><ul>
<li>单值情况：  Where  x &#x3D;单值</li>
<li>多值成集合：Where x in (集合值)</li>
</ul>
<h3 id="注意和说明"><a href="#注意和说明" class="headerlink" title="注意和说明"></a>注意和说明</h3><ul>
<li>以上四大类，如果仅从关系数据库专业角度看，只分两大类： 传统的集合运算，专业的关系运算</li>
<li>说明：关系运算&gt;  &lt;  &#x3D;  !&#x3D; 只能用于单值比较。 包含于多值时，要使用集合运算判断in</li>
</ul>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><h4 id="查出所有男生团员的计算机网络基础-，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）"><a href="#查出所有男生团员的计算机网络基础-，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）" class="headerlink" title="查出所有男生团员的计算机网络基础 ，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）"></a>查出所有男生团员的计算机网络基础 ，计算机基础，高等数学上下的成绩情况（学号，课程号，成绩）</h4><p>select * from 成绩表    where  学号 in (select 学号 from 学生表 where 性别&#x3D;’男’ and 团员否&#x3D;1) and 课程号 in(select 课程号 from 课程表 where 名称              in(‘计算机网络基础’,’计算机基础’,’高等数学上’,’高等数学下’)) </p>
<h2 id="主要函数"><a href="#主要函数" class="headerlink" title="主要函数"></a>主要函数</h2><h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><ul>
<li>concat(s1,s2,…sn)  字符串拼接，将s1,s2,s3…sn拼成一个字符串</li>
<li>left(串，n) 取串左n个字符</li>
<li>right(串，n) 取串右n个字符</li>
<li>len(串) 求串长</li>
<li>lower(str)   将字符串str全部转为小写</li>
<li>upper(str)  将字符串str全部转为大写</li>
<li>lpad(str,n,pad) 左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</li>
<li>rpad(str,n,pad) 右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</li>
<li>Ltrim(串) 去掉串左边多余的空格  Rtrim(串) 去掉串的右边多余空格</li>
<li>trim(str) 去掉紫都城头部和尾部的空格（中间的空格依然保留）</li>
<li>substring(str ,strart,len)  返回字符串Str从start位置起的len长度的字符串（第一个位置的字符为1，不是0！）</li>
</ul>
<blockquote>
<p>select concat(‘Hello’,’ mroning’);<br>select lowert(‘Hello’);<br>select upper(‘Hello’);<br>select lpad (‘001’,6,’-‘)    输出为 —001<br>select rpad (‘001’,6,’-‘)    输出为 001—<br>select trim(‘   Good    Morning  ’);    输出Good    Morning<br>select substring(‘Good morning’,1,4);   输出Good</p>
<ul>
<li>给所有同学的学号前面补0变成8位学号<br> update S set sno &#x3D; lpad(sno,8,’0’ );</li>
</ul>
</blockquote>
<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><p>ceil(x) 向上取整（有小数 的话整数部分直接进一位）<br>floop(x) 向下取整（去掉小数部分）<br>mod(x,y) 返回x&#x2F;y的模<br>rand() 返回0~1内的随机数<br>round(x,y) 求参数x四舍五入的值，保留y位小数</p>
<blockquote>
<p>生成一个6位数的随机验证码<br>select lapd (round(rand()*10000000,0),6,’0’ ) ;</p>
</blockquote>
<h3 id="转化数据类型函数-convert-cast"><a href="#转化数据类型函数-convert-cast" class="headerlink" title="转化数据类型函数 convert( ),cast()"></a>转化数据类型函数 convert( ),cast()</h3><p>convert(目标数据类型, 要转换的表达式或值, 是可选参数，用于指定转换的样式或格式);</p>
<blockquote>
<p>它经常用于将日期时间数据类型转换为不同的日期格式，或者将字符串转换为数字，反之亦然</p>
<ul>
<li>select convert (varchar,getdate(),101)<br><code>CONVERT</code> 函数将 <code>GETDATE()</code> 返回的日期时间值转换为 <code>VARCHAR</code> 数据类型，然后使用格式代码 <code>101</code> 将其转换为 MM&#x2F;DD&#x2F;YYYY 格式的字符串</li>
<li>select convert( int,’12345’ )<br>将字符串12345转换成整数</li>
<li>select convert (date , getdate())<br>把当前系统的时间转化成日期，只留下年月日不包时间部分</li>
<li>onvert(nchar(10),生日,21)  其中21是针对日期的格式参数</li>
</ul>
</blockquote>
<p>cast(表达式 as 新类型[长度])</p>
<blockquote>
<p> select CAST(身高 as numeric(4,1)) from 学生表<br>select 姓名+’同学的身高是:’+convert(nchar(4),身高) from 学生表select 姓名+’同学的身高是:’+cast(身高 as NCHAR(4)) from 学生表</p>
</blockquote>
<h3 id="日期相关函数"><a href="#日期相关函数" class="headerlink" title="日期相关函数"></a>日期相关函数</h3><p>curdate() 返回当前日期<br>curtime() 返回当前时间<br>now()  返回当前日期和时间<br>year(date) 获取制定date的年份 同理有month(date) day(date)<br>date_add(date,interbal expr type) 返回一个日期&#x2F;时间值加上一个时间间expr后的时间值<br>datediff(date1,date2) 返回起始日期date1和结束时间date2之间的天数</p>
<blockquote>
<p> Dateadd(日期时间的部分量，偏差值, 日期) 返回指定日期的指定分量的偏移后的日期结果<br>例： dateadd(year,95,getdate()) 求今天后的95天后是哪一天？其中的日期部分量：year, month,quarter，day,week,hour,minute,second,millisecond</p>
</blockquote>
<blockquote>
<p>中美日期区别： Dateadd(日期时间的部分量，偏差值, 日期) 返回指定日期的指定分量的偏移后的日期结果</p>
<p>例： dateadd(year,95,getdate()) 求今天后的95天后是哪一天？</p>
<p> 其中的日期部分量：year, month,quarter，day,week,hour,minute,second,millisecond美式日期格式通常采用月&#x2F;日&#x2F;年的格式，如 12&#x2F;25&#x2F;21。<br>中国日期格式是年-月-日，精确到秒或者毫秒，如 2012-09-26 20:04:07.345</p>
</blockquote>
<h4 id="getdate-函数"><a href="#getdate-函数" class="headerlink" title="getdate() 函数"></a>getdate() 函数</h4><p>select getdate();返回当前系统时间</p>
<h4 id="单独取年月日函数"><a href="#单独取年月日函数" class="headerlink" title="单独取年月日函数"></a>单独取年月日函数</h4><blockquote>
<p>SELECT YEAR(‘2024-03-17’);             2024<br>SELECT MONTH(‘2024-03-18’);        03<br>SELECT DAY(‘2024-03-17’);               17</p>
</blockquote>
<h4 id="日期减法函数-datediff"><a href="#日期减法函数-datediff" class="headerlink" title="日期减法函数 datediff()"></a>日期减法函数 datediff()</h4><ul>
<li><p>select datediff(second,’2024-3-15’,’2024-3-15 10:33:20’)<br>后面的减去见面的，返回结果为秒，算出这一天已经过去了38000秒</p>
</li>
<li><p>select datediff( second,convert (date ,getdate()) ,getdate());<br>同样计算这一天已经过去的秒数</p>
</li>
<li><p>查询所有员工的入职天数，并根据入职天数倒宁排序<br>select name, datediff(curdate(),ruzhiriqi ) as ‘ entrydays ’ from 员工表 order by entrydays desc;</p>
</li>
<li><p>求李大方比较李四方大多少岁<br>select<br> ( select 生日 from 学生表 where 姓名&#x3D;’李大方’)-<br> ( select 生日 from 学生表 where 姓名&#x3D;’李九二’)</p>
<p>select convert(numeric(5,1), ( select 生日 from 学生表 where 姓名&#x3D;’李大方’)- ( select 生日 from 学生表 where 姓名&#x3D;’李九二’) )&#x2F;365</p>
<p>方法3:</p>
<p>declare @sr1 smalldatetime,@sr2 smalldatetime<br>select @sr1&#x3D;生日 from 学生表 where 姓名&#x3D;’李大方’<br>select @sr2&#x3D;生日 from 学生表 where 姓名&#x3D;’李九二’<br>print datediff(day,@sr1,@sr2)</p>
</li>
</ul>
<h4 id="日期加法函数-dateadd"><a href="#日期加法函数-dateadd" class="headerlink" title="日期加法函数 dateadd()"></a>日期加法函数 dateadd()</h4><ul>
<li>select dateadd(day , 105 , getdate())<br>后面的（今天日期）往后推105天后的日子</li>
<li>例子：把最近七天要过生日的人列出来<ul>
<li>select * from Stu where datediff( day , getdate(),出生日期) between 0 and 6</li>
</ul>
</li>
</ul>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>将一列数据作为一个整体，进行纵向计算<mark>所有的null 不参与计算</mark></p>
<p>count不计空值 null不算进去 空格可以算进去 所以保险起见最常用 select count(*) from 学生表 有一行算一行</p>
<blockquote>
<p><mark>常见的聚合函数：<br>count 统计数量<br>max min ave sum 求最大值，最小值，平均值，求和</mark></p>
</blockquote>
<blockquote>
<p>聚合函数应用<br>聚合函数 自定义函数 期末考试有            </p>
<p>可编程性 函数 系统函数 点进去可以找到那个函数的说明     </p>
<p>可编程性 函数 标量值函数：简单的函数</p>
<p>可编程性 函数 表值函数：比如说去买多种东西，用一个兜子可以一次都拿走，这个表值函数就相当于这个兜子。可以返回一堆毫不相干的数据 </p>
</blockquote>
<h4 id="count-统计表中元组个数-（计数查询结果的行数，与列无关）"><a href="#count-统计表中元组个数-（计数查询结果的行数，与列无关）" class="headerlink" title="count( )统计表中元组个数 （计数查询结果的行数，与列无关）"></a>count( )统计表中元组个数 （计数查询结果的行数，与列无关）</h4><p>注意：如果给列名时，null不计算</p>
<blockquote>
<p> select COUNT(性别) from 学生表<br>select COUNT(姓名) from 学生表<br>select COUNT(*) from 学生表  &#x2F;&#x2F;常用<br><mark>可见，空值当空气，啥也不参与。空值不是空格！</mark></p>
</blockquote>
<h4 id="sum-avg-纵向对数值型列求和，平均"><a href="#sum-avg-纵向对数值型列求和，平均" class="headerlink" title="sum(  )  avg(  ) 纵向对数值型列求和，平均"></a>sum(  )  avg(  ) 纵向对数值型列求和，平均</h4><blockquote>
<p>一定要注意定义的时候的数据类型 字符串和数字型不可以一起相加或者算平均      </p>
<p><mark>统计聚合函数不可以有和统计内容无关的列，不然查不出来</mark></p>
<p> select SUM(成绩) from 成绩表 where 课程号&#x3D;’101’</p>
<p> select SUM(学号) from 成绩表 where 课程号&#x3D;’101’ 错应为学号和课程号无关</p>
<p> select AVG(成绩) from 成绩表 where 课程号&#x3D;’102’</p>
<p> select AVG(成绩) from 成绩表 where 课程号&#x3D;’109’</p>
<p>没有109课程,结果为null,实际上是总和&#x2F;数据个数，0&#x2F;0 严格说要溢出，sqlserver做了溢出容错处理的</p>
<p>如果查出来是NULL 在数据库中可能有两个可能：可能真的是NULL,也可能数据溢出了 </p>
<p>可能没有这个表，这个表的和是NULL 这个表是数量是0，null除以0也是null</p>
</blockquote>
<h5 id="一次性分组统计出两门课的平均成绩"><a href="#一次性分组统计出两门课的平均成绩" class="headerlink" title="一次性分组统计出两门课的平均成绩"></a>一次性分组统计出两门课的平均成绩</h5><blockquote>
<p>select 课程号, AVG(成绩) as 科平均 from 成绩表<br>where 课程号 in(‘102’,’105’)<br> group by 课程号</p>
<p>等效写法：</p>
<p> select AVG(成绩) as 科平均 from 成绩表<br> where 课程号 in(‘102’ )<br>select sum (成绩)&#x2F;COUNT(*) as 科平均 from 成绩表   where 课程号 in(‘102’ )</p>
</blockquote>
<h5 id="有结构：成绩表（学号，语文，数学，英语，总分，平均分）"><a href="#有结构：成绩表（学号，语文，数学，英语，总分，平均分）" class="headerlink" title="有结构：成绩表（学号，语文，数学，英语，总分，平均分）"></a>有结构：成绩表（学号，语文，数学，英语，总分，平均分）</h5><blockquote>
<p>根据三科成绩，计算出所有学生的总分，和平均分,不能使用sum,average,因为这个玩意是纵向操作。本题是要求横向计算</p>
<p>方法1:结果不填写表里</p>
<p> Select 学号,语文,数学,英语, 语文+数学+英语 as 总分,总分&#x2F;3 as 平均分 from 成绩表</p>
<p>方法2:结果填表</p>
<p> Update 成绩表 set 总分 &#x3D;语文+数学+英语,平均分 &#x3D; 总分&#x2F;3</p>
</blockquote>
<h5 id="例子：统计学生表人数"><a href="#例子：统计学生表人数" class="headerlink" title="例子：统计学生表人数"></a>例子：统计学生表人数</h5><blockquote>
<p> select count(*) from S;<br>select count(sno) from S;</p>
</blockquote>
<h5 id="统计学生的平均，最大，年龄"><a href="#统计学生的平均，最大，年龄" class="headerlink" title="统计学生的平均，最大，年龄"></a>统计学生的平均，最大，年龄</h5><blockquote>
<p> select avg(sage) from S;<br>select max(sage) from S;</p>
</blockquote>
<h5 id="统计女同学的年龄之和"><a href="#统计女同学的年龄之和" class="headerlink" title="统计女同学的年龄之和"></a>统计女同学的年龄之和</h5><p>select sum(age) from S where ssex &#x3D;‘女’ ;</p>
<h4 id="max-min-常用于对数值，日期列求大值，小值"><a href="#max-min-常用于对数值，日期列求大值，小值" class="headerlink" title="max( ) min( ) 常用于对数值，日期列求大值，小值"></a>max( ) min( ) 常用于对数值，日期列求大值，小值</h4><h5 id="求最高分和最低分的分数差；求年龄最小值"><a href="#求最高分和最低分的分数差；求年龄最小值" class="headerlink" title="求最高分和最低分的分数差；求年龄最小值"></a>求最高分和最低分的分数差；求年龄最小值</h5><p> select MAX(成绩)-MIN(成绩) from 成绩表 where 课程号&#x3D;’101’</p>
<p>select MAX(生日) from 学生表 求年龄最小值(生日最大值)</p>
<h5 id="一次性求出101课程的最高，最低，平均，总分，选课人数"><a href="#一次性求出101课程的最高，最低，平均，总分，选课人数" class="headerlink" title="一次性求出101课程的最高，最低，平均，总分，选课人数"></a>一次性求出101课程的最高，最低，平均，总分，选课人数</h5><blockquote>
<p>elect MAX(成绩) as 最高分,MIN(成绩) 最低分,</p>
<p>   avg(成绩) as 平均分 ,sum(成绩) as 科总分,</p>
<p>​    count(*) as 选课人数 from 成绩表 where 课程号&#x3D;’101’</p>
<p> 说明：类似以上返回一堆数据，可以事先定义表值函数。</p>
<p>补例：</p>
<p>一次性求出D001课程的的课程号，最高，最低，平均，总分，选课人数</p>
<p>  select 课程号, MAX(成绩) as 最高,MIN(成绩) 最低,</p>
<p>  COUNT(*) as 选课人数,SUM(成绩) as 总分,</p>
<p>  AVG(成绩) as 单科平均 from 成绩表 where 课程号&#x3D;’D001’</p>
<p>​    group by 课程号</p>
</blockquote>
<h3 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h3><p>if(value ,t,f)  如果value为true 返回t，否则返回f<br>ifnull(value1,value2)  如果value1不为空，返回value1，否则返回value2<br>case when [val1] then [res1] …. else [default]  end  如果val1为true返回res1,….否则返回default默认值<br>case[表达式] when [val1] then [res1]…else[default] end  如果表达式值为val1,返回res1,….否则返回default默认值</p>
<ul>
<li>需求:查询emp表的员工姓名和工作地址(北京&#x2F;上海—-&gt;一线城市，其他—-&gt;二线城市)<br>select   name.   (case workaddress when’北京’then’一线城市’when’上海’then’一线城市’else’二线城市’end )as’工作地址   rom 员工表;</li>
<li>查询学生的学号名字和他们的成绩等级<br>select   id,    name ,<br>(case when math &gt;&#x3D; 85 then’优秀’when math &gt;&#x3D;60 then’及格’else’不及格’end )’数学’<br>(case when english &gt;&#x3D; 85 then’优秀’when english &gt;&#x3D;60 then’及格’else’不及格’end )’英语’<br>‘(case when chinese &gt;&#x3D; 85 then’优秀’when chinese &gt;&#x3D;60 then’及格’else’不及格’end )’语文’<br>from 成绩表;</li>
</ul>
<h3 id="随机函数-newid"><a href="#随机函数-newid" class="headerlink" title="随机函数 newid()"></a>随机函数 newid()</h3><h3 id="堆叠函数-stuff"><a href="#堆叠函数-stuff" class="headerlink" title="堆叠函数 stuff()"></a>堆叠函数 stuff()</h3><p>Stuff() 堆叠函数，把纵向的数据在横向上堆叠起来</p>
<p>Select (kechengID ) from 课程表 where kechengID in (select kechengID from 成绩表 where 学号&#x3D;’32’)</p>
<blockquote>
<p><strong>查询结果值拼串：</strong></p>
<p>select stuff((select ‘|’+rtrim(课程名称) from 课程表 </p>
<p>where 课程号 in(select 课程号 from 成绩表 where 学号&#x3D;’310001’) for xml path(‘’)),1,1,’’)</p>
<p>结果为: 大学英语|大学物理|C语言单表查询</p>
</blockquote>
<h3 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h3><p><mark>编写顺序： select 字段列表 from 表名列表 where 条件列表 group by 分组字段列表 habing 分组后条件列表 group by 排序字段列表 limit 分页参数</mark></p>
<h5 id="执行顺序：from-where-group-by-select-order-by-limit-having"><a href="#执行顺序：from-where-group-by-select-order-by-limit-having" class="headerlink" title="执行顺序：from where group by  select order by limit having"></a>执行顺序：from where group by  select order by limit having</h5><ul>
<li><p>查询多个列<br>select 列1，列2，列3…. from 表名</p>
</li>
<li><p>select *from 表名</p>
</li>
<li><p>设置别名（as可以省略）<br>select 列1 as 别名1，列2 as 别名2 … from 表名<br>eg 查询所有员工的工作地址，起别名（as可以省略）<br>select workaddress as’工作地址’ form 表名 ;<br>结果是一列</p>
</li>
<li><p>去除重复记录<br>select distinci 字段列表 from 表名</p>
<p>select distinci workaddress  form 表名</p>
</li>
</ul>
<h3 id="条件查询-where"><a href="#条件查询-where" class="headerlink" title="条件查询  where"></a>条件查询  where</h3><p>  select  字段列表 from 表名 where 条件 。关系和逻辑表达式作为条件</p>
<p><img src="C:/Users/mujiu/Pictures/QQ截图20240326102507.png"></p>
<h4 id="查询年龄等于88的员工"><a href="#查询年龄等于88的员工" class="headerlink" title="查询年龄等于88的员工"></a>查询年龄等于88的员工</h4><p>select * from 员工表 where age &#x3D; 88;</p>
<h4 id="查询年龄不等于88的员工"><a href="#查询年龄不等于88的员工" class="headerlink" title="查询年龄不等于88的员工"></a>查询年龄不等于88的员工</h4><p>select * from 员工表 where age !&#x3D; 88;</p>
<p>select * from 员工表 where age &lt;&gt;   88;</p>
<h4 id="查询电话号为空的学生"><a href="#查询电话号为空的学生" class="headerlink" title="查询电话号为空的学生"></a>查询电话号为空的学生</h4><p>select *from S where sno  <mark>is null</mark></p>
<h4 id="查询电话号不空的学生"><a href="#查询电话号不空的学生" class="headerlink" title="查询电话号不空的学生"></a>查询电话号不空的学生</h4><p>select *from S where sno  <mark>is no null</mark></p>
<h4 id="查询年龄在15岁-包含-到20岁-包含-之间的员工信息"><a href="#查询年龄在15岁-包含-到20岁-包含-之间的员工信息" class="headerlink" title="查询年龄在15岁(包含)到20岁(包含)之间的员工信息"></a>查询年龄在15岁(包含)到20岁(包含)之间的员工信息</h4><p>select * from 员工表 whene age &gt;&#x3D; 15 &amp;&amp; age &lt;&#x3D; 20;<br>select * from 员工表 whene age &gt;&#x3D; 15 and age &lt;&#x3D; 20；<br>select * from 员工表 whene age between 15 and 20;</p>
<h4 id="查询性别为女且年龄小于25岁的员工信息"><a href="#查询性别为女且年龄小于25岁的员工信息" class="headerlink" title="查询性别为女且年龄小于25岁的员工信息"></a>查询性别为女且年龄小于25岁的员工信息</h4><p>select * from 员工表 where gender &#x3D; ‘女 and age &lt; 25;</p>
<h4 id="查询年龄等于18或20-或40的员工信息"><a href="#查询年龄等于18或20-或40的员工信息" class="headerlink" title="查询年龄等于18或20 或40的员工信息"></a>查询年龄等于18或20 或40的员工信息</h4><p>select * from 员工表 where age &#x3D; 18 or age &#x3D; 20 or age &#x3D;40;</p>
<p>select * from emp where age in(118,20,40) ;</p>
<h4 id="查询姓名为两个字的员工信息"><a href="#查询姓名为两个字的员工信息" class="headerlink" title="查询姓名为两个字的员工信息"></a>查询姓名为两个字的员工信息</h4><p>select *from 员工表 where name like ‘_ _’<br><mark>使用下划线，一个下划线代表一个字</mark></p>
<h4 id="查询身份证号最后一位是X的员工信息"><a href="#查询身份证号最后一位是X的员工信息" class="headerlink" title="查询身份证号最后一位是X的员工信息"></a>查询身份证号最后一位是X的员工信息</h4><p>select *from 员工表 where name like ‘%X’<br>select *from 员工表 where name like ‘_(17个下划线)X’</p>
<h4 id="查出1-7以上男生和1-6以上女生，且都是团员"><a href="#查出1-7以上男生和1-6以上女生，且都是团员" class="headerlink" title="查出1.7以上男生和1.6以上女生，且都是团员"></a>查出1.7以上男生和1.6以上女生，且都是团员</h4><p>Select * from 学生表</p>
<p> Where(性别&#x3D;’男’ and 身高 &gt;1.7  Or 性别&#x3D;’女’ and 身高 &gt;1.6 And 团员&#x3D;1）</p>
<h4 id="查询姓杨和张的人"><a href="#查询姓杨和张的人" class="headerlink" title="查询姓杨和张的人"></a>查询姓杨和张的人</h4><ul>
<li>select * from 学生表where LEFT(姓名,1) in (‘杨’,’张’)</li>
</ul>
<h4 id="查询无人选课的课程号"><a href="#查询无人选课的课程号" class="headerlink" title="查询无人选课的课程号"></a>查询无人选课的课程号</h4><p>思路：先查出无人选课的课程的名称和课程号 Select distinct 课程号 from 成绩表</p>
<p>Select * from 课程表 where 成绩 not in （select distinct 成绩 from 学生表）然后</p>
<p>Select 课程号，课程名称 from 课程表 whre 课程号 not in  (Select distinct 课程号 from 成绩表)</p>
<h4 id="查出选修了大学英语或大学物理的学生的姓名"><a href="#查出选修了大学英语或大学物理的学生的姓名" class="headerlink" title="查出选修了大学英语或大学物理的学生的姓名"></a>查出选修了大学英语或大学物理的学生的姓名</h4><p>select 学号 form 成绩表 where 课程号 in  (select 课程号 from 课程表 where 课程名称  in(‘大学英语’ ,‘ 大学物理’))</p>
<h3 id="查询前面部分元组行（常用在排序结果后）"><a href="#查询前面部分元组行（常用在排序结果后）" class="headerlink" title="查询前面部分元组行（常用在排序结果后）"></a>查询前面部分元组行（常用在排序结果后）</h3><p>从排序结果中取出前几个或前百分之的元组行：<br>取前n个：  top n   取前百分之n  ：   n   percent<br>要并列在上述后面紧跟with ties  </p>
<blockquote>
<p><strong>注意百分号在右边，而且不能是百分号，是一个单词</strong></p>
</blockquote>
<blockquote>
<p>取身高最高的前五名  （身高高的数字大在上面，是降序排序）<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by shight  desc</p>
<p>如果第五名和第六名一样高，按照性别女生在前：<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by shight  desc，ssex desc</p>
<p>如果要按百分比取，如果取百分之前20，把top 5 改成 20 percent </p>
<hr>

<p>如果取5个人但是第5名和第6名并列，要把第5第6都取出来<br>select <mark>top 5  with ties </mark>    sno sname ssex shight from Stu order by shight  desc</p>
<hr>
</blockquote>
<h4 id="随机挑选几个记录出来"><a href="#随机挑选几个记录出来" class="headerlink" title="随机挑选几个记录出来"></a>随机挑选几个记录出来</h4><p><strong>随机挑选函数 newid()</strong>   </p>
<p>比如用于软件给用户展示广告，每个用于登录后随机选择4条展示给用户</p>
<blockquote>
<p>把学生表的信息随机排序罗列出来<br>select NEWID(), *from S order by newid();<br>这行代码运行多次查找出来的结果多次不同</p>
</blockquote>
<blockquote>
<p>随机选五个出来<br>select <mark>top 5 </mark>  sno sname ssex shight from Stu order by newid()</p>
</blockquote>
<h3 id="子查询的结果值可以用于主查询的条件中的关系比较"><a href="#子查询的结果值可以用于主查询的条件中的关系比较" class="headerlink" title="子查询的结果值可以用于主查询的条件中的关系比较"></a>子查询的结果值可以用于主查询的条件中的关系比较</h3><p>如果查询比A高的同学，那么必须只有一个A作为标准，不然会报错</p>
<ul>
<li><p>Select … form Stu where gender&#x3D;’男’ and 身高 &gt;(select min(身高) from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)<br>Select … form Stu where gender&#x3D;’男’ and 身高&gt;and(select身高from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)</p>
</li>
<li><p>上面两个结果一样，下面两个结果一样</p>
</li>
<li><p>Select … form Stu where gender&#x3D;’男’ and 身高 &gt;(select max(身高) from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)<br>Select … form Stu where gender&#x3D;’男’ and 身高&gt;some(select身高from Stu where 姓名 &#x3D;’A’ or 姓名&#x3D;’B’)</p>
</li>
</ul>
<blockquote>
<p>eg 查出比李大方和李四方任意一个身高还要高的所有男生（就是找比他们俩里最高的还要高的人<br>select 学号,姓名,身高,性别 from 学生表 where 性别&#x3D;’男’and 身高&gt;some(select 身高 from 学生表 where 姓名&#x3D;’李大方’or 姓名&#x3D;’李四方’ )</p>
</blockquote>
<p><mark>说明：子查询的结果如果是一个集合，不是单一值，不能使用&gt; &lt; &#x3D;这类关系运算. X&#x3D;(集合)是不对的，但 x in(集合)是对的</mark></p>
<h4 id="两个查询的结果值（同类型的，可直接用于表达式计算）"><a href="#两个查询的结果值（同类型的，可直接用于表达式计算）" class="headerlink" title="两个查询的结果值（同类型的，可直接用于表达式计算）"></a>两个查询的结果值（同类型的，可直接用于表达式计算）</h4><blockquote>
<p>实例：查出A比B大多少岁<br>Declare @name1 nchar(5),@name2 nchar(5)<br>Declare @age 1 int ,@age2 int<br>Set @name1&#x3D; ‘一一’<br>Set @name1&#x3D; ’二二’<br>Select @age1 &#x3D; year(geydaye())-yeary(出生日期) from 学生表 where 姓名 &#x3D; name1<br>Select @age2 &#x3D; year(geydaye())-yeary(出生日期) from 学生表 where 姓名 &#x3D; name2<br>If(@age1 &gt;@age2)<br>begin<br>Print @name1 +‘比’+@name2+’大’ +convert(char(2),(@age1-@age2)岁<br>And  这两个相当于C语言中的花括号，如果是多句必须加，单句可以不加<br>Else<br>Print @name2 +‘比’+@name1+’大’ +convert(char(2),(@age2-@age1)岁</p>
</blockquote>
<blockquote>
<p>实例：查出李大方比李四方大多少岁？谁大谁在前。</p>
<p>declare @name1 nvarchar(5),@name2 nvarchar(5)<br>declare @age1 int ,@age2 int<br>set @name1&#x3D;’李大方’<br>set @name2&#x3D;’李四方’<br>select @age1&#x3D;YEAR(getdate())-YEAR(出生日期) from 学生表 where 姓名&#x3D;@name1<br>select @age2&#x3D;YEAR(getdate())-YEAR(出生日期) from 学生表 where 姓名&#x3D;@name2<br>if(@age1&gt;@age2)<br>begin<br>print @name1+’比‘+@name2+’大’+convert(char(2), @age1-@age2)+’岁’<br> end<br>else<br> print @name2+’比‘+@name1+’大’+convert(char(2), @age2-@age1)+’岁’</p>
</blockquote>
<blockquote>
<p>例：上例如果在开发APP要使用这个结果咋办？使用一个变量保存结果，把变量传给其它语言</p>
<p> declare @sg float </p>
<p> select @sg&#x3D;(select 身高 from 学生表 where 姓名&#x3D;’李大方’)-</p>
<p>  (select 身高 from 学生表 where 姓名&#x3D;’李四方’)</p>
<p> print @sg</p>
</blockquote>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="-1"><a href="#-1" class="headerlink" title=""></a></h4><h3 id="去掉表中重复值-数据查询例子"><a href="#去掉表中重复值-数据查询例子" class="headerlink" title="去掉表中重复值+数据查询例子"></a>去掉表中重复值+数据查询例子</h3><h4 id="查看学生表有多少种不同的姓氏"><a href="#查看学生表有多少种不同的姓氏" class="headerlink" title="查看学生表有多少种不同的姓氏"></a>查看学生表有多少种不同的姓氏</h4><p>select distinct LEFT(姓名,1) from 学生表</p>
<h4 id="找学生表中没有选过课的人的学号"><a href="#找学生表中没有选过课的人的学号" class="headerlink" title="找学生表中没有选过课的人的学号"></a>找学生表中没有选过课的人的学号</h4><p>先找到学生表中选过一门课的人的学号，再找到除了他们的人的学号</p>
<p>Select 学号，姓名，性别 form 学生表   where 学号 not in （select distinct 学号 from 成绩表）</p>
<h3 id="字符串匹配查询"><a href="#字符串匹配查询" class="headerlink" title="字符串匹配查询"></a>字符串匹配查询</h3><h4 id="查出学生表中所有姓杨，张，李的人-有如下办法"><a href="#查出学生表中所有姓杨，张，李的人-有如下办法" class="headerlink" title="查出学生表中所有姓杨，张，李的人,有如下办法"></a>查出学生表中所有姓杨，张，李的人,有如下办法</h4><ul>
<li>Select * from 学生表 where left(姓名,1)&#x3D;’杨’ or left(姓名,1)&#x3D;’张’ or left(姓名,1)&#x3D;’李’</li>
<li>Select * from 学生表 where left(姓名,1) in(’杨’,’张’,’李’)</li>
<li>Select * from 学生表 where left(姓名,1) like ‘[杨张李]’</li>
<li>Select * from 学生表 where 姓名 like ‘[杨张李]%’</li>
<li>Select * from 学生表 where substring(姓名,1,1) like ‘[杨张李]’</li>
</ul>
<h3 id="分组查询（一般结合统计聚合函数一起用）"><a href="#分组查询（一般结合统计聚合函数一起用）" class="headerlink" title="分组查询（一般结合统计聚合函数一起用）"></a>分组查询（一般结合统计聚合函数一起用）</h3><blockquote>
<p>Select 课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号   </p>
<p>下面的就不对了，因为和学号无关</p>
<p>Select 学号，课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号</p>
<hr>
</blockquote>
<p>select 字段列 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件]</p>
<blockquote>
<p>Select 课程号 ,avg（成绩） as 科平均 from 成绩表 group by 课程号 having AVG(成绩)&lt;60</p>
<p>一组就是一门课，每一组进行一次聚合函数运算，对聚合运算统计结果运算不能用where要用having</p>
</blockquote>
<p>执行顺序: where &gt;聚合函数&gt;having 。<br>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</p>
<blockquote>
<p>where与having区别<br>执行时机不同: where是分组之前进行过滤，不满足where条件，不参与分组;<br>而having是分组之后对结果进行过滤。<br>判断条件不同: where朱能对聚合函数进行判断，而having可以。</p>
</blockquote>
<h4 id="一次性分组统计出两门课的平均成绩-1"><a href="#一次性分组统计出两门课的平均成绩-1" class="headerlink" title="一次性分组统计出两门课的平均成绩"></a>一次性分组统计出两门课的平均成绩</h4><blockquote>
<p>select 课程号, AVG(成绩) as 科平均 from 成绩表<br>where 课程号 in(‘102’,’105’)<br> group by 课程号</p>
<p>等效写法：</p>
<p> select AVG(成绩) as 科平均 from 成绩表<br> where 课程号 in(‘102’ )<br>select sum (成绩)&#x2F;COUNT(*) as 科平均 from 成绩表   where 课程号 in(‘102’ )</p>
</blockquote>
<h4 id="根据性别分组，统计男同学好女同学的数量"><a href="#根据性别分组，统计男同学好女同学的数量" class="headerlink" title="根据性别分组，统计男同学好女同学的数量"></a>根据性别分组，统计男同学好女同学的数量</h4><p>select ssex,  count(*) from S group by ssex;</p>
<h4 id="根据性别分组，统计男同学好女同学的平均年龄"><a href="#根据性别分组，统计男同学好女同学的平均年龄" class="headerlink" title="根据性别分组，统计男同学好女同学的平均年龄"></a>根据性别分组，统计男同学好女同学的平均年龄</h4><p>select ssex,  avg(age) from S group by ssex;</p>
<h4 id="查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址"><a href="#查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址" class="headerlink" title="查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址"></a>查询年龄小于45的员工，并根据工作地址分组，获取员工数量大于等于3的工作地址</h4><p>select workaddress，count(*) from emp where age &lt; 45 group by workaddress having count( *)&gt;&#x3D;3,</p>
<p>select workaddress，count(*)  address_count from emp where age &lt; 45 group by workaddress having address_count &gt;&#x3D;3,使用别名</p>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p>select 列名 from 表名 limit 起始索引,查询记录数</p>
<blockquote>
<p>起始索引从o开始,起始索引&#x3D;(查询页码-1)*每页显示记录数。<br>分页查询是数据库的方言，不同的数据库有不同的实现,MySQL中是LIMIT<br>如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10</p>
</blockquote>
<h4 id="查询第一页员工数据，每页展示十条记录"><a href="#查询第一页员工数据，每页展示十条记录" class="headerlink" title="查询第一页员工数据，每页展示十条记录"></a>查询第一页员工数据，每页展示十条记录</h4><p>select * from 员工表 limit 0,10;<br>select * from 员工表 limit0,10;</p>
<h4 id="查询第一页员工数据，每页展示十条记录-1"><a href="#查询第一页员工数据，每页展示十条记录-1" class="headerlink" title="查询第一页员工数据，每页展示十条记录"></a>查询第一页员工数据，每页展示十条记录</h4><p>select * from 员工表 limit 10,10;</p>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><h4 id="查询年龄为20-21-22-23岁的女学生信息。"><a href="#查询年龄为20-21-22-23岁的女学生信息。" class="headerlink" title="查询年龄为20,21,22,23岁的女学生信息。"></a>查询年龄为20,21,22,23岁的女学生信息。</h4><p>select * from S where  ssex&#x3D;‘女’ and age in (20,2,22,23);</p>
<h4 id="查询性别为男，并且年龄在20-40岁-含-以内的姓名为三个字的学生。"><a href="#查询性别为男，并且年龄在20-40岁-含-以内的姓名为三个字的学生。" class="headerlink" title="查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的学生。"></a>查询性别为男，并且年龄在20-40岁(含)以内的姓名为三个字的学生。</h4><p>select * from S where  ssex&#x3D;‘男’ and age between 20 and 40 name like ‘___’;</p>
<p>select * from S where  ssex&#x3D;‘男’ and （age between 20 and 40) name like ‘___’;</p>
<h4 id="统计员工表中-年龄小于60岁的，男性员工和女性员工的人数。"><a href="#统计员工表中-年龄小于60岁的，男性员工和女性员工的人数。" class="headerlink" title="统计员工表中,年龄小于60岁的，男性员工和女性员工的人数。"></a>统计员工表中,年龄小于60岁的，男性员工和女性员工的人数。</h4><p>select sex,count(*) from 员工表 where age &lt; 60 group by sex;</p>
<h4 id="查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。"><a href="#查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。" class="headerlink" title="查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。"></a>查询所有年龄小于等于35岁员工的姓名和年龄，并对查询结果按年龄升序排序，如果年龄相同按入职时间降序排序。</h4><p>select sex,count(*) from 员工表 where age &lt; 60 group by sex;</p>
<h4 id="查询性别为男，且年龄在20-40岁-含-以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。"><a href="#查询性别为男，且年龄在20-40岁-含-以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。" class="headerlink" title="查询性别为男，且年龄在20-40岁(含)以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。"></a>查询性别为男，且年龄在20-40岁(含)以内的前5个员工信息，对查询的结果按年龄升序排序，年龄相同按入职时间升序排序。</h4><p>select * from 员工表 where sex &#x3D; ‘男’ and age between 20 and 40 order by age ase ，entrydate asc limit 5 ;</p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>从多个表中查询数据（笛卡尔积，在查询时需要消除无效的笛卡尔积）<br>如后面加  where  学生表.sid &#x3D; 成绩表.sid<br>select * from  学生表 , 成绩表  where  学生表.sid &#x3D; 成绩表.sid</p>
<h3 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h3><ul>
<li>一对多（部分和员工的关系，一个部门可以有多个员工，一个员工只能对应一部门；实现：在多的一方建立外键，指向一的一方的主键）；</li>
<li>多对一；</li>
<li>多对多（学生和课程的关系，一个学生可以选择多门课程，一门课程也可以被多个学生选择实现：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键）；</li>
<li>一对一（用户与用户详情之间的关系，比如学生和学生的学生号。用于单表拆分，将一张表的基础字段放在一张表中，其他的信息放在另一张表中，提升操作效率。实现：在任意一方加入外键，关联另一方的主键，并设置外键为唯一的unique）</li>
</ul>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>查询结果是脱离原表的，一旦从表中查出信息，信息就和原表没关系了，表也会被关闭<br>如果查询两个表，两个表都有学号，那么会显示学号不明确，这时候要对学号进一步确定，比如表.学号来进一步确定学号</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p>相当于查询A、B交集部分数据</p>
<ul>
<li><p>隐式内连接</p>
</li>
<li><p>显式内连接</p>
</li>
</ul>
<p>查询每个员工的姓名，及关联的部门的名称(隐式内连接实现)</p>
<p>查询每个员工的姓名，及关联的部门的名称(显式内连接实现)</p>
<blockquote>
<p>或者 标准化代码（老）：（内连接）<br> select a.sid,  a.性别，a.性别，b.成绩  from 学生表 as a ，成绩表 as b   where a.sid &#x3D; b.sid<br>（是一种双重循环，两个表两个指针，两个指针指向的数据一样则选中数据）<br>select a.sno ,a.sname,a.ssex ,b.cno,b.grade from S as a ,G as b where a.sno &#x3D; b.sno;</p>
<p>group by 是对已经查询的数据进行分组，分组之后再按照它排序<br>select 课程号 ,max(成绩) as 最高，MIN（成绩） 最低，count(*) as 选课人数 ,sum(成绩） as 总分，ave(成绩） as 平均 from 成绩表 where 课程号 in（’D001’,’D002’,’D003’)<br>group by 课程号 order by  课程号 dese </p>
<p>在这基础上，把选课人数三以上的排序</p>
<p>select 课程号 ,max(成绩) as 最高，MIN（成绩） 最低，count(<em>) as 选课人数 ,sum(成绩） as 总分，ave(成绩） as 蛋壳平均 from 成绩表 where 课程号 in（’D001’,’D002’,’D003’)<br>group by 课程号  having count(</em>) &gt;3  order by  课程号 dese </p>
<p>count(*)这里注意不能用别名 ，注意order by 一定是放在最后的</p>
<hr>

<p>或者 标准化代码（新）：（内连接）<br>select a.sno ,a.sname,a.ssex ,b.cno,b.grade from S as a inner join   G as b  on  a.sno &#x3D; b.sno;</p>
<p>学会混用  （内连接）<br>select a.* ,b.grade from S as a inner join   G as b  on  a.sno &#x3D; b.sno;</p>
<p>–换了一下位置，A表和B表位置调换，查询结果一样，没有影响<br>select a.* ,b.grade from   G as b  inner join  S as a  on  a.sno &#x3D; b.sno;</p>
<p><mark>内连接中没有对应上的不会出现在查询里面，比如一个同学没有选课，成绩表没有它的学号，那么不会被查询出来</mark></p>
<hr>

<p>多次连接的时候，后面的第二次连接连接的是前面连接的结果，而不是前面的表</p>
<p>多个表连接：四个表五个表连接也是同理。如果没有and后面的限制课程和性别那么所有数据都会查出来<br>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 成绩表，学生表，课程表<br>where 成绩表.学号&#x3D;学生表.学号 and 成绩表.课程号 &#x3D; 课程表.课程号<br>and 性别 &#x3D;’ 男’ and 课程名称 &#x3D;’大学英语’<br>错的 下面的没写对<br>select S.sno ,C.cno ,grade,sname,cname<br>from S,C,G where S.sno&#x3D;C.cno and C.tno&#x3D; G.sno</p>
</blockquote>
<h4 id="视图看代码"><a href="#视图看代码" class="headerlink" title="视图看代码"></a>视图看代码</h4><p>create view xscjkc as …照片拍的那段代码</p>
<p>执行上面的之后，去视图里面找到xscjkc 右键点设计<br>select * from xscjkc where 性别 &#x3D;’男’;<br>写好的视图可以看作前面的查询结果保存成的结果，作用于后续的查询，后面使用会方便很多<br>from 后面可以跟表也可以跟视图</p>
<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><ul>
<li>左外连接:查询左表所有数据，以及右表中被左表提及的数据两张表交集部分数据</li>
</ul>
<blockquote>
<p>如查出学生表和成绩表的姓名，学号，课程号，成绩数据，如果学生表中有学生没有选课，也要把它查出来，他的课程号和成绩会显示Null（没有选的显示null)<br>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 学生表 left join 成绩表 on 成绩表.学号&#x3D;学生表.学号 where课程号 is null</p>
<p>select 成绩表.学号，课程表.课程号，成绩，姓名<br>from 学生表 left join 成绩表 on 成绩表.学号&#x3D;学生表.学号 where课程号 is not null</p>
<p>实际开发中null不好操作，传给前端的不是对象型是空串 </p>
<p>select 成绩表.学号，姓名，性别，<br>case when 课程号 is null then’无选课’<br>else  课程号<br>end as 课程号，<br>成绩 from<br>学生表 left join 成绩表 on 成绩表.学号 &#x3D;学生表.学号</p>
<p>select C.tno,C.sname,S.ssex,<br>case when tno is null then ‘无选课’<br>else  tno<br>end as cno,<br>grade from<br>S left join G on C.tno &#x3D;S.sno</p>
</blockquote>
<ul>
<li>右外连接:查询右表所有数据，以及左表中被右表提及的数据两张表交集部分数据</li>
</ul>
<h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><p>自连接:一个表打开两次，当前表与自身的连接查询，自连接必须使用表别名</p>
<blockquote>
<p>在学生表中找到和杨秋性别一样的其他同学信息</p>
<p>例子但是没成功<br>select a.sname ,a.ssex from S  as a inner join S as b<br>on a.ssex &#x3D;b.ssex<br>where a.sname &#x3D; ‘ 杨秋’ and b.sname!&#x3D; ‘杨秋’</p>
<hr>

<p>group by 学号 having avg(成绩) 按学号分组，每一组也就是每个学生一个平均成绩</p>
<hr>
现实场景：查询哪些部门内部平均工资高于公司所有人的平均工资
select 部门,avg(工资 ）from 员工表 group by 部门 having AVG(工资 ）>(select avg(工资) fom 员工表）
</blockquote>
<h4 id="全连接"><a href="#全连接" class="headerlink" title="全连接"></a>全连接</h4><p>a full join b </p>
<blockquote>
<p>两个表的所有数据都要列出来，凡是对方表中无 对应的记录，则都以Null值代表</p>
<p>inner join 是要求a,b两表记录条件相交<br>full join 要求a,b两表记录相并</p>
<p>如有A,B,C三个表，连接查询时，AB之间以B数据为准，BC连接时以C为数据为准。<br> …from a right join b on a.key1&#x3D;b.key1<br>right join c on b.key2&#x3D;c.key2</p>
</blockquote>
<h2 id="注意细节"><a href="#注意细节" class="headerlink" title="注意细节"></a>注意细节</h2><ul>
<li>如果给表起了别名，那么不能再用表本来的名字进行操作</li>
<li>存在性判断的时候，两个表是同时打开的（主表和子表同时打开）</li>
<li>如果建表的时候设置了不可以为空Null，那么给表添加数据的时候就不可以输入NULL。可以输入空字符串’’两个单引号</li>
</ul>
<h2 id="游标-cursor"><a href="#游标-cursor" class="headerlink" title="游标 cursor"></a>游标 cursor</h2><h2 id="存储过程（函数）"><a href="#存储过程（函数）" class="headerlink" title="存储过程（函数）"></a><strong>存储过程（函数）</strong></h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li><p>变量 （自定义的变量）必须要加@  声明变量语法 declare @变量名 类型[(宽度),类型…..]</p>
</li>
<li><p>打印 print @变量名</p>
</li>
<li><p>分支结构</p>
<blockquote>
<p>格式：只能用在过程或函数中，不能嵌套到其它sql命令中内。但sql内部要实现条件判断可以用case when 子句。</p>
<p>If(条件)<br>begin<br>成立时语句序列<br>end<br>[else<br>begin<br>条件不成立时的语句序列<br>end】</p>
</blockquote>
</li>
<li><p>case when 用法（直接多分支，类似于switch功能，但它不是独立的命令语句 ）</p>
<blockquote>
<p> 格式1：</p>
<p> Case 表达式</p>
<p>  When 常量1 then 结果1</p>
<p>  When 常量2 then 结果2</p>
<p>  …</p>
<p>  When 常量n then 结果n</p>
<p> Else  结果n+1</p>
<p>End  </p>
<p>与switch不大一样的是：每个then 后面的结果不需要加break;本系统只执行一个条件，不会从条件入口进来后，还要往下执行</p>
<p>格式2：用法比格式1要灵活得多 </p>
<p>Case </p>
<p>  When 条件1 then 结果1</p>
<p>When 条件2 then 结果2</p>
<p> …..</p>
<p>  When 条件n then 结果n</p>
<p> Else 结果n+1</p>
<p>End </p>
</blockquote>
</li>
<li><p>循环</p>
<blockquote>
<p>While(条件)</p>
<p> Begin</p>
<p>  循环体语句序列</p>
<p>End</p>
<p>在这里循环使用较少，因为数据库的查询 select本身就是从首行自动循环到尾行。</p>
</blockquote>
</li>
<li><p><strong>补充三种流程结构</strong></p>
<blockquote>
<p> While(条件)</p>
<p>Begin </p>
<p> 循环体语句序列</p>
<p>End</p>
<hr>

<p>If(条件)</p>
<p> Begin</p>
<p>成立时语句序列</p>
<p> End</p>
<p>Else</p>
<p> Begin</p>
<p>  不成立时语句序列</p>
<p>End</p>
</blockquote>
</li>
</ul>
<h3 id="自定义函数-标量函数，表值函数"><a href="#自定义函数-标量函数，表值函数" class="headerlink" title="自定义函数:标量函数，表值函数"></a>自定义函数:标量函数，表值函数</h3><blockquote>
<p>(1)标量函数   回的是一个标准量，如一般数据类型int, char. 这种函数相对简单，通过函数体计算，返回调用处一个标量，与其它语言类似，有参数时通用函数名后面参数表带去，也可以无参函数（但空括号不能省）</p>
<p>Create function 函数名(形式参数表) returns 返回值的数据类型 Begin<br>函数体语句<br>Retrun<br>End</p>
<blockquote>
<p>create function f1(@a int,@b int) returns int</p>
<p>begin</p>
<p> declare @t int</p>
<p> set @t&#x3D;@a+@b</p>
<p> return @t</p>
<p>end</p>
<p>print dbo.f1(5,1)</p>
</blockquote>
<p>（2）表值函数: 内联表值函数</p>
<p> 一般函数返回的一个标量值，表值函数返回的是一个表(视图)，由此得名</p>
<p>这种表是一个关系，在结构表头与一般的物理表相没区别，可以随意存放多行多列数据—故使用表值函数可以返回大量数据</p>
<p> 表值函数内部函数体的核心任务是，把所有需要的返回给调用处的数据计算出来，存放到内存表中。最后一次性返回。</p>
<p> 格式：create function 函数名(形式参数表) returns table</p>
<p>As</p>
<p> Begin </p>
<p>   函数体</p>
<p> End</p>
</blockquote>
<h3 id="表的自增列的设置"><a href="#表的自增列的设置" class="headerlink" title="表的自增列的设置"></a>表的自增列的设置</h3><blockquote>
<p>原因：如成绩表要删除一个学生的一门课情况，要两个关键字列组合。如果要删除一个图书销售表中的记录，要根据书店ID，书ID，销售日期，销售员ID，太麻烦了。使用记录行的自增ID列可方便解决。</p>
<p>给表的每个记录设置自增的数字列，它是唯一值的（表中已经有数据是无法设置的，事先空表时设置）</p>
</blockquote>
<p><img src="C:/Users/mujiu/AppData/Roaming/Typora/typora-user-images/image-20240423172657618.png" alt="image-20240423172657618"></p>
<h3 id="存储过程应用"><a href="#存储过程应用" class="headerlink" title="存储过程应用"></a>存储过程应用</h3><p><mark>create procedure 过程名 as 过程体语句(可是若干条命令)   execute   过程名    来执行过程</mark></p>
<blockquote>
<p>Xx(arg1,arg2…);           Int x&#x3D;xx(arg1,arg2);</p>
<p>类似老的C：void 函数名( ) { 函数体}<br> 过程本身不通过过程名带回来计算结果，所以类似于void（并不是通过形参的改变返回数据给实参）</p>
</blockquote>
<h4 id="无参传递过程，主调程序不需要传递实参给过程"><a href="#无参传递过程，主调程序不需要传递实参给过程" class="headerlink" title="无参传递过程，主调程序不需要传递实参给过程"></a>无参传递过程，主调程序不需要传递实参给过程</h4><blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">例：调用过程查询杨春的数据。</span><br><span class="line"> create procedure p1 as </span><br><span class="line"> declare @xm nchar(6)</span><br><span class="line"> set @xm=&#x27;杨春&#x27;</span><br><span class="line"> select 学号,姓名,生日 from 学生表 where 姓名=@xm</span><br><span class="line"> 完成过程的建立，然后在其它主调程序中调用：exec 过程名</span><br><span class="line"> execute p1</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="有参过程：实用性强，通用性好"><a href="#有参过程：实用性强，通用性好" class="headerlink" title="有参过程：实用性强，通用性好"></a>有<strong>参过程：实用性强，通用性好</strong></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create procedure p2 @xm nchar(6),@kch nchar(3)</span><br><span class="line">as </span><br><span class="line">select 成绩 from 成绩表 where 课程号=@kch and </span><br><span class="line">学号 in(select 学号 from 学生表 where 姓名=@xm)</span><br><span class="line">execute p2 &#x27;李大方&#x27;,&#x27;101&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="有参数，且把计算结果返回给调用处-不是select查询结果视图返回"><a href="#有参数，且把计算结果返回给调用处-不是select查询结果视图返回" class="headerlink" title="有参数，且把计算结果返回给调用处(不是select查询结果视图返回)"></a><strong>有参数，且把计算结果返回给调用处(不是select查询结果视图返回)</strong></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入一个学号，课程号 ,调用过程查询该人该科成绩值，把计算得到成绩值结果返回给调用处</span><br><span class="line">分析：过程不返回值，但可以通过形参把结果返回给过程的实参（要多定义专用变量返回结果</span><br><span class="line">create procedure p3 @xm nchar(6),@kch nchar(3),</span><br><span class="line">@cj int output</span><br><span class="line">as </span><br><span class="line"> declare @cj0 int</span><br><span class="line"> select @cj0=成绩 from 成绩表 where 课程号=@kch and </span><br><span class="line">   学号 in(select 学号 from 学生表 where 姓名=@xm)</span><br><span class="line"> set @cj=@cj0</span><br><span class="line">调用</span><br><span class="line"> declare @cj int </span><br><span class="line"> execute p3 &#x27;李大方&#x27;,&#x27;101&#x27;,@cj output</span><br><span class="line"> print @cj</span><br><span class="line">说明：需要返回值的实参和形参后面都要跟上output.掌握此概念后，调用一个过程随便返回什么数据，随便返回多少个数据。</span><br><span class="line">可见：过程就是一个小功能模板，程序段，一般是参数的输入，输出，与外界进行接口。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>









]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>博客篇-Twikoo+ MongoDB + Vercel 部署评论</title>
    <url>/2025/03/21/25-twikoo/</url>
    <content><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>在为Hexo+Butterfly主题博客中实现评论功能时，我选择了Twikoo+MongoDB+Vercel这套零成本技术方案。本文将分享我的部署经验，并解释这三个技术组件的关系与作用，希望能帮助大家避免踩坑</p>
<hr>

<h2 id="使用Twikoo-MongoDB-Vercel部署评论"><a href="#使用Twikoo-MongoDB-Vercel部署评论" class="headerlink" title="使用Twikoo+MongoDB+Vercel部署评论"></a>使用Twikoo+MongoDB+Vercel部署评论</h2><p>想给你的hexo+butterfly主题添加文章评论功能，又不想花钱租服务器，那么Twikoo+MongoDB+Vercel这个方法是最棒的选择。<br>名字听起来很长、有点复杂，但跟着大佬分享的教程一步步操作，其实并不难。不过中途一定要细心，避免出错，否则后续排查和修正会很痛苦T.T<br><strong>注意中间不要出错！否则后续排查改正很痛苦！</strong><br>下面是我在部署过程中觉得很棒参考的资料以及踩过的坑和解决方法，希望可以帮助大家少走弯路</p>
<h2 id="Twikoo、MongoDB、Vercel技术栈关系"><a href="#Twikoo、MongoDB、Vercel技术栈关系" class="headerlink" title="Twikoo、MongoDB、Vercel技术栈关系"></a>Twikoo、MongoDB、Vercel技术栈关系</h2><p>Twikoo：前端评论系统，负责在网页中展示评论框、处理用户交互<br>MongoDB Atlas：云数据库，存储所有评论数据（内容、用户信息、时间戳等）<br>Vercel：无服务器部署平台，托管Twikoo的后端服务（处理评论的增删改查逻辑）<br>简单来说，Twikoo 负责“展示和交互”，MongoDB 负责“存储数据”，而 Vercel 负责“运行后端逻辑”</p>
<h2 id="Twikoo部署参考资料"><a href="#Twikoo部署参考资料" class="headerlink" title="Twikoo部署参考资料"></a>Twikoo部署参考资料</h2><p>两个官方文档：<br><a href="https://twikoo.js.org/quick-start.html">Twikoo官方文档</a><br><a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">butterfly主题配置Twikoo文档</a><br>前面两个官方文档我感觉在互相套娃（A让我看B，B让我看A），看了半天没有看明白到底该怎么做<br><mark>推荐参考：</mark></p>
<p>我的评论布置主要参考了夜梦星尘的博客和B站的教学视频。跟着夜梦星尘的博客完成了80%，又跟着B站视频修改完成最后的20%，非常感谢两位。<br><strong>如果你正准备用这个方法部署，建议你先看B站木鱼的视频教程，把用户名和密码配置好，再跟着夜梦星尘的博客一步一步来，祝你成功</strong><br><a href="https://www.bilibili.com/video/BV1414y1r7bS/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750">B站木鱼木诶视频教程</a><br><a href="https://tech.yemengstar.com/vercel-twikoo-comment-your-hexo/">夜梦星尘的博客</a></p>
<p>但是要注意，<strong>夜梦博客前面没有设置账号和密码的步骤</strong>，导致我后面一直连接失败，最后找到B站这位UP的部署视频，跟着他把账号密码设置后重新部署，并要把前面失败的部署删掉！！好在删删改改终于成功了<br>如果你也遇到了密钥错误，或者envId点进去显示失败，请看下面：</p>
<h2 id="评论踩坑修改–密钥错误"><a href="#评论踩坑修改–密钥错误" class="headerlink" title="评论踩坑修改–密钥错误"></a>评论踩坑修改–密钥错误</h2><p>跟着夜梦博客做，我在输出密钥页面的样子是这样的：右下角密钥的账号是乱码<br><img src="/postImgs/myblog/pl01.png" alt="错误的密钥"><br><strong>此时就有问题了，要找到设置账号密码的地方，设置好自己的，在这里：</strong><br><img src="/postImgs/myblog/pl02.png" alt="设置帐号密码"><br><strong>设置完后，让他重新生成密钥，可以看到这次的密钥账号是你刚才自己输入的，把这个密钥的密码部分改成设置的，这个就是才是正确的</strong><br><img src="/postImgs/myblog/pl03.png" alt="正确的密钥"><br>现在要重新修改第一次设置的密钥，把错的删掉换成新的，在这里修改：<br><img src="/postImgs/myblog/pl04.jpg" alt="正确的密钥"><br>重新部署，会看到令人心动的成功提示：<br><img src="/postImgs/myblog/pl04.png" alt="正确的密钥"></p>
<h2 id="评论踩坑修改–评论显示undefined"><a href="#评论踩坑修改–评论显示undefined" class="headerlink" title="评论踩坑修改–评论显示undefined"></a>评论踩坑修改–评论显示undefined</h2><p>虽然修改后现实部署成功了，但是这里点进<strong>envId</strong>会发现现实还是部署失败，用这个envid完成后续博客配置的结果是评论发不出来显示undefined<br><strong>解决办法：删除之前没用的部署</strong><br>我在修改正确的密钥后，每次新部署都会是成功，但是找到envId点进去又是失败，最后发现<mark>在部署前要把之前配的、旧的、没用的部署彻底删掉，只留下最新的部署，然后重新部署，这次envId点进去也是部署成功！</mark><br>最后重新推送一下博客，测试评论功能，成功啦！<br><img src="/postImgs/myblog/pl05.png" alt="正确的密钥"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>通过 Twikoo + MongoDB Atlas + Vercel 的组合，可以轻松实现一个高性能、免费且易于维护的静态博客评论系统。希望这篇博客能帮助到正在搭建博客的小伙伴，也欢迎大家在评论区分享自己的经验和心得！</p>
]]></content>
      <categories>
        <category>博客成长</category>
      </categories>
      <tags>
        <tag>博客完善</tag>
      </tags>
  </entry>
  <entry>
    <title>博客篇-Hugo学习</title>
    <url>/2025/03/23/27-hugo/</url>
    <content><![CDATA[<h1 id="认识hugo"><a href="#认识hugo" class="headerlink" title="认识hugo"></a>认识hugo</h1><h2 id="认识hugo-1"><a href="#认识hugo-1" class="headerlink" title="认识hugo"></a>认识hugo</h2><p>hugo是静态网站生成器，基于Go语言，将markdown或html内容通过末班生成静态hteml文件，无需数据库或后端服务。<br><strong>快速生成静态内容、灵活的主题系统、高性能部署。</strong><br>工作流程：<br>内容（Markdown&#x2F;HTML） + 模板（Theme） + 配置文件 → Hugo 编译 → 静态文件（HTML&#x2F;CSS&#x2F;JS）</p>
<h2 id="hugo的部署"><a href="#hugo的部署" class="headerlink" title="hugo的部署"></a>hugo的部署</h2><p>参考视频<a href="https://www.bilibili.com/video/BV1fNNreEEDi/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750">B站左-岚的视频</a><br>文章<a href="https://blog.eimoon.com/p/learn-hugo-blog-building-from-beginner-to-advanced/">月球基地的博客搭建教程</a></p>
<ol>
<li>下载和安装<br><a href="https://github.com/gohugoio/hugo/releases">hugo二进制文件下载地址</a><br>我下载的是<code>hugo_extended_0.145.0_windows-amd64.zip</code>,要下载extended（扩展版）的<br>下载解压得到<code>hugo.exe</code>文件，把它加载到系统的环境变量里<br><img src="/postImgs/myblog/hugo01.png" alt="在环境变量加载hugo"><br><mark>我这里出了问题，注意配置到环境变量的路径：是到文件所在的文件夹而不是文件本身！这里我的<code>hugo.exe</code>文件在<code>D:\Pragram\hugo\hugo.exe</code>，环境变量要写<code>D:\Pragram\hugo</code>而不是<code>D:\Pragram\hugo\hugo.exe</code></mark></li>
</ol>
<p>能在终端检测到版本说明配置成功了<br><img src="/postImgs/myblog/hugo02.png" alt="hugo环境变量配置检测"></p>
<ol>
<li><p>创建项目和目录结构<br>找一个空文件夹用hugo创建<code>hugo new site 文件名</code><br><img src="/postImgs/myblog/hugo03.png" alt="用hugo创建文件"><br>核心目录结构</p>
<blockquote>
<p>niehugoblog&#x2F;<br>|–archetypes&#x2F;  #内容原型（模板），用户新建内容时自动填充默认Front Matter<br>|–content&#x2F;    # 存放所有内容（文章、页面），（markdown格式）<br>|–layouts&#x2F;    # 存放自定义模板文件（HTML + Hugo 模板语法）（如果不适用主题，可以在这里自定义布局）<br>|–static&#x2F;     # 存放静态资源（图片、CSS、JS）（原样复制到生成目录）<br>|–themes&#x2F;     # 主题目录，放外部下载的主题（主题内也包含layouts\static等目录）<br>|–assets&#x2F;     # 可选，存放需要编译的资源（如 Sass）<br>|–config.toml # 全局配置文件（也支持YAML、JSON格式）</p>
</blockquote>
</li>
<li><p>修改默认markdowen配置<br><code>archetypes</code>文件夹中的<code>default.md</code>默认markdown是toml格式的，把它改成yaml格式（+号变-号，&#x3D;号变:号），toml文件后面会删掉</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">date :</span> <span class="string">&#x27;<span class="template-variable">&#123;&#123; .Date &#125;&#125;</span>&#x27;</span></span><br><span class="line"><span class="attr">draft :</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">title :</span> <span class="string">&#x27;<span class="template-variable">&#123;&#123; replace .File.ContentBaseName &quot;-&quot; &quot; &quot; | title &#125;&#125;</span>&#x27;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>下载并配置主题<br><a href="https://themes.gohugo.io/">下载hugo主题网址</a>，上面好多种主题，我这里先选了和教程一样的主题往下配置<br>点击下载，跳转到github页面，在右侧的releases中点版本号，再在跳转后的页面最下面点zip下载<br><img src="/postImgs/myblog/hugo04.png" alt="下载主题"></p>
</li>
</ol>
<ul>
<li>把下载好的文件放到目前空空的<code>themes/</code>文件夹下面，文件名后面的版本号我删掉了</li>
<li>把主题文件夹中的<code>layouts</code>文件夹复制到<code>niehugoblog</code>文件夹下，变成与<code>themes</code>文件夹同级（覆盖掉默认的几乎没有的界面）</li>
<li>把主题文件夹中的<code>exampleSite</code>文件夹里的<code>content</code>和<code>hugo.yaml</code>复制到根文件夹目录（同上）</li>
<li>删掉根目录的<code>hugo.toml</code>文件</li>
<li>把<code>content-post</code>文件夹中的非<code>chinese-test</code>文件全部删除（因为里面的一些依赖没有）</li>
<li>执行命令<code>git init</code></li>
<li><code>hugo</code> </li>
<li><code>hugo server</code>（生成的速度真的好快的）<br><img src="/postImgs/myblog/hugo05.png" alt="预览博客"></li>
<li><code>hugo.ymal</code>配置默认中文<code>DefaultContentLanguage: zh-cn</code></li>
</ul>
<ol>
<li>创建文章<br><code>hugo new post/text/index.md</code><ul>
<li>里面的<code>draft</code>草稿，设置为true则不会显示在预览中</li>
<li>默认生成的里面也可以加封面、分类、标签、描述等等<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">date : &#x27;2025-03-24T21:35:40+08:00&#x27;</span><br><span class="line">draft : false</span><br><span class="line"><span class="section">title : &#x27;hugo第一篇文章&#x27;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h2 id="推送到github"><a href="#推送到github" class="headerlink" title="推送到github"></a>推送到github</h2><p>这次使用两个仓库部署，一个私有仓库放所有的源码，另一个公开展示生成的hugo博客<br>（这样做的好，我的hexo博客后续也要改成这样）</p>
<h1 id="hugo和hexo"><a href="#hugo和hexo" class="headerlink" title="hugo和hexo"></a>hugo和hexo</h1><h2 id="关于hexo"><a href="#关于hexo" class="headerlink" title="关于hexo"></a>关于hexo</h2><p>这篇博客使用hexo+butterfly主题+github搭建，技术栈如下：</p>
<ol>
<li>hexo<br>是基于node.js开发的静态网站生成器，核心功能是将markdown内容、主题模板、配置文件编译成静态的Html、css、js文件，供浏览器直接访问。</li>
<li>butterfly主题：<br>通过模板文件和样式文件，将 Hexo 生成的静态内容结构化为美观的网页。</li>
<li>GitHub + GitHub Pages（托管与部署）：<br>GitHub 是代码托管平台，而 GitHub Pages 是其提供的静态网站托管服务；通过插件（如 hexo-deployer-git）将生成的静态文件推送到 GitHub 仓库，最终通过 GitHub Pages 发布；<br>GitHub Pages	免费托管、全球 CDN 加速、与 Git 版本控制无缝集成。</li>
<li>工作流程：<br>Markdown 文章 → Hexo 编译 → 生成静态文件 → GitHub Pages 托管 → 用户访问<hr></li>
</ol>
<p>Hexo 通过主题配置文件（_config.yml）加载 Butterfly 主题，将 Markdown 内容填充到主题模板中，最终生成静态 HTML 文件。<br>Hexo 读取 Markdown 文件，解析其内容和元数据，结合主题模板生成最终的 HTML 页面。<br>通过将 Hexo 生成的静态文件推送到 GitHub 仓库，可以快速发布博客。<br>Hexo 的 deploy 命令依赖 GitHub 的 API 和 Git 协议，将本地生成的文件同步到 GitHub 仓库，最终通过 GitHub Pages 全球 CDN 加速访问。</p>
<h2 id="对比hugo和hexo"><a href="#对比hugo和hexo" class="headerlink" title="对比hugo和hexo"></a>对比hugo和hexo</h2><p>本质都是把markdown文件通过预定好的特质转化成Html文件<br>（图片）<br>hugo保存后会自动热重载</p>
<h1 id="相关知识（可能出现的面试题）"><a href="#相关知识（可能出现的面试题）" class="headerlink" title="相关知识（可能出现的面试题）"></a>相关知识（可能出现的面试题）</h1><p>以下题目和回答都来源于deepseek和通义<br>（有些回答很难理解，有个印象就好，如果真的遇到还是要多查资料问AI）</p>
<h2 id="hugo和浏览器的兼容性问题"><a href="#hugo和浏览器的兼容性问题" class="headerlink" title="hugo和浏览器的兼容性问题"></a>hugo和浏览器的兼容性问题</h2><p>由于 Hugo 生成的是静态 HTML&#x2F;CSS&#x2F;JS 资源，兼容性问题主要集中在<strong>前端代码规范 <strong>和</strong>现代浏览器特性适配</strong>两个方面</p>
<h3 id="Hugo-项目如何实现自动化兼容性测试？"><a href="#Hugo-项目如何实现自动化兼容性测试？" class="headerlink" title="Hugo 项目如何实现自动化兼容性测试？"></a>Hugo 项目如何实现自动化兼容性测试？</h3><ol>
<li>CI&#x2F;CD 集成：在 GitHub Actions 中添加多浏览器测试阶段<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">compatibility-test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">strategy:</span></span><br><span class="line">      <span class="attr">matrix:</span></span><br><span class="line">        <span class="attr">browser:</span> [<span class="string">chrome-latest</span>, <span class="string">firefox-latest</span>, <span class="string">safari-14</span>]</span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">browserstack/github-actions@master</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">os:</span> <span class="string">Windows</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">browser:</span> <span class="string">$&#123;&#123;</span> <span class="string">matrix.browser</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>Hugo 构建优化：<br>生成带哈希的资源文件名（避免缓存问题）<br>通过 hugo –templateMetrics 分析模板渲染性能</li>
</ol>
<h3 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h3><p>Q1：Hugo生成的网页如何确保在不同浏览器上的兼容性？<br>A1：</p>
<ul>
<li>Hugo本身并不直接处理浏览器兼容性问题，但可以通过选择合适的主题、使用现代化的前端技术栈等方式来确保兼容性。</li>
<li>选择支持广泛浏览器、经过良好测试的Hugo主题。</li>
<li>在主题开发或使用过程中，注意使用CSS前缀、特性检测等技术来处理兼容性问题。</li>
<li>对生成的网页进行兼容性测试，确保在不同浏览器上正常显示和运行</li>
</ul>
<h3 id="HTML-兼容性问题"><a href="#HTML-兼容性问题" class="headerlink" title="HTML 兼容性问题"></a>HTML 兼容性问题</h3><p>Q1：Hugo 生成的 HTML5 标签在旧版 IE 中如何兼容？<br>A：Hugo 默认使用 HTML5 语义化标签（如 <code>&lt;article&gt;、&lt;section&gt;</code>），需通过以下方案兼容IE9以下：<br>引入 html5shiv.js：在模板头部添加条件注释:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if lt IE 9]&gt;</span></span><br><span class="line"><span class="comment">  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure>
<p>Hugo 配置优化：在 layouts&#x2F;_default&#x2F;baseof.html 中统一管理兼容脚本加载顺序。</p>
<h3 id="CSS-兼容性问题"><a href="#CSS-兼容性问题" class="headerlink" title="CSS 兼容性问题"></a>CSS 兼容性问题</h3><p>Q2：如何处理 Hugo 主题中 CSS3 特性（如 Flexbox）的IE兼容？<br>A2:自动前缀：通过 Hugo Pipes 集成 PostCSS + Autoprefixer:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; $styles := resources.Get &quot;css/main.scss&quot; | toCSS | postCSS | minify &#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123; $styles.Permalink &#125;&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>级方案：针对 IE10 以下使用 display: inline-block 替代 Flexbox，并通过条件注释加载专属 CSS</p>
<p>Q3：Hugo 生成的浮动布局在 IE6 下出现双倍 margin 如何解决？<br>A3: 代码修正：为浮动元素添加 display: inline 属性</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.float-item</span> &#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">display</span>: inline; <span class="comment">/* 解决 IE6 双倍 margin */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>构建优化：通过 Hugo 的 –minify 参数压缩 CSS，合并重复规则</p>
<h3 id="javaScript-兼容性问题"><a href="#javaScript-兼容性问题" class="headerlink" title="javaScript 兼容性问题"></a>javaScript 兼容性问题</h3><p>Q4：Hugo 集成的动态功能（如搜索）如何在 IE 中兼容事件绑定?<br>A4: 统一事件监听：封装兼容性函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">addEvent</span>(<span class="params">element, event, handler</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (element.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">    element.<span class="title function_">addEventListener</span>(event, handler);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (element.<span class="property">attachEvent</span>) &#123; <span class="comment">// IE8-</span></span><br><span class="line">    element.<span class="title function_">attachEvent</span>(<span class="string">&#x27;on&#x27;</span> + event, handler);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Polyfill 注入：在 Hugo 模板中按需加载 core-js：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;&#123; if .Site.Params.ieSupport &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/core-js/3.0.0/core.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&#123;&#123; end &#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="技术类问题"><a href="#技术类问题" class="headerlink" title="技术类问题"></a>技术类问题</h2><p>Q1:如何在 Hugo 中实现动态交互（如表单提交、实时数据）？<br>答：<br>使用纯前端技术（如 JavaScript + Fetch API）与第三方服务（如 Netlify Forms）集成表单。<br>通过 API 接口（如 JSON 文件）获取动态数据，使用 JavaScript 渲染。<br>结合前端框架（如 Vue.js）实现复杂交互，但需注意与 Hugo 的静态生成兼容性。<br>如何设计响应式布局？<br>答：<br>使用 CSS 媒体查询（Media Queries）。<br>选择响应式主题或框架（如 Tailwind CSS）。<br>在 Hugo 模板中通过条件判断适配不同设备。<br>Q2:负责网站文档编辑，基于 Markdown 语法<br>面试重点问题<br>Hugo 如何支持 Markdown 扩展语法？<br>答：<br>Hugo 默认支持标准 Markdown，可通过配置启用扩展（如 goldmark 引擎）。<br>使用 Hugo 的 Shortcodes（短代码）实现复杂功能（如模态框、表格）：<br><code>&#123;&#123;< alert >&#125;&#125;这是一个警告框&#123;&#123;< /alert >&#125;&#125;</code><br>Q3: 如何管理大型文档的版本？<br>答：<br>使用 Git 版本控制，将 Hugo 项目托管在 GitHub&#x2F;GitLab。<br>通过 Front Matter 的 date 和 draft 标记管理内容状态。</p>
<p>Q4：Hugo 的渲染速度为什么比其他 SSG 快？<br>A：Hugo 用 Go 语言编写，编译时完全静态化，无需运行时解释，且内置了高效的模板引擎和缓存机制。<br>Q5：如何处理 Hugo 中的 404 页面？<br>A：在 layouts&#x2F;404.html 文件中定义自定义 404 页面，通过 Hugo 的 notFound 变量获取错误信息。<br>Q6：如何实现 Hugo 站点的 SEO 优化？<br>A：<br>在模板中添加 <code>&lt;meta&gt;</code>标签（如 description、keywords）。<br>生成 XML Sitemap 并提交到 Google Search Console。<br>使用 Hugo 的 params 配置 SEO 相关参数。</p>
<h2 id="实战类问题"><a href="#实战类问题" class="headerlink" title="实战类问题"></a>实战类问题</h2><p>Q：如果发现 Hugo 站点在 IE11 下显示异常，如何解决？<br>A：<br>使用 Babel 转译 ES6+ 代码。<br>添加 Polyfill（如 core-js）支持旧版 JavaScript 方法。<br>通过 CSS 前缀工具（如 Autoprefixer）处理 CSS 兼容性。<br>Q：如何在 Hugo 中实现多作者博客？<br>A：<br>在 config.toml 中定义作者信息：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line">[<span class="string">author.&quot;john&quot;</span>]</span><br><span class="line"><span class="attr">name :</span> <span class="string">&quot;John Doe&quot;</span></span><br><span class="line"><span class="attr">bio :</span> <span class="string">&quot;...&quot;</span></span><br><span class="line"><span class="string">在文章</span> <span class="string">Front</span> <span class="string">Matter</span> <span class="string">中指定作者：</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">&quot;john&quot;</span></span><br></pre></td></tr></table></figure>
<p>在模板中遍历作者信息并渲染。</p>
<h2 id="设计类问题"><a href="#设计类问题" class="headerlink" title="设计类问题"></a>设计类问题</h2><p>Q：如何设计一个可复用的 Hugo 组件？<br>A：<br>使用 Hugo 的 Shortcodes 创建可复用组件（如卡片、按钮）。<br>在 layouts&#x2F;shortcodes&#x2F; 目录中编写组件模板，并通过参数传递动态内容。<br>Q：如何提升 Hugo 站点的用户体验？<br>A：<br>优化加载速度（压缩资源、使用 CDN）。<br>添加页面加载动画或骨架屏。<br>通过 JavaScript 实现平滑滚动或交互反馈。</p>
<h2 id="原理与架构"><a href="#原理与架构" class="headerlink" title="原理与架构"></a>原理与架构</h2><p>Q1：Hugo 如何处理内容与模板的绑定？**<br>  答：通过 Front Matter 中的 <code>type: post</code> 指定内容类型，Hugo 自动匹配 <code>layouts/post/single.html</code> 模板渲染。数据传递通过 <code>.Site.Pages</code> 和 <code>.Params</code> 实现。<br>Q2：解释 Hugo 的渲染流程**<br>  答：<code>hugo server</code> 启动时监听文件变化 → 解析 <code>config.toml</code> → 读取 <code>content/</code> 内容 → 应用 <code>layouts/</code> 模板 → 生成静态文件到 <code>public/</code> → 热更新浏览器。</p>
<h2 id="实战经验"><a href="#实战经验" class="headerlink" title="实战经验"></a>实战经验</h2><p>Q3：如何实现多语言支持？**<br>  答：配置 <code>languages.yaml</code> 定义语言参数，内容文件按 <code>content/en/</code>、<code>content/zh/</code> 分目录，模板中使用 <code>&#123;&#123; i18n "home" &#125;&#125;</code> 调用翻译。<br>Q4：遇到过 Hugo 构建性能问题吗？如何优化？**<br>  答：案例：万级页面构建慢。解决方案：启用 <code>--ignoreCache</code> 清除缓存，使用 <code>hugo --templateMetrics</code> 分析模板耗时，将复杂逻辑移至 <code>data/</code> 预处理。</p>
<h2 id="扩展与集成"><a href="#扩展与集成" class="headerlink" title="扩展与集成"></a>扩展与集成</h2><p>Q5：如何集成第三方服务（如评论系统）？**<br>  答：以 Valine 为例：在主题的 <code>layouts/partials/comments.html</code> 中添加 JS SDK，通过 <code>.Site.Params.valine.appId</code> 动态配置密钥。<br>Q6：如何实现自动化部署到 GitHub Pages？**<br>  答：通过 <code>hexo-deployer-git</code> 插件或 GitHub Actions，推送 <code>public/</code> 到 <code>gh-pages</code> 分支，绑定自定义域名。</p>
]]></content>
      <categories>
        <category>博客成长</category>
      </categories>
      <tags>
        <tag>博客完善</tag>
      </tags>
  </entry>
  <entry>
    <title>项目篇-Vue3+TS实现后台管理系统</title>
    <url>/2025/04/15/23-nievuets/</url>
    <content><![CDATA[<h1 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h1><h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ul>
<li>Vue3 + TypeScript</li>
<li>Vite 构建工具</li>
<li>Element Plus UI框架</li>
<li>Pinia 状态管理</li>
<li>Vue Router 路由管理</li>
<li>Axios 网络请求</li>
</ul>
<h2 id="运行展示"><a href="#运行展示" class="headerlink" title="运行展示"></a>运行展示</h2><p><img src="/postImgs/nievtcms/zs.png" alt="登录组件"><br><img src="/postImgs/nievtcms/zs0.png" alt="登录组件"><br><img src="/postImgs/nievtcms/zs1.png" alt="登录组件"><br><img src="/postImgs/nievtcms/zs2.png" alt="登录组件"><br><img src="/postImgs/nievtcms/zs3.png" alt="登录组件"></p>
<h2 id="项目梳理"><a href="#项目梳理" class="headerlink" title="项目梳理"></a>项目梳理</h2><p><a href="https://nie7-melon.github.io/2025/06/04/23-myselfUp/">项目梳理请见文章</a></p>
<h1 id="搭建和基础配置"><a href="#搭建和基础配置" class="headerlink" title="搭建和基础配置"></a>搭建和基础配置</h1><h2 id="项目搭建"><a href="#项目搭建" class="headerlink" title="项目搭建"></a>项目搭建</h2><p>使用vue3+pnpm搭建项目<br><img src="/postImgs/nievtcms/create1.png" alt="创建项目"><br>令人愉悦的绿色画面<br><img src="/postImgs/nievtcms/create2.png" alt="创建项目"></p>
<h2 id="原始目录"><a href="#原始目录" class="headerlink" title="原始目录"></a>原始目录</h2><p>.vscode\extensions.json：推荐安装的插件<br>package.json\安装的依赖和一些命令</p>
<h3 id="别名配置"><a href="#别名配置" class="headerlink" title="@别名配置"></a><code>@</code>别名配置</h3><p><strong>两个文件夹里的别名配置@作用不一样</strong><br>vite.config.ts：导出配置；别名配置（@指向src）打包的时候用<br>tsconig.json：自己添加放在带<code>app</code>的文件里，最终都会合并到tsconfig.json里<br>ts配置；别名配置（@指向src）供vscode读取写代码时候有提示</p>
<h3 id="让App被识别成组件-可选"><a href="#让App被识别成组件-可选" class="headerlink" title="让App被识别成组件(可选)"></a>让App被识别成组件(可选)</h3><p>main.ts中<code>import App from &#39;./App.vue&#39;</code><br>现在这里的App没有被识别成组件，在env.d.ts中加入代码</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;*.vue&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> &#123; <span class="title class_">DefineComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">component</span>: <span class="title class_">DefineComponent</span></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> component</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="目录调整"><a href="#目录调整" class="headerlink" title="目录调整"></a>目录调整</h3><p>把没用的删了建立新的文件夹</p>
<h2 id="代码规范配置"><a href="#代码规范配置" class="headerlink" title="代码规范配置"></a>代码规范配置</h2><h3 id="集成editorconfig配置"><a href="#集成editorconfig配置" class="headerlink" title="集成editorconfig配置"></a>集成editorconfig配置</h3><p><code>.editorconfig</code>文件配置：<br>用于解决不同IDE编译器开发同一项目时，维护一致的编码风格（避免乱码）<br>很多开源项目都有这个东西，下面的代码以后其他项目也能用<br>在我搭建项目时，这个文件自动给我配置了一些规则，原来的不全，我注释掉了<br>VSCode要安装一个插件：EditorConfig for VS Code（小老鼠头）</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># http://editorconfig.org</span></span><br><span class="line"></span><br><span class="line"><span class="string">root</span> <span class="string">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*</span>] <span class="comment"># 表示所有文件适用</span></span><br><span class="line"><span class="string">charset</span> <span class="string">=</span> <span class="string">utf-8</span> <span class="comment"># 设置文件字符集为 utf-8</span></span><br><span class="line"><span class="string">indent_style</span> <span class="string">=</span> <span class="string">space</span> <span class="comment"># 缩进风格（tab | space）</span></span><br><span class="line"><span class="string">indent_size</span> <span class="string">=</span> <span class="number">2</span> <span class="comment"># 缩进大小</span></span><br><span class="line"><span class="string">end_of_line</span> <span class="string">=</span> <span class="string">lf</span> <span class="comment"># 控制换行类型(lf | cr | crlf)</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># 去除行尾的任意空白字符</span></span><br><span class="line"><span class="string">insert_final_newline</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># 始终在文件末尾插入一个新行</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*.md</span>] <span class="comment"># 表示仅 md 文件适用以下规则</span></span><br><span class="line"><span class="string">max_line_length</span> <span class="string">=</span> <span class="string">off</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span></span><br></pre></td></tr></table></figure>
<h3 id="prettier工具"><a href="#prettier工具" class="headerlink" title="prettier工具"></a>prettier工具</h3><p>Prettier 是一款强大的代码格式化工具，基本上前端能用到的文件格式它都可以搞定，是当下最流行的代码格式化工具</p>
<ol>
<li>安装prettier</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm install prettier -D</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置.prettierrc文件：<br>在创建项目时我选择了这个，原来的不全，在文件夹里修改代码即可</li>
</ol>
<ul>
<li>useTabs：使用tab缩进还是空格缩进，选择false；</li>
<li>tabWidth：tab是空格的情况下，是几个空格，选择2个；</li>
<li>printWidth：当行字符的长度，推荐80，也有人喜欢100或者120；</li>
<li>singleQuote：使用单引号还是双引号，选择true，使用单引号；</li>
<li>trailingComma：在多行输入的尾逗号是否添加，设置为 <code>none</code>，比如对象类型的最后一个属性后面是否加一个，；</li>
<li>semi：语句末尾是否要加分号，默认值true，选择false表示不加；</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span><span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;semi&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>创建.prettierignore忽略文件<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/dist/*</span><br><span class="line">.local</span><br><span class="line">.output.js</span><br><span class="line">/node_modules/**</span><br><span class="line"></span><br><span class="line">**/*.svg</span><br><span class="line">**/*.sh</span><br><span class="line"></span><br><span class="line">/public/*</span><br></pre></td></tr></table></figure></li>
<li>VSCode要安装prettier的插件，让ctrl+s即可生效</li>
<li>VSCode中修改配置</li>
</ol>
<ul>
<li>settings &#x3D;&gt;format on save &#x3D;&gt; 勾选上</li>
<li>settings &#x3D;&gt; editor default format &#x3D;&gt; 选择 prettier</li>
</ul>
<ol start="6">
<li>测试prettier是否生效</li>
</ol>
<ul>
<li>测试一：在代码中保存代码；</li>
<li>测试二：配置一次性修改的命令(如果没生效再做)<br>在package.json中配置一个scripts：<br>(我的文件中已经有<code>&quot;format&quot;: &quot;prettier --write src/&quot;</code>)<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;prettier&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prettier --write .&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="使用ESLint检测-我之前做过，这里没有按照配置说明配置"><a href="#使用ESLint检测-我之前做过，这里没有按照配置说明配置" class="headerlink" title="使用ESLint检测(我之前做过，这里没有按照配置说明配置)"></a>使用ESLint检测(我之前做过，这里没有按照配置说明配置)</h3><p>VSCode需要安装ESLint插件：<br>解决eslint和prettier冲突的问题：</p>
<ol>
<li>安装插件：<br>（vue在创建项目时，如果选择prettier，那么这两个插件会自动安装）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pnpm install eslint-plugin-prettier eslint-config-prettier -D</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>添加prettier插件：<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">extends<span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;plugin:vue/vue3-essential&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;eslint:recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;@vue/typescript/recommended&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;@vue/prettier&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;@vue/prettier/@typescript-eslint&quot;</span><span class="punctuation">,</span></span><br><span class="line">  &#x27;plugin<span class="punctuation">:</span>prettier/recommended&#x27;</span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure></li>
<li>VSCode中eslint的配置</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;eslint.lintTask.enable&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.alwaysShowStatus&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;eslint.validate&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="string">&quot;javascript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;javascriptreact&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;typescript&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="string">&quot;typescriptreact&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;editor.codeActionsOnSave&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;source.fixAll.eslint&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<h2 id="css样式重置"><a href="#css样式重置" class="headerlink" title="css样式重置"></a>css样式重置</h2><p>assets文件夹下建css文件夹，放一些样式重置规则reset.less<br>（我复制的以前写过的规则）<br><code>pnpm install normalize.css</code><br><code>npm install less -D</code></p>
<h2 id="路由配置"><a href="#路由配置" class="headerlink" title="路由配置"></a>路由配置</h2><h3 id="创建路由实例"><a href="#创建路由实例" class="headerlink" title="创建路由实例"></a>创建路由实例</h3><p>先<code>pnpm add vue-router@4</code><br>router&#x2F;index.ts文件创建路由实例</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>路由：管理单页应用（SPA）中不同URL路径与组件的映射关系</li>
<li>路由实例：通过createRouter创建，是Vue Router的核心对象，管理路由的配置和跳转</li>
<li>使用哈希模式通过URL的#符号来管理路由路径</li>
<li>哈希模式无需服务器配置，更适合开发环境或部署在静态服务器上</li>
<li><strong>别忘记最后将创建的路由实例导出并在main.ts中引入并挂载到Vue实例上</strong></li>
</ul>
<h3 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h3><p>路由最重要的映射关系path&#x3D;&gt;component,现在还没组件<br>在views（视图）文件夹下创建对应的组件</p>
<h4 id="解决组件单个单词命名警告问题"><a href="#解决组件单个单词命名警告问题" class="headerlink" title="解决组件单个单词命名警告问题"></a>解决组件单个单词命名警告问题</h4><p>默认的配置里面不让使用单个单词命名（login.vue），给我报了警告<br><img src="/postImgs/nievtcms/create3.png" alt="警告"><br>z这个里是eslint的配置，在tsconfig.json中添加</p>
<ol>
<li>只在某个文件中不适用该规则<br>在script部分顶部添加注解关闭规则<br>  <code>eslint-disable-next-line vue/multi-word-component-names</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">eslint-disable-next-line vue/multi-word-component-names</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&#x27;Button&#x27;</span> <span class="comment">// 单个单词命名</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>全局禁用该规则（我用的这个）<br>在eslint.config.js中最后添加：<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;vue/multi-word-component-names&#x27;</span>: <span class="string">&#x27;off&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="生成代码片段（借用网站）"><a href="#生成代码片段（借用网站）" class="headerlink" title="生成代码片段（借用网站）"></a>生成代码片段（借用网站）</h4><p>由于这些路由组件的代码类型高度重合，使用代码片段更方便开发，用这个网站生成代码片段：<code>https://snippet-generator.app</code></p>
<blockquote>
<p>Snippet Generator 是一个在线代码片段生成器，主要用于快速生成适用于 VS Code（或其他编辑器）的代码片段配置文件。它通过图形化界面简化了代码片段的创建过程，避免手动编写复杂的 JSON 配置。<br>可视化界面：无需手动编写 JSON，直接输入代码和触发前缀即可生成代码片段。<br>占位符自动处理：支持通过 $1、$2 等占位符定义光标跳转位置，提升代码填充效率</p>
</blockquote>
<p>我想我的每个组件都是这样的类似代码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">    &lt;h2&gt;login&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login &#123;</span><br><span class="line">  color: orange;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>我用这个网站这样做，把右边的copy<br><img src="/postImgs/nievtcms/create4.png" alt="生成代码片段"><br>在vscode中配置<br><img src="/postImgs/nievtcms/create5.png" alt="vscode配置代码片段"><br><strong>点进去，跟着编译器指示，我选择的新建当前项目文件文件夹的代码片段文件</strong><br>新建一个文件名（我vue3ts），回车，出现一个空的<code>&#123;&#125;</code>和一堆注解，把注解换成网站上复制的代码，保存<br><img src="/postImgs/nievtcms/create5.png" alt="vscode配置代码片段"><br>试一下，新建.vue文件，输入tsvue回车,成功啦<br>创建login、main组件（<code>Login.vue</code>、<code>Main.vue</code>）</p>
<h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><p>回到router&#x2F;index.ts文件，配置路由</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/main&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;main&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/main/Main.vue&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/login/Login.vue&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>
<h3 id="测试路由"><a href="#测试路由" class="headerlink" title="测试路由"></a>测试路由</h3><p>回到&#96;App.vue&#96;&#96;，在template中添加一个router-view标签，用来显示路由组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;Hello小聂同学&lt;/div&gt;</span><br><span class="line">  &lt;router-link to=&quot;/main&quot;&gt;去main页面&lt;/router-link&gt;</span><br><span class="line">  &lt;hr /&gt;</span><br><span class="line">  &lt;router-link to=&quot;/login&quot;&gt;去login页面&lt;/router-link&gt;</span><br><span class="line">  &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>运行，成功啦<br><img src="/postImgs/nievtcms/create7.png" alt="路由测试成功"></p>
<h3 id="完善–notfound页面"><a href="#完善–notfound页面" class="headerlink" title="完善–notfound页面"></a>完善–notfound页面</h3><p>如果用户输入一个不存在的路由，显示一个404页面<br>创建文件<code>view/not-found/NotFound.vue</code><br>配置路由<br><code>path: &#39;/:pathMatch(.*)&#39;</code>匹配所有未被其他路由规则捕获的路径<br><code>:pathMatch</code>：这是一个动态路由参数的名称（自定义的）<br><code>(.*)</code>：正则表达式，表示匹配任意字符（包括空字符串），捕获所有路径</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;notFound&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/not-found/NotFound.vue&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功<img src="/postImgs/nievtcms/create8.png" alt="notfound页面"></p>
<h2 id="状态管理pinia"><a href="#状态管理pinia" class="headerlink" title="状态管理pinia"></a>状态管理pinia</h2><p>首先<code>pnpm install pinia</code><br>在main.ts中引入pinia并挂载到Vue实例上</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pinia <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br></pre></td></tr></table></figure>
<h3 id="写个例子测试"><a href="#写个例子测试" class="headerlink" title="写个例子测试"></a>写个例子测试</h3><p>store&#x2F;index.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> pinia</span><br></pre></td></tr></table></figure>
<p>数据放在仓库里，创建一个<code>counter.ts</code>文件测试</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;counter&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">counter</span>: <span class="number">100</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">doubleCounter</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">counter</span> * <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">changeCounterAction</span>(<span class="params"><span class="attr">newCounter</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">counter</span> = newCounter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useCounterStore</span><br></pre></td></tr></table></figure>
<p>在<code>Main.vue</code>中引入pinia，并使用store</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">    &lt;h2&gt;main: &#123;&#123; counterStore.counter &#125;&#125;-&#123;&#123; counterStore.doubleCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCounter&quot;&gt;修改counter&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import useCounterStore from &#x27;@/store/counter&#x27;</span><br><span class="line"></span><br><span class="line">const counterStore = useCounterStore()</span><br><span class="line"></span><br><span class="line">function changeCounter() &#123;</span><br><span class="line">  counterStore.changeCounterAction(999)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>跑一跑，成功<img src="/postImgs/nievtcms/create9.png" alt="pinia应用"></p>
<h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>pnpm install axios<br>创建service文件夹，这里用的老师封装好的代码文件，cv进来直接使用的</p>
<h3 id="测试网络请求"><a href="#测试网络请求" class="headerlink" title="测试网络请求"></a>测试网络请求</h3><p>在login.vue中测试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import hyRequest from &#x27;@/service&#x27;</span><br><span class="line"></span><br><span class="line">hyRequest</span><br><span class="line">  .get(&#123;</span><br><span class="line">    url: &#x27;/category/1&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then((res) =&gt; &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">.login &#123;</span><br><span class="line">  color: orange;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="开发模式和生产模式"><a href="#开发模式和生产模式" class="headerlink" title="开发模式和生产模式"></a>开发模式和生产模式</h2><p>service&#x2F;config&#x2F;index.ts</p>
<ol>
<li>手动区分开发环境和牛产环境<br>用哪个留哪个，不用的注释掉<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> =<span class="string">&#x27;http://coderwhy.dev:8008&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">BASE_URL</span> =<span class="string">&#x27;http://codercba.prod:806&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>代码逻辑判断当前环境<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//下面三行返回布尔值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">DEV</span>)<span class="comment">//是否是开发环境</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">PROD</span>)<span class="comment">//是否生产环境</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">SSR</span>)<span class="comment">//是否是服务器端渲染</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">BASE</span> <span class="variable constant_">URL</span> =<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">PRoD</span>)&#123;</span><br><span class="line">  <span class="variable constant_">BASE</span> <span class="variable constant_">URL</span> =<span class="string">&#x27;http://codercba.prod:8000&#x27;</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="variable constant_">BASE</span> <span class="variable constant_">URL</span> = <span class="string">&#x27;http://coderwhy.dev:8000&#x27;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
代码笔记：<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.区分开发环境和生产环境</span></span><br><span class="line"><span class="comment">// export const BASE_URL = &#x27;http://coderwhy.dev:8000&#x27;</span></span><br><span class="line"><span class="comment">// export const BASE_URL = &#x27;http://codercba.prod:8000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.代码逻辑判断, 判断当前环境</span></span><br><span class="line"><span class="comment">// vite默认提供的环境变量</span></span><br><span class="line"><span class="comment">// console.log(import.meta.env.MODE)</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">DEV</span>) <span class="comment">// 是否开发环境</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">PROD</span>) <span class="comment">// 是否生产环境</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">SSR</span>) <span class="comment">// 是否是服务器端渲染(server side render)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable constant_">BASE_URL</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">PROD</span>) &#123;</span><br><span class="line">  <span class="comment">//BASE_URL = &#x27;http://localhost:8880&#x27;</span></span><br><span class="line">  <span class="variable constant_">BASE_URL</span> = <span class="string">&#x27;http://123.207.32.32:5000&#x27;</span></span><br><span class="line">  <span class="comment">//  BASE_URL = &#x27;http://codercba.prod:8000&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// BASE_URL = &#x27;http://localhost:8880&#x27;</span></span><br><span class="line">  <span class="variable constant_">BASE_URL</span> = <span class="string">&#x27;http://123.207.32.32:5000&#x27;</span></span><br><span class="line">  <span class="comment">//  BASE_URL = &#x27;http://coderwhy.dev:8000&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">BASE_URL</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.通过创建.env文件直接创建变量</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_URL</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">TIME_OUT</span> = <span class="number">10000</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="variable constant_">BASE_URL</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Element-Plus集成"><a href="#Element-Plus集成" class="headerlink" title="Element-Plus集成"></a>Element-Plus集成</h2><p>使用时一句话：用组件，调属性，不合适的再覆盖</p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>看官方文档，我使用按需导入-自动导入的方法<br><code>pnpm add -D unplugin-vue-components unplugin-auto-import</code><br>然后根据官方文档配置vite.config.ts文件<br><code>pnpm add element-plus</code><br>文件夹会多出两个文件：<code>auto-imports.d.ts和components.d.ts</code>，用来帮我们声明<br>用什么组件直接把<code>&lt;template&gt;&lt;/template&gt;</code>部分中的代码CV进来，ts部分会自动导入，不用CV<br>试试看，成功引用<img src="/postImgs/nievtcms/create10.png" alt="Element-Plus集成"></p>
<h3 id="在tsconfig-js文件中添加配置"><a href="#在tsconfig-js文件中添加配置" class="headerlink" title="在tsconfig,js文件中添加配置"></a>在tsconfig,js文件中添加配置</h3><p>我的项目中<code>tsconfig.app.json</code>文件夹中本来是<br><code>  &quot;include&quot;: [&quot;env.d.ts&quot;, &quot;src/**/*&quot;, &quot;src/**/*.vue&quot;],</code><br>把前面按需导入-自动导入配置生成的两个文件也放进去<br>变成</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;env.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">,</span> <span class="string">&quot;auto-imports.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;components.d.ts&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><mark>为什么要这样做呢：</mark></p>
<ol>
<li><p>类型声明生效的必要条件<br>TypeScript编译器只会处理被include包含的文件（以及被files指定的文件）<br>auto-imports.d.ts和components.d.ts包含了全局类型声明<br>如果不包含它们，TS编译器会忽略这些声明，导致类型检查失效</p>
</li>
<li><p>自动生成的声明文件特性<br>这两个文件由unplugin-auto-import和unplugin-vue-components插件动态生成<br>默认位于项目根目录（或指定目录）的非源码位置<br>需要显式告知TS编译器这些声明文件的位置</p>
</li>
<li><p>回顾vite项目的配置结构<br>tsconfig.json：基础配置<br>tsconfig.app.json（通过extends继承）：应用代码的专属配置<br>tsconfig.node.json：Vite配置等Node端代码的配置</p>
</li>
</ol>
<h2 id="调整窗口大小"><a href="#调整窗口大小" class="headerlink" title="调整窗口大小"></a>调整窗口大小</h2><p>让App.vue中的大盒子填满整个屏幕<br><strong>不用关心父元素是否填满了屏幕，用下面两行代码</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100vw</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之前用来测试是否配置成功的无用代码清掉了，开始正式布局</p>
<h1 id="登录页"><a href="#登录页" class="headerlink" title="登录页"></a>登录页</h1><p>登录页login&#x2F;login.vue</p>
<h2 id="登录页布局"><a href="#登录页布局" class="headerlink" title="登录页布局"></a>登录页布局</h2><h3 id="登录框组件导入"><a href="#登录框组件导入" class="headerlink" title="登录框组件导入"></a>登录框组件导入</h3><p>组件思想：把登录框设置成一个组件<br>在login&#x2F;children-cpns（子组件）文件夹&#x2F;创建login-panel.vue(登录面板)<br>在login.vue中引入login-panel.vue，并使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;login&quot;&gt;</span><br><span class="line">    &lt;h2&gt;login&lt;/h2&gt;</span><br><span class="line">    &lt;login-panel&gt;&lt;/login-panel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import LoginPanel from &#x27;./children-cpns/login-panel.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="登录框组件布局："><a href="#登录框组件布局：" class="headerlink" title="登录框组件布局："></a>登录框组件布局：</h3><ol>
<li>思路：<br>先把里面的元素都摆出来，然后再布局美化，从element-plus组件库找对应的组件进来替换掉原来的元素，再继续调整布局</li>
<li>居中调整<br>样式调整：flex布局，组件要居中，login.vue独占页面，里面内容要居中，在login.vue<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.login</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">174</span>, <span class="number">119</span>, <span class="number">208</span>);</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;../../assets/img/login-bg.svg&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>调整调整再调整<br>调整的细节不写笔记了，代码里有注释，一点一点慢慢搭建<br>登录组件一点点完善如图：<br><img src="/postImgs/nievtcms/login2.png" alt="登录组件"><br>在绑定v-model时，多去控制台看看数据有没有绑定成功，如图<br><img src="/postImgs/nievtcms/login3.png" alt="v-model绑定检查"></li>
</ol>
<h2 id="登录框组件逻辑"><a href="#登录框组件逻辑" class="headerlink" title="登录框组件逻辑"></a>登录框组件逻辑</h2><h3 id="绑定属性"><a href="#绑定属性" class="headerlink" title="绑定属性"></a>绑定属性</h3><p>目前只是做好了样式，没有给组件绑定属性<br>完善组件的属性和对应变量的声明，比如帐号密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- tab下帐号登录的表单部分 --&gt;</span><br><span class="line">  &lt;div class=&quot;pane-account&quot;&gt;</span><br><span class="line">    &lt;!--label-width调整宽度 --&gt;</span><br><span class="line">    &lt;!-- :model=&quot;account&quot;绑定表单，获取整个对象 --&gt;</span><br><span class="line">    &lt;el-form :model=&quot;account&quot; label-width=&quot;60px&quot; size=&quot;large&quot; status-icon ref=&quot;formRef&quot;&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;帐号&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;account.name&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;account.password&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const account = reactive(&#123;</span><br><span class="line">  name: &#x27;&#x27;,</span><br><span class="line">  password: &#x27;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="登录表单校验"><a href="#登录表单校验" class="headerlink" title="登录表单校验"></a>登录表单校验</h3><p>   这部分在element组件库有，在form表单组件右侧导航栏中有，仔细阅读人家的代码<br>   校验规则一般写在el-form里面，给他添加属性和属性值，在ts中定义具体规则<br>   校验规则到底该怎么写，模仿人家代码的格式，官方文档组件下面有很长规则代码<br><makr>下面是我的账号密码表单组件和对应的校验规则，不难，要专心注意细节，官方文档一点一点读着写</mark></p>
<p><img src="/postImgs/nievtcms/login4.png" alt="登录表单校验"></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- tab下帐号登录的表单部分 --&gt;</span><br><span class="line">  &lt;div class=&quot;pane-account&quot;&gt;</span><br><span class="line">    &lt;!--label-width调整宽度 --&gt;</span><br><span class="line">    &lt;!-- :model=&quot;account&quot;绑定表单，获取整个对象 --&gt;</span><br><span class="line">    &lt;el-form</span><br><span class="line">      :model=&quot;account&quot;</span><br><span class="line">      :rules=&quot;accountRules&quot;</span><br><span class="line">      label-width=&quot;60px&quot;</span><br><span class="line">      size=&quot;large&quot;</span><br><span class="line">      status-icon</span><br><span class="line">      ref=&quot;formRef&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!--prop=&quot;name&quot;目的：进行标识，方便校验规则找到对谁起作用  --&gt;</span><br><span class="line">      &lt;el-form-item label=&quot;帐号&quot; prop=&quot;name&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;account.name&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label=&quot;密码&quot; prop=&quot;password&quot;&gt;</span><br><span class="line">        &lt;el-input v-model=&quot;account.password&quot; /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;account&quot;&gt;</span><br><span class="line">import &#123; reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">//FormRules校验规则，需要导入</span><br><span class="line">import type &#123; FormRules, FormInstance, ElMessage &#125; from &#x27;element-plus&#x27;</span><br><span class="line"></span><br><span class="line">// 定义accout数据</span><br><span class="line">const account = reactive(&#123;</span><br><span class="line">  name: &#x27;&#x27;,</span><br><span class="line">  password: &#x27;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">//定义校验规则，看官方文档，模仿人家的写法</span><br><span class="line">//数组类型：多个校验规则，一个表单可以放多个</span><br><span class="line">//required: true必须填，如果不填，那么trigger: &#x27;blur&#x27;，意思是失去焦点的时候触发</span><br><span class="line">//记得要绑定到表单上，给表单添加属性:rules=&quot;accountRules&quot;</span><br><span class="line">const accountRules: FormRules = &#123;</span><br><span class="line">  name: [</span><br><span class="line">    &#123; required: true, message: &#x27;必须输入帐号信息哦&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">    &#123; pattern: /^[a-z0-9]&#123;6,20&#125;$/, message: &#x27;帐号必须是6~20个字母或数字&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">  ],</span><br><span class="line">  password: [</span><br><span class="line">    &#123; required: true, message: &#x27;必须输入密码哦&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">    &#123; pattern: /^[a-z0-9]&#123;4,12&#125;$/, message: &#x27;密码必须是4~12个字母或数字&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="登录请求与表单校验"><a href="#登录请求与表单校验" class="headerlink" title="登录请求与表单校验"></a>登录请求与表单校验</h2><p>用户填写完帐号密码，点击登录，此时数据在pane-account组件中，而登录按钮在pane-account组件的父组件里<br>方法1：把子组件的数组传递给父组件（这里不用它）<br>方法2：父组件中的登录按钮触发后，传递给子组件，让子组件执行方法<br><strong>所以在子组件中写登录逻辑，注意必须暴露出去，父组件才能触发它</strong></p>
<h3 id="难点代码：-ref"><a href="#难点代码：-ref" class="headerlink" title="难点代码： ref&lt;InstanceType&lt;typeof xxx&gt;&gt;()"></a>难点代码：<code> ref&lt;InstanceType&lt;typeof xxx&gt;&gt;()</code></h3><p><code>const accountRef = ref&lt;InstanceType&lt;typeof PaneAccount&gt;&gt;()</code></p>
<blockquote>
<p>这里一知半解的感觉，没关系，记住用法就可以<br>获取子组件的实例accountRef，注意要把它绑定到子组件上<br>不能直接<code>ref&lt;PanelAccount&gt;</code>,accountRef是由PanelAccount创建的实例对象<br>构造器返回值的实例<br>PaneAccoun相当于一个类</p>
</blockquote>
<h3 id="表单校验"><a href="#表单校验" class="headerlink" title="表单校验"></a>表单校验</h3><p>在登录时，校验表单数据是否验证成功，组件库提供了相关方法</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loginAction</span>(<span class="params"><span class="attr">isKeep</span>: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前账号数据:&#x27;</span>, account)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 是否通过了验证，这个isValid就是表单校验的结果,组件提供给我们的</span></span><br><span class="line">  formRef.<span class="property">value</span>?.<span class="title function_">validate</span>(<span class="function">(<span class="params">isValid</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单校验结果:&#x27;</span>, isValid)</span><br><span class="line">    <span class="keyword">if</span> (isValid) &#123;</span><br><span class="line">      <span class="keyword">const</span> name = account.<span class="property">name</span></span><br><span class="line">      <span class="keyword">const</span> password = account.<span class="property">password</span></span><br><span class="line">      <span class="comment">// 1.登录操作</span></span><br><span class="line">      loginStore.<span class="title function_">accountLoginAction</span>(&#123; name, password &#125;)</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//如果用户点击提交时输入内容不符合规则，弹窗提示用户</span></span><br><span class="line">      <span class="title class_">ElMessage</span>.<span class="title function_">warning</span>(&#123; <span class="attr">message</span>: <span class="string">&#x27;账号或密码输入的规则错误哦&#x27;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="表单校验warning弹窗"><a href="#表单校验warning弹窗" class="headerlink" title="表单校验warning弹窗"></a>表单校验warning弹窗</h4><p>弹窗代码怎么用起来呢<br><code>ElMessage.warning(&#123; message: &#39;账号或密码输入的规则错误哦&#39; &#125;)</code><br>注意它是写在ts里面，不是template里面，要先导入它<br><code>import &#123; ElMessage &#125; from &#39;element-plus&#39;</code><br>此时还是用不了，因为它没有样式，要在main.ts引入样式文件<br>下面两行都能实现warning，但是第二种从哪儿找到有些难<br><code>import &#39;element-plus/dist/index.css&#39;</code>导入所有样式<br><code>import &#39;element-plus/theme-chalk/el-message.css&#39;</code>导入el-message样式</p>
<p><img src="/postImgs/nievtcms/login5.png" alt="登录表单校验"></p>
<h2 id="网络请求与token保存"><a href="#网络请求与token保存" class="headerlink" title="网络请求与token保存"></a>网络请求与token保存</h2><p>网络请求的东西直接写在组件下的ts业务逻辑里不好，一般要单独封装，所以在service文件夹下建login文件夹，里面放登录相关的网络请求</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">accountLoginRequest</span>(<span class="params"><span class="attr">account</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> nieRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: account</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件中调用函数</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//发送登录请求的请求</span></span><br><span class="line"><span class="keyword">import</span> &#123; accountLoginRequest &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service/login/login&#x27;</span></span><br><span class="line">      <span class="keyword">const</span> name = account.<span class="property">name</span></span><br><span class="line">      <span class="keyword">const</span> password = account.<span class="property">password</span></span><br><span class="line">  <span class="title function_">accountLoginRequest</span>(&#123; name, password &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;res:&#x27;</span>, res)</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>这部分我卡了六个小时，最后发现是coderwhy拼成了codewhy，可笑的是我在接口软件和终端调试请求时，用户名写的都是coderwhy，回到登录页面，每次一写的都是codewhy，太不应该了阿，也算是深刻的教训了</strong><br><img src="/postImgs/nievtcms/login6.png" alt="不要再拼写错了"></p>
<h3 id="网络请求放仓库，保存登录状态的"><a href="#网络请求放仓库，保存登录状态的" class="headerlink" title="网络请求放仓库，保存登录状态的"></a>网络请求放仓库，保存登录状态的</h3><p>在store&#x2F;login建useLoginStore，把用户登录请求放到这里<br>在账号登录组件pane-account里导入仓库，把要用的方法取出来，在表单校验成功后调用仓库的方法实现登录请求，请求成功<br><img src="/postImgs/nievtcms/login7.png" alt="网络请求放到登录仓库"><br>登录成功，把返回的结果保存到仓库</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> useLoginStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;login&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">ILoginState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">accountLoginAction</span>(<span class="params"><span class="attr">account</span>: &#123;name:<span class="built_in">string</span>, password:<span class="built_in">string</span>&#125;</span>) &#123;</span><br><span class="line">      <span class="comment">//1.拿到登录信息发送请求</span></span><br><span class="line">      <span class="comment">// 加上await不需要再写.then了</span></span><br><span class="line">      <span class="keyword">const</span> loginRes = <span class="keyword">await</span> <span class="title function_">accountLoginRequest</span>(account)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;登录请求放在登录仓库，loginRes:&#x27;</span>, loginRes)</span><br><span class="line">      <span class="comment">//2.登录成功，把返回的结果保存到仓库</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">token</span> = loginRes.<span class="property">data</span>.<span class="property">data</span>.<span class="property">token</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">id</span> = loginRes.<span class="property">data</span>.<span class="property">data</span>.<span class="property">id</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = loginRes.<span class="property">data</span>.<span class="property">data</span>.<span class="property">name</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;token&#x27;</span>, <span class="variable language_">this</span>.<span class="property">token</span>, <span class="variable language_">this</span>.<span class="property">id</span>, <span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>(开始我保存失败，因为我少了一个data.)<br><img src="/postImgs/nievtcms/login8.png" alt="网络请求放到登录仓库"></p>
<h3 id="永久保存用户token"><a href="#永久保存用户token" class="headerlink" title="永久保存用户token"></a>永久保存用户token</h3><p>两种方式都可以，看需求<br><code>localCache.setCache(&#39;token&#39;, this.token)</code><br><code>localCache.setCache(&#39;token&#39;, this.token)</code><br>记得把仓库里的<code>token:&quot;&quot;</code>也修改<br><code>token: localStorage.getItem(&#39;token&#39;) ?? &#39;&#39;,</code><br>成功后如下图，开始刷新之后token为空，现在刷新完也有值<br><img src="/postImgs/nievtcms/login9.png" alt="网络请求放到登录仓库"></p>
<h2 id="完善type文件定义数据类型"><a href="#完善type文件定义数据类型" class="headerlink" title="完善type文件定义数据类型"></a>完善type文件定义数据类型</h2><p>创建type.ts文件，放类型规则，这个文件可以放单独的type文件夹里，也可以发在要使用这些规则的功能文件夹下，放哪儿你写代码你来定 </p>
<h3 id="完善token，防止拼写错误（很多项目都这样做）"><a href="#完善token，防止拼写错误（很多项目都这样做）" class="headerlink" title="完善token，防止拼写错误（很多项目都这样做）"></a>完善token，防止拼写错误（很多项目都这样做）</h3><p><code>export const LOGIN_TOKEN = &#39;login/token&#39;</code><br><code>import &#123; LOGIN_TOKEN &#125; from &#39;@/types/constants&#39;</code><br><code> localCache.setCache(LOGIN_TOKEN, this.token)</code></p>
<h2 id="封装缓存工具类"><a href="#封装缓存工具类" class="headerlink" title="封装缓存工具类"></a>封装缓存工具类</h2><ol>
<li>定义 CacheType 枚举：区分两种缓存类型（local&#x2F;session）</li>
<li>创建 NieCache 类：封装通用的缓存操作方法（set&#x2F;get&#x2F;delete&#x2F;clear）</li>
<li>根据传入的 CacheType 决定使用 localStorage 还是 sessionStorage</li>
<li>提供 setCache &#x2F; getCache &#x2F; deleteCache &#x2F; clearCache 方法</li>
<li>创建两个实例：localCache 和 sessionCache</li>
<li>导出这两个实例，供其他模块使用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">CacheType</span> &#123;</span><br><span class="line">  local = <span class="string">&#x27;local&#x27;</span>,</span><br><span class="line">  session = <span class="string">&#x27;session&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//localStorage：数据永久保存，除非手动清除。</span></span><br><span class="line"><span class="comment">//sessionStorage：数据只在当前会话有效，关闭浏览器后清除</span></span><br><span class="line"><span class="comment">// NieCache它封装了对浏览器本地存储的操作</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NieCache</span> &#123;</span><br><span class="line">  <span class="attr">storage</span>: <span class="title class_">Storage</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//构造函数 constructor 接收一个参数 type（也就是上面定义的 CacheType）</span></span><br><span class="line">  <span class="comment">//根据这个参数决定使用哪种存储方式</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">type</span>: <span class="title class_">CacheType</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span> = <span class="keyword">type</span> === <span class="title class_">CacheType</span>.<span class="property">local</span> ? <span class="variable language_">localStorage</span> : <span class="variable language_">sessionStorage</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">deleteCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">clearCache</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">clear</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建两个实例并导出</span></span><br><span class="line"><span class="keyword">const</span> localCache = <span class="keyword">new</span> <span class="title class_">NieCache</span>(<span class="title class_">CacheType</span>.<span class="property">local</span>)</span><br><span class="line"><span class="keyword">const</span> sessionCache = <span class="keyword">new</span> <span class="title class_">NieCache</span>(<span class="title class_">CacheType</span>.<span class="property">session</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; localCache, sessionCache &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h2><p>最简单：在store,actions后面添加<code>router.push(&#39;/main&#39;)</code></p>
<h3 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h3><p>router&#x2F;index.ts添加导航守卫</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 导航守卫</span></span><br><span class="line"><span class="comment">// 参数: to(跳转到的位置)/from(从哪里跳转过来)</span></span><br><span class="line"><span class="comment">// 返回值: 返回值决定导航的路径(不返回或者返回undefined, 默认跳转)</span></span><br><span class="line"><span class="comment">// 举个栗子: / =&gt; /main</span></span><br><span class="line"><span class="comment">// to: /main from: / 返回值: /abc</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 只有登录成功(token), 才能真正进入到main页面</span></span><br><span class="line">  <span class="keyword">const</span> token = localCache.<span class="title function_">getCache</span>(<span class="variable constant_">LOGIN_TOKEN</span>)</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span>.<span class="title function_">startsWith</span>(<span class="string">&#x27;/main&#x27;</span>) &amp;&amp; !token) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;/login&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="添加记住密码功能"><a href="#添加记住密码功能" class="headerlink" title="添加记住密码功能"></a>添加记住密码功能</h2><ol>
<li><p>理解：<br>如果用户在登录时勾选“记住密码”，那么应该把用户输入的帐号密码记住，下次用户回到登录页面自动填充账号和密码</p>
<blockquote>
<p>现在浏览器右侧提示的记住账号和密码是浏览器本身的功能，不是网站本身的功能</p>
</blockquote>
</li>
<li><p>思路：<br>在登录组件中通过<code>isRemPwd</code>变量的值确定是否勾选记住密码，把这个值传递给帐号登录子组件的loginAction方法中，子组件方法接受，判断是否保存，如果不记住密码要把，同时修改默认的帐号密码定义</p>
</li>
<li><p>关键代码：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//登录页组件传值给子组件</span></span><br><span class="line"><span class="keyword">const</span> isRemPwd = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line">accountRef.<span class="property">value</span>?.<span class="title function_">loginAction</span>(isRemPwd.<span class="property">value</span>)</span><br><span class="line"><span class="comment">//子组件接受</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loginAction</span>(<span class="params"><span class="attr">isKeep</span>: <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;子组件收到的参数,是否保存:&#x27;</span>, isKeep)</span><br><span class="line"><span class="comment">//判断是否要记住密码</span></span><br><span class="line">      <span class="keyword">if</span> (isKeep) &#123;</span><br><span class="line">        localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;name&#x27;</span>, name)</span><br><span class="line">        localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;password&#x27;</span>, password)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        localCache.<span class="title function_">deleteCache</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line">        localCache.<span class="title function_">deleteCache</span>(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line"><span class="comment">//记住密码--如果cache里有保存用户的数据，用用户的数据填空，否则再用&#x27;&#x27;</span></span><br><span class="line"><span class="comment">// ?? 非空断言</span></span><br><span class="line"><span class="keyword">const</span> account = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: localCache.<span class="title function_">getCache</span>(<span class="string">&#x27;name&#x27;</span>) ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: localCache.<span class="title function_">getCache</span>(<span class="string">&#x27;password&#x27;</span>) ?? <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>选择记住密码后重新回到login页面，页面自动填写帐号密码<br><img src="/postImgs/nievtcms/login10.png" alt="记住密码成功"></p>
</li>
</ol>
<h4 id="进阶：记住密码按钮状态保持"><a href="#进阶：记住密码按钮状态保持" class="headerlink" title="进阶：记住密码按钮状态保持"></a>进阶：记住密码按钮状态保持</h4><p>如果用户上一次登录勾选了“记住密码”那么下一次进入登录页面，“记住密码”选项默认被勾选，如果用户上一次登录没有勾选“记住密码”，那么下一次进入登录页默认不勾选</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> isRemPwd = ref&lt;<span class="built_in">boolean</span>&gt;(localCache.<span class="title function_">getCache</span>(<span class="string">&#x27;isRemPwd&#x27;</span>) ?? <span class="literal">false</span>)</span><br><span class="line"><span class="title function_">watch</span>(isRemPwd, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">  localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;isRemPwd&#x27;</span>, newValue)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="用户权限管理与缓存（基于用户的访问控制）"><a href="#用户权限管理与缓存（基于用户的访问控制）" class="headerlink" title="用户权限管理与缓存（基于用户的访问控制）"></a>用户权限管理与缓存（基于用户的访问控制）</h2><h3 id="获取用户权限"><a href="#获取用户权限" class="headerlink" title="获取用户权限"></a>获取用户权限</h3><p>根据登录用户不同，呈现不同的后台管理系统内容（具备不同的操作权限）<br>目前用户登录后，从登录接口能拿到token,用户id，用户name<br>再根据id，发送请求获取用户详情（用户角色等详细信息）<br>查看接口文档，会发现这个操作需要授权（要有token）<br>应该把token放到header里，可以在请求时写</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getUserDetailById</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">HyRequest</span>.<span class="title function_">get</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/users/&#x27;<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">headers</span>: &#123;</span><br><span class="line">      <span class="title class_">Authorization</span>: localCache.<span class="title function_">getCache</span>(<span class="variable constant_">LOGIN_TOKEN</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是开发中我们希望每个接口发送请求 都携带token，每次都单独放一个太重复了这时候要<strong>放到拦截器里</strong>帮我们在请求中携带，在每个请求的config里都帮我们携带</p>
<h3 id="用拦截器给每个请求携带token"><a href="#用拦截器给每个请求携带token" class="headerlink" title="用拦截器给每个请求携带token"></a>用拦截器给每个请求携带token</h3><p>(拦截器使用老师封装好的代码，我只进行了使用)</p>
<ol>
<li>流程理解：<br> 用户登录成功后，后端返回token<br> token被存储在本地缓存中（使用 localCache.setCache(LOGIN_TOKEN, token) ）<br> 之后的每次请求，这个拦截器都会自动运行<br> 拦截器从缓存中获取token，并添加到请求头中<br> 服务器接收到带有token的请求，验证用户身份</li>
</ol>
<blockquote>
<p>这种方式的优点：<br>自动化：不需要在每个请求中手动添加token<br>统一管理：所有的token处理逻辑都在一个地方<br>类型安全：使用TypeScript确保类型安全<br>可维护性：易于修改和维护token的处理逻辑<br>2. 拦截器代码：</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> hyRequest = <span class="keyword">new</span> <span class="title class_">HYRequest</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="variable constant_">BASE_URL</span>,</span><br><span class="line">  <span class="comment">//如果请求超过这个时间还没有响应，就会自动失败</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="variable constant_">TIME_OUT</span>,</span><br><span class="line">  <span class="comment">//interceptors拦截器配置</span></span><br><span class="line">  <span class="attr">interceptors</span>: &#123;</span><br><span class="line">    <span class="comment">//requestSuccessFn是一个请求成功的拦截器函数，</span></span><br><span class="line">    <span class="comment">//它的作用是在每个请求发送之前自动添加认证头token</span></span><br><span class="line">    <span class="attr">requestSuccessFn</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 每一个请求都自动携带token</span></span><br><span class="line">      <span class="keyword">const</span> token = localCache.<span class="title function_">getCache</span>(<span class="variable constant_">LOGIN_TOKEN</span>)</span><br><span class="line">      <span class="comment">//如果请求头存在且token也存在，就将token添加到请求头中</span></span><br><span class="line">      <span class="keyword">if</span> (config.<span class="property">headers</span> &amp;&amp; token) &#123;</span><br><span class="line">        <span class="comment">// 类型缩小，确保每个里面都有值</span></span><br><span class="line">        <span class="comment">//使用 Bearer 认证方式，这是一种常见的JSON Web Token认证方式</span></span><br><span class="line">        config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">&#x27;Bearer &#x27;</span> + token</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>获取coderwhy的用户信息成功<br><img src="/postImgs/nievtcms/login11.png" alt="获取用户信息成功"></p>
<h3 id="如何指定state类型"><a href="#如何指定state类型" class="headerlink" title="如何指定state类型"></a>如何指定state类型</h3><p>使用泛型+箭头函数</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ILoginState</span> &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">userInfo</span>: <span class="built_in">any</span></span><br><span class="line">  <span class="attr">userMenus</span>: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useLoginStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;login&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// 如何制定state的类型</span></span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">ILoginState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">userInfo</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">userMenus</span>: []</span><br><span class="line">  &#125;),</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h3 id="获取用户菜单信息"><a href="#获取用户菜单信息" class="headerlink" title="获取用户菜单信息"></a>获取用户菜单信息</h3><p>类似获取用户详细信息<br>先根据用户id获取用户详细信息，从用户详细信息中得到用户角色，再根据用户角色获取该角色的菜单信息（根据角色获取权限）</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5.根据role的id获取菜单</span></span><br><span class="line">  <span class="keyword">const</span> roleId = userInfo.<span class="property">data</span>.<span class="property">role</span>.<span class="property">id</span></span><br><span class="line">  <span class="keyword">const</span> userMenusResult = <span class="keyword">await</span> <span class="title function_">getRoleMenus</span>(roleId)</span><br><span class="line">  <span class="keyword">const</span> userMenus = userMenusResult.<span class="property">data</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">userMenus</span> = userMenus</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenus&#x27;</span>, userMenus)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/login12.png" alt="获取用户菜单信息成功"></p>
<h3 id="本地缓存个人信息和菜单信息"><a href="#本地缓存个人信息和菜单信息" class="headerlink" title="本地缓存个人信息和菜单信息"></a>本地缓存个人信息和菜单信息</h3><p>放到store中的数据是一种内存缓存，刷新会消失，期望一直存在需要进行本地缓存<br>store&#x2F;login.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//6. 保存结果到本地缓存</span></span><br><span class="line"><span class="comment">//下面这一行要放在上面，因为下面两个请求需要token要，不能为了好看把这个也放下去</span></span><br><span class="line">localCache.<span class="title function_">setCache</span>(<span class="variable constant_">LOGIN_TOKEN</span>, <span class="variable language_">this</span>.<span class="property">token</span>)</span><br><span class="line"></span><br><span class="line">localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;useInfo&#x27;</span>, <span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;userMenus&#x27;</span>, userMenus)</span><br></pre></td></tr></table></figure>
<p>同时修改state中对数据的定义</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="attr">state</span>: (): <span class="function"><span class="params">ILoginState</span> =&gt;</span> (&#123;</span><br><span class="line">  <span class="comment">//进行本地缓存后，改为这样</span></span><br><span class="line">  <span class="attr">token</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>) ?? <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">userInfo</span>: localCache.<span class="title function_">getCache</span>(<span class="string">&#x27;userInfo&#x27;</span>) ?? &#123;&#125;,</span><br><span class="line">  <span class="attr">userMenus</span>: localCache.<span class="title function_">getCache</span>(<span class="string">&#x27;userMenus&#x27;</span>) ?? []</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/login13(1).png" alt="本地缓存信息成功"><br><img src="/postImgs/nievtcms/login13.png" alt="本地缓存信息成功"></p>
<h3 id="store为什么看不见呢（细节）"><a href="#store为什么看不见呢（细节）" class="headerlink" title="store为什么看不见呢（细节）"></a>store为什么看不见呢（细节）</h3><p>在main页面中，明明之前保存了但是开始看不到store，为什么呢<br>原因是刚开始开发这个页面，还没写ts,而pinia中有很多个store，在你没有使用的时候它不会出现，需要在mian页面使用（导入拿到）一下它，这样就能看到了</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useLoginStore <span class="keyword">from</span> <span class="string">&#x27;@/store/login/login&#x27;</span></span><br><span class="line"><span class="keyword">const</span> loginStore = <span class="title function_">useLoginStore</span>()</span><br><span class="line"><span class="comment">//获取菜单，同时使用loginStore了，现在页面的pinia里有菜单的数据</span></span><br><span class="line"><span class="keyword">const</span> userMenus = loginStore.<span class="property">userMenus</span></span><br></pre></td></tr></table></figure>
<h1 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h1><h2 id="首页布局"><a href="#首页布局" class="headerlink" title="首页布局"></a>首页布局</h2><p>先把结构搭出来，在和后端给的数据做对比，如果返回数据很乱，用一个映射的工具函数把很乱的数据处理成自己想要的格式，再把数据放进界面展示</p>
<h3 id="搭架子"><a href="#搭架子" class="headerlink" title="搭架子"></a>搭架子</h3><p>用element-ui的布局组件，（Basic基础组件&#x2F;布局容器&#x2F;常见布局页面<br><img src="/postImgs/nievtcms/main1.png" alt="组件选取"><br>在main.vue先搭架子，然后放组件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-container</span> <span class="attr">class</span>=<span class="string">&quot;main-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="comment">//放组件</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="首页–左侧菜单栏布局"><a href="#首页–左侧菜单栏布局" class="headerlink" title="首页–左侧菜单栏布局"></a>首页–左侧菜单栏布局</h3><ol>
<li>选取组件<br>element-ui的导航组件（导航&#x2F;菜单&#x2F;侧栏）<br>注意复制的代码是el-menu部分，没用到的爆红的先删掉，用到再加<br><img src="/postImgs/nievtcms/main2.png" alt="菜单栏选取"><br>理解菜单组件代码<br><img src="/postImgs/nievtcms/main3.png" alt="菜单栏选取"></li>
<li>先手动搭建目标菜单<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-menu</span> <span class="attr">text-color</span>=<span class="string">&quot;#b7bdc3&quot;</span> <span class="attr">active-text-color</span>=<span class="string">&quot;#fff&quot;</span> <span class="attr">background-color</span>=<span class="string">&quot;#001529&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.系统总览 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span><span class="tag">&lt;<span class="name">Monitor</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>系统总览<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>核心技术<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>商品统计<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2.系统管理 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span><span class="tag">&lt;<span class="name">Setting</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>系统管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>部门管理<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>菜单管理<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>角色管理<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.商品中心 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span><span class="tag">&lt;<span class="name">ShoppingBag</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>商品中心<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>商品类别<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>商品信息<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 4.随便聊聊 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span><span class="tag">&lt;<span class="name">Monitor</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>随便聊聊<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>你的故事<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span>&gt;</span>故事列表<span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>动态获取菜单–获取菜单名<br>在这里我卡了会儿，原因是没有仔细看数据格式<br>应该是<code>v-for=&quot;item in userMenus.data&quot;</code>，开始写成了<code>v-for=&quot;item in userMenus&quot;</code>，少了<code>.data</code><br><img src="/postImgs/nievtcms/menu1.png" alt="动态获取菜单名"></li>
<li>动态组件展示图标<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"> &lt;!-- 字符串: el-icon-<span class="function"><span class="params">monitor</span> =&gt;</span> 组件 component动态组件 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;item.icon.split(&#x27;-icon-&#x27;)[1]&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<img src="/postImgs/nievtcms/menu2.png" alt="动态获取菜单名"></li>
<li>完整菜单代码<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 菜单栏内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-menu</span></span></span><br><span class="line"><span class="tag">    <span class="attr">default-active</span>=<span class="string">&quot;3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:collapse</span>=<span class="string">&quot;isFold&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">text-color</span>=<span class="string">&quot;#b7bdc3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">active-text-color</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">background-color</span>=<span class="string">&quot;#001529&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 动态获取菜单：先遍历整个菜单，用id作为Key， --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in userMenus.data&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 加上 :index=&quot;item.id + &#x27;&#x27;&quot; 这样就知道要展开哪个，不会全部展开了 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-sub-menu</span> <span class="attr">:index</span>=<span class="string">&quot;item.id + &#x27;&#x27;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 字符串: el-icon-monitor =&gt; 组件 component动态组件 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;item.icon.split(&#x27;-icon-&#x27;)[1]&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 继续获取子菜单 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;subitem in item.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;subitem.id&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">:index</span>=<span class="string">&quot;subitem.path&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; subitem.name &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="首页–头部布局"><a href="#首页–头部布局" class="headerlink" title="首页–头部布局"></a>首页–头部布局</h3><h4 id="菜单栏折叠功能搭建"><a href="#菜单栏折叠功能搭建" class="headerlink" title="菜单栏折叠功能搭建"></a>菜单栏折叠功能搭建</h4><p><img src="/postImgs/nievtcms/%E9%9D%A2%E5%8C%85%E5%B1%91.png" alt="面包屑"></p>
<ol>
<li>选取控制折叠组件<br>最开始的状态：两个动态的图标都展示<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main-header&quot;&gt;</span><br><span class="line">    &lt;!-- 首页头部面包屑 --&gt;</span><br><span class="line">    &lt;div class=&quot;menu-icon&quot; @click=&quot;handleMenuIconClick&quot;&gt;</span><br><span class="line">      &lt;!-- 希望展开状态下展示第一个，折叠状态展示第二个 --&gt;</span><br><span class="line">      &lt;el-icon size=&quot;28px&quot;&gt;&lt;Fold /&gt;&lt;/el-icon&gt;</span><br><span class="line">      &lt;el-icon size=&quot;28px&quot;&gt;&lt;Expand /&gt; &lt;/el-icon&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;breadcrumb&quot;&gt;面包屑，左侧两个图标随切换展示&lt;/div&gt;</span><br><span class="line">      &lt;header-info /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
<li>动态组件切换折叠状态<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;main-header&quot;&gt;</span><br><span class="line">    &lt;!-- 首页头部面包屑 --&gt;</span><br><span class="line">    &lt;div class=&quot;menu-icon&quot; @click=&quot;handleMenuIconClick&quot;&gt;</span><br><span class="line">      &lt;el-icon size=&quot;28px&quot;&gt;</span><br><span class="line">        &lt;component :is=&quot;isFold ? &#x27;Expand&#x27; : &#x27;Fold&#x27;&quot; /&gt;</span><br><span class="line">      &lt;/el-icon&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">      &lt;div class=&quot;breadcrumb&quot;&gt;面包屑&lt;/div&gt;</span><br><span class="line">      &lt;header-info /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">mport &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> isFold = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleMenuIconClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//切换是否折叠状态isFold,配合动态组件使用</span></span><br><span class="line">  isFold.<span class="property">value</span> = !isFold.<span class="property">value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
切换是否折叠状态isFold<br><img src="/postImgs/nievtcms/%E9%9D%A2%E5%8C%85%E5%B1%912.png" alt="面包屑"></li>
</ol>
<h4 id="折叠菜单切换（组件通信）"><a href="#折叠菜单切换（组件通信）" class="headerlink" title="折叠菜单切换（组件通信）"></a>折叠菜单切换（组件通信）</h4><p>通过面包屑的点击来切换左侧菜单栏是否折叠,折叠要改变两部分：菜单栏内容和菜单栏宽度</p>
<ol>
<li>菜单栏折叠<br>在element-ui的菜单组件中，有规定通过属性collapse的true&#x2F;false来控制菜单栏是否折叠</li>
<li>让父组件改变宽度<br>左侧菜单栏和顶部面包屑都是父组件main.vue的子组件<br>子组件<code>main-header</code>内部改变，要把事件和状态传递给父组件<br>父组件接受子组件的事件和状态，改变父组件中设置宽度的值<code>&lt;el-aside :width=&quot;isFold ? &#39;60px&#39; : &#39;210px&#39;&quot;&gt;</code></li>
</ol>
<p><img src="/postImgs/nievtcms/menu3.png" alt="关键代码"></p>
<ol start="3">
<li>让兄弟组件改变折叠状态<br>父组件把是否折叠传递给菜单子组件，决定菜单是否折叠，文字是否显示<br><code>&lt;main-menu :is-fold=&quot;isFold&quot; &gt;&lt;/main-menu&gt;</code><br><code>&lt;h2 class=&quot;title&quot; v-show=&quot;!isFold&quot;&gt;聂聂管理系统&lt;/h2&gt;</code><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//接受父组件传递的数组决定是否折叠菜单</span></span><br><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">isFold</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<img src="/postImgs/nievtcms/menu4.png" alt="菜单折叠与否展示"></li>
</ol>
<h4 id="头部内容"><a href="#头部内容" class="headerlink" title="头部内容"></a>头部内容</h4><p>从组件库找对应的组件一点点搭建<br><img src="/postImgs/nievtcms/menu5.png" alt="菜单折叠与否展示"></p>
<p>style中子组件的根元素可以被父组件直接选中，不需要加deep；子组件背包包裹的其他父组件不能选中</p>
<h2 id="路由配置（有缺陷方法）"><a href="#路由配置（有缺陷方法）" class="headerlink" title="路由配置（有缺陷方法）"></a>路由配置（有缺陷方法）</h2><ol>
<li>先创建页面，再根据路径和关系配路由<br>在哪里创建动态路由的文件，怎么命名，看后端返回的数据命名<br>我这里先在views&#x2F;main下建analysis文件夹和system文件夹，下面放main页面标签里对应展示的页面</li>
<li>再在router里给所有页面配置路由<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/main/main.vue&#x27;</span>),</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;/main/analysis/overview&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">            <span class="keyword">import</span>(<span class="string">&#x27;../views/main/analysis/overview/overview.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;/main/analysis/dashboard&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">            <span class="keyword">import</span>(<span class="string">&#x27;../views/main/analysis/dashboard/dashboard.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;/main/system/user&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/main/system/user/user.vue&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;/main/system/role&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/main/system/role/role.vue&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="弊端"><a href="#弊端" class="headerlink" title="弊端"></a>弊端</h4><p>这样实现在地址栏输入地址即可跳转，让本不该有权限能访问对应页面的人也能够根据地址跳转</p>
<blockquote>
<p>那么如果没有权限的人进入页面，他能看到数据吗<br>应该是需要用token验证才能展示数据，看后端是否会验证<br>但是作为前端，不能取决于后端是否验证，开始就不该让用户进去</p>
</blockquote>
<h4 id="菜单点击实现路由跳转（重要）"><a href="#菜单点击实现路由跳转（重要）" class="headerlink" title="菜单点击实现路由跳转（重要）"></a>菜单点击实现路由跳转（重要）</h4><p>   在左侧导航菜单中，根据点击的子菜单不同，获取到不同子菜单的url，直接用router.push跳转</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 添加@click=&quot;handleItemClick(subitem)点击实现路由跳转 --&gt;</span><br><span class="line"> &lt;template v-for=&quot;subitem in item.children&quot; :key=&quot;subitem.id&quot;&gt;</span><br><span class="line">     &lt;el-menu-item :index=&quot;subitem.id + &#x27;&#x27;&quot; @click=&quot;handleItemClick(subitem)&quot;&gt;</span><br><span class="line">        &#123;&#123; subitem.name &#125;&#125;</span><br><span class="line">      &lt;/el-menu-item&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleItemClick</span>(<span class="params"><span class="attr">item</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> url = item.<span class="property">url</span></span><br><span class="line">  router.<span class="title function_">push</span>(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="动态路由（重难点）"><a href="#动态路由（重难点）" class="headerlink" title="动态路由（重难点）"></a>动态路由（重难点）</h2><p>根据用户角色的权限信息，动态地添加路由<br>登录的接口中请求三个内容：token,用户信息（包含角色信息role对象），菜单信息</p>
<h3 id="基于角色的动态路由管理"><a href="#基于角色的动态路由管理" class="headerlink" title="基于角色的动态路由管理"></a>基于角色的动态路由管理</h3><ol>
<li>用一个枚举类型包含所有的路由<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">consy roles  = &#123; </span><br><span class="line"><span class="string">&quot;superAdmin&quot;</span>:[所有的路由].=&gt;router.<span class="property">main</span>.<span class="property">children</span>,</span><br><span class="line"><span class="string">&quot;admin&quot;</span>:[一部分路由].=&gt;router.<span class="property">main</span>.<span class="property">children</span>,</span><br><span class="line"><span class="string">&quot;sericer&quot;</span>:[少部分路由].=&gt;router.<span class="property">main</span>.<span class="property">children</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>弊端<br>每增加一个角色类型，都要增加一个key&#x2F;value改变代码（前端来做修改代码需要重新发布，后端动态添加需要组织好json数据，后端很难写），所以做的很难，用的少</li>
</ol>
<h3 id="基于菜单的动态路由管理（重要）"><a href="#基于菜单的动态路由管理（重要）" class="headerlink" title="基于菜单的动态路由管理（重要）"></a>基于菜单的动态路由管理（重要）</h3><ol>
<li>思路：根据userMenus包含的菜单，添加到路由里，映射成路由</li>
<li>先创建文件<br>根据后端返回的菜单地址数据的结构，建立文件夹,和views中的文件嵌套关系保持一致：在router&#x2F;main文件夹中创建analysis文件夹里 包含若干文件夹和文件，都是可能的每一个路由</li>
</ol>
<p>比如dashboard.ts文件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/main/analysis/dashboard&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/main/analysis/dashboard/dashboard.vue&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>goods.ts文件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">goods</span> = (<span class="params"></span>) =&gt; <span class="keyword">import</span>(<span class="string">&#x27;@/views/main/product/goods/goods.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/main/product/goods&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;goods&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: goods,</span><br><span class="line">  <span class="attr">children</span>: []</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/router1.png" alt="文件创建"></p>
<blockquote>
<p>也可以用coderwhy老师的自动添加页面工具生成（目前没明白）<br>建文件位置对应好方便后续写一些自动化工具<br><code>npm instiall coderwhy -g</code><br><code>coderwhy ad3page_setup departent -d ser/views/main/system/department</code><br><code>coderwhy ad3page_setup category -d ser/views/main/system/category</code><br><code>coderwhy ad3page_setup chat -d ser/views/main/story.chat</code></p>
</blockquote>
<ol start="3">
<li>根据菜单，动态地添加路由对象（独立的文件中）</li>
</ol>
<ul>
<li>从store获取用户菜单信息userMenus（在store&#x2F;login&#x2F;login.ts中）</li>
<li>动态获取路由对象，放到数组中<br>路由对象都在独立的文件中<br>从文件中将所有路由对象先读取到数组中</li>
<li>根据菜单去匹配正确的路由加到main路由里<br>router.addRoute(‘main’,xxx)</li>
</ul>
<ol start="4">
<li>封装map-menus文件，菜单映射路由<br>在utils文件夹创建文件，负责把用户菜单里的路径映射成路由<br>最终store&#x2F;login&#x2F;login.ts中调用文件中的方法，传递用户菜单过去，返回路由，再把映射回来的路由添加到main路由里<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//动态添加路由,这里开始卡住，因为传的少了.data</span></span><br><span class="line"><span class="keyword">const</span> routes = <span class="title function_">mapMenusToRoutes</span>(userMenus.<span class="property">data</span>)</span><br><span class="line">routes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> router.<span class="title function_">addRoute</span>(<span class="string">&#x27;main&#x27;</span>, route))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这里我犯了个错，开始进入main页面无法动态加载路由，控制台报警告。原因是我的router中<strong>没有给main路由配置name属性</strong>，导致动态添加的路由找不到main无法添加成为main的子路由<br>Vue Router 在动态添加路由时，需要通过 name 属性来识别父路由<br>router.addRoute(‘main’, route) 中的 ‘main’ 参数需要与父路由的 name 属性匹配<br><img src="/postImgs/nievtcms/router2.png" alt="动态添加路由对象成功"></p>
</blockquote>
</li>
</ol>
<p>动态路由功能成功，点击菜单可以调换到对应路由页面<br><img src="/postImgs/nievtcms/router3.png" alt="点击菜单可以调换到对应路由页面"></p>
<h4 id="解决刷新页面路由丢失问题"><a href="#解决刷新页面路由丢失问题" class="headerlink" title="解决刷新页面路由丢失问题"></a>解决刷新页面路由丢失问题</h4><p>刷新main页面时应该保存动态路由的状态<br>问题如下图，此时虽然完成了基于菜单的动态路由管理，但是用户登录后<strong>刷新页面</strong>，路由会丢失，router里只剩下默认的main,login,404路由<br><img src="/postImgs/nievtcms/router4.png" alt="解决刷新页面路由丢失问题"><br>关键代码：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = <span class="title function_">mapMenusToRoutes</span>(userMenus.<span class="property">data</span>)</span><br><span class="line">routes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> router.<span class="title function_">addRoute</span>(<span class="string">&#x27;main&#x27;</span>, route))</span><br></pre></td></tr></table></figure>
<p>原因是：目前这段动态添加路由的代码只会在用户登录时被执行<br>解决思路：让用户刷新页面时也执行一遍动态添加路由的代码<br><strong>不光登录时要映射一次动态路由，刷新的时候也要映射一次</strong><br>还是在store&#x2F;login&#x2F;login.ts中添加</p>
<p>用户在进行刷新时，判断用户是否登录，是否拥有菜单<br>再细一点，如果用户在login页面刷新不需要判断，在main页面刷新要判断<br>继续理解，如果用户要从cache里读取userMenus时，也要动态加载路由（而不只是登录 时动态加载）</p>
<p>这里代码一点点写完了自己检查也没问题，但功能实现不了，拜托AI老师帮我检查代码，<strong>发现use，user拼写错误，说明用常量声明key真的很重要</strong><br><img src="/postImgs/nievtcms/error1.png" alt="拼写错误"></p>
<p>改着改着userMenus的数据又出问题了，对我来说最喜欢的解决办法是都在控制台答应出来然后一个个检查改，这里问AI反而没解决，我觉得是因为他不知道后端给我传的数据是什么样子的<br>而且我不该这样起名，仓库里有userMenu，函数中还用userMenu接受.data后的数据，后续代码多了发现自己会乱掉，直接改命名为userMenuResData</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//检查数据</span></span><br><span class="line"><span class="keyword">const</span> roleId = userInfo.<span class="property">data</span>.<span class="property">role</span>.<span class="property">id</span></span><br><span class="line">      <span class="keyword">const</span> userMenusResult = <span class="keyword">await</span> <span class="title function_">getRoleMenus</span>(roleId)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenusResult&#x27;</span>, userMenusResult)</span><br><span class="line">      <span class="keyword">const</span> userMenus = userMenusResult.<span class="property">data</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenus（ userMenusResult.data）&#x27;</span>, userMenus)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenus.data（ userMenusResult.data.data）&#x27;</span>, userMenus.<span class="property">data</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/error2.png" alt=".data问题"><br>成功解决（详细的注释在代码里score&#x2F;login.ts）：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> roleId = userInfo.<span class="property">data</span>.<span class="property">role</span>.<span class="property">id</span></span><br><span class="line">     <span class="keyword">const</span> userMenusResult = <span class="keyword">await</span> <span class="title function_">getRoleMenus</span>(roleId)</span><br><span class="line">     <span class="keyword">const</span> userMenusData = userMenusResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenusData&#x27;</span>, userMenusData)<span class="comment">//这个是期望保存的数据</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">userMenus</span> = userMenusData</span><br><span class="line"></span><br><span class="line">     localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;userInfo&#x27;</span>, <span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">     localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;userMenus&#x27;</span>, <span class="variable language_">this</span>.<span class="property">userMenus</span>)</span><br></pre></td></tr></table></figure>
<p>下图.data问题和刷新重新加载路由解决：<br><img src="/postImgs/nievtcms/error3.png" alt=".data问题和刷新重新加载路由解决"><br>因为这里的userMenus比之前多加了层.data，所以在左侧菜单列表中脱一层.data<br><code>template v-for=&quot;item in userMenus.data&quot; :key=&quot;item.id&quot;&gt;</code><br>变为<code>template v-for=&quot;item in userMenus&quot; :key=&quot;item.id&quot;&gt;</code></p>
<h4 id="动态路由第一次进入main页面自动匹配子路由（听着容易做很难）"><a href="#动态路由第一次进入main页面自动匹配子路由（听着容易做很难）" class="headerlink" title="动态路由第一次进入main页面自动匹配子路由（听着容易做很难）"></a>动态路由第一次进入main页面自动匹配子路由（听着容易做很难）</h4><p>登录成功时，要给用户展示一个页面，第一次进入的页面应该是动态路由注册的<strong>所有页面中的第一个页面</strong>（不同用户拥有的路由不一样，所以第一个页面也不一样）<br>再梳理一下思路</p>
<blockquote>
<ol>
<li>当用户登录成功后，后端会返回该用户的权限菜单列表</li>
<li>mapMenusToRoutes 函数会：</li>
</ol>
<ul>
<li>加载本地所有路由配置</li>
<li>将用户菜单与本地路由进行匹配</li>
<li>记录第一个匹配到的菜单项到 firstMenu</li>
<li>为一级菜单添加重定向到其第一个子菜单</li>
<li>添加所有匹配的二级菜单路由</li>
</ul>
<ol start="3">
<li>当用户访问 &#x2F;main 路径时</li>
</ol>
<ul>
<li>路由守卫会检查到路径是 &#x2F;main</li>
<li>自动重定向到 firstMenu.url （第一个匹配到的菜单路径）</li>
<li>这样就实现了进入主页面时自动跳转到第一个子菜单页面</li>
</ul>
<ol start="4">
<li>这样的设计可以：<br>确保用户总能看到一个有效的页面内容<br>避免 &#x2F;main 路径下显示空白页面<br>提供更好的用户体验</li>
</ol>
</blockquote>
<p>封装方法在utils&#x2F;map-menus-to-routes.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// firstMenu记录第一个被匹配到的菜单项</span></span><br><span class="line"><span class="comment">// 用于实现进入 /main 路径时的自动重定向</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> <span class="attr">firstMenu</span>: <span class="built_in">any</span> = <span class="literal">null</span></span><br><span class="line"><span class="comment">//userMenus是用户的菜单列表数组</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mapMenusToRoutes</span>(<span class="params"><span class="attr">userMenus</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">// 1.加载本地路由</span></span><br><span class="line">  <span class="keyword">const</span> localRoutes = <span class="title function_">loadLocalRoutes</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.根据菜单去匹配正确的路由</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">RouteRecordRaw</span>[] = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> menu <span class="keyword">of</span> userMenus) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> submenu <span class="keyword">of</span> menu.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="comment">//用户菜单中的url和本地路由的path进行匹配，如果本地路由地址和用户菜单地址一样</span></span><br><span class="line">      <span class="comment">//那么就把这个菜单对应的路由添加到数组routes中</span></span><br><span class="line">      <span class="keyword">const</span> route = localRoutes.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">path</span> === submenu.<span class="property">url</span>)</span><br><span class="line">      <span class="comment">//如果用户菜单中的 URL 和本地路由的 path 相匹配</span></span><br><span class="line">      <span class="keyword">if</span> (route) &#123;</span><br><span class="line">        <span class="comment">// 1.给route的顶层菜单增加重定向功能(但是只需要添加一次即可)</span></span><br><span class="line">        <span class="comment">//检查是否已经为当前一级菜单设置了重定向，如果没有设置过，就添加一个重定向配置</span></span><br><span class="line">        <span class="comment">//一级菜单重定向</span></span><br><span class="line">        <span class="keyword">if</span> (!routes.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">path</span> === menu.<span class="property">url</span>)) &#123;</span><br><span class="line">          routes.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: menu.<span class="property">url</span>, <span class="attr">redirect</span>: route.<span class="property">path</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 添加二级菜单路由</span></span><br><span class="line">        <span class="comment">//直接将匹配到的路由配置添加到路由数组中</span></span><br><span class="line">        routes.<span class="title function_">push</span>(route)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 记录第一个被匹配到的菜单，这个 firstMenu 会用于进入 /main 路径时的自动重定向</span></span><br><span class="line">      <span class="comment">//如果 firstMenu 还没有值，并且找到了匹配的路由，就把当前的子菜单记录为第一个菜单</span></span><br><span class="line">      <span class="keyword">if</span> (!firstMenu &amp;&amp; route) firstMenu = submenu</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> routes</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在router&#x2F;index.ts中添加</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; firstMenu &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/map-menus&#x27;</span></span><br><span class="line">   <span class="comment">// 如果是进入到main，如果firstMenu 存在</span></span><br><span class="line">  <span class="comment">// 返回firstMenu的url属性作为重定向目标，自动跳转到第一个子菜单页面</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/main&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> firstMenu?.<span class="property">url</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>上述都完成后，进入main页面刷新后样式：<br><img src="/postImgs/nievtcms/router5.png" alt="当前页面样式"></p>
<h4 id="main页面刷新–根据路径匹配menu（停留在刷新前页面-子菜单）"><a href="#main页面刷新–根据路径匹配menu（停留在刷新前页面-子菜单）" class="headerlink" title="main页面刷新–根据路径匹配menu（停留在刷新前页面+子菜单）"></a>main页面刷新–根据路径匹配menu（停留在刷新前页面+子菜单）</h4><ol>
<li>理解：<br>刚才完成了第一次进入main页面进入的是用户第一个匹配到的菜单路由，但是用户在页面点击刷新，希望刷新之后显示的依旧是刷新时的路由页面，而不是默认的firstMenu</li>
<li>思路：根据路径匹配菜单<br>根据刷新前的url路径去匹配对应的菜单，这个方法mapPathToMenu()还是封装在utils&#x2F;map-menus-to-routes.ts中，在main-menu.vue中调用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据路径去匹配需要显示的菜单</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> path 需要匹配的路径</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> userMenus 所有的菜单</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mapPathToMenu</span>(<span class="params"><span class="attr">path</span>: <span class="built_in">string</span>, <span class="attr">userMenus</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> menu <span class="keyword">of</span> userMenus) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> submenu <span class="keyword">of</span> menu.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="comment">//子菜单的路径等于要匹配的路径，返回这个子菜单给main-menu.vue</span></span><br><span class="line">      <span class="keyword">if</span> (submenu.<span class="property">url</span> === path) &#123;</span><br><span class="line">        <span class="keyword">return</span> submenu</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
在main-menu.vue中调用：<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 3.ElMenu的默认菜单</span></span><br><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> defaultActive = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pathMenu = <span class="title function_">mapPathToMenu</span>(route.<span class="property">path</span>, userMenus)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pathMenu&#x27;</span>, pathMenu)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pathMenu.id + &#x27;&#x27;&quot;</span>, pathMenu.<span class="property">id</span> + <span class="string">&#x27;&#x27;</span>) <span class="comment">//返回一个数字字符串,给菜单的:default-active=&quot;defaultActive&quot;和</span></span><br><span class="line">  <span class="keyword">return</span> pathMenu.<span class="property">id</span> + <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
这里才意识到，之前到现在我的被选中的菜单栏子菜单一直没有高亮，原因是:index属性的属性值错误<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;el-menu-item :index=&quot;subitem.path&quot; @click=&quot;handleItemClick(subitem)&quot;&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 被选中子菜单不高亮展示的原因：上边错误代码，下面正确代码 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">:index</span>=<span class="string">&quot;subitem.id + &#x27;&#x27;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleItemClick(subitem)&quot;</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<img src="/postImgs/nievtcms/error4.png" alt=".data问题和刷新重新加载路由解决"></li>
</ol>
<h2 id="面包屑实现"><a href="#面包屑实现" class="headerlink" title="面包屑实现"></a>面包屑实现</h2><p>上面布局的时候用了组件占了放面包屑的位置，现在具体实现<br>element-ui&#x2F;导航&#x2F;面包屑组件，我选的“图标分隔符”的面包屑，单独封装一个组件（main-header&#x2F;c-cpns&#x2F;header-crumb.vue），放进之前给面包屑留位置的div里</p>
<p>面包屑需要拿到当前子菜单和它父级的名字，在<code>utils/map-menus.ts</code>中封装方法返回面包屑需要的数据</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IBreadcrumbs</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">path</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mapPathToBreadcrumbs</span>(<span class="params"><span class="attr">path</span>: <span class="built_in">string</span>, <span class="attr">userMenus</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">// 1.定义面包屑</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">breadcrumbs</span>: <span class="title class_">IBreadcrumbs</span>[] = []</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.遍历获取面包屑层级</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> menu <span class="keyword">of</span> userMenus) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> submenu <span class="keyword">of</span> menu.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (submenu.<span class="property">url</span> === path) &#123;</span><br><span class="line">        <span class="comment">// 面包屑里先加父级菜单</span></span><br><span class="line">        breadcrumbs.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: menu.<span class="property">name</span>, <span class="attr">path</span>: menu.<span class="property">url</span> &#125;)</span><br><span class="line">        <span class="comment">// 再加子菜单</span></span><br><span class="line">        breadcrumbs.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: submenu.<span class="property">name</span>, <span class="attr">path</span>: submenu.<span class="property">url</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> breadcrumbs</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在面包屑组件中调用</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> breadcrumbs = <span class="title function_">mapPathToBreadcrumbs</span>(route.<span class="property">path</span>, userMenus)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>路径怎么办呢，看官方文档<br><img src="/postImgs/nievtcms/%E9%9D%A2%E5%8C%85%E5%B1%913.png" alt="面包屑路径"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;curmb&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--el-breadcrumb最外层包裹面包屑的di --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-breadcrumb</span> <span class="attr">separator-icon</span>=<span class="string">&quot;CaretRight&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in breadcrumbs&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.name&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 每一节小面包 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-breadcrumb-item</span> <span class="attr">:to</span>=<span class="string">&quot;item.path&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; item.name &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-breadcrumb-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-breadcrumb</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="面包屑实时更新（用计算属性）"><a href="#面包屑实时更新（用计算属性）" class="headerlink" title="面包屑实时更新（用计算属性）"></a>面包屑实时更新（用计算属性）</h3><p>现在完成的面包屑是静态的（只获取了一次地址），在切换菜单路径变化后没有重新调用方法更新面包屑<br><mark>这时候要用计算属性，当里面依赖的数据改变时，会自动刷新调用方法</mark></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> breadcrumbs = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">mapPathToBreadcrumbs</span>(route.<span class="property">path</span>, userMenus)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/%E9%9D%A2%E5%8C%85%E5%B1%914.png" alt="面包屑路径"></p>
<h3 id="点击父菜单跳转完善（仔细理解）"><a href="#点击父菜单跳转完善（仔细理解）" class="headerlink" title="点击父菜单跳转完善（仔细理解）"></a>点击父菜单跳转完善（仔细理解）</h3><p>比如上图，在点击父分类“随便聊聊”时，找到的是404页面，因为父路径没有东西<br>解决方法：只要点击父路径都进入到里面的第一个子菜单<br>在map-menys.ts封装菜单转路由的方法中完善</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (route) &#123;</span><br><span class="line">        <span class="comment">// 1.给route的顶层菜单增加重定向功能(但是只需要添加一次即可)</span></span><br><span class="line">        <span class="comment">//检查是否已经为当前一级菜单设置了重定向，如果没有设置过，就添加一个重定向配置</span></span><br><span class="line">        <span class="comment">//一级菜单重定向</span></span><br><span class="line">        <span class="keyword">if</span> (!routes.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">path</span> === menu.<span class="property">url</span>)) &#123;</span><br><span class="line">          routes.<span class="title function_">push</span>(&#123; <span class="attr">path</span>: menu.<span class="property">url</span>, <span class="attr">redirect</span>: route.<span class="property">path</span> &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 添加二级菜单路由</span></span><br><span class="line">        <span class="comment">//直接将匹配到的路由配置添加到路由数组中</span></span><br><span class="line">        routes.<span class="title function_">push</span>(route)</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>在main-menu.vue中，也把获取菜单的方法变成计算属性</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span><br><span class="line"><span class="keyword">const</span> defaultActive = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> pathMenu = <span class="title function_">mapPathToMenu</span>(route.<span class="property">path</span>, userMenus)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;pathMenu&#x27;</span>, pathMenu)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pathMenu.id + &#x27;&#x27;&quot;</span>, pathMenu.<span class="property">id</span> + <span class="string">&#x27;&#x27;</span>) <span class="comment">//返回一个数字字符串</span></span><br><span class="line">  <span class="keyword">return</span> pathMenu.<span class="property">id</span> + <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="用户管理页面"><a href="#用户管理页面" class="headerlink" title="用户管理页面"></a>用户管理页面</h1><h2 id="查询信息功能部分"><a href="#查询信息功能部分" class="headerlink" title="查询信息功能部分"></a>查询信息功能部分</h2><h3 id="查询布局–element布局"><a href="#查询布局–element布局" class="headerlink" title="查询布局–element布局"></a>查询布局–element布局</h3><p>放在user文件夹&#x2F;c-cpns文件夹&#x2F;user-search.vue中<br>使用组件&#x2F;layout布局，看下图理解<br><img src="/postImgs/nievtcms/user1.png" alt="layout布局"><br>查询部分表单如下：<br>这里写一行20，但是前三个8已经占满了一行，那么后面的几个8会自动另起一行</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;searchForm&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入查询的用户名&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;真实姓名&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm.realname&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入查询的真实姓名&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号码&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm.cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入查询的手机号码&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;searchForm.enable&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">placeholder</span>=<span class="string">&quot;请选择查询的状态&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;启用&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;1&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">label</span>=<span class="string">&quot;禁用&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;创建时间&quot;</span> &gt;</span></span><br><span class="line">        <span class="comment">&lt;!--type=&quot;daterange&quot; 显示时间范围,有它选两个日期没它选一个--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-model</span>=<span class="string">&quot;searchForm.createAt&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;daterange&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">range-separator</span>=<span class="string">&quot;-&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">start-placeholder</span>=<span class="string">&quot;开始时间&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">end-placeholder</span>=<span class="string">&quot;结束时间&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="查询和重置按钮布局"><a href="#查询和重置按钮布局" class="headerlink" title="查询和重置按钮布局"></a>查询和重置按钮布局</h3><p>放在user文件夹&#x2F;c-cpns文件夹&#x2F;user-search.vue中<br>组件&#x2F;Button按钮和icon小组件一起用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btns&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">icon</span>=<span class="string">&quot;Refresh&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleResetClick&quot;</span>&gt;</span>重置<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">icon</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleQueryClick&quot;</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>样式慢慢改</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.search</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.el-form-item</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span> <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.btns</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">50px</span> <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.el-button--primary</span> &#123;</span><br><span class="line">      <span class="attr">--el-button-bg-color</span>: rgb(98, 106, 239);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.el-button</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/user2.png" alt="layout布局"></p>
<h3 id="重置功能实现"><a href="#重置功能实现" class="headerlink" title="重置功能实现"></a>重置功能实现</h3><p>在表单 组件中给每一个子表单添加prop属性，和searchForm中的名称对应，方便重置找到属性，比如：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入查询的用户名&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;手机号码&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;cellphone&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm.cellphone&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入查询的手机号码&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ElForm</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> searchForm = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">realname</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cellphone</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">enable</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">createAt</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置操作</span></span><br><span class="line"><span class="keyword">const</span> formRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">ElForm</span>&gt;&gt;()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleResetClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  formRef.<span class="property">value</span>?.<span class="title function_">resetFields</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//查询操作（还没接后端接口）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleQueryClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;handleQueryClick&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="element组件内容中文化"><a href="#element组件内容中文化" class="headerlink" title="element组件内容中文化"></a>element组件内容中文化</h3><p>在使用时间选择组件时，月份星期显示都为英文，想要把它改成中文<br>element-plus组件显示的英文变中文：<br>右上角指南&#x2F;左侧进阶&#x2F;国际化，我用的是下图代码<br><img src="/postImgs/nievtcms/%E4%B8%AD%E6%96%87%E5%8C%961.png" alt="改为中文"><br>在App.vue中</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import router from &#x27;./router&#x27;</span><br><span class="line">import &#123; ElConfigProvider &#125; from &#x27;element-plus&#x27;</span><br><span class="line">import zhCn from &#x27;element-plus/es/locale/lang/zh-cn&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-config-provider :locale=&quot;zhCn&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">      Hello小聂同学</span><br><span class="line">      &lt;!-- &lt;router-link to=&quot;/main&quot;&gt;去main页面&lt;/router-link&gt;--&gt;</span><br><span class="line">      &lt;router-link to=&quot;/login&quot;&gt;去login页面&lt;/router-link&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/el-config-provider&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>成功，现在组件中默认英文的地方都变成了中文</p>
<h2 id="用户信息功能部分"><a href="#用户信息功能部分" class="headerlink" title="用户信息功能部分"></a>用户信息功能部分</h2><p>写在user文件夹&#x2F;c-cpns文件夹&#x2F;user-content.vue中<br>这里不光要展示服务器的用户列表，还会展示上面自查询返回的用户数据，所以不再是简单的数据，用Post请求</p>
<h3 id="获取用户列表"><a href="#获取用户列表" class="headerlink" title="获取用户列表"></a>获取用户列表</h3><ol>
<li>用户信息展示分为：<br>头部（说明列表，添加用户按钮+功能）<br>中间（展示用户数据列表）<br>底部（分页）</li>
<li>发送数据请求<br>发送数据请求放在store&#x2F;main&#x2F;system&#x2F;system.ts中，组件中调用<br>先看看是否能拿到数据<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; postUsersListData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service/main/system/system&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ISystemState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./type&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useSystemStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;system&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">ISystemState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">usersList</span>: [],</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">postUsersListAction</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> usersListResult = <span class="keyword">await</span> <span class="title function_">postUsersListData</span>()</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(usersListResult)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useSystemStore</span><br></pre></td></tr></table></figure>
组件中调用，获取数据<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useSystemStore <span class="keyword">from</span> <span class="string">&#x27;@/store/main/system/system&#x27;</span></span><br><span class="line"><span class="comment">// 1.调用仓库的查询数据请求，发起action，请求usersList的数据</span></span><br><span class="line"><span class="keyword">const</span> systemStore = <span class="title function_">useSystemStore</span>()</span><br><span class="line">systemStore.<span class="title function_">postUsersListAction</span>()</span><br></pre></td></tr></table></figure>
看控制台，成功拿到用户数据<br><img src="/postImgs/nievtcms/user3.png" alt="获取数据成功"></li>
</ol>
<h3 id="表格展示数据"><a href="#表格展示数据" class="headerlink" title="表格展示数据"></a>表格展示数据</h3><p>把获取到的数据展示到页面列表中</p>
<ol>
<li>数据类型规范<br>控制台看到的后端数据是json格式，要把它转换成ts数据，还是用到之前的<code>json to ts</code>转换网址（直接搜就能用）<br>把转化后的的单独放到store&#x2F;main&#x2F;system&#x2F;types.ts中<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">realname</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">cellphone</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">enable</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">departmentId</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">roleId</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">createAt</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">updateAt</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">ISystemState</span> &#123;</span><br><span class="line">  <span class="attr">usersList</span>: <span class="title class_">IUser</span>[]</span><br><span class="line">  <span class="attr">usersTotalCount</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>把数据放进仓库<br>store&#x2F;main&#x2F;system&#x2F;system.ts中,给刚获取到的数据.data再.data，控制台看，把目标数据存到仓库state里<br>数据的规范使用刚才<code>type.ts</code>文件中的数据类型<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; postUsersListData &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service/main/system/system&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">ISystemState</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./type&#x27;</span><span class="comment">//类型规范</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useSystemStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;system&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">ISystemState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">usersList</span>: [],</span><br><span class="line">    <span class="attr">usersTotalCount</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">postUsersListAction</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> usersListResult = <span class="keyword">await</span> <span class="title function_">postUsersListData</span>()</span><br><span class="line">      <span class="comment">//console.log(usersListResult)</span></span><br><span class="line">      <span class="comment">// console.log(&#x27;usersListResult.data&#x27;, usersListResult.data)</span></span><br><span class="line">      <span class="comment">// console.log(usersListResult.data.data)</span></span><br><span class="line">      <span class="comment">//console.log(usersListResult.data.data.list)</span></span><br><span class="line">      <span class="keyword">const</span> &#123; totalCount, list &#125; = usersListResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usersTotalCount</span> = totalCount</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">usersList</span> = list</span><br><span class="line">      <span class="comment">//console.log(this.usersTotalCount)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useSystemStore</span><br></pre></td></tr></table></figure></li>
<li>组件展示数据<br>user-content.vue中获取把仓库的数据放到表格中<br>表格还是用组件element-plus&#x2F;Datas数据展示&#x2F;Table表格&#x2F;带边框表格<br>仔细读代码：<br>组件表格中的数据使用<code>:data=&quot;tableData&quot;</code>填充，用prop属性和data中的数据绑定，width属性指定这一列的宽度，如果没有规定宽度，那么没有规定宽度的列会平均分配剩下的宽度<br>布置好组件表格<code>:data=&quot;usersList&quot;</code>，ts中<code>const &#123; usersList &#125; = storeToRefs(systemStore)</code>展示数据</li>
<li>添加多选框列和序号列<br>多选功能在组件库中也有，还是Table表格&#x2F;多选，把代表多选框的列拿进代码<br><code>&lt;el-table-column type=&quot;selection&quot; width=&quot;50px&quot; /&gt;</code><br>序号列也从组件库找，找有序号的表格，把列那一行放进来<code>&lt;el-table-column type=&quot;index&quot; label=&quot;序号&quot; width=&quot;60px&quot; /&gt;</code></li>
<li>表格最后一列的删除和编辑按钮<br>组件&#x2F;button按钮，两个按钮放进最后一列<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">width</span>=<span class="string">&quot;150px&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">text</span>&gt;</span> 编辑 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">text</span>&gt;</span> 删除 <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>目前完整代码展示<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;header&quot;&gt;</span><br><span class="line">      &lt;h3 class=&quot;title&quot;&gt;用户列表&lt;/h3&gt;</span><br><span class="line">      &lt;el-button type=&quot;primary&quot;&gt;新建用户&lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;table&quot;&gt;</span><br><span class="line">      &lt;el-table :data=&quot;usersList&quot; border style=&quot;width: 100%&quot;&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; type=&quot;selection&quot; width=&quot;50px&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; type=&quot;index&quot; label=&quot;序号&quot; width=&quot;60px&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;用户名&quot; prop=&quot;name&quot; width=&quot;150px&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;真实姓名&quot; prop=&quot;realname&quot; width=&quot;150px&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;手机号码&quot; prop=&quot;cellphone&quot; width=&quot;150px&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;状态&quot; prop=&quot;enable&quot; width=&quot;100px&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;创建时间&quot; prop=&quot;createAt&quot; /&gt;</span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;更新时间&quot; prop=&quot;updateAt&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-table-column align=&quot;center&quot; label=&quot;操作&quot; width=&quot;150px&quot;&gt;</span><br><span class="line">          &lt;el-button size=&quot;small&quot; icon=&quot;Edit&quot; type=&quot;primary&quot; text&gt; 编辑 &lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size=&quot;small&quot; icon=&quot;Delete&quot; type=&quot;danger&quot; text&gt; 删除 &lt;/el-button&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;pagination&quot;&gt;分页&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; storeToRefs &#125; from &#x27;pinia&#x27;</span><br><span class="line">import useSystemStore from &#x27;@/store/main/system/system&#x27;</span><br><span class="line"></span><br><span class="line">// 1.调用仓库的查询数据请求，发起action，请求usersList的数据</span><br><span class="line">const systemStore = useSystemStore()</span><br><span class="line">systemStore.postUsersListAction()</span><br><span class="line"></span><br><span class="line">// 2.获取usersList数据,进行展示</span><br><span class="line">const &#123; usersList &#125; = storeToRefs(systemStore)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
完成，效果如下图<br><img src="/postImgs/nievtcms/user4.png" alt="用户信息展示"></li>
</ol>
<h3 id="处理数据–状态列"><a href="#处理数据–状态列" class="headerlink" title="处理数据–状态列"></a>处理数据–状态列</h3><p>根据后端返回的值自定义展示数据：<br>比如后端返回的状态是1或0，期望状态列是具体的汉字表述而不是数字，那么要<strong>使用插槽</strong>自定义展示数据<br>先拿到数据然后用作用域插槽把数据放进去</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;状态&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;enable&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 作用域插槽，原来只有上面，下面新增 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:type</span>=<span class="string">&quot;scope.row.enable ? &#x27;primary&#x27; : &#x27;danger&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">plain</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      &#123;&#123; scope.row.enable ? &#x27;启用&#x27; : &#x27;禁用&#x27; &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="处理数据–时间列"><a href="#处理数据–时间列" class="headerlink" title="处理数据–时间列"></a>处理数据–时间列</h3><p>时间格式化进行展示<br>Day.js库<code> pnpm add dayjs</code><br>utils文件夹建format.ts文件，定义时间格式化方法</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> utc <span class="keyword">from</span> <span class="string">&#x27;dayjs/plugin/utc&#x27;</span></span><br><span class="line"><span class="comment">// 上面这两行导入虽然爆红，但是不影响，时间已经被格式化了</span></span><br><span class="line">dayjs.<span class="title function_">extend</span>(utc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatUTC</span>(<span class="params"><span class="attr">utcString</span>: <span class="built_in">string</span>, <span class="attr">format</span>: <span class="built_in">string</span> = <span class="string">&#x27;YYYY/MM/DD HH:mm:ss&#x27;</span></span>) &#123;</span><br><span class="line">  <span class="comment">// 默认格式化后的时间是零时区，东八区要.utcOffset(8)加八个小时</span></span><br><span class="line">  <span class="comment">//也可以在形参上不规定 format: string = &#x27;YYYY/MM/DD HH:mm:ss&#x27;</span></span><br><span class="line">  <span class="comment">//在下面.format(&#x27;YYYY/MM/DD HH:mm:ss&#x27;)</span></span><br><span class="line">  <span class="comment">//现在的写法更优雅，上面注释掉的更顺着思路</span></span><br><span class="line">  <span class="keyword">const</span> resultTime = dayjs.<span class="title function_">utc</span>(utcString).<span class="title function_">utcOffset</span>(<span class="number">8</span>).<span class="title function_">format</span>(format)</span><br><span class="line">  <span class="keyword">return</span> resultTime</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件中导入<code>import &#123; formatUTC &#125; from &#39;@/utils/format&#39;</code>并使用</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;创建时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;createAt&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; formatUTC(scope.row.createAt) &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">label</span>=<span class="string">&quot;更新时间&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;updateAt&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123; formatUTC(scope.row.updateAt) &#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>完成，效果如下图<br><img src="/postImgs/nievtcms/user5.png" alt="数据处理"></p>
<h2 id="底部分页器功能部分（重难点）"><a href="#底部分页器功能部分（重难点）" class="headerlink" title="底部分页器功能部分（重难点）"></a>底部分页器功能部分（重难点）</h2><p>很常见的功能，刚学的时候很费劲，后面仔细看下面的代码和注解，应该能豁然开朗</p>
<ol>
<li>引入组件<br>还是组件库找分页组件，数据展示&#x2F;分页里面找组件代码放进去，读代码，修改，最终：<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pagination&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:current-page</span>=<span class="string">&quot;currentPage&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:page-sizes</span>=<span class="string">&quot;[10, 20]&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:total</span>=<span class="string">&quot;usersTotalCount&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>查询用户列表post请求要增加查询信息queryInfo参数<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">postUsersListData</span>(<span class="params"><span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/users/list&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: queryInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>仓库接收用户信息，调用了postUsersListData()，要对应着给它加形参<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">postUsersListAction</span>(<span class="params"><span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> usersListResult = <span class="keyword">await</span> <span class="title function_">postUsersListData</span>(queryInfo)</span><br><span class="line">  <span class="keyword">const</span> &#123; totalCount, list &#125; = usersListResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">usersTotalCount</span> = totalCount</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">usersList</span> = list</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>页面调用仓库中的方法时同样要传递参数，封装网络请求函数<br>现在一进页面要查询数据，分页数量变要查询，页码变要查询，总查询，所以给查询请求封装一个函数进行网络请求<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fetchUserListData</span>(<span class="params"><span class="attr">formData</span>: <span class="built_in">any</span> = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// size每页的数据数</span></span><br><span class="line">  <span class="keyword">const</span> size = pageSize.<span class="property">value</span></span><br><span class="line">  <span class="comment">//offset偏移量，第一页偏移0条数据，第二页偏移第一页展示的数据量以此类推</span></span><br><span class="line">  <span class="keyword">const</span> offset = (currentPage.<span class="property">value</span> - <span class="number">1</span>) * size</span><br><span class="line">  <span class="comment">//这两个参数都是接口文档规定的要传的参数</span></span><br><span class="line">  <span class="keyword">const</span> pageInfo = &#123; size, offset &#125;</span><br><span class="line">  <span class="comment">// 2.发送网络请求</span></span><br><span class="line">  systemStore.<span class="title function_">postUsersListAction</span>(pageInfo)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
功能实现，如下图<br><img src="/postImgs/nievtcms/user5.png" alt="底部分页器功能"></li>
</ol>
<h3 id="条件查询数据"><a href="#条件查询数据" class="headerlink" title="条件查询数据"></a>条件查询数据</h3><p>要实现条件查询获取数据再展示，<strong>查询的组件</strong>和<strong>展示数据的组件</strong>是兄弟关系，他们之间要通信借助父组件user.vue</p>
<blockquote>
<p>事件总线为什么不用<br>事件总线虽然能实现，但是数据也可能被别处获取使用，可能变得不可控<br>事件总线一般用于跨度大远距离的组件通信，现在是兄弟组件，距离不远，可以借助父组件，没必要用 </p>
</blockquote>
<ol>
<li>查询子组件向父组件传递数据<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送给父组件，定义自定义事件</span></span><br><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;queryClick&#x27;</span>, <span class="string">&#x27;resetClick&#x27;</span>])</span><br><span class="line"><span class="keyword">const</span> searchForm = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">realname</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cellphone</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">enable</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">createAt</span>: []</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//查询</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleQueryClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//console.log(&#x27;searchForm&#x27;, searchForm)</span></span><br><span class="line">  <span class="title function_">emit</span>(<span class="string">&#x27;queryClick&#x27;</span>, searchForm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>父组件接收子组件传递的数据<br><code> &lt;user-search @query-click=&quot;handleQueryClick&quot; @reset-click=&quot;handleResetClick&quot; /&gt;</code></li>
<li>父组件要用content子组件的方法，需要content组件提供方法并暴露<br>content.vue<br>原来的fetchUserListData()方法要完善，不光要携带页码和分页两个参数，还要包含查询组件传过来的参数<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义事件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchUserListData</span>(<span class="params"><span class="attr">formData</span>: <span class="built_in">any</span> = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// size每页的数据数</span></span><br><span class="line">  <span class="keyword">const</span> size = pageSize.<span class="property">value</span></span><br><span class="line">  <span class="comment">//offset偏移量，第一页偏移0条数据，第二页偏移第一页展示的数据量以此类推</span></span><br><span class="line">  <span class="keyword">const</span> offset = (currentPage.<span class="property">value</span> - <span class="number">1</span>) * size</span><br><span class="line">  <span class="keyword">const</span> pageInfo = &#123; size, offset &#125;</span><br><span class="line">  <span class="comment">//queryInfo把两部分要传的参数综合起来</span></span><br><span class="line">  <span class="keyword">const</span> queryInfo = &#123; ...pageInfo, ...formData  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;queryInfo&#x27;</span>, queryInfo)</span><br><span class="line">  <span class="comment">// 发起网络请求</span></span><br><span class="line">  systemStore.<span class="title function_">postUsersListAction</span>(queryInfo)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//把这个方法暴露出去才能让父组件调用</span></span><br><span class="line"><span class="title function_">defineExpose</span>(&#123; fetchUserListData &#125;)</span><br></pre></td></tr></table></figure></li>
<li>父组件调用content子组件的方法<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 先拿到content组件，再对content组件操作</span></span><br><span class="line"><span class="keyword">const</span> contentRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">UserContent</span>&gt;&gt;()</span><br><span class="line"><span class="comment">//把search传递的formData传给content组件的fetchUserListData()方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleQueryClick</span>(<span class="params"><span class="attr">formData</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;user.vue的formData&#x27;</span>, formData)</span><br><span class="line">  contentRef.<span class="property">value</span>?.<span class="title function_">fetchUserListData</span>(formData)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>跑一下，但是报错了呢<br><img src="/postImgs/nievtcms/error5.png" alt="条件查询"><br><img src="/postImgs/nievtcms/error6.png" alt="error"><br>为什么呢，打印的数据都正确，<br>我想条件查询用户名含有<code>o</code>的用户，手动固定参数查询试试看<br><code>fetchUserListData(formData: any = &#123;&#125;) </code>方法中的<br><code>const queryInfo = &#123; ...pageInfo, ...formData &#125;</code><br>我改成<code>const queryInfo = &#123; ...pageInfo, name: &#39;o&#39; &#125;</code><br>刷新页面，成功展示了所有带o的用户信息，看来问题出现在<code>...formData</code>这个参数上<br><img src="/postImgs/nievtcms/error7.png" alt="error"><br>找到问题了，在查询表单默认数据这里<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> searchForm = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">realname</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">cellphone</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">enable</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="comment">//createAt: [] 开始是这样，会出错，服务器会认为没有和空数组匹配的项，都不符合，不会返回数据，改成下面的空字符串就好了</span></span><br><span class="line">  <span class="attr">createAt</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
再试，成功<img src="/postImgs/nievtcms/error8.png" alt="error"></li>
</ol>
<h3 id="重置查询条件"><a href="#重置查询条件" class="headerlink" title="重置查询条件"></a>重置查询条件</h3><p>点击重置按钮不光要情况查询表单，还要让用户列表清单回到默认展示的效果，所以也需要触发兄弟组件的获取数据方法，和查询数据很多重复部分不重复记了</p>
<ol>
<li>查询组件 <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;resetClick&#x27;</span>])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleQueryClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;searchForm&#x27;</span>, searchForm)</span><br><span class="line">  <span class="title function_">emit</span>(<span class="string">&#x27;queryClick&#x27;</span>, searchForm)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>父组件<br><code>&lt;user-search @query-click=&quot;handleQueryClick&quot; @reset-click=&quot;handleResetClick&quot; /&gt;</code><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//重置操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleResetClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  contentRef.<span class="property">value</span>?.<span class="title function_">fetchUserListData</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="删除用户部分"><a href="#删除用户部分" class="headerlink" title="删除用户部分"></a>删除用户部分</h2><h3 id="插槽获取ID"><a href="#插槽获取ID" class="headerlink" title="插槽获取ID"></a>插槽获取ID</h3><p>先要知道点击的是那条数据的删除，要拿到数据的ID，用作用域插槽</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">             <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">text</span></span></span><br><span class="line"><span class="tag">             @<span class="attr">click</span>=<span class="string">&quot;handleDeleteBtnClick(scope.row.id)&quot;</span></span></span><br><span class="line"><span class="tag">           &gt;</span></span><br><span class="line">             删除</span><br><span class="line">           <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="delete请求"><a href="#delete请求" class="headerlink" title="delete请求"></a>delete请求</h3><p>后端接口文档这个是delete请求<br>service&#x2F;main&#x2F;sysystem&#x2F;system.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deleteUserById</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">delete</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/users/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store&#x2F;main&#x2F;system&#x2F;system.ts封装发送请求</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//删除用户数据请求</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">deleteUserByIdAction</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="comment">//调用service删除接口，记得先导入</span></span><br><span class="line">  <span class="keyword">const</span> deleteResult = <span class="keyword">await</span> <span class="title function_">deleteUserById</span>(id)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(deleteResult)</span><br><span class="line">  <span class="comment">// 删除后要重新请求新的数据，获取获取第一页数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">postUsersListAction</span>(&#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">size</span>: <span class="number">10</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件调用</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleDeleteBtnClick</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;触发ID&#x27;</span>, id)</span><br><span class="line">  systemStore.<span class="title function_">deleteUserByIdAction</span>(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>成功，截图如下<br><img src="/postImgs/nievtcms/user7.png" alt="删除成功"></p>
<h2 id="新建用户"><a href="#新建用户" class="headerlink" title="新建用户"></a>新建用户</h2><h3 id="弹出弹窗"><a href="#弹出弹窗" class="headerlink" title="弹出弹窗"></a>弹出弹窗</h3><p>新建会出现一个弹窗，这个弹窗编辑用户也能用，逻辑也很多，单独封装一个组件c&#x3D;cpns&#x2F;user-modal.vue<br>弹出的对话框从element组件里找，反馈组件&#x2F;对话框放进去，对话框内容部分换成表单，script里定义初始值<br>modal组件中添加显示表单与否方法，暴露出去，让父组件调用</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dialogVisible = <span class="title function_">ref</span>(<span class="literal">false</span>)<span class="comment">//默认看不见，父组件调用再看见</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setModalVisible</span>(<span class="params"></span>)&#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">defineExpose</span>(&#123; setModalVisible &#125;)</span><br></pre></td></tr></table></figure>
<p>content.vue<br>给按钮添加点击事件，点击按钮触发事件发送求给父组件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;newClick&#x27;</span>])</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleNewUserClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">emit</span>(<span class="string">&#x27;newClick&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>user.vue<br><code>&lt;user-content ref=&quot;contentRef&quot; @new-click=&quot;handleNewClick&quot; /&gt;</code></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> modalRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">UserModal</span>&gt;&gt;()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleNewClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  modalRef.<span class="property">value</span>?.<span class="title function_">setModalVisible</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="完善对话框–选项请求"><a href="#完善对话框–选项请求" class="headerlink" title="完善对话框–选项请求"></a>完善对话框–选项请求</h3><p>类似查询表单，这里也放表达，<br><code>选择用户角色</code>和<code>选择部门</code>的选项应该来自服务器</p>
<ol>
<li><p>创建请求方法<br>这个请求不应该属于单独的页面，多个地方都可能用这个请求，单独放一个文件service&#x2F;main&#x2F;建main.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hyRequest <span class="keyword">from</span> <span class="string">&#x27;..&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取所有用户角色</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getEntireRoles</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/role/list&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取所有部门信息</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getEntireDepartments</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/department/list&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>封装请求<br>放在store&#x2F;main&#x2F;main.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getEntireDepartments, getEntireRoles &#125; <span class="keyword">from</span> <span class="string">&#x27;@/service/main/main&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="comment">//获取用户角色和部门类别应该再用户登录后就发送请求获取信息</span></span><br><span class="line"><span class="comment">//记得在store/login中添加调用请求的代码</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IMainState</span> &#123;</span><br><span class="line">  <span class="attr">entireRoles</span>: <span class="built_in">any</span>[]</span><br><span class="line">  <span class="attr">entireDepartments</span>: <span class="built_in">any</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useMainStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: (): <span class="function"><span class="params">IMainState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">entireRoles</span>: [],</span><br><span class="line">    <span class="attr">entireDepartments</span>: []</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">fetchEntireDataAction</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> rolesResult = <span class="keyword">await</span> <span class="title function_">getEntireRoles</span>()</span><br><span class="line">      <span class="keyword">const</span> departmentsResult = <span class="keyword">await</span> <span class="title function_">getEntireDepartments</span>()</span><br><span class="line">      <span class="comment">//console.log(&#x27;rolesResult&#x27;, rolesResult)</span></span><br><span class="line">      <span class="comment">//console.log(&#x27;departmentsResult&#x27;, departmentsResult)</span></span><br><span class="line">      <span class="comment">// 保存数据</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">entireRoles</span> = rolesResult.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">entireDepartments</span> = departmentsResult.<span class="property">data</span>.<span class="property">data</span>.<span class="property">list</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useMainStore</span><br></pre></td></tr></table></figure>
</li>
<li><p>登录时调用，刷新时再调用<br>不缓存因为要最新的更好一i点<br>store&#x2F;login&#x2F;login.ts的登录方法和刷新方法中都添加</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//8.请求所有roles/departments数据</span></span><br><span class="line"> <span class="keyword">const</span> mainStore = <span class="title function_">useMainStore</span>()</span><br><span class="line"> mainStore.<span class="title function_">fetchEntireDataAction</span>()</span><br></pre></td></tr></table></figure></li>
<li><p>对话框展示信息</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;选择角色&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;roleId&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.roleId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择角色&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in entireRoles&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;选择部门&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;departmentId&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.departmentId&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请选择部门&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in entireDepartments&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.id&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 2.获取roles/departments数据</span></span><br><span class="line"><span class="keyword">const</span> mainStore = <span class="title function_">useMainStore</span>()</span><br><span class="line"><span class="keyword">const</span> systemStore = <span class="title function_">useSystemStore</span>()</span><br><span class="line"><span class="keyword">const</span> &#123; entireRoles, entireDepartments &#125; = <span class="title function_">storeToRefs</span>(mainStore)</span><br></pre></td></tr></table></figure></li>
<li><p>成功截图<br><img src="/postImgs/nievtcms/user8.png" alt="获取用户角色和部门信息成功"></p>
</li>
</ol>
<h3 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h3><p>填表测试，数据有被拿到<br><img src="/postImgs/nievtcms/user9.png" alt="获取用户角色和部门信息成功"><br>service&#x2F;system.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">newUserData</span>(<span class="params"><span class="attr">userInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/users&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: userInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>store，还是记得要导入newUserData</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">newUserDataAction</span>(<span class="params"><span class="attr">userInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="comment">//发送简历新用户请求</span></span><br><span class="line">  <span class="keyword">const</span> newResult = <span class="keyword">await</span> <span class="title function_">newUserData</span>(userInfo)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newResult)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 重新获取数据</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">postUsersListAction</span>(&#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">size</span>: <span class="number">10</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>组件中调用</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击确定新建</span></span><br><span class="line"><span class="keyword">const</span> systemStore = <span class="title function_">useSystemStore</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleConfirmClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">    systemStore.<span class="title function_">newUserDataAction</span>(formData)</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新增两条用户数据成功，截图如下<br><img src="/postImgs/nievtcms/user10.png" alt="新增用成功"></p>
<h2 id="编辑用户"><a href="#编辑用户" class="headerlink" title="编辑用户"></a>编辑用户</h2><p>对话框组件，根据父传过来的参数显示title</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;dialogVisible&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:title</span>=<span class="string">&quot;isNewRef ? &#x27;新建用户&#x27; : &#x27;编辑用户&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">&quot;30%&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">center</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br></pre></td></tr></table></figure>
<p>如果是编辑把原有数据添加进表单中</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表单加载</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setModalVisible</span>(<span class="params"><span class="attr">isNew</span>: <span class="built_in">boolean</span> = <span class="literal">true</span>, itemData?: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">  isNewRef.<span class="property">value</span> = isNew</span><br><span class="line">  <span class="keyword">if</span> (!isNew &amp;&amp; itemData) &#123;</span><br><span class="line">    <span class="comment">// 编辑数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> formData) &#123;</span><br><span class="line">      formData[key] = itemData[key]</span><br><span class="line">    &#125;</span><br><span class="line">    editData.<span class="property">value</span> = itemData</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 新建数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> formData) &#123;</span><br><span class="line">      formData[key] = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    editData.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>service,store,兄弟通信和前面大差不大，不赘述了<br>编辑成功截图（手机号码目前没修改成功）：<br><img src="/postImgs/nievtcms/user11.png" alt="编辑用户成功"><br><img src="/postImgs/nievtcms/user12.png" alt="编辑用户成功"></p>
<h1 id="封装用可复用的网路请求"><a href="#封装用可复用的网路请求" class="headerlink" title="封装用可复用的网路请求"></a>封装用可复用的网路请求</h1><p>其他页面的功能都和上面实现的用户功能相似，信息的增删查改<br>网络请求大致三个部分：页面触发增删查改；store封装请求；service发送请求<br>封装思路：<br>页面把页面的pageName和要做的增删查改操作发送给store，service再接收store传过来的pageName，拼接url发送请求<br>（如果接口不工整，前端应该手动封装工具把接口变得规整再实现复用）</p>
<h2 id="网络请求复用—部门管理查询部分为例"><a href="#网络请求复用—部门管理查询部分为例" class="headerlink" title="网络请求复用—部门管理查询部分为例"></a>网络请求复用—部门管理查询部分为例</h2><p><strong>先不复用，靠cv用户管理页面+手动修改实现了这部分的所有功能，然后再修改search部分代码实现可复用的代码</strong></p>
<ol>
<li>命名统一<br>看接口和页面名称，是统一工整的，那么就好操作了（如果接口不工整，前端应该手动封装工具把接口变得规整再实现复用）</li>
<li>service用pageName拼接地址<br>原来的url类似<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deleteUserById</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">delete</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/users/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">editUserData</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span>, <span class="attr">userInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">patch</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/users/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">data</span>: userInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
现在封装成下面这种<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">postPageListData</span>(<span class="params"><span class="attr">pageName</span>: <span class="built_in">string</span>, <span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">post</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/<span class="subst">$&#123;pageName&#125;</span>/list`</span>,</span><br><span class="line">    <span class="attr">data</span>: queryInfo</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">deletePageById</span>(<span class="params"><span class="attr">pageName</span>: <span class="built_in">string</span>, <span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">delete</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/<span class="subst">$&#123;pageName&#125;</span>/<span class="subst">$&#123;id&#125;</span>`</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>store封装请求<br>对应store的接收和发送也添加pageName，以查找和修改为例<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//查找数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">postPageListAction</span>(<span class="params"><span class="attr">pageName</span>: <span class="built_in">string</span>, <span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> pageListResult = <span class="keyword">await</span> <span class="title function_">postPageListData</span>(pageName, queryInfo)</span><br><span class="line">  <span class="keyword">const</span> &#123; totalCount, list &#125; = pageListResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageList</span> = list</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">pageTotalCount</span> = totalCount</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//编辑数据</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">editPageDataAction</span>(<span class="params"><span class="attr">pageName</span>: <span class="built_in">string</span>, <span class="attr">id</span>: <span class="built_in">number</span>, <span class="attr">pageInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> editResult = <span class="keyword">await</span> <span class="title function_">editPageData</span>(pageName, id, pageInfo)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;editResult&#x27;</span>, editResult)</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">postPageListAction</span>(pageName, &#123; <span class="attr">offset</span>: <span class="number">0</span>, <span class="attr">size</span>: <span class="number">10</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>组件发送pageName<br>通过config.ts传递pageName属性，发送请求带着它<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">  <span class="keyword">const</span> queryInfo = &#123; ...pageInfo, ...formData &#125;</span><br><span class="line">  systemStore.<span class="title function_">postPageListAction</span>(pageName, queryInfo)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 5.删除/新建/编辑的操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleDeleteBtnClick</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  systemStore.<span class="title function_">deletePageByIdAction</span>(pageName, id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>实现截图：新增部门成功<br><img src="/postImgs/nievtcms/user13.png" alt="新增部门成功"></li>
</ol>
<h2 id="网络请求复用–content部分"><a href="#网络请求复用–content部分" class="headerlink" title="网络请求复用–content部分"></a>网络请求复用–content部分</h2><p>前面以及把service和store改成了复用的部分，content部分网络请求复用只需要把写死的页面名变成config.ts中的pageName属性传入组件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//发送网络请求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchPageListData</span>(<span class="params"><span class="attr">formData</span>: <span class="built_in">any</span> = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// 1.获取offset/size</span></span><br><span class="line">  <span class="keyword">const</span> size = pageSize.<span class="property">value</span></span><br><span class="line">  <span class="keyword">const</span> offset = (currentPage.<span class="property">value</span> - <span class="number">1</span>) * size</span><br><span class="line">  <span class="keyword">const</span> pageInfo = &#123; size, offset &#125;</span><br><span class="line">  <span class="keyword">const</span> queryInfo = &#123; ...pageInfo, ...formData &#125;</span><br><span class="line">  systemStore.<span class="title function_">postPageListAction</span>(props.<span class="property">contentConfig</span>.<span class="property">pageName</span>, queryInfo)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除/新建/编辑的操作</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleDeleteBtnClick</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  systemStore.<span class="title function_">deletePageByIdAction</span>(props.<span class="property">contentConfig</span>.<span class="property">pageName</span>, id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>复用成功<br><img src="/postImgs/nievtcms/fuyong10.png" alt="修改代码"><br>（补充：在对页面进行新建和编辑操作之后，应该重新获取完整的信息）</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//重新获取完整的数据</span></span><br><span class="line">  <span class="keyword">const</span> mainStore = <span class="title function_">useMainStore</span>()</span><br><span class="line">  mainStore.<span class="title function_">fetchEntireDataAction</span>()</span><br></pre></td></tr></table></figure>
<h1 id="封装可复用的高阶组件快速搭建页面"><a href="#封装可复用的高阶组件快速搭建页面" class="headerlink" title="封装可复用的高阶组件快速搭建页面"></a>封装可复用的高阶组件快速搭建页面</h1><p>其他页面的和用户管理页面很相似，除了数据不同，要展示的样式都是上面搜索清单，下面展示信息表格，为了避免代码的重复和每一个新页面修改很多<br>写一个配置文件，封装一个可复用的页面，快速搭建页面<br>这些封装好的组件后来都放到了components文件夹下用文件夹包了起来</p>
<h2 id="search部分复用—部门管理为例"><a href="#search部分复用—部门管理为例" class="headerlink" title="search部分复用—部门管理为例"></a>search部分复用—部门管理为例</h2><p><strong>先不复用，靠cv用户管理页面+手动修改实现了这部分的所有功能，然后再修改search部分代码实现可复用的代码</strong></p>
<ol>
<li>建立专门针对页面的search部分进行配置的文件<br>部门管理内容在department文件夹中，在里面建config文件夹&#x2F;search.config.ts文件<br>先简单写数据，比如<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> searchConfig = &#123;</span><br><span class="line">  <span class="attr">xxx</span>:<span class="string">&quot;Nie&quot;</span></span><br><span class="line">  <span class="attr">yyy</span>:<span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> searchConfig</span><br></pre></td></tr></table></figure></li>
<li>在这部分页面的父组件department.vue中引入并传给search组件<br><code>import searchConfig from &#39;./config/search.config</code><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">page-search</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:search-config</span>=<span class="string">&quot;searchConfig&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">query-click</span>=<span class="string">&quot;handleQueryClick&quot;</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">reset-click</span>=<span class="string">&quot;handleResetClick&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>在search组件接收，<strong>注意写法</strong><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IProps</span> &#123;</span><br><span class="line">  <span class="attr">searchConfig</span>:&#123;</span><br><span class="line">    <span class="comment">// 对象里的属性和config文件里的属性对应</span></span><br><span class="line">    <span class="attr">xxx</span>:<span class="built_in">string</span></span><br><span class="line">    <span class="attr">yyy</span>:<span class="built_in">number</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这样指定props里包含一个searchConfig，和它对应的类型</span></span><br><span class="line"><span class="keyword">const</span> props = defineProps&lt;<span class="title class_">IProps</span>&gt;(&#123;&#125;)</span><br></pre></td></tr></table></figure></li>
<li>修改config内容成目标内容<br>观察搜索部分，想要动态展示的数据formItems是数组，把不确定的动态的东西放进数组里，比如下图的这种数据，让它自动生成<br><img src="/postImgs/nievtcms/fuyong1.png" alt="修改代码"><br>search.config.ts<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> searchConfig = &#123;</span><br><span class="line">  <span class="attr">formItems</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//这里增加类型因为不止有input类型，可能还有日期选择等</span></span><br><span class="line">      <span class="attr">prop</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&#x27;部门名称&#x27;</span>,</span><br><span class="line">      <span class="attr">placeholder</span>: <span class="string">&#x27;请输入查询的部门名称&#x27;</span>,</span><br><span class="line">      <span class="attr">initialValue</span>: <span class="string">&#x27;我是默认填进去的值&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;input&#x27;</span>,</span><br><span class="line">      <span class="attr">prop</span>: <span class="string">&#x27;leader&#x27;</span>,</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&#x27;部门领导&#x27;</span>,</span><br><span class="line">      <span class="attr">placeholder</span>: <span class="string">&#x27;请输入查询的领导名称&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;date-picker&#x27;</span>,</span><br><span class="line">      <span class="attr">prop</span>: <span class="string">&#x27;createAt&#x27;</span>,</span><br><span class="line">      <span class="attr">label</span>: <span class="string">&#x27;创建时间&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> searchConfig</span><br></pre></td></tr></table></figure></li>
<li>search组件表单中获取数据<br>原来空架子<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;searchForm&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;searchForm&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;formRef&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;80px&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;20&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in searchConfig.formItems&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.prop&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 这个span也能抽出去设置宽度 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">:label</span>=<span class="string">&quot;item.label&quot;</span> <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 这里不一定都是imput，用动态组件或者template+if判断</span></span><br><span class="line"><span class="comment">           我觉得动态组件拼接有些难，用后者 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;input&#x27;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;searchForm[item.prop]&quot;</span> <span class="attr">:placeholder</span>=<span class="string">&quot;item.placeholder&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- type一共没几种，多写写 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;date-picker&#x27;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-model</span>=<span class="string">&quot;searchForm[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;daterange&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">range-separator</span>=<span class="string">&quot;-&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">start-placeholder</span>=<span class="string">&quot;开始时间&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">end-placeholder</span>=<span class="string">&quot;结束时间&quot;</span></span></span><br><span class="line"><span class="tag">            /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>search组件ts获取数组<br>searchForm的数据不能写死，遍历config<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IProps</span> &#123;</span><br><span class="line">  <span class="attr">searchConfig</span>: &#123;</span><br><span class="line">    <span class="comment">// 对象里的属性和config文件里的属性对应</span></span><br><span class="line">    <span class="attr">formItems</span>: <span class="built_in">any</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这样指定props里包含一个searchConfig，和它对应的类型</span></span><br><span class="line"><span class="keyword">const</span> props = defineProps&lt;<span class="title class_">IProps</span>&gt;(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义form的数据</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initialForm</span>: <span class="built_in">any</span> = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> props.<span class="property">searchConfig</span>.<span class="property">formItems</span>) &#123;</span><br><span class="line">  initialForm[item.<span class="property">prop</span>] = item.<span class="property">initialValue</span> ?? <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> searchForm = <span class="title function_">reactive</span>(initialForm)</span><br></pre></td></tr></table></figure></li>
<li>search部分复用成功截图<br><mark>之前的配色为了好区分，没有设计，现在重新搭配了页面颜色</mark></li>
</ol>
<p><img src="/postImgs/nievtcms/fuyong2.png" alt="search部分复用成功"><br>功能正常，能够查询<br><img src="/postImgs/nievtcms/fuyong3.png" alt="search部分复用成功"></p>
<h2 id="search部分复用—角色管理使用复用内容"><a href="#search部分复用—角色管理使用复用内容" class="headerlink" title="search部分复用—角色管理使用复用内容"></a>search部分复用—角色管理使用复用内容</h2><p><strong>（好神奇！！这样好方便！！！！）</strong><br>角色管理在departemnt&#x2F;role文件夹下，在role.vue中引入并使用组件</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">PageSearch</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/page-search/page-search.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> searchConfig <span class="keyword">from</span> <span class="string">&#x27;./config/search.config&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;page-search :search-config=&quot;searchConfig&quot; /&gt;</code><br>再写个config文件，然后就成功啦！<br><img src="/postImgs/nievtcms/fuyong4.png" alt="search部分复用成功"><br>看效果<br><img src="/postImgs/nievtcms/fuyong5.png" alt="search部分复用成功"></p>
<h2 id="content表单复用—部门管理"><a href="#content表单复用—部门管理" class="headerlink" title="content表单复用—部门管理"></a>content表单复用—部门管理</h2><p>把写死的content部分改为可复用的组件<br><img src="/postImgs/nievtcms/fuyong6.png" alt="content表单复用-"></p>
<ol>
<li>分解<br>这部分是表格，分为表格头部（表格名和新建数据按钮）和表格内容两个部分，在content.config.ts中用listHeader和listBody两部分存自定义数据。<br>文件还是放在部分文件夹下的config文件夹里<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> contentConfig = &#123;</span><br><span class="line">  <span class="attr">pageName</span>:<span class="string">&quot;department&quot;</span></span><br><span class="line">  <span class="attr">listHeader</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;我是复用的部门列表&#x27;</span>,</span><br><span class="line">    <span class="attr">btnTitle</span>: <span class="string">&#x27;我是复用添加部门&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">listBody</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> contentConfig</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>在父组件中引入，传递给子组件<br><code> &lt;page-search :search-config=&quot;searchConfig&quot;/&gt;</code></li>
<li>子组件接收数据 <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Iprops</span> &#123;</span><br><span class="line">  <span class="attr">contentConfig</span>: &#123;</span><br><span class="line">    <span class="attr">pageName</span>: <span class="built_in">string</span></span><br><span class="line">    listHeader?: &#123;</span><br><span class="line">      title?: <span class="built_in">string</span></span><br><span class="line">      btnTitle?: <span class="built_in">string</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">listBody</span>: <span class="built_in">any</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> props = defineProps&lt;<span class="title class_">Iprops</span>&gt;()</span><br></pre></td></tr></table></figure></li>
<li>子组件使用数据–表单头部改复用<br>如果没有数据，给一个默认的展示数据<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>部门列表<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleNewUserClick&quot;</span>&gt;</span>新建部门<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 上面原来的改为下面的 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>&#123;&#123; contentConfig?.listHeader?.title ?? &#x27;数据列表&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleNewUserClick&quot;</span>&gt;</span>&#123;&#123;</span><br><span class="line">        contentConfig?.listHeader?.btnTitle ?? &#x27;新增数据&#x27;</span><br><span class="line">      &#125;&#125;<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/postImgs/nievtcms/fuyong8.png" alt="content表格头部复用"><br>按顺序做vscode有提示好写很多<br><img src="/postImgs/nievtcms/fuyong7.png" alt="content复用"></li>
<li>表单内容改复用<br>每一个el-table-column的内容都可能不一样，让每一列根据配置文件listBody对象数组动态生成，每一个对象就是每一列的数据<br>表格中v-for+v-if<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;pageList&quot;</span> <span class="attr">border</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in contentConfig.listBody&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.prop&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;timer&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              &#123;&#123; formatUTC(scope.row[item.prop]) &#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;item.type === &#x27;handler&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">icon</span>=<span class="string">&quot;Edit&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">text</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;handleEditBtnClick(scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                编辑</span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">icon</span>=<span class="string">&quot;Delete&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">text</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;handleDeleteBtnClick(scope.row.id)&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                删除</span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else-if</span>=<span class="string">&quot;item.type === &#x27;custom&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:name</span>=<span class="string">&quot;item.slotName&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;scope&quot;</span> <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span> <span class="attr">hName</span>=<span class="string">&quot;why&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img src="/postImgs/nievtcms/fuyong9.png" alt="content表单复用-"></li>
</ol>
<h2 id="modal对话框复用"><a href="#modal对话框复用" class="headerlink" title="modal对话框复用"></a>modal对话框复用</h2><p>核心方法和前面一样，不重复做笔记了</p>
<h3 id="动态获取选项中的数据"><a href="#动态获取选项中的数据" class="headerlink" title="动态获取选项中的数据"></a>动态获取选项中的数据</h3><p>选项中想要有服务器返回的部门列表数据该怎么做，使用计算属性，获取放进仓库中的部门信息，放进oconfig里面，再传给组件展示数据</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> modalConfigRef = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> mainStore = <span class="title function_">useMainStore</span>()</span><br><span class="line">  <span class="keyword">const</span> departments = mainStore.<span class="property">entireDepartments</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">label</span>: item.<span class="property">name</span>, <span class="attr">value</span>: item.<span class="property">id</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  modalConfig.<span class="property">formItems</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">prop</span> === <span class="string">&#x27;parentId&#x27;</span>) &#123;</span><br><span class="line">      item.<span class="property">options</span>.<span class="title function_">push</span>(...departments)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> modalConfig</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/fuyong11.png" alt="module对话框复用"></p>
<h2 id="setup中相同逻辑的抽取"><a href="#setup中相同逻辑的抽取" class="headerlink" title="setup中相同逻辑的抽取"></a>setup中相同逻辑的抽取</h2><p>setup语法糖中有部分逻辑永远是相似的，可以进行抽取<br>在父组件department.vue中，帮助search组件和content组件兄弟通信的(重置，查询)代码，还有content组件和mocal组件兄弟通信的（新建，查询）代码，其他部分父组件也会用到，会出现重复，把这部分使用hooks进行抽取<br>想抽取部分：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 点击search, content的操作</span></span><br><span class="line"><span class="keyword">const</span> contentRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">PageContent</span>&gt;&gt;()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleQueryClick</span>(<span class="params"><span class="attr">queryInfo</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  contentRef.<span class="property">value</span>?.<span class="title function_">fetchPageListData</span>(queryInfo)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleResetClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  contentRef.<span class="property">value</span>?.<span class="title function_">fetchPageListData</span>()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击content, modal的操作</span></span><br><span class="line"><span class="keyword">const</span> modalRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">PageModal</span>&gt;&gt;()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleNewClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  modalRef.<span class="property">value</span>?.<span class="title function_">setModalVisible</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleEditClick</span>(<span class="params"><span class="attr">itemData</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  modalRef.<span class="property">value</span>?.<span class="title function_">setModalVisible</span>(<span class="literal">false</span>, itemData)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在hooks文件夹下创建usePageContent.ts文件</p>
<h2 id="全用复用组件搭建角色管理页面"><a href="#全用复用组件搭建角色管理页面" class="headerlink" title="全用复用组件搭建角色管理页面"></a>全用复用组件搭建角色管理页面</h2><p>内容全部使用只用了一个vue和三个config文件，实现页面搭建和数据的获取与展示！！<br><img src="/postImgs/nievtcms/fuyong13.png" alt="module对话框复用"><br><img src="/postImgs/nievtcms/fuyong12.png" alt="module对话框复用"></p>
<h2 id="全用复用组件搭建菜单管理页面（完善content组件实现多级菜单展示效果）"><a href="#全用复用组件搭建菜单管理页面（完善content组件实现多级菜单展示效果）" class="headerlink" title="全用复用组件搭建菜单管理页面（完善content组件实现多级菜单展示效果）"></a>全用复用组件搭建菜单管理页面（完善content组件实现多级菜单展示效果）</h2><p>看接口返回的菜单数据，后端传递的每一种数据作为每一列，再config.ts文件中是对象数组的一个对象</p>
<blockquote>
<p>理解后端数据，用户的权限管理不光有路由的权限管理，还有按钮的权限管理（比如有的用户只有某个页面的查看权限，没有该部分的删除和编辑权限）,比如system:role:create; system:role:delete</p>
</blockquote>
<h3 id="展示一级菜单二级菜单"><a href="#展示一级菜单二级菜单" class="headerlink" title="展示一级菜单二级菜单"></a>展示一级菜单二级菜单</h3><p>菜单包含一级菜单和二级菜单，想要页面的展示效果是一级菜单下能展开二级菜单，该怎么做呢</p>
<ol>
<li>仔细读官方文档： element&#x2F;Table表格&#x2F;树形数据与懒加载<blockquote>
<p>当 row 中包含 children 字段时，被视为树形数据。 渲染嵌套数据需要 prop 的 row-key。 此外，子行数据可以异步加载。 设置 Table 的lazy属性为 true 与加载函数 load 。 通过指定 row 中的hasChildren字段来指定哪些行是包含子节点。 children 与hasChildren都可以通过 tree-props 配置。</p>
</blockquote>
</li>
<li>修改content复用组件<br>给el-table添加row-key&#x3D;””属性，treeProps属性，这两个属性放在config文件中更好</li>
<li>修改config.ts文件<br>想要用element组件库展开数据，那么config数据中不可以有type类型<br>因为再el-table每一列进行v-for,v-if,v-else时，最后的v-else有v-bind&#x3D;”item”，本来给el-table添加row-key属性会默认给这种列添加type，如果config里面写，会把本来要添加的type覆盖掉，导致不显示展开样式<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-table-column</span>  <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> contentConfig = &#123;</span><br><span class="line">  <span class="attr">pageName</span>: <span class="string">&#x27;menu&#x27;</span>,</span><br><span class="line">  <span class="attr">listHeader</span>: &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;菜单列表&#x27;</span>,</span><br><span class="line">    <span class="attr">btnTitle</span>: <span class="string">&#x27;新建菜单&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">listBody</span>: [</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;菜单名称&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;name&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;180px&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;级别&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;type&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;120px&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;菜单url&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;url&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;150px&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;菜单icon&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;icon&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;200px&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;排序&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;sort&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;120px&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">label</span>: <span class="string">&#x27;权限&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;permission&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;150px&#x27;</span> &#125;,</span><br><span class="line"></span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&#x27;timer&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;创建时间&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;createAt&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&#x27;timer&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;更新时间&#x27;</span>, <span class="attr">prop</span>: <span class="string">&#x27;updateAt&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&#x27;handler&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;操作&#x27;</span>, <span class="attr">width</span>: <span class="string">&#x27;150px&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">childrenTree</span>: &#123;</span><br><span class="line">    <span class="attr">rowKey</span>: <span class="string">&#x27;id&#x27;</span>,</span><br><span class="line">    <span class="attr">treeProps</span>: &#123;</span><br><span class="line">      <span class="attr">children</span>: <span class="string">&#x27;children&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> contentConfig</span><br></pre></td></tr></table></figure></li>
<li>完善content复用组件<br>在el-table上绑定<code>v-bind=&quot;contentConfig.childrenTree&quot;</code><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">&lt;el-table :data=<span class="string">&quot;pageList&quot;</span> border style=<span class="string">&quot;width: 100%&quot;</span> v-bind=<span class="string">&quot;contentConfig.childrenTree&quot;</span>&gt;</span><br></pre></td></tr></table></figure>
在IProps中添加可选的childrenTree属性<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IProps</span> &#123;</span><br><span class="line">  <span class="attr">contentConfig</span>: &#123;</span><br><span class="line">    <span class="attr">pageName</span>: <span class="built_in">string</span></span><br><span class="line">    listHeader?: &#123;</span><br><span class="line">      title?: <span class="built_in">string</span></span><br><span class="line">      btnTitle?: <span class="built_in">string</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">listBody</span>: <span class="built_in">any</span>[]</span><br><span class="line">    childrenTree?: <span class="built_in">any</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>成功截图<br><img src="/postImgs/nievtcms/fuyong13.png" alt="content实现多级惨淡展示效果"></li>
</ol>
<h2 id="完善复用组件–插槽实现自定义标签-展示树形菜单"><a href="#完善复用组件–插槽实现自定义标签-展示树形菜单" class="headerlink" title="完善复用组件–插槽实现自定义标签(展示树形菜单)"></a>完善复用组件–插槽实现自定义标签(展示树形菜单)</h2><p>想要在“添加菜单”modal中展示菜单列表让用户选择。自定义modal里可以放插槽，插槽里可以放任何东西，比如h2标签等</p>
<ol>
<li>简单例子<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;custom&#x27;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">:name</span>=<span class="string">&quot;item.slotName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
父组件使用时<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">page-modal</span> <span class="attr">:modal-config</span>=<span class="string">&quot;modalconfig&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;modalRef&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>自定义span标签<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">btn</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span>&gt;</span> 自定义button标签<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span><span class="tag">&lt;/<span class="name">page-modal</span>&gt;</span></span><br></pre></td></tr></table></figure>
在config中，多个自定义组件区分在<code>slotName</code>不同，type都为<code>custom</code></li>
<li>插槽实现自定义菜单列表（树形结构）<br>element组件库&#x2F;数据展示&#x2F;树形控件&#x2F;树节点的选择<br>在父组件role.vue使用树形结构<strong>注意:props</strong><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">page-modal</span> <span class="attr">:modal-config</span>=<span class="string">&quot;modalConfig&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;modalRef&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">menulist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">&quot;treeRef&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">&quot;entireMenus&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">      <span class="attr">node-key</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:props</span>=<span class="string">&quot;&#123; children: &#x27;children&#x27;, label: &#x27;name&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">page-modal</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>获取菜单<br>与前面获取部门和角色一样，在role.vue中使用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取完整的菜单</span></span><br><span class="line"><span class="keyword">const</span> mainStore = <span class="title function_">useMainStore</span>()</span><br><span class="line"><span class="keyword">const</span> &#123; entireMenus &#125; = <span class="title function_">storeToRefs</span>(mainStore)</span><br></pre></td></tr></table></figure></li>
<li>实现截图<br><img src="/postImgs/nievtcms/role1.png" alt="content实现多级菜单展示效果"></li>
</ol>
<h2 id="完善：action触发后分页回到第一页"><a href="#完善：action触发后分页回到第一页" class="headerlink" title="完善：action触发后分页回到第一页"></a>完善：action触发后分页回到第一页</h2><p>在modal组件点击新建或编辑或删除之后，content页面应该回归到<code>1</code>页面<br>modal页面点击确定之后，content页面改变，兄弟组件通信，继续借助父组件<br>新增，编辑，删除的操作，都是在store&#x2F;system的actions里面，判断只要做了edit\delete\new操作，那么就进行页码回归（修改curretPage.value为1）<br>在page-content.vue中监听actions里的操作</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">systemStore.$onAction(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听到actions&#x27;</span>, args)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/jianting1.png" alt="用户权限"></p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.发起action，请求usersList的数据</span></span><br><span class="line"><span class="keyword">const</span> systemStore = <span class="title function_">useSystemStore</span>()</span><br><span class="line"><span class="keyword">const</span> currentPage = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> pageSize = <span class="title function_">ref</span>(<span class="number">10</span>)</span><br><span class="line"><span class="comment">//后面添加：监听store/stsyem中actions</span></span><br><span class="line"><span class="comment">//用actions参数，它本身接收一个回调，当action执行成功时触发</span></span><br><span class="line">systemStore.$onAction(<span class="function">(<span class="params">&#123; name, after &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">after</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      name === <span class="string">&#x27;deletePageByIdAction&#x27;</span> ||</span><br><span class="line">      name === <span class="string">&#x27;editPageDataAction&#x27;</span> ||</span><br><span class="line">      name === <span class="string">&#x27;newPageDataAction&#x27;</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      currentPage.<span class="property">value</span> = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//获取页面数据</span></span><br><span class="line"><span class="title function_">fetchPageListData</span>()</span><br></pre></td></tr></table></figure>
<h2 id="完善：新建和编辑角色功能"><a href="#完善：新建和编辑角色功能" class="headerlink" title="完善：新建和编辑角色功能"></a>完善：新建和编辑角色功能</h2><h3 id="创建角色（树形结构组件）"><a href="#创建角色（树形结构组件）" class="headerlink" title="创建角色（树形结构组件）"></a>创建角色（树形结构组件）</h3><p>创建角色的modal要携带菜单数据<br>实现新建用户的请求，要拿到mentList数据<br>在element组件库&#x2F;树形控件<strong>往下翻有非常多的事件</strong>，用cheak事件<br>在el-tree里绑定<code>          @check=&quot;handleElTreeCheck&quot;</code><br>先看看里面的两个参数是什么</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleElTreeCheck</span>(<span class="params"><span class="attr">data1</span>: <span class="built_in">any</span>, <span class="attr">data2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击了复选框，两个数据&#x27;</span>, data1, data2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/role2.png" alt="获取多级菜单"><br>data1是点击的节点的信息（id,url,name,sort,type）<br>data2：checkedKeys点击节点的id；halfCheckedKeys半选是它父节点的id；halfCheckedNodes它父节点的对象<br>看结果得知，通过<code>checkedKeys</code>和<code>halfCheckedKeys</code>可以得到选择的菜单项的id<br> modal组件增加<code>otherInfo?: any</code><br> <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IModalProps</span> &#123;</span><br><span class="line">  <span class="attr">modalConfig</span>: &#123;</span><br><span class="line">    <span class="attr">pageName</span>: <span class="built_in">string</span></span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">      <span class="attr">newTitle</span>: <span class="built_in">string</span></span><br><span class="line">      <span class="attr">editTitle</span>: <span class="built_in">string</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">formItems</span>: <span class="built_in">any</span>[]</span><br><span class="line">  &#125;</span><br><span class="line">  otherInfo?: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br> role.vue中绑定<code>otherInfo</code><br> <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">const</span> otherInfo = <span class="title function_">ref</span>(&#123;&#125;)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleElTreeCheck</span>(<span class="params"><span class="attr">data1</span>: <span class="built_in">any</span>, <span class="attr">data2</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> menuList = [...data2.<span class="property">checkedKeys</span>, ...data2.<span class="property">halfCheckedKeys</span>]</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data2.<span class="property">checkedKeys</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(menuList)</span><br><span class="line">    otherInfo.<span class="property">value</span> = &#123; menuList &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br> <img src="/postImgs/nievtcms/role3.png" alt="获取多级菜单"><br> 把数据绑定给<code>page-modal</code>组件:<code>:other-info=&quot;otherInfo&quot; </code><br> <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">page-modal</span> <span class="attr">:modal-config</span>=<span class="string">&quot;modalConfig&quot;</span> <span class="attr">:other-info</span>=<span class="string">&quot;otherInfo&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;modalRef&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">menulist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tree</span></span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">&quot;treeRef&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">&quot;entireMenus&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-checkbox</span></span></span><br><span class="line"><span class="tag">      <span class="attr">node-key</span>=<span class="string">&quot;id&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:props</span>=<span class="string">&quot;&#123; children: &#x27;children&#x27;, label: &#x27;name&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">check</span>=<span class="string">&quot;handleElTreeCheck&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">page-modal</span>&gt;</span></span><br></pre></td></tr></table></figure><br>现在modal接收到了菜单数据，发送前进行判断otherInfo数据，有的话合并进去</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">handleConfirmClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">  dialogVisible.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> infoData = formData</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">otherInfo</span>) &#123;</span><br><span class="line">    infoData = &#123; ...infoData, ...props.<span class="property">otherInfo</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!isNewRef.<span class="property">value</span> &amp;&amp; editData.<span class="property">value</span>) &#123;</span><br><span class="line">    <span class="comment">// 编辑用户的数据</span></span><br><span class="line">    systemStore.<span class="title function_">editPageDataAction</span>(props.<span class="property">modalConfig</span>.<span class="property">pageName</span>, editData.<span class="property">value</span>.<span class="property">id</span>, infoData)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 创建新的部门</span></span><br><span class="line">    systemStore.<span class="title function_">newPageDataAction</span>(props.<span class="property">modalConfig</span>.<span class="property">pageName</span>, infoData)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>新建角色成功<br> <img src="/postImgs/nievtcms/role4.png" alt="获取多级菜单"></p>
<h3 id="编辑角色（递归获取最底层id，菜单回显）"><a href="#编辑角色（递归获取最底层id，菜单回显）" class="headerlink" title="编辑角色（递归获取最底层id，菜单回显）"></a>编辑角色（递归获取最底层id，菜单回显）</h3><ol>
<li>思路<br>点击编辑按钮，弹出的modal对话框需要已经勾选了这个角色原来的菜单子菜单信息，这部分获取信息的操作之前封装在hooks&#x2F;usePageModal.ts中<br>还是官方文档，树形结构&#x2F;事件有<code>.setCheckedKeys()</code>方法，把菜单对应的id数组放进去可以展示</li>
<li>封装获取id工具<br>现在返回的数据是嵌套关系的，封装一个工具用来把里面的id取出来<code>utils/map-menys.ts</code>文件<br>目标是找到最底层的菜单对应的id，不要父菜单的id，因为选中父菜单的id会自动把它的子菜单全部选中<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 菜单映射到id的列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> <span class="variable">menuList</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mapMenuListToIds</span>(<span class="params"><span class="attr">menuList</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">//要拿到所有的id组合的数组</span></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">ids</span>: <span class="built_in">number</span>[] = []</span><br><span class="line">  <span class="comment">//递归获取id</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">recurseGetId</span>(<span class="params"><span class="attr">menus</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> menus) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.<span class="property">children</span>) &#123;</span><br><span class="line">        <span class="comment">//如果遍历的有子菜单，那么再遍历一次</span></span><br><span class="line">        <span class="title function_">recurseGetId</span>(item.<span class="property">children</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//如果遍历的没有子菜单，进入了最底部的id，把最底部的id取出来</span></span><br><span class="line">        <span class="comment">//目标是找到最底层的菜单对应的id，不要父菜单的id，</span></span><br><span class="line">        <span class="comment">//因为选中父菜单的id会自动把它的子菜单全部选中</span></span><br><span class="line">        ids.<span class="title function_">push</span>(item.<span class="property">id</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">recurseGetId</span>(menuList)</span><br><span class="line">  <span class="keyword">return</span> ids</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>父组件调用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMenuListToIds &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/map-menus&#x27;</span></span><br><span class="line"><span class="keyword">const</span> treeRef = ref&lt;<span class="title class_">InstanceType</span>&lt;<span class="keyword">typeof</span> <span class="title class_">ElTree</span>&gt;&gt;()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">editCallback</span>(<span class="params"><span class="attr">itemData</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">  <span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> menuIds = <span class="title function_">mapMenuListToIds</span>(itemData.<span class="property">menuList</span>)</span><br><span class="line">    treeRef.<span class="property">value</span>?.<span class="title function_">setCheckedKeys</span>(menuIds)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>nextTick()是Vue3提供的一个方法，用于等待DOM更新完成，然后执行回调函数<br>以下内容来自官方文档<br>等待下一次 DOM 更新刷新的工具方法<br>当你在 Vue 中更改响应式状态时，最终的 DOM 更新并不是同步生效的，而是由 Vue 将它们缓存在一个队列中，直到下一个“tick”才一起执行。这样是为了确保每个组件无论发生多少状态改变，都仅执行一次更新。<br>nextTick() 可以在状态改变后立即使用，以等待 DOM 更新完成。你可以传递一个回调函数作为参数，或者 await 返回的 Promise。</p>
</blockquote>
</li>
<li>成功回显截图<br> <img src="/postImgs/nievtcms/role5.png" alt="获取多级菜单"></li>
</ol>
<h1 id="按钮权限管理"><a href="#按钮权限管理" class="headerlink" title="按钮权限管理"></a>按钮权限管理</h1><p>对页面中核心的增删改查功能进行权限管理</p>
<h2 id="按钮权限在哪里"><a href="#按钮权限在哪里" class="headerlink" title="按钮权限在哪里"></a>按钮权限在哪里</h2><p>关于增删改查操作的权限在菜单管理里面有对应的字段，”角色管理”可以对角色拥有的权限进行管理<br> <img src="/postImgs/nievtcms/quanxian1.png" alt="用户权限"><br>在请求userMenus数据时，已经包含了按钮权限数据<br>在第三级数据里<code>permission</code>字段，通过这个判断是有按钮权限<br> <img src="/postImgs/nievtcms/quanxian2.png" alt="用户权限"></p>
<h2 id="获取用户按钮权限数据保存到store中"><a href="#获取用户按钮权限数据保存到store中" class="headerlink" title="获取用户按钮权限数据保存到store中"></a>获取用户按钮权限数据保存到store中</h2><ol>
<li>在登录仓库中添加字段，调用方法<br>在获取userMents菜单信息的地方<code>store/login/login.ts</code>里，去获取登录用户的所有按钮权限数据，放到<code>permissions[]</code>数组里，在store中添加permissions字段，下面这两段不光在用户登录之后触发，在刷新之后也应该触发<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//9.按钮权限</span></span><br><span class="line"><span class="keyword">const</span> permissions = <span class="title function_">mapMenusToPermissions</span>(userMenusData)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">permissions</span> = permissions</span><br></pre></td></tr></table></figure></li>
<li>封装映射关系方法<br>从userMenus里映射出permission，也是一种映射关系，<code>mapMenusToPermissions</code>方法也放utils&#x2F;map-menus.ts里<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从菜单里映射出按钮的权限</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> menuList 菜单的列表</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> 按钮权限的数组(字符串数组)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">mapMenusToPermissions</span>(<span class="params"><span class="attr">menuList</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">permissions</span>: <span class="built_in">string</span>[] = []</span><br><span class="line">  <span class="comment">//用递归，遍历传进来的menus</span></span><br><span class="line">  <span class="comment">//在storage保存的json数据中，有关按钮权限的数据type=3</span></span><br><span class="line">  <span class="comment">//所以，在递归函数中，判断type=3，就push到permissions中</span></span><br><span class="line">  <span class="comment">//如果不是第三级，那么可能是第一级可能第二级，拿出来继续做递归</span></span><br><span class="line">  <span class="comment">//有的只有第二层，没有第三层，再找children为null</span></span><br><span class="line">  <span class="comment">//此时const item of null会报错，所以如果没有chidren用空数组代替</span></span><br><span class="line">  <span class="comment">//const item of [] 什么都不会做，相当于不遍历直接结束循环，不会报错</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">recurseGetPermission</span>(<span class="params"><span class="attr">menus</span>: <span class="built_in">any</span>[]</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> menus) &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.<span class="property">type</span> === <span class="number">3</span>) &#123;</span><br><span class="line">        permissions.<span class="title function_">push</span>(item.<span class="property">permission</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">recurseGetPermission</span>(item.<span class="property">children</span> ?? [])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">recurseGetPermission</span>(menuList)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> permissions</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>成功截图<br>看仓库，已经成功获取到了用户按钮权限信息<br><img src="/postImgs/nievtcms/quanxian3.png" alt="用户权限"></li>
</ol>
<h2 id="页面权限校验"><a href="#页面权限校验" class="headerlink" title="页面权限校验"></a>页面权限校验</h2><ol>
<li>content组件中判断<br>由于增删改都在page-content组件中，去这里判断<br>在一进入page-content组件时，判断当前的用户有没有增删改查四个权限,用v-if对应的布尔值判断是否展示对应的按钮，比如：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;el-button v-if=&quot;isCreate&quot; type=&quot;primary&quot; @click=&quot;handleNewUserClick&quot;&gt;&#123;&#123;contentConfig?.listHeader?.btnTitle ?? &#x27;新增数据&#x27;</span><br><span class="line">&#125;&#125;&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>
如果编辑和删除都没有，那么整个列都不展示<br>对于查询操作，如果没有就不进行请求方法<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4.定义函数, 用于发送网络请求</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchPageListData</span>(<span class="params"><span class="attr">formData</span>: <span class="built_in">any</span> = &#123;&#125;</span>) &#123;</span><br><span class="line">  <span class="comment">//判断有没有查询权限，没有直接return，不展示数据</span></span><br><span class="line">  <span class="keyword">if</span>(!isQuery) <span class="keyword">return</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure></li>
<li>动态获取权限，抽hooks<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> loginStore = <span class="title function_">useLoginStore</span>()</span><br><span class="line"><span class="keyword">const</span> &#123;permissions&#125; = loginStore</span><br><span class="line"><span class="keyword">const</span> isCreate =permissions.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>)=&gt;</span>item.<span class="title function_">includes</span>($&#123;props.<span class="property">contentConfig</span>.<span class="property">pageName</span>&#125;:create))</span><br><span class="line">....</span><br></pre></td></tr></table></figure>
把这部分抽取出一个hook，usePermissions.ts<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useLoginStore <span class="keyword">from</span> <span class="string">&#x27;@/store/login/login&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">usePermissions</span>(<span class="params"><span class="attr">permissionID</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> loginStore = <span class="title function_">useLoginStore</span>()</span><br><span class="line">  <span class="keyword">const</span> &#123; permissions &#125; = loginStore</span><br><span class="line">  <span class="comment">//注意这里哦，想要发挥的一定是一个布尔类型</span></span><br><span class="line">  <span class="comment">//第一种方法</span></span><br><span class="line">  <span class="comment">//return Boolean(permissions.find((item) =&gt; item.includes(permissionID)))</span></span><br><span class="line">  <span class="comment">// 第二种方法：</span></span><br><span class="line">  <span class="comment">//两个感叹号，第一个感叹号取反，第二个再取反，转回对应的boolean类型</span></span><br><span class="line">  <span class="keyword">return</span> !!permissions.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="title function_">includes</span>(permissionID))</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> usePermissions</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>content.vue页面调用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> usePermissions <span class="keyword">from</span> <span class="string">&#x27;@/hooks/usePermissions&#x27;</span></span><br><span class="line"><span class="keyword">const</span> isCreate = <span class="title function_">usePermissions</span>(<span class="string">`<span class="subst">$&#123;props.contentConfig.pageName&#125;</span>:create`</span>)</span><br><span class="line"><span class="keyword">const</span> isDelete = <span class="title function_">usePermissions</span>(<span class="string">`<span class="subst">$&#123;props.contentConfig.pageName&#125;</span>:delete`</span>)</span><br><span class="line"><span class="keyword">const</span> isUpdate = <span class="title function_">usePermissions</span>(<span class="string">`<span class="subst">$&#123;props.contentConfig.pageName&#125;</span>:update`</span>)</span><br><span class="line"><span class="keyword">const</span> isQuery = <span class="title function_">usePermissions</span>(<span class="string">`<span class="subst">$&#123;props.contentConfig.pageName&#125;</span>:query`</span>)</span><br></pre></td></tr></table></figure></li>
<li>search组件中判断<br>思路一样，<code>const isQuery = usePermissions(`$&#123;props.searchConfig.pageName&#125;:query`)</code>，<code>&lt;div class=&quot;search&quot; v-if=&quot;isQuery&quot;&gt;</code></li>
</ol>
<h1 id="数据可视化页面"><a href="#数据可视化页面" class="headerlink" title="数据可视化页面"></a>数据可视化页面</h1><ol>
<li>先死数据写出样子，再封装组件，再放真实数据<br>  放在views&#x2F;main&#x2F;analysys&#x2F;dashboard&#x2F;dashboard。vue为父组件，analysys&#x2F;dashboard&#x2F;c-cpns&#x2F;下是页面的上下部分两个子组件</li>
</ol>
<ul>
<li>数据展示：递增动画实现方式：<br>1.countup: 数字增加动画库（比较轻量级）<br>2.专门的一些动画库: gsap（没有上面的轻量，如果需要多种动画效果再引入这个用）</li>
<li>鼠标放到右上角小图标上，能展示文字提示的气泡，用element-plus的反馈组件&#x2F;Tooltip文字提示组件<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;count-card&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>商品总销量<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-tooltip</span> <span class="attr">content</span>=<span class="string">&quot;所有商品的总销量&quot;</span><span class="attr">placement</span>=<span class="string">&quot;top&quot;</span> <span class="attr">effec</span>=<span class="string">&quot;light&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span><span class="tag">&lt;<span class="name">Warning</span> /&gt;</span><span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li>从后端拿到数据<br>service&#x2F;main&#x2F;analysys&#x2F;analysis.ts<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hyRequest <span class="keyword">from</span> <span class="string">&#x27;@/service&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getAmountListData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> hyRequest.<span class="title function_">get</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/goods/amount/list&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
专门放一个store管理这部分数据<br>store&#x2F;main&#x2F;analysys&#x2F;analysis.ts<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IAnalysisState</span> &#123;</span><br><span class="line">  <span class="attr">amountList</span>: <span class="built_in">any</span>[]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> useAnalysisStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;analysis&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: ():<span class="function"><span class="params">IAnalysisState</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">amountList</span>: <span class="built_in">any</span>[]</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">   <span class="keyword">async</span> <span class="title function_">fetchAnalysisDataAction</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> amountResult = <span class="keyword">await</span> <span class="title function_">getAmountListData</span>()</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">amountList</span> = amountResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useAnalysisStore</span><br><span class="line"></span><br></pre></td></tr></table></figure>
dashboard.vue<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> useAnalysisStore <span class="keyword">from</span> <span class="string">&#x27;@/store/main/analysis/analysis&#x27;</span></span><br><span class="line"><span class="comment">// 一进页面发起数据的请求，数据保存到了store中</span></span><br><span class="line"><span class="keyword">const</span> analysisStore = <span class="title function_">useAnalysisStore</span>()</span><br><span class="line">analysisStore.<span class="title function_">fetchAnalysisDataAction</span>()</span><br><span class="line"><span class="comment">//从store中拿到数据,用storeToRefs变成响应式数据</span></span><br><span class="line"><span class="keyword">const</span> &#123; amountList &#125; = <span class="title function_">storeToRefs</span>(analysisStore)</span><br></pre></td></tr></table></figure></li>
<li>给组件使用数据<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.顶部数字的数据展示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-row</span> <span class="attr">:gutter</span>=<span class="string">&quot;10&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in amountList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.amount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span> <span class="attr">:xs</span>=<span class="string">&quot;24&quot;</span> <span class="attr">:sm</span>=<span class="string">&quot;12&quot;</span> <span class="attr">:md</span>=<span class="string">&quot;8&quot;</span> <span class="attr">:lg</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 用v-bind的前提是json格式的数据和组件属性名保持一致 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">count-card</span> <span class="attr">v-bind</span>=<span class="string">&quot;item&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="数据增长动画"><a href="#数据增长动画" class="headerlink" title="数据增长动画"></a>数据增长动画</h2><ol>
<li><p>引入countup库<br><code>pnpm install countup.js</code><br> <code>pnpm add countup.js</code><br><a href="https://inorganik.github.io/countUp.js/">CountUp.js库</a></p>
</li>
<li><p>使用库<br>从库中拿到类，创建实例对象<br><code>countUp()</code>方法:接收2-3个参数，参数一为执行动画的元素，参数二为结束数字，参数三为配置项（如startVal开始数字参数，perfix前缀参数）<br>dashboard.vue</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">ref</span>=<span class="string">&quot;count1Ref&quot;</span>&gt;</span>&#123;&#123;number1&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> count1Ref = ref&lt;<span class="title class_">HTMLelement</span>&gt;()</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//加感叹号非空断言，表示值一定不为空</span></span><br><span class="line"><span class="keyword">const</span> countUp1 = <span class="keyword">new</span> <span class="title class_">CountUp</span>(count1Ref.<span class="property">value</span>!,props.<span class="property">number1</span>, &#123;</span><br><span class="line">  <span class="attr">startVal</span>:<span class="number">10000</span></span><br><span class="line">&#125;)</span><br><span class="line">countUp1.<span class="title function_">start</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>添加人民币符号（灵活）<br>添加一个销售额属性，当数字为销售额，添加人民币符号<br>CountUp()第三个参数中，有增加前缀的参数</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> countOption = &#123;</span><br><span class="line">  <span class="attr">prefix</span>: props.<span class="property">amount</span> === <span class="string">&#x27;saleroom&#x27;</span> ? <span class="string">&#x27;¥&#x27;</span> : <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> countup1 = <span class="keyword">new</span> <span class="title class_">CountUp</span>(count1Ref.<span class="property">value</span>!, props.<span class="property">number1</span>, countOption)</span><br><span class="line">  <span class="keyword">const</span> countup2 = <span class="keyword">new</span> <span class="title class_">CountUp</span>(count2Ref.<span class="property">value</span>!, props.<span class="property">number2</span>, countOption)</span><br><span class="line">  countup1.<span class="title function_">start</span>()</span><br><span class="line">  countup2.<span class="title function_">start</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>卡片展示效果<br>希望每部分数据都在一个单独的卡片上<br>element组件库&#x2F;数据展示&#x2F;卡片&#x2F;基础用法就够了 </p>
</li>
<li><p>成功截图<br><img src="/postImgs/nievtcms/look1.png" alt="数字动态可视化展示"></p>
</li>
</ol>
<h2 id="EChart图表展示"><a href="#EChart图表展示" class="headerlink" title="EChart图表展示"></a>EChart图表展示</h2><ol>
<li>在项目里集成ECharts,</li>
<li>导入 import * as  echarts from ‘echarts’,</li>
<li>echarts.init()初始化echarts实例</li>
<li>然后写配置Options，宽度默认 百分之百，一定要 自己添加高度</li>
</ol>
<h3 id="三层封装"><a href="#三层封装" class="headerlink" title="三层封装"></a>三层封装</h3><ol>
<li>封装page-echarts文件夹，&#x2F;src&#x2F;base-echart（第一层封装）</li>
<li>进行抽取，不同类型的echarts图表封装不同的子组件<br>比如饼图pie-echarts（第二层封装 ），在里面引入baseEchart<br>把整个配置文件options从base-echarts抽取出去，让别的组件（比如pie-echart）往里传<br>类型报错处理：<br><img src="/postImgs/nievtcms/look4.png" alt="EChart类型报错处理"><br>直接<code>&lt;base-echart :option=&quot;option&quot;/&gt;</code> 会报”option”类型错误，需要进行<code>import type&#123; EChartsOption&#125; from &#39;echarts&#39;</code><br>再给option明确指定类型<br><code>const option: EChartsOption=&#123;配置项&#125;</code></li>
<li>第三层封装－－抽离数据：把数据传入第二层封装的options里<br><strong>数据从service里面拿到，然后放到store里，再传到页面，页面再传递给它调用的组件里</strong><br>完善：刚开始数据是空的，后续拿到数据，数据会变化，所以用计算属性<code>const options = computed&lt;&gt;(()=&gt;&#123;&#125;)</code>这样可以拿到最新的数据<br>数据更新后，也要重新进行setOption<br><strong>使用watchEffect()监听</strong>,在setOption外面包裹即可<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="title function_">watchEffect</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">echartInstance.<span class="title function_">setOption</span>(props.<span class="property">option</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><p>一共用到五种echart图标，每一种封装一个组件components&#x2F;page-echarts&#x2F;src&#x2F;<br><img src="/postImgs/nievtcms/look2.png" alt="EChart图表展示"><br><img src="/postImgs/nievtcms/look3.png" alt="EChart图表展示"></p>
]]></content>
      <categories>
        <category>vue</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>项目</tag>
      </tags>
  </entry>
  <entry>
    <title>浏览器--学习笔记</title>
    <url>/2025/03/25/28-browser/</url>
    <content><![CDATA[<h1 id="写在前面："><a href="#写在前面：" class="headerlink" title="写在前面："></a>写在前面：</h1><p>本文内容大部分来自deepseek、通义和Kimi助手的回答<br><strong>强烈推荐！！这个视频特别棒！！：</strong><br><a href="https://www.bilibili.com/video/BV1x54y1B7RE/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750">B站卢克儿的视频：【干货】浏览器是如何运作的</a><br>AI推荐的相关网站：<br><a href="https://caniuse.com/">Can I Use：查询特性支持度</a><br><a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Page_structures/Compatibility_tables">MDN Compatibility Tables</a><br><a href="https://modernizr.com/">Modernizr：特性检测库</a><br>关于浏览器常见兼容性问题的文章：<br><a href="https://blog.csdn.net/weixin_43638968/article/details/109177674?fromshare=blogdetail&sharetype=blogdetail&sharerId=109177674&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link">csdn田兴的文章–前端常见浏览器兼容性问题解决方案</a></p>
<h1 id="浏览器是如何工作的"><a href="#浏览器是如何工作的" class="headerlink" title="浏览器是如何工作的"></a>浏览器是如何工作的</h1><h2 id="浏览器解析流程："><a href="#浏览器解析流程：" class="headerlink" title="浏览器解析流程："></a>浏览器解析流程：</h2><ol>
<li>输入与解析 URL<br>浏览器解析 URL，确定协议（如 HTTP&#x2F;HTTPS）、域名、端口和路径等组成部分。</li>
<li>检查缓存<br>缓存查询：浏览器检查本地缓存，看是否有该资源的副本。、<br>使用缓存：如果缓存命中且资源未过期，直接使用缓存内容，跳过后续步骤。</li>
<li>DNS查找：<br>将域名转换为IP地址。它会查询DNS服务器来获取这个信息。<br>查询过程：检查浏览器缓存。查询本地 hosts 文件。向本地 DNS 服务器发起请求。若本地 DNS 服务器无结果，逐级向根域名服务器、顶级域名服务器和权威域名服务器查询。</li>
<li>建立连接：<br>通过TCP三次握手与服务器建立连接，如果是HTTPS还需要进行SSL&#x2F;TLS握手以确保安全传输。<br>三次握手：<br>浏览器发送 SYN 包到服务器，请求建立连接。<br>服务器回复 SYN-ACK 包，确认连接请求。<br>浏览器发送 ACK 包，完成连接建立</li>
<li>发送HTTP请求：<br>构建请求：浏览器构造 HTTP 请求，包含请求方法（如 GET）、请求头（User-Agent、Cookie 等）和请求体。<br>发送请求：通过已建立的 TCP 连接，将 HTTP 请求发送到服务器。</li>
<li>服务器处理请求：<br>服务器处理请求后返回HTTP响应，包括状态码和实际的网页内容（通常是HTML文档）。<br>  解析HTML：<br>接收请求：服务器接收并解析 HTTP 请求。<br>处理请求：<br>静态资源：直接返回请求的文件（如 HTML、CSS、JavaScript、图片等）。<br>动态资源：执行相应的程序（如 PHP、Python、Node.js），生成响应内容（如 HTML）。<br>构建响应：服务器生成 HTTP 响应，包含状态码（如 200 OK）、响应头和响应体。</li>
<li>接收并处理响应<br>接收响应：浏览器接收服务器的 HTTP 响应。<br>解析响应：<br>解析 HTML：构建 DOM 树，表示页面的结构。<br>解析 CSS：构建 CSSOM 树，确定样式规则。<br>构建渲染树：结合 DOM 树和 CSSOM 树，生成渲染树，包含需要显示的元素及其样式。</li>
<li>加载资源：<br>在构建DOM的同时，如果遇到外部资源链接（如CSS、JavaScript文件或图片等），浏览器会异步发起新的HTTP请求去下载这些资源。</li>
<li>解析CSS：<br>对于CSS，浏览器会创建CSSOM树，这是一个包含了所有样式规则的对象模型。<br>解决冲突：通过优先级（!important &gt; 内联 &gt; ID &gt; Class &gt; 标签）确定最终样式</li>
<li>执行JavaScript：<br>当浏览器遇到<code>&lt;script&gt;</code>标签时，它会暂停HTML解析，转而执行JavaScript代码。这是因为JavaScript可能会影响DOM或CSSOM。</li>
<li>构建渲染树：<br>把DOM树和CSSOM树合并，浏览器构建渲染树，这是一个只包含需要显示元素（隐藏元素如 display: none 会被排除）的信息的树形结构，得到一个得到带样式和结构的渲染树</li>
<li>布局：<br>计算每个元素在屏幕上的确切位置和大小，这一过程称为“布局”或者“重排”。</li>
<li>绘制上色（Paint）：<br>根据布局的结果，浏览器将元素绘制到屏幕上（把布局信息转换成屏幕上的像素），这一过程称为“绘制”。</li>
<li>合成显示（Composite）：<br>将所有图层按正确顺序合成最终图像（如果页面有多个图层，浏览器会将它们合并成一个图像），然后呈现给用户<br>优化技巧：使用 transform 和 opacity 动画可跳过布局和绘制，直接合成</li>
</ol>
<h3 id="浏览器是如何渲染UI的："><a href="#浏览器是如何渲染UI的：" class="headerlink" title="浏览器是如何渲染UI的："></a>浏览器是如何渲染UI的：</h3><p>浏览器获取HTML文件，然后对文件进行解析，形成DOM Tree<br>与此同时，进行CSS解析，生成Style Rules<br>接着将DOM Tree与Style Rules合成为 Render Tree<br>接着进入布局（Layout）阶段，也就是为每个节点分配一个应出现在屏幕上的确切坐标<br>随后调用GPU进行绘制（Paint），遍历Render Tree的节点，并将元素呈现出来<br><img src="/postImgs/tm/llq01.png" alt="浏览器是如何渲染IU的"></p>
<h2 id="浏览器缓存策略"><a href="#浏览器缓存策略" class="headerlink" title="浏览器缓存策略"></a>浏览器缓存策略</h2><h3 id="浏览器缓存的工作流程"><a href="#浏览器缓存的工作流程" class="headerlink" title="浏览器缓存的工作流程"></a>浏览器缓存的工作流程</h3><p>首次请求：服务器<strong>返回资源及缓存策略</strong>（强缓存 &#x2F; 协商缓存参数）<br>再次请求：<br>先检查强缓存是否有效，若有效则直接使用缓存（状态码200 (from cache)）<br>若强缓存失效，发送协商缓存请求头（If-Modified-Since&#x2F;If-None-Match）到服务器。<br>服务器验证后，若资源未更新，返回304，浏览器使用缓存；若更新，协商缓存失效，返回新资源</p>
<h3 id="强缓存和协商缓存"><a href="#强缓存和协商缓存" class="headerlink" title="强缓存和协商缓存"></a>强缓存和协商缓存</h3><ol>
<li><p>强缓存（本地缓存）<br>浏览器直接读取本地缓存，不与服务器交互，状态码为200</p>
<blockquote>
<p>关键响应头：<br>Expires：资源过期时间（绝对时间戳），若未过期则直接读取缓存<br>Cache-Control（优先级高于Expires）：<br>max-age&#x3D;秒数：资源在多少秒内有效，如max-age&#x3D;3600表示  小时内缓存有效。<br>public：资源可被客户端和代理服务器缓存<br>private：资源仅可被客户端缓存<br>no-cache：并非不缓存，而是需要经过协商缓存验证<br>no-store：禁止任何形式的缓存，每次请求都从服务器获取</p>
</blockquote>
</li>
<li><p>协商缓存（服务器验证）<br>浏览器向服务器发送验证请求，验证资源是否更新，状态码为304，若未更新则使用缓存</p>
<blockquote>
<p>关键响应头：<br>第一次请求时服务器返回：<br>Last-Modified：资源最后修改时间。<br>ETag：资源的唯一标识（如文件哈希值）。<br>后续请求时浏览器发送：<br>If-Modified-Since：携带Last-Modified的值，询问服务器资源是否修改。<br>If-None-Match：携带ETag的值，询问服务器资源是否变更</p>
</blockquote>
</li>
</ol>
<p>  服务器响应：<br>  若资源未更新，返回304 Not Modified，浏览器使用本地缓存<br>  若资源更新，返回200 OK及新资源内容</p>
<h3 id="缓存策略的选择场景"><a href="#缓存策略的选择场景" class="headerlink" title="缓存策略的选择场景"></a>缓存策略的选择场景</h3><p>强缓存适合：<br>静态资源（如图片、CSS、JS），版本稳定，更新频率低。<br>可设置max-age为较长时间（如 1 周），并通过 URL 版本号控制更新。<br>协商缓存适合：<br>动态数据（如用户信息页面），或更新频率较高但需缓存的资源。<br>避免强缓存导致数据过期，通过协商缓存确保数据时效性。</p>
<h3 id="Cache-Control有哪些常用值"><a href="#Cache-Control有哪些常用值" class="headerlink" title="Cache-Control有哪些常用值"></a>Cache-Control有哪些常用值</h3><p>max-age&#x3D;N：资源在 N 秒内有效，过期后需重新验证。<br>public：资源可被客户端和代理服务器缓存（如 CDN）。<br>private：资源仅客户端可缓存，代理服务器不可缓存（如用户登录信息）。<br>no-cache：强制浏览器发送协商请求到服务器，验证资源是否更新。<br>no-store：禁止任何缓存，每次请求都从服务器获取（如敏感数据）。</p>
<h3 id="ETag相比Last-Modified有什么优势？"><a href="#ETag相比Last-Modified有什么优势？" class="headerlink" title="ETag相比Last-Modified有什么优势？"></a>ETag相比Last-Modified有什么优势？</h3><blockquote>
<p>Last-Modified：资源最后修改时间。<br>ETag：资源的唯一标识（如文件哈希值</p>
</blockquote>
<ol>
<li>Last-Modified有局限性：<br>只能精确到秒级，若资源在 1 秒内多次修改，无法识别<br>服务器时间同步问题可能导致判断不准</li>
<li>ETag的优势：<br>基于文件内容生成哈希值，更精准判断资源是否变更<br>可解决Last-Modified的时间精度问题和服务器时间不一致问题</li>
</ol>
<h2 id="http和https"><a href="#http和https" class="headerlink" title="http和https"></a>http和https</h2><p>HTTP和HTTPS是两种用于在互联网上传输网页数据的协议。它们的主要区别在于安全性、连接方式、端口使用以及证书申请等方面</p>
<ol>
<li>安全性</li>
</ol>
<ul>
<li>HTTP 是一种明文传输协议，这意味着所有通过 HTTP 发送的数据都是未加密的，可以被任何能够访问网络流量的人轻易读取或修改。因此，HTTP 不适合用于传输敏感信息，如登录凭证、支付信息等 1。</li>
<li>HTTPS 则是在 HTTP 基础上加入了 SSL&#x2F;TLS 层，为浏览器和服务器之间的通信提供了加密。这确保了即使有人截获了通信内容，也无法直接读取或篡改这些信息。HTTPS 通过数字证书机制来验证服务器的身份，防止中间人攻击</li>
</ul>
<ol start="2">
<li>连接方式</li>
</ol>
<ul>
<li>HTTP 的连接非常简单且无状态，这意味着每次请求都是独立的，不会保存之前请求的状态信息</li>
<li>HTTPS 需要先建立一个安全的 SSL&#x2F;TLS 连接，然后才能进行加密的数据传输。这个过程包括客户端与服务器之间的一系列握手操作，以确定双方使用的加密算法并交换密钥</li>
</ul>
<ol start="3">
<li>端口使用</li>
</ol>
<ul>
<li>HTTP 默认使用的是80端口进行通信</li>
<li>HTTPS 使用的是443端口，默认情况下，当您看到网址前缀是“https:&#x2F;&#x2F;”时，表示该网站支持HTTPS，并默认尝试通过443端口进行通信</li>
</ul>
<ol start="4">
<li>证书申请</li>
</ol>
<ul>
<li>HTTP 不需要任何证书即可工作。</li>
<li>HTTPS 需要向证书颁发机构（CA）申请SSL证书。虽然存在一些免费证书选项，但通常情况下，获取受信任的证书需要一定的费用。</li>
</ul>
<ol start="5">
<li>性能考虑</li>
</ol>
<ul>
<li>虽然 HTTPS 提供了更高的安全性，但这也意味着额外的计算资源消耗，尤其是在初始建立安全连接时的SSL&#x2F;TLS握手过程中。然而，现代硬件和优化过的加密算法已经大大减少了这种性能开销</li>
</ul>
<ol start="6">
<li>SEO影响</li>
</ol>
<ul>
<li>搜索引擎更倾向于推荐使用 HTTPS 的网站，因为它们提供了更好的用户体验和更高的安全性。实际上，Google已经明确表示会给予 HTTPS 网站一定的排名优势</li>
</ul>
<ol start="7">
<li><strong>总结：</strong><br><strong>HTTPS 相较于 HTTP 提供了显著的安全增强，包括数据加密、身份验证和完整性保护，使得它成为处理敏感信息的标准选择。随着对网络安全重视程度的增加，越来越多的网站正在迁移到 HTTPS 协议。</strong></li>
</ol>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="GET和POST的区别"><a href="#GET和POST的区别" class="headerlink" title="GET和POST的区别"></a>GET和POST的区别</h2><ol>
<li><strong>语义与设计目的</strong>：  <ul>
<li>GET 是<strong>获取资源</strong>的请求，它是幂等的，多次执行不会改变服务器状态，比如加载页面、查询数据。  </li>
<li>POST 是<strong>提交数据</strong>的请求，它是非幂等的，多次提交可能产生不同结果，比如提交表单、创建订单。</li>
</ul>
</li>
<li><strong>参数传递方式</strong>：  <ul>
<li>GET 的参数通过 <strong>URL 的查询字符串（Query String）</strong> 传递，比如 <code>?name=John&amp;age=20</code>。参数可见，长度受浏览器 URL 限制（一般不超过 8KB）。  </li>
<li>POST 的参数通过 <strong>请求体（Request Body）</strong> 传递，支持更大数据量（如上传文件），且不会直接暴露在 URL 中。</li>
</ul>
</li>
<li><strong>安全性</strong>：  <ul>
<li>GET 的参数在 URL 中可见，可能被浏览器历史记录、服务器日志留存，不适合传递敏感信息（如密码）。  </li>
<li>POST 的参数在请求体中，安全性稍好，但如果未使用 HTTPS，两者都可能被中间人窃取。</li>
</ul>
</li>
<li><strong>浏览器行为差异</strong>：  <ul>
<li>GET 请求可以被<strong>缓存</strong>和<strong>书签保存</strong>，比如重复访问同一 URL 时可能直接命中缓存；get请求可以通过点击后退或刷新按钮重复执行。</li>
<li>POST 请求默认不缓存，且浏览器在刷新时可能会提示是否重新提交数据（防止重复操作）。</li>
</ul>
</li>
<li><strong>实际应用场景</strong>：  <ul>
<li><strong>用 GET 的场景</strong>：搜索关键词、分页加载、获取静态资源（利用缓存优化性能）。  </li>
<li><strong>用 POST 的场景</strong>：用户登录注册（提交密码）、支付、下单（防止重复提交）、上传文件（大数据传输）。</li>
</ul>
</li>
<li><strong>补充细节</strong>：</li>
</ol>
<ul>
<li><strong>RESTful API 规范</strong>：GET 对应查询（Read），POST 对应新增（Create）。  </li>
<li><strong>幂等性</strong>：GET 的幂等性决定了它不应修改数据，否则可能导致缓存和爬虫的副作用。  </li>
<li><strong>编码格式</strong>：POST 支持更多格式（如 JSON），需通过 <code>Content-Type</code> 指定，而 GET 只能是 URL 编码。<br>编码格式</li>
<li><strong>GET</strong>：参数默认使用 URL 编码（空格转 <code>%20</code>，中文转 UTF-8 等）。  </li>
<li><strong>POST</strong>：支持多种编码格式，需通过 <code>Content-Type</code> 指定<br>等性与副作用</li>
<li><strong>GET</strong>：幂等操作（多次执行结果相同，无副作用）。  <ul>
<li>设计 API 时应确保 GET 请求不修改服务器状态。</li>
</ul>
</li>
<li><strong>POST</strong>：非幂等操作（每次提交可能产生新资源或修改数据）。  <ul>
<li>示例：多次提交同一表单可能生成多个订单</li>
</ul>
</li>
</ul>
<p><strong>总结</strong>：<br>“简单来说，GET 和 POST 的核心区别在于语义和用途，而不是简单的‘谁更安全’。作为前端开发者，我会根据业务需求（如数据敏感性、幂等性要求）和浏览器特性（如缓存、URL 长度限制）选择合适的方法。</p>
<blockquote>
<p>GET和POST的主要区别在于数据传递方式和用途：</p>
<ul>
<li>GET通过URL传参，适合查询数据，数据暴露在URL中，不安全</li>
<li>POST 通过请求体传参，适合提交数据数据在请求体中，相对更安全</li>
<li>GET请求是是幂等的（多次请求结果一致）</li>
<li>POST非幂等（可能改变服务器状态）</li>
<li>GET易被缓存，POST默认不缓存</li>
<li>GET常用于查询数据（如搜索、分页）</li>
<li>POST常用于提交数据（如表单、文件上传）</li>
</ul>
</blockquote>
<h1 id="主流浏览器内核详解"><a href="#主流浏览器内核详解" class="headerlink" title="主流浏览器内核详解"></a>主流浏览器内核详解</h1><h2 id="浏览器内核的定义与作用"><a href="#浏览器内核的定义与作用" class="headerlink" title="浏览器内核的定义与作用"></a>浏览器内核的定义与作用</h2><p>浏览器内核负责解析 HTML&#x2F;CSS 并渲染页面，包含：</p>
<ul>
<li>排版引擎：处理 HTML&#x2F;CSS 布局（如盒模型计算）</li>
<li>JavaScript 引擎：执行JS代码（如 V8）</li>
<li>网络栈：管理资源加载与缓存</li>
</ul>
<h2 id="四大主流内核对比"><a href="#四大主流内核对比" class="headerlink" title="四大主流内核对比"></a>四大主流内核对比</h2><ol>
<li>Blink<br>特性：速度快，与Webkit兼容性好，支持最新的Web标准。<br>区别：在Webkit基础上进行了优化和改进，增加了对GPU加速渲染的支持，提升了性能和安全性。</li>
<li>Gecko<br>特性：代码完全公开，可开发程度高，安全性强。<br>区别：独特的渲染方式和布局引擎，对网页标准的支持度高。</li>
<li>Webkit<br>特性：渲染速度快，对HTML5和CSS3支持良好。<br>区别：早期苹果产品专用，后来开源并被多个浏览器采用。</li>
<li>EdgeHTML<br>特性：专为Windows 10设计，与系统深度集成，提供流畅体验。<br>区别：已被Chromium内核取代，不再作为主流内核使用。</li>
</ol>
<h3 id="表格对比"><a href="#表格对比" class="headerlink" title="表格对比"></a>表格对比</h3><table>
<thead>
<tr>
<th><strong>内核名称</strong></th>
<th><strong>代表浏览器</strong></th>
<th><strong>特点</strong></th>
<th><strong>兼容性痛点</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Blink</strong></td>
<td>Chrome、Edge、Opera</td>
<td>- Google 主导开发<br>- 更新迭代快（6周一个版本）<br>- 高度支持最新 Web 标准</td>
<td>激进淘汰旧特性（如 Flash）</td>
</tr>
<tr>
<td><strong>WebKit</strong></td>
<td>Safari</td>
<td>- Apple 主导维护<br>- 移动端优化（iOS 强制使用）<br>- 对电池续航有特殊优化</td>
<td>对 PWA 支持较晚</td>
</tr>
<tr>
<td><strong>Gecko</strong></td>
<td>Firefox</td>
<td>- 开源社区驱动<br>- 严格遵循 W3C 标准<br>- 隐私保护功能强（如跟踪保护）</td>
<td>市场份额低导致测试覆盖不足</td>
</tr>
<tr>
<td><strong>Trident</strong></td>
<td>IE 11 及以下</td>
<td>- 微软已停止维护<br>- 兼容模式（Quirks Mode）问题多<br>- 不支持现代 CSS&#x2F;JS 特性</td>
<td>企业遗留系统仍需兼容</td>
</tr>
</tbody></table>
<h1 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h1><h2 id="浏览器兼容性问题"><a href="#浏览器兼容性问题" class="headerlink" title="浏览器兼容性问题"></a>浏览器兼容性问题</h2><ol>
<li>兼容性问题本质:<br>同一段前端代码在不同浏览器（或版本）中产生不同的渲染效果或功能异常</li>
<li>兼容性问题的根源和解决方案:<br>内核差异（渐进增强 + Polyfill）<br>版本迭代（强制升级 HTTPS）<br>厂商私有前缀（Autoprefixer 自动补全）<br>规范实现时序差（检测特性 + 降级方案</li>
<li>常见触发场景：</li>
</ol>
<ul>
<li>HTML解析差异<br>不同浏览器对HTML标签的解析方式不同，可能导致页面结构异常。<br>解决方案：遵循HTML5标准，避免使用非标准标签和属性。</li>
<li>CSS样式差异<br>不同浏览器对CSS属性的支持程度不同，可能导致布局、颜色、字体等样式不一致。<br>解决方案：使用CSS Reset或Normalize.css统一样式，添加浏览器前缀。</li>
<li>JavaScript行为差异<br>浏览器对JavaScript语法和API的实现存在差异，可能导致代码在某些浏览器中报错或不生效。<br>解决方案：使用polyfill或特性检测，确保代码兼容性。</li>
<li>新特性支持差异<br>新版本的浏览器可能支持最新的Web标准和技术，而旧版本浏览器可能不支持。<br>解决方案：进行特性检测，提供降级方案或提示用户升级浏览器。</li>
</ul>
<ol start="4">
<li>减少问题小结</li>
</ol>
<ul>
<li>选择浏览器：根据目标用户群体和项目需求选择合适的浏览器进行开发和测试。</li>
<li>处理兼容性：使用标准化的代码，借助工具和库处理兼容性问题，确保网站在不同浏览器上正常显示和运行。</li>
</ul>
<h2 id="浏览器兼容性测试的核心方法论"><a href="#浏览器兼容性测试的核心方法论" class="headerlink" title="浏览器兼容性测试的核心方法论"></a>浏览器兼容性测试的核心方法论</h2><p>测试策略分层：</p>
<table>
<thead>
<tr>
<th><strong>层级</strong></th>
<th><strong>测试内容</strong></th>
<th><strong>工具示例</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>基础渲染层</strong></td>
<td>HTML&#x2F;CSS 解析、布局、字体渲染</td>
<td>BrowserStack、LambdaTest</td>
</tr>
<tr>
<td><strong>交互功能层</strong></td>
<td>JavaScript 事件、表单验证、动态加载</td>
<td>Selenium、Cypress</td>
</tr>
<tr>
<td><strong>视觉一致性层</strong></td>
<td>像素级对比（跨浏览器样式一致性）</td>
<td>Percy、BackstopJS</td>
</tr>
<tr>
<td><strong>性能基准层</strong></td>
<td>加载速度、内存占用、渲染帧率</td>
<td>Lighthouse、WebPageTest</td>
</tr>
</tbody></table>
<h2 id="企业级兼容性测试流程"><a href="#企业级兼容性测试流程" class="headerlink" title="企业级兼容性测试流程"></a>企业级兼容性测试流程</h2><ol>
<li><p>静态代码分析<br>ESLint：检测潜在兼容性代码（如使用 fetch 未加 Polyfill）<br>Stylelint：检查 CSS 属性支持度（通过 stylelint-no-unsupported-browser-features 插件）</p>
</li>
<li><p>动态测试阶段<br>首次渲染检查：通过无头浏览器（Headless Chrome）验证基础 DOM 结构<br>交互测试：使用 Cypress 录制用户操作路径（如搜索、表单提交）<br>视觉回归：通过 Percy 对比不同浏览器截图</p>
</li>
<li><p>监控与反馈<br>生产环境监控：集成 Sentry 捕获浏览器端错误（按 UA 分类）<br>用户反馈闭环：如在 Hugo 站点添加「报告问题」按钮，收集用户环境信息</p>
</li>
</ol>
<h1 id="https详细理解"><a href="#https详细理解" class="headerlink" title="https详细理解"></a>https详细理解</h1><h2 id="HTTPS-是怎么保证安全的？为什么比-HTTP-安全"><a href="#HTTPS-是怎么保证安全的？为什么比-HTTP-安全" class="headerlink" title="HTTPS 是怎么保证安全的？为什么比 HTTP 安全"></a>HTTPS 是怎么保证安全的？为什么比 HTTP 安全</h2><p>HTTPS 通过 SSL&#x2F;TLS 实现加密通信和身份验证。<br>具体流程包括：1. 客户端与服务器协商加密算法；2. 服务器发送证书；3. 客户端验证证书并生成会话密钥；4. 双方使用会话密钥加密数据</p>
<blockquote>
<p>加密通信：通过 SSL&#x2F;TLS 协议对数据进行加密。<br>身份验证：服务器证书验证身份，防止中间人攻击。<br>数据完整性：使用消息摘要（如 SHA-256）确保数据未被篡改</p>
</blockquote>
<p>作为前端，你无需配置服务器证书，但必须确保所有资源加载、API 请求使用 HTTPS，处理混合内容问题，并理解其背后的安全逻辑<br>“HTTPS 是通过 <strong>加密传输</strong>、<strong>身份认证</strong> 和 <strong>数据完整性校验</strong> 三个核心机制来保证安全的，它解决了 HTTP 的明文传输、数据篡改和身份伪造三大风险。具体来说：</p>
<ol>
<li>加密传输（防窃听）</li>
</ol>
<ul>
<li><strong>HTTP 的问题</strong>：数据以明文传输，容易被中间人窃听（如密码、Cookie）。  </li>
<li><strong>HTTPS 的解决方案</strong>：  <ul>
<li><strong>混合加密机制</strong>（TLS 握手）：  <ol>
<li><strong>非对称加密</strong>：客户端用服务器的公钥加密一个随机数（Pre-Master Secret），传给服务器（只有服务器私钥能解密）。  </li>
<li><strong>对称加密</strong>：双方基于随机数生成会话密钥，后续通信使用对称加密（如 AES），兼顾安全性和性能。</li>
</ol>
</li>
<li><strong>效果</strong>：即使数据被截获，攻击者无法解密内容。</li>
</ul>
</li>
</ul>
<ol start="2">
<li>身份认证（防伪装）</li>
</ol>
<ul>
<li><strong>HTTP 的问题</strong>：无法验证服务器身份，容易遭受中间人攻击（如假冒银行网站）。  </li>
<li><strong>HTTPS 的解决方案</strong>：  <ul>
<li><strong>数字证书</strong>：服务器向权威机构（CA）申请证书，证书包含公钥、域名、有效期等信息，并由 CA 用私钥签名。  </li>
<li><strong>验证流程</strong>：  <ol>
<li>客户端内置信任的 CA 公钥，收到证书后验证签名是否合法。  </li>
<li>检查证书域名是否匹配、是否过期。</li>
</ol>
</li>
<li><strong>效果</strong>：确保客户端连接的是真实服务器，而非中间人。</li>
</ul>
</li>
</ul>
<ol start="3">
<li>数据完整性校验（防篡改）</li>
</ol>
<ul>
<li><strong>HTTP 的问题</strong>：数据在传输中可能被篡改（如插入广告代码）。  </li>
<li><strong>HTTPS 的解决方案</strong>：  <ul>
<li><strong>散列算法 + 数字签名</strong>：  <ol>
<li>发送方对数据计算哈希值（如 SHA-256），用会话密钥加密哈希值（即 HMAC）。  </li>
<li>接收方解密后重新计算哈希值，与传来的哈希值比对。</li>
</ol>
</li>
<li><strong>效果</strong>：若数据被篡改，哈希值不匹配，连接会被终止。</li>
</ul>
</li>
</ul>
<h3 id="由于我没有使用过https，追问了deepseek老师："><a href="#由于我没有使用过https，追问了deepseek老师：" class="headerlink" title="由于我没有使用过https，追问了deepseek老师："></a>由于我没有使用过https，追问了deepseek老师：</h3><p>作为前端开发者，使用 HTTPS 需要关注以下核心事项<br>－ 资源引用：确保所有资源使用 HTTPS**</p>
<ol>
<li><strong>静态资源（图片、字体、脚本、样式）</strong>  <ul>
<li><strong>绝对路径</strong>：直接使用 HTTPS URL：  </li>
<li><strong>相对协议</strong>（自动匹配页面协议）：  </li>
<li><strong>避免硬编码 HTTP</strong>：</li>
</ul>
</li>
<li><strong>第三方库和 CDN</strong>  <ul>
<li>检查第三方服务是否支持 HTTPS（如 Google Fonts、Bootstrap CDN 默认支持）。  </li>
<li>若第三方不支持 HTTPS，需更换服务商或自托管资源。<br>二、API 请求：强制使用 HTTPS 协议</li>
</ul>
</li>
<li><strong>前后端通信</strong>  <ul>
<li>生产环境 API 地址必须为 HTTPS</li>
</ul>
</li>
<li><strong>WebSocket 连接</strong>  <ul>
<li>使用 <code>wss://</code> 替代 <code>ws://</code>：  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&#x27;wss://realtime.your-service.com&#x27;</span>);  </span><br></pre></td></tr></table></figure>
三、开发环境：本地启用 HTTPS</li>
</ul>
</li>
<li><strong>为什么要用 HTTPS 开发？</strong>  <ul>
<li>模拟生产环境行为（如 Service Worker、地理定位 API 仅限 HTTPS）。  </li>
<li>测试混合内容问题。</li>
</ul>
</li>
<li><strong>启用方法</strong>  <ul>
<li><strong>使用前端工具链自动配置</strong>：  <pre><code class="bash"># Create React App  
HTTPS=true npm start  
# Vite  
vite --https  
</code></pre>
</li>
<li><strong>手动生成证书</strong>（适合自定义场景）：  <ol>
<li>安装 <code>mkcert</code>：生成本地可信证书。  </li>
<li>生成证书：  <pre><code class="bash">mkcert localhost 127.0.0.1 ::1  
</code></pre>
</li>
<li>在 <code>vite.config.js</code> 或 <code>webpack.config.js</code> 中配置证书路径。</li>
</ol>
</li>
</ul>
</li>
</ol>
<p>四、处理混合内容（Mixed Content）</p>
<ol>
<li><strong>什么是混合内容？</strong>  <ul>
<li>HTTPS 页面中加载了 HTTP 资源（如图片、脚本、样式）。  </li>
<li>浏览器会阻止加载这些资源（控制台显示警告）。</li>
</ul>
</li>
<li><strong>解决方案</strong>  <ul>
<li><strong>代码检查</strong>：全局搜索代码中的 <code>http://</code>，替换为 <code>https://</code> 或 <code>//</code>。  </li>
<li><strong>内容安全策略（CSP）</strong>：强制所有资源使用 HTTPS<br>，关于 HTTP 状态码，我会从分类、常见状态码的意义以及 HTTPS 的关系三个方面来回答：</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>网络请求</tag>
        <tag>浏览器</tag>
      </tags>
  </entry>
  <entry>
    <title>网络请求--axios/fetch学习笔记和面试题</title>
    <url>/2025/05/06/31-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%BA%93-axios%E5%BA%93/</url>
    <content><![CDATA[<h1 id="axios库学习笔记"><a href="#axios库学习笔记" class="headerlink" title="axios库学习笔记"></a>axios库学习笔记</h1><blockquote>
<p>使用网络请求库会方便很多，一般不需要自己来原生封装<br>如果要原生封装，去找学后端时的封装代码和相关笔记</p>
</blockquote>
<h2 id="认识axios库"><a href="#认识axios库" class="headerlink" title="认识axios库"></a>认识axios库</h2><p>axios–ajax i&#x2F;o system </p>
<blockquote>
<p>功能特点：<br>在浏览器中发送XMLHttpRequests请求，兼容性好<br>在 nodejs 中发送 http请求<br>支持 Promise API拦截请求和响应<br>转换请求和响应数据</p>
</blockquote>
<h2 id="axios发送请求（重要）"><a href="#axios发送请求（重要）" class="headerlink" title="axios发送请求（重要）"></a>axios发送请求（重要）</h2><p>先安装axios<code>npm install axios</code><br>导入axios<code>import axios from &#39;axios&#39;</code><br>然后就能使用了</p>
<ol>
<li>axios支持很懂请求方式<br>axios(config)<br>axios.request(config)<br><strong>axios.get(url[, config])</strong><br>axios.delete(url[, config])<br>axios.head(url[, config])<br><strong>axios.post(url[, data[, config]])</strong><br>axios.put(url[, data[, config]])<br>axios.patch(url[, data[, config]])</li>
<li>常见的配置选项<br>请求地址  url: ‘&#x2F;user’<br>请求类型  method: ‘get’.<br>请根路径  baseURL: ‘<a href="http://www.mt.com/api">http://www.mt.com/api</a>‘<br>请求前的数据处理  transformRequest:[function(data){}],<br>请求后的数据处理  transformResponse: [function(data){}].<br>自定义的请求头  headers:{‘x-Requested-With’:’XMLHttpRequest’}<br>URL查询对象  params:{ id:12 }<br>查询对象序列化函数<br>paramsSerializer: function(params){ }口request body<br>data: { key: ‘aa’},<br>超时设置  timeout: 1000,</li>
<li>有时可能需求同时发送两个请求<br>使用axios.all,可以放入多个请求的数组.<br>axios.all([])返回的结果是一个数组，使用 axios.spread 可将数组 [res1,res2]展开为 res1,res2<br>只有两个请求都有结果，才会进行then回调   </li>
<li>代码演示<br>有用的数据一般都在<code>res.data</code>中<br><strong>浏览器输入地址敲回车能直接拿到数据的都是get请求</strong><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vueimport axios from &#x27;</span>axiosimport <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.发送request请求</span></span><br><span class="line">axios.<span class="title function_">request</span>(&#123;</span><br><span class="line"><span class="attr">url</span>:<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span></span><br><span class="line"><span class="attr">method</span>:<span class="string">&quot;get&quot;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>,res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//2. 发送get请求</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;响应数据:&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求失败:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">//3. 发送post请求</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;https://api.example.com/submit&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">25</span></span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;响应数据:&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求失败:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">//自定义请求头</span></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token_here&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;响应数据:&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求失败:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line"><span class="comment">//带请求头的post请求</span></span><br><span class="line"><span class="comment">// JavaScript</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;https://api.example.com/submit&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 Axios 实例（设置 baseURL）</span></span><br><span class="line"><span class="keyword">const</span> api = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.example.com&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">api.<span class="title function_">get</span>(<span class="string">&#x27;/data&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;响应数据:&#x27;</span>, response.<span class="property">data</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求失败:&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="axios创建实例"><a href="#axios创建实例" class="headerlink" title="axios创建实例"></a>axios创建实例</h2><h3 id="baseURL和公共基础配置"><a href="#baseURL和公共基础配置" class="headerlink" title="baseURL和公共基础配置"></a>baseURL和公共基础配置</h3><p>   通过<code>axios.defaults.baseURL = baseURL</code>配置baseURL,后续输入地址会自动帮你在baseurl后面进行拼接<br>   使用<code>axios.defaults..</code>可以给axios实例配置公共的基础配置<br>   <strong>这样有缺点：应用在所有请求上，不够灵活，后续有解决方式</strong></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp &#125;<span class="keyword">from</span> <span class="string">&#x27;vueimport axios from &#x27;</span>axiosimport <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"><span class="comment">//baseURL</span></span><br><span class="line"><span class="keyword">const</span> baseURL =<span class="string">&quot;http://123.207.32.32:8000&quot;</span></span><br><span class="line"><span class="comment">//给axios实例配置公共的基础配置</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = baseURL</span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">timeout</span> = <span class="number">5000</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>=&#123;&#125;</span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/home/multidata&quot;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span>&#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;res:&quot;</span>，res.<span class="property">data</span>)&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="axios的创建实例–给单个网络请求进行配置"><a href="#axios的创建实例–给单个网络请求进行配置" class="headerlink" title="axios的创建实例–给单个网络请求进行配置"></a>axios的创建实例–给单个网络请求进行配置</h3><p>前面提到的<code>axios.defaults..</code>配置方式有缺点：应用在所有请求上，不够灵活，在实际开发中某些配置可能会不太一样<br>需要创建单独的实例发送网络请求<br>看代码就懂了，创建了两个单独的实例发送网络请求：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp &#125;<span class="keyword">from</span> <span class="string">&#x27;vueimport axios from &#x27;</span>axiosimport <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;https//xxxxxx&quot;</span>)</span><br><span class="line"><span class="comment">//创建单独的实例发送网络请求</span></span><br><span class="line"><span class="keyword">const</span> instance1 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">   baseURL = <span class="string">&quot;https//xxxxxx&quot;</span>,</span><br><span class="line">   timeout = <span class="number">5000</span>,</span><br><span class="line">   headers=&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//实例1使用时：</span></span><br><span class="line">instance1.<span class="title function_">get</span>(<span class="string">&quot;/xxx&quot;</span>,&#123;</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&quot;nienie&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//继续创建单独的实例发送网络请求</span></span><br><span class="line"><span class="keyword">const</span> instance2 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">   baseURL = <span class="string">&quot;https//xxxxxx&quot;</span>,</span><br><span class="line">   timeout = <span class="number">6000</span>,</span><br><span class="line">   headers=&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="axios拦截器"><a href="#axios拦截器" class="headerlink" title="axios拦截器"></a>axios拦截器</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><ol>
<li>请求拦截器：<br>在请求发送到服务器之前执行<br>多用于：添加请求头，比如token</li>
<li>响应拦截器：<br>在服务器返回响应之后、在调用 .then() 或 .catch()之前，执行<br>多用于：统一处理响应数据（如解析 JSON）；全局错误处理（如 401 未授权、500 服务器错误）；关闭加载状态（如 Loading 效果）</li>
<li>拦截器执行顺序<br><strong>请求拦截器按添加顺序依次执行</strong><br><strong>响应拦截器按添加顺序的逆序执行（先添加的最后执行）</strong></li>
<li>拦截器抛出错误<code>Promise.reject(error);</code></li>
<li>拦截器的移除<br>移除单个拦截器：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> requestInterceptor = instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(...);</span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">eject</span>(requestInterceptor);</span><br></pre></td></tr></table></figure>
移除所有拦截器<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">clear</span>(); <span class="comment">// 移除所有请求拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">clear</span>(); <span class="comment">// 移除所有响应拦截器</span></span><br></pre></td></tr></table></figure></li>
<li>拦截器的优势<blockquote>
<ul>
<li>代码复用<br>通过拦截器，可以将通用逻辑（如 Token 添加、错误处理）集中管理，避免重复代码。</li>
<li>统一处理逻辑<br>所有请求&#x2F;响应都会经过拦截器，便于统一处理认证、日志、错误提示等。</li>
<li>提升可维护性<br>修改拦截器逻辑即可影响所有请求&#x2F;响应，无需修改业务代码。</li>
<li>增强用户体验<br>通过拦截器可以实现全局的 Loading 效果、错误提示，提升用户交互体验。</li>
</ul>
</blockquote>
</li>
</ol>
<h3 id="对实例配置拦截器-看代码看下面完整版的"><a href="#对实例配置拦截器-看代码看下面完整版的" class="headerlink" title="对实例配置拦截器(看代码看下面完整版的)"></a>对实例配置拦截器(看代码看下面完整版的)</h3><p>下面两个拦截器都有俩个回调函数，如果发送成功回调前面的同时回调一个config，可以在这里进行判断，很灵活；发送失败回调后面的<br>请求拦截器<code>axios.interceptors.request.use(config=&gt;&#123;return config&#125;,err=&gt;&#123;return err&#125;)</code><br>响应拦截器<code>axios.interceptors.response.use(res=&gt;&#123;return res&#125;,err=&gt;&#123;return err&#125;)</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">config</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求成功的拦截&quot;</span>)</span><br><span class="line">   <span class="comment">//开始loading的动画</span></span><br><span class="line">   <span class="comment">//对配置文件进行修改</span></span><br><span class="line">&#125;,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;请求失败的拦截&quot;</span>)</span><br><span class="line">   <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应成功的拦截&quot;</span>)</span><br><span class="line">   <span class="comment">//结束loading的动画</span></span><br><span class="line">   <span class="comment">//对数据进行转化，再返回数据</span></span><br><span class="line">   <span class="keyword">return</span> res.<span class="property">data</span></span><br><span class="line">&#125;,<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;响应失败的拦截&quot;</span>)</span><br><span class="line">   <span class="keyword">return</span> err</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="拦截器完整代码示例（重要）"><a href="#拦截器完整代码示例（重要）" class="headerlink" title="拦截器完整代码示例（重要）"></a>拦截器完整代码示例（重要）</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.example.com&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">//加到请求头（config.headers）中的 Authorization 字段里</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;<span class="comment">// 必须返回 config，否则请求无法发送</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);<span class="comment">// 抛出错误</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">// 响应成功，统一处理响应数据</span></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response.<span class="property">data</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP 错误: <span class="subst">$&#123;response.status&#125;</span>`</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>) &#123;</span><br><span class="line">      <span class="comment">// 服务器返回了错误响应（如 401、404、500）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;服务器错误:&#x27;</span>, error.<span class="property">response</span>.<span class="property">status</span>, error.<span class="property">response</span>.<span class="property">data</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">request</span>) &#123;</span><br><span class="line">      <span class="comment">// 请求已发出，但未收到响应（如网络断开）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求无响应:&#x27;</span>, error.<span class="property">request</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 其他错误（如请求配置错误）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求异常:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br></pre></td></tr></table></figure>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><h4 id="拦截器全局错误处理"><a href="#拦截器全局错误处理" class="headerlink" title="拦截器全局错误处理"></a>拦截器全局错误处理</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 响应拦截器中统一处理错误</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> response,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="comment">// 未授权：跳转到登录页</span></span><br><span class="line">      router.<span class="title function_">push</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> &gt;= <span class="number">500</span>) &#123;</span><br><span class="line">      <span class="comment">// 服务器内部错误：提示用户</span></span><br><span class="line">      <span class="title function_">alert</span>(<span class="string">&#x27;服务器出现异常，请稍后再试&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="显示加载状态"><a href="#显示加载状态" class="headerlink" title="显示加载状态"></a>显示加载状态</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 请求拦截器中开启 Loading</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">showLoading</span>(); <span class="comment">// 自定义的 Loading 显示方法</span></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器中关闭 Loading</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">hideLoading</span>(); <span class="comment">// 自定义的 Loading 关闭方法</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">hideLoading</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="自动刷新-Token"><a href="#自动刷新-Token" class="headerlink" title="自动刷新 Token"></a>自动刷新 Token</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当收到 401 错误时，尝试刷新 Token</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> response,</span><br><span class="line">  <span class="keyword">async</span> error =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>.<span class="property">status</span> === <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> newToken = <span class="keyword">await</span> <span class="title function_">refreshAccessToken</span>(); <span class="comment">// 调用刷新 Token 接口</span></span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, newToken);</span><br><span class="line">        error.<span class="property">config</span>.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;newToken&#125;</span>`</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">instance</span>(error.<span class="property">config</span>); <span class="comment">// 重新发送请求</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (refreshError) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;刷新 Token 失败&#x27;</span>, refreshError);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(refreshError);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h1 id="fetch学习笔记"><a href="#fetch学习笔记" class="headerlink" title="fetch学习笔记"></a>fetch学习笔记</h1><h2 id="Fetch发送POST请求"><a href="#Fetch发送POST请求" class="headerlink" title="Fetch发送POST请求"></a>Fetch发送POST请求</h2><p>Fetch 发送 POST 请求需要配置 method、headers和body<br>比如设置method为POST，headers指定Content-Type为 JSON，body用JSON.stringify转换数据</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">     <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;HTTP error&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>
<h1 id="用typescript发送网络请求"><a href="#用typescript发送网络请求" class="headerlink" title="用typescript发送网络请求"></a>用typescript发送网络请求</h1><h2 id="JavaScript-与-TypeScript-在网络请求中的差异"><a href="#JavaScript-与-TypeScript-在网络请求中的差异" class="headerlink" title="JavaScript 与 TypeScript 在网络请求中的差异"></a>JavaScript 与 TypeScript 在网络请求中的差异</h2><ol>
<li><p>类型检查</p>
<ul>
<li>JavaScript：动态类型，无需显式声明变量类型，但容易因类型错误导致运行时问题。</li>
<li>TypeScript：静态类型，编译时检查类型，减少错误。例如，定义请求头时，TS 可提示字段类型 <figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">headers</span>: &#123; [<span class="attr">key</span>: <span class="built_in">string</span>]: <span class="built_in">string</span> &#125; = &#123;</span><br><span class="line">  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer token&#x27;</span></span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Axios与Fetch的兼容性 <strong>(新知识点)</strong><br>Axios 和 Fetch 的代码在JS和TS中均可直接使用，但TS会提供更好的开发体验（如自动补全、类型提示）<br>Axios在TS中可结合类型<strong>定义文件（如 @types&#x2F;axios）</strong>，增强类型安全 <strong>(新知识点)</strong></p>
</li>
</ol>
<h2 id="ts中用axios和fetch发送post请求"><a href="#ts中用axios和fetch发送post请求" class="headerlink" title="ts中用axios和fetch发送post请求"></a>ts中用axios和fetch发送post请求</h2><ol>
<li><p>使用 Axios</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// TypeScript</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">password</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line">axios.<span class="property">post</span>&lt;<span class="title class_">User</span>&gt;(<span class="string">&#x27;https://api.example.com/submit&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用fetch</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/submit&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>() <span class="keyword">as</span> <span class="title class_">Promise</span>&lt;&#123; <span class="attr">success</span>: boolean &#125;&gt;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="ajax相关网络请求问题"><a href="#ajax相关网络请求问题" class="headerlink" title="ajax相关网络请求问题"></a>ajax相关网络请求问题</h1><h2 id="AJAX、fetch与axios的关系"><a href="#AJAX、fetch与axios的关系" class="headerlink" title="AJAX、fetch与axios的关系"></a>AJAX、fetch与axios的关系</h2><p><strong>AJAX是一种技术概念，指在不重新加载整个页面的情况下与服务器交换数据并更新部分网页的技术</strong><br><strong>Axios和Fetch是AJAX的具体实现</strong><br><strong>Fetch是现代浏览器实现AJAX的方式之一，AJAX是广义的技术概念</strong></p>
<ul>
<li>AJAX实现方式：<ul>
<li>原始实现：XMLHttpRequest (XHR)对象</li>
<li>现代实现：fetch API</li>
<li>第三方库：axios、jQuery.ajax等</li>
</ul>
</li>
</ul>
<h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><p>AJAX（原生 XMLHttpRequest）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">xhr.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(xhr.<span class="property">responseText</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;请求失败&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">xhr.<span class="property">onerror</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;网络错误&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line">xhr.<span class="title function_">send</span>();</span><br></pre></td></tr></table></figure>

<p>Axios</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>

<p>Fetch</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;HTTP error&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>

<h2 id="fetch和axios比较"><a href="#fetch和axios比较" class="headerlink" title="fetch和axios比较"></a>fetch和axios比较</h2><p>fetch是浏览器原生API，而axios是第三方库。</p>
<blockquote>
<p>比较它们的兼容性、自动错误处理、拦截器支持、取消请求等特性：<br>axios自动处理HTTP错误状态码，而fetch需要手动检查响应状态。此外，axios支持拦截器，适合需要统一处理请求和响应的场景，而fetch更轻量，适合简单用例</p>
</blockquote>
<p><img src="/postImgs/jsImgs/axiosfetch1.png" alt="fetch和axios比较"><br>fetch：轻量级项目、需要最小化依赖、兼容现代浏览器<br>axios：复杂项目（如需要拦截器、自动错误处理）、兼容旧浏览器（如 IE11）、自动解析JSON</p>
<h2 id="如何取消-Axios-或-Fetch-的请求"><a href="#如何取消-Axios-或-Fetch-的请求" class="headerlink" title="如何取消 Axios 或 Fetch 的请求"></a>如何取消 Axios 或 Fetch 的请求</h2><p>Axios 和 Fetch 都可以通过 AbortController 取消请求。比如，在发起请求时传入 signal，之后调用 controller.abort() 即可终止请求<br>Axios：使用 CancelToken 或 AbortController</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/api/data&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">&#125;);</span><br><span class="line">controller.<span class="title function_">abort</span>(); <span class="comment">// 取消请求</span></span><br></pre></td></tr></table></figure>

<p>Fetch：使用 AbortController</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> controller = <span class="keyword">new</span> <span class="title class_">AbortController</span>();</span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">&quot;/api/data&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">signal</span>: controller.<span class="property">signal</span></span><br><span class="line">&#125;);</span><br><span class="line">controller.<span class="title function_">abort</span>(); <span class="comment">// 取消请求</span></span><br></pre></td></tr></table></figure>

<h2 id="Fetch-和-Axios-是否支持-async-await"><a href="#Fetch-和-Axios-是否支持-async-await" class="headerlink" title="Fetch 和 Axios 是否支持 async&#x2F;await"></a>Fetch 和 Axios 是否支持 async&#x2F;await</h2><p>两者都支持 async&#x2F;await，因为它们返回的是 Promise<br>async&#x2F;await是JavaScript的语法，只要函数返回Promise，就可以用 await 等待结果</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Fetch + async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Axios + async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Axios-如何统一处理所有请求的错误"><a href="#Axios-如何统一处理所有请求的错误" class="headerlink" title="Axios 如何统一处理所有请求的错误"></a>Axios 如何统一处理所有请求的错误</h3><p>“Axios 的响应拦截器可以统一处理所有请求的错误。<br>比如在拦截器中打印错误信息，或者跳转到登录页（如 401 错误）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> response,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;请求失败&quot;</span>, error.<span class="property">response</span>?.<span class="property">data</span> || error.<span class="property">message</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>面试题</category>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>面试题</tag>
        <tag>axios</tag>
        <tag>网络请求</tag>
        <tag>fetch</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript高频API</title>
    <url>/2025/04/13/29-jsAPI/</url>
    <content><![CDATA[<h1 id="JavaScript常用API整理"><a href="#JavaScript常用API整理" class="headerlink" title="JavaScript常用API整理"></a>JavaScript常用API整理</h1><p><strong>写题的时候好多API都模糊了，我应该好好整理一下，于是查文档+看视频+问AI,整理了下面内容，我觉得比较重要的高频api</strong></p>
<p>核心js定义了最小限度的API，用于操作数值、文本、数组、Map、Set等<br>js类型可以分为原始类型（Number,String,null,undefined,symbol）和对象类型（Array,Set,Map,RegExp,Date等）</p>
<h2 id="Number-数学计算"><a href="#Number-数学计算" class="headerlink" title="Number 数学计算"></a>Number 数学计算</h2><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>Math.round()</code></td>
<td>四舍五入取整</td>
</tr>
<tr>
<td><code>Math.fround()</code></td>
<td>舍入到最接近的32位浮点数</td>
</tr>
<tr>
<td><code>Math.ceil()</code></td>
<td>向上取整 <code>1.1 =&gt; 2</code></td>
</tr>
<tr>
<td><code>Math.floor()</code></td>
<td>向下取整 <code>1.9 =&gt; 1</code></td>
</tr>
<tr>
<td><code>Math.sqrt()</code></td>
<td>开二次方</td>
</tr>
<tr>
<td><code>Math.pow(n, m)</code></td>
<td><code>n</code> 的 <code>m</code> 次幂</td>
</tr>
<tr>
<td><code>Math.random()</code></td>
<td>生成随机小数 <code>0.0 ~ 1.0</code></td>
</tr>
<tr>
<td><code>Math.max(a, b, c)</code></td>
<td>取最大的一个数</td>
</tr>
<tr>
<td><code>Math.min(a, b, c)</code></td>
<td>取最小的一个数</td>
</tr>
</tbody></table>
<hr>
<h2 id="String-字符串操作"><a href="#String-字符串操作" class="headerlink" title="String 字符串操作"></a>String 字符串操作</h2><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>str.length</code></td>
<td>返回字符串长度</td>
</tr>
<tr>
<td><code>str[n]</code></td>
<td>返回字符串第 <code>n</code> 个索引对应的字符</td>
</tr>
<tr>
<td><code>str[str.length - 1]</code></td>
<td>综合前两个，返回字符串最后一个字符</td>
</tr>
<tr>
<td><code>str.substring(n, m)</code></td>
<td>返回从 <code>n</code> 到 <code>m-1</code> 索引的字符串片段</td>
</tr>
<tr>
<td><code>str.slice(n, m)</code></td>
<td>同 <code>substring</code>，支持负数索引</td>
</tr>
<tr>
<td><code>str.slice(n)</code></td>
<td>返回从索引 <code>n</code> 截取到结尾的字符串片段</td>
</tr>
<tr>
<td><code>str.slice(-n)</code></td>
<td>从后往前数 <code>n</code> 个字符到最后一个字符的片段</td>
</tr>
<tr>
<td><code>str.indexOf(&#39;str2&#39;)</code></td>
<td>返回 <code>str2</code> 第一次出现的索引值</td>
</tr>
<tr>
<td><code>str.lastIndexOf(&#39;str2&#39;)</code></td>
<td>返回 <code>str2</code> 最后一次出现的索引值</td>
</tr>
<tr>
<td><code>str.includes(&#39;str2&#39;)</code></td>
<td>包含返回 <code>true</code>，反之 <code>false</code></td>
</tr>
<tr>
<td><code>str.startsWith(&#39;str2&#39;)</code></td>
<td>是 <code>str2</code> 开头的返回 <code>true</code>，反之 <code>false</code></td>
</tr>
<tr>
<td><code>str.endsWith(&#39;str2&#39;)</code></td>
<td>是 <code>str2</code> 结尾的返回 <code>true</code>，反之 <code>false</code></td>
</tr>
<tr>
<td><code>str.toUpperCase()</code></td>
<td>返回字符串全大写形式</td>
</tr>
<tr>
<td><code>str.toLowerCase()</code></td>
<td>返回字符串全小写形式</td>
</tr>
<tr>
<td><code>str.split(&#39;&#39;)</code></td>
<td>分割字符串（如 <code>str.split(&#39;,&#39;)</code> 或正则表达式）</td>
</tr>
<tr>
<td><code>str.replace(&#39;str1&#39;, &#39;str2&#39;)</code></td>
<td>替换 <code>str1</code> 为 <code>str2</code>（支持正则表达式）</td>
</tr>
<tr>
<td><code>str.trim()</code></td>
<td>去除首尾空格</td>
</tr>
<tr>
<td><code>str.trimStart()</code></td>
<td>去除开头空格</td>
</tr>
<tr>
<td><code>str.trimEnd()</code></td>
<td>去除结尾空格</td>
</tr>
<tr>
<td><code>str.padStart(5, &#39;&amp;&#39;)</code></td>
<td>前补全（如 <code>&quot;nie&quot;.padStart(5, &#39;&amp;&#39;) =&gt; &#39;&amp;&amp;nie&#39;</code>）</td>
</tr>
<tr>
<td><code>str.padEnd(5, &#39;&amp;&#39;)</code></td>
<td>后补全（如 <code>&quot;nie&quot;.padEnd(5, &#39;&amp;&#39;) =&gt; &#39;nie&amp;&amp;&#39;</code>）</td>
</tr>
<tr>
<td><code>str.padStart(5)</code></td>
<td>默认补空格（如 <code>&quot;nie&quot;.padStart(5) =&gt; &#39;  nie&#39;</code>）</td>
</tr>
<tr>
<td><code>str.repeat(5)</code></td>
<td>重复 <code>5</code> 次（如 <code>&quot;nie&quot;.repeat(5) =&gt; &#39;nienienienienie&#39;</code>）</td>
</tr>
</tbody></table>
<h2 id="Boolean-布尔值"><a href="#Boolean-布尔值" class="headerlink" title="Boolean 布尔值"></a>Boolean 布尔值</h2><p><code>Boolean(x)</code> 判断值的真假（返回true或false）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Boolean</span>(<span class="number">0</span>)<span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="title class_">NaN</span>)<span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;&#x27;</span>)<span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="literal">null</span>)<span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="literal">undefined</span>)<span class="comment">// false</span></span><br><span class="line"><span class="title class_">Boolean</span>([])<span class="comment">// true</span></span><br><span class="line">!!!<span class="title class_">Boolean</span>(&#123;&#125;)<span class="comment">// true</span></span><br><span class="line">!!!<span class="title class_">Boolean</span>(<span class="string">&#x27;&#x27;</span>)<span class="comment">// true</span></span><br><span class="line"><span class="title class_">Boolean</span>(<span class="string">&#x27;false&#x27;</span>)<span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><h3 id="控制数字转字符串的格式"><a href="#控制数字转字符串的格式" class="headerlink" title="控制数字转字符串的格式"></a>控制数字转字符串的格式</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>num.toFixed(n)</code></td>
<td>转为 <code>n</code> 位小数的字符串（四舍五入）</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">1234.56789</span>;</span><br><span class="line">num.<span class="title function_">toFixed</span>(<span class="number">3</span>); <span class="comment">// &quot;1234.568&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="显式类型转换"><a href="#显式类型转换" class="headerlink" title="显式类型转换"></a>显式类型转换</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>String(x)</code></td>
<td>转为字符串</td>
</tr>
<tr>
<td><code>Number(x)</code></td>
<td>转为数字</td>
</tr>
<tr>
<td><code>Boolean(x)</code></td>
<td>转为布尔值</td>
</tr>
</tbody></table>
<h3 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h3><table>
<thead>
<tr>
<th><strong>场景</strong></th>
<th><strong>方法</strong></th>
</tr>
</thead>
<tbody><tr>
<td>转字符串</td>
<td><code>x + &quot; &quot;</code>（需加括号） 或 <code>$&#123;x&#125;</code>（推荐，无需括号）</td>
</tr>
<tr>
<td>转数字</td>
<td><code>+x</code>（如 <code>+&#39;123&#39;</code> → <code>123</code>）</td>
</tr>
<tr>
<td>转布尔值</td>
<td><code>!!x</code>（如 <code>!!null</code> → <code>false</code>）</td>
</tr>
</tbody></table>
<h2 id="Object-对象"><a href="#Object-对象" class="headerlink" title="Object 对象"></a>Object 对象</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Nie&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">  <span class="attr">sayHello</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;你好呀，我叫&#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问不存在的属性 → 返回 <code>undefined</code></li>
<li>访问不存在属性的其他操作（如 <code>obj.nonExist.length</code>）→ 报错</li>
</ul>
<h2 id="Array-数组"><a href="#Array-数组" class="headerlink" title="Array 数组"></a>Array 数组</h2><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>arr.length</code></td>
<td>返回数组长度</td>
</tr>
<tr>
<td><code>arr[n]</code></td>
<td>访问索引 <code>n</code> 的元素（负数或越界返回 <code>undefined</code>）</td>
</tr>
<tr>
<td><code>Array.from(&#39;hello&#39;)</code></td>
<td>解包字符串为 <code>[ &#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39; ]</code></td>
</tr>
<tr>
<td><code>[...&#39;hello&#39;]</code></td>
<td>解构字符串为 <code>[ &#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39; ]</code></td>
</tr>
</tbody></table>
<h3 id="改变原数组的方法（不返回原数组）"><a href="#改变原数组的方法（不返回原数组）" class="headerlink" title="改变原数组的方法（不返回原数组）"></a>改变原数组的方法（不返回原数组）</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>push(item)</code></td>
<td>末尾添加元素，返回新长度</td>
</tr>
<tr>
<td><code>pop()</code></td>
<td>删除末尾元素，返回被删除的元素</td>
</tr>
<tr>
<td><code>unshift(item)</code></td>
<td>开头添加元素，返回新长度</td>
</tr>
<tr>
<td><code>shift()</code></td>
<td>删除开头元素，返回被删除的元素</td>
</tr>
<tr>
<td><code>splice(loc)</code></td>
<td>从 <code>loc</code> 开始删除到末尾，返回被删除的数组</td>
</tr>
<tr>
<td><code>splice(loc, n)</code></td>
<td>从 <code>loc</code> 开始删除 <code>n</code> 个元素，返回被删除的数组</td>
</tr>
<tr>
<td><code>splice(loc, n, ...items)</code></td>
<td>删除 <code>n</code> 个元素后，在 <code>loc</code> 插入新元素</td>
</tr>
<tr>
<td><code>reverse()</code></td>
<td>反转数组</td>
</tr>
</tbody></table>
<h3 id="数组的其他重要操作"><a href="#数组的其他重要操作" class="headerlink" title="数组的其他重要操作"></a>数组的其他重要操作</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>slice(start,end)</code></td>
<td>返回从start到end(不包括end)的片段，不改变原数组</td>
</tr>
<tr>
<td><code>fill(item，start，end)</code></td>
<td>用 item 填充从 start 到 end(不包括 end )的片段</td>
</tr>
<tr>
<td><code>sort(func)</code></td>
<td>按照指定规则排序。默认按照字符串字典序排序</td>
</tr>
<tr>
<td><code>concat(… items)</code></td>
<td>将新元素依次添加到原数组的尾部,返回新数组，不改变原数组</td>
</tr>
<tr>
<td><code>join(sep)</code></td>
<td>返回字符串，字符串由原数组的元素组成，元素之间用 sep 分隔，不改变原数组</td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">[<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span>].<span class="title function_">sort</span>(<span class="function">(<span class="params">a，b</span>)=&gt;</span>a-b)<span class="comment">//[1，2，3]</span></span><br><span class="line">[<span class="number">1</span>，<span class="number">2</span>，<span class="number">3</span>].<span class="title function_">sort</span>(<span class="function">(<span class="params">a，b</span>)=&gt;</span>b-a)<span class="comment">//[3，2，1]</span></span><br><span class="line">[</span><br><span class="line"><span class="attr">iname</span>:&#123;<span class="string">&quot;Alice&quot;</span>, <span class="attr">grade</span>: <span class="number">1</span>&#125;,&#123;<span class="attr">name</span>:<span class="string">&quot;Bob&quot;</span>,<span class="attr">grade</span>:<span class="number">2</span>&#125;</span><br><span class="line">].<span class="title function_">sort</span>((a，b)→ a.<span class="property">grade</span> - b.<span class="property">grade</span>)</span><br><span class="line"><span class="comment">//[&#123;name:&quot;Alice&quot;,grade:1&#125;,&#123;name:&quot;Bob&quot;,grade: 2&#125;]</span></span><br></pre></td></tr></table></figure>
<h3 id="数组的迭代方法"><a href="#数组的迭代方法" class="headerlink" title="数组的迭代方法"></a>数组的迭代方法</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>forEach(func)</code></td>
<td>遍历每个元素调用 <code>func</code></td>
</tr>
<tr>
<td><code>map(func)</code></td>
<td>遍历并返回新数组（如 <code>arr.map(x =&gt; x*2)</code>）</td>
</tr>
<tr>
<td><code>filter(func)</code></td>
<td>筛选满足条件的元素，返回新数组.只包含func返回true的元素</td>
</tr>
<tr>
<td><code>reduce(func, init)</code></td>
<td>对每个元素调用 func ， func 的返回值作为下一次调用 func 时的第一个参数init 是第一次调用 func 时的第一个参数</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//生成1-20的奇数并求和</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">20</span>)</span><br><span class="line">  .<span class="title function_">fill</span>(<span class="number">0</span>)</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">_, idx</span>) =&gt;</span> idx + <span class="number">1</span>)</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span> !== <span class="number">0</span>)</span><br><span class="line">  .<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>); <span class="comment">// 输出 100</span></span><br></pre></td></tr></table></figure>
<h3 id="数组的其他方法"><a href="#数组的其他方法" class="headerlink" title="数组的其他方法"></a>数组的其他方法</h3><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>every(func)</code></td>
<td>所有元素满足条件返回 <code>true</code></td>
</tr>
<tr>
<td><code>some(func)</code></td>
<td>任意一个元素满足条件返回 <code>true</code></td>
</tr>
<tr>
<td><code>find(func)</code></td>
<td>返回第一个满足条件的元素</td>
</tr>
<tr>
<td><code>findIndex(func)</code></td>
<td>返回第一个满足条件的元素索引</td>
</tr>
<tr>
<td><code>indexOf()</code></td>
<td>要获取的在数组中第一次出现的位置的元素</td>
</tr>
<tr>
<td><code>LastIndexOf()</code></td>
<td>要获取的在数组中最后一次出现的位置的元素</td>
</tr>
</tbody></table>
<h2 id="Set集合"><a href="#Set集合" class="headerlink" title="Set集合"></a>Set集合</h2><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>new Set([1,2,3])</code></td>
<td>创建集合（无索引、无序、无重复）</td>
</tr>
<tr>
<td><code>set.add(n)</code></td>
<td>插入元素</td>
</tr>
<tr>
<td><code>set.delete(2)</code></td>
<td>删除元素 <code>2</code></td>
</tr>
<tr>
<td><code>set.has(n)</code></td>
<td>判断集合中是否存在元素 <code>n</code></td>
</tr>
<tr>
<td><code>set.size</code></td>
<td>返回集合元素个数</td>
</tr>
</tbody></table>
<h2 id="Map映射"><a href="#Map映射" class="headerlink" title="Map映射"></a>Map映射</h2><table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>new Map()</code></td>
<td>创建键值对映射（键&#x2F;值可以是任意类型）</td>
</tr>
<tr>
<td><code>map.set(&#39;name&#39;, &#39;nie&#39;)</code></td>
<td>设置键值对 <code>(&#39;name&#39;, &#39;nie&#39;)</code></td>
</tr>
<tr>
<td><code>map.get(&#39;name&#39;)</code></td>
<td>返回键 <code>&#39;name&#39;</code> 对应的值 <code>&#39;nie&#39;</code></td>
</tr>
<tr>
<td><code>map.has(&#39;age&#39;)</code></td>
<td>判断是否存在键 <code>&#39;age&#39;</code></td>
</tr>
<tr>
<td><code>map.delete(&#39;age&#39;)</code></td>
<td>删除键 <code>&#39;age&#39;</code> 对应的键值对</td>
</tr>
<tr>
<td><code>map.size</code></td>
<td>返回映射元素个数</td>
</tr>
</tbody></table>
<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>()</span><br><span class="line">date.<span class="title function_">getFullYear</span>()<span class="comment">//=2025</span></span><br><span class="line">date.<span class="title function_">getMonth</span>()<span class="comment">//→0(0表示1月)</span></span><br><span class="line">date.<span class="title function_">getDate</span>()<span class="comment">//→1</span></span><br><span class="line">date.<span class="title function_">getDay</span>()<span class="comment">//→0(0表示星期日)</span></span><br><span class="line">date.<span class="title function_">getTime</span>()<span class="comment">//=1704128000000(时间戳，毫秒)</span></span><br><span class="line">date.<span class="title function_">setFullYear</span>(<span class="number">2020</span>)<span class="comment">//=1577836800000</span></span><br><span class="line">date.<span class="title function_">setMonth</span>(date.<span class="title function_">getMonth</span>()+<span class="number">1</span>)<span class="comment">// 可进行计算</span></span><br><span class="line">date&gt;<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2020</span>，<span class="number">0</span>，<span class="number">1</span>)<span class="comment">//true，可进行比较</span></span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="flat-扁平化数组"><a href="#flat-扁平化数组" class="headerlink" title="flat()扁平化数组"></a>flat()扁平化数组</h3><p>flat() 是 JavaScript中用于扁平化数组的方法，其核心功能是将嵌套的数组展开为指定深度的单层数组<br>语法：<code>array.flat(depth);</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, [<span class="number">4</span>]]]];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">flat</span>(<span class="number">1</span>)); <span class="comment">// 输出：[1, 2, [3, [4]]]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">flat</span>(<span class="number">2</span>)); <span class="comment">// 输出：[1, 2, 3, [4]]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">flat</span>(<span class="number">3</span>)); <span class="comment">// 输出：[1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<h1 id="常遇到的场景"><a href="#常遇到的场景" class="headerlink" title="常遇到的场景"></a>常遇到的场景</h1><h2 id="数组合并并去重"><a href="#数组合并并去重" class="headerlink" title="数组合并并去重"></a>数组合并并去重</h2><ol>
<li>使用 Set 集合 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> arr3 = [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br></pre></td></tr></table></figure></li>
<li>Set 结合扩展运算符<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mergedArray = [...<span class="keyword">new</span> <span class="title class_">Set</span>([...arr1, ...arr2, ...arr3])];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergedArray); <span class="comment">// 输出: [1, 2, 3, 4, 5, 6, 7]</span></span><br></pre></td></tr></table></figure></li>
<li>concat 和 Set<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mergedArray = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr1.<span class="title function_">concat</span>(arr2, arr3))];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergedArray); <span class="comment">// 输出: [1, 2, 3, 4, 5, 6, 7]</span></span><br></pre></td></tr></table></figure>
<strong>如果数组数量多，可以用 apply 动态合并</strong><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arrays = [arr1, arr2, arr3];</span><br><span class="line"><span class="keyword">const</span> merged = [].<span class="property">concat</span>.<span class="title function_">apply</span>([], arrays);</span><br><span class="line"><span class="keyword">const</span> result = [...<span class="keyword">new</span> <span class="title class_">Set</span>(merged)];</span><br><span class="line">可以合并成：</span><br><span class="line"><span class="keyword">const</span> mergedArray = [...<span class="keyword">new</span> <span class="title class_">Set</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">concat</span>.<span class="title function_">apply</span>([], [arr1, arr2, arr3]))];</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>reduce+includes<br>reduce方法：用于将数组 “累积” 成一个单一的值（比如求和、合并等）；acc（累加器），curr（当前项），基本结构：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">累加器, 当前项</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 处理逻辑</span></span><br><span class="line">  <span class="keyword">return</span> 累加器; <span class="comment">// 返回更新后的累加器</span></span><br><span class="line">&#125;, 初始值);</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mergedArray = [arr1, arr2, arr3].<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, curr</span>) =&gt;</span> &#123;</span><br><span class="line">  curr.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!acc.<span class="title function_">includes</span>(item)) acc.<span class="title function_">push</span>(item);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergedArray); <span class="comment">// 输出: [1, 2, 3, 4, 5, 6, 7]</span></span><br></pre></td></tr></table></figure>
<h2 id="对象转数组"><a href="#对象转数组" class="headerlink" title="对象转数组"></a>对象转数组</h2><h3 id="提取键Object-keys"><a href="#提取键Object-keys" class="headerlink" title="提取键Object.keys()"></a>提取键Object.keys()</h3><p>Object.keys()可以提取对象的所有键，并返回一个数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(keys); <span class="comment">// 输出: [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</span></span><br></pre></td></tr></table></figure>
<h3 id="提取值Object-values"><a href="#提取值Object-values" class="headerlink" title="提取值Object.values()"></a>提取值Object.values()</h3><p>Object.values 可以提取对象的所有值，并返回一个数组</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> values = <span class="title class_">Object</span>.<span class="title function_">values</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// 输出: [1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<h3 id="提取键值对Object-entries"><a href="#提取键值对Object-entries" class="headerlink" title="提取键值对Object.entries()"></a>提取键值对Object.entries()</h3><p>Object.entries 返回一个二维数组，每个子数组包含键和值</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> entries = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(entries); <span class="comment">// 输出: [[&quot;a&quot;, 1], [&quot;b&quot;, 2], [&quot;c&quot;, 3]]</span></span><br><span class="line">用途：</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;key&#125;</span>: <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出:</span></span><br><span class="line"><span class="comment">// a: 1</span></span><br><span class="line"><span class="comment">// b: 2</span></span><br><span class="line"><span class="comment">// c: 3</span></span><br></pre></td></tr></table></figure>
<h3 id="转换为键值对对象数组"><a href="#转换为键值对对象数组" class="headerlink" title="转换为键值对对象数组"></a>转换为键值对对象数组</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> arr = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj).<span class="title function_">map</span>(<span class="function">(<span class="params">[k, v]</span>) =&gt;</span> (&#123; [k]: v &#125;));</span><br><span class="line"><span class="comment">// 输出: [&#123;name: &quot;Alice&quot;&#125;, &#123;age: 30&#125;]</span></span><br></pre></td></tr></table></figure>
<h2 id="数组变字符串"><a href="#数组变字符串" class="headerlink" title="数组变字符串"></a>数组变字符串</h2><h3 id="使用-join-方法"><a href="#使用-join-方法" class="headerlink" title="使用 join() 方法"></a>使用 join() 方法</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> str = arr.<span class="title function_">join</span>(<span class="string">&quot;,&quot;</span>); <span class="comment">// 使用逗号作为分隔符</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str); <span class="comment">// 输出: &quot;1,2,3,4&quot;</span></span><br><span class="line">没有分隔符（直接拼接）</span><br><span class="line"><span class="keyword">const</span> str2 = arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>); <span class="comment">// 输出: &quot;1234&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="toString-方法"><a href="#toString-方法" class="headerlink" title="toString 方法"></a>toString 方法</h3><p>toString 是数组的原型方法，将数组元素转换为逗号分隔的字符串</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="title function_">toString</span>()); <span class="comment">// &quot;1,2,3&quot;</span></span><br></pre></td></tr></table></figure>
<p>对于多维数组，toString 会递归展开为一维字符串：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr2d = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>]];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr2d.<span class="title function_">toString</span>()); <span class="comment">// &quot;1,2,3,4&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="对象变字符串"><a href="#对象变字符串" class="headerlink" title="对象变字符串"></a>对象变字符串</h2><h3 id="JSON-stringify"><a href="#JSON-stringify" class="headerlink" title="JSON.stringify"></a>JSON.stringify</h3><p>将对象转换为 JSON 格式的字符串<br><code>JSON.stringify(obj, replacer, space);</code><br>replacer：可选参数，用于筛选或转换数据（函数或数组）<br>space：可选参数，控制缩进（数字或字符串）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> str = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str); <span class="comment">// 输出: &#x27;&#123;&quot;a&quot;:1,&quot;b&quot;:2,&quot;c&quot;:3&#125;&#x27;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>面试题</category>
        <category>js+ts</category>
        <category>高频api</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>高频api</tag>
      </tags>
  </entry>
  <entry>
    <title>碎碎念小册子</title>
    <url>/2025/05/11/32-%E7%A2%8E%E7%A2%8E%E5%BF%B5%E5%B0%8F%E5%86%8C%E5%AD%90/</url>
    <content><![CDATA[<h1 id="零零碎碎"><a href="#零零碎碎" class="headerlink" title="零零碎碎"></a>零零碎碎</h1><h2 id="小知识"><a href="#小知识" class="headerlink" title="小知识"></a>小知识</h2><p>放到store中的数据是一种内存缓存，刷新会消失，要一直存在要进行本地缓存<br><strong>_是一种程序员之间默认的协定，属于实例自己的私有数据</strong></p>
<h2 id="前后端分离项目认识"><a href="#前后端分离项目认识" class="headerlink" title="前后端分离项目认识"></a>前后端分离项目认识</h2><ul>
<li>前后端分离：前后端的代码没有任何交集</li>
<li>前后端分离，人也分离，有很多时间要和后端沟通，有小细节后端很可能没传过来，这时候就需要找后端</li>
<li><mark>先把结构搭出来，在和后端给的数据做对比，如果返回数据很乱，用一个映射的工具函数把很乱的数据处理成自己想要的格式，再把数据放进界面展示</mark>&gt;</li>
<li>在项目里配置某个版本的node，这个项目跑的是它，不被全局安装的影响</li>
</ul>
<h2 id="后端数据处理"><a href="#后端数据处理" class="headerlink" title="后端数据处理"></a>后端数据处理</h2><p>后端数据不要直接拿过来展示，要有分层的思想，中间用一层做转换，这样哪怕后端数据变了也好处理，还能返回自己期望的格式的数据</p>
<p>后端返回的json格式数据，放在ts中转换网站<a href="https://transform.tools/json-to-typescript">json to ts</a></p>
<h2 id="key值最好用常量定义，难免可能拼错"><a href="#key值最好用常量定义，难免可能拼错" class="headerlink" title="key值最好用常量定义，难免可能拼错"></a>key值最好用常量定义，难免可能拼错</h2><ul>
<li>key值一般用常量，比如<code>name</code>,<code>token</code>，防止写错<br><code>export const LOGIN_TOKEN = &#39;login/token&#39;</code></li>
<li>刷新页面重新动态加载路由这里，代码一点点写完了自己检查也没问题，但功能实现不了，拜托AI老师帮我检查代码，<strong>发现use，user拼写错误，说明用常量声明key真的很重要</strong></li>
<li><mark>瞧瞧我这个截图，错拼的<code>useInfo</code>又错写成了userinfo，这种问题真的很难避免，以后一定要多多多定义常量，仔细再仔细</mark><br><img src="/postImgs/nievtcms/error1.png" alt="拼写错误啊啊啊"></li>
<li>style中子组件的根元素可以被父组件直接选中，不需要加deep；子组件背包包裹的其他父组件不能选中</li>
</ul>
<h2 id="data和函数中命名建议："><a href="#data和函数中命名建议：" class="headerlink" title=".data和函数中命名建议："></a>.data和函数中命名建议：</h2><p>接着上面刷新页面重新动态加载路由功能这里，我改着改着userMenus的数据又出问题了，<strong>对我来说最喜欢的解决办法是都在控制台答应出来然后一个个检查改</strong>，这里问AI反而没解决，我觉得是因为他不知道后端给我传的数据是什么样子的<br>而且<strong>我不该这样起名</strong>，仓库里有userMenu，函数中还用userMenu接受.data后的数据，后续代码多了发现自己会乱掉，直接改命名为userMenuResData</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//检查数据</span></span><br><span class="line"><span class="keyword">const</span> roleId = userInfo.<span class="property">data</span>.<span class="property">role</span>.<span class="property">id</span></span><br><span class="line">      <span class="keyword">const</span> userMenusResult = <span class="keyword">await</span> <span class="title function_">getRoleMenus</span>(roleId)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenusResult&#x27;</span>, userMenusResult)</span><br><span class="line">      <span class="keyword">const</span> userMenus = userMenusResult.<span class="property">data</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenus（ userMenusResult.data）&#x27;</span>, userMenus)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenus.data（ userMenusResult.data.data）&#x27;</span>, userMenus.<span class="property">data</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/nievtcms/error2.png" alt=".data问题"><br>成功解决（详细的注释在代码里score&#x2F;login.ts）：</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> roleId = userInfo.<span class="property">data</span>.<span class="property">role</span>.<span class="property">id</span></span><br><span class="line">     <span class="keyword">const</span> userMenusResult = <span class="keyword">await</span> <span class="title function_">getRoleMenus</span>(roleId)</span><br><span class="line">     <span class="keyword">const</span> userMenusData = userMenusResult.<span class="property">data</span>.<span class="property">data</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;userMenusData&#x27;</span>, userMenusData)<span class="comment">//这个是期望保存的数据</span></span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">userMenus</span> = userMenusData</span><br><span class="line"></span><br><span class="line">     localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;userInfo&#x27;</span>, <span class="variable language_">this</span>.<span class="property">userInfo</span>)</span><br><span class="line">     localCache.<span class="title function_">setCache</span>(<span class="string">&#x27;userMenus&#x27;</span>, <span class="variable language_">this</span>.<span class="property">userMenus</span>)</span><br></pre></td></tr></table></figure>
<p>下图.data问题和刷新重新加载路由解决：<br><img src="/postImgs/nievtcms/error3.png" alt=".data问题和刷新重新加载路由解决"></p>
<h2 id="浏览器本地缓存-封装缓存工具"><a href="#浏览器本地缓存-封装缓存工具" class="headerlink" title="浏览器本地缓存+封装缓存工具"></a>浏览器本地缓存+封装缓存工具</h2><p>放到store中的数据是一种内存缓存，刷新会消失，要一直存在要进行本地缓存<br>在浏览器保存token<code>localStorage.setItem(&#39;token&#39;,this.token)</code><br>但是保存对象不可以<code>localStorage.setItem(&#39;userInfo&#39;,&#123;name：&quot;nie&quot;&#125;)//&#123;Object,object&#125;` 正确的要这样</code>localStorage.setItem(‘userInfo’,JSON.stringify({name：”nie”}))<code> 同理取出对象</code>JSON.parse(localStorage.getItem(‘userInfo’))&#96;&#96;<br>如果每次缓存对象都这样很麻烦，封装缓存工具： utils&#x2F;cache.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 定义 CacheType 枚举：区分两种缓存类型（local/session）</span></span><br><span class="line"><span class="comment">//2. 创建 NieCache 类：封装通用的缓存操作方法（set/get/delete/clear）</span></span><br><span class="line"><span class="comment">//3. 根据传入的 CacheType 决定使用 localStorage 还是 sessionStorage</span></span><br><span class="line"><span class="comment">//4. 提供 setCache / getCache / deleteCache / clearCache 方法</span></span><br><span class="line"><span class="comment">//5. 创建两个实例：localCache 和 sessionCache</span></span><br><span class="line"><span class="comment">//6. 导出这两个实例，供其他模块使用</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">CacheType</span> &#123;</span><br><span class="line">  <span class="title class_">Local</span>,</span><br><span class="line">  <span class="title class_">Session</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NieCache</span> &#123;</span><br><span class="line">  <span class="attr">storage</span>: <span class="title class_">Storage</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="attr">type</span>: <span class="title class_">CacheType</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span> = <span class="keyword">type</span> === <span class="title class_">CacheType</span>.<span class="property">Local</span> ? <span class="variable language_">localStorage</span> : <span class="variable language_">sessionStorage</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span>, <span class="attr">value</span>: <span class="built_in">any</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">getCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> value = <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">    <span class="keyword">if</span> (value) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">removeCache</span>(<span class="params"><span class="attr">key</span>: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">removeItem</span>(key)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">storage</span>.<span class="title function_">clear</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> localCache = <span class="keyword">new</span> <span class="title class_">NieCache</span>(<span class="title class_">CacheType</span>.<span class="property">Local</span>)</span><br><span class="line"><span class="keyword">const</span> sessionCache = <span class="keyword">new</span> <span class="title class_">NieCache</span>(<span class="title class_">CacheType</span>.<span class="property">Session</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; localCache, sessionCache &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>后续再缓存直接<code>localCache.setCache(&#39;token&#39;,this.token)&#39;)</code><br><code>localCache.setCache(&#39;userInfo&#39;,&#123;name：&quot;nie&quot;&#125;)</code></p>
<h2 id="store为什么看不见呢（细节）"><a href="#store为什么看不见呢（细节）" class="headerlink" title="store为什么看不见呢（细节）"></a>store为什么看不见呢（细节）</h2><p>在开发main页面时，明明之前保存了但是开始看不到store，为什么呢<br>原因是刚开始开发这个页面，还没写ts,而pinia中有很多个store，在你没有使用的时候它不会出现，需要在mian页面使用（导入拿到）一下它，这样就能看到了</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useLoginStore <span class="keyword">from</span> <span class="string">&#x27;@/store/login/login&#x27;</span></span><br><span class="line"><span class="keyword">const</span> loginStore = <span class="title function_">useLoginStore</span>()</span><br><span class="line"><span class="comment">//获取菜单，同时使用loginStore了，现在页面的pinia里有菜单的数据</span></span><br><span class="line"><span class="keyword">const</span> userMenus = loginStore.<span class="property">userMenus</span></span><br></pre></td></tr></table></figure>
<h2 id="node卸载重装后hexo无法使用"><a href="#node卸载重装后hexo无法使用" class="headerlink" title="node卸载重装后hexo无法使用"></a>node卸载重装后hexo无法使用</h2><p><mark>node删除用nvm-desktop重装后，我以前项目里的node相关东西都不见了，博客hexo跑不起，需要项目里重新安装环境</mark></p>
<p>在终端<code>npm install -g hexo-cli</code>正常情况下就可以了，但是由于我环境变量配错了，绕了个大圈，具体如下；</p>
<p>安装了hexo，hexo -v找不到怎么办呢<br>下面的这些已经解决了，<strong>根本原因是我的node缓存系统变量配置错了</strong>，改正之后就好了<br>在这里我要由衷地感谢通义，他根据终端显示告诉我原因是环境变量的配置问题，帮我少走弯路<br>hexo -v显示不认识，我问AI，再遇到类似问题可以用下面的思路</p>
<blockquote>
<p>先检查npm把东西安装到了哪里<code>npm list -g --depth=0</code><br>找到<strong>hexo.cmd</strong>文件所在文件夹，添加到系统变量里，如<code>C:\Program Files\NVM Desktop\node_global\node_modules\hexo-cli\bin</code><br>还是不行，使用带扩展名的完整命令来运行 hexo.cmd -v<br>原因：但是 Windows 系统在解析 .cmd 文件时有一些限制，尤其是在某些 shell（比如 PowerShell）中，不会自动识别 .cmd 扩展名的命令，除非你在调用时加上 .cmd，或者将 .cmd 加入默认可执行扩展名列表中</p>
</blockquote>
<h2 id="element-ui使用有感"><a href="#element-ui使用有感" class="headerlink" title="element-ui使用有感"></a>element-ui使用有感</h2><ul>
<li><p>学习阶段用组件库，应该先把属性都删掉，用哪个加哪个，加深理解<br><strong>一定要理清楚嵌套关系，每部分是什么</strong></p>
</li>
<li><p>不同的ui组件之间不要随意嵌套，<strong>要用插槽</strong></p>
</li>
<li><p><strong>组件重写属性失败怎么办？</strong><br>使用element-UI时，如果组件的属性值不合心意，想在代码中覆盖，要在组件所在的类里面重写属性+ !import<br>在父类中重写会被子类覆盖，就算加了!import也不生效</p>
</li>
<li><p><strong>ui库里的小图标</strong><br>按需导入注册很麻烦，不如使用官方文档推荐的全局导入（小图标全局导入也不会占很多空间）</p>
</li>
</ul>
<p>如在一个组件中使用icon小图标，通过插槽放进去</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;el-tab-pane&gt;</span><br><span class="line">   账号密码</span><br><span class="line">     &lt;template #label&gt;</span><br><span class="line">       &lt;span class=&quot;icon&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;label&quot;&gt;</span><br><span class="line">          &lt;el-icon&gt;&lt;Watermelon /&gt;&lt;/el-icon&gt;</span><br><span class="line">          &lt;span calss=&quot;text&quot;&gt;账号登录&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"> &lt;/el-tab-pane&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>v-model<br>在绑定v-model时，多去控制台看看数据有没有绑定成功，如图<br><img src="/postImgs/nievtcms/login3.png" alt="登录组件"></li>
</ul>
<h2 id="400（Bad-Request）"><a href="#400（Bad-Request）" class="headerlink" title="400（Bad Request）"></a>400（Bad Request）</h2><p>这部分我卡了六个小时，最后发现，原<strong>因是coderwhy拼成了codewhy</strong>，可笑的是我在接口软件和终端调试请求时，用户名写的都是coderwhy，回到登录页面，每次一写的都是codewhy</p>
<p><mark>记一下处理400（Bad Request）的思路，希望以后用不到</mark></p>
<ol>
<li>传的数据和后端要接收的不一样<br>在发送post请求前添加日志，获取到的数据<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> requestBody = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(account)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;实际发送的请求体:&#x27;</span>, requestBody) <span class="comment">// 添加日志</span></span><br></pre></td></tr></table></figure></li>
<li>数据的格式不对<br>明确指定JSON格式<code>&#39;Content-Type&#39;: &#39;application/json&#39; </code></li>
<li>用接口软件，或者CMD给接口传递数据，看接口有没有问题</li>
<li>检测控制台，请求头<br>(纪念一下)<br><img src="/postImgs/nievtcms/login6.png" alt="不要再拼写错了"></li>
</ol>
<h2 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h2><p>在做vue3+ts项目时，编译器总是一不小心就爆红，都是一些细节的小问题，但目前对ts应用不是很熟悉，还是有些头疼</p>
<ol>
<li>方法形参爆红“参数隐式具有any类型”<br>比如在给store定义actions时，写了一个方法，注意参数<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="attr">acitons</span>:&#123;</span><br><span class="line">    <span class="title function_">vhangeCounterAction</span>(<span class="params">newCounter</span>)&#123;</span><br><span class="line">        his.<span class="property">counter</span>=newCounter</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
此时<code>(newCounter)</code>爆红，提示“参数隐式具有any类型”<br>解决：<br>（1）应该这样做：<code>(newCounter:any)</code><br>（2）可以修改配置，在tsconfig.json中，添加<code>&quot;noImplicitAny&quot;: false</code>，默认是true，可以改为false，这样，在定义方法时，就不需要显示的声明参数类型了（不推荐）</li>
</ol>
<h1 id="起名规范"><a href="#起名规范" class="headerlink" title="起名规范"></a>起名规范</h1><p>起名经常纠结，把常用命名记在这里，需要的时候来看</p>
<h2 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h2><p>注意：避免的常见错误，使用复数形式，和过于简写的名称</p>
<p>组件命名应该使用连字符，全小写，比如base-table，而组件文件名可能使用PascalCase</p>
<p>变量命名<br>API响应数据，如userList，表单数据userForm。<br>布尔值变量用has、is开头，比如isLoading</p>
<p>方法命名动词开头，比如handleSubmit，fetchUserList</p>
<p>ts类型或接口命名使用PascalCase+语义化名词，比如UserItem，TableColumn</p>
<p>Pinia Store的命名使用use+名词+Store，比如useUserStore</p>
<p>路由</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;userDetail&#x27;</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user-detail/:id&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/UserDetail.vue&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="常用词"><a href="#常用词" class="headerlink" title="常用词"></a>常用词</h2><p>panel控制板 acount账户<br>isRemPwd是否保存密码</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><ol>
<li>组件文件 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> <span class="comment"># 主登录表单组件</span></span><br><span class="line">AuthLoginForm.vue        <span class="comment"># PascalCase风格</span></span><br><span class="line">auth-login-form.vue      <span class="comment"># kebab-case风格</span></span><br><span class="line"><span class="comment"># 子组件</span></span><br><span class="line">AuthPasswordInput.vue    <span class="comment"># 密码输入专用组件</span></span><br><span class="line">AuthCaptcha.vue          <span class="comment"># 验证码组件</span></span><br></pre></td></tr></table></figure></li>
<li>数据相关<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 登录表单数据</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LoginFormData</span> &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">password</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">rememberMe</span>: <span class="built_in">boolean</span></span><br><span class="line">  <span class="attr">captcha</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应数据</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">LoginResponse</span> &#123;</span><br><span class="line">  <span class="attr">token</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">expiresIn</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">userInfo</span>: <span class="title class_">UserProfile</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>变量命名<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 表单数据</span></span><br><span class="line"><span class="keyword">const</span> loginForm = reactive&lt;<span class="title class_">LoginFormData</span>&gt;(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">rememberMe</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">captcha</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 状态管理</span></span><br><span class="line"><span class="keyword">const</span> isLoading = <span class="title function_">ref</span>(<span class="literal">false</span>)              <span class="comment">// 加载状态</span></span><br><span class="line"><span class="keyword">const</span> isCaptchaRequired = <span class="title function_">ref</span>(<span class="literal">false</span>)      <span class="comment">// 是否需要验证码</span></span><br><span class="line"><span class="keyword">const</span> loginErrorMsg = <span class="title function_">ref</span>(<span class="string">&#x27;&#x27;</span>)             <span class="comment">// 错误提示</span></span><br></pre></td></tr></table></figure></li>
<li>方法&#x2F;函数<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 提交处理</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLoginSubmit</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    isLoading.<span class="property">value</span> = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">submitLogin</span>(loginForm)</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">handleLoginError</span>(error)</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    isLoading.<span class="property">value</span> = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证码</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">refreshCaptcha</span> = (<span class="params"></span>) =&gt; &#123; <span class="comment">/*...*/</span> &#125;</span><br></pre></td></tr></table></figure></li>
<li>密码相关<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 密码强度提示</span></span><br><span class="line"><span class="keyword">const</span> passwordStrength = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">calculateStrength</span>(loginForm.<span class="property">password</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 显示/隐藏密码</span></span><br><span class="line"><span class="keyword">const</span> isPasswordVisible = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">togglePasswordVisibility</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  isPasswordVisible.<span class="property">value</span> = !isPasswordVisible.<span class="property">value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>注册流程<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 注册表单</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">RegisterFormData</span> <span class="keyword">extends</span> <span class="title class_">LoginFormData</span> &#123;</span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">confirmPassword</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册API</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">submitRegistration</span> = <span class="keyword">async</span> (<span class="params"><span class="attr">form</span>: <span class="title class_">RegisterFormData</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册协议勾选</span></span><br><span class="line"><span class="keyword">const</span> isAgreementAccepted = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="comment">//是否记住密码（是否保持）</span></span><br><span class="line"><span class="keyword">const</span> isKeepPwd = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br><span class="line"><span class="keyword">const</span> isRemPws = <span class="title function_">ref</span>(<span class="literal">false</span>)</span><br></pre></td></tr></table></figure></li>
<li>验证规则<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 集中式验证规则</span></span><br><span class="line"><span class="keyword">const</span> validationRules = &#123;</span><br><span class="line">  <span class="attr">username</span>: [</span><br><span class="line">    &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入用户名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">min</span>: <span class="number">4</span>, <span class="attr">max</span>: <span class="number">16</span>, <span class="attr">message</span>: <span class="string">&#x27;长度在4到16个字符&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">password</span>: [</span><br><span class="line">    &#123; <span class="attr">validator</span>: checkPasswordComplexity, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义验证函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkPasswordComplexity</span> = (<span class="params"><span class="attr">rule</span>: <span class="built_in">any</span>, <span class="attr">value</span>: <span class="built_in">string</span>, <span class="attr">callback</span>: <span class="built_in">any</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="regexp">/(?=.*[A-Z])/</span>.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;必须包含大写字母&#x27;</span>))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>错误处理<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 错误码映射</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">LOGIN_ERROR_CODES</span> = &#123;</span><br><span class="line">  <span class="number">1001</span>: <span class="string">&#x27;用户名不存在&#x27;</span>,</span><br><span class="line">  <span class="number">1002</span>: <span class="string">&#x27;密码错误&#x27;</span>,</span><br><span class="line">  <span class="number">1003</span>: <span class="string">&#x27;验证码已过期&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 统一错误处理器</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLoginError</span> = (<span class="params"><span class="attr">error</span>: <span class="title class_">ApiError</span></span>) =&gt; &#123;</span><br><span class="line">  loginErrorMsg.<span class="property">value</span> = <span class="variable constant_">LOGIN_ERROR_CODES</span>[error.<span class="property">code</span>] || <span class="string">&#x27;未知错误&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>CSS类名规范<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">// BEM风格示例</span></span><br><span class="line"><span class="selector-class">.auth-page</span> &#123;</span><br><span class="line">  &amp;__header &#123;</span><br><span class="line">    <span class="comment">// 页面头部样式</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  &amp;__form-container &#123;</span><br><span class="line">    <span class="comment">// 表单容器</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  &amp;__submit-btn &#123;</span><br><span class="line">    <span class="comment">// 提交按钮</span></span><br><span class="line">    &amp;<span class="attr">--loading</span> &#123;</span><br><span class="line">      <span class="comment">// 加载状态样式</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>myself</category>
      </categories>
  </entry>
  <entry>
    <title>软件和环境配置小记</title>
    <url>/2025/04/09/33-ready/</url>
    <content><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近又在电脑上搭建一些环境，小记录一下注意事项，详细步骤网上有很多文档，去看就好</p>
<h2 id="nvm-desktop（node-js版本管理工具）"><a href="#nvm-desktop（node-js版本管理工具）" class="headerlink" title="nvm-desktop（node.js版本管理工具）"></a>nvm-desktop（node.js版本管理工具）</h2><p>开源地址 <code>https://github.com/1111mp/nvm-desktop</code><br>在里面看中文文档，下载地址，我的windows AMD64系统下载的是<code>NVM.Desktop_4.0.8_x64-setup.exe</code><br>在安装前要卸载掉全局安装的node.js和npm<br>不用管pnpm,pnpm 本身是独立于 Node.js 的包管理器，但它依赖于 Node.js 环境。如果你卸载了全局的 Node.js，通过全局安装的 pnpm 会失效，后面重新安装即可<br>我把原来的<code>node-v20.17.0.msi</code>复制到了U盘，本地卸载<br>删掉了关于node.js的环境变量<br><img src="/./postImgs/other/node1.png" alt="删掉了关于node.js的环境变量"><br><img src="/./postImgs/other/node2.png" alt="删掉了关于node.js的环境变量"></p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>(安装配置我看的这个)[<a href="https://blog.csdn.net/qq_26408545/article/details/139975137?fromshare=blogdetail&sharetype=blogdetail&sharerId=139975137&sharerefer=PC&sharesource=Catherine_77&sharefrom=from_link%5D">https://blog.csdn.net/qq_26408545/article/details/139975137?fromshare=blogdetail&amp;sharetype=blogdetail&amp;sharerId=139975137&amp;sharerefer=PC&amp;sharesource=Catherine_77&amp;sharefrom=from_link]</a></p>
<ol>
<li><p>双击安装<br>双击后我安装到了这里<code>C:\Program Files\NVM Desktop</code></p>
</li>
<li><p>配置系统变量<br>但是配置变量，我的C盘下电脑用户是<code>用户</code>两个汉字，还无法修改，感觉要出问题阿<br><img src="/./postImgs/other/nvm1.png" alt="nvm配置"><br>修改路径，然后下一个，设为默认,点击更多-应用<br><img src="/./postImgs/other/nvm2.png" alt="nvm配置"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">系统变量里：</span><br><span class="line">NVMD_DIR ，配置 Path 添加 node</span><br><span class="line">NVMD_DIR的路径：C:\Users\你电脑的用户\.nvmd</span><br><span class="line">Path 添加 %NVMD_DIR%\bin</span><br></pre></td></tr></table></figure>
<p>终端检查一下，我的结果如下，成功<br><img src="/./postImgs/other/nvm3.png" alt="nvm配置"></p>
</li>
<li><p>设置缓存路径<br>安装nvm-desktop 的文件夹下 新建文件夹 node_global 和 node_cache</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">C:\Users\Administrator&gt;npm config <span class="built_in">set</span> prefix <span class="string">&quot;C:\Program Files\NVM Desktop\node_global&quot;</span></span><br><span class="line"></span><br><span class="line">C:\Users\Administrator&gt;npm config <span class="built_in">set</span> cache <span class="string">&quot;C:\Program Files\NVM Desktop\node_cache&quot;</span></span><br></pre></td></tr></table></figure></li>
<li><p>将缓存路径加入到环境变量path里<br><code>C:\Program Files\NVM Desktop\node_global</code><br><strong>注意：一定要放在 %NVMD_DIR%\bin 前面</strong><br>环境变量配置原则：npm的缓存路径 在nvmd的环境变量之前，否则一直找nvmd内的yarn<br>（下面的我写错啦，是<code>C:\Program Files\NVM Desktop\node_global</code>不是D盘的那个）<br><img src="/./postImgs/other/nvm4.png" alt="nvm配置"></p>
</li>
<li><p>换版本测试<br>下载一个其他版本并应用，在终端检查node和npm的版本，确实都变了，如下图，成功啦<br><img src="/./postImgs/other/nvm5.png" alt="nvm配置"></p>
</li>
</ol>
<p><mark>node删除重装后，我以前项目里的node相关东西都不见了，包括这个博客hexo跑不起，需要项目里重新安装环境</mark></p>
<p>首先在hexo博客终端<code>npm install -g hexo-cli</code><br>但是安装了hexo，hexo -v找不到怎么办呢</p>
<blockquote>
<p>下面的这些已经解决了，根本原因是我的node缓存系统变量配置错了，改正之后就好了<br>在这里我要由衷地感谢通义，他根据终端显示告诉我原因是环境变量的配置问题，帮我少走弯路<br>如果再遇到类似的情况，可以用下面的思路<br>但是hexo还是显示不认识，我问AI，让我：<br>先检查npm把东西安装到了哪里<code>npm list -g --depth=0</code><br>找到<strong>hexo.cmd</strong>文件所在文件夹，添加到系统变量里，如<code>C:\Program Files\NVM Desktop\node_global\node_modules\hexo-cli\bin</code><br>还是不行，使用带扩展名的完整命令来运行 hexo.cmd -v<br>原因：但是 Windows 系统在解析 .cmd 文件时有一些限制，尤其是在某些 shell（比如 PowerShell）中，不会自动识别 .cmd 扩展名的命令，除非你在调用时加上 .cmd，或者将 .cmd 加入默认可执行扩展名列表中</p>
</blockquote>
<h2 id="Navicat-导入数据"><a href="#Navicat-导入数据" class="headerlink" title="Navicat 导入数据"></a>Navicat 导入数据</h2><p>很easy但用总会找不到地方<br><img src="/./postImgs/other/sql1.png" alt="Navicat 导入数据库"></p>
<h2 id="vue-pure-admin框架"><a href="#vue-pure-admin框架" class="headerlink" title="vue-pure-admin框架"></a>vue-pure-admin框架</h2><p>(一个很厉害的后台管理框架)[<a href="https://pure-admin.cn/pages/introduction/]">https://pure-admin.cn/pages/introduction/]</a></p>
<blockquote>
<p>vue-pure-admin (opens new window)是一款开源完全免费且开箱即用的中后台管理系统模版。完全采用 ECMAScript 模块（ESM）规范来编写和组织代码，使用了最新的 Vue3、Vite、Element-Plus、TypeScript、Pinia、Tailwindcss 等主流技术开发</p>
</blockquote>
<p>仓库： <a href="https://github.com/pure-admin/vue-pure-admin">https://github.com/pure-admin/vue-pure-admin</a><br>在线地址： <a href="https://pure-admin.github.io/vue-pure-admin/">https://pure-admin.github.io/vue-pure-admin/</a><br>教程文档： <a href="https://pure-admin.cn/">https://pure-admin.cn/</a><br>面向业务的二次封装组件库： <a href="https://github.com/plus-pro-components/plus-pro-components">https://github.com/plus-pro-components/plus-pro-components</a></p>
<h2 id="Redis使用"><a href="#Redis使用" class="headerlink" title="Redis使用"></a>Redis使用</h2><p>在安装包同文件夹里有配置步骤笔记，这里只写注意事项<br>如何使用：<br>redis要先启动start.bat，再在这个目录终端里面跑连接代码</p>
<ol>
<li>双击<code>start.bat</code>启动服务</li>
<li>win+x选择终端管理员，cd到安装目录下（直接在目录里打开终端更方便）</li>
<li>连接命令 <figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">\redis-cli.exe -h 127.0.0.1 -p 6379</span><br><span class="line"><span class="comment"># -h 后面跟数据库的主机地址</span></span><br><span class="line"><span class="comment"># -p 后面跟数据库的端口</span></span><br></pre></td></tr></table></figure>
 <img src="/./postImgs/other/redis2.png" alt="Redis"><br>成功显示：<br> <img src="/./postImgs/other/redis1.png" alt="Redis"></li>
</ol>
<h2 id="配置数据库开启可远程访问"><a href="#配置数据库开启可远程访问" class="headerlink" title="配置数据库开启可远程访问"></a>配置数据库开启可远程访问</h2><p>开启远程访问很检查，只需要将你要远程访问的用户名的host修改成%即可，比如我们现在要开启root用<br>户的远程访问，可以按照下面的步骤操作</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 用到的sql语句</span></span><br><span class="line">use mysql;</span><br><span class="line"> <span class="keyword">select</span> `user`,`host` from `user`;</span><br><span class="line"> update `user` <span class="built_in">set</span> `host`=<span class="string">&#x27;%&#x27;</span> <span class="built_in">where</span> `user`=<span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>注意：use mysql切换到mysql数据库,不然会报错</p>
<blockquote>
<p>ERROR 1046 (3D000): No database selected<br>说明你未指定操作的数据库。mysql.user 表属于 mysql 系统数据库，因此需要先使用 USE mysql; 选择数据库。(如下图，已解决)</p>
</blockquote>
<p><img src="/./postImgs/other/maven1.png" alt="Redis"></p>
<h2 id="npm安装指定版本"><a href="#npm安装指定版本" class="headerlink" title="npm安装指定版本"></a>npm安装指定版本</h2><p>npm install <a href="mailto:&#110;&#x70;&#x6d;&#x40;&#x36;&#46;&#x31;&#x34;&#46;&#49;&#48;">&#110;&#x70;&#x6d;&#x40;&#x36;&#46;&#x31;&#x34;&#46;&#49;&#48;</a> –save-exact<br>装指定版本的 npm（仅限本地项目）–save-exact 确保版本号精确锁定</p>
<h2 id="maven配置"><a href="#maven配置" class="headerlink" title="maven配置"></a>maven配置</h2><p>我看的B站教学视频【Maven 的安装与下载，配置 idea】[<a href="https://www.bilibili.com/video/BV1V5411q7ka/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750%5D">https://www.bilibili.com/video/BV1V5411q7ka/?share_source=copy_web&amp;vd_source=7f88ea4ee6a402338b0a4e09fbb81750]</a></p>
<p>一些配置截图在这里：<br><img src="/./postImgs/other/maven1.png" alt="maven"><br><img src="/./postImgs/other/maven2.png" alt="maven"></p>
<p>后端打包用maven:<br><code> mvn -v</code>看本版<br><code> mvn clean install</code><br><code> mvn clean package</code>打包</p>
]]></content>
      <categories>
        <category>myself</category>
      </categories>
  </entry>
  <entry>
    <title>开发效率工具集</title>
    <url>/2025/03/20/34-%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7%E9%9B%86/</url>
    <content><![CDATA[<h2 id="常用快捷键"><a href="#常用快捷键" class="headerlink" title="常用快捷键"></a>常用快捷键</h2><h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><ul>
<li>调出 vscode 的 npm 脚本菜单栏（vscode为我们集成好可视化的，可点击的 npm 命令栏了）<br><img src="/./postImgs/other/npm01.png" alt="删掉了关于node.js的环境变量"></li>
<li>通过命令面板调出 npm 脚本<br>打开命令面板：<br>使用快捷键 Ctrl + Shift + P<br>搜索并运行命令：NPM: Show NPM Scripts Explorer </li>
<li>调出当前终端:  ctrl+~</li>
<li>查找文件：ctrl+p</li>
<li>调用命令的快捷键： Ctrl+Shift+P</li>
<li>重启vscode： reloadwindow</li>
<li>打开个人用户全局配置： openusersetjson（会打开seetings.json文件，里面有个人配置建议保存，以后重装系统或者别的地方也可以用这些配置）<br>运行生成工作区文件的命令<br>create-code-workspace 命令</li>
</ul>
<h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>拉取远程仓库的代码 git fetch -p（拉取最新分支，删除本地的旧分支）<br>合并来自主分支的代码<code>git merge origin/f1</code>先进入到你自己所在的业务分支</p>
<ul>
<li>合并远程分支的代码<blockquote>
<p>组长更新了前端f1主分支，请问我应该做什么<br>先拉取拉取远程仓库的代码 git fetch -p，然后切换到自己的业务分支，合并代码git merge origin&#x2F;f1<br>在工作区根目录内进入终端</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 保存当前全部文件 进入git暂存区</span></span><br><span class="line">git add .</span><br><span class="line"><span class="comment"># 使用全局依赖 commitizen 和 cz-git ，开始编写git commit</span></span><br><span class="line">cz</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="PNPM常用命令"><a href="#PNPM常用命令" class="headerlink" title="PNPM常用命令"></a>PNPM常用命令</h3><ul>
<li>根据package.json的packageManager字段来决定当前node项目使用哪款包管理器还有.npmrc文件</li>
<li>包管理器+运行命令</li>
<li>安装项目依赖pnpm i（会从package.json中读取依赖包版本安装）</li>
<li>全局安装 pnpm i -g 具体安装名</li>
<li>卸载依赖  pnpm uninstall 具体包名,对于新项目，首先初始化</li>
<li>过滤<br>pnpm 允许你对工作区中的特定包执行命令。这对于多包仓库（monorepos）非常有用<br><code>pnpm run &lt;script&gt; --filter &lt;package_name&gt;</code></li>
<li>-P 或 –prod 选项用于仅安装生产环境所需的依赖项，忽略开发依赖项<br><code>pnpm install -P</code></li>
<li>-D 或 –dev 选项用于安装并添加包到 devDependencies 中，即开发依赖<br><code>pnpm add &lt;package_name&gt; -D</code></li>
<li>-F 或 –filter 选项允许你在 monorepo 环境中针对特定包运行命令<br><code>pnpm install lodash -F package-a</code></li>
<li>pnpm rm 用于卸载包。这与 npm uninstall 类似<br><code>pnpm rm 用于卸载包。这与 npm uninstall 类似</code></li>
<li>pnpm dlx 可以用来临时运行某个包，而不需要全局安装或将其添加到项目依赖中。非常适合尝试工具或脚本<br><code>pnpm dlx create-react-app my-app</code></li>
</ul>
<h3 id="以commitizen为中心的-git-提交格式化工具"><a href="#以commitizen为中心的-git-提交格式化工具" class="headerlink" title="以commitizen为中心的 git 提交格式化工具"></a>以commitizen为中心的 git 提交格式化工具</h3><p>commitizen，简称 cz，他用于管控我们 git commite 提交<br>这位佬好厉害<a href="https://notes.ruan-cat.com/cz/">https://notes.ruan-cat.com/cz/</a></p>
<h2 id="pnpm-安装依赖-工具集"><a href="#pnpm-安装依赖-工具集" class="headerlink" title="pnpm 安装依赖+工具集"></a>pnpm 安装依赖+工具集</h2><p><code>pnpm ls -g</code>查看全部pnpm依赖<br>装以下这些 全局依赖<br>一次性安装全部：<code>pnpm install -g cz-git rimraf turbo vercel degit</code></p>
<blockquote>
<p>cz-git	Git 提交规范工具，配合 commitizen 使用<br>rimraf	跨平台的 rm -rf，用于删除文件夹<br>turbo	高性能的构建系统<br>vercel	部署前端项目的 CLI（支持 Vercel 平台）<br>degit	快速克隆 Git 仓库模板，不带 git 历史<br>Corepack 是 Node.js 的一个特性，它旨在简化包管理器（如 npm、Yarn 和 pnpm）的版本管理，Corepack 允许开发者更容易地在不同的项目中使用特定版本的包管理器<br>当你运行像 npm install 或 yarn install 这样的命令时，Corepack 会根据项目的配置自动选择正确的包管理器版本</p>
</blockquote>
<h2 id="工具集"><a href="#工具集" class="headerlink" title="工具集"></a>工具集</h2><h3 id="算法执行学习可视化网站"><a href="#算法执行学习可视化网站" class="headerlink" title="算法执行学习可视化网站"></a>算法执行学习可视化网站</h3><p><a href="https://visualgo.net/zh">算法执行学习可视化网站，可以实现执行的暂停和继续</a></p>
<h3 id="组长阮喵喵的技术文档"><a href="#组长阮喵喵的技术文档" class="headerlink" title="组长阮喵喵的技术文档"></a>组长阮喵喵的技术文档</h3><p><a href="https://docs-01-star.ruan-cat.com/11/technical-doc.html">组长阮喵喵的技术文档</a></p>
<h3 id="monorepo"><a href="#monorepo" class="headerlink" title="monorepo"></a>monorepo</h3><p>monorepo是前端项目的一种组织方式，是一种架构<br>(B站视频)[<a href="https://www.bilibili.com/video/BV1Aj411h7F2/]">https://www.bilibili.com/video/BV1Aj411h7F2/]</a><br>(官方文档)[<a href="https://turborepo.com/docs/crafting-your-repository]">https://turborepo.com/docs/crafting-your-repository]</a></p>
<h3 id="lodash"><a href="#lodash" class="headerlink" title="lodash"></a>lodash</h3><p>Lodash 是一个一致性、模块化、高性能的 JavaScript 实用工具库，而 lodash-es 则是 Lodash 的 ES 模块版本，适合用于现代 JavaScript 开发环境<br><code>npm install lodash-es</code></p>
<ul>
<li><a href="https://juejin.cn/post/6844904116544618503">引入方式</a></li>
<li>merge<br>merge函数用于将源对象的可枚举属性合并到目标对象中。如果属性值本身也是对象，则会递归地进行深度合并<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; merge &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash-es&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">object</span> = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">1</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> other = &#123; <span class="attr">a</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">merge</span>(<span class="built_in">object</span>, other);</span><br><span class="line"><span class="comment">// 结果将是 &#123; a: &#123; b: 1, c: 2 &#125; &#125;</span></span><br></pre></td></tr></table></figure></li>
<li>isUndefined<br>isUndefined 函数用来检查给定的值是否为 undefined,在处理可能未定义的数据时有帮助<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; isUndefined &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash-es&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isUndefined</span>(<span class="literal">undefined</span>)); <span class="comment">// 输出 true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isUndefined</span>(<span class="literal">null</span>)); <span class="comment">// 输出 false</span></span><br></pre></td></tr></table></figure></li>
<li>isNil<br>isNil 函数用于检查给定值是否为 null 或者 undefined。这对于确保数据存在性检查特别有用<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">isNil 函数用于检查给定值是否为 <span class="literal">null</span> 或者 <span class="literal">undefined</span>。这对于确保数据存在性检查特别有用。</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Turbo-的主要功能"><a href="#Turbo-的主要功能" class="headerlink" title="Turbo 的主要功能"></a>Turbo 的主要功能</h3><ul>
<li>任务调度:<br>Turborepo 中的 Turbo 可以根据依赖关系图并行或串行地运行任务，从而优化构建和脚本执行的时间。</li>
<li>缓存机制：<br>Turbo 能够缓存任务输出，这样如果输入没有变化，它可以直接使用缓存的结果而不是重新执行任务，极大地提高了重复构建的速度</li>
<li>Turbo 使用一个名为 turbo.json 的配置文件，放置于 monorepo 的根目录下。以下是一个简单的例子<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;pipeline&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;dependsOn&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;^build&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;dist/**&quot;</span><span class="punctuation">,</span> <span class="string">&quot;.next/**&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;outputs&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在这个配置文件中，pipeline 定义了可以被 Turbo 执行的任务列表。每个任务（例如 build, lint, test）可以定义一些属性，如 dependsOn 表示该任务依赖于其他任务完成之后才能执行；outputs 则指定了哪些文件或目录是该任务的输出结果，这些通常会被缓存。</p>
</blockquote>
</li>
</ul>
<h3 id="vueuse"><a href="#vueuse" class="headerlink" title="vueuse"></a>vueuse</h3><p><a href="https://vueuse.org/integrations/useAxios/">组合式api的工具</a></p>
<h3 id="阮喵喵自己封装的工具包。重点学会使用接口请求工具"><a href="#阮喵喵自己封装的工具包。重点学会使用接口请求工具" class="headerlink" title="阮喵喵自己封装的工具包。重点学会使用接口请求工具"></a>阮喵喵自己封装的工具包。重点学会使用接口请求工具</h3><p><a href="https://utils.ruan-cat.com/vueuse/useAxios/">阮喵喵组长自己封装的工具包。重点学会使用接口请求工具。</a></p>
]]></content>
      <categories>
        <category>myself</category>
      </categories>
  </entry>
  <entry>
    <title>JavaScript面试题</title>
    <url>/2025/05/20/24-js%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<h3 id="1-js的数据类型有哪些以及它们的区别"><a href="#1-js的数据类型有哪些以及它们的区别" class="headerlink" title="1.js的数据类型有哪些以及它们的区别"></a>1.js的数据类型有哪些以及它们的区别</h3><p><strong>有7种原始类型：String,Number,Boolean,Undefined,Null,Symbol,BigInt和引用类型：Object、Array、Function</strong></p>
<ul>
<li><p>Symbol和BigInt是ES6,ES11新增的数据类型</p>
</li>
<li><ul>
<li>Symbol代表创建后不可变的独一无二的数据类型，为了解决可能出现的全局变量冲突的问题</li>
</ul>
</li>
<li><ul>
<li>BigInt表示任意精度格式的整数，可以更安全地存储和操作大整数</li>
</ul>
</li>
<li><p><strong>可以分为原始数据类型和引用数据类型</strong></p>
</li>
<li><ul>
<li>原始数据类型：<br>放在栈区（栈区内存由编译器自动分配释放，栈区数据先进后出），属于大小固定，频繁被使用的数据<br> String,Bumber,Boolean,Undefined,NullSymbol,BigInt</li>
</ul>
</li>
<li><ul>
<li>引用数据类型：<br>放在堆区，（堆区内存由程序员分配释放或垃圾回收机制回收，堆按照优先级进行排序）</li>
</ul>
</li>
</ul>
<p><img src="/postImgs/other/jstype1.png" alt="闭包"></p>
<h3 id="2-let-const-var区别"><a href="#2-let-const-var区别" class="headerlink" title="2.let&#x2F;const&#x2F;var区别"></a>2.let&#x2F;const&#x2F;var区别</h3><p>var 是老版本 JavaScript 的变量声明方式，容易因为作用域和提升导致问题；<br>let 和 const 是 ES6 引入的新特性，推荐优先使用。<br>let 可以重新赋值，但不能重复声明；const 不能重新赋值，适合声明常量。<br>比如在循环或条件语句中，用 let 可以避免变量泄露成全局作用域</p>
<h3 id="3-闭包"><a href="#3-闭包" class="headerlink" title="3.闭包"></a>3.闭包</h3><p><strong>闭包就是函数能记住它创建时的环境</strong>。<br>外面可以读取数据，但是不能修改。在实际开发中，<strong>闭包的主要作用是保存变量的状态，实现数据的私有化和模块化，</strong>或者在异步操作中保存上下文，<strong>实现数据的私有，保护数据，封装私有状态</strong></p>
<p>一般闭包都是由一个函数包起来的（如这里的outer）对里面的变量起到保护作用<br>闭包应用：实现节流和防抖</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> increment = <span class="title function_">outer</span>();</span><br><span class="line"><span class="title function_">increment</span>(); <span class="comment">// 输出 1</span></span><br><span class="line"><span class="title function_">increment</span>(); <span class="comment">// 输出 2</span></span><br></pre></td></tr></table></figure>
<p>在F12－&gt;Sources－&gt;右侧的Scope下面的Closure中可以看到闭包</p>
<h4 id="闭包必须return吗"><a href="#闭包必须return吗" class="headerlink" title="闭包必须return吗"></a>闭包必须return吗</h4><p>闭包不一定要return，如果外部想要使用闭包里的变量，此时需要return把值返出去<br><img src="/postImgs/other/jstm01.jpg" alt="闭包"></p>
<h4 id="闭包一定会内容泄露吗"><a href="#闭包一定会内容泄露吗" class="headerlink" title="闭包一定会内容泄露吗"></a>闭包一定会内容泄露吗</h4><p><img src="/postImgs/other/jstm02.jpg" alt="闭包"></p>
<ul>
<li>闭包不一定会内存泄漏；内存泄露的场景如图，由于result没有被销毁所以count没有被销毁，count出现了内存泄露<blockquote>
<p>闭包是指函数可以访问其定义时所在词法作用域中的变量，即使在该函数执行时，这些变量已经不在作用域内。闭包的主要作用是保存变量的状态，实现数据的私有化和模块化。在JavaScript中，闭包常用于创建私有变量和方法，以及实现函数柯里化和记忆化等高级功能。需要注意的是，过度使用闭包可能会导致内存泄漏，因此在使用闭包时需要注意内存管理。</p>
</blockquote>
</li>
</ul>
<h3 id="4-和-的区别"><a href="#4-和-的区别" class="headerlink" title="4.&#x3D;&#x3D; 和 &#x3D;&#x3D;&#x3D; 的区别"></a>4.&#x3D;&#x3D; 和 &#x3D;&#x3D;&#x3D; 的区别</h3><p>&#x3D;&#x3D; 会自动转换类型再比较，比如数字和字符串会转成同一种类型再对比；而 &#x3D;&#x3D;&#x3D; 会直接判断值和类型是否完全一致。为了避免隐式转换的坑，通常用 &#x3D;&#x3D;&#x3D;，尤其是处理表单输入或 JSON 数据时，确保类型和值都正确</p>
<blockquote>
<p>&#x3D;&#x3D;（宽松相等）：比较值前会进行类型转换（隐式类型转换）<br>&#x3D;&#x3D;&#x3D;（严格相等）：比较值和类型，不进行类型转换</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="string">&#x27;1&#x27;</span>; <span class="comment">// true（隐式转换为 1 == 1）  </span></span><br><span class="line"><span class="number">1</span> === <span class="string">&#x27;1&#x27;</span>; <span class="comment">// false（类型不同）  </span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>; <span class="comment">// true（两者相等）  </span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span>; <span class="comment">// false（类型不同）  </span></span><br></pre></td></tr></table></figure>
<h3 id="5-事件循环（Event-Loop）的基本原理"><a href="#5-事件循环（Event-Loop）的基本原理" class="headerlink" title="5.事件循环（Event Loop）的基本原理"></a>5.事件循环（Event Loop）的基本原理</h3><p>JavaScript是单线程的，事件循环是 JavaScript 处理异步的核心机制<br>执行流程：同步代码 → 清空微任务队列 → 执行一个宏任务 → 重复<br>比如下面的例子，console.log(‘A’) 和 console.log(‘D’) 是同步代码先执行；Promise.then 是微任务，会插队到同步代码后面执行；而 setTimeout 是宏任务，最后执行。<br>理解这一点对调试异步代码特别重要，比如处理数据加载或动画时</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;B&#x27;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;C&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;D&#x27;</span>);</span><br><span class="line"><span class="comment">// 输出顺序：A → D → C → B</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>执行顺序：<br>同步代码：直接执行。<br>微任务（Microtask）：Promise.then、queueMicrotask 等由js引擎发起。<br>(promise本身是同步的，但是里面的then&#x2F;catch的回调函数的异步的微任务)<br>宏任务（Macrotask）：setTimeout、setInterval、DOM 事件，I&#x2F;O、UI 渲染,由宿主环境发起。<br>执行流程：同步代码 → 清空微任务队列 → 执行一个宏任务 → 重复</p>
</blockquote>
<h4 id="js事件循环，同步与异步"><a href="#js事件循环，同步与异步" class="headerlink" title="js事件循环，同步与异步"></a>js事件循环，同步与异步</h4><p>js是浏览器脚本语言，<strong>是单线程</strong>（同一时间只能做一件事），为了防止阻塞代码，把代码分为同步和异步</p>
<ul>
<li>同步代码</li>
<li><ul>
<li>立即放入Js引擎（执行栈）执行，并原地等待效果</li>
</ul>
</li>
<li>异步代码：耗时的（定时器，ajax&#x2F;fetch，事件绑定）</li>
<li><ul>
<li>先放入宿主环境（浏览器、Node），（不阻塞主线程继续执行），发生后的回调函数放到任务队列，执行栈内容结束后从任务队列取任务，执行回调函数<br>执行栈会反复从任务队列中查看有没有事件，这个过程称为<strong>事件循环</strong><br><img src="/postImgs/other/jstm07.jpg" alt="事件循环"></li>
</ul>
</li>
</ul>
<h4 id="宏任务包裹微任务–代码例子"><a href="#宏任务包裹微任务–代码例子" class="headerlink" title="宏任务包裹微任务–代码例子"></a>宏任务包裹微任务–代码例子</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Start&#x27;</span>); <span class="comment">// 同步代码1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Timeout 1&#x27;</span>); <span class="comment">// 宏任务1</span></span><br><span class="line">  <span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Microtask 1&#x27;</span>); <span class="comment">// 微任务1</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Timeout 2&#x27;</span>); <span class="comment">// 宏任务2</span></span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;End&#x27;</span>); <span class="comment">// 同步代码2</span></span><br></pre></td></tr></table></figure>
<p>考察的是 JavaScript 的事件循环机制，也就是宏任务和微任务的执行顺序</p>
<ol>
<li>执行同步代码<br>同步代码会直接进入调用栈执行<br><strong>所以前两行的输出是 Start 和 End，这是同步代码的执行结果</strong></li>
<li>处理宏任务<br>宏任务（setTimeout）会被放入宏任务队列中，等待下一轮事件循环执行<br><strong>这两个宏任务不是立刻执行的，它们会等到当前宏任务（主代码块）结束后，再进入事件循环的下一轮</strong></li>
<li>事件循环开始<br>当前调用栈空了（同步代码执行完毕），事件循环开始从 宏任务队列 中取出第一个宏任务执行<br>执行宏任务1（Timeout 1）<br>console.log(‘Timeout 1’) → 输出 Timeout 1<br>遇到 Promise.resolve().then(…) → 这是一个 微任务，会被放入微任务队列<br>执行微任务队列,微任务1（Microtask 1）被立即执行 → 输出 Microtask 1<br>微任务队列清空后，事件循环进入下一轮，处理下一个宏任务。<br><strong>这里关键点是：微任务会插在宏任务之间执行。即使宏任务中嵌套了微任务，微任务也会在当前宏任务结束后立即执行</strong></li>
<li>执行宏任务2<br>最终的输出顺序是：Start → End → Timeout 1 → Microtask 1 → Timeout 2</li>
<li>事件循环的入栈出栈流程图<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 调用栈执行同步代码：</span><br><span class="line">   [<span class="title class_">Start</span>, <span class="title class_">End</span>] → 输出 <span class="title class_">Start</span>, <span class="title class_">End</span></span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 宏任务队列：</span><br><span class="line">   [<span class="title class_">Timeout</span> <span class="number">1</span>, <span class="title class_">Timeout</span> <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span> 事件循环第一轮：</span><br><span class="line">   - 执行 <span class="title class_">Timeout</span> <span class="number">1</span>:</span><br><span class="line">     - 调用栈: [<span class="title class_">Timeout</span> <span class="number">1</span>]    </span><br><span class="line">     - 输出 <span class="title class_">Timeout</span> <span class="number">1</span></span><br><span class="line">     - 生成 <span class="title class_">Microtask</span> <span class="number">1</span> → 微任务队列: [<span class="title class_">Microtask</span> <span class="number">1</span>]</span><br><span class="line">   - 执行 <span class="title class_">Microtask</span> <span class="number">1</span>:</span><br><span class="line">     - 调用栈: [<span class="title class_">Microtask</span> <span class="number">1</span>]</span><br><span class="line">     - 输出 <span class="title class_">Microtask</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> 事件循环第二轮：</span><br><span class="line">   - 执行 <span class="title class_">Timeout</span> <span class="number">2</span>:</span><br><span class="line">     - 调用栈: [<span class="title class_">Timeout</span> <span class="number">2</span>]</span><br><span class="line">     - 输出 <span class="title class_">Timeout</span> <span class="number">2</span></span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Start&#x27;</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Timeout&#x27;</span>), <span class="number">0</span>);</span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Promise&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;End&#x27;</span>);</span><br><span class="line"><span class="comment">// 输出：Start → End → Promise → Timeout</span></span><br></pre></td></tr></table></figure>

<h3 id="6-typeof-和-instanceof-的区别"><a href="#6-typeof-和-instanceof-的区别" class="headerlink" title="6.typeof 和 instanceof 的区别"></a>6.typeof 和 instanceof 的区别</h3><p>typeof 主要用来判断基本类型，比如数字、字符串，但对对象、数组、null 都会返回 “object”，所以不够准确。而 <strong>instanceof仅适用于引用类型，无法检测基本类型</strong>，能判断对象是否属于某个类的实例，比如数组是否是 Array 的实例。</p>
<p>注意instanceof依赖原型链，如果对象的原型被修改，结果可能不准确。实际开发中，我会结合两者使用，比如先用 typeof 判断类型，再用 instanceof 深入验证</p>
<blockquote>
<p>typeof：返回字符串，用于检测基本数据类型（如 number、string、object）。<br>instanceof：用于检测对象是否属于某个构造函数的实例（基于原型链）</p>
</blockquote>
<blockquote>
<p>typeof：快速但不准确。<br>instanceof：适用于引用类型。<br>Object.prototype.toString.call()：最可靠。<br>Array.isArray()：检测数组专用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span>; <span class="comment">// &quot;number&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">&#x27;abc&#x27;</span>; <span class="comment">// &quot;string&quot;</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;; <span class="comment">// &quot;object&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>([] <span class="keyword">instanceof</span> <span class="title class_">Array</span>);         <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(&#123;&#125; <span class="keyword">instanceof</span> <span class="title class_">Object</span>);        <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125; <span class="keyword">instanceof</span> <span class="title class_">Function</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> <span class="keyword">instanceof</span> <span class="title class_">Number</span>);         <span class="comment">// false（基本类型不是对象）</span></span><br></pre></td></tr></table></figure>

<h4 id="其他数据类型检测方式"><a href="#其他数据类型检测方式" class="headerlink" title="其他数据类型检测方式"></a>其他数据类型检测方式</h4><p><strong>1. 严谨的检测方法Object.prototype.toString.call()</strong><br>使用Object对象的原型方法 toString 来判断数据类型<br>返回对象的内部 [[Class]] 属性,返回格式为 [object 类型名]</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> toString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="number">123</span>));          <span class="comment">// [object Number]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="string">&quot;abc&quot;</span>));        <span class="comment">// [object String]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">true</span>));         <span class="comment">// [object Boolean]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">null</span>));         <span class="comment">// [object Null]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(<span class="literal">undefined</span>));    <span class="comment">// [object Undefined]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>([]));           <span class="comment">// [object Array]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(toString.<span class="title function_">call</span>(&#123;&#125;));           <span class="comment">// [object Object]</span></span><br></pre></td></tr></table></figure>

<p><strong>2. ES6的array.isArray(),专门检测数组类型</strong><br>快速且安全，避免 instanceof 的跨 iframe 问题</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>([]));     <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(&#123;&#125;));     <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Array</span>.<span class="title function_">isArray</span>(<span class="string">&quot;abc&quot;</span>));  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="7-什么是原型链？如何实现继承"><a href="#7-什么是原型链？如何实现继承" class="headerlink" title="7.什么是原型链？如何实现继承"></a>7.什么是原型链？如何实现继承</h3><p>原型链是 JavaScript 实现继承的核心机制。</p>
<blockquote>
<p>原型链：JavaScript 的对象通过 <code>__proto__</code>（隐式原型）链接到其构造函数的 prototype（显式原型），形成链式结构。<br>继承实现：<br>原型继承：子类的原型指向父类的实例（Child.prototype &#x3D; new Parent()）。<br>组合继承：结合构造函数和原型继承，避免共享引用类型属性。</p>
</blockquote>
<p>比如下面的例子，Dog 的原型指向 Animal 的实例，这样 Dog 就能继承 Animal 的方法。<br>实际开发中，常用组合继承来避免引用类型共享的问题，比如用户权限模块中，通过原型链继承公共方法，用构造函数初始化私有属性。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Animal</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">speak</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Dog</span>(<span class="params">name, breed</span>) &#123;</span><br><span class="line">  <span class="title class_">Animal</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name); <span class="comment">// 继承属性</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">breed</span> = breed;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// 继承方法</span></span><br><span class="line"><span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="title class_">Dog</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Buddy&quot;</span>, <span class="string">&quot;Golden&quot;</span>);</span><br><span class="line">dog.<span class="title function_">speak</span>(); <span class="comment">// 输出 &quot;Buddy&quot;</span></span><br></pre></td></tr></table></figure>
<h4 id="原型和原型链-旧笔记"><a href="#原型和原型链-旧笔记" class="headerlink" title="原型和原型链(旧笔记)"></a>原型和原型链(旧笔记)</h4><p><strong>原型</strong>：</p>
<ul>
<li>每个<strong>函数</strong>都有的prototype属性，称为原型<br>（由于这个属性的值是个对象，所以也称为原型对象）</li>
<li>原型作用：</li>
<li><ul>
<li>存放一些属性和方法（挂载到原型上）</li>
</ul>
</li>
<li><ul>
<li>js中实现继承（比如数组身上有很多方法，数组实例可以使使用Array原型身上的方法，因为有__proto__属性的存在）</li>
</ul>
</li>
<li>__proto__属性</li>
<li><ul>
<li>每个对象都有这个属性</li>
</ul>
</li>
<li><ul>
<li>作用：指向它的原型对象<br><strong>原型链：</strong><br>通过__proto__一层一层向上寻找原型，直到最顶层找不到则返回Null，这样形成的链式结构称为原型链<br><img src="/postImgs/other/jstm04.jpg" alt="原型链"></li>
</ul>
</li>
</ul>
<h4 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h4><p>作用域链是JavaScript中查找变量的一种机制。当在函数内部访问一个变量时，JavaScript引擎会首先在当前作用域中查找该变量，如果找不到，则会向上一级作用域继续查找，直到找到该变量或到达全局作用域。<br>作用域链由当前执行环境的变量对象和所有父级执行环境的变量对象组成，形成了一个链式结构。</p>
<h3 id="8-this-的指向问题"><a href="#8-this-的指向问题" class="headerlink" title="8.this 的指向问题"></a>8.this 的指向问题</h3><ul>
<li>普通函数的 this：动态绑定,指向取决于调用方式。<br>比如对象方法调用时 this 指向对象本身；<br>单独调用函数时 this 是全局对象；<br>用 call&#x2F;apply 可以手动指定 this。<br>在项目中，常用 bind 来绑定事件处理函数的 this，比如点击按钮时确保 this 指向组件实例</li>
</ul>
<blockquote>
<p>默认绑定：独立函数调用时，this 指向全局对象（严格模式下为 undefined）。<br>隐式绑定：对象方法调用时，this 指向调用者对象。<br>显式绑定：通过 call&#x2F;apply&#x2F;bind 强制绑定 this。<br>new 绑定：构造函数中 this 指向新创建的对象</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">greet</span>(); <span class="comment">// &quot;Alice&quot;（隐式绑定）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHi</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line">sayHi.<span class="title function_">call</span>(obj); <span class="comment">// &quot;Alice&quot;（显式绑定）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Bob&quot;</span>); <span class="comment">// new 绑定</span></span><br></pre></td></tr></table></figure>
<h4 id="三个问题"><a href="#三个问题" class="headerlink" title="三个问题"></a>三个问题</h4><p><strong>this 的指向本质上由函数的调用方式决定，而箭头函数通过作用域 “捕获” 外层的 this，使其保持固定</strong></p>
<ol>
<li><strong>箭头函数和普通函数的 this 有什么区别？</strong><br>答：箭头函数的 this 是静态绑定的，定义时会继承外层作用域的 this（比如外层函数或全局），且无法改变；普通函数的 this 是动态绑定的，调用时根据上下文确定（如obj.fn()中 this 指向obj）。例如，在事件回调中用箭头函数可以避免 this 指向 DOM 元素，而是保持外层的 this。</li>
<li><strong>构造函数中的 this 指向哪里？为什么箭头函数不能作为构造函数？</strong><br>答：构造函数用new调用时，this 指向新创建的实例，用于初始化实例属性。箭头函数没有自己的 this，会继承外层的 this（通常是全局），无法绑定到新实例，所以不能作为构造函数，且箭头函数没有prototype属性，无法添加原型方法。</li>
<li><strong>回调函数中如何处理 this 指向？</strong><br>答：如果是普通函数作为回调，this 可能指向调用者（如事件中的 DOM 元素），若需要保持外层 this，可：<br>用箭头函数替代普通函数，继承外层 this；<br>用bind(this)手动绑定 this；<br>用const self &#x3D; this保存外层 this。</li>
</ol>
<h4 id="call、apply、bind"><a href="#call、apply、bind" class="headerlink" title="call、apply、bind"></a>call、apply、bind</h4><p>call、apply、bind 是 Function 对象的 方法，用于 强制绑定函数的 this 指向。</p>
<blockquote>
<p>call 和 apply：立即调用函数，并传入 this 和参数。<br>bind：返回一个新函数，绑定 this 和参数，不立即调用</p>
</blockquote>
<h4 id="请简述JavaScript中的this（详）"><a href="#请简述JavaScript中的this（详）" class="headerlink" title="请简述JavaScript中的this（详）"></a>请简述JavaScript中的this（详）</h4><ul>
<li><strong>普通函数</strong>：运行时绑定，取决于调用方式</li>
<li><ul>
<li>默认绑定：<code>function()&#123;&#125;</code> → 非严格模式指向 <code>window</code>，严格模式 <code>undefined</code></li>
</ul>
</li>
<li><ul>
<li>隐式绑定：<code>obj.fn()</code> → 指向 <code>obj</code></li>
</ul>
</li>
<li><ul>
<li>显式绑定：<code>call/apply/bind</code> → 指向指定对象</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>其中 apply 方法接收两个参数：一个是 this 绑定的对象，一个是参数数组。</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>call 方法接收的参数，第一个是 this 绑定的对象，后面的其余参数是传入函数执行的参数。也就是说，在使用 call() 方法时，传递给函数的参数必须逐个列举出来。bind 方法通过传入一个对象，返回一个 this 绑定了传入对象的新函数。这个函数的 this 指向除了使用 new 时会被改变，其他情况下都不会改变。</li>
</ul>
</li>
</ul>
</li>
<li><strong>箭头函数</strong>：继承外层作用域的 <code>this</code>，无法被修改</li>
</ul>
<h4 id="箭头函数与普通函数区别"><a href="#箭头函数与普通函数区别" class="headerlink" title="箭头函数与普通函数区别"></a>箭头函数与普通函数区别</h4><blockquote>
<p>箭头函数与普通函数区别</p>
<ul>
<li>箭头函数无独立 <code>this</code>，会捕获外层作用域的this</li>
<li>无 <code>arguments</code> 对象，可用剩余参数 <code>(...args) =&gt;</code></li>
<li>不能作为构造函数使用（<code>new</code> 调用会报错）,箭头函数没有自己的this，无法绑定到新实例</li>
<li>无 <code>prototype</code> 属性</li>
<li>嵌套函数中的 this 指向全局对象（非严格模式）或 undefined（严格模式）</li>
<li>简写语法：<code>const sum = (a,b) =&gt; a+b</code><br>Vue中，如果在 methods 或生命周期钩子中使用传统函数，可能会导致 this 指向错误</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 传统函数中的 this 问题</span></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span>,</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 此处的 this 指向 person 对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// Doubao</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 嵌套函数中的 this 指向全局对象（非严格模式）或 undefined（严格模式）</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// 输出 undefined 或报错</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用箭头函数解决 this 问题</span></span><br><span class="line"><span class="keyword">const</span> personFixed = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span>,</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 箭头函数继承外层函数的 this</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); <span class="comment">// Doubao</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显式绑定 this 来解决 this 指向问题</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> self = <span class="variable language_">this</span>; <span class="comment">// 保存 Vue 实例的 this</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      self.<span class="property">data</span> = <span class="string">&#x27;loaded&#x27;</span>; <span class="comment">// 通过 self 访问 Vue 实例</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="何时不应该使用箭头函数？"><a href="#何时不应该使用箭头函数？" class="headerlink" title="何时不应该使用箭头函数？"></a>何时不应该使用箭头函数？</h4><p>对象方法：若方法内部使用 this，箭头函数会指向全局对象。<br>构造函数：箭头函数没有 prototype，无法创建实例。<br>需要 arguments 对象的场景：箭头函数无 arguments。</p>
<h3 id="9-map-和-forEach-的区别"><a href="#9-map-和-forEach-的区别" class="headerlink" title="9.map 和 forEach 的区别"></a>9.map 和 forEach 的区别</h3><p>map 会生成一个新数组，适合需要转换数据的场景，比如将用户列表映射成选项数组；<br>而 forEach 只是遍历，适合直接操作原数组或执行副作用。<br>比如在表单校验中，会用forEach遍历输入项并逐个验证，而 map更适合数据预处理</p>
<blockquote>
<p>map：对数组每个元素执行回调，返回新数组，原数组不变。<br>forEach：对数组每个元素执行回调，无返回值，直接修改原数组</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> squared = numbers.<span class="title function_">map</span>(<span class="function"><span class="params">n</span> =&gt;</span> n * n); <span class="comment">// [1, 4, 9]</span></span><br><span class="line">numbers.<span class="title function_">forEach</span>(<span class="function"><span class="params">n</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(n)); <span class="comment">// 输出 1 2 3（无返回值）</span></span><br></pre></td></tr></table></figure>
<h3 id="10-Promise-all-和-Promise-race-的区别"><a href="#10-Promise-all-和-Promise-race-的区别" class="headerlink" title="10.Promise.all 和 Promise.race 的区别"></a>10.Promise.all 和 Promise.race 的区别</h3><p>Promise.all适合需要等待所有异步任务完成的场景，比如同时请求多个接口再合并数据；<br>而Promise.race适合超时控制，比如给接口请求设置一个最大等待时间。如果某个请求超时了，race会优先返回超时的结果</p>
<blockquote>
<p>Promise.all：所有 Promise 成功时返回结果数组；任意失败则立即拒绝。<br>Promise.race：最快完成的 Promise 决定结果（成功或失败）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">setTimeout</span>(resolve, <span class="number">100</span>, <span class="string">&#x27;foo&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> p3 = <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/data&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise.all</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([p1, p2, p3]).<span class="title function_">then</span>(<span class="function"><span class="params">values</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(values); <span class="comment">// [3, &#x27;foo&#x27;, response]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise.race</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([p1, p2, p3]).<span class="title function_">then</span>(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 3（最快完成的）</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="11-函数提升（Hoisting）的原理"><a href="#11-函数提升（Hoisting）的原理" class="headerlink" title="11.函数提升（Hoisting）的原理"></a>11.函数提升（Hoisting）的原理</h3><p>函数提升是JavaScript 在编译阶段将函数声明移到作用域顶部的行为，所以可以先调用后定义。<br>而var声明的变量只会提升声明，赋值留在原地，所以未赋值前访问是 undefined<br>实际开发中，多用let&#x2F;const避免提升带来的问题，或者在代码顶部统一声明变量</p>
<blockquote>
<p>变量提升：var 声明的变量会被提升到作用域顶部，但赋值不会提升（TDZ）。<br>函数提升：函数声明会被整体提升，可在定义前调用</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// undefined（变量提升）</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// &quot;Hello&quot;（函数提升）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="12-节流和防抖（详细代码见本文章后面内容）"><a href="#12-节流和防抖（详细代码见本文章后面内容）" class="headerlink" title="12.节流和防抖（详细代码见本文章后面内容）"></a>12.节流和防抖（详细代码见本文章后面内容）</h3><p>防抖：指连续触发事件但是在设定的一段时间内<strong>只执行最后一次</strong><br>在执行期间如果有新的事情进来，会重新计时，重新计算<br>巧记：回城取消再回城（回城移动≈清除前面的倒计时，根据最后一次回城按下的时间开始重新准备回城）<br>应用场景：搜索框输入，文本编辑器实时保存<br>实现思路：定时器</p>
<p><img src="/postImgs/other/jstm06.jpg" alt="节流"><br>节流：指连续触发事件但是在设定的一段时间内<strong>只执行一次</strong><br>在执行期间如果触发多次，也只会在设定时间后只执行一次<br>巧记：技能冷却（用完进入CD再按也没有用）<br>应用场景：高频事件（快速点击、鼠标滑动、resize事件、scroll时间）、下拉加载、视频播放事件<br>实现思路：定时器<br><img src="/postImgs/other/jstm03.jpg" alt="防抖"><br><strong>开发中一般用lodash库的debounce(防抖)和throttle(节流)来实现</strong></p>
<h3 id="13-Promise-和-async-await-的区别"><a href="#13-Promise-和-async-await-的区别" class="headerlink" title="13. Promise 和 async&#x2F;await 的区别"></a>13. Promise 和 async&#x2F;await 的区别</h3><p>Promise是异步编程的基础，通过链式调用处理多个异步操作，常用在数据请求；而 async&#x2F;await是语法糖，让异步代码看起来像同步代码，更易读，但底层还是依赖 Promise。<br>两者的区别就像面条 vs 面包：Promise 是面条，需要一节节连接；async&#x2F;await 是面包，直接切片吃。</p>
<blockquote>
<p>Promise：基于链式调用的异步解决方案，支持 .then() 和 .catch()。<br>async&#x2F;await：基于 Promise 的语法糖，使异步代码更同步化</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="title function_">fetchData</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="title function_">process</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">run</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchData</span>();</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="title function_">process</span>(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;/api/data&#x27;</span>)  </span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">json</span>())  </span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))  </span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err));  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;  </span><br><span class="line">  <span class="keyword">try</span> &#123;  </span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/data&#x27;</span>);  </span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>();  </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);  </span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;  </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(err);  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="14-如何现深拷贝"><a href="#14-如何现深拷贝" class="headerlink" title="14. 如何现深拷贝"></a>14. 如何现深拷贝</h3><p>深拷贝需要递归复制对象的所有层级。比如在处理表单数据时，直接赋值会导致修改副本时原数据也被修改，这时候就需要深拷贝。JSON.stringify 的方式，但要注意它不能处理函数和循环引用，所以复杂场景会自己写递归函数。</p>
<blockquote>
<p>浅拷贝：只复制一层属性（如 Object.assign、展开运算符 …）。<br>深拷贝：递归复制所有层级（JSON.parse(JSON.stringify()) 有局限性）</p>
</blockquote>
<h3 id="15-解构赋值"><a href="#15-解构赋值" class="headerlink" title="15.解构赋值"></a>15.解构赋值</h3><p>数组解构-按位置匹配元素，支持默认值和跳过元素</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本用法</span></span><br><span class="line"><span class="keyword">const</span> [first, second] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(first); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(second); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 跳过元素</span></span><br><span class="line"><span class="keyword">const</span> [, , third] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(third); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="keyword">const</span> [a = <span class="number">0</span>, b = <span class="number">0</span>] = [<span class="number">1</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余元素</span></span><br><span class="line"><span class="keyword">const</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(head); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(tail); <span class="comment">// [2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<ul>
<li>对象解构:按属性名匹配，支持重命名和默认值（注意嵌套解构）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基本用法</span></span><br><span class="line"><span class="keyword">const</span> &#123; name, age &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// Doubao</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(age); <span class="comment">// 18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 重命名</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">name</span>: userName, <span class="attr">age</span>: userAge &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(userName); <span class="comment">// Doubao</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认值</span></span><br><span class="line"><span class="keyword">const</span> &#123; city = <span class="string">&#x27;Beijing&#x27;</span> &#125; = &#123; <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// Beijing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 嵌套解构</span></span><br><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Doubao&#x27;</span>,</span><br><span class="line">  <span class="attr">address</span>: &#123;</span><br><span class="line">    <span class="attr">city</span>: <span class="string">&#x27;Beijing&#x27;</span>,</span><br><span class="line">    <span class="attr">district</span>: <span class="string">&#x27;Haidian&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">address</span>: &#123; city &#125; &#125; = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(city); <span class="comment">// Beijing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 剩余属性</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">name</span>: n, ...rest &#125; = user;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rest); <span class="comment">// &#123; address: &#123; city: &#x27;Beijing&#x27;, district: &#x27;Haidian&#x27; &#125; &#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="解构赋值有什么实际应用场景？"><a href="#解构赋值有什么实际应用场景？" class="headerlink" title="解构赋值有什么实际应用场景？"></a>解构赋值有什么实际应用场景？</h4><p>提取 API 响应数据<code>const &#123; data, status &#125; = await fetch(&#39;/api/users&#39;);</code></p>
<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><ul>
<li><strong>Node.js 模块规范</strong>，核心概念：<ul>
<li>模块加载：<code>require(&#39;path&#39;)</code></li>
<li>模块导出：<code>module.exports</code> 或 <code>exports</code></li>
<li><strong>特点</strong>：<ul>
<li>同步加载（适用于服务端）</li>
<li>模块缓存（相同路径只加载一次）</li>
<li>文件即模块（每个文件独立作用域）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="异步编程详解（我之前的模糊点）"><a href="#异步编程详解（我之前的模糊点）" class="headerlink" title="异步编程详解（我之前的模糊点）"></a>异步编程详解（我之前的模糊点）</h2><h3 id="JavaScript-单线程与异步编程的关系"><a href="#JavaScript-单线程与异步编程的关系" class="headerlink" title="JavaScript 单线程与异步编程的关系"></a>JavaScript 单线程与异步编程的关系</h3><p><strong>异步编程正是解决单线程阻塞问题的方法</strong><br><strong>异步编程是指在执行某个任务时，不需要等待该任务完成，可以继续执行其他任务，当该任务完成后，再通过回调函数或其他方式通知程序进行处理</strong><br>异步编程可以提高程序的执行效率和响应速度，特别适用于处理网络请求和耗时任务。</p>
<ul>
<li>单线程：JavaScript 只有一个主线程，不能同时执行多个任务。如果直接同步执行耗时操作（如死循环），会导致页面卡顿</li>
<li>异步编程：通过 事件循环（Event Loop） 和 浏览器多线程协作，让 JavaScript 在等待耗时操作（如网络请求）时，继续执行其他任务</li>
<li>I&#x2F;O密集型操作：网络请求（API调用）;文件读写（Node.js）;数据库操作<blockquote>
<p>异步编程利用了浏览器的多线程能力（如Web Workers）来处理耗时任务，从而保持主线程的响应性</p>
</blockquote>
</li>
</ul>
<h3 id="关键机制"><a href="#关键机制" class="headerlink" title="关键机制:"></a>关键机制:</h3><ul>
<li>调用栈(Call Stack)：<br>同步代码立即执行<br>函数调用形成栈帧</li>
<li>任务队列(Task Queues)：<br>微任务队列（Promise、MutationObserver）<br>宏任务队列（setTimeout、DOM事件）</li>
<li>事件循环(Event Loop)<br><img src="/postImgs/other/jizhi.png" alt="防抖"></li>
</ul>
<h3 id="常用的异步编程方式"><a href="#常用的异步编程方式" class="headerlink" title="常用的异步编程方式"></a>常用的异步编程方式</h3><p><strong>在JavaScript中，常用的异步编程方式包括回调函数、Promise和async&#x2F;await。</strong></p>
<ul>
<li>回调函数是最早的异步编程方式，但容易出现回调地狱的问题；</li>
<li>Promise是一种更优雅的异步编程方式，可以链式调用，解决回调地狱的问题；</li>
<li>async&#x2F;await是建立在Promise之上的语法糖，使得异步代码看起来像同步代码，更加易于阅读和维护。</li>
</ul>
<h3 id="关于何时使用async"><a href="#关于何时使用async" class="headerlink" title="关于何时使用async"></a>关于何时使用async</h3><ul>
<li><p>async用于声明一个异步函数，使得函数内可以使用await来等待Promise的结果。</p>
</li>
<li><p>当需要处理耗时操作（如网络请求<code>fetch 或 axios 请求数据（如 API 调用、图片加载）</code>、文件读取、定时器）时，应该使用异步编程。async 和 await 是处理这些操作的推荐方式</p>
</li>
<li><p>async&#x2F;await是语言特性，可以与任何Promise兼容的库一起使用，包括axios和Fetch</p>
</li>
</ul>
<h2 id="节流和防抖代码详解："><a href="#节流和防抖代码详解：" class="headerlink" title="节流和防抖代码详解："></a>节流和防抖代码详解：</h2><ul>
<li>节流（Throttle）：<br>让一个函数在规定的时间间隔内,最多只执行一次。以<strong>第一次调用</strong>为准，忽略短时间内后续的调用，直到时间间隔结束。<br>特点：它的作用是让一个函数在规定的时间间隔内只执行一次，适用于需要持续响应但频率受限的场景。</li>
<li>防抖（Debounce）：<br>当事件在一定时间间隔内多次触发时,以最后一次调用为准，只有<strong>最后一次触发</strong>后,经过设定的延迟时间，函数才会执行。<br>特点：确保函数在用户操作结束后一段时间执行，适用于需要等待用户输入稳定后再处理的场景。</li>
</ul>
<h3 id="函数防抖"><a href="#函数防抖" class="headerlink" title="函数防抖"></a>函数防抖</h3><p>防抖函数用于限制函数的执行频率;当事件在一定时间间隔内多次触发时，只有<strong>最后一次触发</strong>后,经过设定的延迟时间，才会执行回调函数。<br>常用于搜索框输入、窗口大小调整场景</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// 存储定时器ID</span></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>; </span><br><span class="line">  <span class="comment">// 返回闭包函数</span></span><br><span class="line">  <span class="comment">//args把所有传入函数的参数收集到一个数组中</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123; </span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer); </span><br><span class="line">    <span class="comment">// 设置新定时器，利用setTimeout延迟执行</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//apply可以确保函数在正确的this上下文中执行，并正确传递所有参数。使用 apply 可以直接传入这个数组，不需要展开</span></span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); </span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试函数:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">query</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`搜索: <span class="subst">$&#123;query&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建防抖版本,结果输出为：搜索: abc</span></span><br><span class="line"><span class="keyword">const</span> debouncedSearch = <span class="title function_">debounce</span>(search, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟连续输入</span></span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;ab&quot;</span>);</span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;abc&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="代码两种写法的对比"><a href="#代码两种写法的对比" class="headerlink" title="代码两种写法的对比"></a>代码两种写法的对比</h4><p>看了多篇相关文章防抖函数this部分有两种写法，但是更推荐写法1：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 写法一：直接使用箭头函数的 this</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法二：显式保存 this 到变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    <span class="keyword">let</span> content = <span class="variable language_">this</span>;</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(content, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>写法一：使用箭头函数的 this（继承自外层作用域）；支持动态绑定 this，适用场景如事件处理<br>写法二：显式保存 this 到 content 变量，不支持动态绑定，适用于静态方法</p>
<blockquote>
<p>为什么写法一更推荐</p>
<ul>
<li>箭头函数的 this 继承机制：<br>箭头函数没有自己的 this，它继承自外层函数（即 debounce 返回的箭头函数）<br>调用时动态绑定 this：当调用 onSearch.call(obj, “query”) 时，this 会指向 obj，从而在 fn.apply(this, args) 中正确传递上下文</li>
<li>灵活性：支持动态绑定：<br>调用防抖函数时可以传入不同的 this，适用于事件处理、对象方法等场景</li>
<li>写法二：固定 this：content &#x3D; this 会在 debounce 定义时绑定 this，后续调用无法动态修改</li>
</ul>
</blockquote>
<h4 id="防抖函数中，为什么选择使用箭头函数而不是普通函数？"><a href="#防抖函数中，为什么选择使用箭头函数而不是普通函数？" class="headerlink" title="防抖函数中，为什么选择使用箭头函数而不是普通函数？"></a>防抖函数中，为什么选择使用箭头函数而不是普通函数？</h4><p>箭头函数没有自己的 this，它会继承外层作用域的 this。在防抖函数中，我们希望调用者能够动态绑定 this（例如事件处理函数的 this 指向 DOM 元素），而箭头函数能保证 this 的一致性，避免在 setTimeout 中丢失上下文。</p>
<h3 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h3><p>是一种控制函数执行频率的技术。它的作用是让一个函数在规定的时间间隔内最多只执行一次。<br>在一定时间间隔内，如果一个事件被多次触发，只以第一次被触发为准，忽略短时间内后续的调用，直到时间间隔结束。c</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// 上次执行时间</span></span><br><span class="line">  <span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取当前时间</span></span><br><span class="line">    <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算时间差</span></span><br><span class="line">    <span class="keyword">const</span> diff = now - lastTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果时间差大于等于延迟时间，执行函数</span></span><br><span class="line">    <span class="keyword">if</span> (diff &gt;= delay) &#123;</span><br><span class="line">      <span class="comment">// 更新上次执行时间</span></span><br><span class="line">      lastTime = now;</span><br><span class="line">      <span class="comment">// 执行传入的函数，并传递参数</span></span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="原型链作用域链闭包"><a href="#原型链作用域链闭包" class="headerlink" title="原型链作用域链闭包"></a>原型链作用域链闭包</h2><p>造函数的<code>prototype</code>属性（原型对象）。<br>原型对象也是一个对象，它也有自己的原型，这样一层一层向上直到一个对象的原型为<code>null</code>（<code>Object.prototype</code>的原型就是<code>null</code>），形成链条，即原型链。</p>
<p>当我们访问一个对象的属性时，如果对象本身没有这个属性，就会沿着原型链向上查找，直到找到或者到原型链顶端（<code>null</code>）为止。<br><strong>问题：什么是原型链？</strong></p>
<p>回答：原型链是JavaScript实现继承的一种机制。每个对象都有一个指向其原型（prototype）的内部链接。当试图访问一个对象的属性时，它不仅仅在该对象上查找，还会在该对象的原型上，以及原型的原型上，依次层层向上查找，直到找到一个名字匹配的属性或到达原型链的末尾（null）。这种链接关系形成的链条就叫做原型链。</p>
<p><strong>问题：如何实现继承？</strong></p>
<p>回答：在JavaScript中，我们通常使用原型链来实现继承。比如，我们可以通过将子类的原型设置为父类的实例</p>
<p>作用域链是JavaScript中用于查找变量的一种机制。在查找变量时，会沿着作用域链一级一级向上查找，直到找到或者到全局作用域（如果还没找到就报错）。</p>
<p>闭包就是函数内部定义的函数，它可以访问外部函数的变量。闭包的主要作用有两个：一是可以创建私有变量，避免全局污染；二是可以让这些变量的值始终保持在内存中（不会被垃圾回收），通过闭包提供的函数来操作这些变量</p>
<h2 id="TypeScript类型系统"><a href="#TypeScript类型系统" class="headerlink" title="TypeScript类型系统"></a>TypeScript类型系统</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span>&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="built_in">string</span>;</span><br><span class="line"><span class="attr">age</span>:<span class="built_in">number</span>;</span><br><span class="line">email?:<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">user1</span>: <span class="title class_">User</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="attr">email</span>: <span class="string">&quot;alice@example.com&quot;</span> <span class="comment">// 有 email</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//: User 表示：这个函数返回的对象必须符合 User 接口的结构</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params"><span class="attr">id</span>: <span class="built_in">number</span></span>): <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="comment">// 模拟从数据库获取数据</span></span><br><span class="line">  <span class="keyword">if</span> (id === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="string">&quot;alice@example.com&quot;</span> <span class="comment">// 包含可选属性</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;Bob&quot;</span></span><br><span class="line">    &#125;; <span class="comment">// 不包含 email 也合法</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>面试题</category>
        <category>js+ts</category>
      </categories>
      <tags>
        <tag>面试题</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>apifox接口审查，并用cursor生成接口</title>
    <url>/2025/05/27/35-apifox/</url>
    <content><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>该文档内容是根据阮喵喵组长讲解的接口审查做的笔记</p>
<h1 id="接口审查"><a href="#接口审查" class="headerlink" title="接口审查"></a>接口审查</h1><h2 id="接口审查核心"><a href="#接口审查核心" class="headerlink" title="接口审查核心"></a>接口审查核心</h2><p>通过Apifox文档对后端提供的接口进行审查</p>
<p>难点在对业务的理解程度，需要一定的开发经验</p>
<p>最终要确保这个接口能够充分地满足业务需求，核对双方的业务理解，后端的业务理解比前端的业务理解要深刻，前端对接口进行审查也是验证自己的业务理解</p>
<p>我负责j3组关于“缓存管理”，“商户管理”和“报表配置”的接口<br>组长把我放到了后端j3组群，有问题直接开会议和他们面对面<br>结合需求文档、原型、接口审查<br><img src="/postImgs/api/api5.png" alt="api文档"><br><img src="/postImgs/api/api1.png" alt="api文档"></p>
<h2 id="与后端沟通规范"><a href="#与后端沟通规范" class="headerlink" title="与后端沟通规范"></a>与后端沟通规范</h2><p>找到你的接口；修改接口的状态，修改为有异常；点击评论按钮；对接口做出评论，如果他们改完，我们前端再在评论那边标记为已解决。<br><img src="/postImgs/api/my1.png" alt="api文档"></p>
<h2 id="基础评审标准"><a href="#基础评审标准" class="headerlink" title="基础评审标准"></a>基础评审标准</h2><p>新增接口用post请求，不是get请求<br><img src="/postImgs/api/api4.png" alt="api文档"></p>
<h3 id="分页接口"><a href="#分页接口" class="headerlink" title="分页接口"></a>分页接口</h3><p>  页面中的绝大多数请求都是分页接口</p>
<ol>
<li>分页接口必须是get请求</li>
<li>分页接口有自己的一套规范:<br>  <strong>分页接口请求的页码和页数仅为pageIndex和pageSize两个名称</strong>，这些后端也是套模板，如果他们中间穿插其他变量，那么前端套模板的时候这里接口是跑不起来的<br>  <strong>pageIndex和pageSize一定为必填项</strong>，如果前端没传，那么后端的分页接口应该主动报400错误，后端本来应该对前端传入的任何值做校验</li>
<li>如果后端返回的数据没有总条数和总页数，那么前端无法渲染出总数</li>
</ol>
<h3 id="返回值必须被JsonVO包裹"><a href="#返回值必须被JsonVO包裹" class="headerlink" title="返回值必须被JsonVO包裹"></a>返回值必须被JsonVO包裹</h3><p>任何接口都必须用 JsonVO 泛型包装。否则前端无法得知业务处理吗code的状态。无法得知业务是否是10000，是业务正常还是失败。<br><strong>常见的业务接口必须满足该规范，几乎所有的接口数据结构返回值都是<code>code</code>,<code>data</code>,<code>message</code>三个字段</strong><br><img src="/postImgs/api/api2.png" alt="api文档"></p>
<h3 id="字段命名"><a href="#字段命名" class="headerlink" title="字段命名"></a>字段命名</h3><ol>
<li>接口路由命名：<br>可以小驼峰，不能要离谱的（比如一会儿短杆一会儿大驼峰）<br>其返回值格式必须是code、message、data的格式。</li>
<li>变量名应该统一为小驼峰<br>按照后端规范，其接口的变量名必须为小驼峰，不能直接用下划线划分。</li>
<li>变量名称注释<br>如果注解缺漏、不清楚、语义化不强（那么前端理解起来很费劲，到时候去群里面问他们，前端费劲，后端也不爽），要让他们改<br>变量只有纯英文注解，如有注解，就等于没有注解</li>
<li>文件接口不需要遵守该规范<br>比如接口向前端返回文件时，就不需要满足该规范。</li>
</ol>
<h3 id="缺漏字段（重头戏）"><a href="#缺漏字段（重头戏）" class="headerlink" title="缺漏字段（重头戏）"></a>缺漏字段（重头戏）</h3><p>每一个字段都要对，接口没有提供相应的字段实现功能，那么后续无法实现</p>
<h3 id="变量要设计成枚举，提供具体的中文值"><a href="#变量要设计成枚举，提供具体的中文值" class="headerlink" title="变量要设计成枚举，提供具体的中文值"></a>变量要设计成枚举，提供具体的中文值</h3><p>应该做成下面这种<br><img src="/postImgs/api/api3.png" alt="api文档"></p>
<h3 id="固定选项参数"><a href="#固定选项参数" class="headerlink" title="固定选项参数"></a>固定选项参数</h3><p>业务中下拉菜单–固定选项这种样式，在接口文档应该怎么体现呢？（检查记录12条、17条有图片）</p>
<blockquote>
<p>组长回答：要求他们自己把对应关系写出来，写在注释内。写到apifox的文档内<br>比如各种类型变量。比如用户类型、派工类型<br>workOrderType，派工类型。在数据库内存储的值为：<br>1001 按日派工<br>2002 按周派工<br>3003 按月派工<br>那么后端的注释，就应该包含上述的映射关系。包含【取值-文本】的映射关系。</p>
</blockquote>
<p>如果该变量的注释没有提供该映射关系，那么前端在对接字段时，不得不询问后端workOrderType派工类型的取值是如何映射的，前端如何显示出来。会产生额外的沟通成本</p>
<h3 id="查询信息类的接口必须提供额外的文本字段"><a href="#查询信息类的接口必须提供额外的文本字段" class="headerlink" title="查询信息类的接口必须提供额外的文本字段"></a>查询信息类的接口必须提供额外的文本字段</h3><p>继续以workOrderType派工类型为例子。</p>
<p>比如以下种类的后端接口：</p>
<p>分页列表接口<br>根据id查询信息接口<br>查询全部列表接口（下拉列表用）<br>查询某某树的接口<br>像这一类接口，都必须提供一个额外的字段。用于给前端展示出来。</p>
<p>比如，根据id查询信息接口，按照该要求应该返回以下数据：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;workOrderType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1001&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;workOrderTypeText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;按日派工&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>比如，分页列表接口，应该返回：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;someOne&quot;</span><span class="punctuation">:</span> <span class="string">&quot;用户甲&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;workOrderType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1001&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;workOrderTypeText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;按日派工&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;someOne&quot;</span><span class="punctuation">:</span> <span class="string">&quot;用户乙&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;workOrderType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3003&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;workOrderTypeText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;按月派工&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
<p>前端不做文本翻译，整个文本翻译的过程全权交给后端，前端不应该额外地在本地存储一套文本翻译数据。否则容易出现数据更新不及时的错误，给生产环境的业主带来误解，让产品经理容易挨骂。</p>
<h3 id="数据写入类接口不应该接受纯文本"><a href="#数据写入类接口不应该接受纯文本" class="headerlink" title="数据写入类接口不应该接受纯文本"></a>数据写入类接口不应该接受纯文本</h3><p>比如上述workOrderType派工类型字段，<strong>新增和修改类型的接口</strong>属于写入写表类的接口：<br>这两类接口属于写表的接口。前端在传递workOrderType时，不可能也不应该传递中文文本。后端在存储时，也不应该去存储中文文本，应该存储1001、2002、3003这样的值。</p>
<blockquote>
<p>不要额外存储中文字段<br>真正有意义的业务变量，是workOrderType，不是workOrderTypeText。workOrderTypeText是给前端展示用的，后端不应该存储，更不应该在数据库表内新建一个专门的字段来存储该中文文本。</p>
</blockquote>
<h2 id="基础评审–我的检查记录"><a href="#基础评审–我的检查记录" class="headerlink" title="基础评审–我的检查记录"></a>基础评审–我的检查记录</h2><p><mark>审查步骤：打开我的负责的需求图，跑项目原型，挨个对接口文档，查看接口的路由、请求参数、返回data、业务逻辑</mark><br><mark>发现好多问题哦，接口文档已进行“有异常”标记和评论区评论，部分截图记录如下：</mark></p>
<p><strong>小结：已检查“缓存管理”和“报表配置”两部分的所有接口，脑图标记应为24个，实际对照应为25个，接口文档有24个，其中有问题的为20个</strong><br><img src="/postImgs/api/mycheck.png" alt="api文档"></p>
<ol>
<li><p>分页请求参数命名错误<br><img src="/postImgs/api/my1.png" alt="api文档"></p>
</li>
<li><p>接口重复<br><img src="/postImgs/api/my2.png" alt="api文档"></p>
</li>
<li><p>组ID命名不统一<br><img src="/postImgs/api/my3.png" alt="api文档"></p>
</li>
<li><p>(我的理解问题，后端接口没问题)<br>有疑问，接口请求可以没有请求参数吗<br>可以的，这个接口是下拉菜单获取子项的时候调用，不需要请求参数<br><img src="/postImgs/api/my4.png" alt="api文档"></p>
</li>
<li><p>参数必填；实例值不对<br>（1）queryModel查询方式应该为枚举类型，但是本文档没有注明<br>（2）不理解字段 ：componentId组件id，该组件还未添加，组件id指的是什么呢，请详细说明<br><img src="/postImgs/api/my5.png" alt="api文档"></p>
</li>
<li><p>针对数据的查询，数据编号应该为必填（报表配置-报表信息）<br><img src="/postImgs/api/my6.png" alt="api文档"></p>
</li>
<li><p>返回数据data和所需不匹配（报表配置-报表信息–关联组件）<br>(1) 接口命名没有指出为分页接口，和脑图不一样<br>(2) 按照业务需求，报表编号customId应该为必填<br>(3) 分页参数命名不符合规范pageQuery.pageIndex ；pageQuery.pageSize<br>(4) 返回值没有按照pageDTO包裹</p>
</li>
</ol>
<p><img src="/postImgs/api/my7(1).png" alt="api文档"><br><img src="/postImgs/api/my7(2).png" alt="api文档"><br>下图命名问题<br><img src="/postImgs/api/my13(3).png" alt="api文档"><br>8. 删除接口，请求参数全是可选（报表配置–报表信息–删除关联组件）<br><img src="/postImgs/api/my8.png" alt="api文档"><br>9. 删除参数，请求应为必须（报表配置–报表信息–删除报表信息）<br><img src="/postImgs/api/my9.png" alt="api文档"><br>10. 修改请求参数，修改对象id应为必填（报表配置–报表信息–修改报表信息）<br><img src="/postImgs/api/my10.png" alt="api文档"><br>11. 报表添加关联组件（报表配置-报表信息–关联组件–添加关联组件）<br>（1）componentId应为必填<br>（2）componentName不对，后端应该直接存储组件ID<br><img src="/postImgs/api/my11.png" alt="api文档"><br>12. 添加报表组件请求参数不匹配（报表配置–报表组件–添加报表组件）</p>
<blockquote>
<p>业务中下拉菜单–固定选项这种样式，在接口文档应该怎么体现呢？<br>组长回答：要求他们自己把对应关系写出来，写在注释内。写到apifox的文档内<br>把【代码-文本】的映射关系写到文档内，让全体人员看懂值的映射关系。<br>比如：<br>1001 按日派单<br>2002 按周派单<br>3003 按月派单</p>
</blockquote>
<p><img src="/postImgs/api/my12.png" alt="api文档"><br><img src="/postImgs/api/my5(2).png" alt="api文档"><br>13.  组件添加条件，请求参数缺少组件ID，参数描述不符（报表配置–报表组件–添加条件）<br> <img src="/postImgs/api/my13.png" alt="api文档"><br>14. 修改条件，请求参数缺少被修改条件ID（报表配置-报表组件–修改条件）<br><img src="/postImgs/api/my14.png" alt="api文档"><br>15. 删除报表组件，被删除的ID应为必选（报表配置-报表组件–删除报表组件）<br><img src="/postImgs/api/my15.png" alt="api文档"><br>16. 统一参数接口命名不统一（报表配置-报表组件–组件底层统计–PUT和DEL请求）<br><img src="/postImgs/api/my18.png" alt="api文档"><br>17. 未提供明确的枚举类型<br><img src="/postImgs/api/my22.png" alt="api文档"><br><img src="/postImgs/api/my22(2).png" alt="api文档"><br>18. （我的问题，以为缺少接口，这个请求可以用现有的其他接口）<br>（1）“选择组件”操作，没有提供可调用的接口<br><img src="/postImgs/api/my17(1).png" alt="api文档"></p>
<h1 id="用cursor辅助生成API接口和测试用例"><a href="#用cursor辅助生成API接口和测试用例" class="headerlink" title="用cursor辅助生成API接口和测试用例"></a>用cursor辅助生成API接口和测试用例</h1><p><strong>主要使用阮组长给的markdown文件，里面有要求，提示词和其他链接</strong></p>
<h2 id="用cursor生成文件"><a href="#用cursor生成文件" class="headerlink" title="用cursor生成文件"></a>用cursor生成文件</h2><ol>
<li>让AI阅读文件<br>把提示词文件里面的连接单独复制过来，把上下文复制给它阅读，”你好，请认真阅读文件，并阅读我提供给你的url链接，阅读上下文，并制定接口生成的计划”先沟通一轮确保模型能够阅读</li>
<li>检查他说的规范内容，让它先写一个接口例子<br>“请你给出一个例子，比如我生成delete请求，用path传递被删除的id。请生成一段例子，以便我检查你的理解成果，检查你是否按照规范生成。”如果有问题和它交流，让它的例子符合规范</li>
<li>把api文档复制给它<br>检查没问题后，把要生成的接口的文档复制给它（接口文档右上角有复制按钮），它会阅读并生成接口文件和对应的测试用力</li>
<li>检查生成的接口文件和测试用例</li>
</ol>
<h2 id="测试接口文件"><a href="#测试接口文件" class="headerlink" title="测试接口文件"></a>测试接口文件</h2><ol>
<li>首先确保你在正确的目录下</li>
<li>运行测试用例<br><code>pnpm test src/api/j3/report/report-group/report-group.test.ts</code><br>运行成功+测试正常，效果如图<br><img src="/postImgs/api/api30.png" alt="api文档"><br><img src="/postImgs/api/api32.png" alt="api文档"><br><img src="/postImgs/api/api31.png" alt="api文档"></li>
</ol>
]]></content>
      <categories>
        <category>前后端协作</category>
        <category>项目</category>
      </categories>
      <tags>
        <tag>项目</tag>
        <tag>接口审查</tag>
      </tags>
  </entry>
  <entry>
    <title>DOM操作和CSS高频API</title>
    <url>/2025/04/11/30-dom%E5%92%8CcssAPI/</url>
    <content><![CDATA[<h1 id="常用API整理"><a href="#常用API整理" class="headerlink" title="常用API整理"></a>常用API整理</h1><p><strong>把js的高频API整理完，对那部分的认识通透了不少，很有满足感，因此其他部分的常用API我也有必要整理一下，于是查文档+看视频+问AI,整理了下面内容</strong><br>以下是根据你的需求整理和完善的Markdown笔记，涵盖了高频DOM&#x2F;CSS API，并补充了关键知识点。内容结构清晰，分为CSS选择器、DOM操作、样式操作、事件相关等模块：</p>
<hr>
<h1 id="浏览器API"><a href="#浏览器API" class="headerlink" title="浏览器API"></a>浏览器API</h1><h2 id="localStorage和sessionStorage"><a href="#localStorage和sessionStorage" class="headerlink" title="localStorage和sessionStorage"></a>localStorage和sessionStorage</h2><p>浏览器存储localStorage和sessionStorage，用于在客户端持久化存储数据</p>
<table>
<thead>
<tr>
<th>特性</th>
<th><strong>localStorage</strong></th>
<th><strong>sessionStorage</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>存储时间</strong></td>
<td>永久存储，除非手动删除</td>
<td>会话期间存储，关闭页面&#x2F;浏览器后清除</td>
</tr>
<tr>
<td><strong>存储大小</strong></td>
<td>通常为 5MB 左右（不同浏览器可能不同）</td>
<td>同上</td>
</tr>
<tr>
<td><strong>作用域</strong></td>
<td>同一域名下所有页面共享</td>
<td>同一页面&#x2F;标签页的会话内有效</td>
</tr>
</tbody></table>
<p>localStorage只能存储字符串，存取对象需要JSON方法进行转换，否则是[object Objet]<br>loacl&#x2F;sssionStorage不同域的数据不共享<br>sessionStorage同一浏览器窗口的不同标签页可共享数据，新开的窗口不共享</p>
<h3 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// localStorage 的常用方法（sessionStorage 方法同理）</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, value);  <span class="comment">// 存储键值对</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);         <span class="comment">// 获取键对应的值</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key);      <span class="comment">// 删除指定键</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">clear</span>();              <span class="comment">// 清除所有数据</span></span><br></pre></td></tr></table></figure>

<h3 id="存储限制"><a href="#存储限制" class="headerlink" title="存储限制"></a>存储限制</h3><ul>
<li><strong>数据类型</strong>：只能存储字符串！若需存储对象或数组，需先序列化（<code>JSON.stringify</code>）。</li>
<li><strong>示例</strong>：<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 存储对象</span></span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;user&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取并解析对象</span></span><br><span class="line"><span class="keyword">const</span> userStr = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> userObj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(userStr);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p>cookie像超市会员卡 ，容量小，每次都会携带。<br>在服务器第一次返回响应时候，会在响应头添加cookie信息，浏览器自动保存到本地，下次访问同一域名时会在请求头中自动带上cookie，服务器根据cookie识别用户身份。<br>可以设置过期时间，常用来存储token实现登录状态的保持</p>
<h3 id="cookie的HttpOnly属性"><a href="#cookie的HttpOnly属性" class="headerlink" title="cookie的HttpOnly属性"></a>cookie的HttpOnly属性</h3><p>是cookie的一个安全属性，设置后JS无法读取这个cookie，防止黑客攻击身份被盗<br>重点补充：</p>
<h1 id="API获取（axios-fetch）"><a href="#API获取（axios-fetch）" class="headerlink" title="API获取（axios,fetch）"></a>API获取（axios,fetch）</h1><h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>axios 是一个基于 Promise 的 HTTP 客户端库，用于在浏览器和 Node.js 中发送 HTTP 请求。它提供了许多高级功能，如请求拦截、响应拦截、错误处理、取消请求、超时控制等</p>
<h3 id="axios基本用法获取api"><a href="#axios基本用法获取api" class="headerlink" title="axios基本用法获取api"></a>axios基本用法获取api</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// GET 请求</span></span><br><span class="line">axios.<span class="title function_">get</span>(url)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// POST 请求</span></span><br><span class="line">axios.<span class="title function_">post</span>(url, data)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局配置示例</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;https://api.example.com&#x27;</span>;</span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;Authorization&#x27;</span>] = <span class="string">&#x27;Bearer your_token&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h2><p>fetch 是一个用于在浏览器中处理 HTTP 请求的 API，它提供了一种更简洁的方式来发送请求，并返回一个 Promise 对象，用于处理响应</p>
<h3 id="fetch基本用法获取api"><a href="#fetch基本用法获取api" class="headerlink" title="fetch基本用法获取api"></a>fetch基本用法获取api</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// GET 请求</span></span><br><span class="line"><span class="title function_">fetch</span>(url)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error! <span class="subst">$&#123;response.status&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"></span><br><span class="line"><span class="comment">// POST 请求</span></span><br><span class="line"><span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data)</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>
<h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><p>fetch 与 axios 的主要区别在于它们使用的底层 API。axios 使用 XMLHttpRequest（XHR）对象，而 fetch 使用 Fetch API</p>
<ol>
<li><p>选择 Fetch 的场景：</p>
<ul>
<li>项目简单，仅需基础请求。</li>
<li>希望减少第三方依赖，保持代码轻量化。</li>
<li>现代浏览器环境（无需兼容旧版）。</li>
</ul>
</li>
<li><p>选择 Axios 的场景：</p>
<ul>
<li>需要拦截器、全局配置、统一错误处理。</li>
<li>需要高级功能（如超时、上传进度、取消请求）。</li>
<li>需要兼容旧版浏览器或 Node.js 环境。</li>
</ul>
</li>
</ol>
<h3 id="Axios-vs-Fetch-对比表"><a href="#Axios-vs-Fetch-对比表" class="headerlink" title="Axios vs Fetch 对比表**"></a>Axios vs Fetch 对比表**</h3><table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>Fetch</strong></th>
<th><strong>Axios</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>浏览器支持</strong></td>
<td>现代浏览器原生支持，旧版需 <code>polyfill</code>（如 <code>whatwg-fetch</code>）</td>
<td>兼容 IE 及旧版浏览器，需引入第三方库</td>
<td>Fetch 需额外依赖兼容旧浏览器；Axios 提供更广兼容性。</td>
</tr>
<tr>
<td><strong>错误处理</strong></td>
<td>需手动检查 <code>response.ok</code>，非 2xx 状态码 <strong>不会触发 <code>catch</code></strong></td>
<td>自动将非 2xx 状态码视为错误，<strong>直接触发 <code>catch</code></strong></td>
<td>Axios 更友好，简化错误处理逻辑。</td>
</tr>
<tr>
<td><strong>JSON 自动转换</strong></td>
<td>需手动调用 <code>response.json()</code> 解析数据</td>
<td>自动转换 JSON，直接访问 <code>response.data</code></td>
<td>Fetch 需显式处理数据格式；Axios 简化数据解析。</td>
</tr>
<tr>
<td><strong>拦截器</strong></td>
<td>不支持</td>
<td>支持 <strong>请求&#x2F;响应拦截器</strong>，统一处理 Token、日志等</td>
<td>Axios 的拦截器是全局配置的利器。</td>
</tr>
<tr>
<td><strong>超时设置</strong></td>
<td>需结合 <code>AbortController</code> 和 <code>setTimeout</code> 实现</td>
<td>直接配置 <code>timeout</code> 属性</td>
<td>Axios 提供更简洁的超时控制。</td>
</tr>
<tr>
<td><strong>取消请求</strong></td>
<td>使用 <code>AbortController.signal</code></td>
<td>支持 <code>AbortController</code> 或 <code>CancelToken</code>（旧版）</td>
<td>两者均支持，但 Axios 的 <code>CancelToken</code> 更早实现此功能。</td>
</tr>
<tr>
<td><strong>上传&#x2F;下载进度</strong></td>
<td>不支持</td>
<td>支持监听进度事件（如 <code>onUploadProgress</code>）</td>
<td>Axios 适合需要监控进度的场景（如文件上传）。</td>
</tr>
<tr>
<td><strong>CSRF 防护</strong></td>
<td>需手动设置 <code>credentials: &#39;include&#39;</code> 发送 Cookie</td>
<td>默认发送 Cookie，内置 <strong>XSRF 防护</strong>（自动同步 Cookie 和 <code>X-CSRFToken</code>）</td>
<td>Axios 更适合需要安全防护的 Web 应用。</td>
</tr>
<tr>
<td><strong>全局配置</strong></td>
<td>需手动封装（如统一请求头、基础 URL）</td>
<td>支持 <code>axios.defaults</code> 全局配置（如 <code>baseURL</code>, <code>headers</code>）</td>
<td>Axios 提供更灵活的全局配置能力。</td>
</tr>
<tr>
<td><strong>请求语法</strong></td>
<td>需显式设置 <code>method</code>、<code>headers</code>，数据需序列化为字符串（如 <code>JSON.stringify</code>）</td>
<td>直接传递 <code>data</code> 对象，自动序列化为 JSON</td>
<td>Axios 的语法更简洁直观。</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>简单请求、减少依赖、现代浏览器环境</td>
<td>复杂需求、拦截器、全局配置、兼容旧浏览器、需要高级功能（如超时、进度）</td>
<td>Fetch 适合轻量级项目；Axios 适合复杂业务场景。</td>
</tr>
</tbody></table>
<h1 id="定时器"><a href="#定时器" class="headerlink" title="定时器"></a>定时器</h1><h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. setTimeout</span></span><br><span class="line"><span class="keyword">const</span> timerId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;3秒后执行&quot;</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>); <span class="comment">// 3000毫秒（3秒）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除定时器</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(timerId);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. setInterval</span></span><br><span class="line"><span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;每2d秒执行一次&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除周期任务</span></span><br><span class="line"><span class="built_in">clearInterval</span>(intervalId);</span><br></pre></td></tr></table></figure>

<h2 id="关键特性"><a href="#关键特性" class="headerlink" title="关键特性"></a>关键特性</h2><ul>
<li><strong>异步执行</strong>：定时器回调在事件循环中执行，不会阻塞主线程。</li>
<li><strong>依赖浏览器环境</strong>：页面关闭或标签页失去焦点时，定时器可能失效。</li>
<li><strong>无法精确控制时间</strong>：受浏览器调度影响，实际执行时间可能有偏差。</li>
</ul>
<h1 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h1><h2 id="基础选择器"><a href="#基础选择器" class="headerlink" title="基础选择器"></a>基础选择器</h2><ul>
<li><p><strong><code>document.querySelector</code></strong><br>获取第一个匹配的元素（返回单个元素）  </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> firstDiv = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;div&quot;</span>); <span class="comment">// 第一个div</span></span><br><span class="line"><span class="keyword">const</span> idElement = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#header&quot;</span>); <span class="comment">// 通过id选择</span></span><br><span class="line"><span class="keyword">const</span> classElements = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.active&quot;</span>); <span class="comment">// 通过类名选择</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>document.querySelectorAll</code></strong><br>获取所有匹配的元素（返回伪数组NodeList）  </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> allDivs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;div&quot;</span>); <span class="comment">// 所有div</span></span><br><span class="line"><span class="keyword">const</span> inputs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;input[type=&#x27;text&#x27;]&quot;</span>); <span class="comment">// 属性选择</span></span><br></pre></td></tr></table></figure></li>
<li><p><strong>伪数组转真数组</strong>  </p>
 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> nodeList = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.item&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>.<span class="title function_">from</span>(nodeList); <span class="comment">// 转为数组</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="高级选择器语法"><a href="#高级选择器语法" class="headerlink" title="高级选择器语法"></a>高级选择器语法</h2><table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong>标签选择器</strong></td>
<td><code>div</code>、<code>span</code></td>
<td>选中所有<code>div</code>元素</td>
</tr>
<tr>
<td><strong>ID选择器</strong></td>
<td><code>#header</code></td>
<td>选中<code>id=&quot;header&quot;</code>的元素</td>
</tr>
<tr>
<td><strong>类选择器</strong></td>
<td><code>.active</code></td>
<td>选中所有类名包含<code>active</code>的元素</td>
</tr>
<tr>
<td><strong>属性选择器</strong></td>
<td><code>[name=&quot;username&quot;]</code></td>
<td>选中<code>name</code>属性值为<code>username</code>的元素</td>
</tr>
<tr>
<td><strong>后代选择器</strong></td>
<td><code>.container .item</code></td>
<td>选中<code>.container</code>内所有<code>.item</code>后代</td>
</tr>
<tr>
<td><strong>子选择器</strong></td>
<td><code>.menu &gt; li</code></td>
<td>选中<code>.menu</code>的直接子元素<code>li</code></td>
</tr>
<tr>
<td><strong>并集选择器</strong></td>
<td><code>img, video</code></td>
<td>选中所有<code>img</code>或<code>video</code>元素</td>
</tr>
<tr>
<td><strong>伪类选择器</strong></td>
<td><code>a:hover</code></td>
<td>选中鼠标悬停的链接</td>
</tr>
<tr>
<td><strong>伪元素选择器</strong></td>
<td><code>p::first-line</code></td>
<td>选中段落的第一行</td>
</tr>
<tr>
<td><code>querySelector(&#39;[data-filter-name=&quot;X&quot;]&#39;)</code>：精确匹配特定属性值的元素</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<hr>
<h1 id="DOM结构与遍历"><a href="#DOM结构与遍历" class="headerlink" title="DOM结构与遍历"></a>DOM结构与遍历</h1><h2 id="元素访问与遍历"><a href="#元素访问与遍历" class="headerlink" title="元素访问与遍历"></a>元素访问与遍历</h2><table>
<thead>
<tr>
<th>属性&#x2F;方法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>children</code></strong></td>
<td>返回元素的所有<strong>直接子元素</strong>（仅元素节点）</td>
<td><code>parent.children[0]</code></td>
</tr>
<tr>
<td><strong><code>childNodes</code></strong></td>
<td>返回所有子节点（包括文本节点、注释节点等）</td>
<td><code>parent.childNodes</code></td>
</tr>
<tr>
<td><strong><code>firstChild/lastChild</code></strong></td>
<td>获取第一个&#x2F;最后一个子节点（可能为文本节点）</td>
<td><code>parent.firstChild</code></td>
</tr>
<tr>
<td><strong><code>nextSibling/previousSibling</code></strong></td>
<td>获取下一个&#x2F;上一个兄弟节点（可能为文本节点）</td>
<td><code>element.nextSibling</code></td>
</tr>
<tr>
<td><strong><code>parentElement</code></strong></td>
<td>获取父元素（排除文本节点）</td>
<td><code>element.parentElement</code></td>
</tr>
<tr>
<td><strong><code>closest()</code></strong></td>
<td>向上遍历父元素，直到找到匹配选择器的元素</td>
<td><code>element.closest(&quot;.container&quot;)</code></td>
</tr>
<tr>
<td><strong><code>matches()</code></strong></td>
<td>判断元素是否匹配选择器</td>
<td><code>element.matches(&quot;div&quot;)</code></td>
</tr>
</tbody></table>
<h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 遍历所有子元素</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(parent.<span class="property">children</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(child);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历所有后代元素</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.ancestor *&quot;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">descendant</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(descendant);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="节点操作"><a href="#节点操作" class="headerlink" title="节点操作"></a>节点操作</h1><h2 id="创建与插入节点"><a href="#创建与插入节点" class="headerlink" title="创建与插入节点"></a>创建与插入节点</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>document.createElement(tagName)</code></strong></td>
<td>创建新元素</td>
<td><code>const newDiv = document.createElement(&quot;div&quot;);</code></td>
</tr>
<tr>
<td><strong><code>parent.appendChild(child)</code></strong></td>
<td>将子元素添加到父元素末尾</td>
<td><code>parent.appendChild(newDiv);</code></td>
</tr>
<tr>
<td><strong><code>parent.insertBefore(newNode, referenceNode)</code></strong></td>
<td>在指定节点前插入</td>
<td><code>parent.insertBefore(newDiv, existingNode);</code></td>
</tr>
<tr>
<td><strong><code>parent.prepend(child)</code></strong></td>
<td>将子元素添加到父元素开头（ES6+）</td>
<td><code>parent.prepend(newDiv);</code></td>
</tr>
<tr>
<td><strong><code>element.before(node)</code></strong></td>
<td>在当前元素前插入节点</td>
<td><code>element.before(newDiv);</code></td>
</tr>
<tr>
<td><strong><code>element.after(node)</code></strong></td>
<td>在当前元素后插入节点</td>
<td><code>element.after(newDiv);</code></td>
</tr>
<tr>
<td>插入的位置：</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">before(node)</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">prepend(node)</span><br><span class="line">append(node)</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">after(node)</span><br></pre></td></tr></table></figure>
<h2 id="删除与替换节点"><a href="#删除与替换节点" class="headerlink" title="删除与替换节点"></a>删除与替换节点</h2><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>parent.removeChild(child)</code></strong></td>
<td>从父元素中移除子元素</td>
<td><code>parent.removeChild(oldDiv);</code></td>
</tr>
<tr>
<td><strong><code>element.replaceWith(newNode)</code></strong></td>
<td>用新节点替换当前节点</td>
<td><code>oldDiv.replaceWith(newDiv);</code></td>
</tr>
<tr>
<td><strong><code>parent.replaceChild(newNode, oldNode)</code></strong></td>
<td>替换父元素中的旧节点</td>
<td><code>parent.replaceChild(newDiv, oldDiv);</code></td>
</tr>
</tbody></table>
<h2 id="3-克隆节点"><a href="#3-克隆节点" class="headerlink" title="3. 克隆节点"></a>3. 克隆节点</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> clonedNode = element.<span class="title function_">cloneNode</span>(<span class="literal">true</span>); <span class="comment">// true表示深拷贝（复制子节点）</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="样式操作"><a href="#样式操作" class="headerlink" title="样式操作"></a>样式操作</h1><h2 id="基于Class的样式"><a href="#基于Class的样式" class="headerlink" title="基于Class的样式"></a>基于Class的样式</h2><ul>
<li>**<code>classList</code>**：操作元素的类名  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">element.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;active&quot;</span>);    <span class="comment">// 添加类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;active&quot;</span>); <span class="comment">// 移除类</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;active&quot;</span>); <span class="comment">// 切换类（存在则移除，否则添加）</span></span><br><span class="line">element.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;active&quot;</span>); <span class="comment">// 检查是否存在类</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="基于Style的样式"><a href="#基于Style的样式" class="headerlink" title="基于Style的样式"></a>基于Style的样式</h2><ul>
<li><strong>直接操作内联样式</strong>  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置样式（小驼峰命名，带单位）</span></span><br><span class="line">element.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&quot;100px&quot;</span>;</span><br><span class="line">element.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取样式（返回计算后的值）</span></span><br><span class="line"><span class="keyword">const</span> computedWidth = <span class="variable language_">window</span>.<span class="title function_">getComputedStyle</span>(element).<span class="property">width</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="动态计算样式值"><a href="#动态计算样式值" class="headerlink" title="动态计算样式值"></a>动态计算样式值</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 将25px增加到30px</span></span><br><span class="line"><span class="keyword">const</span> currentWidth = <span class="built_in">parseInt</span>(element.<span class="property">style</span>.<span class="property">width</span>, <span class="number">10</span>); <span class="comment">// 提取数值</span></span><br><span class="line">element.<span class="property">style</span>.<span class="property">width</span> = (currentWidth + <span class="number">5</span>) + <span class="string">&quot;px&quot;</span>; <span class="comment">// 新值加单位</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="其他高频API"><a href="#其他高频API" class="headerlink" title="其他高频API"></a>其他高频API</h1><h2 id="数据属性（dataset）"><a href="#数据属性（dataset）" class="headerlink" title="数据属性（dataset）"></a>数据属性（dataset）</h2><ul>
<li><strong>访问HTML5数据属性</strong>  <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">data-user</span>=<span class="string">&quot;123&quot;</span> <span class="attr">data-status</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> user = element.<span class="property">dataset</span>.<span class="property">user</span>; <span class="comment">// &quot;123&quot;</span></span><br><span class="line">element.<span class="property">dataset</span>.<span class="property">status</span> = <span class="string">&quot;inactive&quot;</span>; <span class="comment">// 设置值</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="获取元素尺寸"><a href="#获取元素尺寸" class="headerlink" title="获取元素尺寸"></a>获取元素尺寸</h2><table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>offsetWidth/offsetHeight</code></strong></td>
<td>包含padding和border的宽度&#x2F;高度</td>
</tr>
<tr>
<td><strong><code>clientWidth/clientHeight</code></strong></td>
<td>可视内容区域（不包含滚动条）</td>
</tr>
<tr>
<td><strong><code>scrollWidth/scrollHeight</code></strong></td>
<td>元素内容的总宽度&#x2F;高度（含溢出部分）</td>
</tr>
</tbody></table>
<h2 id="事件相关（基础操作）"><a href="#事件相关（基础操作）" class="headerlink" title="事件相关（基础操作）"></a>事件相关（基础操作）</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 添加事件监听</span></span><br><span class="line">element.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Clicked!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除事件监听</span></span><br><span class="line">element.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>, handler);</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>html+css</category>
        <category>面试题</category>
        <category>高频api</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>高频api</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue面试题</title>
    <url>/2025/04/10/36-vue%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<h2 id="MVVM模型"><a href="#MVVM模型" class="headerlink" title="MVVM模型"></a>MVVM模型</h2><p>MVVM 模型其实就是一种让代码分工更明确的开发模式，主要分三个部分：<br>Model（数据模型），对应<code>data()</code> 返回的对象 + Pinia&#x2F;Vuex状态。负责存数据，和处理数据逻辑。比如从数据库读写、网络请求这些<br>View（视图层），对应模板语法（<code>&lt;template&gt;</code> 中的 HTML），只负责显示数据和<strong>接收</strong>用户操作。不处理数据逻辑；<br>ViewModel（视图模型），是Vue 实例本身（处理数据绑定&#x2F;事件监听），一个中间层，相当于数据和界面之间的桥梁</p>
<h3 id="双向绑定原理（ViewModel-的核心）"><a href="#双向绑定原理（ViewModel-的核心）" class="headerlink" title="双向绑定原理（ViewModel 的核心）"></a>双向绑定原理（ViewModel 的核心）</h3><ol>
<li><strong>模板编译</strong>：将模板解析为 Render 函数  </li>
<li><strong>依赖收集</strong>：渲染时触发 getter 记录依赖关系  </li>
<li><strong>派发更新</strong>：数据变更时通知关联组件更新<br>vue实例对象前端主流的框架都是这个思想：把数据放在要求的位置（Model），写出模板代码（view）。里面具体怎么插入值中间的vm实例对象来操作</li>
</ol>
<h3 id="最核心的优点："><a href="#最核心的优点：" class="headerlink" title="最核心的优点："></a>最核心的优点：</h3><p>前端程序员可以专注写界面，后端程序员专注处理数据，两边互不干扰<br>界面变化不会影响数据逻辑，数据逻辑改了也不用动界面代码<br>并且方便写单元测试，因为ViewModel可以独立测试</p>
<h2 id="Vue2的数据代理"><a href="#Vue2的数据代理" class="headerlink" title="Vue2的数据代理"></a>Vue2的数据代理</h2><p>核心目标：让我们在组件中能用this.xxx直接访问&#x2F;修改 data 中的属性，而不是繁琐的this._data.xxx<br><code>Object.defineProperty</code>是JavaScript提供的一个底层API，它允许精确地定义或修改对象上的属性，特别是能定义getter&#x2F;setter实现<strong>访问器属性</strong>。Vue2的核心响应式系统正是建立在这个API之上，它通过两步走：</p>
<ol>
<li>首先创建 _data 存储原始数据<br>  Vue会执行 data() 函数，得到原始数据对象，直接保存到vm._data属性上</li>
<li>第二步进行数据劫持 (Observer)：使用<code>Object.defineProperty</code>递归地将保存在 vm._data 上的属性转换成 getter&#x2F;setter，用于实现响应式。<br>（在getter中收集依赖（记录谁在用这个数据），在setter中通知更新（告诉依赖者数据变了）。）</li>
<li>第三步进行数据代理：同样使用 Object.defineProperty，在vm上为_data的每个顶层属性，创建一层代理。当我们访问或修改 <code>vm.xxx</code> 时，实际上是通过代理的 <code>getter/setter</code> 去访问或修改 <code>vm._data.xxx</code>。<br>这层代理让我们能直接用 <code>this.</code> 操作数据，语法更简洁自然。</li>
</ol>
<h3 id="局限"><a href="#局限" class="headerlink" title="局限"></a>局限</h3><p>无法检测对象属性的新增 &#x2F; 删除；无法监听数组索引和长度变化</p>
<h4 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h4><p>Object.defineProperty是JavaScript 提供的一个底层API，它允许精确地定义或修改对象上的属性</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person=&#123;</span><br><span class="line"><span class="attr">name</span>:<span class="string">&#x27;枫糖&#x27;</span>,</span><br><span class="line"><span class="attr">sex</span>:<span class="string">&#x27;女&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(对象名,<span class="string">&#x27;属性名&#x27;</span>,｛</span><br><span class="line">｝)</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(person,<span class="string">&#x27;home&#x27;</span>,｛</span><br><span class="line"><span class="attr">value</span>:<span class="string">&#x27;泽兰&#x27;</span></span><br><span class="line">｝)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person)<span class="comment">//&#123;name:&#x27;枫糖&#x27;,sex:&#x27;女&#x27;,home:&#x27;泽兰&#x27;&#125;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(key); <span class="comment">// 只输出 &#x27;name&#x27;, &#x27;sex&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Object.defineProperty 添加的属性默认不可枚举，默认不会出现在 for…in 循环或 Object.keys() 的结果里<br>解决：显式设置 <code>enumerable: true</code></li>
<li>Object.defineProperty 添加的属性值默认不可以修改<br> 解决：<code>writabe:true</code></li>
<li>Object.defineProperty 添加的属性不可以随意删除<br> 解决： 设置<code>configurable: true</code></li>
</ul>
<ol>
<li>get和set访问器属性<br>xxx属性本身并不存储值。它的值是通过get函数动态返回的（这里是 _xxx 的值）。当给它赋值时，是通过set函数去修改关联的_xxx变量</li>
</ol>
<h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ol>
<li>存储原始数据 (_data)：Vue 在创建组件实例时，会执行我们定义的 data() 函数，得到原始数据对象，并将它直接保存到实例的 _data 属性上。此时，原始数据在 vm._data上</li>
<li>代理到实例 (vm)：Vue会遍历data对象的所有顶层属性，对于每一个属性key，使用Object.defineProperty在组件实例本身上定义一个同名属性</li>
<li>定义代理的 get&#x2F;set<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(vm, key, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> vm.<span class="property">_data</span>[key]; <span class="comment">//访问 this.key 实际上是访问 this._data.key</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">    vm.<span class="property">_data</span>[key] = newValue; <span class="comment">//修改 this.key 实际上是修改 this._data.key</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
当写this.name或 <code>&#123;&#123; name &#125;&#125;</code> 时：<br>读取 (get)：触发定义在 vm 上的 name 属性的 getter，它返回 vm._data.name 的值。<br>修改 (set)：触发定义在 vm 上的 name 属性的 setter，它将新值赋给 vm._data.name</li>
</ol>
<h4 id="data？"><a href="#data？" class="headerlink" title="_data？"></a>_data？</h4><p>_data是Vue内部存储原始响应式数据的地方</p>
<h2 id="vue3的数据代理和数据劫持"><a href="#vue3的数据代理和数据劫持" class="headerlink" title="vue3的数据代理和数据劫持"></a>vue3的数据代理和数据劫持</h2><p>代理与劫持合一：<code>reactive()</code>返回的Proxy对象同时实现了对整个对象的代理和劫持<br>无中间层：直接操作代理对象（无 <code>_data</code> 概念）<br>精准更新：通过 <code>track</code>&#x2F;<code>trigger</code> 实现属性级依赖追踪</p>
<h3 id="解决："><a href="#解决：" class="headerlink" title="解决："></a>解决：</h3><p>解决历史痛点： 完美支持了数组索引&#x2F;长度修改和对象属性的动态增删，开发者可以直接使用原生 JS 语法操作数组和对象，彻底告别 Vue.set 和 Vue.delete。这极大简化了开发心智模型。</p>
<p>性能与精度提升： 通过 惰性转换 减少初始化开销，并通过 Proxy 的能力实现了 更细粒度的依赖追踪，只在真正访问到的属性变化时才触发更新，优化了运行效率。</p>
<p>ref 的定位： ref 主要用于处理基本类型值和需要保持稳定引用的场景，通过 .value 访问其值。在模板中会自动解包。reactive 则专注于处理对象和数组。</p>
<h4 id="核心思想：Proxy取代-Object-defineProperty"><a href="#核心思想：Proxy取代-Object-defineProperty" class="headerlink" title="核心思想：Proxy取代 Object.defineProperty"></a>核心思想：Proxy取代 Object.defineProperty</h4><p>Vue3的响应式系统永强大的原生 JavaScript 特性：Proxy 和 Reflect</p>
<ol>
<li>Proxy是什么<br>它允许你创建一个对象的代理（Proxy）。这个代理可以拦截并重新定义对该对象的基本操作（如属性读取、设置、删除、方法调用等）。</li>
</ol>
<p>它代理的是整个对象，而不是像 Object.defineProperty 那样需要递归遍历并逐个定义对象的属性。</p>
<p>拦截操作范围更广： 可以拦截 get, set, deleteProperty, has, ownKeys 等十多种操作。这是实现更完善响应式的关键。<br>2. Vue 3 如何利用 Proxy 实现响应式？<br>Vue 3 主要通过两个核心函数：reactive() 和 ref()。<br>reactive(obj)： 这是 Vue 3 处理对象 (Object) 和数组 (Array) 响应式的主力。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span> &#125;,</span><br><span class="line">  <span class="attr">hobbies</span>: [<span class="string">&#x27;reading&#x27;</span>, <span class="string">&#x27;coding&#x27;</span>]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>内部过程： reactive 函数接收一个普通对象，然后返回这个对象的 Proxy 代理。</p>
<p>劫持与代理合一： 这个 Proxy 同时完成了 Vue 2 中 数据代理（方便访问） 和 数据劫持（追踪依赖、触发更新） 的工作</p>
<h4 id="解决Vue2的痛点"><a href="#解决Vue2的痛点" class="headerlink" title="解决Vue2的痛点"></a>解决Vue2的痛点</h4><ol>
<li>完美支持数组索引和变更方法：<blockquote>
<p>Vue 2 问题： 无法检测通过索引直接设置项 (arr[index] &#x3D; newValue) 或修改数组长度 (arr.length &#x3D; 0)。需要特殊处理数组的 push, pop, shift, unshift, splice, sort, reverse 方法。<br>Vue 3 解决： Proxy 的 set 陷阱可以完美拦截 arr[index] &#x3D; newValue 和 arr.length &#x3D; newLength 操作。数组的内置方法（如 push）内部会执行索引设置或 length 修改，自然会被 Proxy 捕获。不再需要特殊 hack 数组方法！</p>
</blockquote>
</li>
<li>完美支持对象属性的动态添加和删除：</li>
<li>更细粒度的依赖追踪：<br>Vue2 追踪的依赖是对象属性的 getter。嵌套对象需要递归遍历，初始化开销大</li>
<li>更统一简洁的实现：<br>Vue 2： 需要区分数据代理 (vm 属性代理 _data) 和数据劫持 (Observer 处理 _data)。实现相对复杂。<br>Vue 3： reactive() 返回的 Proxy 代理一步到位</li>
</ol>
<h2 id="Options-API"><a href="#Options-API" class="headerlink" title="Options API"></a>Options API</h2><p>Vue的OptionsAPI，我的理解是：它是 Vue2的默认组件组织方式，也是 Vue 3 完全兼容的经典模式。它以声明式的“选项”对象为核心，将组件的不同功能逻辑,划分到预定义好的“格子”里,核心思想是按功能类型划分代码</p>
<blockquote>
<p> 痛点：逻辑分散：同一功能的代码分散在 data&#x2F;methods&#x2F;computed&#x2F;watch中，复用困难：混入（mixins）导致命名冲突和隐式依赖</p>
</blockquote>
<h3 id="核心思想：按功能类型划分代码"><a href="#核心思想：按功能类型划分代码" class="headerlink" title="核心思想：按功能类型划分代码"></a>核心思想：按功能类型划分代码</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 典型的 Options API 组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 1. 组件标识</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;MyComponent&#x27;</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. 模板依赖</span></span><br><span class="line">  <span class="attr">components</span>: &#123; <span class="title class_">ChildComponent</span> &#125;,</span><br><span class="line">  <span class="attr">directives</span>: &#123; focus &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 外部接口</span></span><br><span class="line">  <span class="attr">props</span>: &#123; <span class="attr">message</span>: <span class="title class_">String</span> &#125;,</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&#x27;submit&#x27;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. 本地响应式状态</span></span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span> &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 5. 计算属性 (基于状态的衍生值)</span></span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">doubledCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">count</span> * <span class="number">2</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">greeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`Hello, <span class="subst">$&#123;<span class="variable language_">this</span>.user.name&#125;</span>!`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 6. 方法 (事件处理、业务逻辑)</span></span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleSubmit</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;submit&#x27;</span>, <span class="variable language_">this</span>.<span class="property">user</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 7. 生命周期钩子 (组件各个阶段执行的操作)</span></span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Component created!&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Component mounted to DOM!&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">fetchData</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Component about to be destroyed!&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">cleanup</span>();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 8. 侦听器 (响应状态变化执行异步或复杂操作)</span></span><br><span class="line">  <span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="title function_">count</span>(<span class="params">newVal, oldVal</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Count changed from <span class="subst">$&#123;oldVal&#125;</span> to <span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;user.name&#x27;</span>(newName) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`User&#x27;s name changed to <span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="data-：定义组件的本地响应式状态"><a href="#data-：定义组件的本地响应式状态" class="headerlink" title="data()：定义组件的本地响应式状态"></a>data()：定义组件的本地响应式状态</h3><p>为什么必须是函数:组件会被复用，如果 data 是对象，所有实例共享同一份数据（引用类型浅拷贝问题）<br>Vue遍历 data 对象的所有属性，vue2中用Object.defineProperty 添加 getter&#x2F;setter</p>
<h3 id="props用来声明组件接收的外部传入的属性"><a href="#props用来声明组件接收的外部传入的属性" class="headerlink" title="props用来声明组件接收的外部传入的属性"></a>props用来声明组件接收的外部传入的属性</h3><h3 id="computed计算属性：定义基于响应式状态的衍生值"><a href="#computed计算属性：定义基于响应式状态的衍生值" class="headerlink" title="computed计算属性：定义基于响应式状态的衍生值"></a>computed计算属性：定义基于响应式状态的衍生值</h3><p>计算结果会被缓存，只有依赖的响应式状态变化时才会重新计算。</p>
<blockquote>
<p>声明： 函数形式 (computed: { fullName() { return this.firstName + ‘ ‘ + this.lastName; } })。<br>使用： 像普通属性一样使用 (<code>&#123;&#123; fullName &#125;&#125;</code> 或 this.fullName)</p>
</blockquote>
<h3 id="methods方法-定义可以在模板，或组件逻辑中调用的函数。用于事件处理、业务逻辑封装。"><a href="#methods方法-定义可以在模板，或组件逻辑中调用的函数。用于事件处理、业务逻辑封装。" class="headerlink" title="methods方法:定义可以在模板，或组件逻辑中调用的函数。用于事件处理、业务逻辑封装。"></a>methods方法:定义可以在模板，或组件逻辑中调用的函数。用于事件处理、业务逻辑封装。</h3><blockquote>
<p>声明： 普通函数 (methods: { handleClick() { … } })。<br>this 绑定： Vue 自动将 methods 中的函数绑定到组件实例 (this)，避免丢失上下文。<br>注意： 不要使用箭头函数定义方法，否则this不会指向组件实例。<br><strong>箭头函数没有自己的this，会继承父级作用域的this，指向window无法被Vue重重新绑定</strong></p>
</blockquote>
<h3 id="watch：在响应式状态发生变化时执行"><a href="#watch：在响应式状态发生变化时执行" class="headerlink" title="watch：在响应式状态发生变化时执行"></a>watch：在响应式状态发生变化时执行</h3><p>默认只监听引用变化，对象内部属性变化不会触发</p>
<blockquote>
<p>可以侦听 data&#x2F;props&#x2F;computed 属性。支持深度侦听 (deep: true)、立即执行 (immediate: true)、回调接收新旧值。<br>生命周期钩子 (如 created, mounted, updated, beforeUnmount 等)</p>
</blockquote>
<h2 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h2><p>将同一功能的代码放在一个setup()函数中,同一功能的状态&#x2F;方法&#x2F;生命周期可以集中书写<br>灵活复用：通过自定义hook复用逻辑替代 Mixins（解决命名冲突）<br>类型支持：更好的 TypeScript 集成（setup 函数返回明确类型</p>
<h2 id="Vue-2和Vue3之间的不同"><a href="#Vue-2和Vue3之间的不同" class="headerlink" title="Vue 2和Vue3之间的不同"></a>Vue 2和Vue3之间的不同</h2><p>Vue 3 是全面进化的版本</p>
<ol>
<li>响应式系统<br>Vue 2: 基于Object.defineProperty实现响应，需递归遍历+单独处理数组式数据绑定<br>Vue 3: 用Proxy实现对象级监听<br>vue3的核心技术是Proxy + Reflect，代理整个对象，无需递归初始化属性<br>vue3可以直接进行数组索引修改；动态增删属性</li>
<li>API设计<br>Vue 2: 主要采用Options API，按功能类型分块，比如（如data, methods, computed等）选项<br>Vue 3: Composition API， 允许将同一功能的状态&#x2F;方法&#x2F;生命周期集中书写，<strong>解决逻辑复用</strong></li>
<li>生命周期钩子<br>Vue 2: 提供了一系列生命周期钩子，比如beforeCreate, created, beforeMount, mounted等。<br>Vue 3: 精简并重组了这些钩子，例如beforeDestroy变成了onBeforeUnmount，destroyed变为onUnmounted,beforeCreate被setup() 取代</li>
<li>性能优化<br>编译时优化：PatchFlag标记动态节点，Diff效率提升<br>虚拟DOM优化、按需编译、静态提升、事件缓存、Proxy 响应式系统、Tree-shaking 等<blockquote>
<p>按需编译:Vue3 的编译器会分析模板，只生成需要的代码（如静态节点不再重复渲染）<br>静态内容（如纯文本）只创建一次，不再参与 diff 计算<br>内联事件处理函数会被缓存，避免每次渲染都创建新函数<br>打包体积:Vue2全量引入,Vue3Tree-shaking 按需引入</p>
</blockquote>
</li>
<li>生态系统<br>Vue3 推荐使用Vite 构建工具；Pinia状态管理库,对TypeScript支持更好，API更简洁；VueUse，基于 Composition API 的工具库提供大量可复用的hook</li>
</ol>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>Vue3 的生命周期是指<strong>组件</strong>从创建到销毁过程中的一系列阶段，每个阶段都有对应的生命周期钩子函数，让开发者可以在特定阶段执行相应的逻辑</p>
<h3 id="组件创建阶段"><a href="#组件创建阶段" class="headerlink" title="组件创建阶段"></a>组件创建阶段</h3><p><strong>setup：</strong>在组件创建之前执行，用于初始化组件的响应式数据、计算属性、方法等，是 Composition API 的入口点。比如在setup中可以定义组件的初始状态数据const count &#x3D; ref(0)。<br><strong>onBeforeMount：</strong>在组件挂载到 DOM 之前调用。此时组件的render函数已经被调用，但还没有实际的 DOM 节点被创建。可以在这个钩子中进行一些数据的最后准备工作，比如对即将渲染的数据进行最后的格式化。<br><strong>onMounted</strong>：组件挂载到 DOM 后调用。此时可以访问到真实的 DOM 节点，常用于发送网络请求获取数据，然后更新组件状态来渲染数据到页面上，或者进行一些需要 DOM 节点的初始化操作，如echarts图表的初始化。</p>
<h3 id="组件更新阶段"><a href="#组件更新阶段" class="headerlink" title="组件更新阶段"></a>组件更新阶段</h3><p><strong>onBeforeUpdate：</strong>在组件更新之前调用，此时组件的响应式数据已经发生了变化，但 DOM 还没有更新。可以在这个钩子中做一些数据更新前的准备工作，比如保存旧的数据状态。<br><strong>onUpdated：</strong>组件更新完成后调用，此时 DOM 已经根据最新的数据进行了更新。可以在这个钩子中执行一些依赖于更新后 DOM 的操作，比如操作更新后的 DOM 元素，或者根据新的 DOM 状态重新计算一些布局相关的值。</p>
<h3 id="组件销毁阶段"><a href="#组件销毁阶段" class="headerlink" title="组件销毁阶段"></a>组件销毁阶段</h3><p><strong>onBeforeUnmount：</strong>在组件卸载之前调用。可以在这个钩子中进行一些<strong>清理工作</strong>，比如清除定时器、取消网络请求、解绑全局事件等，以避免内存泄漏。<br><strong>onUnmounted：</strong>组件卸载后调用。此时组件实例以及相关的 DOM 都已经被销毁，组件相关的所有资源都应该被清理干净。</p>
<h3 id="其他钩子"><a href="#其他钩子" class="headerlink" title="其他钩子"></a>其他钩子</h3><p>onErrorCaptured：当组件或其子组件发生错误时会被调用。可以用于捕获错误并进行统一的错误处理，比如记录错误信息、展示错误提示给用户等，有助于提高应用的稳定性和可维护性。</p>
<blockquote>
<p>Options API 生命周期钩子是预定义的组件选项，与 data、methods 并列。它们是 “被动声明” 的，由 Vue 在特定时刻调用。<br>Composition API ：生命周期钩子是可注册的函数，在setUp中主动调用<br>Vue 3 setup() 取代了 beforeCreate&#x2F;created，成为组合式逻辑的入口；<br>钩子变为可注册的函数 (onXxx)，支持在功能逻辑块内就近多次注册<br>命名更语义化,on开头<br>解决了Options API 生命周期逻辑分散的痛点，实现功能内聚</p>
</blockquote>
<p><img src="/postImgs/other/smzq.png" alt="生命周期对比"></p>
<h2 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h2><p>父子组件：props + emit（如表单控件）<br>祖孙层级深：provide&#x2F;inject（如主题&#x2F;语言）<br>全局状态：Pinia（如用户登录状态）<br>兄弟组件：提升状态到父级 或 用 Pinia<br>特殊需求：$refs（调用子组件）&#x2F;$attrs（透传） → Vue 3合并$attrs<br>Vue 3 黄金法则：能用 provide 不用事件总线，能用 Pinia 不用 Vuex</p>
<h3 id="父子通信"><a href="#父子通信" class="headerlink" title="父子通信"></a>父子通信</h3><h4 id="父传子：Props"><a href="#父传子：Props" class="headerlink" title="父传子：Props"></a>父传子：Props</h4><p>父组件传递数据：在父组件的模板中，通过在子组件标签上以属性名&#x3D;“属性值”的形式来传递数据。如<code>&lt;Child :msg=&quot;parentMsg&quot; /&gt;</code>，这里parentMsg是父组件中定义的响应式数据，:是 Vue 的指令语法，用于将parentMsg的值绑定到子组件的msg属性上。<br>子组件接收数据：在子组件中，使用<strong>defineProps宏</strong>来声明接收父组件传递的Props。<br><code>如const props = defineProps([&#39;msg&#39;]);</code>，这样就可以在子组件中通过props.msg来访问父组件传递过来的数据了。</p>
<h4 id="子传父：自定义事件"><a href="#子传父：自定义事件" class="headerlink" title="子传父：自定义事件"></a>子传父：自定义事件</h4><p>子组件触发事件：子组件通过<strong>defineEmits宏</strong>来定义可以触发的自定义事件。如const emit &#x3D; defineEmits([‘handle - event’]);，然后在子组件的方法中使用emit函数来触发事件，如**emit(‘handle - event’, ‘子组件的数据’);**，这里第一个参数是事件名，第二个参数是要传递给父组件的数据。<br>父组件监听事件：在父组件的子组件标签上使用@事件名&#x3D;“事件处理函数”的形式来监听子组件触发的事件。如<code>&lt;Child @handle - event=&quot;handleChildEvent&quot; /&gt;</code>，handleChildEvent是父组件中定义的方法，当子组件触发handle - event事件时，父组件的handleChildEvent方法就会被调用，并且可以接收到子组件传递过来的数据。</p>
<blockquote>
<p>子组件接收数据：<br>通过 defineProps 声明 Props，支持两种方式：<br>数组形式：defineProps([‘msg’, ‘count’, ‘user’])（适用于简单类型）。<br>对象形式：可指定类型、必填项、默认值（如 msg: { type: String, required: true }），用于类型校验和默认值设置。</p>
</blockquote>
<h4 id="代码例子"><a href="#代码例子" class="headerlink" title="代码例子"></a>代码例子</h4><ol>
<li>父子组件通信:<br>事件上传：Vue 2<code>this.$emit(&#39;event&#39;, data)</code>，vue3<code>defineEmits + emit(&#39;event&#39;)</code><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 1. 在子组件标签上用 `:` 绑定数据（父传子） --&gt;</span><br><span class="line">  &lt;Child </span><br><span class="line">    :msg=&quot;parentMsg&quot;        &lt;!-- 传递字符串数据 --&gt;</span><br><span class="line">    :count=&quot;counter&quot;        &lt;!-- 传递响应式数值 --&gt;</span><br><span class="line">    :user=&quot;currentUser&quot;     &lt;!-- 传递对象数据 --&gt;</span><br><span class="line">    @child-event=&quot;handleChildEvent&quot;  &lt;!-- 监听子组件事件 --&gt;</span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 父组件自身内容 --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;父组件计数器：&#123;&#123; counter &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;incrementCounter&quot;&gt;+1 父组件计数器&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 引入 Vue 响应式工具</span><br><span class="line">import &#123; ref, reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">// 1. 定义父组件数据</span><br><span class="line">const parentMsg = &#x27;这是父组件传递的字符串&#x27;; // 普通字符串</span><br><span class="line">const counter = ref(0); // 响应式数值（修改后视图自动更新）</span><br><span class="line">const currentUser = reactive(&#123;  // 响应式对象</span><br><span class="line">  name: &#x27;Alice&#x27;,</span><br><span class="line">  age: 25</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 2. 定义处理子组件事件的函数</span><br><span class="line">const handleChildEvent = (data) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;子组件传递的数据:&#x27;, data); // 控制台打印子组件数据</span><br><span class="line">  // 父组件可根据子组件数据做逻辑处理（示例：更新计数器）</span><br><span class="line">  counter.value += 1;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 3. 父组件自有方法（示例：修改计数器）</span><br><span class="line">const incrementCounter = () =&gt; &#123;</span><br><span class="line">  counter.value += 1;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 子组件接收并展示父组件数据 --&gt;</span><br><span class="line">  &lt;div class=&quot;child-component&quot;&gt;</span><br><span class="line">    &lt;h3&gt;子组件接收到的 Props：&lt;/h3&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 1. 展示字符串 Props --&gt;</span><br><span class="line">    &lt;p&gt;字符串数据：&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 2. 展示数值 Props（响应式，父组件修改后自动更新） --&gt;</span><br><span class="line">    &lt;p&gt;计数器：&#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 3. 展示对象 Props --&gt;</span><br><span class="line">    &lt;p&gt;用户信息：&#123;&#123; user.name &#125;&#125;，年龄 &#123;&#123; user.age &#125;&#125;&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 子组件触发事件（子传父） --&gt;</span><br><span class="line">    &lt;button @click=&quot;sendDataToParent&quot;&gt;</span><br><span class="line">      点击传递数据给父组件</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 1. 声明接收父组件的 Props</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  // 方式1：简单数组声明（适用于非复杂类型）</span><br><span class="line">  msg: &#123; type: String, required: true &#125;, // 字符串类型，必填</span><br><span class="line">  count: &#123; type: Number, default: 0 &#125;,   // 数值类型，默认值 0</span><br><span class="line">  // 方式2：对象声明（适用于复杂类型校验）</span><br><span class="line">  user: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    required: true,</span><br><span class="line">    default: () =&gt; (&#123;&#125;) // 对象默认值需返回函数</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 2. 定义触发父组件事件的函数</span><br><span class="line">const emit = defineEmits([&#x27;child-event&#x27;]); // 声明自定义事件</span><br><span class="line"></span><br><span class="line">const sendDataToParent = () =&gt; &#123;</span><br><span class="line">  // 触发事件并传递数据（子传父）</span><br><span class="line">  emit(&#x27;child-event&#x27;, &#123;</span><br><span class="line">    timestamp: new Date().toLocaleString(), // 时间戳</span><br><span class="line">    message: &#x27;来自子组件的消息&#x27;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>跨层级通信Provide&#x2F;Inject<br>Vue 2：选项式：provide: { key: val }   inject: [‘key’]<br>Vue 3：函数式：provide(key, value)   inject(key)<br>事件总线：<br>Vue2:	new Vue() 作为 EventBus	<br>Vue3：废弃EventBus → 改用 mitt库<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Vue 3 Provide 响应式方案</span></span><br><span class="line"><span class="keyword">import</span> &#123; provide, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">provide</span>(<span class="string">&#x27;count&#x27;</span>, count) <span class="comment">// 子孙组件注入的 count 是响应式的</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>全局状态管理<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;main&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;),</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span>++ <span class="comment">// 直接修改（无需 mutations）</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="虚拟-DOM与Diff-算法"><a href="#虚拟-DOM与Diff-算法" class="headerlink" title="虚拟 DOM与Diff 算法"></a>虚拟 DOM与Diff 算法</h2><p>为什么用虚拟DOM：性能开销大，代码维护难<br>理解：真实DOM结构复杂，每次修改都会触发浏览器的重排和重绘，频繁直接操作 DOM 会导致代码混乱，难以维护。<br>目的：高效地更新DOM<br><strong>对于简单场景，直接操作DOM可能更快。虚拟 DOM 的优势在于复杂视图频繁更新时的性能优化。</strong><br>虚拟DOM的核心流程分为三步：生成 → 对比（diff） → 更新</p>
<h3 id="虚拟DOM（主流框架的默认选择）"><a href="#虚拟DOM（主流框架的默认选择）" class="headerlink" title="虚拟DOM（主流框架的默认选择）"></a>虚拟DOM（主流框架的默认选择）</h3><p>虚拟DOM是一种用JavaScript对象来模拟真实DOM树的技术。它是对真实 DOM 的抽象，以更高效的方式来更新和操作DOM，是一种轻量级的 JavaScript 对象<br>每个虚拟DOM节点对应一个真实DOM节点，但不包含真实DOM的所有属性（如事件监听、样式计算等）<br>一个虚拟DOM节点通常包含：标签名，属性，子节点<br>虚拟DOM节点的基本结构</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;div&#x27;</span>,             <span class="comment">// 节点类型（标签名或组件）</span></span><br><span class="line">  <span class="attr">props</span>: &#123;                 <span class="comment">// 节点属性</span></span><br><span class="line">    <span class="attr">className</span>: <span class="string">&#x27;container&#x27;</span>,</span><br><span class="line">    <span class="attr">onClick</span>: <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">children</span>: [              <span class="comment">// 子节点列表</span></span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&#x27;h1&#x27;</span>, <span class="attr">children</span>: [<span class="string">&#x27;标题&#x27;</span>] &#125;,</span><br><span class="line">    &#123; <span class="attr">type</span>: <span class="string">&#x27;p&#x27;</span>, <span class="attr">children</span>: [<span class="string">&#x27;内容&#x27;</span>] &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">dom</span>: <span class="literal">null</span>                <span class="comment">// 对应真实DOM节点的引用（可选）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="虚拟DOM一定比直接操作DOM快吗"><a href="#虚拟DOM一定比直接操作DOM快吗" class="headerlink" title="虚拟DOM一定比直接操作DOM快吗"></a>虚拟DOM一定比直接操作DOM快吗</h3><h4 id="性能对比，三个角度考虑："><a href="#性能对比，三个角度考虑：" class="headerlink" title="性能对比，三个角度考虑："></a>性能对比，三个角度考虑：</h4><ol>
<li>单次更新场景，真实DOM好<br>真实 DOM：直接操作（如dom.innerHTML &#x3D; ‘新内容’），性能开销极低<br>虚拟 DOM：需经历「生成虚拟节点→Diff 对比→更新真实 DOM」流程，存在额外计算开销</li>
<li>频繁更新场景，虚拟DOM好<br>真实 DOM：每次更新都触发浏览器重排重绘，若更新频率极高（如每秒 100 次），可能导致卡顿<br>虚拟 DOM：通过批量更新和 Diff 算法，将多次更新合并为一次真实 DOM 操作，减少浏览器渲染压力</li>
<li>看节点复杂度<br>若唯一节点包含复杂事件绑定或嵌套结构，虚拟 DOM 的抽象层仍能提供统一的更新逻辑；若只是简单文本节点，真实 DOM 更轻量。<br>虚拟DOM应用场景：数据频繁更新的应用（如实时图表、聊天界面），复杂 UI 交互（如拖拽、动态表单），跨平台开发（React Native、Vue Weex）</li>
</ol>
<h4 id="开发与维护成本："><a href="#开发与维护成本：" class="headerlink" title="开发与维护成本："></a>开发与维护成本：</h4><ol>
<li>开发效率<br>真实DOM：直接操作API，代码更直观，但需手动处理所有细节（如事件绑定、属性更新）。<br>虚拟DOM：依赖框架（如 React&#x2F;Vue），通过声明式编程描述 UI，代码更简洁（如{ count: 10 }自动映射为 DOM 内容）</li>
<li>维护成本<br>真实 DOM：当逻辑复杂时（如条件渲染、动画交互），代码易变得碎片化，难以维护。<br>虚拟 DOM：框架提供的组件化机制可将逻辑封装，便于复用和调试（如 React 的组件生命周期、Vue 的响应式系统）</li>
</ol>
<h3 id="diff算法"><a href="#diff算法" class="headerlink" title="diff算法"></a>diff算法</h3><p>找出新旧虚拟 DOM 树的差异，最小化真实 DOM 操作<br>静态提升：纯静态节点只创建一次，不再参与 diff<br>需要用到Key属性，key用于标识列表中的节点，帮助 Diff 算法快速识别哪些元素被添加、删除或移动</p>
<h4 id="现代-Diff-算法的优化策略"><a href="#现代-Diff-算法的优化策略" class="headerlink" title="现代 Diff 算法的优化策略"></a>现代 Diff 算法的优化策略</h4><p>分层比较：只比较同一层级的节点，不跨层级比较。<br>（如果发现节点不存在，直接删除整个子树，不会继续比较子节点）<br>相同类型节点：<br>如果节点类型相同（如都是div），则只更新属性和内容，保留子节点继续比较。<br>列表比较的 Key：<br>为列表项提供唯一的key，帮助算法识别哪些元素被添加、删除或移动。<br>组件比较：<br>同一类型的组件，保留实例并更新状态；不同类型的组件，直接替换。</p>
<h2 id="计算属性和监听器"><a href="#计算属性和监听器" class="headerlink" title="计算属性和监听器"></a>计算属性和监听器</h2><h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>它的值是根据其他响应式数据计算出来的。它会自动追踪依赖的响应式数据，只有这些依赖数据变化时，才会重新计算。而且计算属性是有缓存的，如果依赖的数据没有变化，多次访问计算属性会直接返回缓存的值，而不会重新计算</p>
<h3 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h3><p>专门负责观察某个或某些响应式数据的变化。一旦被监听的数据发生了改变，就会触发相应的回调函数，你可以在回调函数中执行任何你需要的操作，比如发送网络请求、更新其他相关数据、记录日志等。<br>比如：假设要根据用户输入的搜索关键词来进行实时搜索，并在控制台打印出搜索结果。</p>
<h2 id="如何实现-Vue-Router-的懒加载？"><a href="#如何实现-Vue-Router-的懒加载？" class="headerlink" title="如何实现 Vue Router 的懒加载？"></a>如何实现 Vue Router 的懒加载？</h2><p>可以通过动态导入的方式实现懒加载<br>在路由配置中写成<code>component: () =&gt; import(&#39;../views/Home.vue&#39;)</code><br>这样做的好处是按需加载，提升首屏加载速度，避免一开始就加载全部组件</p>
<h2 id="什么是组件化开发？为什么要用组件化"><a href="#什么是组件化开发？为什么要用组件化" class="headerlink" title="什么是组件化开发？为什么要用组件化"></a>什么是组件化开发？为什么要用组件化</h2><p>组件化开发就是把页面拆分成一个个独立、可复用的小模块，每个模块负责自己的功能。<br>这样做可以让代码结构更清晰，提高可维护性，还能提高开发效率，因为组件可以重复使用。</p>
<h2 id="其他高频问题（简答版）"><a href="#其他高频问题（简答版）" class="headerlink" title="其他高频问题（简答版）"></a>其他高频问题（简答版）</h2><p>Q1:如何在 Vue3 中使用 ref 和 reactive？它们的区别是什么？<br>ref 用于创建一个响应式的基本类型或对象引用。<br>reactive 用于创建一个响应式的对象。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 区别在于 `ref` 返回一个对象，值存储在 `.value` 属性中</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>); <span class="comment">// 0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(state.<span class="property">count</span>); <span class="comment">// 0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Q2:<code>&lt;script setup&gt;</code>是什么<br><code>&lt;script setup&gt;</code> 是一种编译时语法糖，可以在单文件组件（SFC）中更简洁地使用 Composition API。<br>所有在 <script setup> 中定义的内容都是模块化且作用域内的</p>
<p>Q3: Vue3 中如何使用 provide 和 inject 实现依赖注入？它们的作用是什么？<br>provide 用于在上级组件中提供数据，inject 用于在下级组件中注入数据，适用于跨组件传递数据而无需通过 props 和 emits。</p>
<p>Q4:Vue2 响应式系统的缺陷是什么,Vue3 如何解决<br>无法检测属性新增 / 删除：需用Vue.set/Vue.delete<br>数组响应式限制：无法监听索引和长度变化（重写 7 个数组方法）<br>性能问题：初始化时全量递归遍历对象属性<br>Vue3 的改进<br>Proxy 代理整个对象：原生支持动态属性和数组操作<br>懒代理机制：只在访问属性时创建响应式代理，避免初始递归开销<br>Reflect：标准化属性操作（如Reflect.get/Reflect.set<br>Q5：VUE组件渲染流程：</p>
<p>解析模板为 render 函数（或直接使用手写的 render 函数）。<br>执行 render 函数生成虚拟 DOM（VNode）。<br>通过 patch 算法对比新旧 VNode，计算最小 DOM 更新。<br>将变化应用到真实 DOM</p>
<h3 id="Vue的基本原理"><a href="#Vue的基本原理" class="headerlink" title="Vue的基本原理"></a>Vue的基本原理</h3><p>Vue 的核心是响应式系统：当一个Vue实例创建时，Vue会遍历data中的属性， 通过Object.defineProperty()（Vue2）或 Proxy（Vue3）劫持数据的 getter/setter。当数据变化时，会触发依赖收集的更新函数</p>
<h3 id="双向数据绑定的原理"><a href="#双向数据绑定的原理" class="headerlink" title="双向数据绑定的原理"></a>双向数据绑定的原理</h3><p>双向数据绑定本质是单向数据流 + 事件监听，核心是v-model语法糖</p>
<h3 id="MVVM、MVC、MVP-的区别"><a href="#MVVM、MVC、MVP-的区别" class="headerlink" title="MVVM、MVC、MVP 的区别"></a>MVVM、MVC、MVP 的区别</h3><ol>
<li>MVC（Model-View-Controller）<br>核心：数据（Model）和视图（View）分离，通过控制器（Controller）通信。<br>流程：用户操作 View → 触发 Controller → Controller 更新 Model → Model 通知 View 更新。<br>缺点：View 和 Controller 强耦合，大型项目难维护</li>
<li>MVP（Model-View-Presenter）<br>核心：Presenter 作为中间层，负责 View 和 Model 的双向通信。<br>流程：View 把事件交给 Presenter → Presenter 更新 Model → Model 通知 Presenter → Presenter 更新 View。<br>特点：Presenter 持有 View 的引用（如接口），测试更方便</li>
<li>MVVM（Model-View-ViewModel）<br>核心：ViewModel 作为中间层，通过数据绑定（Data Binding）和视图模型（ViewModel）实现 View 和 Model 的解耦。<br>流程：View 和 ViewModel 双向绑定，数据变化自动更新视图，视图事件自动更新数据。<br>Vue 属于 MVVM：ViewModel 由 Vue 实例实现，通过响应式系统和虚拟 DOM 完成数据和视图的同步。</li>
</ol>
]]></content>
      <categories>
        <category>面试题</category>
        <category>vue</category>
      </categories>
      <tags>
        <tag>面试题</tag>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>npm和库</title>
    <url>/2025/07/06/37-npm%E5%92%8C%E5%BA%93/</url>
    <content><![CDATA[<h2 id="库与npm"><a href="#库与npm" class="headerlink" title="库与npm"></a>库与npm</h2><ol>
<li>什么是库</li>
</ol>
<ul>
<li>库是一组可重用的代码集合</li>
<li>提供特定功能的API或组件</li>
<li>可以被项目引入和使用</li>
<li>通常解决特定领域的问题</li>
</ul>
<ol start="2">
<li>库与pnpm的关系 ：</li>
</ol>
<ul>
<li>pnpm是包管理器，用于：<ul>
<li>安装和管理这些库的依赖</li>
<li>维护依赖版本</li>
<li>处理依赖之间的关系</li>
<li>优化存储空间（通过硬链接）</li>
</ul>
</li>
</ul>
<ol start="3">
<li>pnpm的工作方式 ：</li>
</ol>
<ul>
<li>当执行 pnpm install 时：<ul>
<li>读取 package.json 中的依赖配置</li>
<li>从 npm 仓库下载所需的库如</li>
<li>使用硬链接优化存储</li>
<li>生成 pnpm-lock.yaml 锁定版本</li>
</ul>
</li>
</ul>
<ol start="4">
<li>依赖类型 ：</li>
</ol>
<ul>
<li>dependencies：项目运行必需的库</li>
<li>devDependencies：开发时需要的库</li>
</ul>
<h1 id="发布npm包"><a href="#发布npm包" class="headerlink" title="发布npm包"></a>发布npm包</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li>安装最新版的node.js和npm ，验证</li>
<li>注册npm账号</li>
<li>使用官方npm源<code>npm config set registry https://registry.npmjs.org/</code><br><img src="/./postImgs/other/npm02.png" alt="准备工作"></li>
</ul>
<h2 id="初始化文件夹"><a href="#初始化文件夹" class="headerlink" title="初始化文件夹"></a>初始化文件夹</h2><h3 id="创建项目文件夹"><a href="#创建项目文件夹" class="headerlink" title="创建项目文件夹"></a>创建项目文件夹</h3><p> 运行<code>npm init -y</code> 生成package.jaon文件</p>
<blockquote>
<p>npm init与npm init -y</p>
<ul>
<li>npm init是一个交互式命令<br>执行后会逐项询问用户关于项目的配置信息，如项目名称、版本号、描述、入口文件、测试命令等<br>用户可以手动输入或修改这些字段的值。<br>最后根据用户的输入生成 package.json 文件</li>
<li>npm init -y是非交互式的快捷方式<br>直接使用默认值生成 package.json 文件，无需用户确认或输入<br>如果你希望快速初始化项目并接受默认配置，使用 npm init -y<br>如果你想自定义项目的初始配置，使用 npm init 并逐步输入所需信息<br><img src="/./postImgs/other/npm03.png" alt="准备工作"></li>
</ul>
</blockquote>
<h3 id="package-json-文件关键字段说明"><a href="#package-json-文件关键字段说明" class="headerlink" title="package.json 文件关键字段说明"></a>package.json 文件关键字段说明</h3><ol>
<li>字段说明</li>
</ol>
<ul>
<li>name：包名,npm 发布时的唯一标识<br>全局唯一，不能和已有npm包重名，用小写字母、数字、短横线（-）</li>
<li>version：包的版本号,遵循语义化版本规范（如1.0.0）<br>格式：主版本号.次版本号.修订号（如 1.0.0</li>
<li>main：入口文件路径（默认为index.js）<br>指定包的入口文件（即 require&#x2F;import 这个包时加载的文件）<br>当别人 require(‘my-canvas-tool’) 时，实际加载的是 src&#x2F;index.js</li>
<li>description：包的描述，对包的简要描述，npm 官网、搜索时会显示</li>
<li>keywords：关键字数组，帮助别人通过关键词搜索到你的包。</li>
<li>license：开源协议，包的许可证类型，决定别人如何使用你的代码<br>“MIT”（MIT 是一种宽松的开源协议，允许自由使用、修改和分发）</li>
<li>author：包的作者信息。可以写名字、邮箱等</li>
<li>dependencies：生产依赖，包运行时需要的依赖<br>开发依赖，只在开发和测试时需要，发布包时不会被包含进最终包中<br>其他字段（我没写）<br>repository：代码仓库地址（如 GitHub）。<br>bugs：问题反馈地址。<br>homepage：项目主页。<br>files：发布到 npm 时包含的文件列表。<br>engines：指定支持的 Node 版本等</li>
</ul>
<ol start="2">
<li>我的packaje.json文件<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-canvas-tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;一个简单的 Canvas 工具库，支持初始化和清空画布。&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;src/index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;canvas&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;tool&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;draw&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;melon-nie&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;mocha&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^10.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jsdom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^22.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jest&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^30.0.4&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  </span><br><span class="line"><span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="编写代码和测试文件"><a href="#编写代码和测试文件" class="headerlink" title="编写代码和测试文件"></a>编写代码和测试文件</h2><ol>
<li>代码结构<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">my-canvas-tool/</span><br><span class="line">├── src/</span><br><span class="line">│   └── index.js （核心代码）</span><br><span class="line">├── test/</span><br><span class="line">│   └── test.js   （测试文件）</span><br><span class="line">├── .npmignore    （排除发布的文件）</span><br><span class="line">├── README.md     （使用说明）</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure></li>
<li>代码示例（canvas 工具画圆）<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CanvasTool</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">canvas</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(canvas <span class="keyword">instanceof</span> <span class="title class_">HTMLCanvasElement</span>)) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;参数必须为 HTMLCanvasElement&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">canvas</span> = canvas;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span> = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">clear</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">ctx</span>.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">width</span>, <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="property">height</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">CanvasTool</span>; </span><br></pre></td></tr></table></figure></li>
<li>测试文件（使用 Jest,AI生成）<br>安装jest<code>npm install --save-dev jest</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// test/test.js</span></span><br><span class="line"><span class="keyword">const</span> assert = <span class="built_in">require</span>(<span class="string">&#x27;assert&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable constant_">JSDOM</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;jsdom&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CanvasTool</span> = <span class="built_in">require</span>(<span class="string">&#x27;../src/index&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注入 HTMLCanvasElement 到全局，兼容 Node.js 测试环境</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="variable language_">window</span> &#125; = <span class="keyword">new</span> <span class="title function_">JSDOM</span>(<span class="string">&#x27;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;&#x27;</span>);</span><br><span class="line"><span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span> = <span class="variable language_">window</span>.<span class="property">HTMLCanvasElement</span>;</span><br><span class="line"><span class="variable language_">global</span>.<span class="property">document</span> = <span class="variable language_">window</span>.<span class="property">document</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;CanvasTool&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> canvas, ctxMock, tool;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 创建 mock canvas，原型指向 HTMLCanvasElement 以通过 instanceof 检查</span></span><br><span class="line">    canvas = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line">    canvas.<span class="property">width</span> = <span class="number">100</span>;</span><br><span class="line">    canvas.<span class="property">height</span> = <span class="number">100</span>;</span><br><span class="line">    canvas.<span class="property">getContext</span> = jest.<span class="title function_">fn</span>();</span><br><span class="line">    <span class="comment">// 创建 mock 2d context</span></span><br><span class="line">    ctxMock = &#123;</span><br><span class="line">      <span class="attr">fillStyle</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">fillRect</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">      <span class="attr">getImageData</span>: jest.<span class="title function_">fn</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">data</span>: <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">400</span>).<span class="title function_">fill</span>(<span class="number">0</span>) &#125;)),</span><br><span class="line">      <span class="attr">clearRect</span>: jest.<span class="title function_">fn</span>()</span><br><span class="line">    &#125;;</span><br><span class="line">    canvas.<span class="property">getContext</span>.<span class="title function_">mockReturnValue</span>(ctxMock);</span><br><span class="line">    tool = <span class="keyword">new</span> <span class="title class_">CanvasTool</span>(canvas);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;should initialize with a canvas element&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(tool.<span class="property">canvas</span>).<span class="title function_">toBe</span>(canvas);</span><br><span class="line">    <span class="title function_">expect</span>(tool.<span class="property">ctx</span>).<span class="title function_">toBe</span>(ctxMock);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;should clear the canvas&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    tool.<span class="property">ctx</span>.<span class="property">fillStyle</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">    tool.<span class="property">ctx</span>.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">    tool.<span class="title function_">clear</span>();</span><br><span class="line">    <span class="title function_">expect</span>(tool.<span class="property">ctx</span>.<span class="property">clearRect</span>).<span class="title function_">toHaveBeenCalledWith</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// mock HTMLCanvasElement 以通过构造函数类型检查</span></span><br><span class="line"><span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> = <span class="variable language_">global</span>.<span class="property">HTMLCanvasElement</span>; </span><br></pre></td></tr></table></figure></li>
<li>配置测试脚本<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;jest&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="发布前准备"><a href="#发布前准备" class="headerlink" title="发布前准备"></a>发布前准备</h2><h3 id="用jest进行测试"><a href="#用jest进行测试" class="headerlink" title="用jest进行测试"></a>用jest进行测试</h3><blockquote>
<p>Jest 是一个流行的 JavaScript 测试框架，特点是：<br>零配置即可上手<br>支持断言、mock、快照等功能<br>适合测试 Node.js、前端、React 等项目<br>测试：<code>npm test</code><br><img src="/./postImgs/other/npm04.png" alt="准备工作"></p>
</blockquote>
<h3 id="编写README-md"><a href="#编写README-md" class="headerlink" title="编写README.md"></a>编写README.md</h3><p>包含以下内容：安装方法;使用示例;API 文档;贡献指南;开源协议</p>
<h3 id="配置-npmignore"><a href="#配置-npmignore" class="headerlink" title="配置.npmignore"></a>配置.npmignore</h3><p>排除不需要发布的文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node_modules/</span><br><span class="line">test/</span><br><span class="line">.git/</span><br><span class="line">.DS_Store</span><br></pre></td></tr></table></figure>
<h2 id="发布npm包-1"><a href="#发布npm包-1" class="headerlink" title="发布npm包"></a>发布npm包</h2><p><code>npm login</code><br><code>npm publish</code></p>
<blockquote>
<p>若包名已存在，需修改package.json中的name字段<br>每次发布新版本时，修改package.json中的version字段（遵循语义化版本控制），并重新运行npm publish<br>24 小时内可撤销发布<code>npm unpublish &lt;包名&gt;@&lt;版本号&gt; --force</code></p>
</blockquote>
<p><img src="/./postImgs/other/npm05.png" alt="发布npm包"><br><img src="/./postImgs/other/npm06.png" alt="发布npm包"></p>
<p>如何使用<br>在想使用它的项目根目录下运行(包名是 my-canvas-tool)：<br><code>npm install my-canvas-tool</code></p>
]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>面试题--算法题</title>
    <url>/2025/06/03/38-%E7%AE%97%E6%B3%95%E9%A2%98/</url>
    <content><![CDATA[<h2 id="前端算法题和后端算法的区别："><a href="#前端算法题和后端算法的区别：" class="headerlink" title="前端算法题和后端算法的区别："></a>前端算法题和后端算法的区别：</h2><p>前端更注重浏览器性能（如避免长耗时递归）。<br>数据量通常较小，优先考虑代码可读性。<br>常结合 DOM &#x2F; 组件操作（如树形结构遍历对应 DOM 节点操作）</p>
<h1 id="前端处理算法题"><a href="#前端处理算法题" class="headerlink" title="前端处理算法题"></a>前端处理算法题</h1><h2 id="节流和防抖"><a href="#节流和防抖" class="headerlink" title="节流和防抖"></a>节流和防抖</h2><ul>
<li>节流（Throttle）：<br>让一个函数在规定的时间间隔内,最多只执行一次。以<strong>第一次调用</strong>为准，忽略短时间内后续的调用，直到时间间隔结束。<br>特点：它的作用是让一个函数在规定的时间间隔内只执行一次，适用于需要持续响应但频率受限的场景。</li>
<li>防抖（Debounce）：<br>当事件在一定时间间隔内多次触发时,以最后一次调用为准，只有<strong>最后一次触发</strong>后,经过设定的延迟时间，函数才会执行。<br>特点：确保函数在用户操作结束后一段时间执行，适用于需要等待用户输入稳定后再处理的场景。</li>
</ul>
<h2 id="函数防抖"><a href="#函数防抖" class="headerlink" title="函数防抖"></a>函数防抖</h2><p>防抖函数用于限制函数的执行频率;当事件在一定时间间隔内多次触发时，只有<strong>最后一次触发</strong>后,经过设定的延迟时间，才会执行回调函数。<br>常用于搜索框输入、窗口大小调整场景</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// 存储定时器ID</span></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span>; </span><br><span class="line">  <span class="comment">// 返回闭包函数</span></span><br><span class="line">  <span class="comment">//args把所有传入函数的参数收集到一个数组中</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123; </span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer); </span><br><span class="line">    <span class="comment">// 设置新定时器，利用setTimeout延迟执行</span></span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//使用 apply 可以直接传入这个数组，不需要展开</span></span><br><span class="line">      <span class="comment">//func.apply(this, args) 用于调用 func，并传递正确的上下文 (this) 和参数 (args)</span></span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); </span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试函数:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">search</span>(<span class="params">query</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`搜索: <span class="subst">$&#123;query&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建防抖版本,结果输出为：搜索: abc</span></span><br><span class="line"><span class="keyword">const</span> debouncedSearch = <span class="title function_">debounce</span>(search, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟连续输入</span></span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;ab&quot;</span>);</span><br><span class="line"><span class="title function_">debouncedSearch</span>(<span class="string">&quot;abc&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="代码两种写法的对比"><a href="#代码两种写法的对比" class="headerlink" title="代码两种写法的对比"></a>代码两种写法的对比</h3><p>看了多篇相关文章防抖函数this部分有两种写法，但是更推荐写法1：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 写法一：直接使用箭头函数的 this</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写法二：显式保存 this 到变量</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    <span class="keyword">let</span> content = <span class="variable language_">this</span>;</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.<span class="title function_">apply</span>(content, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>写法一：使用箭头函数的 this（继承自外层作用域）；支持动态绑定 this，适用场景如事件处理<br>写法二：显式保存 this 到 content 变量，不支持动态绑定，适用于静态方法</p>
<blockquote>
<p>为什么写法一更推荐</p>
<ul>
<li>箭头函数的 this 继承机制：<br>箭头函数没有自己的 this，它继承自外层函数（即 debounce 返回的箭头函数）<br>调用时动态绑定 this：当调用 onSearch.call(obj, “query”) 时，this 会指向 obj，从而在 fn.apply(this, args) 中正确传递上下文</li>
<li>灵活性：支持动态绑定：<br>调用防抖函数时可以传入不同的 this，适用于事件处理、对象方法等场景</li>
<li>写法二：固定 this：content &#x3D; this 会在 debounce 定义时绑定 this，后续调用无法动态修改</li>
</ul>
</blockquote>
<h3 id="防抖函数中，为什么选择使用箭头函数而不是普通函数？"><a href="#防抖函数中，为什么选择使用箭头函数而不是普通函数？" class="headerlink" title="防抖函数中，为什么选择使用箭头函数而不是普通函数？"></a>防抖函数中，为什么选择使用箭头函数而不是普通函数？</h3><p>箭头函数没有自己的 this，它会继承外层作用域的 this。在防抖函数中，我们希望调用者能够动态绑定 this（例如事件处理函数的 this 指向 DOM 元素），而箭头函数能保证 this 的一致性，避免在 setTimeout 中丢失上下文。</p>
<h2 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h2><p>是一种控制函数执行频率的技术。它的作用是让一个函数在规定的时间间隔内最多只执行一次。<br>在一定时间间隔内，如果一个事件被多次触发，只以第一次被触发为准，忽略短时间内后续的调用，直到时间间隔结束。c</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">  <span class="comment">// 上次执行时间</span></span><br><span class="line">  <span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// 获取当前时间</span></span><br><span class="line">    <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 计算时间差</span></span><br><span class="line">    <span class="keyword">const</span> diff = now - lastTime;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果时间差大于等于延迟时间，执行函数</span></span><br><span class="line">    <span class="keyword">if</span> (diff &gt;= delay) &#123;</span><br><span class="line">      <span class="comment">// 更新上次执行时间</span></span><br><span class="line">      lastTime = now;</span><br><span class="line">      <span class="comment">// 执行传入的函数，并传递参数</span></span><br><span class="line">      fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="axios-fetch"><a href="#axios-fetch" class="headerlink" title="axios&#x2F;fetch"></a>axios&#x2F;fetch</h2><h3 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&quot;https://api.example.com/data&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">     <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span> </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 同时处理成功和失败的响应</span></span><br><span class="line">    <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP error: <span class="subst">$&#123;response.status&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br><span class="line"><span class="comment">//axios</span></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;https://api.example.com/submit&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123456&#x27;</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;Bearer your_token&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>))</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error));</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li><strong>多个 .then</strong>：用于处理异步操作的结果，每个 <code>.then</code> 处理前一个步骤的结果。</li>
<li><strong>response 和 data</strong>：来自 Fetch API 的响应对象和解析后的数据。</li>
<li><strong>return</strong>：返回一个值或 Promise，传递给下一个 <code>.then</code> 进行处理</li>
</ul>
</blockquote>
<h3 id="axios创建单独的实例"><a href="#axios创建单独的实例" class="headerlink" title="axios创建单独的实例"></a>axios创建单独的实例</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//创建单独的实例发送网络请求</span></span><br><span class="line"><span class="keyword">const</span> instance1 = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">   baseURL = <span class="string">&quot;https//xxxxxx&quot;</span>,</span><br><span class="line">   timeout = <span class="number">5000</span>,</span><br><span class="line">   headers=&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建实例</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">&#x27;https://api.example.com&#x27;</span>,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">//加到请求头（config.headers）中的 Authorization 字段里</span></span><br><span class="line">      config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;<span class="comment">// 必须返回 config，否则请求无法发送</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);<span class="comment">// 抛出错误</span></span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 响应拦截器</span></span><br><span class="line">instance.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">// 响应成功，统一处理响应数据</span></span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response.<span class="property">data</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`HTTP 错误: <span class="subst">$&#123;response.status&#125;</span>`</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error.<span class="property">response</span>) &#123;</span><br><span class="line">      <span class="comment">// 服务器返回了错误响应（如 401、404、500）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;服务器错误:&#x27;</span>, error.<span class="property">response</span>.<span class="property">status</span>, error.<span class="property">response</span>.<span class="property">data</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error.<span class="property">request</span>) &#123;</span><br><span class="line">      <span class="comment">// 请求已发出，但未收到响应（如网络断开）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求无响应:&#x27;</span>, error.<span class="property">request</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 其他错误（如请求配置错误）</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;请求异常:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance;</span><br></pre></td></tr></table></figure>

<h2 id="promise-async-await"><a href="#promise-async-await" class="headerlink" title="promise,async&#x2F;await"></a>promise,async&#x2F;await</h2><h3 id="创建-Promise"><a href="#创建-Promise" class="headerlink" title="创建 Promise"></a>创建 Promise</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span> ? </span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">&#x27;Success!&#x27;</span>) : </span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Failed!&#x27;</span>));</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.2 处理结果</span></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(result)) <span class="comment">// 成功输出 &quot;Success!&quot;</span></span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(error)) <span class="comment">// 失败捕获错误</span></span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Done&#x27;</span>)); <span class="comment">// 无论成败都会执行</span></span><br></pre></td></tr></table></figure>

<h3 id="基础-fetch-请求"><a href="#基础-fetch-请求" class="headerlink" title="基础 fetch 请求"></a>基础 fetch 请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetchData</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> data =  <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data)</span><br><span class="line">&#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">&#125;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params">url, content</span>)&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;content&#125;),</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="基础axios请求"><a href="#基础axios请求" class="headerlink" title="基础axios请求"></a>基础axios请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">const</span> response = <span class="keyword">async</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>)</span><br><span class="line">&#125;catconsole.<span class="title function_">log</span>(error)<span class="title function_">ch</span>(<span class="params">error</span>)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="串行请求-并行请求，分批次处理请求"><a href="#串行请求-并行请求，分批次处理请求" class="headerlink" title="串行请求,并行请求，分批次处理请求"></a>串行请求,并行请求，分批次处理请求</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 串行请求：依次等待每个请求完成</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">sequentialRequests</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> user1 = <span class="keyword">await</span> <span class="title function_">fetchUser</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> user2 = <span class="keyword">await</span> <span class="title function_">fetchUser</span>(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">const</span> user3 = <span class="keyword">await</span> <span class="title function_">fetchUser</span>(<span class="number">3</span>);</span><br><span class="line">  <span class="keyword">return</span> [user1, user2, user3];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 并发请求：同时发送多个请求（性能更优）</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">parallelRequests</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> promises = [<span class="title function_">fetchUser</span>(<span class="number">1</span>), <span class="title function_">fetchUser</span>(<span class="number">2</span>), <span class="title function_">fetchUser</span>(<span class="number">3</span>)];</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(promises);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//并发请求</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> [data1,data2] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api/data1&#x27;</span>),</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&#x27;/api/data2&#x27;</span>)</span><br><span class="line">  ]);</span><br><span class="line"><span class="keyword">return</span> &#123; <span class="attr">user</span>: user.<span class="property">data</span>, <span class="attr">orders</span>: orders.<span class="property">data</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 限制并发数量（重要场景：避免请求过多导致性能问题）</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">limitConcurrentRequests</span>(<span class="params">ids, limit = <span class="number">3</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> results = [];</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 分批次处理请求</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ids.<span class="property">length</span>; i += limit) &#123;</span><br><span class="line">    <span class="keyword">const</span> batch = ids.<span class="title function_">slice</span>(i, i + limit);</span><br><span class="line">    <span class="keyword">const</span> batchResults = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>(batch.<span class="title function_">map</span>(<span class="function"><span class="params">id</span> =&gt;</span> <span class="title function_">fetchUser</span>(id)));</span><br><span class="line">    results.<span class="title function_">push</span>(...batchResults);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> results;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="数据结构算法题"><a href="#数据结构算法题" class="headerlink" title="数据结构算法题"></a>数据结构算法题</h1><h2 id="两数之和-（LeetCode-1）（数组-哈希表）"><a href="#两数之和-（LeetCode-1）（数组-哈希表）" class="headerlink" title="两数之和 （LeetCode 1）（数组 + 哈希表）"></a>两数之和 （LeetCode 1）（数组 + 哈希表）</h2><blockquote>
<p>前端应用场景：表单搜索联想、数据匹配校验等</p>
</blockquote>
<p>给定一个整数数组 nums 和一个目标值 target，在数组中找出两个数，使其和为 target，返回它们的索引（假设只有唯一解，不能重复使用同一个元素）<br>输入：nums &#x3D; [2, 7, 11, 15], target &#x3D; 9<br>输出：[0, 1]（因为 2 + 7 &#x3D; 9）</p>
<ol>
<li><strong>暴力解法（量少行，不推荐）</strong><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> nums = [<span class="number">3</span>, <span class="number">7</span>, <span class="number">12</span>, <span class="number">14</span>]</span><br><span class="line"><span class="keyword">let</span> target = <span class="number">15</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoSum1</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> n = nums.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123; <span class="comment">// 外层循环：选第一个数</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123; <span class="comment">// 内层循环：选第二个数（j在i后面）</span></span><br><span class="line">      <span class="keyword">if</span> (nums[i] + nums[j] === target) &#123; <span class="comment">// 检查和是否等于目标数</span></span><br><span class="line">        <span class="keyword">return</span> [i, j]; <span class="comment">// 找到就返回索引</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> []; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原来数组:&quot;</span>,nums,<span class="string">&quot;目标值:&quot;</span>,target,<span class="string">&quot;twoSum1返回索引:&quot;</span>,<span class="title function_">twoSum1</span>(nums,target))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><strong>使用哈希表（推荐）</strong></li>
</ol>
<ul>
<li>当遍历到一个数 <code>nums[i]</code> 时，需要知道是否存在另一个数 <code>complement = target - nums[i]</code>，如果存在，那这两个数就是答案。</li>
<li>用 Map 来记录每个数出现的位置，这样每次遇到 <code>nums[i]</code> 时，只需在 Map 中查 <code>complement</code> 是否存在，存在就直接返回结果</li>
<li>Map 存的是 “之前出现过的数及其索引”，每次新来一个数，先查补数是否在 Map 里，再把自己存进去。<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> nums = [<span class="number">3</span>, <span class="number">7</span>, <span class="number">12</span>, <span class="number">14</span>]</span><br><span class="line"><span class="keyword">let</span> target = <span class="number">15</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">twoSum2</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>(); <span class="comment">// 创建一个Map，用来存“数值:索引”</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123; <span class="comment">// 遍历数组，i是当前数的索引</span></span><br><span class="line">    <span class="keyword">const</span> currentNum = nums[i]; <span class="comment">// 当前数</span></span><br><span class="line">    <span class="keyword">const</span> complement = target - currentNum; <span class="comment">// 计算需要的补数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重点：先查补数是否在Map里</span></span><br><span class="line">    <span class="keyword">if</span> (map.<span class="title function_">has</span>(complement)) &#123; </span><br><span class="line">      <span class="comment">// 如果存在，说明前面已经有一个数等于complement，直接返回它的索引和当前索引</span></span><br><span class="line">      <span class="keyword">return</span> [map.<span class="title function_">get</span>(complement), i]; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果不存在，就把当前数和索引存入Map，供后面的数查询</span></span><br><span class="line">    map.<span class="title function_">set</span>(currentNum, i); </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> []; <span class="comment">// 题目保证有解，这行可以省略</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;原来数组:&quot;</span>,nums,<span class="string">&quot;目标值:&quot;</span>,target,<span class="string">&quot;twoSum2返回索引:&quot;</span>,<span class="title function_">twoSum2</span>(nums,target))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="回文数（LeetCode-9）"><a href="#回文数（LeetCode-9）" class="headerlink" title="回文数（LeetCode 9）"></a>回文数（LeetCode 9）</h2><p>判断一个整数是否是回文数。不允许将整数转为字符串</p>
<blockquote>
<p>输入：121 → 输出：true（正序和逆序都是 121）<br>输入：-121 → 输出：false（负数一定不是回文数）<br>输入：10 → 输出：false（逆序为 01，即 1，与原数不相等）</p>
</blockquote>
<ol>
<li>暴力解法（不推荐，但必须理解）:<br>反转整个数：将原数 x 逐位反转，得到反转后的数 reversed。<br>比较：判断 x 是否等于 reversed<blockquote>
<p>取最后一位：original % 10<br>移除最后一位：Math.floor(original &#x2F; 10)<br>构建反转数：reversed &#x3D; reversed * 10 + 最后一位</p>
</blockquote>
</li>
</ol>
<blockquote>
<p>为什么用 Math.floor()?<br>js中整数除法会返回浮点数（如 123 &#x2F; 10 &#x3D; 12.3），而我们需要的是整数部分12,Math.floor() 向下取整，确保结果为整数</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPalindrome</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">let</span> original = x;  <span class="comment">// 保存原数，避免修改x（后续需用x进行比较）</span></span><br><span class="line">  <span class="keyword">let</span> reversed = <span class="number">0</span>; </span><br><span class="line">  <span class="comment">// 只要原数还有剩余位数（即不为0），就继续反转</span></span><br><span class="line">  <span class="keyword">while</span> (original !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// 1. 取原数的最后一位</span></span><br><span class="line">    <span class="keyword">const</span> lastDigit = original % <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// 2. 将最后一位添加到反转数的末尾</span></span><br><span class="line">    reversed = reversed * <span class="number">10</span> + lastDigit;</span><br><span class="line">    <span class="comment">// 3. 移除原数的最后一位（相当于原数右移一位）</span></span><br><span class="line">    original = <span class="title class_">Math</span>.<span class="title function_">floor</span>(original / <span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 打印中间过程（仅用于理解，实际代码无需此行）</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`当前反转数: <span class="subst">$&#123;reversed&#125;</span>, 剩余原数: <span class="subst">$&#123;original&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 比较原数和反转后的数是否相等</span></span><br><span class="line">  <span class="keyword">return</span> x === reversed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试示例：123 → 反转后为321 → 不相等 → 返回false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isPalindrome</span>(<span class="number">123</span>)); <span class="comment">// 输出false</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>最优解法：反转一半数字<br>回文数的后半部分反转后应与前半部分相同；用x判断是否反转到一半，当原数x小于等于反转后的数reverted时，说明已反转一半<blockquote>
<p>以 x &#x3D; 1221 为例:<br>初始状态:x &#x3D; 1221，reverted &#x3D; 0</p>
<ol>
<li>逐位反转：<br>取最后一位 1 → reverted &#x3D; 0 * 10 + 1 &#x3D; 1，x &#x3D; 122<br>取最后一位 2 → reverted &#x3D; 1 * 10 + 2 &#x3D; 12，x &#x3D; 12</li>
<li>停止条件：<br>此时 x &#x3D; 12 ≤ reverted &#x3D; 12，说明已反转一半，停止循环</li>
<li>比较结果:<br>x &#x3D; 12 与 reverted &#x3D; 12 相等 → 返回 true</li>
</ol>
</blockquote>
</li>
</ol>
<blockquote>
<p>如果是奇数长度的回文数（如12321）<br>反转过程：x &#x3D; 12321 → reverted &#x3D; 1 → 12 → 123<br>停止时：x &#x3D; 12，reverted &#x3D; 123<br>处理方式：去除中间位（reverted &#x2F; 10），再比较</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isPalindrome</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="comment">// 特殊情况处理：</span></span><br><span class="line">  <span class="comment">// 1. 负数不可能是回文数（如 -121）</span></span><br><span class="line">  <span class="comment">// 2. 以0结尾的非零数（如10、120）不可能是回文数（反转后会丢失前导0）</span></span><br><span class="line">  <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> === <span class="number">0</span> &amp;&amp; x !== <span class="number">0</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> reverted = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (x &gt; reverted) &#123;</span><br><span class="line">    reverted = reverted * <span class="number">10</span> + x % <span class="number">10</span>; <span class="comment">// 取x的最后一位，添加到reverted</span></span><br><span class="line">    x = <span class="title class_">Math</span>.<span class="title function_">floor</span>(x / <span class="number">10</span>);           <span class="comment">// 移除x的最后一位</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 当数字长度为偶数时（如1221），x和reverted相等</span></span><br><span class="line">  <span class="comment">// 当数字长度为奇数时（如12321），reverted会多一位中间数（如123），需去掉中间数再比较</span></span><br><span class="line">  <span class="keyword">return</span> x === reverted || x === <span class="title class_">Math</span>.<span class="title function_">floor</span>(reverted / <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="反转字符串（LeetCode-344）"><a href="#反转字符串（LeetCode-344）" class="headerlink" title="反转字符串（LeetCode 344）"></a>反转字符串（LeetCode 344）</h2><p>编写一个函数，反转输入的字符串（原地修改，不使用额外数组）。<br>示例：输入 s &#x3D; [“h”,”e”,”l”,”l”,”o”]，输出 [“o”,”l”,”l”,”e”,”h”]</p>
<blockquote>
<p>核心思路：双指针对撞法<br>定义两个指针：<br>left 指向数组开头（0），right 指向数组末尾（length-1）。<br>交换元素并移动指针：<br>交换 s[left] 和 s[right]，然后 left++，right–。<br>直到 left &gt;&#x3D; right 时停止（此时所有元素已反转）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reverseString</span>(<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>; <span class="comment">// 左指针，从数组开头开始</span></span><br><span class="line">  <span class="keyword">let</span> right = s.<span class="property">length</span> - <span class="number">1</span>; <span class="comment">// 右指针，从数组末尾开始</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt; right) &#123; <span class="comment">// 当左指针在右指针左侧时，继续交换</span></span><br><span class="line">    <span class="comment">// 交换左右指针指向的元素</span></span><br><span class="line">    [s[left], s[right]] = [s[right], s[left]];</span><br><span class="line">    left++; <span class="comment">// 左指针右移一位</span></span><br><span class="line">    right--; <span class="comment">// 右指针左移一位</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 无需返回值，原数组已被修改</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>面试题</category>
      </categories>
      <tags>
        <tag>面试题</tag>
      </tags>
  </entry>
  <entry>
    <title>本地大模型部署--仿DeepSeek</title>
    <url>/2025/06/07/39-bigModel/</url>
    <content><![CDATA[<h2 id="目标DeepSeek-1-5B本地部署"><a href="#目标DeepSeek-1-5B本地部署" class="headerlink" title="目标DeepSeek-1.5B本地部署"></a>目标DeepSeek-1.5B本地部署</h2><ol>
<li>部署方式：<br>将大型预训练模型（如GPT、Llama、BERT等）完全部署在用户自有的硬件设备（如服务器、本地计算机）上，而非依赖云端API服务</li>
</ol>
<blockquote>
<p>特点:<br>私有化：模型和数据完全存储在本地，无需通过互联网传输<br>自主控制：用户拥有模型的完整权限，可自由修改、训练或调整推理逻辑<br>离线运行：无需网络连接即可使用模型能力（如生成文本、分析数据）</p>
</blockquote>
<ol start="2">
<li>模型下载</li>
</ol>
<p>讲解大模型网站，一个国外的(huggingface但是我浏览器打不开网站，代码中直接使用地址下载的)，一个镜像网站<code>https://hf-mirror.com/</code></p>
<blockquote>
<p>huggingface.co 这个网站上各种类型的大模型都有，所有训练大模型都从这里开始，在现有的基础上进行训练</p>
</blockquote>
<p>安装huggingface的下载工具(python库)：<br><code>pip  install huggingface-hub</code><br>下载模型文件：</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="built_in">set</span> HF_ENDPOINT=https://hf-mirror.com  <span class="comment"># 加速下载设置</span></span><br><span class="line">huggingface-cli download deepseek-ai/DeepSeek-R1-Distill-Qwen-<span class="number">1.5</span>B --local</span><br><span class="line"><span class="built_in">dir</span> D:\medical_chat\aaaa  <span class="comment"># 下载模型文件</span></span><br></pre></td></tr></table></figure>
<p>（后续在view.py中国添加下载模型文件的代码，运行时自动下载的）</p>
<h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><p><strong>客户端–uniapp</strong><br>看官方文档目标：看文档–写代码–实现<code>https://uniapp.dcloud.net.cn/</code></p>
<p>直接把deepseek页面截图发送给deepseek让它生成页面代码，自己小改一下input和发送按钮<br>测试：<br>前端发送数据，F12&#x2F;Payload能看到前端发送出来的请求<br><img src="/postImgs/bigModel/bg4.png" alt="bg3"></p>
<h3 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h3><ol>
<li><p>认识Django框架，创建文件<br><strong>服务器端–Django 框架</strong><br><a href="https://www.djangoproject.com/">https://www.djangoproject.com/</a><br><code>pip install django===4.2</code><br><code>pip install django-cors-headers </code><br><code>conda list django</code><br><code>S D:\Pragram code\bigModel\modelBg\xhserver&gt; python manage.py</code><br><code>pip install transformers</code><br>xhserver&#x2F;主要两个文件：<br>seetings.py  全局配置<br>urls.py     一级路由</p>
</li>
<li><p>创建应用<br>服务器要创建一个应用（根据官方文档建文件cv官方文档代码）<br><code>python manage.py startapp aichat100</code> (添加100表示这是自定义的)<br>这个新建的chat100文件夹主要做两件事情：一个写视图，一个写路由<br>videws.py 视图<br>urls.py二级路由（对应views下的chat）</p>
</li>
</ol>
<p>views.py</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="comment"># from django.shortcuts import render</span></span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;&quot;你好Melon_Nie&quot;&#x27;</span>&#125;,safe=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>新建urls.py(二级路由)</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path, include</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&quot;chat/&quot;</span>, views.chat, name=<span class="string">&#x27;index&#x27;</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>在一级路由中添加<br>xhserver.py添加一行<code>path(&#39;ai/&#39;, include(&#39;aichat100.urls&#39;))</code></p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># 一级路由 </span></span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;ai/&#x27;</span>, include(<span class="string">&#x27;aichat100.urls&#x27;</span>)),</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>启动后端服务<br>启动：<code>python manage.py runserver</code><br><img src="/postImgs/bigModel/bg1.png" alt="启动后端服务"><br>url能看到，成功<br><img src="/postImgs/bigModel/bg2.png" alt="bg2"><br>但是现在中文乱码<blockquote>
<p>SON 中文默认转义输出的问题，Django 默认会将非 ASCII 字符（如中文）转义成 Unicode 编码,是 Django 的默认行为<br>方法一：设置 ensure_ascii&#x3D;False<br>修改你的视图代码，在构造 JsonResponse 时加上 json_dumps_params&#x3D;{‘ensure_ascii’: False}</p>
</blockquote>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chat</span>(<span class="params">request</span>):</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;message&#x27;</span>: <span class="string">&#x27;你好Melon_Nie&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(data, json_dumps_params=&#123;<span class="string">&#x27;ensure_ascii&#x27;</span>: <span class="literal">False</span>&#125;)</span><br></pre></td></tr></table></figure>
<img src="/postImgs/bigModel/bg3.png" alt="bg3"></li>
</ol>
<h3 id="集成大模型–参数讲解"><a href="#集成大模型–参数讲解" class="headerlink" title="集成大模型–参数讲解"></a>集成大模型–参数讲解</h3><p>重点是view.py文件，参数讲解</p>
<ol>
<li>device<br>概念：指定模型运行的计算设备（CPU 或 GPU）。在 PyTorch 中通常为 “cpu” 或<br>“cuda:0”。<br>设置建议：优先使用 GPU（如 device&#x3D;”cuda:0”），显存不足时用 CPU。</li>
<li>torch_dtype<br>概念：模型张量的数据类型，如 float32（高精度）、float16 或 bfloat16（低精度，节省显<br>存）。<br>影响：精度越高（如 float32），结果越精确，但显存占用更大。精度越低（如 float16），<br>显存占用少，但可能损失精度或数值不稳定。<br>设置建议：GPU 推荐 torch.float16 或 bfloat16（兼容性需确认）；CPU 通常用 float32。</li>
<li>max_length<br>概念：生成文本的最大长度（token 数量）。<br>影响：值越大，生成内容越长，但速度越慢，且可能重复或偏离主题。值过小可能导致回答不<br>完整。<br>设置建议：根据任务调整：对话建议 100-300，长文本生成可设 512-1024，注意模型最大限<br>制（如 4096）。</li>
<li>do_sample<br>概念：是否启用采样策略（如 top_k, top_p）。若为 False，则使用贪心解码（确定性强）。<br>影响：True：输出多样化，适合创意任务。False：输出确定性强，适合事实性问题。<br>设置建议：需要多样性时设为 True，需准确性时设为 False。</li>
<li>top_k<br>概念：采样时保留概率最高的前 k 个 token。<br>影响：值越大（如 100），候选 token 多，输出多样但可能不相关。值越小（如 10），输出<br>更确定但可能重复。<br>设置建议：通常设为 10-50。</li>
<li>temperature<br>概念：控制采样随机性，调整概率分布平滑度。<br>影响：值大（如 1.5）：输出随机性高，可能不连贯。值小（如 0.1）：输出更确定，但易重<br>复。<br>设置建议：平衡点常为 0.7-1.0；需创造性时调高（如 0.9），需保守时调低（如 0.3）。</li>
<li>top_p（核采样）<br>概念：从累积概率超过阈值 p 的最小 token 集合中采样。<br>影响：值大（如 0.95）：候选 token 多，输出多样。值小（如 0.5）：候选 token 少，输出<br>更集中。<br>设置建议：常用 0.7-0.95。</li>
<li>repetition_penalty<br>概念：惩罚重复 token 的权重（&gt;1.0 时抑制重复，&lt;1.0 时鼓励重复）。<br>影响：值大（如 2.0）：减少重复，但可能生成不自然内容。值小（如 1.0）：无惩罚，默认<br>行为。<br>设置建议：通常设为 1.0-1.2，明显重复时可设 1.2-1.5。</li>
</ol>
<h3 id="集成大模型–安装-实现"><a href="#集成大模型–安装-实现" class="headerlink" title="集成大模型–安装+实现"></a>集成大模型–安装+实现</h3><p>这部分几乎完全按照老师给的文档（大模型文档提炼版）抄，遇到问题问AI，安装各种包，<br>runserver一半卡出，需要进行：<code>python manage.py migrate</code>应用数据库迁移<br><code>pip install torch torchvision</code><br><img src="/postImgs/bigModel/bg5.png" alt="bg3"><br>最后 <code>python manage.py runserver</code> 运行项目进行大模型下载<br>下载时在view.py文件头两行添加如下代码，切换国内镜像（但是我还是下了一个小时）</p>
<figure class="highlight py"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">&quot;HF_ENDPOINT&quot;</span>] = <span class="string">&quot;https://hf-mirror.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>我的后端可以了，但是一直返回中文卡住了很久，其实这里不用管的，前端后面会解决<br><img src="/postImgs/bigModel/bg6.png" alt="bg3"><br><img src="/postImgs/bigModel/bg10.png" alt="bg3"><br>但是我的前后端没有打通<br><img src="/postImgs/bigModel/bg7.png" alt="bg3"><br>倒腾倒腾倒腾，成功<br>成功！<br><img src="/postImgs/bigModel/bg8.png" alt="bg3"><br><img src="/postImgs/bigModel/bg9.png" alt="bg3"></p>
]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>大模型部署</tag>
      </tags>
  </entry>
  <entry>
    <title>react--初学笔记</title>
    <url>/2025/06/28/40-react/</url>
    <content><![CDATA[<h1 id="学习资源"><a href="#学习资源" class="headerlink" title="学习资源"></a>学习资源</h1><ul>
<li>官方文档：<a href="https://react.dev/">https://react.dev/</a></li>
<li>React 教程中文版（快速入门好看）：<a href="https://zh-hans.react.dev/learn">https://zh-hans.react.dev/learn</a></li>
<li>框架语法特性对比-中文版：<a href="https://component-party.lainbo.com/">https://component-party.lainbo.com/</a></li>
<li>大模型老师</li>
<li>React Router：<a href="https://reactrouter.com/en/main">https://reactrouter.com/en/main</a></li>
<li>Redux Toolkit：<a href="https://redux-toolkit.js.org/">https://redux-toolkit.js.org/</a></li>
<li>TypeScript + React：<a href="https://www.typescriptlang.org/docs/handbook/react.html">https://www.typescriptlang.org/docs/handbook/react.html</a></li>
</ul>
<h1 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h1><p>JSX是React的模板语法，属于语法糖，最终会被 Babel编译为React.createElement()<br>jsx是将html和javascript结合起来的模板语法，但它不是 HTML，而是 JavaScript 的扩展</p>
<blockquote>
<p>比如说<code>&lt;div className=&quot;title&quot;&gt;Hello&lt;/div&gt;</code><br>会被编译成<code>React.createElement(&quot;div&quot;, &#123; className: &quot;title&quot; &#125;, &quot;Hello&quot;)</code></p>
</blockquote>
<h2 id="基本语法规则"><a href="#基本语法规则" class="headerlink" title="基本语法规则"></a>基本语法规则</h2><ul>
<li>html根在return()的返回中</li>
<li>JSX只能返回一个根元素</li>
<li>所有标签必须闭合<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="comment">// 里面的标签必须是闭合的</span></span><br><span class="line"><span class="comment">// 只能有一个父div，如果要有两个父div，那么使用空标签&lt;&gt;&lt;/&gt;把他俩进行包裹</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="插值语法与数据渲染"><a href="#插值语法与数据渲染" class="headerlink" title="插值语法与数据渲染"></a>插值语法与数据渲染</h2><ul>
<li>JSX的插值语法：标签内容，标签属性</li>
</ul>
<h3 id="数据渲染—条件渲染"><a href="#数据渲染—条件渲染" class="headerlink" title="数据渲染—条件渲染"></a>数据渲染—条件渲染</h3><ol>
<li>三元运算符<br> <code>&#123;isLoading ? &lt;Spinner /&gt; : &lt;Content /&gt;</code></li>
<li>逻辑与运算符(适用于存在则显示)<br><code>&#123;error &amp;&amp; &lt;p className=&quot;error&quot;&gt;&#123;error&#125;&lt;/p&gt;&#125;</code></li>
<li>if判断<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> divContent = <span class="string">&#x27;标签内容&#x27;</span></span><br><span class="line"><span class="keyword">const</span> divTitle = <span class="string">&#x27;标签标题&#x27;</span></span><br><span class="line"><span class="keyword">const</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> newContent=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span>(flag)&#123;</span><br><span class="line">newContent = <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>JSP不用字符串包裹的写<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">newContent = <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这样就可以呈现啦<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">return</span> (</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span> = <span class="string">&#123;divTitle&#125;</span>&gt;</span>&#123;divContent&#125;</span></span><br><span class="line"><span class="language-xml">&#123;/* 注意这里的属性值&#123;divTitle&#125;不能加双引号哦 */&#125;</span></span><br><span class="line"><span class="language-xml">&#123;newContent&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="数据渲染—列表渲染（map-key）"><a href="#数据渲染—列表渲染（map-key）" class="headerlink" title="数据渲染—列表渲染（map+key）"></a>数据渲染—列表渲染（map+key）</h3><p>使用Array.map()生成元素列表，必须添加 key 属性：<br><strong>这里的Fragment其实等价于&lt;&gt;&lt;&#x2F;&gt;，不渲染真实的dom结构</strong></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Fragment</span>&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">const</span> list = [&#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">&#x27;松瑰&#x27;</span>&#125;,&#123;id=<span class="number">2</span>,<span class="attr">name</span>:<span class="string">&#x27;雾刃&#x27;</span>&#125;,&#123;id=<span class="number">3</span>,<span class="attr">name</span>:<span class="string">&#x27;枫糖&#x27;</span>&#125;]</span><br><span class="line"><span class="keyword">const</span> listContent = list.<span class="title function_">map</span>(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Fragment</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>----分隔符-----<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Fragment</span>&gt;</span></span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>llistContent<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h2 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h2><p>Fragment（相当于template）<br>轻量级容器，当需要返回多个同级元素而不想引入额外DOM节点时，可以使用&lt;&gt;&lt;&#x2F;&gt;或 <code>&lt;Fragment/&gt;</code>，不渲染真实的dom结构</p>
<h1 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h1><h2 id="事件的基本用法"><a href="#事件的基本用法" class="headerlink" title="事件的基本用法"></a>事件的基本用法</h2><p>事件名使用驼峰命名（onClick、onChange）<br>传递函数引用，而非函数调用</p>
<blockquote>
<p>注意，onClick&#x3D;{handleClick} 的结尾没有小括号！不要 调用 事件处理函数：你只需 把函数传递给事件 即可。当用户点击按钮时 React 会调用你传递的事件处理函数。<br>传参的话可以使用箭头函数，例如()&#x3D;&gt;handleClick(1)</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 正确</span></span><br><span class="line">&lt;button onClick=&#123;handleClick&#125;&gt;点击&lt;/button&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误：会立即执行</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick()&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 需要传参时，使用箭头函数</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> handleClick(id)&#125;&gt;删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">e</span>)&#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;点击了按钮&#x27;</span>,e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h1 id="useState-状态处理"><a href="#useState-状态处理" class="headerlink" title="useState 状态处理"></a>useState 状态处理</h1><h2 id="理解函数式组件"><a href="#理解函数式组件" class="headerlink" title="理解函数式组件"></a>理解函数式组件</h2><blockquote>
<p>vue可以声明响应式数据，可以驱动页面内容进行更新，也是减少操作DOM的手段，但是在react默认没有这个机制，所以这个数据也就是一个普通变量，把它改了页面内容不会更新<br><strong>函数式组件默认是没有状态的</strong>，理解：<br>比如说点击按钮改变文本内容，如果按照下面这样写是不能改变的</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="keyword">let</span> divContent = <span class="string">&#x27;原本的内容&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">e</span>)&#123;</span><br><span class="line"> divContent = <span class="string">&#x27;内容改变啦&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divContent<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h2 id="useState基本使用"><a href="#useState基本使用" class="headerlink" title="useState基本使用"></a>useState基本使用</h2><p><strong>React中，要学会在交互过程中提炼出来一个状态&#x2F;数据，然后通过控制这个状态的方式，来改变 UI组件，数据驱动ui的开发思维</strong><br>在react中使用useState函数进行状态变更<br>const [本次渲染的内容, 修改内容的函数] ＝ useState(‘初始值’)<br>按照惯例会像 [something, setSomething] 这样命名</p>
<blockquote>
<p>为什么react里这样做<br>如果每个变量都默认有状态更新机制的话，那页面的负担会很大<br>每个组件中通常只会有两三个变量是状态，不会每个变量都是状态<br>仔细看下面代码</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="comment">//写法如下，用解构，content可以理解成本次渲染的内容，**setContent是一个函数**，用来修改这个content</span></span><br><span class="line"><span class="keyword">const</span> [ content , setContent ] = <span class="title function_">useState</span>(<span class="string">&#x27;我是数据的初始值&#x27;</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">setContent</span>(<span class="string">&#x27;我是修改后的新内容&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;content&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h2 id="useState状态类型"><a href="#useState状态类型" class="headerlink" title="useState状态类型"></a>useState状态类型</h2><h3 id="字符串类型（如上面的代码）"><a href="#字符串类型（如上面的代码）" class="headerlink" title="字符串类型（如上面的代码）"></a>字符串类型（如上面的代码）</h3><h3 id="对象类型（关联数据通常使用）"><a href="#对象类型（关联数据通常使用）" class="headerlink" title="对象类型（关联数据通常使用）"></a>对象类型（关联数据通常使用）</h3><p>比如对title和contet进行处理</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>)&#123;</span><br><span class="line">content [ data , setData ] = <span class="title function_">useState</span>(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;默认标题&#x27;</span>,</span><br><span class="line"><span class="attr">content</span>: <span class="string">&#x27;默认内容&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="title function_">setData</span>(&#123;</span><br><span class="line"><span class="attr">title</span>: <span class="string">&#x27;修改后的标题&#x27;</span>,</span><br><span class="line"><span class="attr">content</span>: <span class="string">&#x27;修改后的内容&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">title</span>=<span class="string">&#123;data.title&#125;</span>&gt;</span>&#123;data.content&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><p>比如添加 ，删除，排序，修改等</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">functIon <span class="title class_">App</span>()&#123;</span><br><span class="line"><span class="keyword">const</span> [data, setData]= <span class="title function_">useState</span>([</span><br><span class="line">&#123;<span class="attr">id</span>:<span class="number">1</span>，<span class="attr">name</span>:<span class="string">&#x27;小吴&#x27;</span>&#125;,</span><br><span class="line">&#123;<span class="attr">id</span>:<span class="number">2</span>，<span class="attr">name</span>:<span class="string">&#x27;小李&#x27;</span>&#125;,</span><br><span class="line">&#123;<span class="attr">id</span>:<span class="number">3</span>，<span class="attr">name</span>:<span class="string">&#x27;小花&#x27;</span>&#125;</span><br><span class="line"> ])</span><br><span class="line"><span class="keyword">const</span> listData =data.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>))</span><br><span class="line"><span class="keyword">let</span> id = <span class="number">3</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleclick</span>(<span class="params"></span>)&#123;</span><br><span class="line"><span class="title function_">setData</span>([</span><br><span class="line">&#123;<span class="attr">id</span>:++id，<span class="attr">name</span>:<span class="string">&#x27;小花猫&#x27;</span>&#125;</span><br><span class="line">...data</span><br><span class="line">])</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;listData&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure>
<h3 id="状态更新注意事项"><a href="#状态更新注意事项" class="headerlink" title="状态更新注意事项"></a>状态更新注意事项</h3><p><mark>useState结构的第二项（修改内容的函数）是<strong>进行覆盖操作</strong></mark></p>
<p>什么意思呢，比如说使用对象类型，原本有title和content两个属性，但我现在只想修改title属性，我想这样写行不行</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setData</span>(</span><br><span class="line">&#123;</span><br><span class="line">title = <span class="string">&#x27;修改后的tite&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>这样不行的，覆盖后原来的content属性和属性值会丢失</strong></p>
<p><mark>正确写法是先通过展开运算符进行展开操作，把原来的属性都放进来，再修改同名属性</mark></p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title function_">setData</span>(</span><br><span class="line">&#123;</span><br><span class="line">...data,</span><br><span class="line">title = <span class="string">&#x27;修改后的tite&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_">setArrdata</span>(&#123;</span><br><span class="line">...data,</span><br><span class="line">&#123;<span class="attr">id</span>:id++,<span class="attr">name</span>:<span class="string">&#x27;新增数组项&#x27;</span>&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="常见误区"><a href="#常见误区" class="headerlink" title="常见误区"></a>常见误区</h3><p>状态更新是异步的，复杂场景使用函数式更新<br>对象 &#x2F; 数组状态更新时，必须创建新对象 &#x2F; 数组（不可变数据原则）<br>避免直接修改状态，始终通过 setter 函数更新</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 错误：直接修改状态</span></span><br><span class="line"><span class="title function_">setData</span>(&#123; <span class="attr">title</span>: <span class="string">&quot;New Title&quot;</span> &#125;); <span class="comment">// 会丢失其他属性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确：合并更新</span></span><br><span class="line"><span class="title function_">setData</span>(<span class="function"><span class="params">prev</span> =&gt;</span> (&#123; ...prev, <span class="attr">title</span>: <span class="string">&quot;New Title&quot;</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误：使用索引作为key</span></span><br><span class="line">users.<span class="title function_">map</span>(<span class="function">(<span class="params">user, index</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确：使用唯一ID作为key</span></span><br><span class="line">users.<span class="title function_">map</span>(<span class="function"><span class="params">user</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;user.id&#125;</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>);</span><br></pre></td></tr></table></figure>
<h2 id="useState位置变化效果变化-是否共享数据"><a href="#useState位置变化效果变化-是否共享数据" class="headerlink" title="useState位置变化效果变化(是否共享数据)"></a>useState位置变化效果变化(是否共享数据)</h2><h3 id="组件各自拥有独立的数据"><a href="#组件各自拥有独立的数据" class="headerlink" title="组件各自拥有独立的数据"></a>组件各自拥有独立的数据</h3><p><strong>如果useState放在组件中，多次渲染同一个组件，每个组件都会拥有自己的state他们之间互不干扰</strong><br><img src="/postImgs/react/state01.png" alt="useState位置变化效果变化"></p>
<h3 id="如果需要件共享数据并一起更新"><a href="#如果需要件共享数据并一起更新" class="headerlink" title="如果需要件共享数据并一起更新"></a><strong>如果需要件共享数据并一起更新</strong></h3><p>将MyButton的state上移到 MyApp,再将将 MyApp 中的点击事件处理函数以及 state 一同向下传递到 每个 MyButton 中<br><img src="/postImgs/react/state02.png" alt="useState位置变化效果变化"></p>
<h1 id="React-DOM组件和Props设置"><a href="#React-DOM组件和Props设置" class="headerlink" title="React DOM组件和Props设置"></a>React DOM组件和Props设置</h1><p><strong>React 组件必须以大写字母开头，而HTML标签则必须是小写字母</strong></p>
<h2 id="基本属性映射规则"><a href="#基本属性映射规则" class="headerlink" title="基本属性映射规则"></a>基本属性映射规则</h2><p>React中的DOM属性与HTML有些差异：</p>
<ol>
<li>class变为className<br><code>&lt;div className=&quot;container&quot;&gt;内容&lt;/div&gt;</code></li>
<li>短横线属性用驼峰命名法<br><code>&lt;div style=&#123;&#123; backgroundColor: 'red', fontSize: 16 &#125;&#125;&gt;&lt;/div&gt;</code></li>
<li>style 属性的两种写法<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 对象内联写法</span></span><br><span class="line">&lt;div style=&#123;&#123; <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>, <span class="attr">margin</span>: <span class="string">&#x27;10px&#x27;</span> &#125;&#125;&gt;文本&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提取样式对象</span></span><br><span class="line"><span class="keyword">const</span> styles = &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span>,</span><br><span class="line">  <span class="attr">margin</span>: <span class="string">&#x27;10px&#x27;</span>,</span><br><span class="line">  <span class="attr">borderRadius</span>: <span class="string">&#x27;4px&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span>&gt;</span>文本<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>带有alt属性的img标签，alt要留在img标签内不能提取走<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imgProps = &#123; <span class="attr">src</span>: <span class="string">&#x27;image.jpg&#x27;</span>, <span class="attr">width</span>: <span class="number">200</span> &#125;;</span><br><span class="line"><span class="comment">// 显式添加 alt</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> &#123;<span class="attr">...imgProps</span>&#125; <span class="attr">alt</span>=<span class="string">&quot;示例图片&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="自定义组件的-Props（父传子）"><a href="#自定义组件的-Props（父传子）" class="headerlink" title="自定义组件的 Props（父传子）"></a>自定义组件的 Props（父传子）</h2><h3 id="JSX的展开语法（常用于组件传参，不同于ES6）"><a href="#JSX的展开语法（常用于组件传参，不同于ES6）" class="headerlink" title="JSX的展开语法（常用于组件传参，不同于ES6）"></a>JSX的展开语法（常用于组件传参，不同于ES6）</h3><blockquote>
<p><strong>JSX的展开语法不是ES6的展开运算符</strong><br>ES6的展开运算发无法单独使用，不能在没有容器的地方单独使用，常用于展开，合并和修改操作</p>
</blockquote>
<p>JSX 的展开语法（常用于组件传参）</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">&#123; name, age &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;name&#125; is &#123;age&#125; years old.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> user = &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;</span><br><span class="line">&lt;<span class="title class_">MyComponent</span> &#123;...user&#125; /&gt;</span><br><span class="line"><span class="comment">//以上的写法等价于</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">name</span>=<span class="string">&quot;Alice&quot;</span> <span class="attr">age</span>=<span class="string">&#123;25&#125;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="组件复用：复用逻辑与样式，不复用内容"><a href="#组件复用：复用逻辑与样式，不复用内容" class="headerlink" title="组件复用：复用逻辑与样式，不复用内容"></a>组件复用：复用逻辑与样式，不复用内容</h3><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可复用的按钮组件（只定义样式和逻辑）</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">&#123; label, onClick, variant = <span class="string">&#x27;primary&#x27;</span> &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> className = variant === <span class="string">&#x27;primary&#x27;</span> </span><br><span class="line">    ? <span class="string">&#x27;bg-blue-500 text-white&#x27;</span> </span><br><span class="line">    : <span class="string">&#x27;bg-gray-500 text-white&#x27;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">px-4</span> <span class="attr">py-2</span> <span class="attr">rounded</span> $&#123;<span class="attr">className</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;label&#125;  // 内容由外部传入</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复用示例</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">label</span>=<span class="string">&quot;提交&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleSubmit&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Button</span> <span class="attr">label</span>=<span class="string">&quot;取消&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleCancel&#125;</span> <span class="attr">variant</span>=<span class="string">&quot;secondary&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="children属性-用于传递组件内部的子元素"><a href="#children属性-用于传递组件内部的子元素" class="headerlink" title="children属性:用于传递组件内部的子元素"></a>children属性:用于传递组件内部的子元素</h3><p>预定义一个值children接受传递的内容</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 卡片组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Card</span> = (<span class="params">&#123; title, children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;border rounded p-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">className</span>=<span class="string">&quot;font-bold&quot;</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;mt-2&quot;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  // 子内容</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用示例</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span> <span class="attr">title</span>=<span class="string">&quot;产品详情&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一款高品质产品<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span>&gt;</span>购买<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Card</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="常用解构"><a href="#常用解构" class="headerlink" title="常用解构"></a>常用解构</h3><p>内部结构传递使用props（单项数据流）<br>prop解构成{title,const,active}，这样使用可以直接{title}而不是{prop.title}</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Article</span>(<span class="params">&#123;title,<span class="keyword">const</span>,active&#125;</span>)&#123;</span><br><span class="line"><span class="keyword">return</span>(</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;const&#125;&lt;/p &gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;active ? &#x27;显示&#x27; : &#x27;隐藏&#x27;&#125;&lt;/p &gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">)</span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br><span class="line"><span class="language-xml">export default function App()&#123;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Article</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">title</span>=<span class="string">&quot;第一个title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">const</span>=<span class="string">&quot;第一个内容&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Article</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">title</span>=<span class="string">&quot;第而个title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">const</span>=<span class="string">&quot;第二个内容&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">active</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">/&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/&gt;</span></span></span><br><span class="line"><span class="language-xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="子传父："><a href="#子传父：" class="headerlink" title="子传父："></a>子传父：</h3><p>父组件给子组件传递自定义事件，子组件触发传给父组件<br>（AI找例子）</p>
<h1 id="纯函数与不纯函数"><a href="#纯函数与不纯函数" class="headerlink" title="纯函数与不纯函数"></a>纯函数与不纯函数</h1><h2 id="概念对比"><a href="#概念对比" class="headerlink" title="概念对比"></a>概念对比</h2><table>
<thead>
<tr>
<th>特性</th>
<th>纯函数</th>
<th>非纯函数</th>
</tr>
</thead>
<tbody><tr>
<td><strong>输入决定输出</strong></td>
<td>相同输入始终返回相同结果（确定性）</td>
<td>相同输入可能返回不同结果（依赖外部状态）</td>
</tr>
<tr>
<td><strong>副作用</strong></td>
<td>无副作用（不修改外部状态，比如不可以改变原操作的数组或对象）</td>
<td>可能修改外部状态或依赖外部变量</td>
</tr>
<tr>
<td><strong>可测试性</strong></td>
<td>易于测试（仅需验证输入输出）</td>
<td>难以测试（需模拟外部环境）</td>
</tr>
<tr>
<td><strong>缓存性</strong></td>
<td>可缓存</td>
<td>无法缓存</td>
</tr>
<tr>
<td><strong>线程安全</strong></td>
<td>天然线程安全</td>
<td>可能引发竞态条件</td>
</tr>
</tbody></table>
<hr>
<blockquote>
<p>纯函数场景：输入参数应使用const声明，确保不可变性，符合纯函数 “不修改外部状态” 的原则<br>不纯函数场景：若需要修改变量，使用let声明</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//看这两个add，add1是纯函数，add2不是纯函数</span></span><br><span class="line"><span class="keyword">const</span> num1 = <span class="number">1</span></span><br><span class="line"><span class="keyword">let</span> num2 = <span class="number">1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add1</span>(<span class="params">num</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> num + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add2</span>(<span class="params">num</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> num ++</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add1</span>(num1)) <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add1</span>(num1)) <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add1</span>(num1)) <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add2</span>(num2)) <span class="comment">//2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add2</span>(num2)) <span class="comment">//3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add2</span>(num2)) <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 纯函数示例：计算平方</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">pureSquare</span>(<span class="params">num</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> num * num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">pureSquare</span>(<span class="number">2</span>)); <span class="comment">// 输出4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">pureSquare</span>(<span class="number">2</span>)); <span class="comment">// 再次输入2，输出仍为4（输入相同输出相同）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不纯函数示例：修改全局变量</span></span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">impureIncrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> count++; <span class="comment">// 修改全局变量，产生副作用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">impureIncrement</span>()); <span class="comment">// 输出0</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">impureIncrement</span>()); <span class="comment">// 输出1（输入相同但输出不同，且修改了外部状态）</span></span><br></pre></td></tr></table></figure>

<h2 id="React中的纯函数实践"><a href="#React中的纯函数实践" class="headerlink" title="React中的纯函数实践"></a>React中的纯函数实践</h2><h3 id="React-组件作为纯函数"><a href="#React-组件作为纯函数" class="headerlink" title="React 组件作为纯函数"></a>React 组件作为纯函数</h3><ul>
<li><strong>React 官方推荐组件是纯函数</strong>：组件的输出仅由 <code>props</code> 和 <code>state</code> 决定，无副作用。</li>
<li><strong>受控组件</strong>：表单元素的值由 React 状态控制，符合纯函数思想。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 纯函数组件（React Hook）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">InputField</span>(<span class="params">&#123; value, onChange &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用场景：父组件传递 value 和 onChange 回调</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">InputField</span> <span class="attr">value</span>=<span class="string">&#123;text&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setText(e.target.value)&#125; /&gt;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="React中不纯函数"><a href="#React中不纯函数" class="headerlink" title="React中不纯函数"></a>React中不纯函数</h2><h3 id="不纯函数的副作用表现"><a href="#不纯函数的副作用表现" class="headerlink" title="不纯函数的副作用表现"></a>不纯函数的副作用表现</h3><ol>
<li>修改外部变量：如上面impureIncrement修改全局count</li>
<li>依赖外部状态：<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 依赖全局变量的不纯函数</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;Alice&#x27;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getGreeting</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>`</span>; <span class="comment">// 依赖外部变量name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>异步操作 &#x2F; IO 操作<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 发送网络请求（产生IO副作用）</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>DOM 操作：直接修改DOM元素</li>
</ol>
<h3 id="避免副作用的组件"><a href="#避免副作用的组件" class="headerlink" title="避免副作用的组件"></a>避免副作用的组件</h3><ul>
<li><strong>禁止直接修改 props或state</strong>：应通过 <code>useState</code> 更新状态，而非直接赋值。</li>
<li><strong>避免在组件中执行DOM操作</strong>：应使用 <code>useEffect</code> 或 React 的合成事件。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  错误：直接修改 props</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BadComponent</span>(<span class="params">&#123; user &#125;</span>) &#123;</span><br><span class="line">  user.<span class="property">name</span> = <span class="string">&#x27;Alice&#x27;</span>; <span class="comment">// 修改输入参数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;user.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  正确：通过 state 传递数据</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GoodComponent</span>(<span class="params">&#123; user &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = <span class="title function_">useState</span>(user.<span class="property">name</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="useEffect处理副作用"><a href="#useEffect处理副作用" class="headerlink" title="useEffect处理副作用"></a>useEffect处理副作用</h1><ul>
<li>副作用场景：数据请求、订阅、手动 DOM 操作</li>
<li>规则：副作用应在 <code>useEffect</code> 中声明，且依赖项需明确</li>
</ul>
<h1 id="深拷贝与浅拷贝（React示例）"><a href="#深拷贝与浅拷贝（React示例）" class="headerlink" title="深拷贝与浅拷贝（React示例）"></a>深拷贝与浅拷贝（React示例）</h1><h2 id="浅拷贝："><a href="#浅拷贝：" class="headerlink" title="浅拷贝："></a>浅拷贝：</h2><blockquote>
<p>创建一个新对象或数组，但仅复制一层数据，对于引用类型（对象 &#x2F; 数组），只复制其内存地址，新旧数据共享同一引用。<br>特点：修改新数据的引用类型属性时，原数据会同步变化<br>基本数据类型（如 number, string, boolean 等）会被复制一份新的值<br>引用类型（如 object, array）仅复制其引用地址，而不是深层的对象或数组本身<br>常见实现方式：展开运算符（…）；Object.assign()；Array.prototype.slice()&#x2F;concat()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> shallowCopy = &#123; ...original &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改原对象中基本类型的属性</span></span><br><span class="line">original.<span class="property">a</span> = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(shallowCopy.<span class="property">a</span>); <span class="comment">// 输出: 1 (未受影响)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改原对象中嵌套对象的属性</span></span><br><span class="line">original.<span class="property">b</span>.<span class="property">c</span> = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(shallowCopy.<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 输出: 20 (受到影响)</span></span><br></pre></td></tr></table></figure>

<h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><blockquote>
<p>定义：创建一个新对象或数组，递归复制所有层级的数据，新旧数据完全独立，互不影响。<br>特点：所有层次的数据都被复制，包括基本数据类型和引用类型<br>新对象或数组不会受到对原始对象或数组修改的影响<br>常见实现方式：JSON.parse(JSON.stringify())（简易版）;递归函数手动复制;第三方库（如lodash.cloneDeep）</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> original = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> deepCopy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(original));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改原对象中嵌套对象的属性</span></span><br><span class="line">original.<span class="property">b</span>.<span class="property">c</span> = <span class="number">30</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(deepCopy.<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 输出: 2 (未受影响)</span></span><br></pre></td></tr></table></figure>
<h2 id="react代码示例"><a href="#react代码示例" class="headerlink" title="react代码示例"></a>react代码示例</h2><p>浅拷贝示例</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 场景：React中状态为对象时的浅拷贝问题</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ShallowCopyDemo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">address</span>: &#123; <span class="attr">city</span>: <span class="string">&#x27;北京&#x27;</span>, <span class="attr">district</span>: <span class="string">&#x27;朝阳区&#x27;</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 错误做法：直接修改对象属性（未拷贝）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleWrongUpdate</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    user.<span class="property">address</span>.<span class="property">city</span> = <span class="string">&#x27;上海&#x27;</span>; <span class="comment">// 直接修改原对象，React无法检测到更新</span></span><br><span class="line">    <span class="title function_">setUser</span>(user); <span class="comment">// 状态更新无效，视图不刷新</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 正确做法：浅拷贝（仅复制一层）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleShallowCopy</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 用展开运算符浅拷贝user对象</span></span><br><span class="line">    <span class="keyword">const</span> newUser = &#123; ...user &#125;;</span><br><span class="line">    <span class="comment">// 浅拷贝后修改第一层属性（基本类型）</span></span><br><span class="line">    newUser.<span class="property">age</span> = <span class="number">21</span>;</span><br><span class="line">    <span class="comment">// 但修改引用类型属性时，仍会影响原数据</span></span><br><span class="line">    newUser.<span class="property">address</span>.<span class="property">city</span> = <span class="string">&#x27;上海&#x27;</span>; <span class="comment">// 原user.address.city也会变为上海</span></span><br><span class="line">    <span class="title function_">setUser</span>(newUser);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>姓名：&#123;user.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>年龄：&#123;user.age&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>地址：&#123;user.address.city&#125;-&#123;user.address.district&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleWrongUpdate&#125;</span>&gt;</span>错误更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleShallowCopy&#125;</span>&gt;</span>浅拷贝更新<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>深拷贝实例</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 场景：React中需要完全隔离新旧数据时的深拷贝</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">DeepCopyDemo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">    <span class="attr">list</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    <span class="attr">config</span>: &#123; <span class="attr">mode</span>: <span class="string">&#x27;production&#x27;</span>, <span class="attr">env</span>: <span class="string">&#x27;dev&#x27;</span> &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方法1：JSON转换（简易深拷贝，不支持函数/Date等类型）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleJsonCopy</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> newData = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">    newData.<span class="property">list</span>.<span class="title function_">push</span>(<span class="number">4</span>);</span><br><span class="line">    newData.<span class="property">config</span>.<span class="property">mode</span> = <span class="string">&#x27;test&#x27;</span>;</span><br><span class="line">    <span class="title function_">setData</span>(newData);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方法2：递归深拷贝函数（支持复杂类型）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">deepClone</span> = (<span class="params">obj</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj; <span class="comment">// 基本类型直接返回</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> obj.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> <span class="title function_">deepClone</span>(item)); <span class="comment">// 数组递归拷贝</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> <span class="title class_">Object</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> clone = &#123;&#125;;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">          clone[key] = <span class="title function_">deepClone</span>(obj[key]); <span class="comment">// 对象递归拷贝</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> clone;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleDeepClone</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> newData = <span class="title function_">deepClone</span>(data);</span><br><span class="line">    newData.<span class="property">list</span>.<span class="title function_">push</span>(<span class="number">4</span>);</span><br><span class="line">    newData.<span class="property">config</span>.<span class="property">mode</span> = <span class="string">&#x27;test&#x27;</span>;</span><br><span class="line">    <span class="title function_">setData</span>(newData);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>列表：&#123;data.list.join(&#x27;,&#x27;)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>配置：&#123;data.config.mode&#125;-&#123;data.config.env&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleJsonCopy&#125;</span>&gt;</span>JSON深拷贝<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleDeepClone&#125;</span>&gt;</span>递归深拷贝<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>在 React 应用中，当涉及到状态管理时，通常需要注意浅拷贝的行为，特别是在更新包含嵌套对象或数组的状态时，可能需要手动实现深拷贝或者使用 Redux Toolkit 这样的工具提供的便捷方法来帮助管理状态</p>
<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ol>
<li>浅拷贝适用场景：<br>数据层级单一（如只有一层对象 &#x2F; 数组）<br>引用类型属性不需要完全隔离（如仅修改基本类型属性）<br>React 中常用的…prevState展开运算符即浅拷贝</li>
<li>深拷贝适用场景：<br>需要处理深层结构的数据并且希望这些数据之间互不影响<br>数据多层嵌套（如obj.a.b.c）<br>需要完全隔离新旧数据（如撤销 &#x2F; 重做功能、多版本数据对比）</li>
</ol>
<h3 id="性能注意事项"><a href="#性能注意事项" class="headerlink" title="性能注意事项"></a>性能注意事项</h3><p>深拷贝比浅拷贝性能消耗更高，尤其是大数据量时<br>优先使用浅拷贝，仅在必要时使用深拷贝（如嵌套数据修改）</p>
<h3 id="ES6展开运算符与JSX展开语法"><a href="#ES6展开运算符与JSX展开语法" class="headerlink" title="ES6展开运算符与JSX展开语法"></a>ES6展开运算符与JSX展开语法</h3><p>ES6 展开运算符 和 JSX 展开语法 都是基于浅拷贝机制，它们只复制对象或数组的第一层数据</p>
<blockquote>
<p>ES6 展开运算符主要用于创建对象或数组的浅拷贝。这意味着如果你有一个包含嵌套对象或数组的对象，使用展开运算符只会复制最外层的对象或数组，而内部的引用类型仍保持原有的引用关系<br>JSX 的展开语法 {…props} 在传递 props 到组件时也是基于浅拷贝原理。它只是将对象的所有键值对作为单独的 prop 传递给组件，而不涉及对象内部引用类型的深层次复制</p>
</blockquote>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>前后端交互</title>
    <url>/2025/06/18/42-font-back/</url>
    <content><![CDATA[<h1 id="前端数据处理解析"><a href="#前端数据处理解析" class="headerlink" title="前端数据处理解析"></a>前端数据处理解析</h1><h2 id="数据处理核心流程"><a href="#数据处理核心流程" class="headerlink" title="数据处理核心流程"></a>数据处理核心流程</h2><ol>
<li>流程：通常包括数据获取、验证清洗、格式转换、状态管理、渲染展示、异常处理。</li>
<li>方法：包括使用fetch、axios等工具，以及处理异步的方式（async&#x2F;await, Promise, 回调等）。</li>
<li>技巧：数据缓存、分页、懒加载、错误重试、取消请求等</li>
</ol>
<h2 id="核心处理步骤概述"><a href="#核心处理步骤概述" class="headerlink" title="核心处理步骤概述"></a>核心处理步骤概述</h2><h3 id="数据获取阶段"><a href="#数据获取阶段" class="headerlink" title="数据获取阶段"></a>数据获取阶段</h3><ol>
<li>使用axios,fetch API发送请求获取数据；</li>
<li>统一添加token和超时处理<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">localStorage</span>.getItem(<span class="string">&#x27;token&#x27;</span>)&#125;</span>`</span>;</span><br><span class="line">  config.<span class="property">timeout</span> = <span class="number">10000</span>; <span class="comment">// 全局超时设置</span></span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>并发优化：使用 Promise.all 并行请求</li>
</ol>
<h3 id="数据验证与清洗"><a href="#数据验证与清洗" class="headerlink" title="数据验证与清洗"></a>数据验证与清洗</h3><p>使用typeof、instanceof或专业库<br>验证工具推荐:Zod（TypeScript首选）;Yup（JavaScript轻量级）;Joi（Node.js生态）<br>(看官方文档深入理解)<br>常见清洗操作：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 过滤无效值</span></span><br><span class="line"><span class="keyword">const</span> cleanData = rawData.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> </span><br><span class="line">  item.<span class="property">id</span> &amp;&amp; item.<span class="property">name</span>.<span class="title function_">trim</span>() !== <span class="string">&#x27;&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 转换数据类型</span></span><br><span class="line"><span class="keyword">const</span> normalizedData = rawData.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span> (&#123;</span><br><span class="line">  ...item,</span><br><span class="line">  <span class="attr">createdAt</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(item.<span class="property">createdAt</span>),</span><br><span class="line">  <span class="attr">price</span>: <span class="built_in">parseFloat</span>(item.<span class="property">price</span>)</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 处理嵌套数据</span></span><br><span class="line"><span class="keyword">const</span> flattenedData = rawData.<span class="title function_">flatMap</span>(<span class="function"><span class="params">item</span> =&gt;</span> </span><br><span class="line">  item.<span class="property">orders</span>.<span class="title function_">map</span>(<span class="function"><span class="params">order</span> =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">userId</span>: item.<span class="property">id</span>,</span><br><span class="line">    ...order</span><br><span class="line">  &#125;))</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="数据转换与格式化"><a href="#数据转换与格式化" class="headerlink" title="数据转换与格式化"></a>数据转换与格式化</h3><p>时间戳：”YYYY-MM-DD”-&gt;new Date().toLocaleDateString()<br>价格数字：”¥12.80”-&gt;Intl.NumberFormat(‘zh-CN’)<br>状态码：颜色标签-&gt;映射字典转换<br>树形结构：扁平列表-&gt;递归遍历</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//将后端返回的驼峰式命名转为下划线（或反之），适配前端规范：</span></span><br><span class="line"><span class="comment">// 驼峰转下划线示例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">camelToUnderline</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&#x27;object&#x27;</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> obj;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj).<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, [key, val]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newKey = key.<span class="title function_">replace</span>(<span class="regexp">/[A-Z]/g</span>, <span class="function">(<span class="params">match</span>) =&gt;</span> <span class="string">`_<span class="subst">$&#123;match.toLowerCase()&#125;</span>`</span>);</span><br><span class="line">    acc[newKey] = <span class="title function_">camelToUnderline</span>(val);</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="状态管理与缓存"><a href="#状态管理与缓存" class="headerlink" title="状态管理与缓存"></a>状态管理与缓存</h3><ol>
<li>状态管理：<br>简单场景：组件本地状态（如 React 的useState、Vue 的data）。<br>复杂场景：全局状态库（Redux、Vuex、Pinia），实现跨组件数据共享</li>
<li>缓存策略：<br>客户端缓存：<br>HTTP缓存：静态资源-&gt;Cache-Control头<br>内存缓存：当前会话-&gt;useState&#x2F;useMemo<br>持久化缓存：长期存储-&gt;localStorage<br>SWR&#x2F;React Query：数据请求-&gt;专用库<br>利用localStorage、sessionStorage存储高频数据，设置过期时间<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 带过期时间的缓存示例</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCachedData</span>(<span class="params">key, expireTime = <span class="number">3600000</span></span>) &#123; <span class="comment">// 1小时过期</span></span><br><span class="line">  <span class="keyword">const</span> cache = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key);</span><br><span class="line">  <span class="keyword">if</span> (!cache) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; data, timestamp &#125; = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(cache);</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Date</span>.<span class="title function_">now</span>() - timestamp &gt; expireTime) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(key);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="数据渲染与更新"><a href="#数据渲染与更新" class="headerlink" title="数据渲染与更新"></a>数据渲染与更新</h3><p>虚拟 DOM 框架（React&#x2F;Vue）：数据变化自动触发视图更新，需注意细粒度更新（如 Vue3 的响应式、React 的useState）。<br>原生 JS：手动操作 DOM，需注意性能（如使用DocumentFragment批量更新）</p>
<h2 id="数据验证与转换（重要）"><a href="#数据验证与转换（重要）" class="headerlink" title="数据验证与转换（重要）"></a>数据验证与转换（重要）</h2><p>数据验证的核心目标：<br>确保数据格式正确（如字符串、数字、日期、邮箱等）<br>校验数据范围（如最大值、最小值、长度限制）<br>检查字段是否存在（必填字段是否缺失）<br>过滤非法字符或恶意内容（如XSS攻击、SQL注入）</p>
<h3 id="手动实现（简单场景）"><a href="#手动实现（简单场景）" class="headerlink" title="手动实现（简单场景）"></a>手动实现（简单场景）</h3><p>基础类型校验：手动遍历对象 &#x2F; 数组，使用typeof、instanceof、Array.isArray等方法校验：</p>
<h3 id="使用验证库"><a href="#使用验证库" class="headerlink" title="使用验证库"></a>使用验证库</h3><p>Zod	TypeScript优先，零依赖	现代前端项目<br>Yup	轻量级，简洁API	表单验证<br>Joi	Node.js生态成熟	全栈应用<br>Ajv	JSON Schema标准，性能最佳	大型复杂数据结构</p>
<h3 id="最佳实践建议"><a href="#最佳实践建议" class="headerlink" title="最佳实践建议"></a>最佳实践建议</h3><ol>
<li>分层处理：<br>请求层：统一拦截响应，校验基本结构（如是否包含code、data字段）。<br>业务层：针对具体业务数据进行模式验证和转换。<br>组件层：对组件 props 进行二次校验（如 React 的prop-types或 TypeScript 接口）。</li>
<li>与框架集成：<br>React：结合useEffect在数据获取后立即验证，或使用react-hook-form+Zod管理表单。<br>Vue：在setup()中验证数据，或使用 Vue 的prop验证。</li>
<li>错误处理策略：<br>对验证失败的数据进行降级处理（如显示默认值、空状态）。<br>记录验证错误日志，反馈给后端优化接口。</li>
<li>性能优化：<br>按需转换：只在需要时转换数据<br>缓存结果：对相同输入缓存转换结果<br>惰性验证：在渲染前才执行验证<br>Web Workers：复杂转换在后台线程执行</li>
</ol>
]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>数据处理</tag>
      </tags>
  </entry>
  <entry>
    <title>面试题-浏览器/网络/性能优化</title>
    <url>/2025/06/10/41-networkQuestion/</url>
    <content><![CDATA[<h1 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h1><h2 id="三种浏览器缓存"><a href="#三种浏览器缓存" class="headerlink" title="三种浏览器缓存"></a>三种浏览器缓存</h2><h3 id="localStorage和sessionStorage"><a href="#localStorage和sessionStorage" class="headerlink" title="localStorage和sessionStorage"></a>localStorage和sessionStorage</h3><p>浏览器存储localStorage和sessionStorage，用于在客户端持久化存储数据</p>
<table>
<thead>
<tr>
<th>特性</th>
<th><strong>localStorage</strong></th>
<th><strong>sessionStorage</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>存储时间</strong></td>
<td>永久存储，除非手动删除</td>
<td>会话期间存储，关闭页面&#x2F;浏览器后清除</td>
</tr>
<tr>
<td><strong>存储大小</strong></td>
<td>通常为 5MB 左右（不同浏览器可能不同）</td>
<td>同上</td>
</tr>
<tr>
<td><strong>作用域</strong></td>
<td>同一域名下所有页面共享</td>
<td>同一页面&#x2F;标签页的会话内有效</td>
</tr>
</tbody></table>
<p>localStorage只能存储字符串，存取对象需要JSON方法进行转换，否则是[object Objet]<br>loacl&#x2F;sssionStorage不同域的数据不共享<br>sessionStorage同一浏览器窗口的不同标签页可共享数据，新开的窗口不共享</p>
<h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><p>cookie像超市会员卡 ，容量小，每次都会携带。<br>在服务器第一次返回响应时候，会在响应头添加cookie信息，浏览器自动保存到本地，下次访问同一域名时会在请求头中自动带上cookie，服务器根据cookie识别用户身份</p>
<h2 id="关于token–我的疑惑-详解"><a href="#关于token–我的疑惑-详解" class="headerlink" title="关于token–我的疑惑+详解"></a>关于token–我的疑惑+详解</h2><blockquote>
<p>因为我只是用过localStorage存储+axios拦截器从里面获取token，没有使用过cookie，所以问了大模型老师：<br>1.携带token的方法有哪些，如何给后端token，有什么区别？<br>2.我不理解既然cookie会自动保存token，那么为什么还要通过localStorage保存token呢，这两个token有什么区别吗<br>详解如下：</p>
</blockquote>
<h3 id="Cookie与LocalStorage存储Token的核心区别表格"><a href="#Cookie与LocalStorage存储Token的核心区别表格" class="headerlink" title="Cookie与LocalStorage存储Token的核心区别表格"></a>Cookie与LocalStorage存储Token的核心区别表格</h3><table>
<thead>
<tr>
<th><strong>区别</strong></th>
<th><strong>Cookie存储</strong></th>
<th><strong>LocalStorage存储Token</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>携带方式</strong></td>
<td>浏览器自动随请求发送，无需前端额外代码。</td>
<td>需前端手动从本地取出并添加到请求头。</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>- 可设置HttpOnly防止XSS，但存在CSRF风险（需配合SameSite）。<br>- 跨域时受同源策略限制。</td>
<td>- 不自动发送，需前端严格控制token使用，避免XSS攻击（如避免在前端JS中直接操作token）。</td>
</tr>
<tr>
<td><strong>存储时效</strong></td>
<td>可设置过期时间（如<code>max-age</code>），或随浏览器关闭过期（会话cookie）。</td>
<td>永久存储，需前端手动删除（如用户登出时）。</td>
</tr>
<tr>
<td><strong>跨域共享</strong></td>
<td>同域名下共享，跨域需后端配置<code>Access-Control-Allow-Credentials</code>。</td>
<td>同域名下共享，不同域名不互通（受同源策略限制）。</td>
</tr>
<tr>
<td><strong>容量限制</strong></td>
<td>约4KB，不适合存储大token。</td>
<td>约5-10MB，适合存储JWT等较长字符串。</td>
</tr>
</tbody></table>
<h3 id="Token-的携带方法及给后端的方式"><a href="#Token-的携带方法及给后端的方式" class="headerlink" title="Token 的携带方法及给后端的方式"></a>Token 的携带方法及给后端的方式</h3><p><strong>Token本质是客户端向服务器证明身份的凭证</strong>，常见携带方式如下：</p>
<ol>
<li><p>请求头（Header）携带：最主流的方式<br>实现：在HTTP请求头中添加<code>Authorization</code> 字段，格式通常为 <code>Bearer &lt;token&gt;</code>（如 JWT 场景）</p>
<blockquote>
<p>JWT（JSON Web Token）是一种轻量级的开放标准（RFC 7519），常用于身份验证和信息安全传输</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (token) &#123;</span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>优势：<br>跨域请求时可通过设置 <code>withCredentials: true</code> 携带（需后端配合）。<br>与前端框架（如 Vue&#x2F;React）集成方便，<strong>可统一拦截处理</strong></p>
</li>
<li><p>Cookie 存储并自动携带<br>实现：服务器返回token时通过Set-Cookie响应头写入浏览器cookie，后续请求自动携带。<br>注意事项：<br>需设置 <code>HttpOnly: true</code>（防止 XSS 攻击）和 <code>SameSite: Strict/Lax</code>（防止 CSRF 攻击）。<br>跨域场景下需后端配置 Access-Control-Allow-Credentials: true。<br>缺点：<br>cookie大小限制（通常 4KB），不适合存储大token。<br>域名共享问题（不同子域名需配置SameSite为None并配合HTTPS）。</p>
</li>
<li><p>LocalStorage&#x2F;SessionStorage存储，手动携带<br>实现：前端将 token 存入本地存储，发送请求时从本地取出并添加到请求头</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 存储</span></span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, response.<span class="property">data</span>.<span class="property">token</span>);</span><br><span class="line"><span class="comment">// 携带</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;api/resource&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;<span class="variable language_">localStorage</span>.getItem(<span class="string">&#x27;token&#x27;</span>)&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>优势：<br>存储容量大（一般 5MB+），适合存储 JWT 等较长的 token。<br>不依赖域名，可在同一浏览器的不同标签页共享（localStorage）</p>
</li>
</ol>
<h3 id="为什么同时用-localStorage-和-cookie-存-token？"><a href="#为什么同时用-localStorage-和-cookie-存-token？" class="headerlink" title="为什么同时用 localStorage 和 cookie 存 token？"></a>为什么同时用 localStorage 和 cookie 存 token？</h3><p>其实这两种方式各有优缺点。比如 cookie 的好处是自动携带，不用前端写额外代码，但安全性较弱，容易被 XSS 攻击（所以一般会加 HttpOnly）。而 localStorage 需要手动管理，但容量大，适合存 JWT 这样的长 token。实际项目中可能会结合用，比如用 localStorage 存 token，用 cookie 存一些非敏感信息，同时通过前端拦截器统一在请求头里携带 token，这样既能保证安全，又方便管理。</p>
<h3 id="Token-是怎么生成的？存在哪里"><a href="#Token-是怎么生成的？存在哪里" class="headerlink" title="Token 是怎么生成的？存在哪里"></a>Token 是怎么生成的？存在哪里</h3><p><strong>Token是服务器生成的一串加密字符串，用于标识用户身份，类似 “电子钥匙”</strong></p>
<blockquote>
<p>存储位置：<br>客户端：存储在 cookie、localStorage 等位置。<br>服务器：不强制存储（如 JWT 无需存储，服务器通过密钥验证签名），或存储在数据库（如 Session Token 需记录会话状态）</p>
</blockquote>
<p>Token 一般是服务器生成的。比如JWT的话，服务器会用密钥把用户信息（像 ID、权限）加密成一个字符串，直接返回给前端，服务器自己不用存这个 token，下次用户带 token 来的时候，服务器用同样的密钥验证签名对不对就行。<br>如果是 Session Token，服务器会生成一个随机字符串，存在数据库里，然后把 token 给前端，后续前端带 token 来，服务器就查数据库确认是不是有效。</p>
<h3 id="根据场景选择存储方式"><a href="#根据场景选择存储方式" class="headerlink" title="根据场景选择存储方式"></a>根据场景选择存储方式</h3><p>优先用请求头 + localStorage：适合大多数前后端分离项目，前端手动管理 token，配合拦截器统一携带，安全性和灵活性较高。<br>配合 cookie 使用：需开启 HttpOnly 和 SameSite，适合对兼容性要求高或需要跨域携带 token 的场景（如 SSR 项目）。<br>核心原则：token 的存储和携带方式需平衡安全性、开发效率和项目需求，避免单一方案的缺陷（如 cookie 的 CSRF 风险、localStorage 的 XSS 风险）</p>
<h2 id="浏览器缓存策略"><a href="#浏览器缓存策略" class="headerlink" title="浏览器缓存策略"></a>浏览器缓存策略</h2><h3 id="浏览器缓存的工作流程"><a href="#浏览器缓存的工作流程" class="headerlink" title="浏览器缓存的工作流程"></a>浏览器缓存的工作流程</h3><p>首次请求：服务器<strong>返回资源及缓存策略</strong>（强缓存 &#x2F; 协商缓存参数）<br>再次请求：<br>先检查强缓存是否有效，若有效则直接使用缓存（状态码200 (from cache)）<br>若强缓存失效，发送协商缓存请求头（If-Modified-Since&#x2F;If-None-Match）到服务器。<br>服务器验证后，若资源未更新，返回304，浏览器使用缓存；若更新，协商缓存失效，返回新资源</p>
<h3 id="强缓存和协商缓存"><a href="#强缓存和协商缓存" class="headerlink" title="强缓存和协商缓存"></a>强缓存和协商缓存</h3><ol>
<li><p>强缓存（本地缓存）<br>浏览器直接读取本地缓存，不与服务器交互，状态码为200</p>
<blockquote>
<p>关键响应头：<br>Expires：资源过期时间（绝对时间戳），若未过期则直接读取缓存<br>Cache-Control（优先级高于Expires）：<br>max-age&#x3D;秒数：资源在多少秒内有效，如max-age&#x3D;3600表示  小时内缓存有效。<br>public：资源可被客户端和代理服务器缓存<br>private：资源仅可被客户端缓存<br>no-cache：并非不缓存，而是需要经过协商缓存验证<br>no-store：禁止任何形式的缓存，每次请求都从服务器获取</p>
</blockquote>
</li>
<li><p>协商缓存（服务器验证）<br>浏览器向服务器发送验证请求，验证资源是否更新，状态码为304，若未更新则使用缓存</p>
<blockquote>
<p>关键响应头：<br>第一次请求时服务器返回：<br>Last-Modified：资源最后修改时间。<br>ETag：资源的唯一标识（如文件哈希值）。<br>后续请求时浏览器发送：<br>If-Modified-Since：携带Last-Modified的值，询问服务器资源是否修改。<br>If-None-Match：携带ETag的值，询问服务器资源是否变更</p>
</blockquote>
</li>
</ol>
<p>  服务器响应：<br>  若资源未更新，返回304 Not Modified，浏览器使用本地缓存<br>  若资源更新，返回200 OK及新资源内容</p>
<h3 id="缓存策略的选择场景"><a href="#缓存策略的选择场景" class="headerlink" title="缓存策略的选择场景"></a>缓存策略的选择场景</h3><p>强缓存适合：<br>静态资源（如图片、CSS、JS），版本稳定，更新频率低。<br>可设置max-age为较长时间（如 1 周），并通过 URL 版本号控制更新。<br>协商缓存适合：<br>动态数据（如用户信息页面），或更新频率较高但需缓存的资源。<br>避免强缓存导致数据过期，通过协商缓存确保数据时效性。</p>
<h3 id="Cache-Control有哪些常用值"><a href="#Cache-Control有哪些常用值" class="headerlink" title="Cache-Control有哪些常用值"></a>Cache-Control有哪些常用值</h3><p>max-age&#x3D;N：资源在 N 秒内有效，过期后需重新验证。<br>public：资源可被客户端和代理服务器缓存（如 CDN）。<br>private：资源仅客户端可缓存，代理服务器不可缓存（如用户登录信息）。<br>no-cache：强制浏览器发送协商请求到服务器，验证资源是否更新。<br>no-store：禁止任何缓存，每次请求都从服务器获取（如敏感数据）。</p>
<h3 id="ETag相比Last-Modified有什么优势？"><a href="#ETag相比Last-Modified有什么优势？" class="headerlink" title="ETag相比Last-Modified有什么优势？"></a>ETag相比Last-Modified有什么优势？</h3><blockquote>
<p>Last-Modified：资源最后修改时间。<br>ETag：资源的唯一标识（如文件哈希值</p>
</blockquote>
<ol>
<li>Last-Modified有局限性：<br>只能精确到秒级，若资源在 1 秒内多次修改，无法识别<br>服务器时间同步问题可能导致判断不准</li>
<li>ETag的优势：<br>基于文件内容生成哈希值，更精准判断资源是否变更<br>可解决Last-Modified的时间精度问题和服务器时间不一致问题</li>
</ol>
<h3 id="如何强制更新浏览器缓存？"><a href="#如何强制更新浏览器缓存？" class="headerlink" title="如何强制更新浏览器缓存？"></a>如何强制更新浏览器缓存？</h3><ol>
<li>修改资源 URL（最常用）：<br>如将index.js改为index.v2.js，浏览器会视为新资源，跳过缓存。</li>
<li>利用Cache-Control: no-cache：<br>每次请求强制走协商缓存，由服务器验证是否更新。</li>
<li>修改响应头ETag或Last-Modified：<br>服务器主动变更标识，使协商缓存失效。</li>
</ol>
<h3 id="如何强制更新浏览器缓存？-1"><a href="#如何强制更新浏览器缓存？-1" class="headerlink" title="如何强制更新浏览器缓存？"></a>如何强制更新浏览器缓存？</h3><ol>
<li>修改资源 URL（最常用）：<br>如将index.js改为index.v2.js，浏览器会视为新资源，跳过缓存。</li>
<li>利用Cache-Control: no-cache：<br>每次请求强制走协商缓存，由服务器验证是否更新。</li>
<li>修改响应头ETag或Last-Modified：<br>服务器主动变更标识，使协商缓存失效。</li>
</ol>
<h2 id="缓存策略进阶问题：缓存与性能优化的结合"><a href="#缓存策略进阶问题：缓存与性能优化的结合" class="headerlink" title="缓存策略进阶问题：缓存与性能优化的结合"></a>缓存策略进阶问题：缓存与性能优化的结合</h2><h3 id="如何利用缓存提升首屏加载速度？"><a href="#如何利用缓存提升首屏加载速度？" class="headerlink" title="如何利用缓存提升首屏加载速度？"></a>如何利用缓存提升首屏加载速度？</h3><p>对静态资源启用强缓存，减少重复请求。<br>对 HTML 文件使用协商缓存（因 HTML 更新频率高，避免强缓存导致页面不更新）。<br>利用Service Worker实现 PWA 缓存，进一步提升离线加载能力。</p>
<h3 id="缓存可能带来的问题及解决方案？"><a href="#缓存可能带来的问题及解决方案？" class="headerlink" title="缓存可能带来的问题及解决方案？"></a>缓存可能带来的问题及解决方案？</h3><p>问题：资源更新后，旧缓存未失效，导致用户看到旧内容。<br>解决方案：<br>对静态资源使用Contenthash命名（如index.abc123.js），内容变更时 URL 自动更新。<br>对 HTML 文件设置Cache-Control: no-cache，确保每次请求验证最新内容。</p>
<h3 id="场景：用户反馈页面更新后，部分图片-JS-未刷新，如何排查？"><a href="#场景：用户反馈页面更新后，部分图片-JS-未刷新，如何排查？" class="headerlink" title="场景：用户反馈页面更新后，部分图片 &#x2F; JS 未刷新，如何排查？"></a>场景：用户反馈页面更新后，部分图片 &#x2F; JS 未刷新，如何排查？</h3><p><strong>检查服务器响应头是否正确设置了缓存策略</strong>（如Cache-Control的max-age是否过长）。<br><strong>查看浏览器DevTools的Network面板</strong>，确认资源是否走了强缓存（200 from cache）或协商缓存（304）。<br>若资源应更新但未更新，<strong>可手动清除浏览器缓存，或强制刷新页面</strong>（Ctrl+Shift+R，跳过强缓存）。</p>
<ul>
<li>长期解决方案：对静态资源添加版本号后缀（如img?v&#x3D;2.0），强制浏览器加载新资源。</li>
</ul>
<h1 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h1><h2 id="跨域问题如何解决"><a href="#跨域问题如何解决" class="headerlink" title="跨域问题如何解决"></a>跨域问题如何解决</h2><p>是否跨域首先要看两个资源是否同源，如果两个资源的协议协议、域名、端口号有不一样的，就会触发跨域限制。</p>
<ul>
<li>跨域限制目的：保护数据安全，浏览器要限制跨域为了防止恶意网站读取或修改用户数据。</li>
<li>哪些操作会触发跨域限制：<br>  前端AJAX请求跨域接口浏览器会报错<br>  cookie、session、loaclStorage共享时，跨域无法自动携带<br>  DOM操作：iframe产生的页面如果跨域，只能显示页面，无法进行js操作<br>  本地存储，跨域无法读取localStorage</li>
<li>例外情况：浏览器允许静态资源跨域加载</li>
</ul>
<h3 id="跨域解决方案"><a href="#跨域解决方案" class="headerlink" title="跨域解决方案"></a>跨域解决方案</h3><ul>
<li>CORS（最常用，生产环境也能用）:是一种后端配置规则，允许特定源的请求访问数据。适用于前后端分离的项目，安全性高</li>
<li>Nginx的代理：是生产环境正式解决方案，需要服务器配置</li>
<li>反向代理（开发用）：在前后端之间添加“中间层”，把跨域请求变成同源请求。只在本地有效，是开发环境的临时解决方案</li>
<li>JSONP（旧项目用）：利用<code>&lt;script&gt;</code>标签可以跨域加载JS脚本的特性间接获取数据。仅适用GET请求，安全性低</li>
</ul>
<h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><p>是一款轻量级的高性能 Web 服务器、反向代理服务器以及电子邮件（IMAP&#x2F;POP3）代理服务器</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><ol>
<li>反向代理与负载均衡<br>Nginx可作为反向代理服务器<br>可以将客户端请求均匀分配到多个后端服务器上，使各服务器负载均衡，避免单点服务器压力过大，提高系统整体处理能力和可靠性</li>
<li>静态资源服务器<br>  对静态资源（如 HTML、CSS、JavaScript、图片等）的处理效率极高<br>  Nginx 可配置缓存，将经常访问的静态资源缓存到内存或磁盘中，当有相同请求再次到来时，直接从缓存中读取并响应，减少后端服务器的负载和响应时间，进一步提高网站性能和用户体验</li>
<li>HTTP 请求处理与优化<br>Nginx 支持 HTTP&#x2F;2 协议<br>能对 HTTP 请求进行过滤和处理，如检查请求头、URL 等信息，根据规则拒绝非法请求或进行相应的处理，防止恶意攻击，如 SQL 注入、XSS 攻击等，增强系统安全性</li>
</ol>
<h2 id="HTTP的多个版本"><a href="#HTTP的多个版本" class="headerlink" title="HTTP的多个版本"></a>HTTP的多个版本</h2><p>HTTP 协议有多个版本，常见的有 HTTP&#x2F;1.0、HTTP&#x2F;1.1 和 HTTP&#x2F;2</p>
<blockquote>
<p>兼容性：<br>HTTP&#x2F;1.0 和 HTTP&#x2F;1.1 兼容性较好，被大多数浏览器和服务器支持<br>HTTP&#x2F;2 虽然越来越普及，但仍有一些旧设备或环境可能对其支持不完全，不过随着技术发展，兼容性问题在逐渐改善</p>
</blockquote>
<h3 id="HTTP-1-0"><a href="#HTTP-1-0" class="headerlink" title="HTTP&#x2F;1.0"></a>HTTP&#x2F;1.0</h3><p>每个请求都需要建立一个新的 TCP 连接，请求完成后连接即被关闭，意味着每次请求和响应都有较高的延迟，因为建立和拆除连接需要消耗时间和资源<br>适用于一些简单的、对性能要求不高的小型网站或应用，不过<strong>现在已较少单独使用</strong></p>
<h3 id="HTTP-1-1"><a href="#HTTP-1-1" class="headerlink" title="HTTP&#x2F;1.1"></a>HTTP&#x2F;1.1</h3><p>1.0 基础上进行了改进。支持持久连接，即多个请求可以复用同一个 TCP 连接，减少了连接建立和关闭的开销，提高了性能<br>还支持请求管道化，允许客户端在一个连接上连续发送多个请求，而无需等待前一个请求的响应，但服务器仍需按顺序响应请求<br>广泛应用于各种类型的网站和应用，能较好地满足大多数常规网络应用的需求</p>
<h3 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP&#x2F;2"></a>HTTP&#x2F;2</h3><p>采用了二进制分帧层，将数据分割成更小的帧，并以二进制格式传输，提高了传输效率<br>多路复用，多个请求和响应可以在同一个连接上同时进行，且相互不干扰<br>它支持服务器推送，服务器可以<strong>主动</strong>向客户端推送资源，<strong>提前</strong>将客户端可能需要的资源发送给客户端，减少客户端的请求次数<br>特别适合<strong>高并发、对性能要求极高的场景</strong>，如大型电商网站、在线视频平台等，能显著提高页面加载速度和用户体验</p>
<h2 id="HTTP-状态码分类"><a href="#HTTP-状态码分类" class="headerlink" title="HTTP 状态码分类"></a>HTTP 状态码分类</h2><p>HTTP 状态码是服务器对请求的响应结果标识，用 3 位数字表示，<strong>首位数字定义类别</strong>：  </p>
<ul>
<li><strong>1xx（信息响应）</strong>：请求已被接收，需要继续处理（临时状态）。  <ul>
<li>例如：<code>101 Switching Protocols</code>（协议切换，如 WebSocket 握手）。</li>
</ul>
</li>
<li><strong>2xx（成功）</strong>：请求已成功处理。  <ul>
<li>例如：<code>200 OK</code>（标准成功响应）、<code>201 Created</code>（资源创建成功）。</li>
</ul>
</li>
<li><strong>3xx（重定向）</strong>：需要客户端进一步操作以完成请求。  <ul>
<li>例如：<code>301 Moved Permanently</code>（永久重定向）、<code>302 Found</code>（临时重定向）、304协商缓存</li>
</ul>
</li>
<li><strong>4xx（客户端错误）</strong>：请求包含错误或无法完成。  <ul>
<li>例如：<code>400 Bad Request</code>（请求语法错误）、<code>404 Not Found</code>（资源不存在）。</li>
</ul>
</li>
<li><strong>5xx（服务器错误）</strong>：服务器处理请求时发生错误。  <ul>
<li>例如：<code>500 Internal Server Error</code>（服务器内部错误）、<code>503 Service Unavailable</code>（服务不可用）。</li>
</ul>
</li>
</ul>
<h3 id="高频状态码详解"><a href="#高频状态码详解" class="headerlink" title="高频状态码详解"></a>高频状态码详解</h3><ul>
<li><strong>200 OK</strong>：  <ul>
<li><strong>场景</strong>：GET 请求成功获取资源，或 POST 请求提交数据成功（后端可能返回 200 或 201）。  </li>
<li><strong>前端关注</strong>：正确处理响应数据（如 JSON 解析、渲染页面）。</li>
</ul>
</li>
<li><strong>301 vs 302</strong>：  <ul>
<li><p><strong>301</strong>：永久重定向（浏览器缓存跳转，后续直接访问新 URL）。  </p>
</li>
<li><p><strong>302</strong>：临时重定向（每次需向原 URL 发起请求）。</p>
</li>
</ul>
</li>
<li><strong>304 Not Modified</strong>：  <ul>
<li><strong>场景</strong>：协商缓存生效，资源未修改，直接使用本地缓存。  </li>
<li><strong>前端关联</strong>：通过 <code>Cache-Control</code> 和 <code>ETag</code> 控制缓存策略。</li>
</ul>
</li>
<li><strong>401 Unauthorized</strong>：  <ul>
<li><strong>含义</strong>：请求未携带有效身份凭证（如 Token 过期）。  </li>
<li><strong>前端处理</strong>：跳转登录页或自动刷新 Token（通过 Axios 拦截器）。</li>
</ul>
</li>
<li><strong>403 Forbidden</strong>：  <ul>
<li><strong>含义</strong>：服务器理解请求，但拒绝执行（如无权限访问接口）。  </li>
<li><strong>与 401 区别</strong>：401 是未认证，403 是已认证但无权访问。</li>
</ul>
</li>
<li><strong>404 Not Found</strong>：  <ul>
<li><strong>场景</strong>：请求资源不存在（如 URL 错误、未部署静态文件）。  </li>
<li><strong>前端优化</strong>：自定义 404 页面，提升用户体验。</li>
</ul>
</li>
<li><strong>500 Internal Server Error</strong>：  <ul>
<li><strong>含义</strong>：服务器处理请求时发生未知错误（如代码异常）。  </li>
<li><strong>前端处理</strong>：提示用户“服务异常，请稍后重试”，并上报日志。</li>
</ul>
</li>
</ul>
<h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p>JWT（JSON Web Token）是一种用于<strong>网络间安全传输声明的标准</strong>，它通过<strong>数字签名</strong>确保传输信息的完整性和真实性，常用于<strong>身份验证和授权</strong>场景。</p>
<h2 id="如何防止-CSRF-攻击"><a href="#如何防止-CSRF-攻击" class="headerlink" title="如何防止 CSRF 攻击"></a>如何防止 CSRF 攻击</h2><blockquote>
<p>CSRF（跨站请求伪造）：攻击者诱导用户向已认证的网站发送恶意请求<br>防御 CSRF 攻击的核心是验证请求来源。常用方法包括添加 Anti-CSRF Token、设置 SameSite Cookie，以及验证 Referer 头。例如，Spring Security 默认使用 CSRF Token 防御攻击</p>
</blockquote>
<h2 id="get-post-put-PATCH"><a href="#get-post-put-PATCH" class="headerlink" title="get post put PATCH"></a>get post put PATCH</h2><p>GET：请求数据，不会修改服务器数据<br>POST：提交数据，修改服务器数据<br>PUT：更新数据，完整替换现有资源<br>PATCH: 部分更新现有资源</p>
<blockquote>
<p>POST 用于创建新资源（URI 由服务器分配）<br>PUT 用于更新已有资源（URI 由客户端指定）</p>
</blockquote>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p>幂等：多次相同请求结果相同（如刷新页面不会重复创建数据）。<br>参数暴露：数据通过 URL 参数（?key&#x3D;value）传递，有长度限制（约 2KB）。<br>可缓存：浏览器默认缓存 GET 请求（如图片、CSS 文件）</p>
<h3 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h3><p>非幂等：重复提交可能创建多条相同数据（如多次提交表单）。<br>参数隐蔽：数据放在请求体（Body）中，适合传输大量或敏感数据。<br>不可缓存：浏览器默认不缓存 POST 请求</p>
<h3 id="PUT-请求"><a href="#PUT-请求" class="headerlink" title="PUT 请求"></a>PUT 请求</h3><p>幂等：多次相同请求结果相同（如多次修改同一数据）<br>完整替换：需提供资源的全部字段，缺失字段会被删除<br><strong>避免大量小 PUT 请求，可合并为一次 POST 批量更新</strong></p>
<h1 id="工程化能力"><a href="#工程化能力" class="headerlink" title="工程化能力"></a>工程化能力</h1><p>前端工程化包含：1）构建（Webpack&#x2F;Vite），2）编译（Babel&#x2F;PostCSS），3）优化（代码分割、Tree Shaking），4）性能监控（Lighthouse）。通过这些环节，实现代码模块化、自动化构建和性能调优。</p>
<h2 id="Webpack-Vite-构建工具"><a href="#Webpack-Vite-构建工具" class="headerlink" title="Webpack&#x2F;Vite 构建工具"></a>Webpack&#x2F;Vite 构建工具</h2><p>模块打包：将 JS、CSS、图片等资源打包成少量文件，减少HTTP请求<br>资源处理：通过Loader（Webpack）或原生ESM（Vite）处理非JS资源（如SASS转CSS、图片压缩）<br>Vite利用浏览器原生ESM，开发环境无需打包，启动极快。生产环境用Rollup打包，适合现代框架<br>示例配置项：</p>
<blockquote>
<ul>
<li><code>entry</code>：起点文件</li>
<li><code>output.path</code>：输出目录</li>
<li><code>module.rules</code>：配置Loader</li>
<li><code>plugins</code>：扩展功能”</li>
</ul>
</blockquote>
<h2 id="Babel、PostCSS-等编译工具"><a href="#Babel、PostCSS-等编译工具" class="headerlink" title="Babel、PostCSS 等编译工具"></a>Babel、PostCSS 等编译工具</h2><p>两者都是构建流程中的‘翻译官’<br>Babel：将新版JS（ES6+）转译为旧版（ES5）以兼容老浏览器。支持JSX等语法扩展<br>PostCSS：用JS插件转换CSS（如自动加前缀、用CSS变量、嵌套写法等）<br>PostCSS 本身不处理样式，通过插件（如<code>autoprefixer</code>）实现功能</p>
<h2 id="代码分割、Tree-Shaking-等优化手段"><a href="#代码分割、Tree-Shaking-等优化手段" class="headerlink" title="代码分割、Tree Shaking 等优化手段"></a>代码分割、Tree Shaking 等优化手段</h2><p>代码分割（Code Splitting）：将代码拆分成多个文件，按需加载（如路由懒加载）<br>Tree Shaking：删除未使用的代码（依赖ESM静态结构）</p>
<h2 id="前端性能优化意识"><a href="#前端性能优化意识" class="headerlink" title="前端性能优化意识"></a>前端性能优化意识</h2><p>加载阶段：减小资源体积（压缩、懒加载）、加快首屏（SSR、预渲染）<br>运行时性能：减少重绘重排、防抖节流、Web Worker长任务拆分<br>缓存策略：CDN加速静态资源、Service Worker实现离线可用</p>
<h4 id="Lighthouse-评测工具"><a href="#Lighthouse-评测工具" class="headerlink" title="Lighthouse 评测工具"></a>Lighthouse 评测工具</h4><ol>
<li>核心指标<br>FCP（First Contentful Paint）：首次内容绘制时间。<br>LCP（Largest Contentful Paint）：最大内容绘制时间。<br>TTI（Time to Interactive）：页面可交互时间。<br>CLS（Cumulative Layout Shift）：累积布局偏移（避免内容跳动）</li>
<li>优化建议<br>Performance：减少阻塞渲染的资源。<br>Accessibility：添加 ARIA 标签、合理的颜色对比度。<br>Best Practices：使用 HTTPS、避免弃用 API。<br>SEO：确保标题、元描述有效。</li>
</ol>
<h1 id="web标准，可用性，可访问性："><a href="#web标准，可用性，可访问性：" class="headerlink" title="web标准，可用性，可访问性："></a>web标准，可用性，可访问性：</h1><h2 id="web标准"><a href="#web标准" class="headerlink" title="web标准"></a>web标准</h2><p>web标准是网页开发的规范合集，想要网页在不同设备、浏览器中具有一致的表现和功能，就要遵守web标准进行开发<br>常见的标准规范有html5的语义化标签、css3的flex布局、grid布局、javascript的标准规范。<br>遵循web标准能提高网页的兼容性、可维护性、优先被搜索引擎发现、提高无障碍访问能力。</p>
<h2 id="可用性（用户体验）"><a href="#可用性（用户体验）" class="headerlink" title="可用性（用户体验）"></a>可用性（用户体验）</h2><p>用户要使用网页，作为开发人员，肯定希望网页能让用户高效、清晰地完成任务，侧重用户体验，这就是可用性。<br>核心内容有：<br>课件原则：当前状态和操作的可见：比如点击按钮后有明确反馈；<br>匹配原则：符合大部分用户的认知和习惯，比如购物车通常放在右上角或者右下方，就不能放在左上角。<br>容错原则：允许用户撤销，提供清晰的错误提示。<br>效率原则：提供快捷方式减少用户操作步骤，比如搜索框支持回车键查询，比如设计面包屑导航。</p>
<h2 id="可访问性（包容性）："><a href="#可访问性（包容性）：" class="headerlink" title="可访问性（包容性）："></a>可访问性（包容性）：</h2><p>像无障碍坡道，让残障人士也能平等使用功能的能力。<br>图片添加alt文本、使用语义化标签、ARIA属性为非语义化元素添加额外语义信息；颜色对比度：文本与背景对比度至少达到4.5:1；按钮可以通过tab键聚焦。</p>
<h2 id="其他问题："><a href="#其他问题：" class="headerlink" title="其他问题："></a>其他问题：</h2><h3 id="为什么移动优先设计符合可用性原则？"><a href="#为什么移动优先设计符合可用性原则？" class="headerlink" title="为什么移动优先设计符合可用性原则？"></a>为什么移动优先设计符合可用性原则？</h3><p>移动优先设计从手机端开始规划，逐步适配大屏幕，这符合可用性的“效率原则”：</p>
<ul>
<li>手机屏幕小，必须精简内容，反而促使设计师提炼核心功能（如电商APP优先展示“搜索”和“购物车”）；</li>
<li>移动设备网络环境更复杂，优化加载性能（如图片懒加载、资源压缩）后，桌面端体验也会提升；</li>
<li>触摸操作需要更大的点击区域（如按钮至少44px×44px），这让鼠标操作也更轻松。</li>
</ul>
<h3 id="公司项目中如何落实Web标准？"><a href="#公司项目中如何落实Web标准？" class="headerlink" title="公司项目中如何落实Web标准？"></a>公司项目中如何落实Web标准？</h3><p>1. 技术选型：使用HTML5语义化标签、CSS3新特性，避免过时语法（如表格布局）；<br>2. 代码规范：</p>
<ul>
<li>结构、样式、脚本分离（HTML中不写内联样式和JS）；</li>
<li>命名语义化（如 nav-menu 比 div1 更易理解）；<br>3. 构建工具：</li>
<li>使用ESLint校验JS代码，Stylelint规范CSS格式；</li>
<li>自动转换语法（如Babel将ES6转为ES5，PostCSS添加浏览器前缀）；<br>4. 测试流程：</li>
<li>用W3C validator校验HTML是否符合标准；</li>
<li>在不同浏览器（Chrome、Firefox、Edge）中测试显示一致性。</li>
</ul>
<h1 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h1><h2 id="如何优化-CSS-性能？"><a href="#如何优化-CSS-性能？" class="headerlink" title="如何优化 CSS 性能？"></a>如何优化 CSS 性能？</h2><p>减少选择器复杂度：避免深层嵌套（如 body div ul li a）<br>避免行内样式：影响缓存和维护性<br>减少重排（reflow）和重绘（repaint）：<br>批量修改样式（先修改再应用）<br>使用 transform 和 opacity 进行动画（触发合成层）<br>压缩和分割 CSS：减小文件体积，利用浏览器并行加载</p>
<h3 id="如何优化首次加载渲染速度？"><a href="#如何优化首次加载渲染速度？" class="headerlink" title="如何优化首次加载渲染速度？"></a>如何优化首次加载渲染速度？</h3><p>压缩资源（CSS&#x2F;JS 最小化）<br>懒加载非首屏图片<br>使用CDN加速<br>内联关键CSS（Critical CSS）</p>
<h2 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h2><h3 id="less和sass"><a href="#less和sass" class="headerlink" title="less和sass"></a>less和sass</h3><p>都css的预处理器，允许用更强大的语法编写css，然后编译成浏览器 能够识别的普通css<br>允许变量复用、函数计算、可以嵌套（比如多层选择器时）、代码组织。 </p>
<ul>
<li>less： @，客户端编译，轻量级，不可以嵌套属性，不可以@extend,能Mixin，社区生态小，已停止更新</li>
<li>sass：&amp;，服务器编译，功能强大，可以嵌套属性，可以@extend集成，有很多第三方库，持续更新中</li>
</ul>
<h3 id="标签放在页面底部的原因？"><a href="#标签放在页面底部的原因？" class="headerlink" title="&lt;script&gt; 标签放在页面底部的原因？"></a><code>&lt;script&gt;</code> 标签放在页面底部的原因？</h3><p>解析阻塞：浏览器遇到 <code>&lt;script&gt; </code>会暂停 HTML 解析，先下载执行 JS<br>解决方案：<br>使用 async（下载异步，执行仍阻塞）<br>使用 defer（延迟到 HTML 解析完执行）</p>
<h3 id="CSS-为什么要放在-中？"><a href="#CSS-为什么要放在-中？" class="headerlink" title="CSS 为什么要放在 &lt;head&gt; 中？"></a>CSS 为什么要放在 <code>&lt;head&gt;</code> 中？</h3><p>渲染阻塞：浏览器需先构建 CSSOM 才能渲染页面<br>避免 FOUC（Flash of Unstyled Content）：防止先显示无样式内容再突然变化</p>
<h3 id="DOMContentLoaded和load事件区别？"><a href="#DOMContentLoaded和load事件区别？" class="headerlink" title="DOMContentLoaded和load事件区别？"></a>DOMContentLoaded和load事件区别？</h3><p>DOMContentLoaded：HTML 解析完成 + DOM 树构建完毕（此时图片可能未加载）<br>load：所有资源（图片、样式表）加载完成</p>
<h3 id="为什么修改大量-DOM-会导致页面卡顿？"><a href="#为什么修改大量-DOM-会导致页面卡顿？" class="headerlink" title="为什么修改大量 DOM 会导致页面卡顿？"></a>为什么修改大量 DOM 会导致页面卡顿？</h3><p>   原因：多次重排：每次 DOM 修改都触发重排（如循环中逐条改样式）<br>   优化方案：<br>   使用 document.createDocumentFragment() 批量操作<br>   先 display: none 修改完再显示<br>   使用虚拟 DOM（如 Vue&#x2F;React）</p>
<h3 id="重排和重绘"><a href="#重排和重绘" class="headerlink" title="重排和重绘"></a>重排和重绘</h3><p>重排：当元素位置&#x2F;尺寸变化（如改宽度、窗口缩放），浏览器重新计算布局<br>重绘：当元素外观变化但不影响布局（如改颜色），浏览器重新绘制<br>性能影响：重排 &gt; 重绘 &gt; 合成<br>优化方法：<br>批量 DOM 操作（使用 documentFragment）<br>使用 position: absolute 脱离文档流</p>
<h1 id="移动端适配方案"><a href="#移动端适配方案" class="headerlink" title="移动端适配方案"></a>移动端适配方案</h1><p>移动端适配的核心是让网页在不同设备上显示正常、布局合理、交互流畅</p>
<h2 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h2><p>有响应式布局，通过媒体查询（@media）设置不同屏幕尺寸的样式，比如小屏时让内容撑满，大屏时居中显示。然后会用相对单位配合工具动态调整根字体大小，这样页面元素能根据设备宽度自动缩放。<br>对于复杂的布局，会用Flexbox或Grid来保证元素对齐和分布。图片适配会用srcset根据分辨率加载合适的资源</p>
<blockquote>
<p>基础适配：rem + amfe-flexible + postcss-pxtorem<br>布局优化：Flexbox&#x2F;Grid + 媒体查询。<br>资源适配：srcset + picture。<br>动态调整：JavaScript 动态计算字体大小或布局参数<br>amfe-flexible + postcss-pxtorem通过包管理器安装+配置即可</p>
</blockquote>
<h3 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a><strong>响应式布局</strong></h3><p>   通过<strong>媒体查询</strong>（@media）设置不同屏幕尺寸的样式，比如小屏时让内容撑满，大屏时居中显示。会用相对单位比如<code>%,em,rem</code>配合工具动态调整根字体大小，这样页面元素能根据设备宽度自动缩放</p>
<ul>
<li>好处：</li>
<li>代码复用率高，一套代码适配多种设备</li>
<li>适合内容动态变化的场景（如新闻、电商页面）</li>
<li>缺点：</li>
<li>复杂布局需要编写大量媒体查询规则</li>
<li>对图片资源适配需额外处理（如srcset）<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">600px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="rem单位适配："><a href="#rem单位适配：" class="headerlink" title="rem单位适配："></a>rem单位适配：</h3><ul>
<li>原理：通过 JavaScript 动态计算根元素（<html>）的 font-size，再结合 rem 单位实现缩放。</li>
<li>工具：常用 amfe-flexible + postcss-pxtorem 自动将 px 转换为 rem</li>
<li>需要手动配置或依赖工具链,对旧版浏览器兼容性要求较高</li>
</ul>
<h3 id="vw-vh单位适配："><a href="#vw-vh单位适配：" class="headerlink" title="vw&#x2F;vh单位适配："></a>vw&#x2F;vh单位适配：</h3><ul>
<li>原理：vw（视口宽度的 1%）、vh（视口高度的 1%）直接基于视口大小计算。</li>
<li>优点：<br>无需 JavaScript，纯 CSS 实现。<br>适合现代项目，布局简洁。</li>
<li>缺点：</li>
<li>对字体大小的适配需额外处理（如 clamp() 函数）。</li>
<li>部分设备可能存在兼容性问题（如 iOS 13 以下）<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50vw</span>; <span class="comment">/* 占屏幕宽度的 50% */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="flex和grid布局"><a href="#flex和grid布局" class="headerlink" title="flex和grid布局"></a>flex和grid布局</h3><p>复杂的布局，会用Flexbox或Grid来保证元素对齐和分布。最后，图片适配会用 <code>srcset</code> 根据分辨率加载合适的资源<br>Flexbox快速实现一维布局（如导航栏、卡片列表）,兼容性较好<br>Grid更复杂的布局更灵活,兼容性较差</p>
<h3 id="自适应设计"><a href="#自适应设计" class="headerlink" title="自适应设计"></a>自适应设计</h3><ul>
<li>原理：通过服务器或前端检测设备类型，加载不同的布局文件，<strong>如 PC、移动端分开开发</strong><br>优点：<br>可针对特定设备优化性能（如移动端加载更轻量的资源）。<br>缺点：<br>维护成本高（需维护多套代码）。<br>不适合内容动态变化的场景</li>
</ul>
<h3 id="如何选择适配方案"><a href="#如何选择适配方案" class="headerlink" title="如何选择适配方案"></a>如何选择适配方案</h3><p>选择适配方案需要看项目需求。如果是传统项目，我会优先用 媒体查询 + rem，因为它的兼容性好，适配精度高。<br>如果是现代项目，可能会用 vw&#x2F;vh 或 CSS Grid，因为它们更简洁。<br>对于图片资源，会用srcset和picture 标签。<br>如果项目需要极致性能，可能会考虑自适应设计，但维护成本会更高。总之，我会根据团队技术栈、项目复杂度和目标用户群体选择最适合的方案</p>
<h2 id="rem-和-vw-的区别"><a href="#rem-和-vw-的区别" class="headerlink" title="rem 和 vw 的区别"></a>rem 和 vw 的区别</h2><ul>
<li>rem 是基于根元素（<html>）的字体大小计算的，通过 JavaScript 动态调整根字体大小，适合传统的渐进式适配。- - vw 是直接基于视口宽度的百分比单位，比如 1vw 等于屏幕宽度的 1%，完全不需要 JavaScript。</li>
<li>rem 更适合需要精确控制字体大小的场景，</li>
<li>vw 更适合现代布局，尤其是动态内容较多的页面。</li>
<li>但是vw 在处理字体时可能会导致过小或过大的问题，需要结合<code>clamp()函数</code>优化</li>
</ul>
]]></content>
      <categories>
        <category>面试题</category>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>网络请求</tag>
        <tag>浏览器</tag>
      </tags>
  </entry>
  <entry>
    <title>机器学习笔记</title>
    <url>/2025/06/22/43-machine/</url>
    <content><![CDATA[<h1 id="机器学习概念理解"><a href="#机器学习概念理解" class="headerlink" title="机器学习概念理解"></a>机器学习概念理解</h1><h2 id="多种神经网络"><a href="#多种神经网络" class="headerlink" title="多种神经网络"></a>多种神经网络</h2><h3 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h3><p>是一种模仿人脑结构的算法，由很多 “节点”（像神经元）层层连接组成。输入数据后，每个节点会处理信息、传递给下一层，最后输出结果（比如判断一张图是不是猫）。核心就是通过大量数据 “训练”，让这些节点学会找规律</p>
<h3 id="全连接神经网络"><a href="#全连接神经网络" class="headerlink" title="全连接神经网络"></a>全连接神经网络</h3><p>每一层的每个节点都和下一层所有节点全连接<br>理解：最 “实在” 的神经网络，就像握手问题，两个相邻的层的所有节点都会握手（全连接）<br>缺点：参数太多，容易算得慢，适合处理简单数据（如图像像素少的情况）</p>
<h3 id="CNN卷积神经网络"><a href="#CNN卷积神经网络" class="headerlink" title="CNN卷积神经网络"></a>CNN卷积神经网络</h3><p>是处理图像的主流网络架构<br>不像全连接那样瞎连，它用 “卷积核”（类似滤镜）扫描图像，提取局部特征（比如边缘、颜色块），再层层叠加特征（从线条到眼睛、再到猫的整体）。<br>优点：能减少参数，还能保留图像的空间关系，<br>应用：专门对付图像。游戏、自动驾驶里的图像识别</p>
<h4 id="核心层及其功能"><a href="#核心层及其功能" class="headerlink" title="核心层及其功能"></a>核心层及其功能</h4><ul>
<li>卷积层：通过卷积核（过滤器）与输入图像进行滑动窗口计算，提取局部特征（如边缘、纹理等）<br>权值共享：同一卷积核在图像不同位置共享参数，减少计算量<br>局部连接：每个神经元仅连接输入的局部区域，符合图像局部相关性</li>
<li>池化层：对特征图进行下采样，减少参数数量，同时保留主要特征<br>最大池化：取窗口内最大值，保留显著特征<br>平均池化：取窗口内平均值，平滑特征</li>
<li>激活层：对卷积层输出引入非线性变换（激活函数）</li>
<li>批量归一化层：对每层输入进行归一化（标准化均值和方差），加速训练收敛，缓解梯度消失问题</li>
<li>全连接层：连接所有特征，将提取的局部特征整合为全局特征，常用于分类任务的最后一层，输出类别概率</li>
<li>输出层：根据任务类型输出结果</li>
</ul>
<h3 id="RNN循环神经网络"><a href="#RNN循环神经网络" class="headerlink" title="RNN循环神经网络"></a>RNN循环神经网络</h3><p>它的节点会 “记住” 之前的输入信息，就像读句子会根据前文理解后文。<br>缺点：传统 RNN 记性不好，长句子后面的信息容易忘，后来进化出LSTM<br>应用：处理 “有顺序” 的数据（比如句子、股票走势）</p>
<h2 id="处理图片的神经网络模型"><a href="#处理图片的神经网络模型" class="headerlink" title="处理图片的神经网络模型"></a>处理图片的神经网络模型</h2><h3 id="VGG16"><a href="#VGG16" class="headerlink" title="VGG16"></a>VGG16</h3><p>适合理解基础特征提取<br>理解：用 “叠叠乐” 提取图片细节，就像用放大镜一层一层看图片，先找边缘线条，再组合成耳朵、眼睛等局部特征，最后拼出完整物体</p>
<blockquote>
<p>用很多个 3×3 的小 “窗口”（卷积核）反复扫描图片，每次只关注一小块区域，比如先找直线（边缘），再找曲线（耳朵轮廓），最后认整体（猫的样子）。<br>网络有 16 层，靠 “堆层数” 让特征提取更细致<br>缺点：参数多、计算量大，像搬一摞厚厚的书，有点笨重</p>
</blockquote>
<h3 id="ResNet"><a href="#ResNet" class="headerlink" title="ResNet"></a>ResNet</h3><p>常用在复杂任务里（比如自动驾驶认路标）<br>理解：给神经网络加 “电梯” ，传统深层网络像爬高楼，层数太多容易 “缺氧”（梯度消失，学不动），ResNet 加了 “电梯”（残差连接）解决这个问题</p>
<blockquote>
<p>让信息能跳过中间层直接传递，比如学习第 100 层时，不光学新东西，还能直接拿到第 1 层的 “基础信息”，避免深层学偏。<br>可以搭非常深的网络（比如 152 层），像用望远镜看远处，既能看清细节又能把握整体，准确率更高。</p>
</blockquote>
<h2 id="激活函数"><a href="#激活函数" class="headerlink" title="激活函数"></a>激活函数</h2><p>理解：像炒菜时的调料，同样的食材（数字）加不同调料（激活函数），味道（输出）完全不同<br>作用是为模型引入非线性能力，让网络能学习复杂模式<br>若没有激活函数，多层神经网络会退化成线性模型，只能拟合线性关系，无法处理图像、语言等复杂非线性问题</p>
<blockquote>
<p>Sigmoid：老派温和，输出像概率，但容易 “摸鱼”（梯度消失），计算慢<br>Sigmoid：适合当二分类的最后一层（输出 0 或 1 的概率），比如垃圾邮件分类<br>ReLU：直爽暴躁，计算快不消失，但可能 “摆烂”（神经元死亡），现在主流<br>ReLU：适合藏在中间层提取特征，比如 CNN 里每层卷积后接 ReLU，让网络学出复杂图案（猫狗的耳朵、尾巴）</p>
</blockquote>
<h3 id="常见类型——ReLU（修正线性单元）"><a href="#常见类型——ReLU（修正线性单元）" class="headerlink" title="常见类型——ReLU（修正线性单元）"></a>常见类型——ReLU（修正线性单元）</h3><p>最常用，公式为 f(x)&#x3D;max(0, x)，x&gt;0 时直接输出 x，x≤0 时输出 0<br>优点是计算效率高、缓解梯度消失，缺点是神经元可能 “死亡”（输入负数时始终输出 0）<br>没有复杂运算，只判断 x 是不是正数，效率高</p>
<h3 id="常见类型——Sigmoid"><a href="#常见类型——Sigmoid" class="headerlink" title="常见类型——Sigmoid"></a>常见类型——Sigmoid</h3><p>公式：f (x)&#x3D;1&#x2F;(1+e^-x)，输出永远在 0 到 1 之间，像把数字 “挤” 进窄门<br>将输入映射到 (0,1) 区间，常用于二分类输出层，但存在梯度消失问题，且输出非零中心化，可能导致训练不稳定<br>图像：S 型曲线，中间陡两边平</p>
<h2 id="过拟合"><a href="#过拟合" class="headerlink" title="过拟合"></a>过拟合</h2><ul>
<li>模型在训练集上正确率超高，但在新数据（测试集）上表现拉垮，因为它记住了训练数据的特殊细节，没抓住普遍规律</li>
<li>理解：过拟合就像 “死记硬背” 却没学懂<br>模型把训练数据里的 “噪音”（无关细节）也当成了规律<br>比如例题都是 “红苹果”，只死板记住了 “红色 &#x3D; 苹果”，但遇到绿苹果就认不出了</li>
<li>过拟合的本质是模型 “太聪明” 但没 “理解本质”，防止方法都是在让模型 “学精而不是学杂”，平衡 “拟合训练数据” 和 “泛化到新数据” 的能力</li>
<li>过拟合的后果：浪费资源，模型没用（无法进行预测）</li>
</ul>
<h3 id="如何防止过拟合："><a href="#如何防止过拟合：" class="headerlink" title="如何防止过拟合："></a>如何防止过拟合：</h3><ul>
<li>正则化——简化内容，给模型减负（在损失函数里加 “惩罚项”，让模型参数尽量小）</li>
<li>Dropout——掐断依赖（训练时随机让一部分神经元不工作，防止模型过度依赖某几个特征）</li>
<li>增加训练数据——收集更多数据，或用数据增强（比如图像旋转、翻转）扩充数据集，让模型看到更多例外情况</li>
<li>解决关键：激活函数选对、权重初始化合理、加残差或梯度裁剪，让网络 “情绪稳定” 地学习</li>
</ul>
<h2 id="梯度消失恶化梯度爆炸"><a href="#梯度消失恶化梯度爆炸" class="headerlink" title="梯度消失恶化梯度爆炸"></a>梯度消失恶化梯度爆炸</h2><p>神经网络训练时，需要根据误差调整参数（比如权重），而梯度就是告诉参数 “该往哪调、调多少” 的方向标，梯度大，参数更新快（学得猛）；梯度小，参数更新慢（学得慢）</p>
<h3 id="梯度消失-“越学越没劲”"><a href="#梯度消失-“越学越没劲”" class="headerlink" title="梯度消失 “越学越没劲”"></a>梯度消失 “越学越没劲”</h3><p>深层网络训练时，梯度从最后一层往前传，越传越弱，到前面层时几乎没了，参数几乎不更新，模型 “学不动”<br>原因：激活函数选得不合适（如 Sigmoid 导数最大值只有 0.25），多层连乘后梯度越乘越小，像滚雪球越滚越小</p>
<h3 id="梯度爆炸-“越学越暴躁”“发疯乱学”"><a href="#梯度爆炸-“越学越暴躁”“发疯乱学”" class="headerlink" title="梯度爆炸 “越学越暴躁”“发疯乱学”"></a>梯度爆炸 “越学越暴躁”“发疯乱学”</h3><p>梯度更新时数值变得极大，参数疯狂乱跳，模型输出全是 NaN（无效值），训练崩溃<br>神经网络中，若权重初始值太大，或多层梯度连乘时数值爆炸（如权重 &gt; 1 时连乘越来越大）<br>原因：权重初始化不合理，或网络结构太深，梯度连乘时数值呈指数级增长，像利滚利突然欠了一屁股债</p>
<h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><p>梯度消失对策：<br>换激活函数：用 ReLU（导数在正数区恒为 1，不压缩梯度）<br>加残差连接（ResNet 的做法）：让梯度能 “抄近道” 直接往前传，跳过中间层，避免层层衰减<br>梯度爆炸对策：<br>权重初始化选合适方法（如 Xavier、Kaiming 初始化），让初始值别太大。、<br>梯度裁剪：设置阈值，当梯度超过一定值时强行 “刹车”，比如把梯度限制在 [-10, 10] 之间</p>
<h3 id="梯度消失-爆炸在-CNN-和-RNN"><a href="#梯度消失-爆炸在-CNN-和-RNN" class="headerlink" title="梯度消失 &#x2F; 爆炸在 CNN 和 RNN"></a>梯度消失 &#x2F; 爆炸在 CNN 和 RNN</h3><p>CNN 靠多层卷积提取特征，梯度消失 &#x2F; 爆炸主要来自激活函数选择（如老用 Sigmoid）或网络太深<br>用 ReLU 激活 + 残差连接（ResNet）就能大幅缓解<br>RNN 处理序列数据（如句子），信息要按时间步一步步传，梯度消失 &#x2F; 爆炸来自链式求导连乘。比 CNN 更难搞，因为序列长度不固定，链式求导天然容易出问题</p>
<blockquote>
<p>CNN 和 RNN 都可能遇到梯度消失 &#x2F; 爆炸，但 RNN 更严重（因为序列链式传递）；<br>LSTM 是 RNN 的 “加强版”，用三个 “门” 控制记忆流动，让梯度稳定传递，能记住长序列信息，比如翻译整段话时不忘开头的词</p>
</blockquote>
<h3 id="LSTM解决RNN的遗忘（梯度消失）"><a href="#LSTM解决RNN的遗忘（梯度消失）" class="headerlink" title="LSTM解决RNN的遗忘（梯度消失）"></a>LSTM解决RNN的遗忘（梯度消失）</h3><p>LSTM 的 “三件套” 设计：<br>遗忘门：决定 “扔掉哪些旧记忆”，比如读句子时，发现 “昨天” 对理解当前词不重要，就删掉。<br>输入门：决定 “存哪些新记忆”，比如遇到关键动词 “吃”，就把它存进 “保险箱”。<br>输出门：决定 “用哪些记忆来输出”，比如回答问题时，只把相关的 “吃饭”“昨天” 信息拿出来。<br>通过这三个门控机制，LSTM 让梯度能稳定流动，避免消失，能记住长序列的信息</p>
<h2 id="学习率"><a href="#学习率" class="headerlink" title="学习率"></a>学习率</h2><p>学习率是机器学习优化过程中的关键参数，它决定了模型参数更新的步长</p>
<blockquote>
<p>简单类比：学习率就像走路的步幅 —— 大步走（高学习率）可能走得快但容易错过目标，小步走（低学习率）走得慢但更稳，合适的步幅（学习率）才能高效到达目的地（模型最优解）</p>
</blockquote>
<h3 id="增加学习率"><a href="#增加学习率" class="headerlink" title="增加学习率"></a>增加学习率</h3><p>让参数更新的步长变大，模型在损失函数的梯度方向上尝试更快地 “迈步” 靠近最优解<br>优点：可能加速模型收敛，减少训练时间。<br>缺点：如果学习率过大，容易跳过最优解，导致损失函数震荡甚至发散（模型不收敛，准确率下降）</p>
<h3 id="降低学习率"><a href="#降低学习率" class="headerlink" title="降低学习率"></a>降低学习率</h3><p>使参数更新的步长变小，模型以更 “谨慎” 的方式调整参数<br>优点：有助于模型在接近最优解时更精准地 “微调”，可能找到更优的参数组合，提升最终收敛的稳定性。<br>缺点：训练速度变慢，若学习率过小，模型可能陷入局部最优解而无法进一步优化，或长时间无法收敛</p>
<h2 id="暂退法Dropout-解决过拟合"><a href="#暂退法Dropout-解决过拟合" class="headerlink" title="暂退法Dropout(解决过拟合)"></a>暂退法Dropout(解决过拟合)</h2><p>平时神经元们抱团干活，比如 A 负责认猫耳朵，B 负责认猫尾巴，可能 A 记太死 “没耳朵就不是猫”，用 Dropout 后，A 偶尔摸鱼，网络不得不让其他神经元（比如 C）也学会认耳朵，避免过度依赖某几个学霸神经元<br>目的：防止过拟合，让模型更聪明，遇到新数据能认得</p>
<h2 id="训练是的参数和说明"><a href="#训练是的参数和说明" class="headerlink" title="训练是的参数和说明"></a>训练是的参数和说明</h2><h3 id="随机种子"><a href="#随机种子" class="headerlink" title="随机种子"></a>随机种子</h3><p>深度学习中有很多随机过程，如权重初始化、数据打乱等。设置固定的随机种子可以确保每次运行代码时这些随机过程的结果相同<br>随机数生成器通常使用种子值来初始化内部状态，然后根据确定性算法生成一系列看似随机的数字。只要种子值相同，生成的随机数序列就相同。</p>
<h3 id="批次大小"><a href="#批次大小" class="headerlink" title="批次大小"></a>批次大小</h3><p>在训练过程中，数据会被分成多个小批次喂给模型。批次大小指定了每个批次包含的样本数量<br>中等批次（64-256） 通常是一个安全的起点</p>
<blockquote>
<p>大批次（如 128+）：适合数据量大、分布均匀的场景，需搭配较大学习率或 warm-up 策略。<br>小批次（如 16-32）：适合数据量小、需增强泛化性的场景，或作为初始调试（便于观察训练波动）</p>
</blockquote>
<p><strong>批次越大：</strong></p>
<ul>
<li>每次迭代处理的数据量越多，计算资源（如 GPU）利用率更高，训练速度更快（可能因内存不足导致训练崩溃）</li>
<li>梯度更平滑（数据平均效应），收敛过程更稳定，但可能陷入局部最优解（尤其当批次过大时）</li>
<li>训练更 “确定性”，若数据分布均匀，可能收敛到更精确的解；但若数据存在偏差，大批次可能放大该偏差，导致泛化性下降</li>
</ul>
<h1 id="实训–蔬菜识别完整笔记"><a href="#实训–蔬菜识别完整笔记" class="headerlink" title="实训–蔬菜识别完整笔记"></a>实训–蔬菜识别完整笔记</h1><h2 id="数据集准备环节"><a href="#数据集准备环节" class="headerlink" title="数据集准备环节"></a>数据集准备环节</h2><p>   首先问AI我该如何获取蔬菜图片相关数据集，他推荐了网站（Kaggle: Your Machine Learning and Data Science Community）我在上面找到了适合项目的蔬菜集，网址如下Vegetable Image Dataset（<a href="https://www.kaggle.com/datasets/misrakahmed/vegetable-image-dataset/data%EF%BC%89">https://www.kaggle.com/datasets/misrakahmed/vegetable-image-dataset/data）</a></p>
<h2 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h2><p>因为是小组项目，考虑到后续其他队友可能需要调整代码，模块分工，所以在项目里我用了模块化设计（让AI帮我拆解），每个模块负责特定的功能</p>
<h3 id="1-config-py配置模块"><a href="#1-config-py配置模块" class="headerlink" title="1. config.py配置模块"></a>1. config.py配置模块</h3><p>设置随机种子（一个整数值，设置固定的随即种子能让深度学习中的随机过程的结果相同），数据集路径，批次大小(指定每个批次包含的样本数量，批次大训练快也更准确，但是内存占用大)，每类样本最大数量（数据集图片太多了，限制用200个），训练轮次，模型保存路径。<br>设置中文字体配置FONT_PATHS<br>设置蔬菜营养信息，键值对的方式，键为模型预测类型<br>设置中英文类别映射，也是键值对的方式</p>
<h3 id="2-data-py数据加载模块"><a href="#2-data-py数据加载模块" class="headerlink" title="2. data.py数据加载模块"></a>2. data.py数据加载模块</h3><p>读取蔬菜图像数据（VegetableDataset 类）：初始化时指定数据集根目录、图像预处理转换和每类最大样本数（默认用 config 里的 200），<br>限制每类样本数量（_load_samples 方法），<br>图像转为RGB格式（__getitem__方法）<br>图像预处理转换（get_transforms 函数）：随机裁剪、水平翻转、随机旋转、颜色抖动、验证测试集用固定尺寸裁剪，都转为张量（理解：将图像或其他格式的数据转换为神经网络能够处理的张量（Tensor）格式）并归一化。<br>先从识别处训练、验证、测试三个数据集的目录，然后创建训练、验证和测试数据加载器（数据加载器是一个迭代器，负责按批次加载、预处理数据，并输送给模型训练或推理）（create_data_loaders 函数），最后返回结果</p>
<h3 id="3-model-py模型定义模块"><a href="#3-model-py模型定义模块" class="headerlink" title="3. model.py模型定义模块"></a>3. model.py模型定义模块</h3><p>基于ResNet18 创建蔬菜分类模型，使用预训练的 ResNet18 模型（利用 ImageNet 数据集上的预训练权重，可加速收敛并提升泛化能力）<br>冻结特征提取层参数（将model.parameters ()的requires_grad设为False，只只训练最后一层全连接层，适合小数据集微调）<br>将模型移至指定设备（config.py中定义的DEVICE）</p>
<h3 id="4-evaluator-py模型训练模块"><a href="#4-evaluator-py模型训练模块" class="headerlink" title="4. evaluator.py模型训练模块"></a>4. evaluator.py模型训练模块</h3><p>大白话理解：给模型看很多训练集中的蔬菜图片，让它学会识别蔬菜，再定期从验证集取出新图片测试，最后把学习最好的模型参数保存下来<br>初始化训练历史记录（保存训练和验证的损失、准确率），循环每个训练轮次（num_epochs）：<br>训练阶段：先设置模型为训练模式（model.train ()），遍历训练数据加载器，使用 tqdm 显示进度，将数据移至指定设备（DEVICE），梯度清零，前向传播计算输出，获取预测类别，计算损失，反向传播更新参数累积损失和正确预测数，计算本轮平均指标<br>训练阶段代码理解：<br>model.train()  # 告诉模型：现在是上课，要认真学<br>running_loss &#x3D; 0.0  # 记录这学期学错的总次数<br>running_corrects &#x3D; 0  # 记录这学期学对的总次数</p>
<p>for inputs, labels in tqdm(train_loader):<br>    # 把图片和标签放到GPU（如果有的话）上计算<br>    inputs, labels &#x3D; inputs.to(DEVICE), labels.to(DEVICE)<br>    optimizer.zero_grad()  # 清空之前的学习误差记录</p>
<pre><code># 前向传播：模型猜这是什么蔬菜
outputs = model(inputs)
_, preds = torch.max(outputs, 1)  # 选出模型认为最可能的蔬菜类别

# 计算错误程度（损失）
loss = criterion(outputs, labels)

# 反向传播：告诉模型哪里猜错了
loss.backward()

# 优化器：帮模型调整「思路」（参数）
optimizer.step()

# 记录这一批次的学习情况
running_loss += loss.item() * inputs.size(0)
running_corrects += torch.sum(preds == labels.data)
</code></pre>
<p>验证阶段：先设置模型为评估模式（model.eval ()），然后进行验证，如果验证准确率高于历史最好的，就保存模型权重，返回训练好的模型和训练历史记录</p>
<h3 id="5-visualizer-py可视化模型"><a href="#5-visualizer-py可视化模型" class="headerlink" title="5. visualizer.py可视化模型"></a>5. visualizer.py可视化模型</h3><p>先配置matplotlib库支持中文显示，让它遍历config里设置的中文字体路劲，然后使用<br>然后绘制模型训练过程中的损失和准确率曲线（plot_training_history(history)）<br>曲线怎么绘制的呢，再训练过程中history字典会记录每一轮的关键指标，在这里把这些记录的指标进行初始化。</p>
<p>左图：损失曲线衡量模型预测值与真实值的差距，数值越小表示预测越准确，随轮次增加逐渐下降并趋于平稳<br>蓝色的训练损失曲线是模型在训练数据集上的误差，反映模型对训练数据的拟合程度<br>黄色的验证损失曲线，是模型在验证数据集上的误差，反映模型的泛化能力（对新数据的适应能力）</p>
<p>右图：准确率曲线是表示模型正确预测的样本比例，数值越高表示模型性能越好，随轮次增加逐渐上升，最终趋于平稳<br>蓝色的训练准确率曲线是模型在训练集上的正确预测率<br>黄色的验证准确率曲线是模型在验证集上的正确预测率，更反映模型的实际应用能力</p>
<h3 id="6-predict-py-图像预测模块"><a href="#6-predict-py-图像预测模块" class="headerlink" title="6. predict.py 图像预测模块"></a>6. predict.py 图像预测模块</h3><p>展示单张图片的识别结果（（display_prediction 函数））：先图像预处理，然后图片上添加类别和置信度，底部添加该类别对应的文字说明信息</p>
<h3 id="7-main-py"><a href="#7-main-py" class="headerlink" title="7.main.py"></a>7.main.py</h3><p>协调整个系统的运行流程<br>执行步骤：配置中文字体；加载数据；创建模型；训练模型；可视化训练结果；评估模型；随机选择样本进行预测并展示结果</p>
]]></content>
      <categories>
        <category>前后端协作</category>
      </categories>
      <tags>
        <tag>机器学习</tag>
        <tag>训练模型</tag>
      </tags>
  </entry>
  <entry>
    <title>实习小记</title>
    <url>/2025/07/02/45-antDesign/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>实习碎碎念~<br>本来想记录ant Design组件库的学习，现在变成了实习记录小册子<br>内容全部来自Alan老师，我的前端师傅~</p>
<h1 id="零零碎碎"><a href="#零零碎碎" class="headerlink" title="零零碎碎"></a>零零碎碎</h1><ul>
<li>命名一定要语义清晰，不要缩写，长一些也没关系</li>
<li>type类型声明可以写在return上面，其他的方法、类型声明等等都写在return里面</li>
<li>时间选择器组件要求的数据类型dayjs和后端给予&#x2F;需要的数据类型string不一致，要进行数据转换</li>
<li>给表单表格内容添加阴影卡片效果，不要用card组件，用div直接加shadow即可，card的官方文档是“承载文字、列表、图片、段落”，与目的不符</li>
<li>还有很简单的内容不要用Row组件单独占一行，自己写div+flex放就好了，它自带的样式后续可能会冲突</li>
<li>能不用组件库轻易完成的东西，不要用组件库，因为组件本身有自己的样式属性和方法，多层嵌套后期可能会出问题，样式混乱</li>
<li>[]代表空数组，boolean判断不为false；’ ‘空字符串，boolean判断为false</li>
<li>添加样式注意作用域，优先级，增加优先级不要!important</li>
<li>要让自己的样式优先级盖过组件库组件的样式，用<code>:global</code></li>
<li>return的最外层盒子不要用&lt;&gt;&lt;&#x2F;&gt;，用div加类名，给样式增加优先级加这个类名</li>
<li>F12控制台写代码可以自定义视频倍速！</li>
<li>行内样式：<code>style=&#123;&#123;fontSize: '16px'&#125;&#125;</code>放到less文件记得变回<code>.className&#123;font-size: 16px;&#125;</code>,注意小驼峰变短横线，单引号去掉</li>
<li>元素显示与隐藏，如果是值变化用过渡看着会更高级</li>
<li>多多使用F12找元素找属性S</li>
<li>表单一定要设置key列（主键），很重要</li>
<li>不要在标签上挂一堆样式，尽量都写道该模块对应的样式文件中，在标签上直接用类名获取样式,常用的封装</li>
<li>不要随意用遍历，每一个遍历循环复杂度很高</li>
<li>快捷键：</li>
<li>ctrl+F在文档中也能用！</li>
<li>ctrl+shift+f切换输入法繁体简体</li>
<li>ATL+TAB能够快速切屏！</li>
<li>原来默认的缩放比是150%，调成100%后的字体界面原来这么小…看习惯感觉这样小小的好好看哦</li>
<li>在git bush中贴贴命令快捷键</li>
</ul>
<h2 id="重要函数"><a href="#重要函数" class="headerlink" title="重要函数"></a>重要函数</h2><ol>
<li>render函数，常用在在table中自定义列内容</li>
</ol>
<ul>
<li><code>render: (text, record, index)：</code></li>
<li><ul>
<li>text：当前列的数据（这里是 age 的值）。</li>
</ul>
</li>
<li><ul>
<li>record：当前行的完整数据（包含 name、age、address、fileList 等）。</li>
</ul>
</li>
<li><ul>
<li>index：当前行的索引（可选参数）</li>
</ul>
</li>
</ul>
<ol start="2">
<li><code>if (fileList &amp;&amp; fileList.length &gt; 0)</code>判断数组是否有内容</li>
</ol>
<ul>
<li>fileList：检查变量是否存在（不是 null 或 undefined）。</li>
<li>fileList.length &gt; 0：如果变量存在，检查数组是否有元素s</li>
</ul>
<ol start="3">
<li>useEffect</li>
</ol>
<ul>
<li>[]为空 -&gt; 初次加载执行</li>
<li>[]为具体属性 -&gt; 改变时执行</li>
<li>[]为整个store-&gt;在缓存的应用发生变化时执行</li>
<li><ul>
<li>如果store对象中的对象的应用变化-&gt;对象引用也会变化-&gt;触发</li>
</ul>
</li>
<li><ul>
<li>如果是store对象中的对象的某个属性的属性值变化，那么引用没有变-&gt;不会触发</li>
</ul>
</li>
</ul>
<ol start="4">
<li>forEach,map前者没有返回值用，后者有返回值用</li>
<li>react父子组件通信</li>
</ol>
<h1 id="ant-design"><a href="#ant-design" class="headerlink" title="ant design"></a>ant design</h1><h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><h2 id="1-表单"><a href="#1-表单" class="headerlink" title="1. 表单"></a>1. 表单</h2><ul>
<li>要求：表单包含report date to时间选择器；report date form 时间选择器；下拉选项选择器；search按钮；reset重置按钮</li>
<li>详细：时间要月-日-年的格式展示，时间存储要用string类型，设置某一个为必填</li>
<li>布局需求：每一块文字说明和选择器上下组合排列，这几块横向布局</li>
<li>内容实现：用form组件搭架子，<code>DatePicker</code>组件完成两个时间选择器，用<code>dayjs.format(&#39;MM-DD-YYYY&#39;)</code>方法格式化时间，给form.item添加<code>required</code>属性设置必填</li>
<li>整体布局实现：用Row和Col组件实现，设置<code>gutter=&#123;[32,16]&#125;</code>表示左右间距16px，上下间距8px<br><img src="/postImgs/react/antd01.png" alt="useState位置变化效果变化"></li>
<li>小块布局实现：默认的label和选择器是水平排列，想要垂直排列，在fromAPI文档中设置<code>layout</code>属性改变布局，<code>vertical</code>值为上下布局</li>
<li>颜色实现：在项目<code>utils</code>里面封装了要求的颜色，有的是常量，不是常量的也有定义，引入文件使用颜色</li>
</ul>
<h2 id="2-表格"><a href="#2-表格" class="headerlink" title="2.表格"></a>2.表格</h2><ul>
<li>要求：一个表单表格，第一列前是多选小方框，第一列为Form Name，第二列是Form Date（展示日期，点击后可以选择日期进行修改），第三列File(如果该行没有文件，展示上传按钮，可以上传文件；如果有文件，展示文件名和删除按钮，隐藏上传按钮)，第四列Action(只有当这列前面的多选框被勾选时，删除按钮可以点，否则不能点)，表格上边有添加新列的按钮</li>
<li>整体实现：用带有多选框功能的Table组件</li>
</ul>
<h3 id="修改日期功能"><a href="#修改日期功能" class="headerlink" title="修改日期功能"></a>修改日期功能</h3><ol>
<li>首先要让这一列的内容可以修改，再考虑修改什么样子<br>那么<strong>怎么知道可不可修改呢</strong>，定义一个boolean类型<code>edit</code>变量判断，给<code>formDate</code>列设为true，<br>那么<strong>怎么能让展示的表格的该列变得可以修改呢</strong>通过表单组件，用<code>form.item</code>包括时间选择器组件<br>如果<code>edit</code>变量为true&#x3D;&gt;该列是可修改的&#x3D;&gt;判断列类型是否为日期列&#x3D;&gt;<br>是&#x3D;&gt;渲染事件选择器组件&#x3D;&gt;设置焦点在该单元格上<br>不是&#x3D;&gt;正常渲染表格内容</li>
<li>再看要修改的<code>时间选择器DatePicker</code>组件<br>开始<code>DatePicker</code>没有展示数据，因为这一列开始的数据类型是后端需要的<code>string</code>，但是事件选择器组件需要dayjs格式的数据，string类型数据无法显示<br>所以要在点击这个单元格的时候，把数据string&#x3D;&gt;dayjs再放进<code>DatePicker</code>组件中展示<br>当用户选择了新的日期，触发<code>save</code>方法，把修改后的日期dayjs&#x3D;&gt;string，再进行保存，保存后再渲染</li>
</ol>
<h3 id="上传文件功能"><a href="#上传文件功能" class="headerlink" title="上传文件功能"></a>上传文件功能</h3><p>在这列用record()方法添加<code>upload组件</code>，upload组件的onChange接收参数info包含{file,fileList}参数（要用大括号包裹，整个为info）<br>if判断是否有文件名，有&#x3D;&gt;渲染文件名+删除按钮；没有&#x3D;&gt;渲染上传文件按钮<br>上传文件后触发uploadFile方法，接收render的第二个参数record，用它拿到当前行数据，给record.file赋值为当前文件名，再把赋值后的数据覆盖更新到原来的整个数据里，再用更新后的数据重新渲染s<br>有文件，点击删除按钮，**把当列的文件名赋值为空record.file &#x3D; ‘’不可以&#x3D;[]**，再把赋值后的数据覆盖更新到原来的整个数据里，再用更新后的数据重新渲染</p>
<h3 id="选中列删除按钮功能"><a href="#选中列删除按钮功能" class="headerlink" title="选中列删除按钮功能"></a>选中列删除按钮功能</h3><p>把所有选中的行的key放进一个数组里，在渲染第四列时，判断当前行key是否在数组里，如果在&#x3D;&gt;删除按钮生效，不在&#x3D;&gt;不生效<br>按钮的生效与否通过button组件的<code>disabled</code>属性设置</p>
<h2 id="3-三个小卡片"><a href="#3-三个小卡片" class="headerlink" title="3.三个小卡片"></a>3.三个小卡片</h2><p>三个小卡片，左上角图标、右上角数字、右下角比较小的文字</p>
<h2 id="4-可折叠的搜索表单"><a href="#4-可折叠的搜索表单" class="headerlink" title="4.可折叠的搜索表单"></a>4.可折叠的搜索表单</h2><p>需求：左侧是搜索表单，表单的右上角外部有小图标，点击后搜索表单折叠（消失），右侧的Table占用它原来的空间<br>我的思路：给搜索表单设置<code>position:relative</code>，折叠图标设置<code>position:absolute;top:0;right:-30;</code>，点击折叠图标&#x3D;&gt;isFossld变量取反，再根据isFold的状态&#x3D;&gt;表单的最大宽度变&#x3D;&gt;折叠图标的right变&#x3D;&gt;Table的cro组件的span变<br>问题：搜索表单没有实现隐藏<br>Alan老师思路：不再让折叠小图标附属在可能会小时的搜索表单上，给table设置<code>position:relative</code>，让小图标挂靠在会一直存在的table上<br>搜索表单的折叠（消失）用<code>display:none</code>（visiblity:hhidden属性元素占位但不可见;visibility:visible属性元素占位且可见）<br>Alan老师说，也可以修改搜索表单的位置，让他偏移到页面之外来实现消失的效果，如果是使用值，可以添加过度动画，看起来会更高级，直接用属性<code>display:none</code>这种无法过渡<br><code>transform: translate(0,0)</code>显示,加渐变:<code>transition: transform 0.5s</code>,<code>isfold=true</code>&#x3D;&gt; <code>transform:translate(-100%,0)</code>向左移出视口,<br>其他：opacity属性（透明度渐变隐藏）：<code>opacity:0;</code>为透明不可见，<code>opacity:1;</code>为不透明可见，但是仍占用空间</p>
<h2 id="canvas–”输入文字”问题解决"><a href="#canvas–”输入文字”问题解决" class="headerlink" title="canvas–”输入文字”问题解决"></a>canvas–”输入文字”问题解决</h2><p>用canvas写一个建议的画图工具，支持用户在图片上绘画矩形、椭圆、输入文字<br>点击按钮输入文字功能，一直没成功，终于破案了！！！<br>Alan老师说问题在创建了DOM元素但是没有添加到页面中，带着我开始找问题：<br><mark>只留下最关键的创建元素和添加元素到页面两行代码，其他属性方法全部注释掉，再让注释掉的部分一个一个生效，找到了罪魁祸首！</mark></p>
<p>问题出现在：在输入文字后的保存方法中，有进行内容检测，如果内容为空那么不保存，同时销毁DOM元素。逻辑看似没问题，但是代码写的有问题，刚创建的DOM元素还没开始写内容呢就进行了内容非空判断，然后就被销毁掉了，等于是：创建&#x3D;&gt;插入页面&#x3D;&gt;没内容&#x3D;&gt;马上销毁&#x3D;&gt;所以显示不出输入框<br>其他知识：文档里用的<mark>小写2d一定不许写2D</mark>，大小写要注意！让图片根据画布大小等比例缩放、事件监听、阻止冒泡、随机颜色</p>
<h2 id="小tasks"><a href="#小tasks" class="headerlink" title="小tasks"></a>小tasks</h2><h3 id="select选择器互斥"><a href="#select选择器互斥" class="headerlink" title="select选择器互斥"></a>select选择器互斥</h3><p>两个选择器共用同一组数据，A选中的数据不会出现在B的选项中，B选中的也不会出现在A的选项中，用filter过滤另一方选中的数据</p>
<h3 id="tabs"><a href="#tabs" class="headerlink" title="tabs"></a>tabs</h3><p>children里面可以放多个组件，实现切换不同标签渲染不同内容</p>
<h3 id="react中的css"><a href="#react中的css" class="headerlink" title="react中的css"></a>react中的css</h3><p>:global 覆盖组件中的样式<br>优先级不够的话，一点一点网上找父亲的类给它添加，如果多个类名并列，中间没有空格</p>
<h3 id="高频css"><a href="#高频css" class="headerlink" title="高频css"></a>高频css</h3><p>复刻页面印象深css的有:<br><code>font-size: 16px;``font-weight: bold</code>,<code>box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);</code>,<code>padding-right: 10px;``margin: 3px;</code></p>
<h3 id="用redux实现数据持久化"><a href="#用redux实现数据持久化" class="headerlink" title="用redux实现数据持久化"></a>用redux实现数据持久化</h3><p>table表单选中的列，刷新后依然处于选中状态</p>
<h2 id="layout组件（布局）"><a href="#layout组件（布局）" class="headerlink" title="layout组件（布局）"></a>layout组件（布局）</h2><p>Layout：最外层容器，用于包裹其他布局组件<br>Layout.Header：头部容器<br>Layout.Footer：底部容器<br>Layout.Content：内容区域容器<br>Layout.Sider：侧边栏容器<br>Row&#x2F;Col：栅格系统组件，用于精细化布局（属于 Layout 体系的补充）</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>react - [react]</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>react--零零碎碎</title>
    <url>/2025/09/16/50-reacttbetter/</url>
    <content><![CDATA[<h1 id="Hook"><a href="#Hook" class="headerlink" title="Hook"></a>Hook</h1><h2 id="useEffect-副作用与依赖类型"><a href="#useEffect-副作用与依赖类型" class="headerlink" title="useEffect 副作用与依赖类型"></a>useEffect 副作用与依赖类型</h2><p>在函数组件中执行副作用操作</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 副作用逻辑</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 清理逻辑（可选）</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [dependencyArray]); <span class="comment">// 依赖项数组（可选</span></span><br></pre></td></tr></table></figure>
<p>依赖项数组 [] 的三种情况：</p>
<ul>
<li><ul>
<li>不提供：Effect 在每次渲染后都会执行。</li>
</ul>
</li>
<li><ul>
<li>空数组 []：Effect 只在组件挂载后执行一次</li>
</ul>
</li>
<li><ul>
<li>有依赖的数组 [a, b]：Effect 在组件挂载后和 a 或 b 发生变化后执行</li>
</ul>
</li>
<li><ul>
<li>整个缓存：缓存的引用变化时触发<br>清理函数用于避免内存泄漏（如取消订阅、清除定时器）。</li>
</ul>
</li>
</ul>
<h2 id="useState-状态管理"><a href="#useState-状态管理" class="headerlink" title="useState  状态管理"></a>useState  状态管理</h2><p>在函数组件内部管理局部状态。它是 React 数据流的核心，状态的更新会触发组件的重新渲染</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> [count, setCount] = useState&lt;<span class="built_in">number</span>&gt;(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 复杂类型（接口定义）</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  age?: <span class="built_in">number</span>; <span class="comment">// 可选属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [user, setUser] = useState&lt;<span class="title class_">User</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>); <span class="comment">// 联合类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数式更新（类型自动推断）</span></span><br><span class="line"><span class="title function_">setCount</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev + <span class="number">1</span>);</span><br><span class="line"><span class="title function_">setUser</span>(<span class="function"><span class="params">prev</span> =&gt;</span> prev ? &#123; ...prev, <span class="attr">name</span>: <span class="string">&#x27;New Name&#x27;</span> &#125; : <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>状态更新可能是异步的，React 会对多次 setState 进行批处理以提高性能<br>如果新状态与旧状态相同（通过 Object.is 比较），React 将跳过这次渲染，是一种优化</p>
<h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><h2 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h2><h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h2><h2 id="useRef-DOM引用与可变值容器"><a href="#useRef-DOM引用与可变值容器" class="headerlink" title="useRef  DOM引用与可变值容器"></a>useRef  DOM引用与可变值容器</h2><p>可以存放任何会变化的值，但其值的改变不会触发组件重新渲染</p>
<figure class="highlight tsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> refContainer = <span class="title function_">useRef</span>(initialValue);</span><br><span class="line"><span class="comment">// 通过 refContainer.current 访问当前值</span></span><br></pre></td></tr></table></figure>
<h2 id="useContext-跨组件数据传递"><a href="#useContext-跨组件数据传递" class="headerlink" title="useContext  跨组件数据传递"></a>useContext  跨组件数据传递</h2>]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>博客篇-Nie-Blog的美化之路</title>
    <url>/2024/11/08/Nie-Blog%E7%9A%84%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<h1 id="应用butterfly主题"><a href="#应用butterfly主题" class="headerlink" title="应用butterfly主题"></a>应用butterfly主题</h1><h2 id="资源网址"><a href="#资源网址" class="headerlink" title="资源网址"></a>资源网址</h2><p><a href="https://butterfly.js.org/">botterfly主题官方文档</a><br><a href="https://www.iconfont.cn/">阿里巴巴图标矢量库</a></p>
<h2 id="配置安装"><a href="#配置安装" class="headerlink" title="配置安装"></a>配置安装</h2><p>botterfly主题官方文档[<a href="https://butterfly.js.org/]">https://butterfly.js.org/]</a></p>
<ol>
<li>安装<br>跟着官方文档git安装，但是我失败了，可能是网络不行，改用npm安装<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">npm install hexo-theme-butterfly</span><br></pre></td></tr></table></figure>
升级方法：在根目录中运行<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">npm update hexo-theme-butterfly</span><br></pre></td></tr></table></figure></li>
<li>应用主题<br>修改_config.yml文件，拉到下面找，把里面的主题改为butterfly<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#原来是这样的</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span></span><br><span class="line"><span class="comment">#修改为这样的</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">butterfly</span></span><br></pre></td></tr></table></figure></li>
<li>安装插件,pug以及stylus的渲染器<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li>
<li>官方文档建议的优化<br>为了减少升级主题后带来的不便，请使用以下方法：<br>在 hexo 的根目录创建一个文件_config.butterfly.yml<br>然后把butterfly主题的_config.yml文件内容辅助贴贴进去<br><img src="/postImgs/blogUp1.png" alt="我的项目中这个文件在这里"><br>然后运行<br>成功应用Butterfly主题,让vscode左侧文件目录不再折叠展示，在设置里把这两个勾都取消</li>
</ol>
<h1 id="使用说明-修改"><a href="#使用说明-修改" class="headerlink" title="使用说明+修改"></a>使用说明+修改</h1><h2 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h2><ol>
<li>Front-matter 是 markdown 文件最上方以 — 分隔的区域，用于指定个别档案的变数<br>Page Front-matter 用于 配置頁面<br>Post Front-matter 用于 配置文章頁<br>详细请看官方文档 [<a href="https://butterfly.js.org/posts/dc584b87/]">https://butterfly.js.org/posts/dc584b87/]</a></li>
<li>添加标签页<br>根目录hexo new page tags<br>修改文件source&#x2F;tags&#x2F;index.md<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">title</span>: 标签</span><br><span class="line"><span class="attr">date</span>: <span class="number">2024</span>-<span class="number">11</span>-<span class="number">09</span> <span class="number">13</span>:<span class="number">38</span>:<span class="number">48</span></span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;tags&#x27;</span></span><br><span class="line"><span class="attr">orderby</span>: random</span><br><span class="line"><span class="attr">order</span>: <span class="number">1</span></span><br><span class="line">···</span><br><span class="line">type	【必须】页面类型，必须为 tags</span><br><span class="line">orderby	【可选】排序方式 ：</span><br><span class="line">random - 随机排序 / name - 标签名字排序 / length - 标签数量排序</span><br><span class="line">order	【可选】排序次序： <span class="number">1</span>（升序），-<span class="number">1</span>（降序）</span><br></pre></td></tr></table></figure></li>
<li>添加分类页<br>根目录输入hexo new page categories<br>修改个文件source&#x2F;categories&#x2F;index.md<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">title</span>: 分类</span><br><span class="line"><span class="attr">date</span>: <span class="number">2024</span>-<span class="number">11</span>-<span class="number">09</span> <span class="number">13</span>:<span class="number">41</span>:<span class="number">58</span></span><br><span class="line"><span class="attr">type</span>: <span class="string">&#x27;categories&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>创建友情链接<br>的根目录hexo new page link<br>修改文件source&#x2F;link&#x2F;index.md<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: 友情链接</span><br><span class="line">date: 2024-11-09 13:43:23</span><br><span class="line">type: &#x27;link&#x27;</span><br></pre></td></tr></table></figure>
根目录中的创建文件source&#x2F;_datalink.yml<br>然后把官方文档内容复制进去<br>但是官方文档都是繁体字呢，看着不太舒服，网站[<a href="https://jf.homefont.cn/]%E5%BF%AB%E9%80%9F%E7%B9%81%E4%BD%93%E8%BD%AC%E5%8C%96%E7%AE%80%E4%BD%93%E5%AD%97">https://jf.homefont.cn/]快速繁体转化简体字</a></li>
<li>404页面<br>在_config.butterfly.yml文件中找到下面代码（110行左右）<br>emable从false改为true即可<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;Page Not Found&#x27;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">/img/error-page.png</span></span><br></pre></td></tr></table></figure></li>
<li>_config.yml文件修改语言<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">zh-CH</span></span><br><span class="line"><span class="string">···</span></span><br><span class="line"><span class="comment">#下面的都支持</span></span><br><span class="line"><span class="comment">#default(en)</span></span><br><span class="line"><span class="comment">#zh-CN （简体中文）</span></span><br><span class="line"><span class="comment">#zh-TW （台湾繁体中文）</span></span><br><span class="line"><span class="comment">#zh-HK （香港繁体中文）</span></span><br><span class="line"><span class="comment">#ja （日语）</span></span><br><span class="line"><span class="comment">#ko（韩语）</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><p>_config.butterfly.yml文件进行操作，把对应的注释设置生效，即可生效</p>
<h3 id="字体配置"><a href="#字体配置" class="headerlink" title="字体配置"></a>字体配置</h3><p>搜font，我改了全局的汉字和代码字体</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global_font_size:</span></span><br><span class="line">  <span class="attr">code_font_size:</span></span><br><span class="line">  <span class="attr">font_family:</span> <span class="string">Segoe</span> <span class="string">UI</span></span><br><span class="line">  <span class="attr">code_font_family:</span> <span class="string">consolas</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="图标"><a href="#图标" class="headerlink" title="图标"></a>图标</h3><p><a href="https://www.iconfont.cn/">阿里巴巴图标矢量库</a><br>Butterfly支持 font-awesome v6 图标<br>书写格式 图标名：url || 描述性文字 || color</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/xxxxx</span> <span class="string">||</span> <span class="string">Github</span> <span class="string">||</span> <span class="string">&quot;#hdhfbb&quot;</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span> <span class="string">||</span> <span class="string">&quot;#000000&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="右上角menu菜单栏"><a href="#右上角menu菜单栏" class="headerlink" title="右上角menu菜单栏"></a>右上角menu菜单栏</h3><ol>
<li>在文件中找到menu下面的代码进行修改<br>官方文档目录的内容贴进去<br><strong>一定一定要注意空格缩进格式！！不然显示不出来</strong><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">Home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line"><span class="attr">Archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line"><span class="attr">Tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line"><span class="attr">Categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line"><span class="string">List||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br><span class="line"><span class="attr">Link:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line"><span class="attr">About:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：<br>必须是 ，后面分开，然后写图标名。&#x2F;xxx&#x2F;||<br>如果不希望显示图标，图标名可不写。<br>默认子目录是展开的，如果你想要隐藏，在子目录里添加hide</p>
</blockquote>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="string">List||fas</span> <span class="string">fa-list||hide:</span></span><br><span class="line">  <span class="attr">Music:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="attr">Movie:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-video</span></span><br></pre></td></tr></table></figure></li>
<li>在source文件夹下创建music文件夹，再里面创建index.md文件，代表该文件夹的主页，在里面写信息<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 音乐</span><br><span class="line">date: 2024-11-13 20：10：34</span><br><span class="line"><span class="section">type: &#x27;music&#x27;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure></li>
<li>其他页面也像这样完成</li>
</ol>
<h3 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h3><ol>
<li>本地图片放在哪儿<br><strong>要用本地的图片必须在source下面建图片文件夹放图片！！不能放到其他位置不然跑着跑着自动就没了！！</strong><br>我在source下建立myimg文件夹，在_config.butterfly.yml文件中引用方式：<br>img: ‘.&#x2F;myimg&#x2F;avatar2.png’<br>注意要加单引号！！！</li>
<li>顶部背景图<br>可以用图片，也可以用颜色或渐变色<br>我开始用的渐变色，从网站找渐变色代码[<a href="https://css.bqrdh.com/gradient-editor]">https://css.bqrdh.com/gradient-editor]</a><br>然后根据官方文档修改_config.butterfly.yml文件#Image Setting下的东西</li>
</ol>
<p><strong>注意！！！开始我的背景图片一直发暗，后来去css文件把background-color: var(–mark-bg);这行代码删掉就清晰啦！！</strong><br>但是我把public的index.css和.develop_git文件的index.css里面的这一行都删了，还是一运行又检查代码这行代码依然在，怎么搞都修改不了可恶！！<br>最后翻到后面的官方文档问题解决了，在文件中的这里黑色罩子true改false即可</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Add a mask to the header and footer</span></span><br><span class="line"><span class="attr">mask:</span></span><br><span class="line">  <span class="attr">header:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">footer:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>首页文章展示图<br>文章封面的获取顺序 Front-matter 的 cover &gt; 配置文件的 default_cover &gt; false</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#我这样配置没成功，加不加单引号都失败了</span></span><br><span class="line"><span class="attr">default_cover:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./myimg/gril3.jpg</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./myimg/gril4.jpg</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./myimg/gril10.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./myimg/gril12.png</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./myimg/gril15.png</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<p>在文章Front-matter添加cover，首页封面图片添加成功</p>
</li>
<li><p>文章背景图<br>要在markdown文件上面配置img</p>
</li>
</ol>
<h3 id="配置高亮主题"><a href="#配置高亮主题" class="headerlink" title="配置高亮主题"></a>配置高亮主题</h3><p>Butterfly支持6种代码高亮样式,在官方文档可以看样子[<a href="https://butterfly.js.org/posts/4aa8abbe/]">https://butterfly.js.org/posts/4aa8abbe/]</a><br>我选的是MacOS风格</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_blocks:</span></span><br><span class="line">  <span class="comment"># Code block theme: darker / pale night / light / ocean / false</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">macStyle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Code block height limit (unit: px)</span></span><br><span class="line">  <span class="attr">height_limit:</span> <span class="literal">false</span> <span class="comment">#设置每段代码高度在一定高度</span></span><br><span class="line">  <span class="attr">word_wrap:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="配置代码块"><a href="#配置代码块" class="headerlink" title="配置代码块"></a>配置代码块</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">code_blocks:</span></span><br><span class="line">  <span class="comment"># Code block theme: darker / pale night / light / ocean / false</span></span><br><span class="line">  <span class="attr">theme:</span>  <span class="literal">false</span></span><br><span class="line">  <span class="attr">macStyle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Code block height limit (unit: px)</span></span><br><span class="line">  <span class="attr">height_limit:</span> <span class="number">230</span> <span class="comment">#设置每块代码高度在一定高度，单位px，超过部分点一下才展示</span></span><br><span class="line">  <span class="attr">word_wrap:</span> <span class="literal">false</span> <span class="comment">#当代码很长时会有横向滚动条，设置为false有滚动条</span></span><br><span class="line">  <span class="comment">#不想要滚动条设true，那么此时还要设置两个line_number: false，这样一行太多会自动换下一行</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Toolbar</span></span><br><span class="line">  <span class="attr">copy:</span> <span class="literal">true</span>  <span class="comment">#代码块是否有复制</span></span><br><span class="line">  <span class="attr">language:</span> <span class="literal">true</span> <span class="comment">#代码语言是否展示</span></span><br><span class="line">  <span class="comment"># true: shrink the code blocks | false: expand the code blocks | none: expand code blocks and hide the button</span></span><br><span class="line">  <span class="attr">shrink:</span> <span class="literal">false</span>  <span class="comment">#代码是否折叠（折叠的话点开才能看到代码块）</span></span><br><span class="line">  <span class="attr">fullpage:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h3 id="文展简介展示"><a href="#文展简介展示" class="headerlink" title="文展简介展示"></a>文展简介展示</h3><p>找到下面这部分内容，有四种模式，这里选择第二种both<br>这样配置之后，如果那你的文章有写description那么会展示这部分内容，如果没有写那么会自动从你的文章中提取五百个字符作为内容简洁</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Display the article introduction on homepage</span></span><br><span class="line"><span class="comment"># 1: description</span></span><br><span class="line"><span class="comment"># 2: both (if the description exists, it will show description, or show the auto_excerpt)</span></span><br><span class="line"><span class="comment"># 3: auto_excerpt (default)</span></span><br><span class="line"><span class="comment"># false: do not show the article introduction</span></span><br><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># If you set method to 2 or 3, the length need to config</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span></span><br></pre></td></tr></table></figure>
<h3 id="右侧个人信息展示卡片"><a href="#右侧个人信息展示卡片" class="headerlink" title="右侧个人信息展示卡片"></a>右侧个人信息展示卡片</h3><p>_config.butterfly.yml文件下的social部分<br>这些图片在官方文档（三）-社交图标里面可以选</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#没有找到Gitee的标签</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/Nie7-Melon</span> <span class="string">||</span> <span class="string">Github</span> <span class="string">||</span> <span class="string">&#x27;#24292e&#x27;</span></span><br><span class="line">  <span class="attr">fa-solid fa-house:</span> <span class="string">https://gitee.com/melon-nie</span> <span class="string">||</span> <span class="string">Gitee</span> <span class="string">||</span> <span class="string">&#x27;#4a7dbe&#x27;</span></span><br><span class="line">  <span class="comment">#fas fa-envelope: mailto:xxxxxx@gmail.com || Email</span></span><br><span class="line"></span><br><span class="line"><span class="string">Emai1</span></span><br></pre></td></tr></table></figure>
<h3 id="文章"><a href="#文章" class="headerlink" title="文章"></a>文章</h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="comment"># Home Page</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="comment"># Choose: created / updated / both 原created </span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> </span><br><span class="line">    <span class="comment"># Choose: date / relative 原date</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> </span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment">#原false 主页是否显示标签</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment">#显示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="comment"># Choose: left / center</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">left</span></span><br><span class="line">    <span class="comment"># Choose: created / updated / both</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># Choose: date / relative</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="启动配置"><a href="#启动配置" class="headerlink" title="启动配置"></a>启动配置</h2><p>由于每次都hexo cl hexo g hexo d或s有些麻烦，于是再package.json文件中进行配置</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="comment">//原来是</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="comment">//修改为</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp;&amp; hexo generate &amp;&amp; hexo server&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<h1 id="进阶美化"><a href="#进阶美化" class="headerlink" title="进阶美化"></a>进阶美化</h1><h2 id="在页面上显示系列文章"><a href="#在页面上显示系列文章" class="headerlink" title="在页面上显示系列文章"></a>在页面上显示系列文章</h2><p>参考来源<a href="https://www.cnblogs.com/an-shiguang/p/18269048#_label3_0_1_2">时光的butterfly主题美化文章</a><br>开启之前文章右侧只显示最新文章开启后显示系列文章<br>在文章的 front-matter 上添加参数 series，并给与一个标识<br>如果不写 series 标识，则默认为你使用此标签外挂所在的文章的 series 标识</p>
<h2 id="评论配置-Twikoo-MongoDB-Vercel"><a href="#评论配置-Twikoo-MongoDB-Vercel" class="headerlink" title="评论配置 Twikoo+MongoDB+Vercel"></a>评论配置 Twikoo+MongoDB+Vercel</h2><p>想给你的hexo+butterfly主题添加文章评论功能，又不想花钱租服务器，那么Twikoo+MongoDB+Vercel这个方法是最棒的选择。<br>名字长一点，看起来绕一点，但是跟着大佬分享的带做笔记还是很轻松的。<br>注意中间不要出错！否则后续排查改正很痛苦！<br>下面是我觉得写的很详细的资料，和使用资料出现的问题和改正，希望大家少走弯路，不要踩我踩过的坑</p>
<h3 id="Twikoo部署参考资料"><a href="#Twikoo部署参考资料" class="headerlink" title="Twikoo部署参考资料"></a>Twikoo部署参考资料</h3><p><a href="https://twikoo.js.org/quick-start.html">Twikoo官方文档</a><br><a href="https://butterfly.js.org/posts/ceeb73f/#%E8%A9%95%E8%AB%96">butterfly主题配置Twikoo文档</a><br>我的评论布置主要参考夜梦星尘的博客+B站的教学视频，前面两个官方文档我感觉在互相套娃（A让我看B，B让我看A），看了半天没有看明白到底该怎么做<br>看找到了夜梦星尘的博客，跟着完成了80%，又跟着B站视频修改完成最后的20%，非常感谢两位。<br><strong>如果你正准备用这个方法部署，建议你先看B站木鱼的视频教程，把用户名和密码配置好，再跟着夜梦星尘的博客一步一步来，祝你成功</strong><br>&#x3D;&#x3D;推荐参考：&#x3D;&#x3D;<br><a href="https://www.bilibili.com/video/BV1414y1r7bS/?share_source=copy_web&vd_source=7f88ea4ee6a402338b0a4e09fbb81750">B站木鱼木诶视频教程</a><br><a href="https://tech.yemengstar.com/vercel-twikoo-comment-your-hexo/">夜梦星尘的博客</a></p>
<p>但是要注意，<strong>夜梦博客前面没有设置账号和密码的步骤</strong>，导致我后面一直连接失败，最后找到B站这位UP的部署视频，跟着他把账号密码设置后重新部署，并要把前面失败的部署删掉！！，删删改改终于成功了。<br>如果你也遇到了密钥错误，或者envId点进去显示失败，请看下面：</p>
<h3 id="评论踩坑修改–密钥错误"><a href="#评论踩坑修改–密钥错误" class="headerlink" title="评论踩坑修改–密钥错误"></a>评论踩坑修改–密钥错误</h3><p>我开始跟着夜梦博客做，在账号出密钥页面的样子是这样的：右下角密钥的账号是乱码<br><img src="/postImgs/myblog/pl01.png" alt="错误的密钥"><br>此时要找到设置账号密码的地方，设置好自己的，在这里：<br><img src="/postImgs/myblog/pl02.png" alt="设置帐号密码"><br>设置完后，让他重新生成密钥，可以看到这次的密钥账号是你刚才自己输入的，把这个密钥的密码部分改成设置的，这个就是才是正确的<br><img src="/postImgs/myblog/pl03.png" alt="正确的密钥"><br>现在要重新修改第一次设置的密钥，把错的删掉换成新的，在这里修改：<br><img src="/postImgs/myblog/pl04.jpg" alt="正确的密钥"><br>重新部署，会看到令人心动的成功提示：<br><img src="/postImgs/myblog/pl04.png" alt="正确的密钥"></p>
<h3 id="评论踩坑修改–评论显示undefined"><a href="#评论踩坑修改–评论显示undefined" class="headerlink" title="评论踩坑修改–评论显示undefined"></a>评论踩坑修改–评论显示undefined</h3><p>虽然修改后现实部署成功了，但是这里点进<strong>envId</strong>会发现现实还是部署失败，用这个envid完成后续博客配置的结果是评论发不出来显示undefined<br><strong>解决办法：删除之前没用的部署</strong><br>我在修改正确的密钥后，每次新部署都会是成功，但是找到envId点进去又是失败，最后发现&#x3D;&#x3D;在部署前要把之前配的、旧的、没用的部署彻底删掉，只留下最新的部署，然后重新部署，这次envId点进去也是部署成功！&#x3D;&#x3D;<br>最后重新推送一下博客，测试评论功能，成功啦！<br><img src="/postImgs/myblog/pl05.png" alt="正确的密钥"></p>
<h2 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h2><p>配置参考：butterfly主题官方文档，和<a href="https://www.cnblogs.com/Code-Rain/p/16905966.html">博客园CodeRain的文章</a><br>先安装插件<code>npm install hexo-generator-search --save</code><br>成功后，每次重新部署会自动生成search.<br>xml文件。有的博客说要下载模板放进来，这里我没有操作，用的最简单方式成功配置：<br>_config.yml文件</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#search</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># post:文章范围、page:页面范围、all:覆盖所有</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span> <span class="comment"># 内容是否包含每一篇文章的全部内容</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="comment">#template: ./search.xml # ./search.xml 指定定制的XML模板 </span></span><br></pre></td></tr></table></figure>
<p>_config.butterfly.yml文件</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="comment"># Choose: algolia_search / local_search / docsearch</span></span><br><span class="line">    <span class="comment"># 如果不需要搜索功能，保持为空</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">local_search</span></span><br><span class="line">  <span class="attr">placeholder:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Algolia Search</span></span><br><span class="line">  <span class="attr">algolia_search:</span></span><br><span class="line">    <span class="comment"># 每页搜索结果数量</span></span><br><span class="line">    <span class="attr">hitsPerPage:</span> <span class="number">6</span></span><br><span class="line"></span><br><span class="line"> <span class="comment"># 本地搜索</span></span><br><span class="line">  <span class="attr">local_search:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 页面加载时预加载搜索数据</span></span><br><span class="line">    <span class="comment"># 预加载，开启后，进入网页后会自动加载搜索文件。 </span></span><br><span class="line">    <span class="comment">#关闭时，只有点击搜索按钮后，才会加载搜索文件</span></span><br><span class="line">    <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 匹配的文章结果，默认显示最开始的 1 段结果</span></span><br><span class="line">    <span class="comment"># 每篇文章显示的顶部 n 个搜索结果，设置为 -1 显示所有结果</span></span><br><span class="line">    <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># 将 html 字符串解码为可读字符串</span></span><br><span class="line">    <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 搜索文件的 CDN 地址（默认使用的本地链接）</span></span><br><span class="line">    <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure>
<h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><p>有些小缺点：</p>
<ol>
<li>刚进入页面时点击搜索没反应，需要稍等一小会儿</li>
<li>不适合大量文章的博客<br>如果以后文章太多，本地搜索生成的文件会变大，可能会导致加载缓慢，解决这个问题，很多推荐使用algolia搜索<br>目前我的文章较少，本地搜索足够用，后续文章变多时会改为使用algolia搜索</li>
</ol>
]]></content>
      <categories>
        <category>博客成长</category>
      </categories>
      <tags>
        <tag>博客完善</tag>
      </tags>
  </entry>
  <entry>
    <title>jest-UT</title>
    <url>/2025/08/12/49-jestUT/</url>
    <content><![CDATA[<h1 id="jest（写UT总结版）"><a href="#jest（写UT总结版）" class="headerlink" title="jest（写UT总结版）"></a>jest（写UT总结版）</h1><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#运行生成测试报告文件--报告在coverage/report/父组件/子组件/index.tsx.html</span></span><br><span class="line">npm run <span class="built_in">test</span> </span><br><span class="line"><span class="comment"># 运行测试监听</span></span><br><span class="line">npm run <span class="built_in">test</span>:watch </span><br><span class="line"><span class="comment"># 然后输入w p 当前文件所在文件夹-&gt;只监听这一个</span></span><br><span class="line"><span class="comment"># 删除整个文件夹</span></span><br><span class="line"><span class="comment"># 重新生成组件时，每个的报告也覆盖进来</span></span><br><span class="line"><span class="built_in">rm</span> -rf coverage/ </span><br></pre></td></tr></table></figure>
<h2 id="核心步骤"><a href="#核心步骤" class="headerlink" title="核心步骤"></a>核心步骤</h2><p>导入组件-&gt;describe() -&gt;<code>&lt;router&gt;&lt;组件/&gt;&lt;/router&gt;</code>（旧的，现在路由改了不用这个方法）<br>测试页面初始化;<br>点击页面-&gt;浏览器找到用到了哪些接口-&gt;看路径-&gt;复制路径代码找接口-&gt;把接口放进导入到 jest 文件<br>模拟接口要传的参数-&gt;组件页面中找接口-&gt;找接口的每一个传参;<br>如果是页面参数-&gt;不管<br>如果是缓存参数-&gt;找它的 store-&gt;把 store 定义的参数放进 jest-&gt;如果是必须有的模拟一个值<br>看接口的返回值-&gt;F12 找返回值(可能有一堆)-&gt;回到代码看-&gt;必须的写进入，非必须的不管它 </p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>传给接口的数据：缓存中的数据模拟，页面的数据不需要模拟 </li>
<li>注意前置条件的模拟 </li>
<li>解密的数据模拟的时候要加密 </li>
<li>如果是标签组件，每个标签页一个子组件，只有父组件有路由，测试时<code>&lt;router&gt;&lt;包裹父组件&gt;&lt;/router&gt;</code>，因为子组件没有自己的路由，所以能触发到该子组件 Tab 的条件也要写进来，要赋值(判断值-&gt;走到该子组件) </li>
<li>有些方法用到的接口不知道返回数据的格式&#x2F;必填项，去用到数据的地方找，比如返回给 Table 数据的地方去看 Table </li>
<li>看对返回数据是否进行处理-&gt;判断返回[ ]或{ } </li>
<li>找接口，路径传参参考。正常路径传参有 Payload，路径传参没有这一块儿 </li>
<li>Table 测行，表头算一行，如果没数据，no data 也算一行，肯定有两行，所以给三行数据测三行</li>
</ul>
<h2 id="准备-导入-mock-接口-模拟返回-模拟缓存传参"><a href="#准备-导入-mock-接口-模拟返回-模拟缓存传参" class="headerlink" title="准备-&gt;导入-&gt;mock 接口-&gt;模拟返回-&gt;模拟缓存传参"></a>准备-&gt;导入-&gt;mock 接口-&gt;模拟返回-&gt;模拟缓存传参</h2><h3 id="初始化接口"><a href="#初始化接口" class="headerlink" title="初始化接口"></a>初始化接口</h3><p>初始化接口全部写在 <code>beforeEach(()=&gt;&#123;&#125;)</code> 里面<br>接口.mockClear() 先清空接口返回的东西<br>接口.mockReturnValue() 模拟<strong>返回的数据</strong>，非必须的写格式，必须的写出来给值<br>form 的值从哪儿来，注意 name </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">api.<span class="title function_">mockClear</span>();</span><br><span class="line">api.<span class="title function_">mockReturnValue</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(&#123; <span class="attr">status</span>: <span class="string">&quot;success&quot;</span>, <span class="attr">data</span>: [] &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="常用导入"><a href="#常用导入" class="headerlink" title="常用导入"></a>常用导入</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;@/api&#x27;</span>)</span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;@/api/common&#x27;</span>)</span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;@/api/proposal&#x27;</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="property">error</span> = jest.<span class="title function_">fn</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//导入utils中所有的，重写handleAutoDownload</span></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;@/utils&#x27;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  ...jest.<span class="title function_">requireActual</span>(<span class="string">&#x27;@/utils&#x27;</span>),</span><br><span class="line">  <span class="attr">handleAutoDownload</span>: jest.<span class="title function_">fn</span>(<span class="function">() =&gt;</span></span><br><span class="line">    <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123; <span class="attr">status</span>: <span class="number">200</span>, <span class="attr">message</span>: <span class="string">&#x27;Download successfully!&#x27;</span> &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;react-router-dom&#x27;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  ...jest.<span class="title function_">requireActual</span>(<span class="string">&#x27;react-router-dom&#x27;</span>),</span><br><span class="line">  <span class="attr">useLocation</span>: jest.<span class="title function_">fn</span>()</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;sockjs-client/dist/sockjs.min.js&#x27;</span>, <span class="function">() =&gt;</span></span><br><span class="line">  jest.<span class="title function_">fn</span>().<span class="title function_">mockImplementation</span>(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">onopen</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">onmessage</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">onclose</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">send</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">close</span>: jest.<span class="title function_">fn</span>()</span><br><span class="line">  &#125;))</span><br><span class="line">)</span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;stompjs&#x27;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">over</span>: jest.<span class="title function_">fn</span>(<span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">connect</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">subscribe</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">    <span class="attr">disconnect</span>: jest.<span class="title function_">fn</span>()</span><br><span class="line">  &#125;))</span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line"><span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  jest.<span class="title function_">clearAllTimers</span>()</span><br><span class="line">  jest.<span class="title function_">useRealTimers</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="mock-文件返回"><a href="#mock-文件返回" class="headerlink" title="mock 文件返回"></a>mock 文件返回</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">useLocation.<span class="title function_">mockReturnValue</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">from</span>: <span class="string">&#x27;&#x27;</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="title class_">ExportCostSummary</span>.<span class="title function_">mockReturnValue</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(&#123;</span><br><span class="line">      <span class="attr">blob</span>: <span class="function">() =&gt;</span></span><br><span class="line">        <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Blob</span>([<span class="string">&#x27;test content&#x27;</span>], &#123; <span class="attr">type</span>: <span class="string">&#x27;text/plain&#x27;</span> &#125;)</span><br><span class="line">        ),</span><br><span class="line">      <span class="attr">fileName</span>: <span class="string">&#x27;test Name&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="新版导入组件"><a href="#新版导入组件" class="headerlink" title="新版导入组件"></a>新版导入组件</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">renderWithProviders</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">SwiftXProcess</span> /&gt;</span></span>, &#123;</span><br><span class="line">  <span class="attr">routePath</span>: <span class="string">&#x27;/case-information&#x27;</span>,</span><br><span class="line">  <span class="attr">preloadedState</span>: &#123;</span><br><span class="line">    <span class="attr">pageInfo</span>: &#123; <span class="attr">caseId</span>: <span class="string">&#x27;196&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">userInformation</span>: &#123;</span><br><span class="line">      <span class="attr">rolePermissions</span>: <span class="title function_">encryptAES</span>([]),</span><br><span class="line">      <span class="attr">userCode</span>: <span class="title function_">encryptAES</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">role</span>: &#123;</span><br><span class="line">      <span class="attr">currentRole</span>: &#123;</span><br><span class="line">        <span class="attr">roleName</span>: <span class="string">&#x27;AE&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="获取被测组件"><a href="#获取被测组件" class="headerlink" title="获取被测组件"></a>获取被测组件</h2><ul>
<li>在代码中给要测的组件加 data-testid&#x3D;’xxx’ -&gt; 获取 screen.getByTestId(‘xxx’)</li>
<li>获取操作后渲染的 DOM 用 findBy，页面上原本的用 getBy</li>
<li>jest findByText 的底层运用的是 textContent 默认行为是去掉文字首尾空格，如果测试文字带有空格结尾可能导致无法匹配，从而引发报错 如果一定要处理空格结尾数据，normalizer 自定义配置</li>
<li></li>
<li>如果 data-testid 给组件加不上，可以这样</li>
<li><ul>
<li><code>render=&#123;(item) =&gt; &lt;span data-testid=&quot;GL-existing-modal-transfer&quot;&gt;&#123;item.label&#125;&lt;/span&gt;&#125;</code></li>
</ul>
</li>
<li>如果有 label -&gt; screen.getByText(‘hello-label’)</li>
<li>如果只有 role 和 classname，同时同 role 的按钮有多个 -&gt; getAllByRole</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AllClickBtn</span> = screen.<span class="title function_">getAllByRole</span>(<span class="string">&quot;img&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> clickBtn = <span class="title class_">AllClickBtn</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">item</span>) =&gt;</span></span><br><span class="line">  item.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;anticon-right&quot;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>Button 的 display 属性为 false 那么按钮可点击，为 true 禁用</p>
<h3 id="常用获取-API"><a href="#常用获取-API" class="headerlink" title="常用获取 API"></a>常用获取 API</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">DatePicker</span> = screen.<span class="title function_">getByTestId</span>(<span class="string">&quot;DatePicker&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> formItemElement = <span class="title function_">within</span>(</span><br><span class="line">  screen.<span class="title function_">getByTestId</span>(<span class="string">&quot;combined-underwriting&quot;</span>)</span><br><span class="line">).<span class="title function_">getByRole</span>(<span class="string">&quot;combobox&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> debounceSelectInput = <span class="title function_">within</span>(debounceSelect).<span class="title function_">getByRole</span>(<span class="string">&quot;combobox&quot;</span>); <span class="comment">// 搜索选择器</span></span><br><span class="line"><span class="keyword">const</span> debounceSelectInput = <span class="title function_">within</span>(debounceSelect).<span class="title function_">getByRole</span>(<span class="string">&quot;combobox&quot;</span>); <span class="comment">// input的type属性-&gt;getByRole(&#x27;combobox&#x27;)</span></span><br><span class="line"><span class="keyword">const</span> selectOneDom = screen.<span class="title function_">getByText</span>(<span class="string">&quot;Selected Dom Label&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> selectOneOption = <span class="keyword">await</span> screen.<span class="title function_">findByText</span>(<span class="string">&quot;Type Option Label&quot;</span>); <span class="comment">// 获取操作后渲染的DOM用find，比如菜单选项的某一项</span></span><br><span class="line"><span class="keyword">const</span> optionsElement = screen.<span class="title function_">getByRole</span>(<span class="string">&quot;listbox&quot;</span>); <span class="comment">// 选项的type-&gt;getByRole(&#x27;listbox&#x27;)</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AllClickBtn</span> = screen.<span class="title function_">getAllByRole</span>(<span class="string">&quot;img&quot;</span>); <span class="comment">// 图片&amp;图标的type-&gt;getByRole(&#x27;img&#x27;)</span></span><br></pre></td></tr></table></figure>
<h2 id="判断存在-判断是否可点击"><a href="#判断存在-判断是否可点击" class="headerlink" title="判断存在 &amp; 判断是否可点击"></a>判断存在 &amp; 判断是否可点击</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 断言判断是否存在</span></span><br><span class="line"><span class="title function_">expect</span>(screen.<span class="title function_">getByTestId</span>(<span class="string">&quot;dashboard-component&quot;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line"><span class="comment">// 分开写清楚</span></span><br><span class="line"><span class="keyword">const</span> caseNoElement = screen.<span class="title function_">getByTestId</span>(<span class="string">&quot;case-no-div&quot;</span>);</span><br><span class="line"><span class="title function_">expect</span>(caseNoElement).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line"><span class="comment">// 是否可点击</span></span><br><span class="line"><span class="title function_">expect</span>(exportCostSummaryBtn).<span class="property">not</span>.<span class="title function_">toBeDisabled</span>();</span><br><span class="line"><span class="comment">// Table判断行数，表头算一行，如果没数据，no data也算一行，肯定有两行，所以给三行数据测三行</span></span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(screen.<span class="title function_">getAllByRole</span>(<span class="string">&quot;row&quot;</span>)).<span class="title function_">toHaveLength</span>(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="触发组件"><a href="#触发组件" class="headerlink" title="触发组件"></a>触发组件</h2><ul>
<li>输入 &#x2F; 点击事件: fireEvent.动作(操作的DOM)</li>
<li>输入 &#x2F; 点击事件要用 await act(()&#x3D;&gt;{放进来})</li>
<li>失焦事件: fireEvent.blur(inputEvent);</li>
<li>触发回车键事件: fireEvent.keyDown(input, { key: ‘Enter’, code: ‘Enter’, keyCode: 13, which: 13 });</li>
<li>如果触发失败 -&gt; 打印组件 -&gt; 看有什么绑定的的方法 -&gt; 用 click&amp;mousedown &amp;&amp; 用 change&amp;input<blockquote>
<p>ant design 组件的 select 组件无法被 click 触发，可以被 mouseDown 触发，原因:<br>它不是真正的 select 组件，在页面上是 div，div 上没有绑定 click，有 mouseDown 触发事件</p>
</blockquote>
</li>
</ul>
<h3 id="常用的触发-API"><a href="#常用的触发-API" class="headerlink" title="常用的触发 API"></a>常用的触发 API</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">fireEvent.<span class="title function_">click</span>(clickBtn);</span><br><span class="line">fireEvent.<span class="title function_">mouseDown</span>(debounceSelectInput);</span><br><span class="line">fireEvent.<span class="title function_">input</span>(debounceSelectInput, &#123; <span class="attr">target</span>: &#123; <span class="attr">value</span>: <span class="string">&quot;Catherine&quot;</span> &#125; &#125;);</span><br><span class="line">fireEvent.<span class="title function_">keyDown</span>(enterInput, &#123; <span class="attr">key</span>: <span class="string">&#x27;Enter&#x27;</span>, <span class="attr">code</span>: <span class="string">&#x27;Enter&#x27;</span>, <span class="attr">keyCode</span>: <span class="number">13</span>, <span class="attr">which</span>: <span class="number">13</span> &#125;);</span><br><span class="line">fireEvent.<span class="title function_">focus</span>(targetDateCSDatePicker);s</span><br><span class="line">fireEvent.<span class="title function_">change</span>(targetDateCSDatePicker, &#123; <span class="attr">target</span>: &#123; <span class="attr">value</span>: <span class="string">&quot;08/20/2025&quot;</span> &#125; &#125;);</span><br><span class="line">fireEvent.<span class="title function_">blur</span>(targetDateCSDatePicker);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="组件-API"><a href="#组件-API" class="headerlink" title="组件-&gt;API"></a>组件-&gt;API</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Table测行，表头算一行，如果没数据，no data也算一行，肯定有两行，所以给三行数据测三行</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">GLExistingTable</span> = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;GL-load-existing-table&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">GLRows</span> = <span class="title function_">within</span>(<span class="title class_">GLExistingTable</span>).<span class="title function_">getAllByRole</span>(<span class="string">&#x27;row&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(<span class="title class_">GLRows</span>).<span class="title function_">toHaveLength</span>(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 搜索选择器</span></span><br><span class="line"><span class="keyword">const</span> debounceSelectInput = <span class="title function_">within</span>(debounceSelect).<span class="title function_">getByRole</span>(<span class="string">&#x27;combobox&#x27;</span>)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">mouseDown</span>(debounceSelectInput)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">input</span>(debounceSelectInput, &#123; <span class="attr">target</span>: &#123; <span class="attr">value</span>: <span class="string">&#x27;Catherine&#x27;</span> &#125; &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> selectedOption = <span class="keyword">await</span> screen.<span class="title function_">findByText</span>(<span class="string">&#x27;Catherine Nie&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(selectedOption).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(selectedOption)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个多选框，用数组拿到所有框，再找要拿的</span></span><br><span class="line"><span class="keyword">const</span> selectedOptions = <span class="title function_">within</span>(screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;channel-table&#x27;</span>)).<span class="title function_">getAllByRole</span>(<span class="string">&#x27;checkbox&#x27;</span>)s</span><br><span class="line"><span class="keyword">const</span> selectOptionInput = selectedOptions[<span class="number">1</span>]</span><br><span class="line"><span class="title function_">expect</span>(targetDateCSDatePicker).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line"><span class="title function_">expect</span>(targetDateCSDatePicker).<span class="property">not</span>.<span class="title function_">toBeDisabled</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期选择器最佳办法---找到日期选择器组件</span></span><br><span class="line"><span class="keyword">const</span> effectiveDateElement = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;effectiveDatePicker&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(effectiveDateElement).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line"><span class="comment">// 点开组件，展开日期</span></span><br><span class="line">fireEvent.<span class="title function_">click</span>(effectiveDateElement)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 拿到日期选择部分</span></span><br><span class="line">  <span class="title function_">expect</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ant-picker-panel&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 拿到目前组件页展示的所有的单个日期</span></span><br><span class="line"><span class="keyword">const</span> cells = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.ant-picker-cell-inner&#x27;</span>)</span><br><span class="line"><span class="comment">// 找到要选的日期，点他</span></span><br><span class="line"><span class="keyword">const</span> targetCell = <span class="title class_">Array</span>.<span class="title function_">from</span>(cells).<span class="title function_">find</span>(</span><br><span class="line">  <span class="function">(<span class="params">cell</span>) =&gt;</span> cell.<span class="property">textContent</span> === <span class="string">&#x27;12&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(targetCell)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个时间选择器，上面操作的是第一个，现在我要找到第二个</span></span><br><span class="line"><span class="keyword">const</span> expiredDatePickerElement = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;expiredDatePickerElement&#x27;</span>)</span><br><span class="line"><span class="comment">// 刚才只点了一个日期选择器，所以页面上只生成了一个包含&#x27;.ant-picker-panel&#x27;的div</span></span><br><span class="line"><span class="comment">// 现在点第二个日期选择器，会生成一个新的包含&#x27;.ant-picker-panel&#x27;的div</span></span><br><span class="line"><span class="title function_">expect</span>(expiredDatePickerElement).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">fireEvent.<span class="title function_">click</span>(expiredDatePickerElement)</span><br><span class="line"><span class="comment">// 所以这次要选中所有的&#x27;.ant-picker-panel&#x27;，再通过数组拿到第二个，操作它，后面的和之前一样</span></span><br><span class="line"><span class="keyword">const</span> panels = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.ant-picker-panel&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> secondPanel = panels[<span class="number">1</span>]</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ant-picker-panel&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> cellsInSecondPanel = secondPanel.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.ant-picker-cell-inner&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> expiredDatecell = <span class="title class_">Array</span>.<span class="title function_">from</span>(cellsInSecondPanel).<span class="title function_">find</span>(</span><br><span class="line">  <span class="function">(<span class="params">cell</span>) =&gt;</span> cell.<span class="property">textContent</span> === <span class="string">&#x27;15&#x27;</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(expiredDatecell)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期选择器，用focus-change-blur来做时好时不好</span></span><br><span class="line"><span class="keyword">const</span> effectiveDateElement = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;effectiveDatePicker&#x27;</span>)</span><br><span class="line"><span class="title function_">expect</span>(effectiveDateElement).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">focus</span>(effectiveDateElement)</span><br><span class="line">  fireEvent.<span class="title function_">change</span>(effectiveDateElement, &#123; <span class="attr">target</span>: &#123; <span class="attr">value</span>: <span class="string">&#x27;08/12/2025&#x27;</span> &#125; &#125;)</span><br><span class="line">  fireEvent.<span class="title function_">blur</span>(effectiveDateElement)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下载文件</span></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;@/utils&#x27;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">handleAutoDownload</span>: jest.<span class="title function_">fn</span>(<span class="function">() =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(&#123; <span class="attr">status</span>: <span class="number">200</span>, <span class="attr">message</span>: <span class="string">&#x27;Download successfully!&#x27;</span> &#125;))</span><br><span class="line">&#125;));</span><br><span class="line"><span class="title class_">DownloadReportManagementFile</span>.<span class="title function_">mockClear</span>()</span><br><span class="line"><span class="title class_">DownloadReportManagementFile</span>.<span class="title function_">mockReturnValue</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(&#123;</span><br><span class="line">      <span class="attr">blob</span>: <span class="function">() =&gt;</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([<span class="string">&#x27;test content&#x27;</span>], &#123; <span class="attr">type</span>: <span class="string">&#x27;text/plain&#x27;</span> &#125;)),</span><br><span class="line">      <span class="attr">fileName</span>: <span class="string">&#x27;test Name&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 上传文件</span></span><br><span class="line"><span class="keyword">const</span> uploadFileInput = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;upload-pdf&#x27;</span>)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(uploadFileInput).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">  <span class="title function_">expect</span>(uploadFileInput).<span class="property">not</span>.<span class="title function_">toBeDisabled</span>()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mockTestFile = <span class="keyword">new</span> <span class="title class_">File</span>([<span class="string">&#x27;mock pdf content&#x27;</span>], <span class="string">&#x27;test.pdf&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;application/pdf&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  fireEvent.<span class="title function_">change</span>(uploadFileInput, &#123;</span><br><span class="line">    <span class="attr">target</span>: &#123; <span class="attr">files</span>: [mockTestFile] &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">expect</span>(screen.<span class="title function_">findByText</span>(<span class="string">&#x27;test.pdf&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">  <span class="comment">// 如果有其他按钮可显示</span></span><br><span class="line">  <span class="keyword">const</span> deletePdfBtn = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;delete-pdf-btn&#x27;</span>)</span><br><span class="line">  <span class="title function_">expect</span>(deletePdfBtn).<span class="title function_">toBeInTheDocument</span>()</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(deletePdfBtn)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="报错-警告"><a href="#报错-警告" class="headerlink" title="报错 &amp; 警告"></a>报错 &amp; 警告</h2><ul>
<li><code>TypeError: Expected container to be an Element, a Document or a DocumentFragment but got string.</code></li>
<li><code>The given element does not have a value setter</code></li>
<li>-可能是 testid 没有被加到对应组件上，加到了它父亲的 div 上，div 不能直接输入，要找到它下面的 input 再输入</li>
<li><code>Warning: [antd: DatePicker] &#39;popupClassName&#39; is deprecated. Please use &#39;classNames.popup.root&#39; instead.</code></li>
<li>警告: <code>[antd: DatePicker] popupClassName</code> 已弃用。<code>请改用 classNames.popup.root</code></li>
<li><code>Access to XMLHttpRequest at &#39;http://localhost:8990/SWIFTX_COMMON/secure/dropdown/groups&#39; from origin &#39;http://localhost:5005&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.</code></li>
<li><ul>
<li>跨域问题</li>
</ul>
</li>
<li>try-catch 如果走到了 catch，打印 error 看到的不够清晰，继续看，打印 <code>console.log(error.errorFields[0]) </code>可以更准确拿到错误</li>
<li><ul>
<li><code>sconst selectedOption = await screen.findByText(&#39;8008088720 - (0) DUMMY - SHAU KEI WAN BRANCH&#39;, &#123; exact:true, normalizer: (text) =&gt; text &#125;)</code></li>
</ul>
</li>
<li><ul>
<li>如果超时了，可以这样 <code>&#125;, 50000)</code></li>
</ul>
</li>
</ul>
<h1 id="jest语法"><a href="#jest语法" class="headerlink" title="jest语法"></a>jest语法</h1><p>测试用例应遵循 “arrange-act-assert” 模式（准备 - 执行 - 断言）</p>
<h2 id="基础框架"><a href="#基础框架" class="headerlink" title="基础框架"></a>基础框架</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// describe: 创建测试套件，将相关测试分组</span></span><br><span class="line"><span class="title function_">describe</span>(<span class="string">&#x27;CanvasComponent&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// test 或 it: 定义单个测试用例</span></span><br><span class="line">  <span class="title function_">test</span>(<span class="string">&#x27;正确渲染组件及其子元素&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 测试实现...</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 另一种写法 (it 是 test 的别名)</span></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&#x27;能够绘制矩形&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 测试实现...</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="生命周期钩子函数"><a href="#生命周期钩子函数" class="headerlink" title="生命周期钩子函数"></a>生命周期钩子函数</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// beforeAll: 在所有测试运行前执行一次</span></span><br><span class="line"><span class="title function_">beforeAll</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 通常用于全局模拟设置</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全局设置 - 在所有测试前运行&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// beforeEach: 每个测试用例执行前运行，提取测试用例之间的重复初始化代码:</span></span><br><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">CanvasDrawer</span> /&gt;</span></span>);</span><br><span class="line">  foregroundCanvas = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;foreground-canvas&#x27;</span>);</span><br><span class="line">  <span class="comment">// 重置模拟函数状态</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;测试前准备 - 在每个测试前运行&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// afterEach: 在每个测试运行后执行</span></span><br><span class="line"><span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 清理操作</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;测试后清理 - 在每个测试后运行&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// afterAll: 在所有测试运行后执行一次</span></span><br><span class="line"><span class="title function_">afterAll</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 全局清理</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;全局清理 - 在所有测试后运行&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="模拟函数和方法"><a href="#模拟函数和方法" class="headerlink" title="模拟函数和方法(?)"></a>模拟函数和方法(?)</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 模拟整个模块</span></span><br><span class="line">jest.<span class="title function_">mock</span>(<span class="string">&#x27;../path/to/module&#x27;</span>, <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">exportedFunction</span>: jest.<span class="title function_">fn</span>(),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟对象方法</span></span><br><span class="line"><span class="title class_">HTMLCanvasElement</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getContext</span> = jest.<span class="title function_">fn</span>().<span class="title function_">mockImplementation</span>(<span class="function">(<span class="params">type</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&#x27;2d&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">fillRect</span>: jest.<span class="title function_">fn</span>(),       <span class="comment">// 模拟 fillRect 方法</span></span><br><span class="line">      <span class="attr">strokeRect</span>: jest.<span class="title function_">fn</span>(),     <span class="comment">// 模拟 strokeRect 方法</span></span><br><span class="line">      <span class="comment">// 其他方法...</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建模拟函数</span></span><br><span class="line"><span class="keyword">const</span> mockFunction = jest.<span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置模拟函数返回值</span></span><br><span class="line">mockFunction.<span class="title function_">mockReturnValue</span>(<span class="number">42</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置模拟函数实现</span></span><br><span class="line">mockFunction.<span class="title function_">mockImplementation</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重置模拟函数状态</span></span><br><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  mockFunction.<span class="title function_">mockClear</span>(); <span class="comment">// 清除调用记录但保留实现</span></span><br><span class="line">  <span class="comment">// 或者</span></span><br><span class="line">  mockFunction.<span class="title function_">mockReset</span>(); <span class="comment">// 完全重置模拟函数</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="元素获取："><a href="#元素获取：" class="headerlink" title="元素获取："></a>元素获取：</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; render, screen &#125; <span class="keyword">from</span> <span class="string">&#x27;@testing-library/react&#x27;</span>;</span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;元素获取&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 渲染组件到虚拟DOM</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">CanvasComponent</span> /&gt;</span></span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过角色查询单个元素</span></span><br><span class="line">  <span class="keyword">const</span> canvas = screen.<span class="title function_">getByRole</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过角色查询多个元素</span></span><br><span class="line">  <span class="keyword">const</span> canvases = screen.<span class="title function_">getAllByRole</span>(<span class="string">&#x27;canvas&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过文本内容查询</span></span><br><span class="line">  <span class="keyword">const</span> rectButton = screen.<span class="title function_">getByText</span>(<span class="string">&#x27;矩形&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过标签文本查询</span></span><br><span class="line">  <span class="keyword">const</span> colorInput = screen.<span class="title function_">getByLabelText</span>(<span class="string">&#x27;选择颜色&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过占位符查询</span></span><br><span class="line">  <span class="keyword">const</span> textInput = screen.<span class="title function_">getByPlaceholderText</span>(<span class="string">&#x27;输入文本&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过显示值查询</span></span><br><span class="line">  <span class="keyword">const</span> fontSizeInput = screen.<span class="title function_">getByDisplayValue</span>(<span class="string">&#x27;16&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 通过测试ID查询 (推荐用于动态内容)</span></span><br><span class="line">  <span class="keyword">const</span> statusElement = screen.<span class="title function_">getByTestId</span>(<span class="string">&#x27;drawing-status&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 异步查询元素 (等待元素出现)</span></span><br><span class="line">  <span class="keyword">const</span> asyncElement = <span class="keyword">await</span> screen.<span class="title function_">findByText</span>(<span class="string">&#x27;加载完成&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="用户交互"><a href="#用户交互" class="headerlink" title="用户交互"></a>用户交互</h2><blockquote>
<p>userEvent：更贴近真实用户行为的交互模拟<br>fireEvent：更底层的事件触发方法，可传递详细事件参数<br>异步操作需要使用 await 等待完成 </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fireEvent &#125; <span class="keyword">from</span> <span class="string">&#x27;@testing-library/react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;事件模拟示例&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">CanvasComponent</span> /&gt;</span></span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟点击事件</span></span><br><span class="line">  fireEvent.<span class="title function_">click</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;矩形&#x27;</span>));</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟鼠标按下</span></span><br><span class="line">  fireEvent.<span class="title function_">mouseDown</span>(canvasElement, &#123; </span><br><span class="line">    <span class="attr">clientX</span>: <span class="number">100</span>, </span><br><span class="line">    <span class="attr">clientY</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">buttons</span>: <span class="number">1</span> <span class="comment">// 表示左键按下</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟鼠标移动</span></span><br><span class="line">  fireEvent.<span class="title function_">mouseMove</span>(canvasElement, &#123; </span><br><span class="line">    <span class="attr">clientX</span>: <span class="number">200</span>, </span><br><span class="line">    <span class="attr">clientY</span>: <span class="number">200</span>,</span><br><span class="line">    <span class="attr">buttons</span>: <span class="number">1</span></span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟鼠标释放</span></span><br><span class="line">  fireEvent.<span class="title function_">mouseUp</span>(canvasElement);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟右键菜单</span></span><br><span class="line">  fireEvent.<span class="title function_">contextMenu</span>(canvasElement, &#123; <span class="attr">clientX</span>: <span class="number">300</span>, <span class="attr">clientY</span>: <span class="number">300</span> &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟输入变化</span></span><br><span class="line">  fireEvent.<span class="title function_">change</span>(inputElement, &#123; <span class="attr">target</span>: &#123; <span class="attr">value</span>: <span class="string">&#x27;新值&#x27;</span> &#125; &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟键盘事件</span></span><br><span class="line">  fireEvent.<span class="title function_">keyDown</span>(<span class="variable language_">document</span>, &#123; <span class="attr">key</span>: <span class="string">&#x27;Escape&#x27;</span> &#125;);</span><br><span class="line">  fireEvent.<span class="title function_">keyDown</span>(inputElement, &#123; <span class="attr">key</span>: <span class="string">&#x27;Enter&#x27;</span> &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 模拟焦点事件</span></span><br><span class="line">  fireEvent.<span class="title function_">focus</span>(inputElement);</span><br><span class="line">  fireEvent.<span class="title function_">blur</span>(inputElement);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><h3 id="存在断言"><a href="#存在断言" class="headerlink" title="存在断言"></a>存在断言</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 断言元素在文档中存在</span></span><br><span class="line"><span class="title function_">expect</span>(canvas).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言元素不存在</span></span><br><span class="line"><span class="title function_">expect</span>(invisibleElement).<span class="property">not</span>.<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言方法被调用过</span></span><br><span class="line"><span class="title function_">expect</span>(beginPathSpy).<span class="title function_">toHaveBeenCalled</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言方法被调用过特定次数</span></span><br><span class="line"><span class="title function_">expect</span>(strokeSpy).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言方法被调用时使用了特定参数</span></span><br><span class="line"><span class="title function_">expect</span>(rectSpy).<span class="title function_">toHaveBeenCalledWith</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言属性被设置为特定值</span></span><br><span class="line"><span class="title function_">expect</span>(fillStyleSpy).<span class="title function_">toHaveBeenCalledWith</span>(<span class="string">&#x27;#ff0000&#x27;</span>);</span><br><span class="line"></span><br><span class="line"> / 元素包含类名</span><br><span class="line"><span class="title function_">expect</span>(element).<span class="title function_">toHaveClass</span>(<span class="string">&#x27;active&#x27;</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 元素包含特定文本</span></span><br><span class="line"><span class="title function_">expect</span>(element).<span class="title function_">toHaveTextContent</span>(<span class="string">&#x27;绘制中&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言状态值为预期值，值相等 (严格比较)</span></span><br><span class="line"><span class="title function_">expect</span>(canvasRef.<span class="property">current</span>.<span class="property">mode</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;RECT&#x27;</span>);</span><br><span class="line"><span class="title function_">expect</span>(canvasRef.<span class="property">current</span>.<span class="property">isDrawing</span>).<span class="title function_">toBe</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="title function_">expect</span>(value).<span class="title function_">toBe</span>(<span class="number">42</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 对象结构相等 (深度比较)</span></span><br><span class="line"><span class="title function_">expect</span>(obj).<span class="title function_">toEqual</span>(&#123; <span class="attr">x</span>: <span class="number">100</span>, <span class="attr">y</span>: <span class="number">100</span> &#125;);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 断言数值大于某个值</span></span><br><span class="line"><span class="title function_">expect</span>(canvas.<span class="property">width</span>).<span class="title function_">toBeGreaterThan</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 断言字符串包含特定子串</span></span><br><span class="line"><span class="title function_">expect</span>(strokeStyle).<span class="title function_">toContain</span>(<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则匹配</span></span><br><span class="line"><span class="title function_">expect</span>(text).<span class="title function_">toMatch</span>(<span class="regexp">/成功/</span>);</span><br><span class="line">  </span><br><span class="line"><span class="comment">// 错误抛出</span></span><br><span class="line"><span class="title function_">expect</span>(<span class="function">() =&gt;</span> <span class="title function_">errorFunc</span>()).<span class="title function_">toThrow</span>(<span class="string">&#x27;错误信息&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 测试函数前加 async，内部可使用 await</span></span><br><span class="line"><span class="keyword">import</span> &#123; waitFor &#125; <span class="keyword">from</span> <span class="string">&#x27;@testing-library/react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;异步操作测试&#x27;</span>, <span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">CanvasComponent</span> /&gt;</span></span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 触发异步操作</span></span><br><span class="line">  fireEvent.<span class="title function_">click</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;加载数据&#x27;</span>));</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 等待元素出现</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> screen.<span class="title function_">findByText</span>(<span class="string">&#x27;加载完成&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 等待断言成立</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(screen.<span class="title function_">getByText</span>(<span class="string">&#x27;操作成功&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 等待特定条件</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> </span><br><span class="line">    <span class="title function_">expect</span>(mockAPI).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">1</span>)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 使用 resolves/rejects 测试 Promise</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">expect</span>(<span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;成功&#x27;</span>)).<span class="property">resolves</span>.<span class="title function_">toBe</span>(<span class="string">&#x27;成功&#x27;</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">expect</span>(<span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;错误&#x27;</span>)).<span class="property">rejects</span>.<span class="title function_">toMatch</span>(<span class="string">&#x27;错误&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="辅助函数"><a href="#辅助函数" class="headerlink" title="辅助函数"></a>辅助函数</h3><p>提取重复计算逻辑为辅助函数</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">calculateDistance</span> = (<span class="params">x1, y1, x2, y2</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(x2 - x1, <span class="number">2</span>) + <span class="title class_">Math</span>.<span class="title function_">pow</span>(y2 - y1, <span class="number">2</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="测试隔离"><a href="#测试隔离" class="headerlink" title="测试隔离"></a>测试隔离</h3><p>确保每个测试用例都是独立的，避免测试间的副作用传递</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">beforeEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  jest.<span class="title function_">clearAllMocks</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="测试覆盖率增强技巧"><a href="#测试覆盖率增强技巧" class="headerlink" title="测试覆盖率增强技巧"></a>测试覆盖率增强技巧</h3><p>核心思路是：从 “功能点”、”分支条件”、”边界场景” 三个维度度全面覆盖，利用工具定位盲区，结合项目实际逻辑补充测试</p>
<p>测试所有条件分支;测试错误处理;函数覆盖率（工具函数、事件处理函数、钩子函数）;”正常场景” 外的边界情况（如极限值、空值、错误输入）</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;覆盖率增强&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 测试所有条件分支</span></span><br><span class="line">  <span class="comment">// if-else, switch-case 的所有分支</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 测试循环边界</span></span><br><span class="line">  <span class="comment">// 0次迭代、1次迭代、多次迭代</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 测试错误处理</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// 可能抛出错误的操作</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">// 验证错误处理</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 测试组件卸载</span></span><br><span class="line">  <span class="keyword">const</span> &#123; unmount &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">CanvasComponent</span> /&gt;</span></span>);</span><br><span class="line">  <span class="title function_">unmount</span>();</span><br><span class="line">  <span class="comment">// 验证清理操作</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意事项：避免 “为覆盖率而测试”<br>提高覆盖率的同时，需避免盲目追求数字而编写写无意义的测试：<br>不测试明显不会逻辑的代码（如简单的 getter&#x2F;setter）<br>不重复测试相同逻辑（如多个测试用例覆盖同一分支）<br>优先覆盖核心逻辑（如绘图核心逻辑），再非边缘的辅助代码</p>
</blockquote>
<h2 id="间谍（Spies）与模拟（Mocks）"><a href="#间谍（Spies）与模拟（Mocks）" class="headerlink" title="间谍（Spies）与模拟（Mocks）"></a>间谍（Spies）与模拟（Mocks）</h2><h2 id="理解："><a href="#理解：" class="headerlink" title="理解："></a>理解：</h2><ol>
<li>间谍（Spies）是 Jest 提供的一种特殊函数，用于监视其他函数的调用情况：<br>记录函数被调用的次数<br>记录函数被调用时的参数<br>默认情况下不影响原函数的正常执行</li>
<li>模拟（Mocks）是 Jest 提供的一种 “假函数”，用于替代真实函数：<br>完全替换原函数，返回预设值<br>记录自身被调用的情况<br>用于隔离测试，避免依赖外部资源</li>
</ol>
<h3 id="间谍与模拟的区别"><a href="#间谍与模拟的区别" class="headerlink" title="间谍与模拟的区别"></a>间谍与模拟的区别</h3><p>间谍：只监视，不改变原函数行为（监控 Canvas 上下文方法调用）<br>模拟：完全替换原函数，可自定义返回值（较少使用，除非需要替换复杂逻辑）</p>
<h3 id="为什么在-Canvas-测试中需要它们"><a href="#为什么在-Canvas-测试中需要它们" class="headerlink" title="为什么在 Canvas 测试中需要它们"></a>为什么在 Canvas 测试中需要它们</h3><p>在Canvas 绘图应用中，无法直接 “看到” 绘制的图形，但可以通过监视Canvas上下文的方法调用情况，来验证绘图功能是否正常工作</p>
<blockquote>
<p>例如，当调用 context.fillRect() 时，间谍可以告诉我们：<br>这个方法是否被调用了；调用时使用了哪些参数（位置、大小等）；调用了多少次</p>
</blockquote>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ol>
<li>创建间谍<br><code>const fillRectSpy = jest.spyOn(ctx, &#39;fillRect&#39;);</code><blockquote>
<p>ctx 是你获取的 Canvas 2D 上下文<br>‘fillRect’ 是你要监视的方法名<br>这个操作不会改变 fillRect 的原有功能，只是增加了监控</p>
</blockquote>
</li>
<li>断言间谍记录<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 验证方法被调用过</span></span><br><span class="line"><span class="title function_">expect</span>(fillRectSpy).<span class="title function_">toHaveBeenCalled</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证方法被调用了特定次数</span></span><br><span class="line"><span class="title function_">expect</span>(fillRectSpy).<span class="title function_">toHaveBeenCalledTimes</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证方法被调用时使用了特定参数</span></span><br><span class="line"><span class="title function_">expect</span>(fillRectSpy).<span class="title function_">toHaveBeenCalledWith</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure></li>
<li>清理间谍<br><code>fillRectSpy.mockRestore();</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">afterEach</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  jest.<span class="title function_">clearAllMocks</span>(); <span class="comment">// 清除所有间谍的调用记录</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="在代码中需要使用间谍的地方："><a href="#在代码中需要使用间谍的地方：" class="headerlink" title="在代码中需要使用间谍的地方："></a>在代码中需要使用间谍的地方：</h2><h3 id="验证图形绘制方法调用"><a href="#验证图形绘制方法调用" class="headerlink" title="验证图形绘制方法调用"></a>验证图形绘制方法调用</h3><p>如：选择矩形工具绘制时，验证 rect() 和 stroke() 方法是否被正确调用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 监视矩形绘制相关方法</span></span><br><span class="line"><span class="keyword">const</span> rectSpy = jest.<span class="title function_">spyOn</span>(ctx, <span class="string">&#x27;rect&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> strokeSpy = jest.<span class="title function_">spyOn</span>(ctx, <span class="string">&#x27;stroke&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行绘制操作</span></span><br><span class="line">fireEvent.<span class="title function_">click</span>(canvas, &#123; <span class="attr">clientX</span>: <span class="number">50</span>, <span class="attr">clientY</span>: <span class="number">50</span> &#125;);</span><br><span class="line">fireEvent.<span class="title function_">click</span>(canvas, &#123; <span class="attr">clientX</span>: <span class="number">150</span>, <span class="attr">clientY</span>: <span class="number">100</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证方法调用</span></span><br><span class="line"><span class="title function_">expect</span>(rectSpy).<span class="title function_">toHaveBeenCalledWith</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">100</span>, <span class="number">50</span>);</span><br><span class="line"><span class="title function_">expect</span>(strokeSpy).<span class="title function_">toHaveBeenCalled</span>();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js+ts</category>
      </categories>
  </entry>
  <entry>
    <title>博客篇-Nie-Blog的打怪升级之路</title>
    <url>/2025/02/13/%E5%8D%9A%E5%AE%A2%E6%89%93%E6%80%AA%E5%8D%87%E7%BA%A7%E7%AF%87/</url>
    <content><![CDATA[<h2 id="完美解决git上传报错unable-to-access"><a href="#完美解决git上传报错unable-to-access" class="headerlink" title="完美解决git上传报错unable to access"></a>完美解决git上传报错<code>unable to access</code></h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/Nie7-Melon/Nie7-Melon.github.io.git/&#x27;</span>: SSL certificate problem: unable to get <span class="built_in">local</span> issuer certificate</span><br><span class="line">FATAL Something<span class="string">&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span></span><br><span class="line"><span class="string">Error: Spawn failed</span></span><br></pre></td></tr></table></figure>
<p>尝试过换热点、校园网、开VPN、换代理、开github加速器（加速器只会让unable to access 报错迅速出现），统统失败<br><strong>最终解决方法：</strong></p>
<ol>
<li>设置系统代理<br>开启代理服务器，端口设置为7890<br><img src="/postImgs/other/daili1.png" alt="设置系统代理"></li>
<li>设置 Git 使用本地代理：<br> 在终端输入以下命令 <code>git config --global http.proxy http://127.0.0.1:7890</code></li>
<li>检查<br><code>git config --global -l</code></li>
<li>重新上传<br>  你会发现这次”嗖”一下就上传成功了！！我甚至没有开VPN和加速器</li>
</ol>
<h2 id="文章中的图片无法显示"><a href="#文章中的图片无法显示" class="headerlink" title="文章中的图片无法显示"></a>文章中的图片无法显示</h2><p>我在.md笔记中的图片很长一段时间无法在博客的文章中展示出来。<br>解决步骤：<br><strong>1. 是文件夹问题吗</strong><br>   由于source资源文件夹下面的文章文件夹是_posts，所以我开始在创建图片文件夹的时候也是使用_postImgs命名的，<br>   但是AI说：Hexo默认会忽略以_开头的文件夹（如_posts_imgs），因此你的图片可能没有被正确复制到生成的静态文件中<br>   所以把图片文件夹前面的下划线去掉了</p>
<p><strong>2. 是路径问题吗</strong><br>开始以为是相对路径和绝对路径的问题，因为AI说：Hexo在生成静态文件时，可能会将路径解析为相对于生成的HTML文件的位置，而不是相对于.md文件的位置，所以应该用绝对路径而不是相对路径。<br>但是我的两种路径都一直失败，我的图片放在source文件夹下的postImgs文件夹中</p>
<p><strong>3. 找到问题了！是hexo配置的问题！！</strong><br>确保Hexo的配置文件_config.yml中没有禁用资源文件的处理。<br>检查_config.yml中的post_asset_folder选项：<br>post_asset_folder: true<br><img src="/postImgs/blogUp2.png" alt="修改hexo配置后文章可以显示图片"></p>
<blockquote>
<p>如果设置为true，Hexo会为每篇博客创建一个同名文件夹，用于存放图片等资源。<br>可以将图片放在与.md文件同名的文件夹中，然后使用以下语法引用图片：<code>![blog内容上传成功](blogNew7.png)</code><br>我没有用这个引用方法，但是这个设置从默认的false改为true之后，2中使用相对路径或绝对路径都能够在博客中显示引用的postImgs文件夹中的图片</p>
</blockquote>
<h2 id="Typescript篇文章问题，页面一直404"><a href="#Typescript篇文章问题，页面一直404" class="headerlink" title="Typescript篇文章问题，页面一直404"></a>Typescript篇文章问题，页面一直404</h2><h3 id="如标题，出问题时配置如下"><a href="#如标题，出问题时配置如下" class="headerlink" title="如标题，出问题时配置如下"></a>如标题，出问题时配置如下</h3><p>文章文件名<code>07-TypeScript.md</code><br>文章头文件</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: TypeScript学习</span><br><span class="line">date: 2025-03-02 15:19:29</span><br><span class="line">description: TypeScript学习笔记</span><br><span class="line">categories: ts</span><br><span class="line">tags:</span><br><span class="line"><span class="section">- TypeScript</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<h3 id="deepseek解答"><a href="#deepseek解答" class="headerlink" title="deepseek解答"></a>deepseek解答</h3><p><strong>1. 文件名特殊字符问题</strong><br>规则：Hexo生成文章路径时，会将文件名中的<strong>空格、中文、特殊符号（如!、#）转换为URL编码格式，但某些符号可能导致路径生成异常</strong><br>操作：将文章的文件名改为全英文小写，并用短横线（-）分隔单词，例如 my-post-title.md<br>(在这里我的文章名没问题，但是<strong>以后要注意不要在文件名中使用中文</strong>)<br><strong>2. 文章名规范</strong><br>deepseek老师对我的文件命名做出了点评：<br><strong>文件名规范：建议去掉开头的数字 07-，Hexo默认以 YYYY-MM-DD-title.md 格式解析文件名中的日期。</strong></p>
<h3 id="成功解决："><a href="#成功解决：" class="headerlink" title="成功解决："></a>成功解决：</h3><p>我把文件名，分类和标签的TypeScript都改成了小写typescript，然后重新hexo cl,hexo g,hexo d这篇文章能够正常展示了！</p>
<h2 id="博客文件命名规范"><a href="#博客文件命名规范" class="headerlink" title="博客文件命名规范"></a>博客文件命名规范</h2><p>Hexo生成文章路径时，会将文件名中的<strong>空格、中文、特殊符号（如!、#）转换为URL编码格式，但某些符号可能导致路径生成异常</strong><br>Hexo生成的URL路径<strong>会将文件名转换为全小写（如 typescript），而如果文件名本身包含大写字母，可能导致路径不一致</strong><br>常见错误规避<br>日期冲突：两篇文章不可使用相同日期+标题组合，否则生成路径重复。<br>Front-matter格式：确保YAML缩进使用空格（非Tab），冒号后需有空格2<br>缓存问题：修改主题配置后需执行 hexo clean 清除缓存</p>
<h2 id="markdown中，文字内容对齐的四种方法"><a href="#markdown中，文字内容对齐的四种方法" class="headerlink" title="markdown中，文字内容对齐的四种方法"></a>markdown中，文字内容对齐的四种方法</h2><p>我想让代码码的描述在一竖行展示，并且对齐整齐，但是发现没有找到合适的方法，了解后总结一下方法：</p>
<h3 id="使用-Markdown-表格"><a href="#使用-Markdown-表格" class="headerlink" title="使用 Markdown 表格"></a>使用 Markdown 表格</h3><table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>Math.round()</code></td>
<td>四舍五入取整</td>
</tr>
<tr>
<td><code>Math.fround()</code></td>
<td>舍入到最接近的32位浮点数</td>
</tr>
<tr>
<td><code>Math.ceil()</code></td>
<td>向上取整 1.1 &#x3D;&gt; 2</td>
</tr>
<tr>
<td><code>Math.floor()</code></td>
<td>向下取整 1.9 &#x3D;&gt; 1</td>
</tr>
</tbody></table>
<h3 id="使用-HTML标签"><a href="#使用-HTML标签" class="headerlink" title="使用 HTML&lt;pre&gt;标签"></a>使用 HTML<code>&lt;pre&gt;</code>标签</h3><p>在<code>&lt;pre&gt;</code>标签中，空格和换行会被保留</p>
<pre>
Math.round()      四舍五入取整
Math.fround()     舍入到最接近的32位浮点数
Math.ceil()       向上取整 1.1 => 2
Math.floor()      向下取整 1.9 => 1
</pre>
<h3 id="使用代码块"><a href="#使用代码块" class="headerlink" title="使用代码块"></a>使用代码块</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">round</span>()      四舍五入取整</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">fround</span>()     舍入到最接近的<span class="number">32</span>位浮点数</span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">ceil</span>()       向上取整 <span class="number">1.1</span> =&gt; <span class="number">2</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">floor</span>()      向下取整 <span class="number">1.9</span> =&gt; <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="HTML和CSS自定义样式–gird布局"><a href="#HTML和CSS自定义样式–gird布局" class="headerlink" title="HTML和CSS自定义样式–gird布局"></a>HTML和CSS自定义样式–gird布局</h3><div style="display: grid; grid-template-columns: auto 1fr; gap: 10px;">
  <div><code>Math.round()</code></div>
  <div>四舍五入取整</div>
  <div><code>Math.fround()</code></div>
  <div>舍入到最接近的32位浮点数</div>
  <div><code>Math.ceil()</code></div>
  <div>向上取整 1.1 => 2</div>
  <div><code>Math.floor()</code></div>
  <div>向下取整 1.9 => 1</div>
</div>]]></content>
      <categories>
        <category>博客成长</category>
      </categories>
      <tags>
        <tag>博客完善</tag>
      </tags>
  </entry>
  <entry>
    <title>博客篇-我的hexo博客搭建</title>
    <url>/2024/11/07/%E6%88%91%E7%9A%84hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<h1 id="博客搭建"><a href="#博客搭建" class="headerlink" title="博客搭建"></a>博客搭建</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>安装node.js npm<br>我以前安装过，版本node v20.17.0 npm 10.8.3<br>安装淘宝镜像源，这样速度会快<br>npm install -g cnpm –registry&#x3D;<a href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org</a><br>我开始没有成功，输入npm cache clean –forece清除缓存后再安装成功<br>cnpm 版本9.4.0</li>
<li>用cnpm全局安装hexo<br>cnpm install -g hexo-cli<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">C</span>:\<span class="title class_">Users</span>\<span class="title class_">Administrator</span>&gt;hexo -v</span><br><span class="line">hexo-<span class="attr">cli</span>: <span class="number">4.3</span><span class="number">.2</span></span><br><span class="line"><span class="attr">os</span>: win32 <span class="number">10.0</span><span class="number">.22631</span> <span class="literal">undefined</span></span><br><span class="line"><span class="attr">node</span>: <span class="number">20.17</span><span class="number">.0</span></span><br><span class="line"><span class="attr">acorn</span>: <span class="number">8.11</span><span class="number">.3</span></span><br><span class="line"><span class="attr">ada</span>: <span class="number">2.9</span><span class="number">.0</span></span><br><span class="line"><span class="attr">ares</span>: <span class="number">1.32</span><span class="number">.3</span></span><br><span class="line"><span class="attr">base64</span>: <span class="number">0.5</span><span class="number">.2</span></span><br><span class="line"><span class="attr">brotli</span>: <span class="number">1.1</span><span class="number">.0</span></span><br><span class="line"><span class="attr">cjs_module_lexer</span>: <span class="number">1.2</span><span class="number">.2</span></span><br><span class="line"><span class="attr">cldr</span>: <span class="number">45.0</span></span><br><span class="line"><span class="attr">icu</span>: <span class="number">75.1</span></span><br><span class="line"><span class="attr">llhttp</span>: <span class="number">8.1</span><span class="number">.2</span></span><br><span class="line"><span class="attr">modules</span>: <span class="number">115</span></span><br><span class="line"><span class="attr">napi</span>: <span class="number">9</span></span><br><span class="line"><span class="attr">nghttp2</span>: <span class="number">1.61</span><span class="number">.0</span></span><br><span class="line"><span class="attr">nghttp3</span>: <span class="number">0.7</span><span class="number">.0</span></span><br><span class="line"><span class="attr">ngtcp2</span>: <span class="number">1.1</span><span class="number">.0</span></span><br><span class="line"><span class="attr">openssl</span>: <span class="number">3.0</span><span class="number">.13</span>+quic</span><br><span class="line"><span class="attr">simdutf</span>: <span class="number">5.3</span><span class="number">.0</span></span><br><span class="line"><span class="attr">tz</span>: 2024a</span><br><span class="line"><span class="attr">undici</span>: <span class="number">6.19</span><span class="number">.2</span></span><br><span class="line"><span class="attr">unicode</span>: <span class="number">15.1</span></span><br><span class="line"><span class="attr">uv</span>: <span class="number">1.46</span><span class="number">.0</span></span><br><span class="line"><span class="attr">uvwasi</span>: <span class="number">0.0</span><span class="number">.21</span></span><br><span class="line"><span class="attr">v8</span>: <span class="number">11.3</span><span class="number">.244</span><span class="number">.8</span>-node<span class="number">.23</span></span><br><span class="line"><span class="attr">zlib</span>: <span class="number">1.3</span><span class="number">.0</span><span class="number">.1</span>-motley-209717d</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="搭建博客"><a href="#搭建博客" class="headerlink" title="搭建博客"></a>搭建博客</h2><p>建立文件夹blog，从文件夹里打开终端<br>hexo init #生成博客 初始化博客</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo init</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Cloning</span> hexo-starter <span class="attr">https</span>:<span class="comment">//github.com/hexojs/hexo-starter.git</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Install</span> dependencies</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Start</span> blogging <span class="keyword">with</span> <span class="title class_">Hexo</span>!</span><br></pre></td></tr></table></figure>
<p>hexo s #启动本地博客服务</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo s</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Start</span> processing</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Hexo</span> is running at <span class="attr">http</span>:<span class="comment">//localhost:4000/ . Press Ctrl+C to stop.</span></span><br></pre></td></tr></table></figure>
<p>hexo n “我的第一篇文章” #创建新的文章</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo n <span class="string">&quot;我的第一篇文章&quot;</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Created</span>: <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog\source\_posts\我的第一篇文章.<span class="property">md</span></span><br></pre></td></tr></table></figure>
<p>然后在blog文件夹&#x2F;source&#x2F;_posts&#x2F;新增了一个“我的第一篇文章.md”文件<br>更新文章内容后，回到blog文件夹打开终端，先输入hexo clean，然后输入hexo g 生成，然后再hexo s启动</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo n <span class="string">&quot;我的第一篇文章&quot;</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Created</span>: <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog\source\_posts\我的第一篇文章.<span class="property">md</span></span><br><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo clean</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Deleted</span> database.</span><br><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo g</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Start</span> processing</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Files</span> loaded <span class="keyword">in</span> <span class="number">210</span> ms</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: archives/index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: archives/<span class="number">2024</span>/index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: css/style.<span class="property">css</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: js/script.<span class="property">js</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: archives/<span class="number">2024</span>/<span class="number">11</span>/index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: js/jquery-<span class="number">3.6</span><span class="number">.4</span>.<span class="property">min</span>.<span class="property">js</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: fancybox/jquery.<span class="property">fancybox</span>.<span class="property">min</span>.<span class="property">css</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: fancybox/jquery.<span class="property">fancybox</span>.<span class="property">min</span>.<span class="property">js</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: css/images/banner.<span class="property">jpg</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: <span class="number">2024</span>/<span class="number">11</span>/<span class="number">07</span>/我的第一篇文章/index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Generated</span>: <span class="number">2024</span>/<span class="number">11</span>/<span class="number">07</span>/hello-world/index.<span class="property">html</span></span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="number">12</span> files generated <span class="keyword">in</span> <span class="number">202</span> ms</span><br><span class="line"><span class="variable constant_">PS</span> <span class="attr">D</span>:\<span class="title class_">Pragram</span> code\blog&gt; hexo s</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Validating</span> config</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Start</span> processing</span><br><span class="line"><span class="variable constant_">INFO</span>  <span class="title class_">Hexo</span> is running at <span class="attr">http</span>:<span class="comment">//localhost:4000/ . Press Ctrl+C to stop.</span></span><br></pre></td></tr></table></figure>
<p><img src="/postImgs/blogNew1.png" alt="我把这篇markdown笔记内容贴了上去，成功在博客中展示"></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h3><p>退出hexo：ctrl + c (在键盘上按不是输入到终端！)<br>初始化博客：hexo init 文件夹名称<br>新建文章：hexo new 文章名称  (简写)hexo n 文章名称<br>清理缓存有时能解决报错： hexo clean<br>在线预览： hexo server(简写)hexo s<br>生成静态html文件：hexo generate（简写）hexo g<br>一键部署：hexo deploy (简写)hexo d<br><strong>在更新博客后要部署到github:hexo cl,hexo g,hexo d</strong></p>
<h3 id="Hexo常用命令解释"><a href="#Hexo常用命令解释" class="headerlink" title="Hexo常用命令解释"></a>Hexo常用命令解释</h3><ol>
<li>hexo cl (clean)<br>作用: 清理生成的缓存文件和静态文件。<br>具体行为:<br> 删除 public 文件夹（Hexo 生成的静态文件存放的地方）。<br> 删除 .cache 文件夹（Hexo 缓存文件存放的地方）。<br>用途:<br> 当你修改了某些配置或模板文件后，运行 hexo cl 可以清理旧的生成文件，确保重新生成的内容是最新的。</li>
<li>hexo g (generate)<br>作用: 根据 Markdown 源文件、主题模板和配置文件生成静态 HTML 文件。<br>具体行为:<br>Hexo 会读取 source 文件夹中的 Markdown 文件、_config.yml 配置文件，以及主题文件夹中的模板文件。<br>将 Markdown 文件通过模板引擎（如 EJS、Pug 等）渲染成 HTML 文件。<br>最终生成的静态文件会存储在 public 文件夹中。<br>用途: 这是将你的博客内容从 Markdown 转换成网页的核心步骤。</li>
<li>hexo d (deploy)<br>作用: 将生成的静态文件部署到远程仓库（如 GitHub Pages）。<br>具体行为:<br>读取 _config.yml 中的 deploy 配置。<br>将 public 文件夹中的静态文件上传到指定的远程仓库（通常是 GitHub Pages 的仓库）。<br>用途: 这一步是让你的博客内容上线的关键操作。</li>
</ol>
<h2 id="部署到github上"><a href="#部署到github上" class="headerlink" title="部署到github上"></a>部署到github上</h2><ol>
<li>在github上新建仓库<br>登录Github，新建一个仓库new repository，注意名字的命名一定要符合特定要求!!<br>仓库名一定要和前面Owner的名字一样，不然会404，<strong>我下面这个图是错的！</strong><br><strong>正确的仓库名是Nie7-Melon</strong><br><img src="/./postImgs/blogNew2.png" alt="新建仓库"></li>
<li>在blog文件夹下安装git插件<br>在文件夹中打开git bash，然后输入指令<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">cnpm install --save hexo-deployer-git</span><br></pre></td></tr></table></figure>
<img src="/postImgs/blogNew3.png" alt="文件夹中安装git插件"></li>
<li>设置_config.yml文件<br>打开文件，拉到最后，原来是这样的<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
补充扩展，把git和仓库地址加进去<br><img src="/./postImgs/blogNew4.png" alt="仓库地址"><br>补充后是这样的<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">&#x27;https://github.com/Nie7-Melon/melonnie77.github.io.git&#x27;</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">&#x27;master&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>部署 hexo d<br>在blog文件夹终端里或者git bash里面输入都可以<br>但是我在bit bash里面输入报错啦<img src="/postImgs/blogNew5.png" alt="报错"></li>
</ol>
<ol>
<li>可能因为我没有设置我的git的global身份<br>要先<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">git config --<span class="variable language_">global</span> user.<span class="property">email</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">git config --<span class="variable language_">global</span> user.<span class="property">name</span> <span class="string">&quot;xxx&quot;</span></span><br></pre></td></tr></table></figure>
但我输入这些还是报错呢<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="attr">fatal</span>: unable to access <span class="string">&#x27;https://github.com/Nie7-Melon/melonnie77.github.io.git/&#x27;</span>: <span class="title class_">OpenSSL</span> <span class="attr">SSL_read</span>: <span class="variable constant_">SSL_ERROR_SYSCALL</span>, errno <span class="number">0</span></span><br></pre></td></tr></table></figure></li>
<li>我把_config.yml文件里的https地址改成了SSH地址<br>还是会报错呢<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Please</span> make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个错误表明 Git 无法通过 SSH 连接到 GitHub 仓库，因为没有找到有效的 SSH 目标。以下步骤可以帮助您解决</p>
</blockquote>
</li>
<li>我又把_config.yml文件文件的地址改回了https地址，输入hexo d<br>这次好像成功了<img src="/./postImgs/blogNew6.png" alt="成功"><br>但是好像有时候成功有时候失败呢，不是一定成功<br>不成功的时候多换几个代理试试，总有一个会成功！<br>这时候再访问刚才在github上建的仓库<img src="/./postImgs/blogNew7.png" alt="blog内容上传成功"></li>
<li>但是！我访问<a href="https://melonnie77.github.io/%E4%B8%80%E7%9B%B4%E6%98%AF404%EF%BC%8C%E6%A3%80%E6%9F%A5%E5%8F%91%E7%8E%B0%EF%BC%8C%E4%BB%93%E5%BA%93%E5%90%8D%E5%A5%BD%E5%83%8F%E5%BF%85%E9%A1%BB%E5%92%8C%E6%88%91%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%80%E8%87%B4%E6%89%8D%E5%8F%AF%E4%BB%A5%EF%BC%81%EF%BC%81%EF%BC%81">https://melonnie77.github.io/一直是404，检查发现，仓库名好像必须和我的github用户名一致才可以！！！</a><br>我重新改了仓库名和_config.yml文件<img src="/./postImgs/blogNew8.png" alt="修改仓库名"><br>这次成功了<img src="/./postImgs/blogNew9.png" alt="https://nie7-melon.github.io/"></li>
</ol>
<h1 id="关于hexo"><a href="#关于hexo" class="headerlink" title="关于hexo"></a>关于hexo</h1><h2 id="hexo-butterfly主题-github，技术栈讲解"><a href="#hexo-butterfly主题-github，技术栈讲解" class="headerlink" title="hexo+butterfly主题+github，技术栈讲解"></a>hexo+butterfly主题+github，技术栈讲解</h2><ol>
<li>hexo<br>是基于node.js开发的静态网站生成器，核心功能是将markdown内容、主题模板、配置文件编译成静态的Html、css、js文件，供浏览器直接访问。</li>
<li>butterfly主题：<br>通过模板文件和样式文件，将 Hexo 生成的静态内容结构化为美观的网页。</li>
<li>GitHub + GitHub Pages（托管与部署）：<br>GitHub 是代码托管平台，而 GitHub Pages 是其提供的静态网站托管服务；通过插件（如 hexo-deployer-git）将生成的静态文件推送到 GitHub 仓库，最终通过 GitHub Pages 发布；<br>GitHub Pages	免费托管、全球 CDN 加速、与 Git 版本控制无缝集成。</li>
<li>工作流程：<br>Markdown 文章 → Hexo 编译 → 生成静态文件 → GitHub Pages 托管 → 用户访问<hr>
Hexo 通过主题配置文件（_config.yml）加载 Butterfly 主题，将 Markdown 内容填充到主题模板中，最终生成静态 HTML 文件。
Hexo 读取 Markdown 文件，解析其内容和元数据，结合主题模板生成最终的 HTML 页面。
通过将 Hexo 生成的静态文件推送到 GitHub 仓库，可以快速发布博客。
Hexo 的 deploy 命令依赖 GitHub 的 API 和 Git 协议，将本地生成的文件同步到 GitHub 仓库，最终通过 GitHub Pages 全球 CDN 加速访问
<hr></li>
</ol>
]]></content>
      <categories>
        <category>博客成长</category>
      </categories>
      <tags>
        <tag>博客完善</tag>
      </tags>
  </entry>
</search>
